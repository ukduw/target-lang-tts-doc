var _sz=_sz||[];_sz&&_sz.core&&_sz.core._isloaded!=null?_sz.core.warn&&_sz.core.warn("Script requested to load and execute again, this is not desirable and will be blocked"):(_sz.push(["accountid",76209]),_sz.push(["region","r1"]),_sz.push(["endpoint","global"]),_sz.push(["heatmap",{matches:{permanent:["https://am.jpmorgan.com/nl/nl/asset-management/per/","https://am.jpmorgan.com/us/en/asset-management/adv/","https://am.jpmorgan.com/us/en/asset-management/adv/insights/market-insights/guide-to-the-markets/","https://am.jpmorgan.com/us/en/asset-management/protected/adv/insights/market-insights/guide-to-the-markets/","https://privatebank.jpmorgan.com/gl/en/home"],include:[],exclude:[]}}]),_sz.push(["detect_struggles",{rageClick:{clickThreshold:4,clickRadius:20,timeWindowMs:2e3},excessiveScroll:{continuous:{pagesThreshold:3,timeWindowMs:1500},backAndForth:{minScrollHeightMultiplier:1.5,pagesThreshold:.5,timeWindowMs:1e3},rage:{directionChanges:4,timeWindowMs:1e3},debounceMs:1e3}}]),_sz.push(["observe",{guard:{domains:["privatebank.jpmorgan.com"]},flushInterval:15e3,recording:{masking:{elementMatches:[],input:{color:!0,date:!0,email:!0,number:!0,range:!0,search:!0,select:!0,tel:!0,text:!0,textarea:!0,url:!0}},blocking:{elementMatches:[]}},sampling:{rate:.0025}}]),_sz=_sz||[],function(w,d,sz,undefined){function process(args){var name=args[0];core.actions[name]===undefined?core.action("set",args):core.action(name,args.slice(1))}var core={curr:w.location.href,ref:d.referrer,esc:function(str){return encodeURIComponent(new String(str).replace(/(\r?\n)+/g," ").replace(/\s+/g," ").replace(/^\s+|\s+$/,""))},empty:function(e){return e==undefined||e==null||e==""},isarray:function(arr){return arr==undefined||arr==null?!1:Array&&typeof Array.isArray=="function"?Array.isArray(arr):Object.prototype.toString.call(arr)==="[object Array]"},tag:function(str){return d.getElementsByTagName?d.getElementsByTagName(str):[]},id:function(str){return d.getElementById?d.getElementById(str):!1},clone:function(o){var n={};for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);return n},rnd:function(){return Math.floor(Math.random()*1e5)},txt:function(o){return o.textContent?o.textContent:o.innerText},trim:function(str){return!str||typeof str!="string"?str:typeof str.trim=="function"?str.trim():str.replace(/^\s+|\s+$/gi,"")},uuid:function(){var S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},navtime:function(){var perf=w.performance||w.webkitPerformance||w.mozPerformance||w.msPerformance;return!perf||!perf.timing||perf.timing.navigationStart<1?null:(new Date).getTime()-perf.timing.navigationStart},_isready:!1,_readyhandlers:[],register:function(n,f){f.base=this.actions[n];this.actions[n]=f},actions:{},action:function(n,a){this.actions[n].apply(this.actions,a)},data:[],ready:function(f){if(f===undefined)return this._isready||core.done();this.when(this.ready,f)},queueready:function(f){this._isready&&core.done()?f():this._readyhandlers.push(f)},done:function(){return this._isloaded&&d&&d.body!=null&&(d.readyState=="interactive"||d.readyState=="complete")},_isloaded:!1,_whenTimer:null,when:function(cond,what){cond()?what():setTimeout(function(){core.when(cond,what)},50)},fmt:function(){for(var reg,_a=Array.prototype.slice.call(arguments),s=_a[0],a=_a.slice(1),i=0;i<a.length;i++)reg=new RegExp("\\{"+i+"\\}","gm"),s=s.replace(reg,a[i]);return s},listen:function(e,h){e.addEventListener?e.addEventListener("mousedown",h,!1):e.attachEvent&&e.attachEvent("onmousedown",h)},load:function(src){var szfb=d.createElement("script"),s;szfb.type="text/javascript";szfb.async=!0;szfb.src=src;s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(szfb,s)},global:function(n){return w[n]!==undefined&&w[n]!==null?w[n]:null},_images:[],_idx:0,requesturl:function(p,o){var params=[],val,seenValues,a,paramValue,i,url;o.rnd=sz.core.rnd();for(i in o)if(val=o[i],!this.empty(val))if(this.isarray(val))for(seenValues={},a=0;a<val.length;a++)this.empty(val[a])||(paramValue=this.esc(val[a]),seenValues[paramValue]==null&&(params.push(i+"="+paramValue),seenValues[paramValue]=!0));else params.push(i+"="+this.esc(val));return i=this._idx++,url=p+"?"+params.join("&"),url},request:function(p,o){var url=this.requesturl(p,o);this._images[i]=new Image;this._images[i].src="https://"+url;this.log("Requesting {0}",url)},fetch:function(resource,options){if(!w.fetch||typeof w.fetch!="function")return(this.warn("Fetch not available, cannot request {0}",resource),Promise&&typeof Promise.reject=="function")?Promise.reject(new Error("Fetch not available")):void 0;if(!resource)return(this.warn("Invalid fetch resource {0}",resource),Promise&&typeof Promise.reject=="function")?Promise.reject(new Error("Invalid fetch resource")):void 0;this.log("Fetching {0}",resource);var p=w.fetch(resource,options),self=this;return p.catch(function(reason){self.warn.apply(self,["Failed to fetch {0}: {1}",resource,reason])}),p},_logqueue:[],_logshown:!1,log:function(){this._logqueue.push({type:"msg",msg:Array.prototype.slice.call(arguments)});this._logshown&&this.showlog()},warn:function(){this._logqueue.push({type:"warn",msg:Array.prototype.slice.call(arguments)});this._logshown&&this.showlog()},showlog:function(){var dw,s,i,o,_e,_c;for(this._logshown=!0,dw=d.getElementById("szdebugarea"),dw&&dw.parentNode.removeChild(dw),s="",i=0;i<this._logqueue.length;i++)o=this._logqueue[i],s+='<p style="padding:8px;margin:0;margin-bottom:8px;background:#'+(o.type=="msg"?"FFF7C9":"ca0000;color:white")+';">'+(o.type=="warn"?"<b>Warning:<\/b> ":"")+decodeURIComponent(new String(this.fmt.apply(this,o.msg)).replace(/(&[a-z_]+=|\?)/g,"<br />&nbsp;&nbsp;&nbsp;$1"))+"<\/p>";_c=d.createElement("a");_c.href="#";_c.innerHTML="Ã— Close";_c.style.cssText="display:block;float:right;color:black;text-decoration:none;";_c.onclick=function(){return _e.parentNode.removeChild(_e),core._logshown=!1,!1};_e=d.createElement("div");_e.style.cssText="position:fixed;top:10px;right:10px;background:white;border:1px #ccc solid;width:800px;padding:20px;padding-bottom:10px;font-size:12px;font-family:Arial;line-height:135%;max-height:90%;overflow-y:auto;text-align:left;z-index:999";_e.innerHTML=s;_e.id="szdebugarea";_e.appendChild(_c);d.body.appendChild(_e)},cookie:function(n,v,o){var expires,date,cookiev,cookies,i,cookie;if(typeof v!="undefined"){o=o||{path:"/"};v===null&&(v="",o.expires=-1);expires="";o.expires&&(typeof o.expires=="number"||o.expires.toUTCString)&&(typeof o.expires=="number"?(date=new Date,date.setTime(date.getTime()+o.expires*864e5)):date=o.expires,expires="; expires="+date.toUTCString());var path=o.path?"; path="+o.path:"; path=/",domain=o.domain?"; domain="+o.domain:"",secure=o.secure?"; secure":"",sameSite=o.sameSite?"; samesite="+o.sameSite:"; samesite=lax";d.cookie=[n,"=",encodeURIComponent(v),expires,path,domain,secure,sameSite,].join("")}else{if(cookiev=null,d.cookie&&d.cookie!=="")for(cookies=d.cookie.split(";"),i=0;i<cookies.length;i++)if(cookie=cookies[i].replace(/^\s+|\s+$/g,""),cookie.substring(0,n.length+1)==n+"="){cookiev=decodeURIComponent(cookie.substring(n.length+1));break}return cookiev}}},data,orig,i;for(core.register("set",function(name,val){for(var parts=name.split("."),prop=sz,key;parts.length>0;){if(key=parts.shift(),prop[key]===undefined){prop=0;break}if(parts.length==0)break;prop=prop[key]}prop&&key?prop[key]=val:core.warn("No property named {0}",name)}),core.register("register",function(args){core.register(args[0],args[1])}),core.register("custom",function(f,name){var msg="Running custom function";name&&name!=""&&(msg+=": <strong>"+name+"<\/strong>");core.log(msg);try{f()}catch(e){core.warn("Custom function failed! "+e.message)}}),core.register("setcurr",function(v){core.curr=v}),core.register("setref",function(v){core.ref=v}),core.register("loaded",function(){core._isloaded=!0}),core.register("showlog",function(){core.showlog()}),data=[],orig=[],i=0;i<sz.length;i++)data.push(sz[i]),orig.push(sz[i]);core.data=data;core.ready(function(){for(var i=0;i<orig.length;i++)process(orig[i]);while(core._readyhandlers.length>0)core._readyhandlers.shift().call();core._isready=!0});sz.push=function(args){core.data.push(args);core.ready()?process(args):core._readyhandlers.push(function(){process(args)})};sz.core=core}(window,document,_sz),function(w,d,sz,undefined){function request(path,reqObj,callback){sz.core.request(path,reqObj);callback&&typeof callback=="function"&&callback()}function fetchRequest(path,reqObj,fetchOptions){fetchOptions=fetchOptions||{};var resource,requestOptions={},requestParams={};if(reqObj!=null)for(k in reqObj)reqObj.hasOwnProperty(k)&&!sz.core.empty(reqObj[k])&&(requestParams[k]=reqObj[k]);return fetchOptions.method=="POST"||fetchOptions.method=="post"?(resource="https://"+path,requestOptions={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(requestParams)}):(resource="https://"+sz.core.requesturl(path,requestParams),requestOptions={method:"GET"}),fetchOptions.keepAlive===!0&&(requestOptions.keepalive=!0),sz.core.fetch(resource,requestOptions)}function trackOnClick(href){request(sz.analytics.endpoint.fullpath(),{accountid:opts.accountid,prev:opts.prev,ourl:href,ref:w.location.href,autoonclick:1,ckl:opts.ckl,rt:null})}function excludeOnClick(href,exclusions){var currentHref,i;try{if(currentHref=w.location.href.split("#")[0],href==null||href==""||href.toLowerCase().indexOf("javascript:")==0||href.indexOf("#")==0||href.charAt(href.length-1)=="#"||href==w.location.href||href==currentHref||href.indexOf(currentHref+"#")==0)return!0;if(sz.core.isarray(exclusions)!==!0)return!1;for(i=0;i<exclusions.length;i++)if(href.indexOf(exclusions[i])!==-1)return!0;return!1}catch(err){return!0}}function registeronclick(except){if(sz.analytics.config.cantrack&&!sz.analytics.state.onclickattached&&sz.analytics.config.noonclick!==!0){var anchors=sz.core.tag("a"),areas=sz.core.tag("area"),attachonclick=function(links){for(var l,i=0;i<links.length;i++)(l=links[i],excludeOnClick(l.href,except))||function(link){sz.core.listen(link,function(evt){evt&&evt[sz.analytics.config.onClickKey]===!0||(trackOnClick(link.href),evt&&(evt[sz.analytics.config.onClickKey]=!0))});l[sz.analytics.config.onClickKey]=!0}(l)};sz.core.log("Attaching onclick handlers");attachonclick(anchors);attachonclick(areas);sz.analytics.state.onclickattached=!0}}function registerOnClickFallback(){if(document.body==null||typeof document.body.addEventListener!="function"){sz.core.warn("Unable to attach onclick fallback handler");return}typeof document.body.removeEventListener!="function"&&document.body.removeEventListener("mousedown",handleOnClickFallbackEvent);document.body.addEventListener("mousedown",handleOnClickFallbackEvent);sz.core.log("Attached onclick fallback handler")}function handleOnClickFallbackEvent(evt){var elm,href;sz.analytics.config.noonclick!==!0&&evt!=null&&evt.target!=null&&typeof evt.target.closest=="function"&&evt[sz.analytics.config.onClickKey]!==!0&&(elm=evt.target.closest("a, area"),elm&&(href=elm.href,href&&!excludeOnClick(href,sz.analytics.config.noonclick)&&trackOnClick(href),evt[sz.analytics.config.onClickKey]=!0))}function eventParams(category,action,label){return{aid:opts.accountid,url:opts.url,luid:opts.luid,prev:opts.prev,c:category,a:action,l:label,cid:opts.cid,addcid:opts.addcid,ckl:opts.ckl,o:++eventOrder,d:Math.round((new Date-sz.analytics.state.requestTime)/1e3)}}function searchParams(searchTerm,results){var searchOpts={aid:opts.accountid,url:opts.url,luid:opts.luid,prev:opts.prev,search_term:searchTerm,cid:opts.cid,addcid:opts.addcid,ckl:opts.ckl,o:++searchOrder,d:Math.round((new Date-sz.analytics.state.requestTime)/1e3)};return results!=null&&(searchOpts.results=results),searchOpts}function feedbackParams(feedbackId,feedbackUid,rating,comment){var feedbackOpts={aid:opts.accountid,url:opts.url,title:opts.title,luid:opts.luid,prev:opts.prev,feedback_id:feedbackId,sluid:feedbackUid,cid:opts.cid,addcid:opts.addcid,ckl:opts.ckl,o:++feedbackOrder,d:Math.round((new Date-sz.analytics.state.requestTime)/1e3)};return rating!=null&&typeof rating=="number"&&(feedbackOpts.rating=rating),comment&&(feedbackOpts.comment=comment),feedbackOpts}function pingParams(pingValues){var pingOpts={aid:opts.accountid,url:opts.url,luid:opts.luid,prev:opts.prev,cid:opts.cid,addcid:opts.addcid,ckl:opts.ckl,o:++pingOrder};for(k in pingValues)pingValues.hasOwnProperty(k)&&(pingOpts[k]=pingValues[k]);return pingOpts}function hasdonottrack(){var dnt=window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack;return dnt=="yes"||dnt=="1"||window.external&&window.external.msTrackingProtectionEnabled&&window.external.msTrackingProtectionEnabled()}function whenTracked(callback){sz.core.when(function(){return sz.analytics.state.tracked},callback)}function pingFlush(){sz.push([registry.ping,!0])}function usePing(){pingHandle!=null&&(clearInterval(pingHandle.interval),d.removeEventListener("visibilitychange",pingHandle.listener));sz.analytics.ping.enabled=!0;var pingInterval=Math.max(~~sz.analytics.ping.interval,5e3);pingHandle={interval:setInterval(function(){sz.push([registry.ping,!1])},pingInterval),listener:function(){d.visibilityState=="hidden"&&pingFlush()}};d.addEventListener("visibilitychange",pingHandle.listener);sz.core.log("Enabled ping functionality")}function resetTrackingState(){sz.analytics.state.tracked=!1;sz.analytics.state.onclickattached=!1;eventOrder=0;searchOrder=0;feedbackOrder=0;pingOrder=0;lastPing="{}";sz.analytics.timeTracker!=null&&sz.analytics.timeTracker.reset()}var registry={afterPageviewTracked:"after_pageview_tracked",attachOnClick:"attachonclick",breadcrumbs:"breadcrumbs",dump:"dump",endpoint:"endpoint",event:"event",feedbackResponse:"feedback_response",feedbackView:"feedback_view",groupSelector:"groupselector",invokeTracking:"invoketracking",kvp:"kvp",metaGroupName:"metagroupname",noOnClick:"noonclick",noTrack:"notrack",observe:"observe",param:"param",path:"path",ping:"ping",region:"region",request:"request",search:"search",set:"set",trackDynamic:"trackdynamic",trackPageview:"trackpageview"},opts={url:w.location.href,ref:d.referrer,title:d.title,res:w.screen.width+"x"+w.screen.height,accountid:"{ACCOUNT_ID}",groups:null,path:null,hits:null,sw:null,cid:null,rt:sz.core.navtime(),prev:null,ourl:null,luid:sz.core.uuid(),feedbackid:null,addcid:null,dnt:null,ckl:null},internalOpts={grk:null,kvps:null,breadcrumbsSelector:null,groupSelector:null,metaGroupName:null},defaultTracker=function(){sz.push([registry.invokeTracking])},tracker=defaultTracker,getRootDomain=function(){var result=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{3,}|[-\w]+\.[-\w]{2})$/i.exec(location.hostname);return(result&&result.length==1?result[0]:location.hostname).replace(/^www\./i,"")},getTimeTracker=function(){if(!w.performance||typeof w.performance.now!="function")return null;var tracker={_value:0,_marker:null,time:function(){var value=this._value,now;return this._marker!=null&&(now=w.performance.now(),value=this._value+Math.max(0,now-this._marker)),Math.round(value)},start:function(){this._marker==null&&(this._marker=w.performance.now())},stop:function(){if(this._marker!=null){var now=w.performance.now();this._value+=Math.max(0,now-this._marker);this._marker=null}},reset:function(){this._value=0;this._marker=null;this.updateState()},updateState:function(){d.visibilityState=="visible"?this.start():this.stop()}};return d.addEventListener("visibilitychange",()=>{tracker.updateState()}),tracker.updateState(),tracker},internalEventTypes={afterPageviewTracked:"after_pageview_tracked"},internalEventHandlers={notify:function(eventType){var args=Array.prototype.slice.call(arguments,1),eventTypeConfiguration=internalEventHandlers[eventType],listeners,i;if(eventTypeConfiguration&&typeof eventTypeConfiguration=="object"&&(listeners=eventTypeConfiguration.listeners,listeners&&listeners.length&&!(listeners.length<1)))for(i=0;i<listeners.length;i++)try{listeners[i].apply(null,args)}catch(e){sz.core.warn("Failed to notify listener {0} for event type {1} due to: {2}",i,eventType,e)}},[internalEventTypes.afterPageviewTracked]:{listeners:[],notify:function(trackOpts){internalEventHandlers.notify(internalEventTypes.afterPageviewTracked,trackOpts)}}},eventOrder,searchOrder,feedbackOrder,pingOrder,pingHandle,lastPing,getKvpValues;sz.analytics={config:{cantrack:!0,noonclick:!1,trackTime:!1,ready:!1,onClickKey:"szaocHandled"+sz.core.rnd(),cookieless:!1},cookie:{name:"nmstat",domain:getRootDomain(),expires:1e3,secure:!1,sameSite:null},endpoint:{configured:!1,host:"{ACCOUNT_ID}.global",domain:"siteimproveanalytics.io",path:"image.aspx",fullpath:function(host,path){return sz.analytics.endpoint.configure(),path||(path=host,host=this.host),(host||this.host)+"."+this.domain+"/"+(path||this.path)},configure:function(){sz.analytics.endpoint.configured||(sz.analytics.endpoint.host=sz.analytics.endpoint.host.replace("{ACCOUNT_ID}",opts.accountid||"shared"),sz.core.log("Configured host: {0}.{1}",sz.analytics.endpoint.host,sz.analytics.endpoint.domain),sz.analytics.endpoint.configured=!0)}},state:{requested:!1,requestTime:new Date,tracked:!1,onclickattached:!1},observer:null,ping:{enabled:!1,interval:3e4},region:"",timeTracker:null,getRootDomain:getRootDomain,replaceTracker:function(newTracker){tracker=typeof newTracker=="function"?newTracker:defaultTracker},opts:function(k){return opts[k]},getSessionId:function(){var cookieValue,cookieOptions,storedValue;return sz.analytics.config.cantrack&&!sz.analytics.config.cookieless?(cookieValue=sz.core.cookie(sz.analytics.cookie.name),cookieValue||(cookieValue=sz.core.uuid(),cookieOptions={expires:sz.analytics.cookie.expires,domain:sz.analytics.cookie.domain,secure:sz.analytics.cookie.secure,sameSite:sz.analytics.cookie.sameSite},sz.core.cookie(sz.analytics.cookie.name,cookieValue,cookieOptions),storedValue=sz.core.cookie(sz.analytics.cookie.name),storedValue||(sz.core.log("Failed to set cookie at domain '{0}', using fallback domain '{1}' instead",sz.analytics.cookie.domain,location.hostname),cookieOptions.domain=location.hostname,sz.core.cookie(sz.analytics.cookie.name,cookieValue,cookieOptions))),cookieValue):null},setCookieless:function(){var prevCookie=null;return function(enable){enable===!0?sz.analytics.config.cookieless||(sz.analytics.config.cookieless=!0,opts.ckl="1",prevCookie||(prevCookie=sz.core.cookie,sz.core.cookie=function(key,value){if(value!=undefined){sz.core.warn("All cookie functionality has been disabled. Not writing cookie {0} with value {1}",key,value);return}return prevCookie(key)})):(opts.ckl=null,prevCookie&&(sz.core.cookie=prevCookie,prevCookie=null));opts.prev=sz.analytics.getSessionId();sz.core.log("Prev refresh after cookieless config change: {0}",opts.prev)}}(),eventHandlers:function(){return{afterPageviewTracked:[].concat(internalEventHandlers[internalEventTypes.afterPageviewTracked].listeners)}}};sz.analytics.request=function(path,reqObj,callback){request(path,reqObj,callback)};sz.analytics.fetchRequest=function(path,reqObj,fetchOptions){return fetchRequest(path,reqObj,fetchOptions)};sz.core.register(registry.attachOnClick,function(){registeronclick(sz.analytics.config.noonclick);registerOnClickFallback()});eventOrder=0;searchOrder=0;feedbackOrder=0;pingOrder=0;pingHandle=null;sz.core.register(registry.endpoint,function(endpointHost){endpointHost?(sz.analytics.endpoint.host=endpointHost.indexOf("{ACCOUNT_ID}")<0?"{ACCOUNT_ID}."+endpointHost:endpointHost,sz.analytics.endpoint.configured=!1,sz.analytics.endpoint.configure()):sz.core.warn("Could not reconfigure endpoint host.")});sz.core.register(registry.region,function(region){region?(sz.core.log("Setting analytics region to: {0}",region),sz.analytics.region=region):sz.core.warn("Could not configure analytics region.")});sz.core.register(registry.event,function(category,action,label){if(category&&action){if(!sz.analytics.config.cantrack)return}else{sz.core.warn("Category and action must be provided for event.");return}whenTracked(function(){request(sz.analytics.endpoint.fullpath("event.aspx"),eventParams(category,action,label))})});sz.core.register(registry.search,function(searchTerm,results){if(searchTerm){if(!sz.analytics.config.cantrack)return}else{sz.core.warn("Search term must be provided for searches.");return}whenTracked(function(){request(sz.analytics.endpoint.fullpath("search.aspx"),searchParams(searchTerm,results))})});sz.core.register(registry.feedbackView,function(feedbackId,feedbackUid){if(sz.analytics.config.cantrack){if(!feedbackId){sz.core.warn("Feedback id must be provided for feedback views.");return}if(!feedbackUid){sz.core.warn("Feedback log id must be provided for feedback views.");return}whenTracked(function(){request(sz.analytics.endpoint.fullpath("surveyview.aspx"),feedbackParams(feedbackId,feedbackUid))})}});sz.core.register(registry.feedbackResponse,function(feedbackId,feedbackUid,rating,comment){if(sz.analytics.config.cantrack){if(!feedbackId){sz.core.warn("Feedback id must be provided for feedback responses.");return}if(!feedbackUid){sz.core.warn("Feedback log id must be provided for feedback responses.");return}if((rating==null||rating<1)&&!comment){sz.core.warn("Feedback responses must provide either a rating or a comment.");return}whenTracked(function(){request(sz.analytics.endpoint.fullpath("surveyresponse.aspx"),feedbackParams(feedbackId,feedbackUid,rating,comment))})}});lastPing="{}";sz.core.register(registry.ping,function(){var pingValues,trackedTimeMs,observedEvents,observedDuration,nextPing;sz.analytics.config.cantrack&&((pingValues={},sz.analytics.config.trackTime&&sz.analytics.timeTracker!=null&&(trackedTimeMs=sz.analytics.timeTracker.time(),typeof trackedTimeMs=="number"&&trackedTimeMs>0&&(pingValues.tms=trackedTimeMs)),sz.analytics.observer!=null&&(observedEvents=sz.analytics.observer.isRecording?sz.analytics.observer.recordedEvents:0,observedEvents>0&&(pingValues.obsevt=observedEvents),observedDuration=sz.analytics.observer.isRecording?sz.analytics.observer.recordedDuration:0,observedDuration>0&&(pingValues.obstms=observedDuration)),Object.keys(pingValues)<1)||(nextPing=JSON.stringify(pingValues),nextPing!=lastPing)&&(whenTracked(function(){fetchRequest(sz.analytics.endpoint.fullpath("ping.aspx"),pingParams(pingValues),{method:"GET",keepAlive:d.visibilityState=="hidden"})}),lastPing=nextPing))});sz.core.register(registry.dump,function(){console.debug(sz.analytics);console.debug(opts);console.debug(internalOpts)});sz.core.register(registry.noOnClick,function(v){sz.analytics.config.noonclick=v});sz.core.register(registry.afterPageviewTracked,function(handler){typeof handler=="function"?internalEventHandlers[internalEventTypes.afterPageviewTracked].listeners.push(handler):sz.core.warn("Invalid argument provided to after pageview tracked, was expecting function, but got {0}",typeof handler)});sz.core.register(registry.set,function(name,value){opts.hasOwnProperty(name)?opts[name]=value:this.set.base(name,value)});sz.core.register(registry.breadcrumbs,function(selector){var bc,extractedPath;(internalOpts.breadcrumbsSelector=selector,selector&&d.querySelector)&&(bc=d.querySelector(selector),bc&&(extractedPath=sz.core.trim(sz.core.txt(bc)),sz.core.empty(extractedPath)||sz.push([registry.path,extractedPath])))});sz.core.register(registry.path,function(newPath){sz.core.empty(newPath)||(opts.path=newPath,sz.push([registry.kvp,"path",newPath]),sz.core.log("Path set: {0}",newPath))});sz.core.register(registry.groupSelector,function(selector){var res,groups,i,t,values,j;if(internalOpts.groupSelector=selector,selector&&d.querySelectorAll){for(res=d.querySelectorAll(selector),groups=[],sz.core.empty(opts.groups)||(groups=opts.groups.split(",")),i=0;i<res.length;i++)if(t=sz.core.trim(sz.core.txt(res[i])),!sz.core.empty(t))for(values=t.split(","),j=0;j<values.length;j++)groups.push(values[j]);groups.length>0&&(opts.groups=groups.join(","),sz.push([registry.kvp,"szGroupName",groups]),sz.core.log("Groups set: {0}",groups.join(", ")))}});sz.core.register(registry.metaGroupName,function(name){var me,gc,i,metaValue,values,j;for(internalOpts.metaGroupName=name,me=sz.core.tag("meta"),gc=[],sz.core.empty(opts.groups)||(gc=opts.groups.split(",")),i=0;i<me.length;i++)if(me[i].name==name&&(metaValue=sz.core.trim(me[i].content),!sz.core.empty(metaValue)))for(sz.core.log("Metagroup pushing group for meta name {0}: {0}",me[i].name,me[i].content),values=metaValue.split(","),j=0;j<values.length;j++)gc.push(values[j]);gc.length>0&&(opts.groups=gc.join(","),sz.push([registry.kvp,"szGroupName",gc]),sz.core.log("Metagroup set: {0}",gc.join(", ")))});sz.core.register(registry.param,function(n,v){if(typeof n=="object")for(i in n)n.hasOwnProperty(i)&&sz.push([registry.param,i,n[i]]);else sz.core.log("Param {0} = {1}",n,v),internalOpts.grk==null&&(internalOpts.grk={}),internalOpts.grk[n]=v});getKvpValues=function(input){var values=[];if(sz.core.isarray(input))for(i=0;i<input.length;i++)sz.core.empty(input[i])||values.push(input[i]);else sz.core.empty(input)||values.push(input);return values};sz.analytics.addKvpValues=function(n,v,replace){var values,j;if(typeof n=="object")for(i in n)n.hasOwnProperty(i)&&sz.analytics.addKvpValues(i,n[i],replace);else{if(values=getKvpValues(v),internalOpts.kvps==null&&(internalOpts.kvps={}),replace===!0)internalOpts.kvps[n]=values;else for(internalOpts.kvps[n]=internalOpts.kvps[n]||[],j=0;j<values.length;j++)internalOpts.kvps[n].push(values[j]);sz.core.log("Kvp {0} = {1}",n,JSON.stringify(internalOpts.kvps[n]))}};sz.core.register(registry.kvp,function(n,v,replace){sz.analytics.addKvpValues(n,v,replace)});sz.core.register(registry.request,function(data){data.accountid===undefined&&(data.accountid=opts.accountid);request(sz.analytics.endpoint.fullpath(),data)});sz.core.register(registry.trackPageview,function(){var c=sz.analytics,trackOpts,grkKey,kvpKey;if(!c.state.tracked&&c.config.cantrack&&c.config.ready){if(trackOpts=sz.core.clone(opts),internalOpts.grk!=null)for(grkKey in internalOpts.grk)internalOpts.grk.hasOwnProperty(grkKey)&&(trackOpts["grk_"+grkKey]=internalOpts.grk[grkKey]);if(internalOpts.kvps!=null)for(kvpKey in internalOpts.kvps)internalOpts.kvps.hasOwnProperty(kvpKey)&&(trackOpts["kvp_"+kvpKey]=internalOpts.kvps[kvpKey]);request(c.endpoint.fullpath(),trackOpts,function(){c.state.tracked=!0;c.state.requestTime=new Date;trackOpts.sw&&sz.push([registry.search,trackOpts.sw,trackOpts.hits])});try{internalEventHandlers[internalEventTypes.afterPageviewTracked].notify(trackOpts)}catch(e){sz.core.warn("Failed to notify after pageview tracked listeners")}}else c.state.tracked&&sz.core.log("Already tracked...")});sz.core.register(registry.noTrack,function(v){v===undefined&&(v=!0);v?sz.core.cookie("sz_notrack","true",{expires:1825}):sz.core.cookie("sz_notrack",null);sz.analytics.config.cantrack=!v});sz.tracking=function(){return sz.analytics.config.cantrack};sz.donottrack=function(){return opts.dnt===!0&&!!hasdonottrack()};sz.core.register(registry.trackDynamic,function(params){var curUrl,i;if(pingFlush(),curUrl=opts.url,opts.url=w.location.href,opts.ref=curUrl,opts.title=d.title,opts.luid=sz.core.uuid(),opts.rt=null,opts.ourl=null,opts.groups=null,opts.path=null,opts.hits=null,opts.sw=null,internalOpts.grk=null,internalOpts.kvps=null,resetTrackingState(),internalOpts.breadcrumbsSelector&&sz.push([registry.breadcrumbs,internalOpts.breadcrumbsSelector]),internalOpts.groupSelector&&sz.push([registry.groupSelector,internalOpts.groupSelector]),internalOpts.metaGroupName&&sz.push([registry.metaGroupName,internalOpts.metaGroupName]),params)if(typeof params!="object"||params instanceof Array){if(params.length>0)for(i=0;i<params.length;i++)sz.push(params[i])}else for(k in params)params.hasOwnProperty(k)&&sz.push([k,params[k]]);sz.push([registry.invokeTracking])});sz.core.register(registry.invokeTracking,function(){if(!!sz.analytics.config.cantrack&&sz.donottrack()&&(sz.core.log("Do not track enabled"),sz.analytics.config.cantrack=!1),!sz.analytics.config.cantrack){sz.core.log("Tracking not enabled, skipping invocation");return}sz.push([registry.trackPageview])});sz.core.ready(function(){if(sz.core.log("Running ready at {0}",(new Date).getTime()),sz.core.cookie("sz_notrack")!==null&&sz.push([registry.noTrack]),opts.prev=sz.analytics.getSessionId(),sz.core.log("Prev initially set: {0}",opts.prev),sz.push([registry.afterPageviewTracked,function(){sz.analytics.state.onclickattached=!1;registeronclick(sz.analytics.config.noonclick);registerOnClickFallback()},]),sz.analytics.config.trackTime===!0){var timeTracker=getTimeTracker();timeTracker!=null&&(sz.analytics.timeTracker=timeTracker,sz.core.log("Enabled time tracker"),usePing())}sz.analytics.config.ready=!0;tracker()})}(window,document,_sz),function(w,d,sz,undefined){function initializeListeners(){var elmTagName,elms,i;if(state.supportQuerySelector){sz.core.log("Attaching behaviour map mousedown handlers");helpers.on(d,"mousedown",listeners.click);for(elmTagName in consts.boundingElements)if(consts.boundingElements.hasOwnProperty(elmTagName)&&consts.boundingElements[elmTagName]==!0){elms=sz.core.tag(elmTagName);for(i in elms)helpers.on(elms[i],"mousedown",listeners.click)}}sz.core.log("Attaching behaviour map scroll + resize handlers");helpers.on(w,"scroll",listeners.scroll);helpers.on(w,"resize",listeners.resize)}function dispatch(e){var payload,params;if(e){switch(e.type){case"click":payload="c|"+e.point.x+"|"+e.point.y+"|"+e.path;break;case"scroll":payload="s|"+e.pos.l+"|"+e.pos.t;break;default:return}params=payloadparams(payload);sz.analytics.request(sz.analytics.endpoint.fullpath("heat.aspx"),params)}}function payloadparams(chunk){var ws=helpers.viewPort();return{aid:sz.analytics.opts("accountid"),url:sz.analytics.opts("url"),luid:sz.analytics.opts("luid"),prev:sz.analytics.opts("prev"),p:chunk,ww:ws.w,wh:ws.h,cid:sz.analytics.opts("cid"),addcid:sz.analytics.opts("addcid"),ckl:sz.analytics.opts("ckl"),o:++hmOrder,d:Math.round((new Date-sz.analytics.state.requestTime)/1e3)}}var config={scrollDelay:350,resizeDelay:350},state={running:!1,initViewPort:null,supportQuerySelector:!0,clickCount:0,scrollHandle:null,lastViewPort:{l:0,t:0},scrollCount:0},consts={hostnameRx:/^([\w@:.-]+)$/i,pathnameRx:/((?:\/\w+)*\/[-\w.]+[^#&?\s]*)$/i,maxSrcLen:50,boundingElements:{A:!0,AREA:!0,ARTICLE:!1,BODY:!1,BUTTON:!0,DIV:!1,FOOTER:!1,FRAME:!1,IFRAME:!1,H1:!1,H2:!1,H3:!1,H4:!1,H5:!1,H6:!1,HEADER:!1,HTML:!1,IMG:!0,INPUT:!0,LABEL:!1,LI:!1,MAIN:!1,SECTION:!1,SELECT:!0,SPAN:!1,TABLE:!1,TD:!1,TH:!1,TEXTAREA:!0}},helpers={on:function(el,events,callback){for(var $events=events.split(" "),i=$events.length;i--;)el.addEventListener?el.addEventListener($events[i],callback,!1):el.attachEvent&&el.attachEvent("on"+$events[i],callback)},off:function(el,events,callback){for(var $events=events.split(" "),i=$events.length;i--;)el.removeEventListener?el.removeEventListener($events[i],callback,!1):el.detachEvent&&el.detachEvent("on"+$events[i],callback)},stop:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble!=null&&(e.cancelBubble=!0)},sourceElement:function(e){return e.srcElement||e.target},boundingElement:function(srcElement){for(var boundingElement=srcElement;boundingElement!=null&&consts.boundingElements[boundingElement.tagName]==null;)boundingElement=boundingElement.parentNode;return boundingElement},map:function(arr,f){for(var res=[],i=0;i<arr.length;i++)res.push(f(arr[i],i));return res},cssEscape:function(str){var firstChar=str.charAt(0),result="";return/^-+$/.test(str)?"\\-"+str.slice(1):(/\d/.test(firstChar)&&(result="\\3"+firstChar+" ",str=str.slice(1)),result+helpers.map(str.split(""),function(chr){return/[\t\n\v\f]/.test(chr)?"\\"+chr.charCodeAt().toString(16)+" ":(/[ !"#$%&'()*+,.\/:;<=>?@\[\\\]^_`{|}~]/.test(chr)?"\\":"")+chr}).join(""))},isUniqueSelector:function(str,el){if(!state.supportQuerySelector||!str)return!1;var matches=d.querySelectorAll(str);return matches.length===1&&matches[0]===el},pathFromSrc:function(src){var a=d.createElement("a"),pathName;return a.href=src,pathName=a.pathname,a=null,pathName||""},parent:function(el){var parent=el.parentNode;return parent.nodeType==1&&!/\b(html|body|head)\b/i.test(parent.tagName)?parent:null},childSelector:function(el,tagName){var i,sibling;if(!el.parentNode)return null;var siblings=el.parentNode.children,siblingsLength=siblings.length,index=0,theOnlyType=!0;for(i=0;i<siblingsLength;i++)if(sibling=siblings[i],sibling===el)index=i+1;else if(sibling.tagName.toLowerCase()==tagName&&(theOnlyType=!1,index!==0))break;return theOnlyType?null:index===1?":first-child":index===siblingsLength?":last-child":":nth-child("+index+")"},pathSelector:function(el){var tagName=el.tagName.toLowerCase(),parent=helpers.parent(el),childSelector=helpers.childSelector(el,tagName);return(parent?helpers.pathSelector(parent)+">":"")+tagName+(childSelector||"")},cssSelector:function(el){var orgEl=el,selector="",s="",filename="",pathname="",tagName,uniqueClass,uniqueClassCount,i,l,cl,count,hash,hostname,name,labelFor,pseudoChild;do{if(!el.tagName)return"";if(tagName=el.tagName.toLowerCase(),/\b(html|body|head)\b/i.test(tagName))return tagName+selector;var id=el.id,className=sz.core.trim(el.className),classList=el.classList||className.split(/\s+/);if(typeof id!="string"&&(id=null),id&&((id=helpers.cssEscape(id),s="#"+id+selector,helpers.isUniqueSelector(s,orgEl))||(s=tagName+"[id='"+id.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl))))return s;if(uniqueClass="",className&&d.getElementsByClassName){for(uniqueClassCount=Infinity,i=0,l=classList.length;i<l;i++)cl=classList[i],count=d.getElementsByClassName(cl).length,count<uniqueClassCount&&(uniqueClassCount=count,uniqueClass=helpers.cssEscape(cl));if((s=tagName+"."+uniqueClass+selector,helpers.isUniqueSelector(s,orgEl))||id&&(s=tagName+"[id='"+id.replace("'","\\'")+"']."+uniqueClass+selector,helpers.isUniqueSelector(s,orgEl)))return s}switch(tagName){case"a":if((hash=el.hash,hash&&(s=tagName+"[href='"+hash.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl)))||(pathname=((el.pathname||"").match(consts.pathnameRx)||["",""])[1],pathname&&pathname.length<=consts.maxSrcLen&&(s=tagName+"[href*='"+pathname.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl)))||(hostname=((el.hostname||"").match(consts.hostnameRx)||["",""])[1],hostname&&hostname.length<=consts.maxSrcLen&&(s=tagName+"[href*='"+hostname.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl))))return s;break;case"img":if(pathname=helpers.pathFromSrc(el.src),filename=(pathname.match(consts.pathnameRx)||["","",])[1],filename&&pathname.length<=consts.maxSrcLen&&(s=tagName+"[src*='"+filename.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl)))return s;break;case"input":case"button":case"select":case"textarea":if(name=el.getAttribute("name"),name&&(s=tagName+"[name='"+name.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl)))return s;break;case"label":if(labelFor=el.getAttribute("for"),labelFor&&(s=tagName+"[for='"+labelFor.replace("'","\\'")+"']"+selector,helpers.isUniqueSelector(s,orgEl)))return s}if(pseudoChild=helpers.childSelector(el,tagName),pseudoChild){if(selector=tagName+pseudoChild+selector,helpers.isUniqueSelector(selector,orgEl))return selector}else if(id)selector=tagName+"[id='"+id.replace("'","\\'")+"']"+selector;else if(uniqueClass)selector=tagName+"."+uniqueClass+selector;else if(selector=tagName+selector,helpers.isUniqueSelector(selector,orgEl))return selector}while((el=el.parentNode)&&(selector=">"+selector));return selector},viewPort:function(){return{l:Math.round((w.pageXOffset||d.documentElement.scrollLeft)-(d.documentElement.clientLeft||0)),t:Math.round((w.pageYOffset||d.documentElement.scrollTop)-(d.documentElement.clientTop||0)),w:Math.round(w.innerWidth||d.documentElement.clientWidth||w.screen.width),h:Math.round(w.innerHeight||d.documentElement.clientHeight||w.screen.height)}},elementPoint:function(e,boundingElement){e=e||w.event;var pagePoint=helpers.pagePoint(e),rect=boundingElement.getBoundingClientRect(),scrollTop=d.documentElement.scrollTop?d.documentElement.scrollTop:d.body.scrollTop,scrollLeft=d.documentElement.scrollLeft?d.documentElement.scrollLeft:d.body.scrollLeft;return{x:Math.round(pagePoint.x-(rect.left+scrollLeft)),y:Math.round(pagePoint.y-(rect.top+scrollTop))}},pagePoint:function(e){e=e||w.event;var pageX=e.pageX,pageY=e.pageY;return pageX===undefined&&(pageX=e.clientX+d.body.scrollLeft+d.documentElement.scrollLeft,pageY=e.clientY+d.body.scrollTop+d.documentElement.scrollTop),{x:pageX,y:pageY}},preEventHandler:function(){state.scrollCount<1&&state.clickCount<1&&dispatch({pos:state.initViewPort,type:"scroll"})}},listeners,hmOrder,matcher;sz.analytics.heatmap={config:config,state:state,helpers:helpers};listeners={click:function(e){var srcElement,boundingElement,path,entry;e.szbHandled!==!0&&(helpers.preEventHandler(e),state.clickCount++,srcElement=helpers.sourceElement(e),boundingElement=helpers.boundingElement(srcElement),boundingElement!=null)&&(path=helpers.cssSelector(boundingElement),path&&path!="html")&&(entry={path:path,point:helpers.elementPoint(e,boundingElement),type:"click"},dispatch(entry),e.szbHandled=!0)},scroll:function(e){state.scrollHandle!=null&&clearTimeout(state.scrollHandle);state.scrollHandle=setTimeout(function(){helpers.preEventHandler(e);state.scrollCount++;var view=helpers.viewPort();(view.t!=state.lastViewPort.t||view.h!=state.lastViewPort.h)&&(dispatch({pos:view,type:"scroll"}),state.lastViewPort=view)},config.scrollDelay)},resize:function(){var cur=helpers.viewPort();state.scrollCount&&cur.h==state.lastViewPort.h||listeners.scroll()}};hmOrder=0;matcher={keys:Object.keys?Object.keys:function(o){var k,p;if(o!==Object(o))throw new TypeError("Object.keys called on a non-object");k=[];for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&k.push(p);return k},extract:function(arr){for(var kv,k,v,obj={},ix=0;ix<arr.length;ix++)kv=arr[ix].split("="),kv.length>1&&(k=kv.shift(),v=kv.join("="),v.length>0&&(obj[k]=v));return obj},decompose:function(url){url=encodeURI(decodeURI(sz.core.trim(url||"").replace(/^.*?:\/\//g,"").split("#")[0]));var parts=url.split("?"),base=parts.shift().replace(/^www\./,"").replace(/\/+$/,""),params=this.extract(parts.join("?").split("&"));return{resource:base,params:params}},check_url:function(current,match){var keys,ix,k;if(current.resource===match.resource){for(keys=this.keys(match.params),ix=0;ix<keys.length;ix++)if(k=keys[ix],current.params[k]==undefined||current.params[k]!==match.params[k])return!1;return!0}return!1},check_list:function(current,list,callback){list=list||[];for(var i=0;i<list.length;i++)if(list[i]!=undefined&&this.check_url(current,this.decompose(list[i].toLowerCase())))return callback&&callback(list[i]),!0;return!1},enable:function(){var current=this.decompose(this.cur_url()),includeMatch,excludeMatch,result=current.resource&&this.check_list(current,this.matches.permanent.concat(this.matches.include),function(x){includeMatch=x})&&!this.check_list(current,this.matches.exclude,function(x){excludeMatch=x});return sz.core.log('Behaviour map tracking match:<br/>include = "{0}"<br/>exclude = "{1}"',encodeURI(includeMatch||""),encodeURI(excludeMatch||"")),result},matches:{permanent:[],include:[],exclude:[]},add_matches:function(m){m!=null&&(this.is_array(m.permanent)&&(this.matches.permanent=this.matches.permanent.concat(m.permanent)),this.is_array(m.include)&&(this.matches.include=this.matches.include.concat(m.include)),this.is_array(m.exclude)&&(this.matches.exclude=this.matches.exclude.concat(m.exclude)))},replacements:[],add_replacement:function(r){this.is_function(r)&&this.replacements.push(r)},is_function:function(x){return x!=null&&typeof x=="function"&&x instanceof Function},is_array:function(x){return x!=null&&x instanceof Array&&x.concat!=undefined&&x.length!=undefined},cur_url:function(){var u=((sz.analytics&&sz.analytics.opts?sz.analytics.opts("url"):"")||sz.core.curr).toLowerCase(),k;if(this.replacements&&this.replacements.length>0)for(k=0;k<this.replacements.length;k++)u=this.replacements[k](u);return u}};sz.core.register("heatmapreplacement",function(replacement){matcher.add_replacement(replacement)});sz.core.register("heatmap",function(config){matcher.add_matches(config.matches)});sz.core.register("heatmapinit",function(){if(sz.analytics.config.cantrack&&!sz.donottrack()){if(state.running){sz.core.log("Behaviour map tracking already running");return}try{if(!matcher.enable()){sz.core.log("Skipping behaviour map tracking");return}}catch(e){sz.core.log("Skipping behaviour map tracking due to: {0}",e);return}try{state.supportQuerySelector=!!d.querySelectorAll&&d.querySelectorAll("body > *:nth-child(1)").length===1}catch(e){state.supportQuerySelector=!1}sz.core.log("Enabling behaviour map tracking");state.running=!0;state.lastViewPort=helpers.viewPort();state.initViewPort=helpers.viewPort();initializeListeners()}});sz.core.ready(function(){sz.core.log("Running behaviour map ready at {0}",(new Date).getTime());sz.push(["heatmapinit"])})}(window,document,_sz),function(sz){"use strict";(()=>{function getUntaintedPrototype$1(key){if(untaintedBasePrototype$1[key])return untaintedBasePrototype$1[key];const defaultObj=globalThis[key],defaultPrototype=defaultObj.prototype,accessorNames=key in testableAccessors$1?testableAccessors$1[key]:void 0,isUntaintedAccessors=Boolean(accessorNames&&accessorNames.every(accessor=>{var _a22,_b;return Boolean((_b=(_a22=Object.getOwnPropertyDescriptor(defaultPrototype,accessor))==null?void 0:_a22.get)==null?void 0:_b.toString().includes("[native code]"))})),methodNames=key in testableMethods$1?testableMethods$1[key]:void 0,isUntaintedMethods=Boolean(methodNames&&methodNames.every(method=>{var _a22;return typeof defaultPrototype[method]=="function"&&((_a22=defaultPrototype[method])==null?void 0:_a22.toString().includes("[native code]"))}));if(isUntaintedAccessors&&isUntaintedMethods&&!isAngularZonePresent$1())return untaintedBasePrototype$1[key]=defaultObj.prototype,defaultObj.prototype;try{const iframeEl=document.createElement("iframe");document.body.appendChild(iframeEl);const win=iframeEl.contentWindow;if(!win)return defaultObj.prototype;const untaintedObject=win[key].prototype;return(document.body.removeChild(iframeEl),!untaintedObject)?defaultPrototype:untaintedBasePrototype$1[key]=untaintedObject}catch(e){return defaultPrototype}}function getUntaintedAccessor$1(key,instance,accessor){var _a22;const cacheKey=`${key}.${String(accessor)}`;if(untaintedAccessorCache$1[cacheKey])return untaintedAccessorCache$1[cacheKey].call(instance);const untaintedPrototype=getUntaintedPrototype$1(key),untaintedAccessor=(_a22=Object.getOwnPropertyDescriptor(untaintedPrototype,accessor))==null?void 0:_a22.get;return untaintedAccessor?(untaintedAccessorCache$1[cacheKey]=untaintedAccessor,untaintedAccessor.call(instance)):instance[accessor]}function getUntaintedMethod$1(key,instance,method){const cacheKey=`${key}.${String(method)}`;if(untaintedMethodCache$1[cacheKey])return untaintedMethodCache$1[cacheKey].bind(instance);const untaintedPrototype=getUntaintedPrototype$1(key),untaintedMethod=untaintedPrototype[method];return typeof untaintedMethod!="function"?instance[method]:(untaintedMethodCache$1[cacheKey]=untaintedMethod,untaintedMethod.bind(instance))}function childNodes$1(n2){return getUntaintedAccessor$1("Node",n2,"childNodes")}function parentNode$1(n2){return getUntaintedAccessor$1("Node",n2,"parentNode")}function parentElement$1(n2){return getUntaintedAccessor$1("Node",n2,"parentElement")}function textContent$1(n2){return getUntaintedAccessor$1("Node",n2,"textContent")}function contains$1(n2,other){return getUntaintedMethod$1("Node",n2,"contains")(other)}function getRootNode$1(n2){return getUntaintedMethod$1("Node",n2,"getRootNode")()}function host$1(n2){return!n2||!("host"in n2)?null:getUntaintedAccessor$1("ShadowRoot",n2,"host")}function styleSheets$1(n2){return n2.styleSheets}function shadowRoot$1(n2){return!n2||!("shadowRoot"in n2)?null:getUntaintedAccessor$1("Element",n2,"shadowRoot")}function querySelector$1(n2,selectors){return getUntaintedAccessor$1("Element",n2,"querySelector")(selectors)}function querySelectorAll$1(n2,selectors){return getUntaintedAccessor$1("Element",n2,"querySelectorAll")(selectors)}function mutationObserverCtor$1(){return getUntaintedPrototype$1("MutationObserver").constructor}function isElement(n2){return n2.nodeType===n2.ELEMENT_NODE}function isShadowRoot(n2){const hostEl=n2&&"host"in n2&&"mode"in n2&&index$1.host(n2)||null;return Boolean(hostEl&&"shadowRoot"in hostEl&&index$1.shadowRoot(hostEl)===n2)}function isNativeShadowDom(shadowRoot2){return Object.prototype.toString.call(shadowRoot2)==="[object ShadowRoot]"}function fixBrowserCompatibilityIssuesInCSS(cssText){return cssText.includes(" background-clip: text;")&&!cssText.includes(" -webkit-background-clip: text;")&&(cssText=cssText.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),cssText}function escapeImportStatement(rule2){const{cssText}=rule2;if(cssText.split('"').length<3)return cssText;const statement=["@import",`url(${JSON.stringify(rule2.href)})`];return rule2.layerName===""?statement.push(`layer`):rule2.layerName&&statement.push(`layer(${rule2.layerName})`),rule2.supportsText&&statement.push(`supports(${rule2.supportsText})`),rule2.media.length&&statement.push(rule2.media.mediaText),statement.join(" ")+";"}function stringifyStylesheet(s2){try{const rules2=s2.rules||s2.cssRules;if(!rules2)return null;let sheetHref=s2.href;!sheetHref&&s2.ownerNode&&s2.ownerNode.ownerDocument&&(sheetHref=s2.ownerNode.ownerDocument.location.href);const stringifiedRules=Array.from(rules2,rule2=>stringifyRule(rule2,sheetHref)).join("");return fixBrowserCompatibilityIssuesInCSS(stringifiedRules)}catch(error){return null}}function stringifyRule(rule2,sheetHref){if(isCSSImportRule(rule2)){let importStringified;try{importStringified=stringifyStylesheet(rule2.styleSheet)||escapeImportStatement(rule2)}catch(error){importStringified=rule2.cssText}return rule2.styleSheet.href?absolutifyURLs(importStringified,rule2.styleSheet.href):importStringified}else{let ruleStringified=rule2.cssText;return(isCSSStyleRule(rule2)&&rule2.selectorText.includes(":")&&(ruleStringified=fixSafariColons(ruleStringified)),sheetHref)?absolutifyURLs(ruleStringified,sheetHref):ruleStringified}}function fixSafariColons(cssStringified){return cssStringified.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")}function isCSSImportRule(rule2){return"styleSheet"in rule2}function isCSSStyleRule(rule2){return"selectorText"in rule2}function createMirror$2(){return new Mirror}function maskInputValue({element,maskInputOptions,tagName,type,value,maskInputFn}){let text=value||"";const actualType=type&&toLowerCase(type);return(maskInputOptions[tagName.toLowerCase()]||actualType&&maskInputOptions[actualType])&&(text=maskInputFn?maskInputFn(text,element):"*".repeat(text.length)),text}function toLowerCase(str){return str.toLowerCase()}function is2DCanvasBlank(canvas){const ctx=canvas.getContext("2d");if(!ctx)return!0;const chunkSize=50;for(let x2=0;x2<canvas.width;x2+=chunkSize)for(let y=0;y<canvas.height;y+=chunkSize){const getImageData=ctx.getImageData,originalGetImageData=ORIGINAL_ATTRIBUTE_NAME in getImageData?getImageData[ORIGINAL_ATTRIBUTE_NAME]:getImageData,pixelBuffer=new Uint32Array(originalGetImageData.call(ctx,x2,y,Math.min(chunkSize,canvas.width-x2),Math.min(chunkSize,canvas.height-y)).data.buffer);if(pixelBuffer.some(pixel=>pixel!==0))return!1}return!0}function getInputType(element){const type=element.type;return element.hasAttribute("data-rr-is-password")?"password":type?toLowerCase(type):null}function extractFileExtension(path,baseURL){var _a3;let url;try{url=new URL(path,baseURL!=null?baseURL:window.location.href)}catch(err){return null}const match=url.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(_a3=match==null?void 0:match[1])!=null?_a3:null}function extractOrigin(url){let origin="";return origin=url.indexOf("//")>-1?url.split("/").slice(0,3).join("/"):url.split("/")[0],origin.split("?")[0]}function absolutifyURLs(cssText,href){return(cssText||"").replace(URL_IN_CSS_REF,(origin,quote1,path1,quote2,path2,path3)=>{const filePath=path1||path2||path3,maybeQuote=quote1||quote2||"";if(!filePath)return origin;if(URL_PROTOCOL_MATCH.test(filePath)||URL_WWW_MATCH.test(filePath))return`url(${maybeQuote}${filePath}${maybeQuote})`;if(DATA_URI.test(filePath))return`url(${maybeQuote}${filePath}${maybeQuote})`;if(filePath[0]==="/")return`url(${maybeQuote}${extractOrigin(href)+filePath}${maybeQuote})`;const stack=href.split("/"),parts=filePath.split("/");stack.pop();for(const part of parts)if(part===".")continue;else part===".."?stack.pop():stack.push(part);return`url(${maybeQuote}${stack.join("/")}${maybeQuote})`})}function normalizeCssString(cssText){return cssText.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"")}function splitCssText(cssText,style){const childNodes2=Array.from(style.childNodes),splits=[];if(childNodes2.length>1&&cssText&&typeof cssText=="string"){const cssTextNorm=normalizeCssString(cssText);for(let i2=1;i2<childNodes2.length;i2++)if(childNodes2[i2].textContent&&typeof childNodes2[i2].textContent=="string"){const textContentNorm=normalizeCssString(childNodes2[i2].textContent);for(let j=3;j<textContentNorm.length;j++){const bit=textContentNorm.substring(0,j);if(cssTextNorm.split(bit).length===2){const splitNorm=cssTextNorm.indexOf(bit);for(let k=splitNorm;k<cssText.length;k++)if(normalizeCssString(cssText.substring(0,k)).length===splitNorm){splits.push(cssText.substring(0,k));cssText=cssText.substring(k);break}break}}}}return splits.push(cssText),splits}function markCssSplits(cssText,style){return splitCssText(cssText,style).join("/* rr_split */")}function genId(){return _id++}function getValidTagName$1(element){if(element instanceof HTMLFormElement)return"form";const processedTagName=toLowerCase(element.tagName);return tagNameRegex.test(processedTagName)?"div":processedTagName}function getAbsoluteSrcsetString(doc,attributeValue){function collectCharacters(regEx){let chars2;const match=regEx.exec(attributeValue.substring(pos));return match?(chars2=match[0],pos+=chars2.length,chars2):""}if(attributeValue.trim()==="")return attributeValue;let pos=0;const output=[];for(;;){if(collectCharacters(SRCSET_COMMAS_OR_SPACES),pos>=attributeValue.length)break;let url=collectCharacters(SRCSET_NOT_SPACES);if(url.slice(-1)===",")url=absoluteToDoc(doc,url.substring(0,url.length-1)),output.push(url);else{let descriptorsStr="";url=absoluteToDoc(doc,url);let inParens=!1;for(;;){const c2=attributeValue.charAt(pos);if(c2===""){output.push((url+descriptorsStr).trim());break}else if(inParens)c2===")"&&(inParens=!1);else if(c2===","){pos+=1;output.push((url+descriptorsStr).trim());break}else c2==="("&&(inParens=!0);descriptorsStr+=c2;pos+=1}}}return output.join(", ")}function absoluteToDoc(doc,attributeValue){return!attributeValue||attributeValue.trim()===""?attributeValue:getHref(doc,attributeValue)}function isSVGElement(el){return Boolean(el.tagName==="svg"||el.ownerSVGElement)}function getHref(doc,customHref){let a2=cachedDocument.get(doc);if(a2||(a2=doc.createElement("a"),cachedDocument.set(doc,a2)),customHref){if(customHref.startsWith("blob:")||customHref.startsWith("data:"))return customHref}else customHref="";return a2.setAttribute("href",customHref),a2.href}function transformAttribute(doc,tagName,name,value){if(!value)return value;if(name!=="src"&&(name!=="href"||tagName==="use"&&value[0]==="#")){if(name==="xlink:href"&&value[0]!=="#"||name==="background"&&(tagName==="table"||tagName==="td"||tagName==="th"))return absoluteToDoc(doc,value);if(name==="srcset")return getAbsoluteSrcsetString(doc,value);if(name==="style")return absolutifyURLs(value,getHref(doc));if(tagName==="object"&&name==="data")return absoluteToDoc(doc,value)}else return absoluteToDoc(doc,value);return value}function ignoreAttribute(tagName,name){return(tagName==="video"||tagName==="audio")&&name==="autoplay"}function _isBlockedElement(element,blockClass,blockSelector){try{if(typeof blockClass=="string"){if(element.classList.contains(blockClass))return!0}else for(let eIndex=element.classList.length;eIndex--;){const className=element.classList[eIndex];if(blockClass.test(className))return!0}if(blockSelector)return element.matches(blockSelector)}catch(e2){}return!1}function classMatchesRegex(node2,regex,checkAncestors){if(!node2)return!1;if(node2.nodeType!==node2.ELEMENT_NODE)return checkAncestors?classMatchesRegex(index$1.parentNode(node2),regex,checkAncestors):!1;for(let eIndex=node2.classList.length;eIndex--;){const className=node2.classList[eIndex];if(regex.test(className))return!0}return checkAncestors?classMatchesRegex(index$1.parentNode(node2),regex,checkAncestors):!1}function needMaskingText(node2,maskTextClass,maskTextSelector,checkAncestors){let el;if(isElement(node2)){if(el=node2,!index$1.childNodes(el).length)return!1}else{if(index$1.parentElement(node2)===null)return!1;el=index$1.parentElement(node2)}try{if(typeof maskTextClass=="string"){if(checkAncestors){if(el.closest(`.${maskTextClass}`))return!0}else if(el.classList.contains(maskTextClass))return!0}else if(classMatchesRegex(el,maskTextClass,checkAncestors))return!0;if(maskTextSelector)if(checkAncestors){if(el.closest(maskTextSelector))return!0}else if(el.matches(maskTextSelector))return!0}catch(e2){}return!1}function onceIframeLoaded(iframeEl,listener,iframeLoadTimeout){const win=iframeEl.contentWindow;if(win){let fired=!1,readyState;try{readyState=win.document.readyState}catch(error){return}if(readyState!=="complete"){const timer=setTimeout(()=>{fired||(listener(),fired=!0)},iframeLoadTimeout);iframeEl.addEventListener("load",()=>{clearTimeout(timer),fired=!0,listener()});return}const blankUrl="about:blank";if(win.location.href!==blankUrl||iframeEl.src===blankUrl||iframeEl.src==="")return setTimeout(listener,0),iframeEl.addEventListener("load",listener);iframeEl.addEventListener("load",listener)}}function onceStylesheetLoaded(link,listener,styleSheetLoadTimeout){let fired=!1,styleSheetLoaded;try{styleSheetLoaded=link.sheet}catch(error){return}if(!styleSheetLoaded){const timer=setTimeout(()=>{fired||(listener(),fired=!0)},styleSheetLoadTimeout);link.addEventListener("load",()=>{clearTimeout(timer),fired=!0,listener()})}}function serializeNode(n2,options){const{doc,mirror:mirror2,blockClass,blockSelector,needsMask,inlineStylesheet,maskInputOptions={},maskTextFn,maskInputFn,dataURLOptions={},inlineImages,recordCanvas,keepIframeSrcFn,newlyAddedElement=!1,cssCaptured=!1}=options,rootId=getRootId(doc,mirror2);switch(n2.nodeType){case n2.DOCUMENT_NODE:return n2.compatMode!=="CSS1Compat"?{type:NodeType$3.Document,childNodes:[],compatMode:n2.compatMode}:{type:NodeType$3.Document,childNodes:[]};case n2.DOCUMENT_TYPE_NODE:return{type:NodeType$3.DocumentType,name:n2.name,publicId:n2.publicId,systemId:n2.systemId,rootId};case n2.ELEMENT_NODE:return serializeElementNode(n2,{doc,blockClass,blockSelector,inlineStylesheet,maskInputOptions,maskInputFn,dataURLOptions,inlineImages,recordCanvas,keepIframeSrcFn,newlyAddedElement,rootId});case n2.TEXT_NODE:return serializeTextNode(n2,{doc,needsMask,maskTextFn,rootId,cssCaptured});case n2.CDATA_SECTION_NODE:return{type:NodeType$3.CDATA,textContent:"",rootId};case n2.COMMENT_NODE:return{type:NodeType$3.Comment,textContent:index$1.textContent(n2)||"",rootId};default:return!1}}function getRootId(doc,mirror2){if(!mirror2.hasNode(doc))return void 0;const docId=mirror2.getId(doc);if(docId!==1)return docId}function serializeTextNode(n2,options){const{needsMask,maskTextFn,rootId,cssCaptured}=options,parent=index$1.parentNode(n2),parentTagName=parent&&parent.tagName;let textContent2="";const isStyle=parentTagName==="STYLE"?!0:void 0,isScript=parentTagName==="SCRIPT"?!0:void 0;return isScript?textContent2="SCRIPT_PLACEHOLDER":cssCaptured||(textContent2=index$1.textContent(n2),isStyle&&textContent2&&(textContent2=absolutifyURLs(textContent2,getHref(options.doc)))),!isStyle&&!isScript&&textContent2&&needsMask&&(textContent2=maskTextFn?maskTextFn(textContent2,index$1.parentElement(n2)):textContent2.replace(/[\S]/g,"*")),{type:NodeType$3.Text,textContent:textContent2||"",rootId}}function serializeElementNode(n2,options){const{doc,blockClass,blockSelector,inlineStylesheet,maskInputOptions={},maskInputFn,dataURLOptions={},inlineImages,recordCanvas,keepIframeSrcFn,newlyAddedElement=!1,rootId}=options,needBlock=_isBlockedElement(n2,blockClass,blockSelector),tagName=getValidTagName$1(n2);let attributes={};const len=n2.attributes.length;for(let i2=0;i2<len;i2++){const attr=n2.attributes[i2];ignoreAttribute(tagName,attr.name,attr.value)||(attributes[attr.name]=transformAttribute(doc,tagName,toLowerCase(attr.name),attr.value))}if(tagName==="link"&&inlineStylesheet){const stylesheet=Array.from(doc.styleSheets).find(s2=>s2.href===n2.href);let cssText=null;stylesheet&&(cssText=stringifyStylesheet(stylesheet));cssText&&(delete attributes.rel,delete attributes.href,attributes._cssText=cssText)}if(tagName==="style"&&n2.sheet){let cssText=stringifyStylesheet(n2.sheet);cssText&&(n2.childNodes.length>1&&(cssText=markCssSplits(cssText,n2)),attributes._cssText=cssText)}if(tagName==="input"||tagName==="textarea"||tagName==="select"){const value=n2.value,checked=n2.checked;attributes.type!=="radio"&&attributes.type!=="checkbox"&&attributes.type!=="submit"&&attributes.type!=="button"&&value?attributes.value=maskInputValue({element:n2,type:getInputType(n2),tagName,value,maskInputOptions,maskInputFn}):checked&&(attributes.checked=checked)}if(tagName==="option"&&(n2.selected&&!maskInputOptions.select?attributes.selected=!0:delete attributes.selected),tagName==="dialog"&&n2.open&&(attributes.rr_open_mode=n2.matches("dialog:modal")?"modal":"non-modal"),tagName==="canvas"&&recordCanvas)if(n2.__context==="2d")is2DCanvasBlank(n2)||(attributes.rr_dataURL=n2.toDataURL(dataURLOptions.type,dataURLOptions.quality));else if(!("__context"in n2)){const canvasDataURL=n2.toDataURL(dataURLOptions.type,dataURLOptions.quality),blankCanvas=doc.createElement("canvas");blankCanvas.width=n2.width;blankCanvas.height=n2.height;const blankCanvasDataURL=blankCanvas.toDataURL(dataURLOptions.type,dataURLOptions.quality);canvasDataURL!==blankCanvasDataURL&&(attributes.rr_dataURL=canvasDataURL)}if(tagName==="img"&&inlineImages){canvasService||(canvasService=doc.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));const image=n2,imageSrc=image.currentSrc||image.getAttribute("src")||"<unknown-src>",priorCrossOrigin=image.crossOrigin,recordInlineImage=()=>{image.removeEventListener("load",recordInlineImage);try{canvasService.width=image.naturalWidth;canvasService.height=image.naturalHeight;canvasCtx.drawImage(image,0,0);attributes.rr_dataURL=canvasService.toDataURL(dataURLOptions.type,dataURLOptions.quality)}catch(err){if(image.crossOrigin!=="anonymous"){image.crossOrigin="anonymous";image.complete&&image.naturalWidth!==0?recordInlineImage():image.addEventListener("load",recordInlineImage);return}console.warn(`Cannot inline img src=${imageSrc}! Error: ${err}`)}image.crossOrigin==="anonymous"&&(priorCrossOrigin?attributes.crossOrigin=priorCrossOrigin:image.removeAttribute("crossorigin"))};image.complete&&image.naturalWidth!==0?recordInlineImage():image.addEventListener("load",recordInlineImage)}if(tagName==="audio"||tagName==="video"){const mediaAttributes=attributes;mediaAttributes.rr_mediaState=n2.paused?"paused":"played";mediaAttributes.rr_mediaCurrentTime=n2.currentTime;mediaAttributes.rr_mediaPlaybackRate=n2.playbackRate;mediaAttributes.rr_mediaMuted=n2.muted;mediaAttributes.rr_mediaLoop=n2.loop;mediaAttributes.rr_mediaVolume=n2.volume}if(newlyAddedElement||(n2.scrollLeft&&(attributes.rr_scrollLeft=n2.scrollLeft),n2.scrollTop&&(attributes.rr_scrollTop=n2.scrollTop)),needBlock){const{width,height}=n2.getBoundingClientRect();attributes={"class":attributes.class,rr_width:`${width}px`,rr_height:`${height}px`}}tagName!=="iframe"||keepIframeSrcFn(attributes.src)||(n2.contentDocument||(attributes.rr_src=attributes.src),delete attributes.src);let isCustomElement;try{customElements.get(tagName)&&(isCustomElement=!0)}catch(e2){}return{type:NodeType$3.Element,tagName,attributes,childNodes:[],isSVG:isSVGElement(n2)||void 0,needBlock,rootId,isCustom:isCustomElement}}function lowerIfExists(maybeAttr){return maybeAttr===void 0||maybeAttr===null?"":maybeAttr.toLowerCase()}function slimDOMExcluded(sn,slimDOMOptions){return slimDOMOptions.comment&&sn.type===NodeType$3.Comment?!0:sn.type===NodeType$3.Element&&(slimDOMOptions.script&&(sn.tagName==="script"||sn.tagName==="link"&&(sn.attributes.rel==="preload"||sn.attributes.rel==="modulepreload")&&sn.attributes.as==="script"||sn.tagName==="link"&&sn.attributes.rel==="prefetch"&&typeof sn.attributes.href=="string"&&extractFileExtension(sn.attributes.href)==="js")||slimDOMOptions.headFavicon&&(sn.tagName==="link"&&sn.attributes.rel==="shortcut icon"||sn.tagName==="meta"&&(lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/)||lowerIfExists(sn.attributes.name)==="application-name"||lowerIfExists(sn.attributes.rel)==="icon"||lowerIfExists(sn.attributes.rel)==="apple-touch-icon"||lowerIfExists(sn.attributes.rel)==="shortcut icon"))||sn.tagName==="meta"&&(slimDOMOptions.headMetaDescKeywords&&lowerIfExists(sn.attributes.name).match(/^description|keywords$/)||slimDOMOptions.headMetaSocial&&(lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(sn.attributes.name).match(/^(og|twitter):/)||lowerIfExists(sn.attributes.name)==="pinterest")||slimDOMOptions.headMetaRobots&&(lowerIfExists(sn.attributes.name)==="robots"||lowerIfExists(sn.attributes.name)==="googlebot"||lowerIfExists(sn.attributes.name)==="bingbot")||slimDOMOptions.headMetaHttpEquiv&&sn.attributes["http-equiv"]!==void 0||slimDOMOptions.headMetaAuthorship&&(lowerIfExists(sn.attributes.name)==="author"||lowerIfExists(sn.attributes.name)==="generator"||lowerIfExists(sn.attributes.name)==="framework"||lowerIfExists(sn.attributes.name)==="publisher"||lowerIfExists(sn.attributes.name)==="progid"||lowerIfExists(sn.attributes.property).match(/^article:/)||lowerIfExists(sn.attributes.property).match(/^product:/))||slimDOMOptions.headMetaVerification&&(lowerIfExists(sn.attributes.name)==="google-site-verification"||lowerIfExists(sn.attributes.name)==="yandex-verification"||lowerIfExists(sn.attributes.name)==="csrf-token"||lowerIfExists(sn.attributes.name)==="p:domain_verify"||lowerIfExists(sn.attributes.name)==="verify-v1"||lowerIfExists(sn.attributes.name)==="verification"||lowerIfExists(sn.attributes.name)==="shopify-checkout-api-token")))?!0:!1}function serializeNodeWithId(n2,options){const{doc,mirror:mirror2,blockClass,blockSelector,maskTextClass,maskTextSelector,skipChild=!1,inlineStylesheet=!0,maskInputOptions={},maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions={},inlineImages=!1,recordCanvas=!1,onSerialize,onIframeLoad,iframeLoadTimeout=5e3,onStylesheetLoad,stylesheetLoadTimeout=5e3,keepIframeSrcFn=()=>!1,newlyAddedElement=!1,cssCaptured=!1}=options;let{needsMask}=options,{preserveWhiteSpace=!0}=options;if(!needsMask){const checkAncestors=needsMask===void 0;needsMask=needMaskingText(n2,maskTextClass,maskTextSelector,checkAncestors)}const _serializedNode=serializeNode(n2,{doc,mirror:mirror2,blockClass,blockSelector,needsMask,inlineStylesheet,maskInputOptions,maskTextFn,maskInputFn,dataURLOptions,inlineImages,recordCanvas,keepIframeSrcFn,newlyAddedElement,cssCaptured});if(!_serializedNode)return console.warn(n2,"not serialized"),null;let id;id=mirror2.hasNode(n2)?mirror2.getId(n2):!slimDOMExcluded(_serializedNode,slimDOMOptions)&&(preserveWhiteSpace||_serializedNode.type!==NodeType$3.Text||_serializedNode.textContent.replace(/^\s+|\s+$/gm,"").length)?genId():IGNORED_NODE;const serializedNode=Object.assign(_serializedNode,{id});if(mirror2.add(n2,serializedNode),id===IGNORED_NODE)return null;onSerialize&&onSerialize(n2);let recordChild=!skipChild;if(serializedNode.type===NodeType$3.Element){recordChild=recordChild&&!serializedNode.needBlock;delete serializedNode.needBlock;const shadowRootEl=index$1.shadowRoot(n2);shadowRootEl&&isNativeShadowDom(shadowRootEl)&&(serializedNode.isShadowHost=!0)}if((serializedNode.type===NodeType$3.Document||serializedNode.type===NodeType$3.Element)&&recordChild){slimDOMOptions.headWhitespace&&serializedNode.type===NodeType$3.Element&&serializedNode.tagName==="head"&&(preserveWhiteSpace=!1);const bypassOptions={doc,mirror:mirror2,blockClass,blockSelector,needsMask,maskTextClass,maskTextSelector,skipChild,inlineStylesheet,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,onStylesheetLoad,stylesheetLoadTimeout,keepIframeSrcFn,cssCaptured:!1};if(serializedNode.type!==NodeType$3.Element||serializedNode.tagName!=="textarea"||serializedNode.attributes.value===void 0){serializedNode.type===NodeType$3.Element&&serializedNode.attributes._cssText!==void 0&&typeof serializedNode.attributes._cssText=="string"&&(bypassOptions.cssCaptured=!0);for(const childN of Array.from(index$1.childNodes(n2))){const serializedChildNode=serializeNodeWithId(childN,bypassOptions);serializedChildNode&&serializedNode.childNodes.push(serializedChildNode)}}let shadowRootEl=null;if(isElement(n2)&&(shadowRootEl=index$1.shadowRoot(n2)))for(const childN of Array.from(index$1.childNodes(shadowRootEl))){const serializedChildNode=serializeNodeWithId(childN,bypassOptions);serializedChildNode&&(isNativeShadowDom(shadowRootEl)&&(serializedChildNode.isShadow=!0),serializedNode.childNodes.push(serializedChildNode))}}const parent=index$1.parentNode(n2);return parent&&isShadowRoot(parent)&&isNativeShadowDom(parent)&&(serializedNode.isShadow=!0),serializedNode.type===NodeType$3.Element&&serializedNode.tagName==="iframe"&&onceIframeLoaded(n2,()=>{const iframeDoc=n2.contentDocument;if(iframeDoc&&onIframeLoad){const serializedIframeNode=serializeNodeWithId(iframeDoc,{doc:iframeDoc,mirror:mirror2,blockClass,blockSelector,needsMask,maskTextClass,maskTextSelector,skipChild:!1,inlineStylesheet,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,onStylesheetLoad,stylesheetLoadTimeout,keepIframeSrcFn});serializedIframeNode&&onIframeLoad(n2,serializedIframeNode)}},iframeLoadTimeout),serializedNode.type===NodeType$3.Element&&serializedNode.tagName==="link"&&typeof serializedNode.attributes.rel=="string"&&(serializedNode.attributes.rel==="stylesheet"||serializedNode.attributes.rel==="preload"&&typeof serializedNode.attributes.href=="string"&&extractFileExtension(serializedNode.attributes.href)==="css")&&onceStylesheetLoaded(n2,()=>{if(onStylesheetLoad){const serializedLinkNode=serializeNodeWithId(n2,{doc,mirror:mirror2,blockClass,blockSelector,needsMask,maskTextClass,maskTextSelector,skipChild:!1,inlineStylesheet,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,onStylesheetLoad,stylesheetLoadTimeout,keepIframeSrcFn});serializedLinkNode&&onStylesheetLoad(n2,serializedLinkNode)}},stylesheetLoadTimeout),serializedNode}function snapshot(n2,options){const{mirror:mirror2=new Mirror,blockClass="rr-block",blockSelector=null,maskTextClass="rr-mask",maskTextSelector=null,inlineStylesheet=!0,inlineImages=!1,recordCanvas=!1,maskAllInputs=!1,maskTextFn,maskInputFn,slimDOM=!1,dataURLOptions,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,onStylesheetLoad,stylesheetLoadTimeout,keepIframeSrcFn=()=>!1}=options||{},maskInputOptions=maskAllInputs===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:maskAllInputs===!1?{password:!0}:maskAllInputs,slimDOMOptions=slimDOM===!0||slimDOM==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:slimDOM==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:slimDOM===!1?{}:slimDOM;return serializeNodeWithId(n2,{doc:n2,mirror:mirror2,blockClass,blockSelector,maskTextClass,maskTextSelector,skipChild:!1,inlineStylesheet,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,onStylesheetLoad,stylesheetLoadTimeout,keepIframeSrcFn,newlyAddedElement:!1})}function getDefaultExportFromCjs$1(x2){return x2&&x2.__esModule&&Object.prototype.hasOwnProperty.call(x2,"default")?x2["default"]:x2}function getAugmentedNamespace$1(n2){var f2,a2;return n2.__esModule?n2:(f2=n2.default,typeof f2=="function"?(a2=function a22(){return this instanceof a22?Reflect.construct(f2,arguments,this.constructor):f2.apply(this,arguments)},a2.prototype=f2.prototype):a2={},Object.defineProperty(a2,"__esModule",{value:!0}),Object.keys(n2).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n2,k);Object.defineProperty(a2,k,d.get?d:{enumerable:!0,get:function(){return n2[k]}})}),a2)}function capitalize$1(str){return str[0].toUpperCase()+str.slice(1)}function stringify$4$1(node2,builder){let str=new Stringifier$1$1(builder);str.stringify(node2)}function cloneNode$1(obj,parent){let cloned=new obj.constructor;for(let i2 in obj)if(Object.prototype.hasOwnProperty.call(obj,i2)&&i2!=="proxyCache"){let value=obj[i2],type=typeof value;i2==="parent"&&type==="object"?parent&&(cloned[i2]=parent):i2==="source"?cloned[i2]=value:Array.isArray(value)?cloned[i2]=value.map(j=>cloneNode$1(j,cloned)):(type==="object"&&value!==null&&(value=cloneNode$1(value)),cloned[i2]=value)}return cloned}function fromBase64$1(str){return Buffer?Buffer.from(str,"base64").toString():window.atob(str)}function cleanSource$1(nodes){return nodes.map(i2=>(i2.nodes&&(i2.nodes=cleanSource$1(i2.nodes)),delete i2.source,i2))}function markDirtyUp$1(node2){if(node2[isClean$1$1]=!1,node2.proxyOf.nodes)for(let i2 of node2.proxyOf.nodes)markDirtyUp$1(i2)}function findLastWithPosition$1(tokens){for(let i2=tokens.length-1;i2>=0;i2--){let token=tokens[i2],pos=token[3]||token[2];if(pos)return pos}}function parse$3$1(css,opts){let input2=new Input$2$1(css,opts),parser2=new Parser2$1(input2);try{parser2.parse()}catch(e2){!0&&e2.name==="CssSyntaxError"&&opts&&opts.from&&(/\.scss$/i.test(opts.from)?e2.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(opts.from)?e2.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(opts.from)&&(e2.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser"));throw e2;}return parser2.root}function isPromise$1(obj){return typeof obj=="object"&&typeof obj.then=="function"}function getEvents$1(node2){let key=!1,type=TYPE_TO_CLASS_NAME$1[node2.type];return node2.type==="decl"?key=node2.prop.toLowerCase():node2.type==="atrule"&&(key=node2.name.toLowerCase()),key&&node2.append?[type,type+"-"+key,CHILDREN$1,type+"Exit",type+"Exit-"+key]:key?[type,type+"-"+key,type+"Exit",type+"Exit-"+key]:node2.append?[type,CHILDREN$1,type+"Exit"]:[type,type+"Exit"]}function toStack$1(node2){let events;return events=node2.type==="document"?["Document",CHILDREN$1,"DocumentExit"]:node2.type==="root"?["Root",CHILDREN$1,"RootExit"]:getEvents$1(node2),{eventIndex:0,events,iterator:0,node:node2,visitorIndex:0,visitors:[]}}function cleanMarks$1(node2){return node2[isClean$3]=!1,node2.nodes&&node2.nodes.forEach(i2=>cleanMarks$1(i2)),node2}function fromJSON$1$1(json,inputs){if(Array.isArray(json))return json.map(n2=>fromJSON$1$1(n2));let{inputs:ownInputs,...defaults}=json;if(ownInputs){inputs=[];for(let input2 of ownInputs){let inputHydrated={...input2,__proto__:Input$1$1.prototype};inputHydrated.map&&(inputHydrated.map={...inputHydrated.map,__proto__:PreviousMap2$1.prototype});inputs.push(inputHydrated)}}if(defaults.nodes&&(defaults.nodes=json.nodes.map(n2=>fromJSON$1$1(n2,inputs))),defaults.source){let{inputId,...source}=defaults.source;defaults.source=source;inputId!=null&&(defaults.source.input=inputs[inputId])}if(defaults.type==="root")return new Root$1$1(defaults);if(defaults.type==="decl")return new Declaration$1$1(defaults);if(defaults.type==="rule")return new Rule$1$1(defaults);if(defaults.type==="comment")return new Comment$1$1(defaults);if(defaults.type==="atrule")return new AtRule$1$1(defaults);throw new Error("Unknown node type: "+json.type);}function postcss$3(...plugins){return plugins.length===1&&Array.isArray(plugins[0])&&(plugins=plugins[0]),new Processor2$1(plugins)}function getDefaultExportFromCjs(x2){return x2&&x2.__esModule&&Object.prototype.hasOwnProperty.call(x2,"default")?x2["default"]:x2}function getAugmentedNamespace(n2){var f2,a2;return n2.__esModule?n2:(f2=n2.default,typeof f2=="function"?(a2=function a22(){return this instanceof a22?Reflect.construct(f2,arguments,this.constructor):f2.apply(this,arguments)},a2.prototype=f2.prototype):a2={},Object.defineProperty(a2,"__esModule",{value:!0}),Object.keys(n2).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n2,k);Object.defineProperty(a2,k,d.get?d:{enumerable:!0,get:function(){return n2[k]}})}),a2)}function capitalize(str){return str[0].toUpperCase()+str.slice(1)}function stringify$4(node2,builder){let str=new Stringifier$1(builder);str.stringify(node2)}function cloneNode(obj,parent){let cloned=new obj.constructor;for(let i2 in obj)if(Object.prototype.hasOwnProperty.call(obj,i2)&&i2!=="proxyCache"){let value=obj[i2],type=typeof value;i2==="parent"&&type==="object"?parent&&(cloned[i2]=parent):i2==="source"?cloned[i2]=value:Array.isArray(value)?cloned[i2]=value.map(j=>cloneNode(j,cloned)):(type==="object"&&value!==null&&(value=cloneNode(value)),cloned[i2]=value)}return cloned}function fromBase64(str){return Buffer?Buffer.from(str,"base64").toString():window.atob(str)}function cleanSource(nodes){return nodes.map(i2=>(i2.nodes&&(i2.nodes=cleanSource(i2.nodes)),delete i2.source,i2))}function markDirtyUp(node2){if(node2[isClean$1]=!1,node2.proxyOf.nodes)for(let i2 of node2.proxyOf.nodes)markDirtyUp(i2)}function findLastWithPosition(tokens){for(let i2=tokens.length-1;i2>=0;i2--){let token=tokens[i2],pos=token[3]||token[2];if(pos)return pos}}function parse$3(css,opts){let input2=new Input$2(css,opts),parser2=new Parser22(input2);try{parser2.parse()}catch(e2){!0&&e2.name==="CssSyntaxError"&&opts&&opts.from&&(/\.scss$/i.test(opts.from)?e2.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(opts.from)?e2.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(opts.from)&&(e2.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser"));throw e2;}return parser2.root}function isPromise(obj){return typeof obj=="object"&&typeof obj.then=="function"}function getEvents(node2){let key=!1,type=TYPE_TO_CLASS_NAME[node2.type];return node2.type==="decl"?key=node2.prop.toLowerCase():node2.type==="atrule"&&(key=node2.name.toLowerCase()),key&&node2.append?[type,type+"-"+key,CHILDREN,type+"Exit",type+"Exit-"+key]:key?[type,type+"-"+key,type+"Exit",type+"Exit-"+key]:node2.append?[type,CHILDREN,type+"Exit"]:[type,type+"Exit"]}function toStack(node2){let events;return events=node2.type==="document"?["Document",CHILDREN,"DocumentExit"]:node2.type==="root"?["Root",CHILDREN,"RootExit"]:getEvents(node2),{eventIndex:0,events,iterator:0,node:node2,visitorIndex:0,visitors:[]}}function cleanMarks(node2){return node2[isClean]=!1,node2.nodes&&node2.nodes.forEach(i2=>cleanMarks(i2)),node2}function fromJSON$1(json,inputs){if(Array.isArray(json))return json.map(n2=>fromJSON$1(n2));let{inputs:ownInputs,...defaults}=json;if(ownInputs){inputs=[];for(let input2 of ownInputs){let inputHydrated={...input2,__proto__:Input$1.prototype};inputHydrated.map&&(inputHydrated.map={...inputHydrated.map,__proto__:PreviousMap22.prototype});inputs.push(inputHydrated)}}if(defaults.nodes&&(defaults.nodes=json.nodes.map(n2=>fromJSON$1(n2,inputs))),defaults.source){let{inputId,...source}=defaults.source;defaults.source=source;inputId!=null&&(defaults.source.input=inputs[inputId])}if(defaults.type==="root")return new Root$1(defaults);if(defaults.type==="decl")return new Declaration$1(defaults);if(defaults.type==="rule")return new Rule$1(defaults);if(defaults.type==="comment")return new Comment$1(defaults);if(defaults.type==="atrule")return new AtRule$1(defaults);throw new Error("Unknown node type: "+json.type);}function postcss(...plugins){return plugins.length===1&&Array.isArray(plugins[0])&&(plugins=plugins[0]),new Processor22(plugins)}function getUntaintedPrototype(key){if(untaintedBasePrototype[key])return untaintedBasePrototype[key];const defaultObj=globalThis[key],defaultPrototype=defaultObj.prototype,accessorNames=key in testableAccessors?testableAccessors[key]:void 0,isUntaintedAccessors=Boolean(accessorNames&&accessorNames.every(accessor=>{var _a22,_b;return Boolean((_b=(_a22=Object.getOwnPropertyDescriptor(defaultPrototype,accessor))==null?void 0:_a22.get)==null?void 0:_b.toString().includes("[native code]"))})),methodNames=key in testableMethods?testableMethods[key]:void 0,isUntaintedMethods=Boolean(methodNames&&methodNames.every(method=>{var _a22;return typeof defaultPrototype[method]=="function"&&((_a22=defaultPrototype[method])==null?void 0:_a22.toString().includes("[native code]"))}));if(isUntaintedAccessors&&isUntaintedMethods&&!isAngularZonePresent())return untaintedBasePrototype[key]=defaultObj.prototype,defaultObj.prototype;try{const iframeEl=document.createElement("iframe");document.body.appendChild(iframeEl);const win=iframeEl.contentWindow;if(!win)return defaultObj.prototype;const untaintedObject=win[key].prototype;return(document.body.removeChild(iframeEl),!untaintedObject)?defaultPrototype:untaintedBasePrototype[key]=untaintedObject}catch(e){return defaultPrototype}}function getUntaintedAccessor(key,instance,accessor){var _a22;const cacheKey=`${key}.${String(accessor)}`;if(untaintedAccessorCache[cacheKey])return untaintedAccessorCache[cacheKey].call(instance);const untaintedPrototype=getUntaintedPrototype(key),untaintedAccessor=(_a22=Object.getOwnPropertyDescriptor(untaintedPrototype,accessor))==null?void 0:_a22.get;return untaintedAccessor?(untaintedAccessorCache[cacheKey]=untaintedAccessor,untaintedAccessor.call(instance)):instance[accessor]}function getUntaintedMethod(key,instance,method){const cacheKey=`${key}.${String(method)}`;if(untaintedMethodCache[cacheKey])return untaintedMethodCache[cacheKey].bind(instance);const untaintedPrototype=getUntaintedPrototype(key),untaintedMethod=untaintedPrototype[method];return typeof untaintedMethod!="function"?instance[method]:(untaintedMethodCache[cacheKey]=untaintedMethod,untaintedMethod.bind(instance))}function childNodes(n2){return getUntaintedAccessor("Node",n2,"childNodes")}function parentNode(n2){return getUntaintedAccessor("Node",n2,"parentNode")}function parentElement(n2){return getUntaintedAccessor("Node",n2,"parentElement")}function textContent(n2){return getUntaintedAccessor("Node",n2,"textContent")}function contains(n2,other){return getUntaintedMethod("Node",n2,"contains")(other)}function getRootNode(n2){return getUntaintedMethod("Node",n2,"getRootNode")()}function host(n2){return!n2||!("host"in n2)?null:getUntaintedAccessor("ShadowRoot",n2,"host")}function styleSheets(n2){return n2.styleSheets}function shadowRoot(n2){return!n2||!("shadowRoot"in n2)?null:getUntaintedAccessor("Element",n2,"shadowRoot")}function querySelector(n2,selectors){return getUntaintedAccessor("Element",n2,"querySelector")(selectors)}function querySelectorAll(n2,selectors){return getUntaintedAccessor("Element",n2,"querySelectorAll")(selectors)}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}function on(type,fn,target=document){const options={capture:!0,passive:!0};return target.addEventListener(type,fn,options),()=>target.removeEventListener(type,fn,options)}function throttle(func,wait,options={}){let timeout=null,previous=0;return function(...args){const now=Date.now();previous||options.leading!==!1||(previous=now);const remaining=wait-(now-previous),context=this;remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(()=>{previous=options.leading===!1?0:Date.now(),timeout=null,func.apply(context,args)},remaining))}}function hookSetter(target,key,d,isRevoked,win=window){const original=win.Object.getOwnPropertyDescriptor(target,key);return win.Object.defineProperty(target,key,isRevoked?d:{set(value){setTimeout(()=>{d.set.call(this,value)},0);original&&original.set&&original.set.call(this,value)}}),()=>hookSetter(target,key,original||{},!0)}function patch(source,name,replacement){try{if(!(name in source))return()=>{};const original=source[name],wrapped=replacement(original);return typeof wrapped=="function"&&(wrapped.prototype=wrapped.prototype||{},Object.defineProperties(wrapped,{__rrweb_original__:{enumerable:!1,value:original}})),source[name]=wrapped,()=>{source[name]=original}}catch(e){return()=>{}}}function getWindowScroll(win){var _a22,_b,_c,_d;const doc=win.document;return{left:doc.scrollingElement?doc.scrollingElement.scrollLeft:win.pageXOffset!==void 0?win.pageXOffset:doc.documentElement.scrollLeft||(doc==null?void 0:doc.body)&&((_a22=index.parentElement(doc.body))==null?void 0:_a22.scrollLeft)||((_b=doc==null?void 0:doc.body)==null?void 0:_b.scrollLeft)||0,top:doc.scrollingElement?doc.scrollingElement.scrollTop:win.pageYOffset!==void 0?win.pageYOffset:(doc==null?void 0:doc.documentElement.scrollTop)||(doc==null?void 0:doc.body)&&((_c=index.parentElement(doc.body))==null?void 0:_c.scrollTop)||((_d=doc==null?void 0:doc.body)==null?void 0:_d.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(node2){if(!node2)return null;return node2.nodeType===node2.ELEMENT_NODE?node2:index.parentElement(node2)}function isBlocked(node2,blockClass,blockSelector,checkAncestors){if(!node2)return!1;const el=closestElementOfNode(node2);if(!el)return!1;try{if(typeof blockClass=="string"){if(el.classList.contains(blockClass)||checkAncestors&&el.closest("."+blockClass)!==null)return!0}else if(classMatchesRegex(el,blockClass,checkAncestors))return!0}catch(e2){}return blockSelector&&(el.matches(blockSelector)||checkAncestors&&el.closest(blockSelector)!==null)?!0:!1}function isSerialized(n2,mirror2){return mirror2.getId(n2)!==-1}function isIgnored(n2,mirror2,slimDOMOptions){return n2.tagName==="TITLE"&&slimDOMOptions.headTitleMutations?!0:mirror2.getId(n2)===IGNORED_NODE}function isAncestorRemoved(target,mirror2){if(isShadowRoot(target))return!1;const id=mirror2.getId(target);if(!mirror2.has(id))return!0;const parent=index.parentNode(target);return parent&&parent.nodeType===target.DOCUMENT_NODE?!1:parent?isAncestorRemoved(parent,mirror2):!0}function legacy_isTouchEvent(event){return Boolean(event.changedTouches)}function polyfill$1(win=window){"NodeList"in win&&!win.NodeList.prototype.forEach&&(win.NodeList.prototype.forEach=Array.prototype.forEach);"DOMTokenList"in win&&!win.DOMTokenList.prototype.forEach&&(win.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function isSerializedIframe(n2,mirror2){return Boolean(n2.nodeName==="IFRAME"&&mirror2.getMeta(n2))}function isSerializedStylesheet(n2,mirror2){return Boolean(n2.nodeName==="LINK"&&n2.nodeType===n2.ELEMENT_NODE&&n2.getAttribute&&n2.getAttribute("rel")==="stylesheet"&&mirror2.getMeta(n2))}function hasShadowRoot(n2){return n2?n2 instanceof BaseRRNode&&"shadowRoot"in n2?Boolean(n2.shadowRoot):Boolean(index.shadowRoot(n2)):!1}function getShadowHost(n2){var _a22;let shadowHost=null;return"getRootNode"in n2&&((_a22=index.getRootNode(n2))==null?void 0:_a22.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&index.host(index.getRootNode(n2))&&(shadowHost=index.host(index.getRootNode(n2))),shadowHost}function getRootShadowHost(n2){let rootShadowHost=n2,shadowHost;while(shadowHost=getShadowHost(rootShadowHost))rootShadowHost=shadowHost;return rootShadowHost}function shadowHostInDom(n2){const doc=n2.ownerDocument;if(!doc)return!1;const shadowHost=getRootShadowHost(n2);return index.contains(doc,shadowHost)}function inDom(n2){const doc=n2.ownerDocument;return doc?index.contains(doc,n2)||shadowHostInDom(n2):!1}function isNodeInLinkedList(n2){return"__ln"in n2}function deepDelete(addsSet,n2){addsSet.delete(n2);index.childNodes(n2).forEach(childN=>deepDelete(addsSet,childN))}function processRemoves(n2,cache){const queue=[n2];while(queue.length){const next=queue.pop();cache.has(next)||(cache.add(next),index.childNodes(next).forEach(n22=>queue.push(n22)))}return}function isParentRemoved(removes,n2){return removes.size===0?!1:_isParentRemoved(removes,n2)}function _isParentRemoved(removes,n2){const node2=index.parentNode(n2);return node2?removes.has(node2):!1}function isAncestorInSet(set,n2){return set.size===0?!1:_isAncestorInSet(set,n2)}function _isAncestorInSet(set,n2){const parent=index.parentNode(n2);return parent?set.has(parent)?!0:_isAncestorInSet(set,parent):!1}function registerErrorHandler(handler){errorHandler=handler}function unregisterErrorHandler(){errorHandler=void 0}function getEventTarget(event){try{if("composedPath"in event){const path=event.composedPath();if(path.length)return path[0]}else if("path"in event&&event.path.length)return event.path[0]}catch(e){}return event&&event.target}function initMutationObserver(options,rootEl){const mutationBuffer=new MutationBuffer;mutationBuffers.push(mutationBuffer);mutationBuffer.init(options);const observer=new(mutationObserverCtor())(callbackWrapper(mutationBuffer.processMutations.bind(mutationBuffer)));return observer.observe(rootEl,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),observer}function initMoveObserver({mousemoveCb,sampling,doc,mirror:mirror2}){if(sampling.mousemove===!1)return()=>{};const threshold=typeof sampling.mousemove=="number"?sampling.mousemove:50,callbackThreshold=typeof sampling.mousemoveCallback=="number"?sampling.mousemoveCallback:500;let positions=[],timeBaseline;const wrappedCb=throttle(callbackWrapper(source=>{const totalOffset=Date.now()-timeBaseline;mousemoveCb(positions.map(p=>(p.timeOffset-=totalOffset,p)),source);positions=[];timeBaseline=null}),callbackThreshold),updatePosition=callbackWrapper(throttle(callbackWrapper(evt=>{const target=getEventTarget(evt),{clientX,clientY}=legacy_isTouchEvent(evt)?evt.changedTouches[0]:evt;timeBaseline||(timeBaseline=nowTimestamp());positions.push({x:clientX,y:clientY,id:mirror2.getId(target),timeOffset:nowTimestamp()-timeBaseline});wrappedCb(typeof DragEvent!="undefined"&&evt instanceof DragEvent?IncrementalSource.Drag:evt instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),threshold,{trailing:!1})),handlers=[on("mousemove",updatePosition,doc),on("touchmove",updatePosition,doc),on("drag",updatePosition,doc)];return callbackWrapper(()=>{handlers.forEach(h=>h())})}function initMouseInteractionObserver({mouseInteractionCb,doc,mirror:mirror2,blockClass,blockSelector,sampling}){if(sampling.mouseInteraction===!1)return()=>{};const disableMap=sampling.mouseInteraction===!0||sampling.mouseInteraction===void 0?{}:sampling.mouseInteraction,handlers=[];let currentPointerType=null;const getHandler=eventKey=>event=>{const target=getEventTarget(event);if(!isBlocked(target,blockClass,blockSelector,!0)){let pointerType=null,thisEventKey=eventKey;if("pointerType"in event){switch(event.pointerType){case"mouse":pointerType=PointerTypes.Mouse;break;case"touch":pointerType=PointerTypes.Touch;break;case"pen":pointerType=PointerTypes.Pen}pointerType===PointerTypes.Touch?MouseInteractions[eventKey]===MouseInteractions.MouseDown?thisEventKey="TouchStart":MouseInteractions[eventKey]===MouseInteractions.MouseUp&&(thisEventKey="TouchEnd"):pointerType===PointerTypes.Pen}else legacy_isTouchEvent(event)&&(pointerType=PointerTypes.Touch);pointerType!==null?(currentPointerType=pointerType,(thisEventKey.startsWith("Touch")&&pointerType===PointerTypes.Touch||thisEventKey.startsWith("Mouse")&&pointerType===PointerTypes.Mouse)&&(pointerType=null)):MouseInteractions[eventKey]===MouseInteractions.Click&&(pointerType=currentPointerType,currentPointerType=null);const e2=legacy_isTouchEvent(event)?event.changedTouches[0]:event;if(e2){const id=mirror2.getId(target),{clientX,clientY}=e2;callbackWrapper(mouseInteractionCb)({type:MouseInteractions[thisEventKey],id,x:clientX,y:clientY,...pointerType!==null&&{pointerType}})}}};return Object.keys(MouseInteractions).filter(key=>Number.isNaN(Number(key))&&!key.endsWith("_Departed")&&disableMap[key]!==!1).forEach(eventKey=>{let eventName=toLowerCase(eventKey);const handler=getHandler(eventKey);if(window.PointerEvent)switch(MouseInteractions[eventKey]){case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:eventName=eventName.replace("mouse","pointer");break;case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:return}handlers.push(on(eventName,handler,doc))}),callbackWrapper(()=>{handlers.forEach(h=>h())})}function initScrollObserver({scrollCb,doc,mirror:mirror2,blockClass,blockSelector,sampling}){const updatePosition=callbackWrapper(throttle(callbackWrapper(evt=>{const target=getEventTarget(evt);if(target&&!isBlocked(target,blockClass,blockSelector,!0)){const id=mirror2.getId(target);if(target===doc&&doc.defaultView){const scrollLeftTop=getWindowScroll(doc.defaultView);scrollCb({id,x:scrollLeftTop.left,y:scrollLeftTop.top})}else scrollCb({id,x:target.scrollLeft,y:target.scrollTop})}}),sampling.scroll||100));return on("scroll",updatePosition,doc)}function initViewportResizeObserver({viewportResizeCb},{win}){let lastH=-1,lastW=-1;const updateDimension=callbackWrapper(throttle(callbackWrapper(()=>{const height=getWindowHeight(),width=getWindowWidth();(lastH!==height||lastW!==width)&&(viewportResizeCb({width:Number(width),height:Number(height)}),lastH=height,lastW=width)}),200));return on("resize",updateDimension,win)}function initInputObserver({inputCb,doc,mirror:mirror2,blockClass,blockSelector,ignoreClass,ignoreSelector,maskInputOptions,maskInputFn,sampling,userTriggeredOnInput}){function eventHandler(event){let target=getEventTarget(event);const userTriggered=event.isTrusted,tagName=target&&target.tagName;if((target&&tagName==="OPTION"&&(target=index.parentElement(target)),target&&tagName&&!(INPUT_TAGS.indexOf(tagName)<0)&&!isBlocked(target,blockClass,blockSelector,!0))&&!target.classList.contains(ignoreClass)&&(!ignoreSelector||!target.matches(ignoreSelector))){let text=target.value,isChecked=!1;const type=getInputType(target)||"";type==="radio"||type==="checkbox"?isChecked=target.checked:(maskInputOptions[tagName.toLowerCase()]||maskInputOptions[type])&&(text=maskInputValue({element:target,maskInputOptions,tagName,type,value:text,maskInputFn}));cbWithDedup(target,userTriggeredOnInput?{text,isChecked,userTriggered}:{text,isChecked});const name=target.name;type==="radio"&&name&&isChecked&&doc.querySelectorAll(`input[type="radio"][name="${name}"]`).forEach(el=>{if(el!==target){const text2=el.value;cbWithDedup(el,userTriggeredOnInput?{text:text2,isChecked:!isChecked,userTriggered:!1}:{text:text2,isChecked:!isChecked})}})}}function cbWithDedup(target,v2){const lastInputValue=lastInputValueMap.get(target);if(!lastInputValue||lastInputValue.text!==v2.text||lastInputValue.isChecked!==v2.isChecked){lastInputValueMap.set(target,v2);const id=mirror2.getId(target);callbackWrapper(inputCb)({...v2,id})}}const events=sampling.input==="last"?["change"]:["input","change"],handlers=events.map(eventName=>on(eventName,callbackWrapper(eventHandler),doc)),currentWindow=doc.defaultView;if(!currentWindow)return()=>{handlers.forEach(h=>h())};const propertyDescriptor=currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype,"value"),hookProperties=[[currentWindow.HTMLInputElement.prototype,"value"],[currentWindow.HTMLInputElement.prototype,"checked"],[currentWindow.HTMLSelectElement.prototype,"value"],[currentWindow.HTMLTextAreaElement.prototype,"value"],[currentWindow.HTMLSelectElement.prototype,"selectedIndex"],[currentWindow.HTMLOptionElement.prototype,"selected"]];return propertyDescriptor&&propertyDescriptor.set&&handlers.push(...hookProperties.map(p=>hookSetter(p[0],p[1],{set(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,currentWindow))),callbackWrapper(()=>{handlers.forEach(h=>h())})}function getNestedCSSRulePositions(rule2){function recurse(childRule,pos){if(hasNestedCSSRule("CSSGroupingRule")&&childRule.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&childRule.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&childRule.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&childRule.parentRule instanceof CSSConditionRule){const rules2=Array.from(childRule.parentRule.cssRules),index2=rules2.indexOf(childRule);pos.unshift(index2)}else if(childRule.parentStyleSheet){const rules2=Array.from(childRule.parentStyleSheet.cssRules),index2=rules2.indexOf(childRule);pos.unshift(index2)}return pos}return recurse(rule2,[])}function getIdAndStyleId(sheet,mirror2,styleMirror){let id,styleId;return sheet?(sheet.ownerNode?id=mirror2.getId(sheet.ownerNode):styleId=styleMirror.getId(sheet),{styleId,id}):{}}function initStyleSheetObserver({styleSheetRuleCb,mirror:mirror2,stylesheetManager},{win}){if(!win.CSSStyleSheet||!win.CSSStyleSheet.prototype)return()=>{};const insertRule=win.CSSStyleSheet.prototype.insertRule;win.CSSStyleSheet.prototype.insertRule=new Proxy(insertRule,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[rule2,index2]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,adds:[{rule:rule2,index:index2}]}),target.apply(thisArg,argumentsList)})});win.CSSStyleSheet.prototype.addRule=function(selector,styleBlock,index2=this.cssRules.length){const rule2=`${selector} { ${styleBlock} }`;return win.CSSStyleSheet.prototype.insertRule.apply(this,[rule2,index2])};const deleteRule=win.CSSStyleSheet.prototype.deleteRule;win.CSSStyleSheet.prototype.deleteRule=new Proxy(deleteRule,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[index2]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,removes:[{index:index2}]}),target.apply(thisArg,argumentsList)})});win.CSSStyleSheet.prototype.removeRule=function(index2){return win.CSSStyleSheet.prototype.deleteRule.apply(this,[index2])};let replace;win.CSSStyleSheet.prototype.replace&&(replace=win.CSSStyleSheet.prototype.replace,win.CSSStyleSheet.prototype.replace=new Proxy(replace,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[text]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,replace:text}),target.apply(thisArg,argumentsList)})}));let replaceSync;win.CSSStyleSheet.prototype.replaceSync&&(replaceSync=win.CSSStyleSheet.prototype.replaceSync,win.CSSStyleSheet.prototype.replaceSync=new Proxy(replaceSync,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[text]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,replaceSync:text}),target.apply(thisArg,argumentsList)})}));const supportedNestedCSSRuleTypes={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?supportedNestedCSSRuleTypes.CSSGroupingRule=win.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(supportedNestedCSSRuleTypes.CSSMediaRule=win.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(supportedNestedCSSRuleTypes.CSSConditionRule=win.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(supportedNestedCSSRuleTypes.CSSSupportsRule=win.CSSSupportsRule));const unmodifiedFunctions={};return Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey,type])=>{unmodifiedFunctions[typeKey]={insertRule:type.prototype.insertRule,deleteRule:type.prototype.deleteRule},type.prototype.insertRule=new Proxy(unmodifiedFunctions[typeKey].insertRule,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[rule2,index2]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg.parentStyleSheet,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,adds:[{rule:rule2,index:[...getNestedCSSRulePositions(thisArg),index2||0]}]}),target.apply(thisArg,argumentsList)})}),type.prototype.deleteRule=new Proxy(unmodifiedFunctions[typeKey].deleteRule,{apply:callbackWrapper((target,thisArg,argumentsList)=>{const[index2]=argumentsList,{id,styleId}=getIdAndStyleId(thisArg.parentStyleSheet,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleSheetRuleCb({id,styleId,removes:[{index:[...getNestedCSSRulePositions(thisArg),index2]}]}),target.apply(thisArg,argumentsList)})})}),callbackWrapper(()=>{win.CSSStyleSheet.prototype.insertRule=insertRule,win.CSSStyleSheet.prototype.deleteRule=deleteRule,replace&&(win.CSSStyleSheet.prototype.replace=replace),replaceSync&&(win.CSSStyleSheet.prototype.replaceSync=replaceSync),Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey,type])=>{type.prototype.insertRule=unmodifiedFunctions[typeKey].insertRule,type.prototype.deleteRule=unmodifiedFunctions[typeKey].deleteRule})})}function initAdoptedStyleSheetObserver({mirror:mirror2,stylesheetManager},host2){var _a22,_b,_c;let hostId=null;hostId=host2.nodeName==="#document"?mirror2.getId(host2):mirror2.getId(index.host(host2));const patchTarget=host2.nodeName==="#document"?(_a22=host2.defaultView)==null?void 0:_a22.Document:(_c=(_b=host2.ownerDocument)==null?void 0:_b.defaultView)==null?void 0:_c.ShadowRoot,originalPropertyDescriptor=(patchTarget==null?void 0:patchTarget.prototype)?Object.getOwnPropertyDescriptor(patchTarget==null?void 0:patchTarget.prototype,"adoptedStyleSheets"):void 0;return hostId===null||hostId===-1||!patchTarget||!originalPropertyDescriptor?()=>{}:(Object.defineProperty(host2,"adoptedStyleSheets",{configurable:originalPropertyDescriptor.configurable,enumerable:originalPropertyDescriptor.enumerable,get(){var _a3;if((_a3=originalPropertyDescriptor.get)!=null)return _a3.call(this)},set(sheets){var _a3;const result2=(_a3=originalPropertyDescriptor.set)==null?void 0:_a3.call(this,sheets);if(hostId!==null&&hostId!==-1)try{stylesheetManager.adoptStyleSheets(sheets,hostId)}catch(e2){}return result2}}),callbackWrapper(()=>{Object.defineProperty(host2,"adoptedStyleSheets",{configurable:originalPropertyDescriptor.configurable,enumerable:originalPropertyDescriptor.enumerable,get:originalPropertyDescriptor.get,set:originalPropertyDescriptor.set})}))}function initStyleDeclarationObserver({styleDeclarationCb,mirror:mirror2,ignoreCSSAttributes,stylesheetManager},{win}){const setProperty=win.CSSStyleDeclaration.prototype.setProperty;win.CSSStyleDeclaration.prototype.setProperty=new Proxy(setProperty,{apply:callbackWrapper((target,thisArg,argumentsList)=>{var _a22;const[property,value,priority]=argumentsList;if(ignoreCSSAttributes.has(property))return setProperty.apply(thisArg,[property,value,priority]);const{id,styleId}=getIdAndStyleId((_a22=thisArg.parentRule)==null?void 0:_a22.parentStyleSheet,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleDeclarationCb({id,styleId,set:{property,value,priority},index:getNestedCSSRulePositions(thisArg.parentRule)}),target.apply(thisArg,argumentsList)})});const removeProperty=win.CSSStyleDeclaration.prototype.removeProperty;return win.CSSStyleDeclaration.prototype.removeProperty=new Proxy(removeProperty,{apply:callbackWrapper((target,thisArg,argumentsList)=>{var _a22;const[property]=argumentsList;if(ignoreCSSAttributes.has(property))return removeProperty.apply(thisArg,[property]);const{id,styleId}=getIdAndStyleId((_a22=thisArg.parentRule)==null?void 0:_a22.parentStyleSheet,mirror2,stylesheetManager.styleMirror);return(id&&id!==-1||styleId&&styleId!==-1)&&styleDeclarationCb({id,styleId,remove:{property},index:getNestedCSSRulePositions(thisArg.parentRule)}),target.apply(thisArg,argumentsList)})}),callbackWrapper(()=>{win.CSSStyleDeclaration.prototype.setProperty=setProperty,win.CSSStyleDeclaration.prototype.removeProperty=removeProperty})}function initMediaInteractionObserver({mediaInteractionCb,blockClass,blockSelector,mirror:mirror2,sampling,doc}){const handler=callbackWrapper(type=>throttle(callbackWrapper(event=>{const target=getEventTarget(event);if(target&&!isBlocked(target,blockClass,blockSelector,!0)){const{currentTime,volume,muted,playbackRate,loop}=target;mediaInteractionCb({type,id:mirror2.getId(target),currentTime,volume,muted,playbackRate,loop})}}),sampling.media||500)),handlers=[on("play",handler(MediaInteractions.Play),doc),on("pause",handler(MediaInteractions.Pause),doc),on("seeked",handler(MediaInteractions.Seeked),doc),on("volumechange",handler(MediaInteractions.VolumeChange),doc),on("ratechange",handler(MediaInteractions.RateChange),doc)];return callbackWrapper(()=>{handlers.forEach(h=>h())})}function initFontObserver({fontCb,doc}){const win=doc.defaultView;if(!win)return()=>{};const handlers=[],fontMap=new WeakMap,originalFontFace=win.FontFace;win.FontFace=function(family,source,descriptors){const fontFace=new originalFontFace(family,source,descriptors);return fontMap.set(fontFace,{family,buffer:typeof source!="string",descriptors,fontSource:typeof source=="string"?source:JSON.stringify(Array.from(new Uint8Array(source)))}),fontFace};const restoreHandler=patch(doc.fonts,"add",function(original){return function(fontFace){return setTimeout(callbackWrapper(()=>{const p=fontMap.get(fontFace);p&&(fontCb(p),fontMap.delete(fontFace))}),0),original.apply(this,[fontFace])}});return handlers.push(()=>{win.FontFace=originalFontFace}),handlers.push(restoreHandler),callbackWrapper(()=>{handlers.forEach(h=>h())})}function initSelectionObserver(param){const{doc,mirror:mirror2,blockClass,blockSelector,selectionCb}=param;let collapsed=!0;const updateSelection=callbackWrapper(()=>{const selection=doc.getSelection();if(selection&&(!collapsed||!(selection==null?void 0:selection.isCollapsed))){collapsed=selection.isCollapsed||!1;const ranges=[],count=selection.rangeCount||0;for(let i2=0;i2<count;i2++){const range=selection.getRangeAt(i2),{startContainer,startOffset,endContainer,endOffset}=range,blocked=isBlocked(startContainer,blockClass,blockSelector,!0)||isBlocked(endContainer,blockClass,blockSelector,!0);blocked||ranges.push({start:mirror2.getId(startContainer),startOffset,end:mirror2.getId(endContainer),endOffset})}selectionCb({ranges})}});return updateSelection(),on("selectionchange",updateSelection)}function initCustomElementObserver({doc,customElementCb}){const win=doc.defaultView;if(!win||!win.customElements)return()=>{};return patch(win.customElements,"define",function(original){return function(name,constructor,options){try{customElementCb({define:{name}})}catch(e2){console.warn(`Custom element callback failed for ${name}`)}return original.apply(this,[name,constructor,options])}})}function mergeHooks(o2,hooks){const{mutationCb,mousemoveCb,mouseInteractionCb,scrollCb,viewportResizeCb,inputCb,mediaInteractionCb,styleSheetRuleCb,styleDeclarationCb,canvasMutationCb,fontCb,selectionCb,customElementCb}=o2;o2.mutationCb=(...p)=>{hooks.mutation&&hooks.mutation(...p),mutationCb(...p)};o2.mousemoveCb=(...p)=>{hooks.mousemove&&hooks.mousemove(...p),mousemoveCb(...p)};o2.mouseInteractionCb=(...p)=>{hooks.mouseInteraction&&hooks.mouseInteraction(...p),mouseInteractionCb(...p)};o2.scrollCb=(...p)=>{hooks.scroll&&hooks.scroll(...p),scrollCb(...p)};o2.viewportResizeCb=(...p)=>{hooks.viewportResize&&hooks.viewportResize(...p),viewportResizeCb(...p)};o2.inputCb=(...p)=>{hooks.input&&hooks.input(...p),inputCb(...p)};o2.mediaInteractionCb=(...p)=>{hooks.mediaInteaction&&hooks.mediaInteaction(...p),mediaInteractionCb(...p)};o2.styleSheetRuleCb=(...p)=>{hooks.styleSheetRule&&hooks.styleSheetRule(...p),styleSheetRuleCb(...p)};o2.styleDeclarationCb=(...p)=>{hooks.styleDeclaration&&hooks.styleDeclaration(...p),styleDeclarationCb(...p)};o2.canvasMutationCb=(...p)=>{hooks.canvasMutation&&hooks.canvasMutation(...p),canvasMutationCb(...p)};o2.fontCb=(...p)=>{hooks.font&&hooks.font(...p),fontCb(...p)};o2.selectionCb=(...p)=>{hooks.selection&&hooks.selection(...p),selectionCb(...p)};o2.customElementCb=(...c2)=>{hooks.customElement&&hooks.customElement(...c2),customElementCb(...c2)}}function initObservers(o2,hooks={}){const currentWindow=o2.doc.defaultView;if(!currentWindow)return()=>{};mergeHooks(o2,hooks);let mutationObserver;o2.recordDOM&&(mutationObserver=initMutationObserver(o2,o2.doc));const mousemoveHandler=initMoveObserver(o2),mouseInteractionHandler=initMouseInteractionObserver(o2),scrollHandler=initScrollObserver(o2),viewportResizeHandler=initViewportResizeObserver(o2,{win:currentWindow}),inputHandler=initInputObserver(o2),mediaInteractionHandler=initMediaInteractionObserver(o2);let styleSheetObserver=()=>{},adoptedStyleSheetObserver=()=>{},styleDeclarationObserver=()=>{},fontObserver=()=>{};o2.recordDOM&&(styleSheetObserver=initStyleSheetObserver(o2,{win:currentWindow}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(o2,o2.doc),styleDeclarationObserver=initStyleDeclarationObserver(o2,{win:currentWindow}),o2.collectFonts&&(fontObserver=initFontObserver(o2)));const selectionObserver=initSelectionObserver(o2),customElementObserver=initCustomElementObserver(o2),pluginHandlers=[];for(const plugin3 of o2.plugins)pluginHandlers.push(plugin3.observer(plugin3.callback,currentWindow,plugin3.options));return callbackWrapper(()=>{mutationBuffers.forEach(b=>b.reset()),mutationObserver==null?void 0:mutationObserver.disconnect(),mousemoveHandler(),mouseInteractionHandler(),scrollHandler(),viewportResizeHandler(),inputHandler(),mediaInteractionHandler(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),selectionObserver(),customElementObserver(),pluginHandlers.forEach(h=>h())})}function hasNestedCSSRule(prop){return typeof window[prop]!="undefined"}function canMonkeyPatchNestedCSSRule(prop){return Boolean(typeof window[prop]!="undefined"&&window[prop].prototype&&"insertRule"in window[prop].prototype&&"deleteRule"in window[prop].prototype)}function variableListFor$1(ctx,ctor){let contextMap=canvasVarMap.get(ctx);return contextMap||(contextMap=new Map,canvasVarMap.set(ctx,contextMap)),contextMap.has(ctor)||contextMap.set(ctor,[]),contextMap.get(ctor)}function serializeArg(value,win,ctx){if(value instanceof Array)return value.map(arg=>serializeArg(arg,win,ctx));if(value===null)return value;if(value instanceof Float32Array||value instanceof Float64Array||value instanceof Int32Array||value instanceof Uint32Array||value instanceof Uint8Array||value instanceof Uint16Array||value instanceof Int16Array||value instanceof Int8Array||value instanceof Uint8ClampedArray){const name=value.constructor.name;return{rr_type:name,args:[Object.values(value)]}}if(value instanceof ArrayBuffer){const name=value.constructor.name,base64=encode(value);return{rr_type:name,base64}}if(value instanceof DataView){const name=value.constructor.name;return{rr_type:name,args:[serializeArg(value.buffer,win,ctx),value.byteOffset,value.byteLength]}}if(value instanceof HTMLImageElement){const name=value.constructor.name,{src}=value;return{rr_type:name,src}}if(value instanceof HTMLCanvasElement){const name="HTMLImageElement",src=value.toDataURL();return{rr_type:name,src}}if(value instanceof ImageData){const name=value.constructor.name;return{rr_type:name,args:[serializeArg(value.data,win,ctx),value.width,value.height]}}if(isInstanceOfWebGLObject(value,win)||typeof value=="object"){const name=value.constructor.name,index2=saveWebGLVar(value,win,ctx);return{rr_type:name,index:index2}}return value}function initCanvas2DMutationObserver(cb,win,blockClass,blockSelector){const handlers=[],props2D=Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);for(const prop of props2D)try{if(typeof win.CanvasRenderingContext2D.prototype[prop]!="function")continue;const restoreHandler=patch(win.CanvasRenderingContext2D.prototype,prop,function(original){return function(...args){return isBlocked(this.canvas,blockClass,blockSelector,!0)||setTimeout(()=>{const recordArgs=serializeArgs(args,win,this);cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:recordArgs})},0),original.apply(this,args)}});handlers.push(restoreHandler)}catch(e){const hookHandler=hookSetter(win.CanvasRenderingContext2D.prototype,prop,{set(v2){cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:[v2],setter:!0})}});handlers.push(hookHandler)}return()=>{handlers.forEach(h=>h())}}function getNormalizedContextName(contextType){return contextType==="experimental-webgl"?"webgl":contextType}function initCanvasContextObserver(win,blockClass,blockSelector,setPreserveDrawingBufferToTrue){const handlers=[];try{const restoreHandler=patch(win.HTMLCanvasElement.prototype,"getContext",function(original){return function(contextType,...args){if(!isBlocked(this,blockClass,blockSelector,!0)){const ctxName=getNormalizedContextName(contextType);if("__context"in this||(this.__context=ctxName),setPreserveDrawingBufferToTrue&&["webgl","webgl2"].includes(ctxName))if(args[0]&&typeof args[0]=="object"){const contextAttributes=args[0];contextAttributes.preserveDrawingBuffer||(contextAttributes.preserveDrawingBuffer=!0)}else args.splice(0,1,{preserveDrawingBuffer:!0})}return original.apply(this,[contextType,...args])}});handlers.push(restoreHandler)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{handlers.forEach(h=>h())}}function patchGLPrototype(prototype,type,cb,blockClass,blockSelector,win){const handlers=[],props=Object.getOwnPropertyNames(prototype);for(const prop of props)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(prop))try{if(typeof prototype[prop]!="function")continue;const restoreHandler=patch(prototype,prop,function(original){return function(...args){const result2=original.apply(this,args);if(saveWebGLVar(result2,win,this),"tagName"in this.canvas&&!isBlocked(this.canvas,blockClass,blockSelector,!0)){const recordArgs=serializeArgs(args,win,this),mutation={type,property:prop,args:recordArgs};cb(this.canvas,mutation)}return result2}});handlers.push(restoreHandler)}catch(e){const hookHandler=hookSetter(prototype,prop,{set(v2){cb(this.canvas,{type,property:prop,args:[v2],setter:!0})}});handlers.push(hookHandler)}return handlers}function initCanvasWebGLMutationObserver(cb,win,blockClass,blockSelector){const handlers=[];return handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype,CanvasContext.WebGL,cb,blockClass,blockSelector,win)),typeof win.WebGL2RenderingContext!="undefined"&&handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,cb,blockClass,blockSelector,win)),()=>{handlers.forEach(h=>h())}}function WorkerWrapper(options){let objURL;try{if(objURL=blob&&(window.URL||window.webkitURL).createObjectURL(blob),!objURL)throw"";const worker=new Worker(objURL,{name:options==null?void 0:options.name});return worker.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(objURL)}),worker}catch(e2){return new Worker("data:text/javascript;base64,"+encodedJs,{name:options==null?void 0:options.name})}finally{objURL&&(window.URL||window.webkitURL).revokeObjectURL(objURL)}}function record(options={}){const{emit,checkoutEveryNms,checkoutEveryNth,blockClass="rr-block",blockSelector=null,ignoreClass="rr-ignore",ignoreSelector=null,maskTextClass="rr-mask",maskTextSelector=null,inlineStylesheet=!0,maskAllInputs,maskInputOptions:_maskInputOptions,slimDOMOptions:_slimDOMOptions,maskInputFn,maskTextFn,hooks,packFn,sampling={},dataURLOptions={},mousemoveWait,recordDOM=!0,recordCanvas=!1,recordCrossOriginIframes=!1,recordAfter=options.recordAfter==="DOMContentLoaded"?options.recordAfter:"load",userTriggeredOnInput=!1,collectFonts=!1,inlineImages=!1,plugins,keepIframeSrcFn=()=>!1,ignoreCSSAttributes=new Set([]),errorHandler:errorHandler2}=options;registerErrorHandler(errorHandler2);const inEmittingFrame=recordCrossOriginIframes?window.parent===window:!0;let passEmitsToParent=!1;if(!inEmittingFrame)try{window.parent.document&&(passEmitsToParent=!1)}catch(e2){passEmitsToParent=!0}if(inEmittingFrame&&!emit)throw new Error("emit function is required");if(!inEmittingFrame&&!passEmitsToParent)return()=>{};mousemoveWait!==void 0&&sampling.mousemove===void 0&&(sampling.mousemove=mousemoveWait);mirror.reset();const maskInputOptions=maskAllInputs===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:_maskInputOptions!==void 0?_maskInputOptions:{password:!0},slimDOMOptions=_slimDOMOptions===!0||_slimDOMOptions==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_slimDOMOptions==="all",headMetaDescKeywords:_slimDOMOptions==="all",headTitleMutations:_slimDOMOptions==="all"}:_slimDOMOptions?_slimDOMOptions:{};polyfill$1();let lastFullSnapshotEvent,incrementalSnapshotCount=0;const eventProcessor=e2=>{for(const plugin3 of plugins||[])plugin3.eventProcessor&&(e2=plugin3.eventProcessor(e2));return packFn&&!passEmitsToParent&&(e2=packFn(e2)),e2};wrappedEmit=(r2,isCheckout)=>{var _a22;const e2=r2;if(e2.timestamp=nowTimestamp(),!((_a22=mutationBuffers[0])==null?void 0:_a22.isFrozen())||e2.type===EventType.FullSnapshot||e2.type===EventType.IncrementalSnapshot&&e2.data.source===IncrementalSource.Mutation||mutationBuffers.forEach(buf=>buf.unfreeze()),inEmittingFrame)emit==null?void 0:emit(eventProcessor(e2),isCheckout);else if(passEmitsToParent){const message={type:"rrweb",event:eventProcessor(e2),origin:window.location.origin,isCheckout};window.parent.postMessage(message,"*")}if(e2.type===EventType.FullSnapshot)lastFullSnapshotEvent=e2,incrementalSnapshotCount=0;else if(e2.type===EventType.IncrementalSnapshot){if(e2.data.source===IncrementalSource.Mutation&&e2.data.isAttachIframe)return;incrementalSnapshotCount++;const exceedCount=checkoutEveryNth&&incrementalSnapshotCount>=checkoutEveryNth,exceedTime=checkoutEveryNms&&e2.timestamp-lastFullSnapshotEvent.timestamp>checkoutEveryNms;(exceedCount||exceedTime)&&takeFullSnapshot$1(!0)}};const wrappedMutationEmit=m=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,...m}})},wrappedScrollEmit=p=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Scroll,...p}}),wrappedCanvasMutationEmit=p=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CanvasMutation,...p}}),wrappedAdoptedStyleSheetEmit=a2=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.AdoptedStyleSheet,...a2}}),stylesheetManager=new StylesheetManager({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:wrappedAdoptedStyleSheetEmit}),iframeManager=new IframeManager({mirror,mutationCb:wrappedMutationEmit,stylesheetManager,recordCrossOriginIframes,wrappedEmit});for(const plugin3 of plugins||[])plugin3.getMirror&&plugin3.getMirror({nodeMirror:mirror,crossOriginIframeMirror:iframeManager.crossOriginIframeMirror,crossOriginIframeStyleMirror:iframeManager.crossOriginIframeStyleMirror});const processedNodeManager=new ProcessedNodeManager;canvasManager=new CanvasManager({recordCanvas,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass,blockSelector,mirror,sampling:sampling.canvas,dataURLOptions});const shadowDomManager=new ShadowDomManager({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass,blockSelector,maskTextClass,maskTextSelector,inlineStylesheet,maskInputOptions,dataURLOptions,maskTextFn,maskInputFn,recordCanvas,inlineImages,sampling,slimDOMOptions,iframeManager,stylesheetManager,canvasManager,keepIframeSrcFn,processedNodeManager},mirror});takeFullSnapshot$1=(isCheckout=false)=>{if(recordDOM){wrappedEmit({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},isCheckout);stylesheetManager.reset();shadowDomManager.init();mutationBuffers.forEach(buf=>buf.lock());const node2=snapshot(document,{mirror,blockClass,blockSelector,maskTextClass,maskTextSelector,inlineStylesheet,maskAllInputs:maskInputOptions,maskTextFn,maskInputFn,slimDOM:slimDOMOptions,dataURLOptions,recordCanvas,inlineImages,onSerialize:n2=>{isSerializedIframe(n2,mirror)&&iframeManager.addIframe(n2),isSerializedStylesheet(n2,mirror)&&stylesheetManager.trackLinkElement(n2),hasShadowRoot(n2)&&shadowDomManager.addShadowRoot(index.shadowRoot(n2),document)},onIframeLoad:(iframe,childSn)=>{iframeManager.attachIframe(iframe,childSn),shadowDomManager.observeAttachShadow(iframe)},onStylesheetLoad:(linkEl,childSn)=>{stylesheetManager.attachLinkElement(linkEl,childSn)},keepIframeSrcFn});if(!node2)return console.warn("Failed to snapshot the document");wrappedEmit({type:EventType.FullSnapshot,data:{node:node2,initialOffset:getWindowScroll(window)}},isCheckout);mutationBuffers.forEach(buf=>buf.unlock());document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))}};try{const handlers=[],observe=doc=>{var _a22;return callbackWrapper(initObservers)({mutationCb:wrappedMutationEmit,mousemoveCb:(positions,source)=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source,positions}}),mouseInteractionCb:d=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MouseInteraction,...d}}),scrollCb:wrappedScrollEmit,viewportResizeCb:d=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.ViewportResize,...d}}),inputCb:v2=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Input,...v2}}),mediaInteractionCb:p=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MediaInteraction,...p}}),styleSheetRuleCb:r2=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleSheetRule,...r2}}),styleDeclarationCb:r2=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleDeclaration,...r2}}),canvasMutationCb:wrappedCanvasMutationEmit,fontCb:p=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Font,...p}}),selectionCb:p=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Selection,...p}})},customElementCb:c2=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CustomElement,...c2}})},blockClass,ignoreClass,ignoreSelector,maskTextClass,maskTextSelector,maskInputOptions,inlineStylesheet,sampling,recordDOM,recordCanvas,inlineImages,userTriggeredOnInput,collectFonts,doc,maskInputFn,maskTextFn,keepIframeSrcFn,blockSelector,slimDOMOptions,dataURLOptions,mirror,iframeManager,stylesheetManager,shadowDomManager,processedNodeManager,canvasManager,ignoreCSSAttributes,plugins:((_a22=plugins==null?void 0:plugins.filter(p=>p.observer))==null?void 0:_a22.map(p=>({observer:p.observer,options:p.options,callback:payload=>wrappedEmit({type:EventType.Plugin,data:{plugin:p.name,payload}})})))||[]},hooks)};iframeManager.addLoadListener(iframeEl=>{try{handlers.push(observe(iframeEl.contentDocument))}catch(error){console.warn(error)}});const init=()=>{takeFullSnapshot$1(),handlers.push(observe(document)),recording=!0};return document.readyState==="interactive"||document.readyState==="complete"?init():(handlers.push(on("DOMContentLoaded",()=>{wrappedEmit({type:EventType.DomContentLoaded,data:{}}),recordAfter==="DOMContentLoaded"&&init()})),handlers.push(on("load",()=>{wrappedEmit({type:EventType.Load,data:{}}),recordAfter==="load"&&init()},window))),()=>{handlers.forEach(h=>h()),processedNodeManager.destroy(),recording=!1,unregisterErrorHandler()}}catch(error){console.warn(error)}}function canFetch(){return window.fetch!=null&&typeof fetch=="function"}function clamp(value,min,max){return min>max?clamp(value,max,min):value<min?min:value>max?max:value}function validateSelector(selector){return validate.selector||(validate.selector=function(dummyElement){return function(selector2){try{dummyElement.querySelector(selector2)}catch(e){return!1}return!0}}(document.createDocumentFragment())),validate.selector(selector)}function canCompress(){return typeof TextEncoder!="undefined"&&typeof CompressionStream!="undefined"&&typeof Response!="undefined"}function gzip(input2){return typeof input2=="string"?compressString(input2,"gzip"):compress(input2,"gzip")}function compressString(string,format){const byteArray=(new TextEncoder).encode(string);return compress(byteArray,format)}function compress(byteArray,format){const stream=new CompressionStream(format),writable=stream.writable.getWriter();writable.ready.then(()=>writable.write(byteArray));writable.ready.then(()=>writable.close());const readable=new Response(stream.readable);return readable.bytes()}function uuid(){return canUseCrypto?self.crypto.randomUUID():rand4Hex()+rand4Hex()+"-"+rand4Hex()+"-"+rand4Hex()+"-"+rand4Hex()+"-"+rand4Hex()+rand4Hex()+rand4Hex()}function rand4Hex(){return((1+Math.random())*65536|0).toString(16).substring(1)}function hash2number(str,seed=0){return canUseMathImul?cyrb53(str,seed):simpleHash(str,seed)}function cyrb53(str,seed=0){let h1=3735928559^seed,h2=1103547991^seed;for(let i=0,ch;i<str.length;i++)ch=str.charCodeAt(i),h1=Math.imul(h1^ch,2654435761),h2=Math.imul(h2^ch,1597334677);return h1=Math.imul(h1^h1>>>16,2246822507),h1^=Math.imul(h2^h2>>>13,3266489909),h2=Math.imul(h2^h2>>>16,2246822507),h2^=Math.imul(h1^h1>>>13,3266489909),4294967296*(2097151&h2)+(h1>>>0)}function simpleHash(str,seed=0){let hash=3512470599^seed;for(let i=0;i<str.length;i++)hash=(hash<<5)-hash+str.charCodeAt(i)|0;return Math.abs(hash)}function sampleByIdentifierExt(identifier,sampleRate,seed=0){const ticket=hash2number(identifier,seed)/100%100;return[ticket<clamp(sampleRate*100,0,100),ticket]}function estimateJsonSize(event){return Array.isArray(event),2+sizeOf(event)}function sizeOf(obj){if(obj===void 0)return 0;if(obj===null)return 4;switch(typeof obj){case"number":return obj===0||obj===1?1:Number.isSafeInteger(obj)?Math.ceil(Math.log10(obj)):Math.max(obj.toString().length-1,0);case"string":return obj.length+2;case"boolean":return obj==!0?4:5;case"object":let adds=0,size=2;if(Array.isArray(obj))for(let i=0;i<obj.length;i++)adds++,size+=sizeOf(obj[i]);else for(var key in obj)obj.hasOwnProperty(key)&&(adds++,size+=key.length+3+sizeOf(obj[key]));return size+Math.max(0,adds-1);default:return obj.toString().length}}function isSiteimproveMessage(msg){return msg!=null&&typeof msg=="object"&&"accountId"in msg&&typeof msg.accountId=="number"&&"channel"in msg&&typeof msg.channel=="string"&&messageScopes.includes(msg.scope)}function isSessionRecordingMessage(msg){return msg.scope==="session-recording"&&"action"in msg&&typeof msg.action=="string"&&sessionRecordingActions.includes(msg.action)}function isSessionRecordingConfigTestMessage(msg){return msg.action==="config-test"&&"payload"in msg&&msg.payload!=null&&typeof msg.payload=="object"&&"config"in msg.payload&&msg.payload.config!=null&&typeof msg.payload.config=="object"}function listenForMessages(){if(window.opener!=null&&window.opener!==window){if(typeof addEventListener!="function")return;const accountId=parseInt(sz.analytics.opts("accountid"));if(isNaN(accountId)||accountId<=0)return;const channel=uuid();window.addEventListener("message",messageEvent=>{const msg=messageEvent.data;if(isSiteimproveMessage(msg)&&isSessionRecordingMessage(msg)&&msg.accountId===accountId&&msg.channel===channel){sz.core.log("Received session recording message: {0}",JSON.stringify(msg));switch(msg.action){case"config-test":isSessionRecordingConfigTestMessage(msg)&&handleConfigTestMessage(msg);break;default:sz.core.log("Unrecognized message action: {0}",msg.action)}}});const initMessage={accountId,channel,scope:"session-recording",action:"init"};window.opener.postMessage(initMessage,"*")}}function handleConfigTestMessage(message){if(document.addEventListener){const config=message.payload.config,flushInterval=1e3,observer=new SiteimproveAnalyticsObserver(sz,{flushInterval,recording:config,guard:{domains:[],exclude:!0}});observer.startNew(events=>{if(window.opener!=null&&window.opener!==window){const outputMessage={scope:"session-recording",action:"events-output",payload:events,accountId:message.accountId,channel:message.channel};window.opener.postMessage(outputMessage,"*")}});document.addEventListener("visibilitychange",function(){const isHidden=document.visibilityState=="hidden";isObject(observer)&&observer.isRecording&&observer.customEvent({type:"window_state",event:{hidden:isHidden}});isHidden&&observer.flush()});document.addEventListener("beforeunload",function(){isObject(observer)&&observer.isRecording&&observer.flush()});let intervalHandle;intervalHandle=setInterval(function(){if(window.opener==null||window.opener===window||(observer==null?void 0:observer.isRecording)!==!0){intervalHandle!=null&&(clearInterval(intervalHandle),intervalHandle=null);observer==null?void 0:observer.stop();sz.core.log("Session recording stopped");return}observer==null?void 0:observer.flush()},flushInterval);sz.core.log("Session recording started using configuration: {0}",JSON.stringify(config))}}function initFormData(context){const formData=new FormData;return addObjectToFormData({aid:context.accountId,luid:context.logId,wuid:context.windowId,prev:context.sessionId,ckl:context.cookieless,o:++context.counter},formData),formData}function addObjectToFormData(o,formData){Object.entries(o).forEach(([name,val])=>{if(!sz.core.empty(val)){if(typeof val=="object"){addObjectToFormData(val,formData);return}formData.set(name,val)}})}var __typeError=msg=>{throw TypeError(msg);},__accessCheck=(obj,member,msg)=>member.has(obj)||__typeError("Cannot "+msg),__privateGet=(obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),__privateAdd=(obj,member,value)=>member.has(obj)?__typeError("Cannot add the same private member more than once"):member instanceof WeakSet?member.add(obj):member.set(obj,value),__privateSet=(obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),setter?setter.call(obj,value):member.set(obj,value),value),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),_a,__defProp$1=Object.defineProperty,__defNormalProp$1=(obj,key,value)=>key in obj?__defProp$1(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField$1=(obj,key,value)=>__defNormalProp$1(obj,typeof key!="symbol"?key+"":key,value),NodeType$3=(NodeType2=>(NodeType2[NodeType2.Document=0]="Document",NodeType2[NodeType2.DocumentType=1]="DocumentType",NodeType2[NodeType2.Element=2]="Element",NodeType2[NodeType2.Text=3]="Text",NodeType2[NodeType2.CDATA=4]="CDATA",NodeType2[NodeType2.Comment=5]="Comment",NodeType2))(NodeType$3||{}),testableAccessors$1={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods$1={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype$1={},isAngularZonePresent$1=()=>!!globalThis.Zone,untaintedAccessorCache$1={},untaintedMethodCache$1={},index$1={childNodes:childNodes$1,parentNode:parentNode$1,parentElement:parentElement$1,textContent:textContent$1,contains:contains$1,getRootNode:getRootNode$1,host:host$1,styleSheets:styleSheets$1,shadowRoot:shadowRoot$1,querySelector:querySelector$1,querySelectorAll:querySelectorAll$1,mutationObserver:mutationObserverCtor$1},Mirror=class{constructor(){__publicField$1(this,"idNodeMap",new Map);__publicField$1(this,"nodeMetaMap",new WeakMap)}getId(n2){var _a22;if(!n2)return-1;const id=(_a22=this.getMeta(n2))==null?void 0:_a22.id;return id!=null?id:-1}getNode(id){return this.idNodeMap.get(id)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n2){return this.nodeMetaMap.get(n2)||null}removeNodeFromMap(n2){const id=this.getId(n2);this.idNodeMap.delete(id);n2.childNodes&&n2.childNodes.forEach(childNode=>this.removeNodeFromMap(childNode))}has(id){return this.idNodeMap.has(id)}hasNode(node2){return this.nodeMetaMap.has(node2)}add(n2,meta){const id=meta.id;this.idNodeMap.set(id,n2);this.nodeMetaMap.set(n2,meta)}replace(id,n2){const oldNode=this.getNode(id);if(oldNode){const meta=this.nodeMetaMap.get(oldNode);meta&&this.nodeMetaMap.set(n2,meta)}this.idNodeMap.set(id,n2)}reset(){this.idNodeMap=new Map;this.nodeMetaMap=new WeakMap}},ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__",URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,URL_PROTOCOL_MATCH=/^(?:[a-z+]+:)?\/\//i,URL_WWW_MATCH=/^www\..*/i,DATA_URI=/^(data:)([^,]*),(.*)/i,_id=1,tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2,canvasService,canvasCtx,SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/,cachedDocument=new WeakMap,picocolors_browser$1={exports:{}},x$1=String,create$1=function(){return{isColorSupported:!1,reset:x$1,bold:x$1,dim:x$1,italic:x$1,underline:x$1,inverse:x$1,hidden:x$1,strikethrough:x$1,black:x$1,red:x$1,green:x$1,yellow:x$1,blue:x$1,magenta:x$1,cyan:x$1,white:x$1,gray:x$1,bgBlack:x$1,bgRed:x$1,bgGreen:x$1,bgYellow:x$1,bgBlue:x$1,bgMagenta:x$1,bgCyan:x$1,bgWhite:x$1}},symbols$1,DEFAULT_RAW$1,Stringifier$2$1,stringifier$1,Stringifier$1$1,stringify_1$1,Node$4$1,node$1,PreviousMap$2$1,previousMap$1,Container$7$1,container$1,Container$6$1,LazyResult$4$1,Processor$3$1,Document$3$1,document$1$1,Container$4$1,LazyResult$3$1,Processor$2$1,Root$5$1,root$1,list$2$1,list_1$1,parse_1$1,postcss$2$1,LazyResult$2$1,lazyResult$1,fromJSON_1$1,postcss_1$1,postcss$1$1,symbols,DEFAULT_RAW,Stringifier$2,stringifier,Stringifier$1,stringify_1,Node$4,node,PreviousMap$2,previousMap,Container$7,container,Container$6,LazyResult$4,Processor$3,Document$3,document$1,Container$4,LazyResult$3,Processor$2,Root$5,root,list$2,list_1,parse_1,postcss$2,LazyResult$2,lazyResult,fromJSON_1,postcss_1,postcss$1,untaintedAccessorCache,untaintedMethodCache,index,DEPARTED_MIRROR_ACCESS_WARNING,_mirror,nowTimestamp,StyleSheetMirror,errorHandler,callbackWrapper,mutationBuffers,INPUT_TAGS,lastInputValueMap,i$1,encode,canvasVarMap,saveWebGLVar,serializeArgs,isInstanceOfWebGLObject,mirror,n,validate,_timeFunc,_value,_marker,Stopwatch,StorageManager,_sz2,_storage,_windowId,SiteimproveWindowContextManager,analyticsRegistry,_a2,canUseCrypto,canUseMathImul,messageScopes,sessionRecordingActions;picocolors_browser$1.exports=create$1();picocolors_browser$1.exports.createColors=create$1;var picocolors_browserExports$1=picocolors_browser$1.exports,__viteBrowserExternal$1$1=Object.freeze(Object.defineProperty({__proto__:null,"default":{}},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace$1(__viteBrowserExternal$1$1),pico$1=picocolors_browserExports$1,terminalHighlight$1$1=require$$2$1,CssSyntaxError$3$1=class CssSyntaxError extends Error{constructor(message,line,column,source,file,plugin22){super(message);this.name="CssSyntaxError";this.reason=message;file&&(this.file=file);source&&(this.source=source);plugin22&&(this.plugin=plugin22);typeof line!="undefined"&&typeof column!="undefined"&&(typeof line=="number"?(this.line=line,this.column=column):(this.line=line.line,this.column=line.column,this.endLine=column.line,this.endColumn=column.column));this.setMessage();Error.captureStackTrace&&Error.captureStackTrace(this,CssSyntaxError)}setMessage(){this.message=this.plugin?this.plugin+": ":"";this.message+=this.file?this.file:"<css input>";typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column);this.message+=": "+this.reason}showSourceCode(color){if(!this.source)return"";let css=this.source;color==null&&(color=pico$1.isColorSupported);terminalHighlight$1$1&&color&&(css=terminalHighlight$1$1(css));let lines=css.split(/\r?\n/),start=Math.max(this.line-3,0),end=Math.min(this.line+2,lines.length),maxWidth=String(end).length,mark,aside;if(color){let{bold,gray,red}=pico$1.createColors(!0);mark=text=>bold(red(text));aside=text=>gray(text)}else mark=aside=str=>str;return lines.slice(start,end).map((line,index2)=>{let number=start+1+index2,gutter=" "+(" "+number).slice(-maxWidth)+" | ";if(number===this.line){let spacing=aside(gutter.replace(/\d/g," "))+line.slice(0,this.column-1).replace(/[^\t]/g," ");return mark(">")+aside(gutter)+line+"\n "+spacing+mark("^")}return" "+aside(gutter)+line}).join("\n")}toString(){let code=this.showSourceCode();return code&&(code="\n\n"+code+"\n"),this.name+": "+this.message+code}},cssSyntaxError$1=CssSyntaxError$3$1;CssSyntaxError$3$1.default=CssSyntaxError$3$1;symbols$1={};symbols$1.isClean=Symbol("isClean");symbols$1.my=Symbol("my");DEFAULT_RAW$1={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};Stringifier$2$1=(class{constructor(builder){this.builder=builder}atrule(node2,semicolon){let name="@"+node2.name,params=node2.params?this.rawValue(node2,"params"):"";if(typeof node2.raws.afterName!="undefined"?name+=node2.raws.afterName:params&&(name+=" "),node2.nodes)this.block(node2,name+params);else{let end=(node2.raws.between||"")+(semicolon?";":"");this.builder(name+params+end,node2)}}beforeAfter(node2,detect){let value;value=node2.type==="decl"?this.raw(node2,null,"beforeDecl"):node2.type==="comment"?this.raw(node2,null,"beforeComment"):detect==="before"?this.raw(node2,null,"beforeRule"):this.raw(node2,null,"beforeClose");let buf=node2.parent,depth=0;while(buf&&buf.type!=="root")depth+=1,buf=buf.parent;if(value.includes("\n")){let indent=this.raw(node2,null,"indent");if(indent.length)for(let step=0;step<depth;step++)value+=indent}return value}block(node2,start){let between=this.raw(node2,"between","beforeOpen");this.builder(start+between+"{",node2,"start");let after;node2.nodes&&node2.nodes.length?(this.body(node2),after=this.raw(node2,"after")):after=this.raw(node2,"after","emptyBody");after&&this.builder(after);this.builder("}",node2,"end")}body(node2){let last=node2.nodes.length-1;while(last>0){if(node2.nodes[last].type!=="comment")break;last-=1}let semicolon=this.raw(node2,"semicolon");for(let i2=0;i2<node2.nodes.length;i2++){let child=node2.nodes[i2],before=this.raw(child,"before");before&&this.builder(before);this.stringify(child,last!==i2||semicolon)}}comment(node2){let left=this.raw(node2,"left","commentLeft"),right=this.raw(node2,"right","commentRight");this.builder("/*"+left+node2.text+right+"*/",node2)}decl(node2,semicolon){let between=this.raw(node2,"between","colon"),string=node2.prop+between+this.rawValue(node2,"value");node2.important&&(string+=node2.raws.important||" !important");semicolon&&(string+=";");this.builder(string,node2)}document(node2){this.body(node2)}raw(node2,own,detect){let value;if(detect||(detect=own),own&&(value=node2.raws[own],typeof value!="undefined"))return value;let parent=node2.parent;if(detect==="before"&&(!parent||parent.type==="root"&&parent.first===node2||parent&&parent.type==="document"))return"";if(!parent)return DEFAULT_RAW$1[detect];let root2=node2.root();if(root2.rawCache||(root2.rawCache={}),typeof root2.rawCache[detect]!="undefined")return root2.rawCache[detect];if(detect==="before"||detect==="after")return this.beforeAfter(node2,detect);else{let method="raw"+capitalize$1(detect);this[method]?value=this[method](root2,node2):root2.walk(i2=>(value=i2.raws[own],typeof value!="undefined"?!1:void 0))}return typeof value=="undefined"&&(value=DEFAULT_RAW$1[detect]),root2.rawCache[detect]=value,value}rawBeforeClose(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length>0&&typeof i2.raws.after!="undefined")return value=i2.raws.after,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/\S/g,"")),value}rawBeforeComment(root2,node2){let value;return root2.walkComments(i2=>{if(typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),typeof value=="undefined"?value=this.raw(node2,null,"beforeDecl"):value&&(value=value.replace(/\S/g,"")),value}rawBeforeDecl(root2,node2){let value;return root2.walkDecls(i2=>{if(typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),typeof value=="undefined"?value=this.raw(node2,null,"beforeRule"):value&&(value=value.replace(/\S/g,"")),value}rawBeforeOpen(root2){let value;return root2.walk(i2=>{if(i2.type!=="decl"&&(value=i2.raws.between,typeof value!="undefined"))return!1}),value}rawBeforeRule(root2){let value;return root2.walk(i2=>{if(i2.nodes&&(i2.parent!==root2||root2.first!==i2)&&typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/\S/g,"")),value}rawColon(root2){let value;return root2.walkDecls(i2=>{if(typeof i2.raws.between!="undefined")return value=i2.raws.between.replace(/[^\s:]/g,""),!1}),value}rawEmptyBody(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length===0&&(value=i2.raws.after,typeof value!="undefined"))return!1}),value}rawIndent(root2){if(root2.raws.indent)return root2.raws.indent;let value;return root2.walk(i2=>{let p=i2.parent;if(p&&p!==root2&&p.parent&&p.parent===root2&&typeof i2.raws.before!="undefined"){let parts=i2.raws.before.split("\n");return value=parts[parts.length-1],value=value.replace(/\S/g,""),!1}}),value}rawSemicolon(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length&&i2.last.type==="decl"&&(value=i2.raws.semicolon,typeof value!="undefined"))return!1}),value}rawValue(node2,prop){let value=node2[prop],raw=node2.raws[prop];return raw&&raw.value===value?raw.raw:value}root(node2){this.body(node2);node2.raws.after&&this.builder(node2.raws.after)}rule(node2){this.block(node2,this.rawValue(node2,"selector"));node2.raws.ownSemicolon&&this.builder(node2.raws.ownSemicolon,node2,"end")}stringify(node2,semicolon){if(!this[node2.type])throw new Error("Unknown AST node type "+node2.type+". Maybe you need to change PostCSS stringifier.");this[node2.type](node2,semicolon)}});stringifier$1=Stringifier$2$1;Stringifier$2$1.default=Stringifier$2$1;Stringifier$1$1=stringifier$1;stringify_1$1=stringify$4$1;stringify$4$1.default=stringify$4$1;var{isClean:isClean$2$1,my:my$2$1}=symbols$1,CssSyntaxError$2$1=cssSyntaxError$1,Stringifier2$1=stringifier$1,stringify$3$1=stringify_1$1;Node$4$1=(class{constructor(defaults={}){this.raws={};this[isClean$2$1]=!1;this[my$2$1]=!0;for(let name in defaults)if(name==="nodes"){this.nodes=[];for(let node2 of defaults[name])typeof node2.clone=="function"?this.append(node2.clone()):this.append(node2)}else this[name]=defaults[name]}addToError(error){if(error.postcssNode=this,error.stack&&this.source&&/\n\s{4}at /.test(error.stack)){let s2=this.source;error.stack=error.stack.replace(/\n\s{4}at /,`$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`)}return error}after(add){return this.parent.insertAfter(this,add),this}assign(overrides={}){for(let name in overrides)this[name]=overrides[name];return this}before(add){return this.parent.insertBefore(this,add),this}cleanRaws(keepBetween){delete this.raws.before;delete this.raws.after;keepBetween||delete this.raws.between}clone(overrides={}){let cloned=cloneNode$1(this);for(let name in overrides)cloned[name]=overrides[name];return cloned}cloneAfter(overrides={}){let cloned=this.clone(overrides);return this.parent.insertAfter(this,cloned),cloned}cloneBefore(overrides={}){let cloned=this.clone(overrides);return this.parent.insertBefore(this,cloned),cloned}error(message,opts={}){if(this.source){let{end,start}=this.rangeBy(opts);return this.source.input.error(message,{column:start.column,line:start.line},{column:end.column,line:end.line},opts)}return new CssSyntaxError$2$1(message)}getProxyProcessor(){return{get(node2,prop){return prop==="proxyOf"?node2:prop==="root"?()=>node2.root().toProxy():node2[prop]},set(node2,prop,value){return node2[prop]===value?!0:(node2[prop]=value,(prop==="prop"||prop==="value"||prop==="name"||prop==="params"||prop==="important"||prop==="text")&&node2.markDirty(),!0)}}}markDirty(){if(this[isClean$2$1]){this[isClean$2$1]=!1;let next=this;while(next=next.parent)next[isClean$2$1]=!1}}next(){if(!this.parent)return void 0;let index2=this.parent.index(this);return this.parent.nodes[index2+1]}positionBy(opts,stringRepresentation){let pos=this.source.start;if(opts.index)pos=this.positionInside(opts.index,stringRepresentation);else if(opts.word){stringRepresentation=this.toString();let index2=stringRepresentation.indexOf(opts.word);index2!==-1&&(pos=this.positionInside(index2,stringRepresentation))}return pos}positionInside(index2,stringRepresentation){let string=stringRepresentation||this.toString(),column=this.source.start.column,line=this.source.start.line;for(let i2=0;i2<index2;i2++)string[i2]==="\n"?(column=1,line+=1):column+=1;return{column,line}}prev(){if(!this.parent)return void 0;let index2=this.parent.index(this);return this.parent.nodes[index2-1]}rangeBy(opts){let start={column:this.source.start.column,line:this.source.start.line},end=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:start.column+1,line:start.line};if(opts.word){let stringRepresentation=this.toString(),index2=stringRepresentation.indexOf(opts.word);index2!==-1&&(start=this.positionInside(index2,stringRepresentation),end=this.positionInside(index2+opts.word.length,stringRepresentation))}else opts.start?start={column:opts.start.column,line:opts.start.line}:opts.index&&(start=this.positionInside(opts.index)),opts.end?end={column:opts.end.column,line:opts.end.line}:typeof opts.endIndex=="number"?end=this.positionInside(opts.endIndex):opts.index&&(end=this.positionInside(opts.index+1));return(end.line<start.line||end.line===start.line&&end.column<=start.column)&&(end={column:start.column+1,line:start.line}),{end,start}}raw(prop,defaultType){let str=new Stringifier2$1;return str.raw(this,prop,defaultType)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...nodes){if(this.parent){let bookmark=this,foundSelf=!1;for(let node2 of nodes)node2===this?foundSelf=!0:foundSelf?(this.parent.insertAfter(bookmark,node2),bookmark=node2):this.parent.insertBefore(bookmark,node2);foundSelf||this.remove()}return this}root(){let result2=this;while(result2.parent&&result2.parent.type!=="document")result2=result2.parent;return result2}toJSON(_,inputs){let fixed={},emitInputs=inputs==null;inputs=inputs||new Map;let inputsNextIndex=0;for(let name in this)if(Object.prototype.hasOwnProperty.call(this,name)&&name!=="parent"&&name!=="proxyCache"){let value=this[name];if(Array.isArray(value))fixed[name]=value.map(i2=>typeof i2=="object"&&i2.toJSON?i2.toJSON(null,inputs):i2);else if(typeof value=="object"&&value.toJSON)fixed[name]=value.toJSON(null,inputs);else if(name==="source"){let inputId=inputs.get(value.input);inputId==null&&(inputId=inputsNextIndex,inputs.set(value.input,inputsNextIndex),inputsNextIndex++);fixed[name]={end:value.end,inputId,start:value.start}}else fixed[name]=value}return emitInputs&&(fixed.inputs=[...inputs.keys()].map(input2=>input2.toJSON())),fixed}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(stringifier2=stringify$3$1){stringifier2.stringify&&(stringifier2=stringifier2.stringify);let result2="";return stringifier2(this,i2=>{result2+=i2}),result2}warn(result2,text,opts){let data={node:this};for(let i2 in opts)data[i2]=opts[i2];return result2.warn(text,data)}get proxyOf(){return this}});node$1=Node$4$1;Node$4$1.default=Node$4$1;var Node$3$1=node$1,Declaration$4$1=class extends Node$3$1{constructor(defaults){defaults&&typeof defaults.value!="undefined"&&typeof defaults.value!="string"&&(defaults={...defaults,value:String(defaults.value)});super(defaults);this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},declaration$1=Declaration$4$1;Declaration$4$1.default=Declaration$4$1;var urlAlphabet$1="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet$1=(alphabet,defaultSize=21)=>(size=defaultSize)=>{let id="",i2=size;while(i2--)id+=alphabet[Math.random()*alphabet.length|0];return id},nanoid$1$1=(size=21)=>{let id="",i2=size;while(i2--)id+=urlAlphabet$1[Math.random()*64|0];return id},nonSecure$1={nanoid:nanoid$1$1,customAlphabet:customAlphabet$1},{SourceMapConsumer:SourceMapConsumer$2$1,SourceMapGenerator:SourceMapGenerator$2$1}=require$$2$1,{existsSync:existsSync$1,readFileSync:readFileSync$1}=require$$2$1,{dirname:dirname$1$1,join:join$1}=require$$2$1;PreviousMap$2$1=(class{constructor(css,opts){if(opts.map!==!1){this.loadAnnotation(css);this.inline=this.startWith(this.annotation,"data:");let prev=opts.map?opts.map.prev:void 0,text=this.loadMap(opts.from,prev);!this.mapFile&&opts.from&&(this.mapFile=opts.from);this.mapFile&&(this.root=dirname$1$1(this.mapFile));text&&(this.text=text)}}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2$1(this.text)),this.consumerCache}decodeInline(text){if(/^data:application\/json;charset=utf-?8,/.test(text)||/^data:application\/json,/.test(text))return decodeURIComponent(text.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(text)||/^data:application\/json;base64,/.test(text))return fromBase64$1(text.substr(RegExp.lastMatch.length));let encoding=text.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+encoding);}getAnnotationURL(sourceMapString){return sourceMapString.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(map){return typeof map!="object"?!1:typeof map.mappings=="string"||typeof map._mappings=="string"||Array.isArray(map.sections)}loadAnnotation(css){let comments=css.match(/\/\*\s*# sourceMappingURL=/gm);if(comments){let start=css.lastIndexOf(comments.pop()),end=css.indexOf("*/",start);start>-1&&end>-1&&(this.annotation=this.getAnnotationURL(css.substring(start,end)))}}loadFile(path){return this.root=dirname$1$1(path),existsSync$1(path)?(this.mapFile=path,readFileSync$1(path,"utf-8").toString().trim()):void 0}loadMap(file,prev){if(prev===!1)return!1;if(prev){if(typeof prev=="string")return prev;if(typeof prev=="function"){let prevPath=prev(file);if(prevPath){let map=this.loadFile(prevPath);if(!map)throw new Error("Unable to load previous source map: "+prevPath.toString());return map}}else{if(prev instanceof SourceMapConsumer$2$1)return SourceMapGenerator$2$1.fromSourceMap(prev).toString();if(prev instanceof SourceMapGenerator$2$1)return prev.toString();if(this.isMap(prev))return JSON.stringify(prev);throw new Error("Unsupported previous source map format: "+prev.toString());}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let map=this.annotation;return file&&(map=join$1(dirname$1$1(file),map)),this.loadFile(map)}}}startWith(string,start){return string?string.substr(0,start.length)===start:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}});previousMap$1=PreviousMap$2$1;PreviousMap$2$1.default=PreviousMap$2$1;var{SourceMapConsumer:SourceMapConsumer$1$1,SourceMapGenerator:SourceMapGenerator$1$1}=require$$2$1,{fileURLToPath:fileURLToPath$1,pathToFileURL:pathToFileURL$1$1}=require$$2$1,{isAbsolute:isAbsolute$1,resolve:resolve$1$1}=require$$2$1,{nanoid:nanoid$2}=nonSecure$1,terminalHighlight$2=require$$2$1,CssSyntaxError$1$1=cssSyntaxError$1,PreviousMap$1$1=previousMap$1,fromOffsetCache$1=Symbol("fromOffsetCache"),sourceMapAvailable$1$1=Boolean(SourceMapConsumer$1$1&&SourceMapGenerator$1$1),pathAvailable$1$1=Boolean(resolve$1$1&&isAbsolute$1),Input$4$1=class{constructor(css,opts={}){if(css===null||typeof css=="undefined"||typeof css=="object"&&!css.toString)throw new Error(`PostCSS received ${css} instead of CSS string`);if(this.css=css.toString(),this.css[0]==="ï»¿"||this.css[0]==="ï¿¾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,opts.from&&(this.file=!pathAvailable$1$1||/^\w+:\/\//.test(opts.from)||isAbsolute$1(opts.from)?opts.from:resolve$1$1(opts.from)),pathAvailable$1$1&&sourceMapAvailable$1$1){let map=new PreviousMap$1$1(this.css,opts);if(map.text){this.map=map;let file=map.consumer().file;!this.file&&file&&(this.file=this.mapResolve(file))}}this.file||(this.id="<input css "+nanoid$2(6)+">");this.map&&(this.map.file=this.from)}error(message,line,column,opts={}){let result2,endLine,endColumn;if(line&&typeof line=="object"){let start=line,end=column;if(typeof start.offset=="number"){let pos=this.fromOffset(start.offset);line=pos.line;column=pos.col}else line=start.line,column=start.column;if(typeof end.offset=="number"){let pos=this.fromOffset(end.offset);endLine=pos.line;endColumn=pos.col}else endLine=end.line,endColumn=end.column}else if(!column){let pos=this.fromOffset(line);line=pos.line;column=pos.col}let origin=this.origin(line,column,endLine,endColumn);return result2=origin?new CssSyntaxError$1$1(message,origin.endLine===void 0?origin.line:{column:origin.column,line:origin.line},origin.endLine===void 0?origin.column:{column:origin.endColumn,line:origin.endLine},origin.source,origin.file,opts.plugin):new CssSyntaxError$1$1(message,endLine===void 0?line:{column,line},endLine===void 0?column:{column:endColumn,line:endLine},this.css,this.file,opts.plugin),result2.input={column,endColumn,endLine,line,source:this.css},this.file&&(pathToFileURL$1$1&&(result2.input.url=pathToFileURL$1$1(this.file).toString()),result2.input.file=this.file),result2}fromOffset(offset){let lastLine,lineToIndex;if(this[fromOffsetCache$1])lineToIndex=this[fromOffsetCache$1];else{let lines=this.css.split("\n");lineToIndex=new Array(lines.length);let prevIndex=0;for(let i2=0,l2=lines.length;i2<l2;i2++)lineToIndex[i2]=prevIndex,prevIndex+=lines[i2].length+1;this[fromOffsetCache$1]=lineToIndex}lastLine=lineToIndex[lineToIndex.length-1];let min=0;if(offset>=lastLine)min=lineToIndex.length-1;else{let max=lineToIndex.length-2,mid;while(min<max)if(mid=min+(max-min>>1),offset<lineToIndex[mid])max=mid-1;else if(offset>=lineToIndex[mid+1])min=mid+1;else{min=mid;break}}return{col:offset-lineToIndex[min]+1,line:min+1}}mapResolve(file){return/^\w+:\/\//.test(file)?file:resolve$1$1(this.map.consumer().sourceRoot||this.map.root||".",file)}origin(line,column,endLine,endColumn){if(!this.map)return!1;let consumer=this.map.consumer(),from=consumer.originalPositionFor({column,line});if(!from.source)return!1;let to;typeof endLine=="number"&&(to=consumer.originalPositionFor({column:endColumn,line:endLine}));let fromUrl;fromUrl=isAbsolute$1(from.source)?pathToFileURL$1$1(from.source):new URL(from.source,this.map.consumer().sourceRoot||pathToFileURL$1$1(this.map.mapFile));let result2={column:from.column,endColumn:to&&to.column,endLine:to&&to.line,line:from.line,url:fromUrl.toString()};if(fromUrl.protocol==="file:")if(fileURLToPath$1)result2.file=fileURLToPath$1(fromUrl);else throw new Error(`file: protocol is not available in this PostCSS build`);let source=consumer.sourceContentFor(from.source);return source&&(result2.source=source),result2}toJSON(){let json={};for(let name of["hasBOM","css","file","id"])this[name]!=null&&(json[name]=this[name]);return this.map&&(json.map={...this.map},json.map.consumerCache&&(json.map.consumerCache=void 0)),json}get from(){return this.file||this.id}},input$1=Input$4$1;Input$4$1.default=Input$4$1;terminalHighlight$2&&terminalHighlight$2.registerInput&&terminalHighlight$2.registerInput(Input$4$1);var{SourceMapConsumer:SourceMapConsumer$3,SourceMapGenerator:SourceMapGenerator$3}=require$$2$1,{dirname:dirname$2,relative:relative$1,resolve:resolve$2,sep:sep$1}=require$$2$1,{pathToFileURL:pathToFileURL$2}=require$$2$1,Input$3$1=input$1,sourceMapAvailable$2=Boolean(SourceMapConsumer$3&&SourceMapGenerator$3),pathAvailable$2=Boolean(dirname$2&&resolve$2&&relative$1&&sep$1),MapGenerator$2$1=class{constructor(stringify2,root2,opts,cssString){this.stringify=stringify2;this.mapOpts=opts.map||{};this.root=root2;this.opts=opts;this.css=cssString;this.originalCSS=cssString;this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute;this.memoizedFileURLs=new Map;this.memoizedPaths=new Map;this.memoizedURLs=new Map}addAnnotation(){let content;content=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let eol="\n";this.css.includes("\r\n")&&(eol="\r\n");this.css+=eol+"/*# sourceMappingURL="+content+" */"}applyPrevMaps(){for(let prev of this.previous()){let from=this.toUrl(this.path(prev.file)),root2=prev.root||dirname$2(prev.file),map;this.mapOpts.sourcesContent===!1?(map=new SourceMapConsumer$3(prev.text),map.sourcesContent&&(map.sourcesContent=null)):map=prev.consumer();this.map.applySourceMap(map,from,this.toUrl(this.path(root2)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let node2;for(let i2=this.root.nodes.length-1;i2>=0;i2--)(node2=this.root.nodes[i2],node2.type==="comment")&&node2.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(i2)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable$2&&sourceMapAvailable$2&&this.isMap())return this.generateMap();else{let result2="";return this.stringify(this.root,i2=>{result2+=i2}),[result2]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let prev=this.previous()[0].consumer();prev.file=this.outputFile();this.map=SourceMapGenerator$3.fromSourceMap(prev,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="";this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0});let line=1,column=1,noSource="<no source>",mapping={generated:{column:0,line:0},original:{column:0,line:0},source:""},lines,last;this.stringify(this.root,(str,node2,type)=>{if(this.css+=str,node2&&type!=="end"&&(mapping.generated.line=line,mapping.generated.column=column-1,node2.source&&node2.source.start?(mapping.source=this.sourcePath(node2),mapping.original.line=node2.source.start.line,mapping.original.column=node2.source.start.column-1,this.map.addMapping(mapping)):(mapping.source=noSource,mapping.original.line=1,mapping.original.column=0,this.map.addMapping(mapping))),lines=str.match(/\n/g),lines?(line+=lines.length,last=str.lastIndexOf("\n"),column=str.length-last):column+=str.length,node2&&type!=="start"){let p=node2.parent||{raws:{}},childless=node2.type==="decl"||node2.type==="atrule"&&!node2.nodes;(!childless||node2!==p.last||p.raws.semicolon)&&(node2.source&&node2.source.end?(mapping.source=this.sourcePath(node2),mapping.original.line=node2.source.end.line,mapping.original.column=node2.source.end.column-1,mapping.generated.line=line,mapping.generated.column=column-2,this.map.addMapping(mapping)):(mapping.source=noSource,mapping.original.line=1,mapping.original.column=0,mapping.generated.line=line,mapping.generated.column=column-1,this.map.addMapping(mapping)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(i2=>i2.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let annotation=this.mapOpts.annotation;return typeof annotation!="undefined"&&annotation!==!0?!1:this.previous().length?this.previous().some(i2=>i2.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(i2=>i2.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(file){if(this.mapOpts.absolute||file.charCodeAt(0)===60||/^\w+:\/\//.test(file))return file;let cached=this.memoizedPaths.get(file);if(cached)return cached;let from=this.opts.to?dirname$2(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(from=dirname$2(resolve$2(from,this.mapOpts.annotation)));let path=relative$1(from,file);return this.memoizedPaths.set(file,path),path}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(node2=>{if(node2.source&&node2.source.input.map){let map=node2.source.input.map;this.previousMaps.includes(map)||this.previousMaps.push(map)}});else{let input2=new Input$3$1(this.originalCSS,this.opts);input2.map&&this.previousMaps.push(input2.map)}return this.previousMaps}setSourcesContent(){let already={};if(this.root)this.root.walk(node2=>{if(node2.source){let from=node2.source.input.from;if(from&&!already[from]){already[from]=!0;let fromUrl=this.usesFileUrls?this.toFileUrl(from):this.toUrl(this.path(from));this.map.setSourceContent(fromUrl,node2.source.input.css)}}});else if(this.css){let from=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(from,this.css)}}sourcePath(node2){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(node2.source.input.from):this.toUrl(this.path(node2.source.input.from))}toBase64(str){return Buffer?Buffer.from(str).toString("base64"):window.btoa(unescape(encodeURIComponent(str)))}toFileUrl(path){let cached=this.memoizedFileURLs.get(path);if(cached)return cached;if(pathToFileURL$2){let fileURL=pathToFileURL$2(path).toString();return this.memoizedFileURLs.set(path,fileURL),fileURL}throw new Error("`map.absolute` option is not available in this PostCSS build");}toUrl(path){let cached=this.memoizedURLs.get(path);if(cached)return cached;sep$1==="\\"&&(path=path.replace(/\\/g,"/"));let url=encodeURI(path).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(path,url),url}},mapGenerator$1=MapGenerator$2$1,Node$2$1=node$1,Comment$4$1=class extends Node$2$1{constructor(defaults){super(defaults);this.type="comment"}},comment$1=Comment$4$1;Comment$4$1.default=Comment$4$1;var{isClean:isClean$1$1,my:my$1$1}=symbols$1,Declaration$3$1=declaration$1,Comment$3$1=comment$1,Node$1$1=node$1,parse$4$1,Rule$4$1,AtRule$4$1,Root$6$1;Container$7$1=(class Container extends Node$1$1{append(...children){for(let child of children){let nodes=this.normalize(child,this.last);for(let node2 of nodes)this.proxyOf.nodes.push(node2)}return this.markDirty(),this}cleanRaws(keepBetween){if(super.cleanRaws(keepBetween),this.nodes)for(let node2 of this.nodes)node2.cleanRaws(keepBetween)}each(callback){if(!this.proxyOf.nodes)return void 0;let iterator=this.getIterator(),index2,result2;while(this.indexes[iterator]<this.proxyOf.nodes.length){if(index2=this.indexes[iterator],result2=callback(this.proxyOf.nodes[index2],index2),result2===!1)break;this.indexes[iterator]+=1}return delete this.indexes[iterator],result2}every(condition){return this.nodes.every(condition)}getIterator(){this.lastEach||(this.lastEach=0);this.indexes||(this.indexes={});this.lastEach+=1;let iterator=this.lastEach;return this.indexes[iterator]=0,iterator}getProxyProcessor(){return{get(node2,prop){return prop==="proxyOf"?node2:node2[prop]?prop==="each"||typeof prop=="string"&&prop.startsWith("walk")?(...args)=>node2[prop](...args.map(i2=>typeof i2=="function"?(child,index2)=>i2(child.toProxy(),index2):i2)):prop==="every"||prop==="some"?cb=>node2[prop]((child,...other)=>cb(child.toProxy(),...other)):prop==="root"?()=>node2.root().toProxy():prop==="nodes"?node2.nodes.map(i2=>i2.toProxy()):prop==="first"||prop==="last"?node2[prop].toProxy():node2[prop]:node2[prop]},set(node2,prop,value){return node2[prop]===value?!0:(node2[prop]=value,(prop==="name"||prop==="params"||prop==="selector")&&node2.markDirty(),!0)}}}index(child){return typeof child=="number"?child:(child.proxyOf&&(child=child.proxyOf),this.proxyOf.nodes.indexOf(child))}insertAfter(exist,add){let existIndex=this.index(exist),nodes=this.normalize(add,this.proxyOf.nodes[existIndex]).reverse();existIndex=this.index(exist);for(let node2 of nodes)this.proxyOf.nodes.splice(existIndex+1,0,node2);let index2;for(let id in this.indexes)index2=this.indexes[id],existIndex<index2&&(this.indexes[id]=index2+nodes.length);return this.markDirty(),this}insertBefore(exist,add){let existIndex=this.index(exist),type=existIndex===0?"prepend":!1,nodes=this.normalize(add,this.proxyOf.nodes[existIndex],type).reverse();existIndex=this.index(exist);for(let node2 of nodes)this.proxyOf.nodes.splice(existIndex,0,node2);let index2;for(let id in this.indexes)index2=this.indexes[id],existIndex<=index2&&(this.indexes[id]=index2+nodes.length);return this.markDirty(),this}normalize(nodes,sample){if(typeof nodes=="string")nodes=cleanSource$1(parse$4$1(nodes).nodes);else if(typeof nodes=="undefined")nodes=[];else if(Array.isArray(nodes)){nodes=nodes.slice(0);for(let i2 of nodes)i2.parent&&i2.parent.removeChild(i2,"ignore")}else if(nodes.type==="root"&&this.type!=="document"){nodes=nodes.nodes.slice(0);for(let i2 of nodes)i2.parent&&i2.parent.removeChild(i2,"ignore")}else if(nodes.type)nodes=[nodes];else if(nodes.prop){if(typeof nodes.value=="undefined")throw new Error("Value field is missed in node creation");else typeof nodes.value!="string"&&(nodes.value=String(nodes.value));nodes=[new Declaration$3$1(nodes)]}else if(nodes.selector)nodes=[new Rule$4$1(nodes)];else if(nodes.name)nodes=[new AtRule$4$1(nodes)];else if(nodes.text)nodes=[new Comment$3$1(nodes)];else throw new Error("Unknown node type in node creation");return nodes.map(i2=>(i2[my$1$1]||Container.rebuild(i2),i2=i2.proxyOf,i2.parent&&i2.parent.removeChild(i2),i2[isClean$1$1]&&markDirtyUp$1(i2),typeof i2.raws.before=="undefined"&&sample&&typeof sample.raws.before!="undefined"&&(i2.raws.before=sample.raws.before.replace(/\S/g,"")),i2.parent=this.proxyOf,i2))}prepend(...children){children=children.reverse();for(let child of children){let nodes=this.normalize(child,this.first,"prepend").reverse();for(let node2 of nodes)this.proxyOf.nodes.unshift(node2);for(let id in this.indexes)this.indexes[id]=this.indexes[id]+nodes.length}return this.markDirty(),this}push(child){return child.parent=this,this.proxyOf.nodes.push(child),this}removeAll(){for(let node2 of this.proxyOf.nodes)node2.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(child){child=this.index(child);this.proxyOf.nodes[child].parent=void 0;this.proxyOf.nodes.splice(child,1);let index2;for(let id in this.indexes)index2=this.indexes[id],index2>=child&&(this.indexes[id]=index2-1);return this.markDirty(),this}replaceValues(pattern,opts,callback){return callback||(callback=opts,opts={}),this.walkDecls(decl=>{(!opts.props||opts.props.includes(decl.prop))&&(!opts.fast||decl.value.includes(opts.fast))&&(decl.value=decl.value.replace(pattern,callback))}),this.markDirty(),this}some(condition){return this.nodes.some(condition)}walk(callback){return this.each((child,i2)=>{let result2;try{result2=callback(child,i2)}catch(e2){throw child.addToError(e2);}return result2!==!1&&child.walk&&(result2=child.walk(callback)),result2})}walkAtRules(name,callback){return callback?name instanceof RegExp?this.walk((child,i2)=>{if(child.type==="atrule"&&name.test(child.name))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="atrule"&&child.name===name)return callback(child,i2)}):(callback=name,this.walk((child,i2)=>{if(child.type==="atrule")return callback(child,i2)}))}walkComments(callback){return this.walk((child,i2)=>{if(child.type==="comment")return callback(child,i2)})}walkDecls(prop,callback){return callback?prop instanceof RegExp?this.walk((child,i2)=>{if(child.type==="decl"&&prop.test(child.prop))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="decl"&&child.prop===prop)return callback(child,i2)}):(callback=prop,this.walk((child,i2)=>{if(child.type==="decl")return callback(child,i2)}))}walkRules(selector,callback){return callback?selector instanceof RegExp?this.walk((child,i2)=>{if(child.type==="rule"&&selector.test(child.selector))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="rule"&&child.selector===selector)return callback(child,i2)}):(callback=selector,this.walk((child,i2)=>{if(child.type==="rule")return callback(child,i2)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}});Container$7$1.registerParse=dependant=>{parse$4$1=dependant};Container$7$1.registerRule=dependant=>{Rule$4$1=dependant};Container$7$1.registerAtRule=dependant=>{AtRule$4$1=dependant};Container$7$1.registerRoot=dependant=>{Root$6$1=dependant};container$1=Container$7$1;Container$7$1.default=Container$7$1;Container$7$1.rebuild=node2=>{node2.type==="atrule"?Object.setPrototypeOf(node2,AtRule$4$1.prototype):node2.type==="rule"?Object.setPrototypeOf(node2,Rule$4$1.prototype):node2.type==="decl"?Object.setPrototypeOf(node2,Declaration$3$1.prototype):node2.type==="comment"?Object.setPrototypeOf(node2,Comment$3$1.prototype):node2.type==="root"&&Object.setPrototypeOf(node2,Root$6$1.prototype),node2[my$1$1]=!0,node2.nodes&&node2.nodes.forEach(child=>{Container$7$1.rebuild(child)})};Container$6$1=container$1;Document$3$1=(class extends Container$6$1{constructor(defaults){super({type:"document",...defaults});this.nodes||(this.nodes=[])}toResult(opts={}){let lazy=new LazyResult$4$1(new Processor$3$1,this,opts);return lazy.stringify()}});Document$3$1.registerLazyResult=dependant=>{LazyResult$4$1=dependant};Document$3$1.registerProcessor=dependant=>{Processor$3$1=dependant};document$1$1=Document$3$1;Document$3$1.default=Document$3$1;var printed$1={},warnOnce$2$1=function(message){printed$1[message]||(printed$1[message]=!0,typeof console!="undefined"&&console.warn&&console.warn(message))},Warning$2$1=class{constructor(text,opts={}){if(this.type="warning",this.text=text,opts.node&&opts.node.source){let range=opts.node.rangeBy(opts);this.line=range.start.line;this.column=range.start.column;this.endLine=range.end.line;this.endColumn=range.end.column}for(let opt in opts)this[opt]=opts[opt]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},warning$1=Warning$2$1;Warning$2$1.default=Warning$2$1;var Warning$1$1=warning$1,Result$3$1=class{constructor(processor2,root2,opts){this.processor=processor2;this.messages=[];this.root=root2;this.opts=opts;this.css=void 0;this.map=void 0}toString(){return this.css}warn(text,opts={}){opts.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(opts.plugin=this.lastPlugin.postcssPlugin);let warning2=new Warning$1$1(text,opts);return this.messages.push(warning2),warning2}warnings(){return this.messages.filter(i2=>i2.type==="warning")}get content(){return this.css}},result$1=Result$3$1;Result$3$1.default=Result$3$1;var SINGLE_QUOTE$1="'".charCodeAt(0),DOUBLE_QUOTE$1='"'.charCodeAt(0),BACKSLASH$1="\\".charCodeAt(0),SLASH$1="/".charCodeAt(0),NEWLINE$1="\n".charCodeAt(0),SPACE$1=" ".charCodeAt(0),FEED$1="\f".charCodeAt(0),TAB$1="    ".charCodeAt(0),CR$1="\r".charCodeAt(0),OPEN_SQUARE$1="[".charCodeAt(0),CLOSE_SQUARE$1="]".charCodeAt(0),OPEN_PARENTHESES$1="(".charCodeAt(0),CLOSE_PARENTHESES$1=")".charCodeAt(0),OPEN_CURLY$1="{".charCodeAt(0),CLOSE_CURLY$1="}".charCodeAt(0),SEMICOLON$1=";".charCodeAt(0),ASTERISK$1="*".charCodeAt(0),COLON$1=":".charCodeAt(0),AT$1="@".charCodeAt(0),RE_AT_END$1=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$1=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$1=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$1=/[\da-f]/i,tokenize$1=function(input2,options={}){function position(){return pos}function unclosed(what){throw input2.error("Unclosed "+what,pos);}function endOfFile(){return returned.length===0&&pos>=length}function nextToken(opts){if(returned.length)return returned.pop();if(!(pos>=length)){let ignoreUnclosed=opts?opts.ignoreUnclosed:!1;code=css.charCodeAt(pos);switch(code){case NEWLINE$1:case SPACE$1:case TAB$1:case CR$1:case FEED$1:next=pos;do next+=1,code=css.charCodeAt(next);while(code===SPACE$1||code===NEWLINE$1||code===TAB$1||code===CR$1||code===FEED$1);currentToken=["space",css.slice(pos,next)];pos=next-1;break;case OPEN_SQUARE$1:case CLOSE_SQUARE$1:case OPEN_CURLY$1:case CLOSE_CURLY$1:case COLON$1:case SEMICOLON$1:case CLOSE_PARENTHESES$1:{let controlChar=String.fromCharCode(code);currentToken=[controlChar,controlChar,pos];break}case OPEN_PARENTHESES$1:if(prev=buffer.length?buffer.pop()[1]:"",n2=css.charCodeAt(pos+1),prev==="url"&&n2!==SINGLE_QUOTE$1&&n2!==DOUBLE_QUOTE$1&&n2!==SPACE$1&&n2!==NEWLINE$1&&n2!==TAB$1&&n2!==FEED$1&&n2!==CR$1){next=pos;do{if(escaped=!1,next=css.indexOf(")",next+1),next===-1)if(ignore||ignoreUnclosed){next=pos;break}else unclosed("bracket");for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH$1;)escapePos-=1,escaped=!escaped}while(escaped);currentToken=["brackets",css.slice(pos,next+1),pos,next];pos=next}else next=css.indexOf(")",pos+1),content=css.slice(pos,next+1),next===-1||RE_BAD_BRACKET$1.test(content)?currentToken=["(","(",pos]:(currentToken=["brackets",content,pos,next],pos=next);break;case SINGLE_QUOTE$1:case DOUBLE_QUOTE$1:quote=code===SINGLE_QUOTE$1?"'":'"';next=pos;do{if(escaped=!1,next=css.indexOf(quote,next+1),next===-1)if(ignore||ignoreUnclosed){next=pos+1;break}else unclosed("string");for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH$1;)escapePos-=1,escaped=!escaped}while(escaped);currentToken=["string",css.slice(pos,next+1),pos,next];pos=next;break;case AT$1:RE_AT_END$1.lastIndex=pos+1;RE_AT_END$1.test(css);next=RE_AT_END$1.lastIndex===0?css.length-1:RE_AT_END$1.lastIndex-2;currentToken=["at-word",css.slice(pos,next+1),pos,next];pos=next;break;case BACKSLASH$1:for(next=pos,escape=!0;css.charCodeAt(next+1)===BACKSLASH$1;)next+=1,escape=!escape;if(code=css.charCodeAt(next+1),escape&&code!==SLASH$1&&code!==SPACE$1&&code!==NEWLINE$1&&code!==TAB$1&&code!==CR$1&&code!==FEED$1&&(next+=1,RE_HEX_ESCAPE$1.test(css.charAt(next)))){while(RE_HEX_ESCAPE$1.test(css.charAt(next+1)))next+=1;css.charCodeAt(next+1)===SPACE$1&&(next+=1)}currentToken=["word",css.slice(pos,next+1),pos,next];pos=next;break;default:code===SLASH$1&&css.charCodeAt(pos+1)===ASTERISK$1?(next=css.indexOf("*/",pos+2)+1,next===0&&(ignore||ignoreUnclosed?next=css.length:unclosed("comment")),currentToken=["comment",css.slice(pos,next+1),pos,next],pos=next):(RE_WORD_END$1.lastIndex=pos+1,RE_WORD_END$1.test(css),next=RE_WORD_END$1.lastIndex===0?css.length-1:RE_WORD_END$1.lastIndex-2,currentToken=["word",css.slice(pos,next+1),pos,next],buffer.push(currentToken),pos=next)}return pos++,currentToken}}function back(token){returned.push(token)}let css=input2.css.valueOf(),ignore=options.ignoreErrors,code,next,quote,content,escape,escaped,escapePos,prev,n2,currentToken,length=css.length,pos=0,buffer=[],returned=[];return{back,endOfFile,nextToken,position}},Container$5$1=container$1,AtRule$3$1=class extends Container$5$1{constructor(defaults){super(defaults);this.type="atrule"}append(...children){return this.proxyOf.nodes||(this.nodes=[]),super.append(...children)}prepend(...children){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...children)}},atRule$1=AtRule$3$1;AtRule$3$1.default=AtRule$3$1;Container$5$1.registerAtRule(AtRule$3$1);Container$4$1=container$1;Root$5$1=(class extends Container$4$1{constructor(defaults){super(defaults);this.type="root";this.nodes||(this.nodes=[])}normalize(child,sample,type){let nodes=super.normalize(child);if(sample)if(type==="prepend")this.nodes.length>1?sample.raws.before=this.nodes[1].raws.before:delete sample.raws.before;else if(this.first!==sample)for(let node2 of nodes)node2.raws.before=sample.raws.before;return nodes}removeChild(child,ignore){let index2=this.index(child);return!ignore&&index2===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[index2].raws.before),super.removeChild(child)}toResult(opts={}){let lazy=new LazyResult$3$1(new Processor$2$1,this,opts);return lazy.stringify()}});Root$5$1.registerLazyResult=dependant=>{LazyResult$3$1=dependant};Root$5$1.registerProcessor=dependant=>{Processor$2$1=dependant};root$1=Root$5$1;Root$5$1.default=Root$5$1;Container$4$1.registerRoot(Root$5$1);list$2$1={comma(string){return list$2$1.split(string,[","],!0)},space(string){return list$2$1.split(string,[" ","\n","\t"])},split(string,separators,last){let array=[],current="",split=!1,func=0,inQuote=!1,prevQuote="",escape=!1;for(let letter of string)escape?escape=!1:letter==="\\"?escape=!0:inQuote?letter===prevQuote&&(inQuote=!1):letter==='"'||letter==="'"?(inQuote=!0,prevQuote=letter):letter==="("?func+=1:letter===")"?func>0&&(func-=1):func===0&&separators.includes(letter)&&(split=!0),split?(current!==""&&array.push(current.trim()),current="",split=!1):current+=letter;return(last||current!=="")&&array.push(current.trim()),array}};list_1$1=list$2$1;list$2$1.default=list$2$1;var Container$3$1=container$1,list$1$1=list_1$1,Rule$3$1=class extends Container$3$1{constructor(defaults){super(defaults);this.type="rule";this.nodes||(this.nodes=[])}get selectors(){return list$1$1.comma(this.selector)}set selectors(values){let match=this.selector?this.selector.match(/,\s*/):null,sep2=match?match[0]:","+this.raw("between","beforeOpen");this.selector=values.join(sep2)}},rule$1=Rule$3$1;Rule$3$1.default=Rule$3$1;Container$3$1.registerRule(Rule$3$1);var Declaration$2$1=declaration$1,tokenizer2$1=tokenize$1,Comment$2$1=comment$1,AtRule$2$1=atRule$1,Root$4$1=root$1,Rule$2$1=rule$1,SAFE_COMMENT_NEIGHBOR$1={empty:!0,space:!0};var Parser$1$1=class{constructor(input2){this.input=input2;this.root=new Root$4$1;this.current=this.root;this.spaces="";this.semicolon=!1;this.createTokenizer();this.root.source={input:input2,start:{column:1,line:1,offset:0}}}atrule(token){let node2=new AtRule$2$1;node2.name=token[1].slice(1);node2.name===""&&this.unnamedAtrule(node2,token);this.init(node2,token[2]);let type,prev,shift,last=!1,open=!1,params=[],brackets=[];while(!this.tokenizer.endOfFile()){if(token=this.tokenizer.nextToken(),type=token[0],type==="("||type==="["?brackets.push(type==="("?")":"]"):type==="{"&&brackets.length>0?brackets.push("}"):type===brackets[brackets.length-1]&&brackets.pop(),brackets.length===0)if(type===";"){node2.source.end=this.getPosition(token[2]);node2.source.end.offset++;this.semicolon=!0;break}else if(type==="{"){open=!0;break}else if(type==="}"){if(params.length>0){for(shift=params.length-1,prev=params[shift];prev&&prev[0]==="space";)prev=params[--shift];prev&&(node2.source.end=this.getPosition(prev[3]||prev[2]),node2.source.end.offset++)}this.end(token);break}else params.push(token);else params.push(token);if(this.tokenizer.endOfFile()){last=!0;break}}node2.raws.between=this.spacesAndCommentsFromEnd(params);params.length?(node2.raws.afterName=this.spacesAndCommentsFromStart(params),this.raw(node2,"params",params),last&&(token=params[params.length-1],node2.source.end=this.getPosition(token[3]||token[2]),node2.source.end.offset++,this.spaces=node2.raws.between,node2.raws.between="")):(node2.raws.afterName="",node2.params="");open&&(node2.nodes=[],this.current=node2)}checkMissedSemicolon(tokens){let colon=this.colon(tokens);if(colon!==!1){let founded=0,token;for(let j=colon-1;j>=0;j--)if(token=tokens[j],token[0]!=="space"&&(founded+=1,founded===2))break;throw this.input.error("Missed semicolon",token[0]==="word"?token[3]+1:token[2]);}}colon(tokens){let brackets=0,token,type,prev;for(let[i2,element]of tokens.entries()){if(token=element,type=token[0],type==="("&&(brackets+=1),type===")"&&(brackets-=1),brackets===0&&type===":")if(prev)if(prev[0]==="word"&&prev[1]==="progid")continue;else return i2;else this.doubleColon(token);prev=token}return!1}comment(token){let node2=new Comment$2$1;this.init(node2,token[2]);node2.source.end=this.getPosition(token[3]||token[2]);node2.source.end.offset++;let text=token[1].slice(2,-2);if(/^\s*$/.test(text))node2.text="",node2.raws.left=text,node2.raws.right="";else{let match=text.match(/^(\s*)([^]*\S)(\s*)$/);node2.text=match[2];node2.raws.left=match[1];node2.raws.right=match[3]}}createTokenizer(){this.tokenizer=tokenizer2$1(this.input)}decl(tokens,customProperty){let node2=new Declaration$2$1;this.init(node2,tokens[0][2]);let last=tokens[tokens.length-1];for(last[0]===";"&&(this.semicolon=!0,tokens.pop()),node2.source.end=this.getPosition(last[3]||last[2]||findLastWithPosition$1(tokens)),node2.source.end.offset++;tokens[0][0]!=="word";)tokens.length===1&&this.unknownWord(tokens),node2.raws.before+=tokens.shift()[1];for(node2.source.start=this.getPosition(tokens[0][2]),node2.prop="";tokens.length;){let type=tokens[0][0];if(type===":"||type==="space"||type==="comment")break;node2.prop+=tokens.shift()[1]}node2.raws.between="";let token;while(tokens.length)if(token=tokens.shift(),token[0]===":"){node2.raws.between+=token[1];break}else token[0]==="word"&&/\w/.test(token[1])&&this.unknownWord([token]),node2.raws.between+=token[1];(node2.prop[0]==="_"||node2.prop[0]==="*")&&(node2.raws.before+=node2.prop[0],node2.prop=node2.prop.slice(1));let firstSpaces=[],next;while(tokens.length){if(next=tokens[0][0],next!=="space"&&next!=="comment")break;firstSpaces.push(tokens.shift())}this.precheckMissedSemicolon(tokens);for(let i2=tokens.length-1;i2>=0;i2--){if(token=tokens[i2],token[1].toLowerCase()==="!important"){node2.important=!0;let string=this.stringFrom(tokens,i2);string=this.spacesFromEnd(tokens)+string;string!==" !important"&&(node2.raws.important=string);break}else if(token[1].toLowerCase()==="important"){let cache=tokens.slice(0),str="";for(let j=i2;j>0;j--){let type=cache[j][0];if(str.trim().indexOf("!")===0&&type!=="space")break;str=cache.pop()[1]+str}str.trim().indexOf("!")===0&&(node2.important=!0,node2.raws.important=str,tokens=cache)}if(token[0]!=="space"&&token[0]!=="comment")break}let hasWord=tokens.some(i2=>i2[0]!=="space"&&i2[0]!=="comment");hasWord&&(node2.raws.between+=firstSpaces.map(i2=>i2[1]).join(""),firstSpaces=[]);this.raw(node2,"value",firstSpaces.concat(tokens),customProperty);node2.value.includes(":")&&!customProperty&&this.checkMissedSemicolon(tokens)}doubleColon(token){throw this.input.error("Double colon",{offset:token[2]},{offset:token[2]+token[1].length});}emptyRule(token){let node2=new Rule$2$1;this.init(node2,token[2]);node2.selector="";node2.raws.between="";this.current=node2}end(token){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon);this.semicolon=!1;this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.spaces="";this.current.parent?(this.current.source.end=this.getPosition(token[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(token)}endFile(){this.current.parent&&this.unclosedBlock();this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon);this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(token){if(this.spaces+=token[1],this.current.nodes){let prev=this.current.nodes[this.current.nodes.length-1];prev&&prev.type==="rule"&&!prev.raws.ownSemicolon&&(prev.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(offset){let pos=this.input.fromOffset(offset);return{column:pos.col,line:pos.line,offset}}init(node2,offset){this.current.push(node2);node2.source={input:this.input,start:this.getPosition(offset)};node2.raws.before=this.spaces;this.spaces="";node2.type!=="comment"&&(this.semicolon=!1)}other(start){let end=!1,type=null,colon=!1,bracket=null,brackets=[],customProperty=start[1].startsWith("--"),tokens=[],token=start;while(token){if(type=token[0],tokens.push(token),type==="("||type==="[")bracket||(bracket=token),brackets.push(type==="("?")":"]");else if(customProperty&&colon&&type==="{")bracket||(bracket=token),brackets.push("}");else if(brackets.length===0)if(type===";"){if(colon){this.decl(tokens,customProperty);return}break}else{if(type==="{"){this.rule(tokens);return}if(type==="}"){this.tokenizer.back(tokens.pop());end=!0;break}else type===":"&&(colon=!0)}else type===brackets[brackets.length-1]&&(brackets.pop(),brackets.length===0&&(bracket=null));token=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(end=!0),brackets.length>0&&this.unclosedBracket(bracket),end&&colon){if(!customProperty)while(tokens.length){if(token=tokens[tokens.length-1][0],token!=="space"&&token!=="comment")break;this.tokenizer.back(tokens.pop())}this.decl(tokens,customProperty)}else this.unknownWord(tokens)}parse(){let token;while(!this.tokenizer.endOfFile()){token=this.tokenizer.nextToken();switch(token[0]){case"space":this.spaces+=token[1];break;case";":this.freeSemicolon(token);break;case"}":this.end(token);break;case"comment":this.comment(token);break;case"at-word":this.atrule(token);break;case"{":this.emptyRule(token);break;default:this.other(token)}}this.endFile()}precheckMissedSemicolon(){}raw(node2,prop,tokens,customProperty){let token,type,length=tokens.length,value="",clean=!0,next,prev;for(let i2=0;i2<length;i2+=1)token=tokens[i2],type=token[0],type!=="space"||i2!==length-1||customProperty?type==="comment"?(prev=tokens[i2-1]?tokens[i2-1][0]:"empty",next=tokens[i2+1]?tokens[i2+1][0]:"empty",SAFE_COMMENT_NEIGHBOR$1[prev]||SAFE_COMMENT_NEIGHBOR$1[next]?clean=!1:value.slice(-1)===","?clean=!1:value+=token[1]):value+=token[1]:clean=!1;if(!clean){let raw=tokens.reduce((all,i2)=>all+i2[1],"");node2.raws[prop]={raw,value}}node2[prop]=value}rule(tokens){tokens.pop();let node2=new Rule$2$1;this.init(node2,tokens[0][2]);node2.raws.between=this.spacesAndCommentsFromEnd(tokens);this.raw(node2,"selector",tokens);this.current=node2}spacesAndCommentsFromEnd(tokens){let lastTokenType,spaces="";while(tokens.length){if(lastTokenType=tokens[tokens.length-1][0],lastTokenType!=="space"&&lastTokenType!=="comment")break;spaces=tokens.pop()[1]+spaces}return spaces}spacesAndCommentsFromStart(tokens){let next,spaces="";while(tokens.length){if(next=tokens[0][0],next!=="space"&&next!=="comment")break;spaces+=tokens.shift()[1]}return spaces}spacesFromEnd(tokens){let lastTokenType,spaces="";while(tokens.length){if(lastTokenType=tokens[tokens.length-1][0],lastTokenType!=="space")break;spaces=tokens.pop()[1]+spaces}return spaces}stringFrom(tokens,from){let result2="";for(let i2=from;i2<tokens.length;i2++)result2+=tokens[i2][1];return tokens.splice(from,tokens.length-from),result2}unclosedBlock(){let pos=this.current.source.start;throw this.input.error("Unclosed block",pos.line,pos.column);}unclosedBracket(bracket){throw this.input.error("Unclosed bracket",{offset:bracket[2]},{offset:bracket[2]+1});}unexpectedClose(token){throw this.input.error("Unexpected }",{offset:token[2]},{offset:token[2]+1});}unknownWord(tokens){throw this.input.error("Unknown word",{offset:tokens[0][2]},{offset:tokens[0][2]+tokens[0][1].length});}unnamedAtrule(node2,token){throw this.input.error("At-rule without name",{offset:token[2]},{offset:token[2]+token[1].length});}},parser$1=Parser$1$1,Container$2$1=container$1,Parser2$1=parser$1,Input$2$1=input$1;parse_1$1=parse$3$1;parse$3$1.default=parse$3$1;Container$2$1.registerParse(parse$3$1);var{isClean:isClean$3,my:my$3}=symbols$1,MapGenerator$1$1=mapGenerator$1,stringify$2$1=stringify_1$1,Container$1$1=container$1,Document$2$1=document$1$1,warnOnce$1$1=warnOnce$2$1,Result$2$1=result$1,parse$2$1=parse_1$1,Root$3$1=root$1,TYPE_TO_CLASS_NAME$1={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS$1={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$1={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$1=0;postcss$2$1={};LazyResult$2$1=(class LazyResult{constructor(processor2,css,opts){this.stringified=!1;this.processed=!1;let root2;if(typeof css=="object"&&css!==null&&(css.type==="root"||css.type==="document"))root2=cleanMarks$1(css);else if(css instanceof LazyResult||css instanceof Result$2$1)root2=cleanMarks$1(css.root),css.map&&(typeof opts.map=="undefined"&&(opts.map={}),opts.map.inline||(opts.map.inline=!1),opts.map.prev=css.map);else{let parser2=parse$2$1;opts.syntax&&(parser2=opts.syntax.parse);opts.parser&&(parser2=opts.parser);parser2.parse&&(parser2=parser2.parse);try{root2=parser2(css,opts)}catch(error){this.processed=!0;this.error=error}root2&&!root2[my$3]&&Container$1$1.rebuild(root2)}this.result=new Result$2$1(processor2,root2,opts);this.helpers={...postcss$2$1,postcss:postcss$2$1,result:this.result};this.plugins=this.processor.plugins.map(plugin22=>typeof plugin22=="object"&&plugin22.prepare?{...plugin22,...plugin22.prepare(this.result)}:plugin22)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(onRejected){return this.async().catch(onRejected)}finally(onFinally){return this.async().then(onFinally,onFinally)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins");}handleError(error,node2){let plugin22=this.result.lastPlugin;try{if(node2&&node2.addToError(error),this.error=error,error.name!=="CssSyntaxError"||error.plugin){if(plugin22.postcssVersion&&!0){let pluginName=plugin22.postcssPlugin,pluginVer=plugin22.postcssVersion,runtimeVer=this.result.processor.version,a2=pluginVer.split("."),b=runtimeVer.split(".");(a2[0]!==b[0]||parseInt(a2[1])>parseInt(b[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+runtimeVer+", but "+pluginName+" uses "+pluginVer+". Perhaps this is the source of the error below.")}}else error.plugin=plugin22.postcssPlugin,error.setMessage()}catch(err){console&&console.error&&console.error(err)}return error}prepareVisitors(){this.listeners={};let add=(plugin22,type,cb)=>{this.listeners[type]||(this.listeners[type]=[]),this.listeners[type].push([plugin22,cb])};for(let plugin22 of this.plugins)if(typeof plugin22=="object")for(let event in plugin22){if(!PLUGIN_PROPS$1[event]&&/^[A-Z]/.test(event))throw new Error(`Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS$1[event])if(typeof plugin22[event]=="object")for(let filter in plugin22[event])filter==="*"?add(plugin22,event,plugin22[event][filter]):add(plugin22,event+"-"+filter.toLowerCase(),plugin22[event][filter]);else typeof plugin22[event]=="function"&&add(plugin22,event,plugin22[event])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let i2=0;i2<this.plugins.length;i2++){let plugin22=this.plugins[i2],promise=this.runOnRoot(plugin22);if(isPromise$1(promise))try{await promise}catch(error){throw this.handleError(error);}}if(this.prepareVisitors(),this.hasListener){let root2=this.result.root;while(!root2[isClean$3]){root2[isClean$3]=!0;let stack=[toStack$1(root2)];while(stack.length>0){let promise=this.visitTick(stack);if(isPromise$1(promise))try{await promise}catch(e2){let node2=stack[stack.length-1].node;throw this.handleError(e2,node2);}}}if(this.listeners.OnceExit)for(let[plugin22,visitor]of this.listeners.OnceExit){this.result.lastPlugin=plugin22;try{if(root2.type==="document"){let roots=root2.nodes.map(subRoot=>visitor(subRoot,this.helpers));await Promise.all(roots)}else await visitor(root2,this.helpers)}catch(e2){throw this.handleError(e2);}}}return this.processed=!0,this.stringify()}runOnRoot(plugin22){this.result.lastPlugin=plugin22;try{if(typeof plugin22=="object"&&plugin22.Once){if(this.result.root.type==="document"){let roots=this.result.root.nodes.map(root2=>plugin22.Once(root2,this.helpers));return isPromise$1(roots[0])?Promise.all(roots):roots}return plugin22.Once(this.result.root,this.helpers)}if(typeof plugin22=="function")return plugin22(this.result.root,this.result)}catch(error){throw this.handleError(error);}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0;this.sync();let opts=this.result.opts,str=stringify$2$1;opts.syntax&&(str=opts.syntax.stringify);opts.stringifier&&(str=opts.stringifier);str.stringify&&(str=str.stringify);let map=new MapGenerator$1$1(str,this.result.root,this.result.opts),data=map.generate();return this.result.css=data[0],this.result.map=data[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let plugin22 of this.plugins){let promise=this.runOnRoot(plugin22);if(isPromise$1(promise))throw this.getAsyncError();}if(this.prepareVisitors(),this.hasListener){let root2=this.result.root;while(!root2[isClean$3])root2[isClean$3]=!0,this.walkSync(root2);if(this.listeners.OnceExit)if(root2.type==="document")for(let subRoot of root2.nodes)this.visitSync(this.listeners.OnceExit,subRoot);else this.visitSync(this.listeners.OnceExit,root2)}return this.result}then(onFulfilled,onRejected){return!0&&("from"in this.opts||warnOnce$1$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(onFulfilled,onRejected)}toString(){return this.css}visitSync(visitors,node2){for(let[plugin22,visitor]of visitors){this.result.lastPlugin=plugin22;let promise;try{promise=visitor(node2,this.helpers)}catch(e2){throw this.handleError(e2,node2.proxyOf);}if(node2.type!=="root"&&node2.type!=="document"&&!node2.parent)return!0;if(isPromise$1(promise))throw this.getAsyncError();}}visitTick(stack){let visit2=stack[stack.length-1],{node:node2,visitors}=visit2;if(node2.type!=="root"&&node2.type!=="document"&&!node2.parent){stack.pop();return}if(visitors.length>0&&visit2.visitorIndex<visitors.length){let[plugin22,visitor]=visitors[visit2.visitorIndex];visit2.visitorIndex+=1;visit2.visitorIndex===visitors.length&&(visit2.visitors=[],visit2.visitorIndex=0);this.result.lastPlugin=plugin22;try{return visitor(node2.toProxy(),this.helpers)}catch(e2){throw this.handleError(e2,node2);}}if(visit2.iterator!==0){let iterator=visit2.iterator,child;while(child=node2.nodes[node2.indexes[iterator]])if(node2.indexes[iterator]+=1,!child[isClean$3]){child[isClean$3]=!0;stack.push(toStack$1(child));return}visit2.iterator=0;delete node2.indexes[iterator]}let events=visit2.events;while(visit2.eventIndex<events.length){let event=events[visit2.eventIndex];if(visit2.eventIndex+=1,event===CHILDREN$1){node2.nodes&&node2.nodes.length&&(node2[isClean$3]=!0,visit2.iterator=node2.getIterator());return}if(this.listeners[event]){visit2.visitors=this.listeners[event];return}}stack.pop()}walkSync(node2){node2[isClean$3]=!0;let events=getEvents$1(node2);for(let event of events)if(event===CHILDREN$1)node2.nodes&&node2.each(child=>{child[isClean$3]||this.walkSync(child)});else{let visitors=this.listeners[event];if(visitors&&this.visitSync(visitors,node2.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}});LazyResult$2$1.registerPostcss=dependant=>{postcss$2$1=dependant};lazyResult$1=LazyResult$2$1;LazyResult$2$1.default=LazyResult$2$1;Root$3$1.registerLazyResult(LazyResult$2$1);Document$2$1.registerLazyResult(LazyResult$2$1);var MapGenerator2$1=mapGenerator$1,stringify$1$1=stringify_1$1,warnOnce2$1=warnOnce$2$1,parse$1$1=parse_1$1,Result$1$1=result$1,NoWorkResult$1$1=class{constructor(processor2,css,opts){css=css.toString();this.stringified=!1;this._processor=processor2;this._css=css;this._opts=opts;this._map=void 0;let root2,str=stringify$1$1;this.result=new Result$1$1(this._processor,root2,this._opts);this.result.css=css;let self2=this;Object.defineProperty(this.result,"root",{get(){return self2.root}});let map=new MapGenerator2$1(str,root2,this._opts,css);if(map.isMap()){let[generatedCSS,generatedMap]=map.generate();generatedCSS&&(this.result.css=generatedCSS);generatedMap&&(this.result.map=generatedMap)}else map.clearAnnotation(),this.result.css=map.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(onRejected){return this.async().catch(onRejected)}finally(onFinally){return this.async().then(onFinally,onFinally)}sync(){if(this.error)throw this.error;return this.result}then(onFulfilled,onRejected){return!0&&("from"in this._opts||warnOnce2$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(onFulfilled,onRejected)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let root2,parser2=parse$1$1;try{root2=parser2(this._css,this._opts)}catch(error){this.error=error}if(this.error)throw this.error;else return this._root=root2,root2}get[Symbol.toStringTag](){return"NoWorkResult"}},noWorkResult$1=NoWorkResult$1$1;NoWorkResult$1$1.default=NoWorkResult$1$1;var NoWorkResult2$1=noWorkResult$1,LazyResult$1$1=lazyResult$1,Document$1$1=document$1$1,Root$2$1=root$1,Processor$1$1=class{constructor(plugins=[]){this.version="8.4.38";this.plugins=this.normalize(plugins)}normalize(plugins){let normalized=[];for(let i2 of plugins)if(i2.postcss===!0?i2=i2():i2.postcss&&(i2=i2.postcss),typeof i2=="object"&&Array.isArray(i2.plugins))normalized=normalized.concat(i2.plugins);else if(typeof i2=="object"&&i2.postcssPlugin)normalized.push(i2);else if(typeof i2=="function")normalized.push(i2);else if(typeof i2=="object"&&(i2.parse||i2.stringify)){if(1)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.");}else throw new Error(i2+" is not a PostCSS plugin");return normalized}process(css,opts={}){return this.plugins.length||opts.parser||opts.stringifier||opts.syntax?new LazyResult$1$1(this,css,opts):new NoWorkResult2$1(this,css,opts)}use(plugin22){return this.plugins=this.plugins.concat(this.normalize([plugin22])),this}},processor$1=Processor$1$1;Processor$1$1.default=Processor$1$1;Root$2$1.registerProcessor(Processor$1$1);Document$1$1.registerProcessor(Processor$1$1);var Declaration$1$1=declaration$1,PreviousMap2$1=previousMap$1,Comment$1$1=comment$1,AtRule$1$1=atRule$1,Input$1$1=input$1,Root$1$1=root$1,Rule$1$1=rule$1;fromJSON_1$1=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var CssSyntaxError2$1=cssSyntaxError$1,Declaration2$1=declaration$1,LazyResult2$1=lazyResult$1,Container2$1=container$1,Processor2$1=processor$1,stringify$5=stringify_1$1,fromJSON$2=fromJSON_1$1,Document22=document$1$1,Warning2$1=warning$1,Comment2$1=comment$1,AtRule2$1=atRule$1,Result2$1=result$1,Input2$1=input$1,parse$5=parse_1$1,list$3=list_1$1,Rule2$1=rule$1,Root2$1=root$1,Node2$1=node$1;postcss$3.plugin=function(name,initializer){function creator(...args){console&&console.warn&&!warningPrinted&&(warningPrinted=!0,console.warn(name+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(name+": é‡Œé¢ postcss.plugin è¢«å¼ƒç”¨. è¿ç§»æŒ‡å—:\nhttps://www.w3ctech.com/topic/2226"));let transformer=initializer(...args);return transformer.postcssPlugin=name,transformer.postcssVersion=(new Processor2$1).version,transformer}let warningPrinted=!1;let cache;return Object.defineProperty(creator,"postcss",{get(){return cache||(cache=creator()),cache}}),creator.process=function(css,processOpts,pluginOpts){return postcss$3([creator(pluginOpts)]).process(css,processOpts)},creator};postcss$3.stringify=stringify$5;postcss$3.parse=parse$5;postcss$3.fromJSON=fromJSON$2;postcss$3.list=list$3;postcss$3.comment=defaults=>new Comment2$1(defaults);postcss$3.atRule=defaults=>new AtRule2$1(defaults);postcss$3.decl=defaults=>new Declaration2$1(defaults);postcss$3.rule=defaults=>new Rule2$1(defaults);postcss$3.root=defaults=>new Root2$1(defaults);postcss$3.document=defaults=>new Document22(defaults);postcss$3.CssSyntaxError=CssSyntaxError2$1;postcss$3.Declaration=Declaration2$1;postcss$3.Container=Container2$1;postcss$3.Processor=Processor2$1;postcss$3.Document=Document22;postcss$3.Comment=Comment2$1;postcss$3.Warning=Warning2$1;postcss$3.AtRule=AtRule2$1;postcss$3.Result=Result2$1;postcss$3.Input=Input2$1;postcss$3.Rule=Rule2$1;postcss$3.Root=Root2$1;postcss$3.Node=Node2$1;LazyResult2$1.registerPostcss(postcss$3);postcss_1$1=postcss$3;postcss$3.default=postcss$3;postcss$1$1=getDefaultExportFromCjs$1(postcss_1$1);postcss$1$1.stringify;postcss$1$1.fromJSON;postcss$1$1.plugin;postcss$1$1.parse;postcss$1$1.list;postcss$1$1.document;postcss$1$1.comment;postcss$1$1.atRule;postcss$1$1.rule;postcss$1$1.decl;postcss$1$1.root;postcss$1$1.CssSyntaxError;postcss$1$1.Declaration;postcss$1$1.Container;postcss$1$1.Processor;postcss$1$1.Document;postcss$1$1.Comment;postcss$1$1.Warning;postcss$1$1.AtRule;postcss$1$1.Result;postcss$1$1.Input;postcss$1$1.Rule;postcss$1$1.Root;postcss$1$1.Node;var __defProp2=Object.defineProperty,__defNormalProp2=(obj,key,value)=>key in obj?__defProp2(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField2=(obj,key,value)=>__defNormalProp2(obj,typeof key!="symbol"?key+"":key,value);var picocolors_browser={exports:{}},x=String,create=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create();picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports,__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,"default":{}},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1),pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class CssSyntaxError2 extends Error{constructor(message,line,column,source,file,plugin22){super(message);this.name="CssSyntaxError";this.reason=message;file&&(this.file=file);source&&(this.source=source);plugin22&&(this.plugin=plugin22);typeof line!="undefined"&&typeof column!="undefined"&&(typeof line=="number"?(this.line=line,this.column=column):(this.line=line.line,this.column=line.column,this.endLine=column.line,this.endColumn=column.column));this.setMessage();Error.captureStackTrace&&Error.captureStackTrace(this,CssSyntaxError2)}setMessage(){this.message=this.plugin?this.plugin+": ":"";this.message+=this.file?this.file:"<css input>";typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column);this.message+=": "+this.reason}showSourceCode(color){if(!this.source)return"";let css=this.source;color==null&&(color=pico.isColorSupported);terminalHighlight$1&&color&&(css=terminalHighlight$1(css));let lines=css.split(/\r?\n/),start=Math.max(this.line-3,0),end=Math.min(this.line+2,lines.length),maxWidth=String(end).length,mark,aside;if(color){let{bold,gray,red}=pico.createColors(!0);mark=text=>bold(red(text));aside=text=>gray(text)}else mark=aside=str=>str;return lines.slice(start,end).map((line,index2)=>{let number=start+1+index2,gutter=" "+(" "+number).slice(-maxWidth)+" | ";if(number===this.line){let spacing=aside(gutter.replace(/\d/g," "))+line.slice(0,this.column-1).replace(/[^\t]/g," ");return mark(">")+aside(gutter)+line+"\n "+spacing+mark("^")}return" "+aside(gutter)+line}).join("\n")}toString(){let code=this.showSourceCode();return code&&(code="\n\n"+code+"\n"),this.name+": "+this.message+code}},cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;symbols={};symbols.isClean=Symbol("isClean");symbols.my=Symbol("my");DEFAULT_RAW={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};Stringifier$2=(class{constructor(builder){this.builder=builder}atrule(node2,semicolon){let name="@"+node2.name,params=node2.params?this.rawValue(node2,"params"):"";if(typeof node2.raws.afterName!="undefined"?name+=node2.raws.afterName:params&&(name+=" "),node2.nodes)this.block(node2,name+params);else{let end=(node2.raws.between||"")+(semicolon?";":"");this.builder(name+params+end,node2)}}beforeAfter(node2,detect){let value;value=node2.type==="decl"?this.raw(node2,null,"beforeDecl"):node2.type==="comment"?this.raw(node2,null,"beforeComment"):detect==="before"?this.raw(node2,null,"beforeRule"):this.raw(node2,null,"beforeClose");let buf=node2.parent,depth=0;while(buf&&buf.type!=="root")depth+=1,buf=buf.parent;if(value.includes("\n")){let indent=this.raw(node2,null,"indent");if(indent.length)for(let step=0;step<depth;step++)value+=indent}return value}block(node2,start){let between=this.raw(node2,"between","beforeOpen");this.builder(start+between+"{",node2,"start");let after;node2.nodes&&node2.nodes.length?(this.body(node2),after=this.raw(node2,"after")):after=this.raw(node2,"after","emptyBody");after&&this.builder(after);this.builder("}",node2,"end")}body(node2){let last=node2.nodes.length-1;while(last>0){if(node2.nodes[last].type!=="comment")break;last-=1}let semicolon=this.raw(node2,"semicolon");for(let i2=0;i2<node2.nodes.length;i2++){let child=node2.nodes[i2],before=this.raw(child,"before");before&&this.builder(before);this.stringify(child,last!==i2||semicolon)}}comment(node2){let left=this.raw(node2,"left","commentLeft"),right=this.raw(node2,"right","commentRight");this.builder("/*"+left+node2.text+right+"*/",node2)}decl(node2,semicolon){let between=this.raw(node2,"between","colon"),string=node2.prop+between+this.rawValue(node2,"value");node2.important&&(string+=node2.raws.important||" !important");semicolon&&(string+=";");this.builder(string,node2)}document(node2){this.body(node2)}raw(node2,own,detect){let value;if(detect||(detect=own),own&&(value=node2.raws[own],typeof value!="undefined"))return value;let parent=node2.parent;if(detect==="before"&&(!parent||parent.type==="root"&&parent.first===node2||parent&&parent.type==="document"))return"";if(!parent)return DEFAULT_RAW[detect];let root2=node2.root();if(root2.rawCache||(root2.rawCache={}),typeof root2.rawCache[detect]!="undefined")return root2.rawCache[detect];if(detect==="before"||detect==="after")return this.beforeAfter(node2,detect);else{let method="raw"+capitalize(detect);this[method]?value=this[method](root2,node2):root2.walk(i2=>(value=i2.raws[own],typeof value!="undefined"?!1:void 0))}return typeof value=="undefined"&&(value=DEFAULT_RAW[detect]),root2.rawCache[detect]=value,value}rawBeforeClose(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length>0&&typeof i2.raws.after!="undefined")return value=i2.raws.after,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/\S/g,"")),value}rawBeforeComment(root2,node2){let value;return root2.walkComments(i2=>{if(typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),typeof value=="undefined"?value=this.raw(node2,null,"beforeDecl"):value&&(value=value.replace(/\S/g,"")),value}rawBeforeDecl(root2,node2){let value;return root2.walkDecls(i2=>{if(typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),typeof value=="undefined"?value=this.raw(node2,null,"beforeRule"):value&&(value=value.replace(/\S/g,"")),value}rawBeforeOpen(root2){let value;return root2.walk(i2=>{if(i2.type!=="decl"&&(value=i2.raws.between,typeof value!="undefined"))return!1}),value}rawBeforeRule(root2){let value;return root2.walk(i2=>{if(i2.nodes&&(i2.parent!==root2||root2.first!==i2)&&typeof i2.raws.before!="undefined")return value=i2.raws.before,value.includes("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/\S/g,"")),value}rawColon(root2){let value;return root2.walkDecls(i2=>{if(typeof i2.raws.between!="undefined")return value=i2.raws.between.replace(/[^\s:]/g,""),!1}),value}rawEmptyBody(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length===0&&(value=i2.raws.after,typeof value!="undefined"))return!1}),value}rawIndent(root2){if(root2.raws.indent)return root2.raws.indent;let value;return root2.walk(i2=>{let p=i2.parent;if(p&&p!==root2&&p.parent&&p.parent===root2&&typeof i2.raws.before!="undefined"){let parts=i2.raws.before.split("\n");return value=parts[parts.length-1],value=value.replace(/\S/g,""),!1}}),value}rawSemicolon(root2){let value;return root2.walk(i2=>{if(i2.nodes&&i2.nodes.length&&i2.last.type==="decl"&&(value=i2.raws.semicolon,typeof value!="undefined"))return!1}),value}rawValue(node2,prop){let value=node2[prop],raw=node2.raws[prop];return raw&&raw.value===value?raw.raw:value}root(node2){this.body(node2);node2.raws.after&&this.builder(node2.raws.after)}rule(node2){this.block(node2,this.rawValue(node2,"selector"));node2.raws.ownSemicolon&&this.builder(node2.raws.ownSemicolon,node2,"end")}stringify(node2,semicolon){if(!this[node2.type])throw new Error("Unknown AST node type "+node2.type+". Maybe you need to change PostCSS stringifier.");this[node2.type](node2,semicolon)}});stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;Stringifier$1=stringifier;stringify_1=stringify$4;stringify$4.default=stringify$4;var{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier22=stringifier,stringify$3=stringify_1;Node$4=(class{constructor(defaults={}){this.raws={};this[isClean$2]=!1;this[my$2]=!0;for(let name in defaults)if(name==="nodes"){this.nodes=[];for(let node2 of defaults[name])typeof node2.clone=="function"?this.append(node2.clone()):this.append(node2)}else this[name]=defaults[name]}addToError(error){if(error.postcssNode=this,error.stack&&this.source&&/\n\s{4}at /.test(error.stack)){let s2=this.source;error.stack=error.stack.replace(/\n\s{4}at /,`$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`)}return error}after(add){return this.parent.insertAfter(this,add),this}assign(overrides={}){for(let name in overrides)this[name]=overrides[name];return this}before(add){return this.parent.insertBefore(this,add),this}cleanRaws(keepBetween){delete this.raws.before;delete this.raws.after;keepBetween||delete this.raws.between}clone(overrides={}){let cloned=cloneNode(this);for(let name in overrides)cloned[name]=overrides[name];return cloned}cloneAfter(overrides={}){let cloned=this.clone(overrides);return this.parent.insertAfter(this,cloned),cloned}cloneBefore(overrides={}){let cloned=this.clone(overrides);return this.parent.insertBefore(this,cloned),cloned}error(message,opts={}){if(this.source){let{end,start}=this.rangeBy(opts);return this.source.input.error(message,{column:start.column,line:start.line},{column:end.column,line:end.line},opts)}return new CssSyntaxError$2(message)}getProxyProcessor(){return{get(node2,prop){return prop==="proxyOf"?node2:prop==="root"?()=>node2.root().toProxy():node2[prop]},set(node2,prop,value){return node2[prop]===value?!0:(node2[prop]=value,(prop==="prop"||prop==="value"||prop==="name"||prop==="params"||prop==="important"||prop==="text")&&node2.markDirty(),!0)}}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let next=this;while(next=next.parent)next[isClean$2]=!1}}next(){if(!this.parent)return void 0;let index2=this.parent.index(this);return this.parent.nodes[index2+1]}positionBy(opts,stringRepresentation){let pos=this.source.start;if(opts.index)pos=this.positionInside(opts.index,stringRepresentation);else if(opts.word){stringRepresentation=this.toString();let index2=stringRepresentation.indexOf(opts.word);index2!==-1&&(pos=this.positionInside(index2,stringRepresentation))}return pos}positionInside(index2,stringRepresentation){let string=stringRepresentation||this.toString(),column=this.source.start.column,line=this.source.start.line;for(let i2=0;i2<index2;i2++)string[i2]==="\n"?(column=1,line+=1):column+=1;return{column,line}}prev(){if(!this.parent)return void 0;let index2=this.parent.index(this);return this.parent.nodes[index2-1]}rangeBy(opts){let start={column:this.source.start.column,line:this.source.start.line},end=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:start.column+1,line:start.line};if(opts.word){let stringRepresentation=this.toString(),index2=stringRepresentation.indexOf(opts.word);index2!==-1&&(start=this.positionInside(index2,stringRepresentation),end=this.positionInside(index2+opts.word.length,stringRepresentation))}else opts.start?start={column:opts.start.column,line:opts.start.line}:opts.index&&(start=this.positionInside(opts.index)),opts.end?end={column:opts.end.column,line:opts.end.line}:typeof opts.endIndex=="number"?end=this.positionInside(opts.endIndex):opts.index&&(end=this.positionInside(opts.index+1));return(end.line<start.line||end.line===start.line&&end.column<=start.column)&&(end={column:start.column+1,line:start.line}),{end,start}}raw(prop,defaultType){let str=new Stringifier22;return str.raw(this,prop,defaultType)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...nodes){if(this.parent){let bookmark=this,foundSelf=!1;for(let node2 of nodes)node2===this?foundSelf=!0:foundSelf?(this.parent.insertAfter(bookmark,node2),bookmark=node2):this.parent.insertBefore(bookmark,node2);foundSelf||this.remove()}return this}root(){let result2=this;while(result2.parent&&result2.parent.type!=="document")result2=result2.parent;return result2}toJSON(_,inputs){let fixed={},emitInputs=inputs==null;inputs=inputs||new Map;let inputsNextIndex=0;for(let name in this)if(Object.prototype.hasOwnProperty.call(this,name)&&name!=="parent"&&name!=="proxyCache"){let value=this[name];if(Array.isArray(value))fixed[name]=value.map(i2=>typeof i2=="object"&&i2.toJSON?i2.toJSON(null,inputs):i2);else if(typeof value=="object"&&value.toJSON)fixed[name]=value.toJSON(null,inputs);else if(name==="source"){let inputId=inputs.get(value.input);inputId==null&&(inputId=inputsNextIndex,inputs.set(value.input,inputsNextIndex),inputsNextIndex++);fixed[name]={end:value.end,inputId,start:value.start}}else fixed[name]=value}return emitInputs&&(fixed.inputs=[...inputs.keys()].map(input2=>input2.toJSON())),fixed}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(stringifier2=stringify$3){stringifier2.stringify&&(stringifier2=stringifier2.stringify);let result2="";return stringifier2(this,i2=>{result2+=i2}),result2}warn(result2,text,opts){let data={node:this};for(let i2 in opts)data[i2]=opts[i2];return result2.warn(text,data)}get proxyOf(){return this}});node=Node$4;Node$4.default=Node$4;var Node$3=node,Declaration$4=class extends Node$3{constructor(defaults){defaults&&typeof defaults.value!="undefined"&&typeof defaults.value!="string"&&(defaults={...defaults,value:String(defaults.value)});super(defaults);this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},declaration=Declaration$4;Declaration$4.default=Declaration$4;var urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(alphabet,defaultSize=21)=>(size=defaultSize)=>{let id="",i2=size;while(i2--)id+=alphabet[Math.random()*alphabet.length|0];return id},nanoid$1=(size=21)=>{let id="",i2=size;while(i2--)id+=urlAlphabet[Math.random()*64|0];return id},nonSecure={nanoid:nanoid$1,customAlphabet},{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync,readFileSync}=require$$2,{dirname:dirname$1,join}=require$$2;PreviousMap$2=(class{constructor(css,opts){if(opts.map!==!1){this.loadAnnotation(css);this.inline=this.startWith(this.annotation,"data:");let prev=opts.map?opts.map.prev:void 0,text=this.loadMap(opts.from,prev);!this.mapFile&&opts.from&&(this.mapFile=opts.from);this.mapFile&&(this.root=dirname$1(this.mapFile));text&&(this.text=text)}}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(text){if(/^data:application\/json;charset=utf-?8,/.test(text)||/^data:application\/json,/.test(text))return decodeURIComponent(text.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(text)||/^data:application\/json;base64,/.test(text))return fromBase64(text.substr(RegExp.lastMatch.length));let encoding=text.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+encoding);}getAnnotationURL(sourceMapString){return sourceMapString.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(map){return typeof map!="object"?!1:typeof map.mappings=="string"||typeof map._mappings=="string"||Array.isArray(map.sections)}loadAnnotation(css){let comments=css.match(/\/\*\s*# sourceMappingURL=/gm);if(comments){let start=css.lastIndexOf(comments.pop()),end=css.indexOf("*/",start);start>-1&&end>-1&&(this.annotation=this.getAnnotationURL(css.substring(start,end)))}}loadFile(path){return this.root=dirname$1(path),existsSync(path)?(this.mapFile=path,readFileSync(path,"utf-8").toString().trim()):void 0}loadMap(file,prev){if(prev===!1)return!1;if(prev){if(typeof prev=="string")return prev;if(typeof prev=="function"){let prevPath=prev(file);if(prevPath){let map=this.loadFile(prevPath);if(!map)throw new Error("Unable to load previous source map: "+prevPath.toString());return map}}else{if(prev instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(prev).toString();if(prev instanceof SourceMapGenerator$2)return prev.toString();if(this.isMap(prev))return JSON.stringify(prev);throw new Error("Unsupported previous source map format: "+prev.toString());}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let map=this.annotation;return file&&(map=join(dirname$1(file),map)),this.loadFile(map)}}}startWith(string,start){return string?string.substr(0,start.length)===start:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}});previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;var{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute,resolve:resolve$1}=require$$2,{nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=Boolean(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=Boolean(resolve$1&&isAbsolute),Input$4=class{constructor(css,opts={}){if(css===null||typeof css=="undefined"||typeof css=="object"&&!css.toString)throw new Error(`PostCSS received ${css} instead of CSS string`);if(this.css=css.toString(),this.css[0]==="ï»¿"||this.css[0]==="ï¿¾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,opts.from&&(this.file=!pathAvailable$1||/^\w+:\/\//.test(opts.from)||isAbsolute(opts.from)?opts.from:resolve$1(opts.from)),pathAvailable$1&&sourceMapAvailable$1){let map=new PreviousMap$1(this.css,opts);if(map.text){this.map=map;let file=map.consumer().file;!this.file&&file&&(this.file=this.mapResolve(file))}}this.file||(this.id="<input css "+nanoid(6)+">");this.map&&(this.map.file=this.from)}error(message,line,column,opts={}){let result2,endLine,endColumn;if(line&&typeof line=="object"){let start=line,end=column;if(typeof start.offset=="number"){let pos=this.fromOffset(start.offset);line=pos.line;column=pos.col}else line=start.line,column=start.column;if(typeof end.offset=="number"){let pos=this.fromOffset(end.offset);endLine=pos.line;endColumn=pos.col}else endLine=end.line,endColumn=end.column}else if(!column){let pos=this.fromOffset(line);line=pos.line;column=pos.col}let origin=this.origin(line,column,endLine,endColumn);return result2=origin?new CssSyntaxError$1(message,origin.endLine===void 0?origin.line:{column:origin.column,line:origin.line},origin.endLine===void 0?origin.column:{column:origin.endColumn,line:origin.endLine},origin.source,origin.file,opts.plugin):new CssSyntaxError$1(message,endLine===void 0?line:{column,line},endLine===void 0?column:{column:endColumn,line:endLine},this.css,this.file,opts.plugin),result2.input={column,endColumn,endLine,line,source:this.css},this.file&&(pathToFileURL$1&&(result2.input.url=pathToFileURL$1(this.file).toString()),result2.input.file=this.file),result2}fromOffset(offset){let lastLine,lineToIndex;if(this[fromOffsetCache])lineToIndex=this[fromOffsetCache];else{let lines=this.css.split("\n");lineToIndex=new Array(lines.length);let prevIndex=0;for(let i2=0,l2=lines.length;i2<l2;i2++)lineToIndex[i2]=prevIndex,prevIndex+=lines[i2].length+1;this[fromOffsetCache]=lineToIndex}lastLine=lineToIndex[lineToIndex.length-1];let min=0;if(offset>=lastLine)min=lineToIndex.length-1;else{let max=lineToIndex.length-2,mid;while(min<max)if(mid=min+(max-min>>1),offset<lineToIndex[mid])max=mid-1;else if(offset>=lineToIndex[mid+1])min=mid+1;else{min=mid;break}}return{col:offset-lineToIndex[min]+1,line:min+1}}mapResolve(file){return/^\w+:\/\//.test(file)?file:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",file)}origin(line,column,endLine,endColumn){if(!this.map)return!1;let consumer=this.map.consumer(),from=consumer.originalPositionFor({column,line});if(!from.source)return!1;let to;typeof endLine=="number"&&(to=consumer.originalPositionFor({column:endColumn,line:endLine}));let fromUrl;fromUrl=isAbsolute(from.source)?pathToFileURL$1(from.source):new URL(from.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let result2={column:from.column,endColumn:to&&to.column,endLine:to&&to.line,line:from.line,url:fromUrl.toString()};if(fromUrl.protocol==="file:")if(fileURLToPath)result2.file=fileURLToPath(fromUrl);else throw new Error(`file: protocol is not available in this PostCSS build`);let source=consumer.sourceContentFor(from.source);return source&&(result2.source=source),result2}toJSON(){let json={};for(let name of["hasBOM","css","file","id"])this[name]!=null&&(json[name]=this[name]);return this.map&&(json.map={...this.map},json.map.consumerCache&&(json.map.consumerCache=void 0)),json}get from(){return this.file||this.id}},input=Input$4;Input$4.default=Input$4;terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);var{SourceMapConsumer,SourceMapGenerator}=require$$2,{dirname,relative,resolve,sep}=require$$2,{pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=Boolean(SourceMapConsumer&&SourceMapGenerator),pathAvailable=Boolean(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(stringify2,root2,opts,cssString){this.stringify=stringify2;this.mapOpts=opts.map||{};this.root=root2;this.opts=opts;this.css=cssString;this.originalCSS=cssString;this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute;this.memoizedFileURLs=new Map;this.memoizedPaths=new Map;this.memoizedURLs=new Map}addAnnotation(){let content;content=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let eol="\n";this.css.includes("\r\n")&&(eol="\r\n");this.css+=eol+"/*# sourceMappingURL="+content+" */"}applyPrevMaps(){for(let prev of this.previous()){let from=this.toUrl(this.path(prev.file)),root2=prev.root||dirname(prev.file),map;this.mapOpts.sourcesContent===!1?(map=new SourceMapConsumer(prev.text),map.sourcesContent&&(map.sourcesContent=null)):map=prev.consumer();this.map.applySourceMap(map,from,this.toUrl(this.path(root2)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let node2;for(let i2=this.root.nodes.length-1;i2>=0;i2--)(node2=this.root.nodes[i2],node2.type==="comment")&&node2.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(i2)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();else{let result2="";return this.stringify(this.root,i2=>{result2+=i2}),[result2]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let prev=this.previous()[0].consumer();prev.file=this.outputFile();this.map=SourceMapGenerator.fromSourceMap(prev,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="";this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0});let line=1,column=1,noSource="<no source>",mapping={generated:{column:0,line:0},original:{column:0,line:0},source:""},lines,last;this.stringify(this.root,(str,node2,type)=>{if(this.css+=str,node2&&type!=="end"&&(mapping.generated.line=line,mapping.generated.column=column-1,node2.source&&node2.source.start?(mapping.source=this.sourcePath(node2),mapping.original.line=node2.source.start.line,mapping.original.column=node2.source.start.column-1,this.map.addMapping(mapping)):(mapping.source=noSource,mapping.original.line=1,mapping.original.column=0,this.map.addMapping(mapping))),lines=str.match(/\n/g),lines?(line+=lines.length,last=str.lastIndexOf("\n"),column=str.length-last):column+=str.length,node2&&type!=="start"){let p=node2.parent||{raws:{}},childless=node2.type==="decl"||node2.type==="atrule"&&!node2.nodes;(!childless||node2!==p.last||p.raws.semicolon)&&(node2.source&&node2.source.end?(mapping.source=this.sourcePath(node2),mapping.original.line=node2.source.end.line,mapping.original.column=node2.source.end.column-1,mapping.generated.line=line,mapping.generated.column=column-2,this.map.addMapping(mapping)):(mapping.source=noSource,mapping.original.line=1,mapping.original.column=0,mapping.generated.line=line,mapping.generated.column=column-1,this.map.addMapping(mapping)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(i2=>i2.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let annotation=this.mapOpts.annotation;return typeof annotation!="undefined"&&annotation!==!0?!1:this.previous().length?this.previous().some(i2=>i2.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(i2=>i2.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(file){if(this.mapOpts.absolute||file.charCodeAt(0)===60||/^\w+:\/\//.test(file))return file;let cached=this.memoizedPaths.get(file);if(cached)return cached;let from=this.opts.to?dirname(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(from=dirname(resolve(from,this.mapOpts.annotation)));let path=relative(from,file);return this.memoizedPaths.set(file,path),path}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(node2=>{if(node2.source&&node2.source.input.map){let map=node2.source.input.map;this.previousMaps.includes(map)||this.previousMaps.push(map)}});else{let input2=new Input$3(this.originalCSS,this.opts);input2.map&&this.previousMaps.push(input2.map)}return this.previousMaps}setSourcesContent(){let already={};if(this.root)this.root.walk(node2=>{if(node2.source){let from=node2.source.input.from;if(from&&!already[from]){already[from]=!0;let fromUrl=this.usesFileUrls?this.toFileUrl(from):this.toUrl(this.path(from));this.map.setSourceContent(fromUrl,node2.source.input.css)}}});else if(this.css){let from=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(from,this.css)}}sourcePath(node2){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(node2.source.input.from):this.toUrl(this.path(node2.source.input.from))}toBase64(str){return Buffer?Buffer.from(str).toString("base64"):window.btoa(unescape(encodeURIComponent(str)))}toFileUrl(path){let cached=this.memoizedFileURLs.get(path);if(cached)return cached;if(pathToFileURL){let fileURL=pathToFileURL(path).toString();return this.memoizedFileURLs.set(path,fileURL),fileURL}throw new Error("`map.absolute` option is not available in this PostCSS build");}toUrl(path){let cached=this.memoizedURLs.get(path);if(cached)return cached;sep==="\\"&&(path=path.replace(/\\/g,"/"));let url=encodeURI(path).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(path,url),url}},mapGenerator=MapGenerator$2,Node$2=node,Comment$4=class extends Node$2{constructor(defaults){super(defaults);this.type="comment"}},comment=Comment$4;Comment$4.default=Comment$4;var{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$1=node,parse$4,Rule$4,AtRule$4,Root$6;Container$7=(class Container2 extends Node$1{append(...children){for(let child of children){let nodes=this.normalize(child,this.last);for(let node2 of nodes)this.proxyOf.nodes.push(node2)}return this.markDirty(),this}cleanRaws(keepBetween){if(super.cleanRaws(keepBetween),this.nodes)for(let node2 of this.nodes)node2.cleanRaws(keepBetween)}each(callback){if(!this.proxyOf.nodes)return void 0;let iterator=this.getIterator(),index2,result2;while(this.indexes[iterator]<this.proxyOf.nodes.length){if(index2=this.indexes[iterator],result2=callback(this.proxyOf.nodes[index2],index2),result2===!1)break;this.indexes[iterator]+=1}return delete this.indexes[iterator],result2}every(condition){return this.nodes.every(condition)}getIterator(){this.lastEach||(this.lastEach=0);this.indexes||(this.indexes={});this.lastEach+=1;let iterator=this.lastEach;return this.indexes[iterator]=0,iterator}getProxyProcessor(){return{get(node2,prop){return prop==="proxyOf"?node2:node2[prop]?prop==="each"||typeof prop=="string"&&prop.startsWith("walk")?(...args)=>node2[prop](...args.map(i2=>typeof i2=="function"?(child,index2)=>i2(child.toProxy(),index2):i2)):prop==="every"||prop==="some"?cb=>node2[prop]((child,...other)=>cb(child.toProxy(),...other)):prop==="root"?()=>node2.root().toProxy():prop==="nodes"?node2.nodes.map(i2=>i2.toProxy()):prop==="first"||prop==="last"?node2[prop].toProxy():node2[prop]:node2[prop]},set(node2,prop,value){return node2[prop]===value?!0:(node2[prop]=value,(prop==="name"||prop==="params"||prop==="selector")&&node2.markDirty(),!0)}}}index(child){return typeof child=="number"?child:(child.proxyOf&&(child=child.proxyOf),this.proxyOf.nodes.indexOf(child))}insertAfter(exist,add){let existIndex=this.index(exist),nodes=this.normalize(add,this.proxyOf.nodes[existIndex]).reverse();existIndex=this.index(exist);for(let node2 of nodes)this.proxyOf.nodes.splice(existIndex+1,0,node2);let index2;for(let id in this.indexes)index2=this.indexes[id],existIndex<index2&&(this.indexes[id]=index2+nodes.length);return this.markDirty(),this}insertBefore(exist,add){let existIndex=this.index(exist),type=existIndex===0?"prepend":!1,nodes=this.normalize(add,this.proxyOf.nodes[existIndex],type).reverse();existIndex=this.index(exist);for(let node2 of nodes)this.proxyOf.nodes.splice(existIndex,0,node2);let index2;for(let id in this.indexes)index2=this.indexes[id],existIndex<=index2&&(this.indexes[id]=index2+nodes.length);return this.markDirty(),this}normalize(nodes,sample){if(typeof nodes=="string")nodes=cleanSource(parse$4(nodes).nodes);else if(typeof nodes=="undefined")nodes=[];else if(Array.isArray(nodes)){nodes=nodes.slice(0);for(let i2 of nodes)i2.parent&&i2.parent.removeChild(i2,"ignore")}else if(nodes.type==="root"&&this.type!=="document"){nodes=nodes.nodes.slice(0);for(let i2 of nodes)i2.parent&&i2.parent.removeChild(i2,"ignore")}else if(nodes.type)nodes=[nodes];else if(nodes.prop){if(typeof nodes.value=="undefined")throw new Error("Value field is missed in node creation");else typeof nodes.value!="string"&&(nodes.value=String(nodes.value));nodes=[new Declaration$3(nodes)]}else if(nodes.selector)nodes=[new Rule$4(nodes)];else if(nodes.name)nodes=[new AtRule$4(nodes)];else if(nodes.text)nodes=[new Comment$3(nodes)];else throw new Error("Unknown node type in node creation");return nodes.map(i2=>(i2[my$1]||Container2.rebuild(i2),i2=i2.proxyOf,i2.parent&&i2.parent.removeChild(i2),i2[isClean$1]&&markDirtyUp(i2),typeof i2.raws.before=="undefined"&&sample&&typeof sample.raws.before!="undefined"&&(i2.raws.before=sample.raws.before.replace(/\S/g,"")),i2.parent=this.proxyOf,i2))}prepend(...children){children=children.reverse();for(let child of children){let nodes=this.normalize(child,this.first,"prepend").reverse();for(let node2 of nodes)this.proxyOf.nodes.unshift(node2);for(let id in this.indexes)this.indexes[id]=this.indexes[id]+nodes.length}return this.markDirty(),this}push(child){return child.parent=this,this.proxyOf.nodes.push(child),this}removeAll(){for(let node2 of this.proxyOf.nodes)node2.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(child){child=this.index(child);this.proxyOf.nodes[child].parent=void 0;this.proxyOf.nodes.splice(child,1);let index2;for(let id in this.indexes)index2=this.indexes[id],index2>=child&&(this.indexes[id]=index2-1);return this.markDirty(),this}replaceValues(pattern,opts,callback){return callback||(callback=opts,opts={}),this.walkDecls(decl=>{(!opts.props||opts.props.includes(decl.prop))&&(!opts.fast||decl.value.includes(opts.fast))&&(decl.value=decl.value.replace(pattern,callback))}),this.markDirty(),this}some(condition){return this.nodes.some(condition)}walk(callback){return this.each((child,i2)=>{let result2;try{result2=callback(child,i2)}catch(e2){throw child.addToError(e2);}return result2!==!1&&child.walk&&(result2=child.walk(callback)),result2})}walkAtRules(name,callback){return callback?name instanceof RegExp?this.walk((child,i2)=>{if(child.type==="atrule"&&name.test(child.name))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="atrule"&&child.name===name)return callback(child,i2)}):(callback=name,this.walk((child,i2)=>{if(child.type==="atrule")return callback(child,i2)}))}walkComments(callback){return this.walk((child,i2)=>{if(child.type==="comment")return callback(child,i2)})}walkDecls(prop,callback){return callback?prop instanceof RegExp?this.walk((child,i2)=>{if(child.type==="decl"&&prop.test(child.prop))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="decl"&&child.prop===prop)return callback(child,i2)}):(callback=prop,this.walk((child,i2)=>{if(child.type==="decl")return callback(child,i2)}))}walkRules(selector,callback){return callback?selector instanceof RegExp?this.walk((child,i2)=>{if(child.type==="rule"&&selector.test(child.selector))return callback(child,i2)}):this.walk((child,i2)=>{if(child.type==="rule"&&child.selector===selector)return callback(child,i2)}):(callback=selector,this.walk((child,i2)=>{if(child.type==="rule")return callback(child,i2)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}});Container$7.registerParse=dependant=>{parse$4=dependant};Container$7.registerRule=dependant=>{Rule$4=dependant};Container$7.registerAtRule=dependant=>{AtRule$4=dependant};Container$7.registerRoot=dependant=>{Root$6=dependant};container=Container$7;Container$7.default=Container$7;Container$7.rebuild=node2=>{node2.type==="atrule"?Object.setPrototypeOf(node2,AtRule$4.prototype):node2.type==="rule"?Object.setPrototypeOf(node2,Rule$4.prototype):node2.type==="decl"?Object.setPrototypeOf(node2,Declaration$3.prototype):node2.type==="comment"?Object.setPrototypeOf(node2,Comment$3.prototype):node2.type==="root"&&Object.setPrototypeOf(node2,Root$6.prototype),node2[my$1]=!0,node2.nodes&&node2.nodes.forEach(child=>{Container$7.rebuild(child)})};Container$6=container;Document$3=(class extends Container$6{constructor(defaults){super({type:"document",...defaults});this.nodes||(this.nodes=[])}toResult(opts={}){let lazy=new LazyResult$4(new Processor$3,this,opts);return lazy.stringify()}});Document$3.registerLazyResult=dependant=>{LazyResult$4=dependant};Document$3.registerProcessor=dependant=>{Processor$3=dependant};document$1=Document$3;Document$3.default=Document$3;var printed={},warnOnce$2=function(message){printed[message]||(printed[message]=!0,typeof console!="undefined"&&console.warn&&console.warn(message))},Warning$2=class{constructor(text,opts={}){if(this.type="warning",this.text=text,opts.node&&opts.node.source){let range=opts.node.rangeBy(opts);this.line=range.start.line;this.column=range.start.column;this.endLine=range.end.line;this.endColumn=range.end.column}for(let opt in opts)this[opt]=opts[opt]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},warning=Warning$2;Warning$2.default=Warning$2;var Warning$1=warning,Result$3=class{constructor(processor2,root2,opts){this.processor=processor2;this.messages=[];this.root=root2;this.opts=opts;this.css=void 0;this.map=void 0}toString(){return this.css}warn(text,opts={}){opts.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(opts.plugin=this.lastPlugin.postcssPlugin);let warning2=new Warning$1(text,opts);return this.messages.push(warning2),warning2}warnings(){return this.messages.filter(i2=>i2.type==="warning")}get content(){return this.css}},result=Result$3;Result$3.default=Result$3;var SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE="\n".charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="\t".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i,tokenize=function(input2,options={}){function position(){return pos}function unclosed(what){throw input2.error("Unclosed "+what,pos);}function endOfFile(){return returned.length===0&&pos>=length}function nextToken(opts){if(returned.length)return returned.pop();if(!(pos>=length)){let ignoreUnclosed=opts?opts.ignoreUnclosed:!1;code=css.charCodeAt(pos);switch(code){case NEWLINE:case SPACE:case TAB:case CR:case FEED:next=pos;do next+=1,code=css.charCodeAt(next);while(code===SPACE||code===NEWLINE||code===TAB||code===CR||code===FEED);currentToken=["space",css.slice(pos,next)];pos=next-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let controlChar=String.fromCharCode(code);currentToken=[controlChar,controlChar,pos];break}case OPEN_PARENTHESES:if(prev=buffer.length?buffer.pop()[1]:"",n2=css.charCodeAt(pos+1),prev==="url"&&n2!==SINGLE_QUOTE&&n2!==DOUBLE_QUOTE&&n2!==SPACE&&n2!==NEWLINE&&n2!==TAB&&n2!==FEED&&n2!==CR){next=pos;do{if(escaped=!1,next=css.indexOf(")",next+1),next===-1)if(ignore||ignoreUnclosed){next=pos;break}else unclosed("bracket");for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH;)escapePos-=1,escaped=!escaped}while(escaped);currentToken=["brackets",css.slice(pos,next+1),pos,next];pos=next}else next=css.indexOf(")",pos+1),content=css.slice(pos,next+1),next===-1||RE_BAD_BRACKET.test(content)?currentToken=["(","(",pos]:(currentToken=["brackets",content,pos,next],pos=next);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:quote=code===SINGLE_QUOTE?"'":'"';next=pos;do{if(escaped=!1,next=css.indexOf(quote,next+1),next===-1)if(ignore||ignoreUnclosed){next=pos+1;break}else unclosed("string");for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH;)escapePos-=1,escaped=!escaped}while(escaped);currentToken=["string",css.slice(pos,next+1),pos,next];pos=next;break;case AT:RE_AT_END.lastIndex=pos+1;RE_AT_END.test(css);next=RE_AT_END.lastIndex===0?css.length-1:RE_AT_END.lastIndex-2;currentToken=["at-word",css.slice(pos,next+1),pos,next];pos=next;break;case BACKSLASH:for(next=pos,escape=!0;css.charCodeAt(next+1)===BACKSLASH;)next+=1,escape=!escape;if(code=css.charCodeAt(next+1),escape&&code!==SLASH&&code!==SPACE&&code!==NEWLINE&&code!==TAB&&code!==CR&&code!==FEED&&(next+=1,RE_HEX_ESCAPE.test(css.charAt(next)))){while(RE_HEX_ESCAPE.test(css.charAt(next+1)))next+=1;css.charCodeAt(next+1)===SPACE&&(next+=1)}currentToken=["word",css.slice(pos,next+1),pos,next];pos=next;break;default:code===SLASH&&css.charCodeAt(pos+1)===ASTERISK?(next=css.indexOf("*/",pos+2)+1,next===0&&(ignore||ignoreUnclosed?next=css.length:unclosed("comment")),currentToken=["comment",css.slice(pos,next+1),pos,next],pos=next):(RE_WORD_END.lastIndex=pos+1,RE_WORD_END.test(css),next=RE_WORD_END.lastIndex===0?css.length-1:RE_WORD_END.lastIndex-2,currentToken=["word",css.slice(pos,next+1),pos,next],buffer.push(currentToken),pos=next)}return pos++,currentToken}}function back(token){returned.push(token)}let css=input2.css.valueOf(),ignore=options.ignoreErrors,code,next,quote,content,escape,escaped,escapePos,prev,n2,currentToken,length=css.length,pos=0,buffer=[],returned=[];return{back,endOfFile,nextToken,position}},Container$5=container,AtRule$3=class extends Container$5{constructor(defaults){super(defaults);this.type="atrule"}append(...children){return this.proxyOf.nodes||(this.nodes=[]),super.append(...children)}prepend(...children){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...children)}},atRule=AtRule$3;AtRule$3.default=AtRule$3;Container$5.registerAtRule(AtRule$3);Container$4=container;Root$5=(class extends Container$4{constructor(defaults){super(defaults);this.type="root";this.nodes||(this.nodes=[])}normalize(child,sample,type){let nodes=super.normalize(child);if(sample)if(type==="prepend")this.nodes.length>1?sample.raws.before=this.nodes[1].raws.before:delete sample.raws.before;else if(this.first!==sample)for(let node2 of nodes)node2.raws.before=sample.raws.before;return nodes}removeChild(child,ignore){let index2=this.index(child);return!ignore&&index2===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[index2].raws.before),super.removeChild(child)}toResult(opts={}){let lazy=new LazyResult$3(new Processor$2,this,opts);return lazy.stringify()}});Root$5.registerLazyResult=dependant=>{LazyResult$3=dependant};Root$5.registerProcessor=dependant=>{Processor$2=dependant};root=Root$5;Root$5.default=Root$5;Container$4.registerRoot(Root$5);list$2={comma(string){return list$2.split(string,[","],!0)},space(string){return list$2.split(string,[" ","\n","\t"])},split(string,separators,last){let array=[],current="",split=!1,func=0,inQuote=!1,prevQuote="",escape=!1;for(let letter of string)escape?escape=!1:letter==="\\"?escape=!0:inQuote?letter===prevQuote&&(inQuote=!1):letter==='"'||letter==="'"?(inQuote=!0,prevQuote=letter):letter==="("?func+=1:letter===")"?func>0&&(func-=1):func===0&&separators.includes(letter)&&(split=!0),split?(current!==""&&array.push(current.trim()),current="",split=!1):current+=letter;return(last||current!=="")&&array.push(current.trim()),array}};list_1=list$2;list$2.default=list$2;var Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(defaults){super(defaults);this.type="rule";this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(values){let match=this.selector?this.selector.match(/,\s*/):null,sep2=match?match[0]:","+this.raw("between","beforeOpen");this.selector=values.join(sep2)}},rule=Rule$3;Rule$3.default=Rule$3;Container$3.registerRule(Rule$3);var Declaration$2=declaration,tokenizer22=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule,SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};var Parser$1=class{constructor(input2){this.input=input2;this.root=new Root$4;this.current=this.root;this.spaces="";this.semicolon=!1;this.createTokenizer();this.root.source={input:input2,start:{column:1,line:1,offset:0}}}atrule(token){let node2=new AtRule$2;node2.name=token[1].slice(1);node2.name===""&&this.unnamedAtrule(node2,token);this.init(node2,token[2]);let type,prev,shift,last=!1,open=!1,params=[],brackets=[];while(!this.tokenizer.endOfFile()){if(token=this.tokenizer.nextToken(),type=token[0],type==="("||type==="["?brackets.push(type==="("?")":"]"):type==="{"&&brackets.length>0?brackets.push("}"):type===brackets[brackets.length-1]&&brackets.pop(),brackets.length===0)if(type===";"){node2.source.end=this.getPosition(token[2]);node2.source.end.offset++;this.semicolon=!0;break}else if(type==="{"){open=!0;break}else if(type==="}"){if(params.length>0){for(shift=params.length-1,prev=params[shift];prev&&prev[0]==="space";)prev=params[--shift];prev&&(node2.source.end=this.getPosition(prev[3]||prev[2]),node2.source.end.offset++)}this.end(token);break}else params.push(token);else params.push(token);if(this.tokenizer.endOfFile()){last=!0;break}}node2.raws.between=this.spacesAndCommentsFromEnd(params);params.length?(node2.raws.afterName=this.spacesAndCommentsFromStart(params),this.raw(node2,"params",params),last&&(token=params[params.length-1],node2.source.end=this.getPosition(token[3]||token[2]),node2.source.end.offset++,this.spaces=node2.raws.between,node2.raws.between="")):(node2.raws.afterName="",node2.params="");open&&(node2.nodes=[],this.current=node2)}checkMissedSemicolon(tokens){let colon=this.colon(tokens);if(colon!==!1){let founded=0,token;for(let j=colon-1;j>=0;j--)if(token=tokens[j],token[0]!=="space"&&(founded+=1,founded===2))break;throw this.input.error("Missed semicolon",token[0]==="word"?token[3]+1:token[2]);}}colon(tokens){let brackets=0,token,type,prev;for(let[i2,element]of tokens.entries()){if(token=element,type=token[0],type==="("&&(brackets+=1),type===")"&&(brackets-=1),brackets===0&&type===":")if(prev)if(prev[0]==="word"&&prev[1]==="progid")continue;else return i2;else this.doubleColon(token);prev=token}return!1}comment(token){let node2=new Comment$2;this.init(node2,token[2]);node2.source.end=this.getPosition(token[3]||token[2]);node2.source.end.offset++;let text=token[1].slice(2,-2);if(/^\s*$/.test(text))node2.text="",node2.raws.left=text,node2.raws.right="";else{let match=text.match(/^(\s*)([^]*\S)(\s*)$/);node2.text=match[2];node2.raws.left=match[1];node2.raws.right=match[3]}}createTokenizer(){this.tokenizer=tokenizer22(this.input)}decl(tokens,customProperty){let node2=new Declaration$2;this.init(node2,tokens[0][2]);let last=tokens[tokens.length-1];for(last[0]===";"&&(this.semicolon=!0,tokens.pop()),node2.source.end=this.getPosition(last[3]||last[2]||findLastWithPosition(tokens)),node2.source.end.offset++;tokens[0][0]!=="word";)tokens.length===1&&this.unknownWord(tokens),node2.raws.before+=tokens.shift()[1];for(node2.source.start=this.getPosition(tokens[0][2]),node2.prop="";tokens.length;){let type=tokens[0][0];if(type===":"||type==="space"||type==="comment")break;node2.prop+=tokens.shift()[1]}node2.raws.between="";let token;while(tokens.length)if(token=tokens.shift(),token[0]===":"){node2.raws.between+=token[1];break}else token[0]==="word"&&/\w/.test(token[1])&&this.unknownWord([token]),node2.raws.between+=token[1];(node2.prop[0]==="_"||node2.prop[0]==="*")&&(node2.raws.before+=node2.prop[0],node2.prop=node2.prop.slice(1));let firstSpaces=[],next;while(tokens.length){if(next=tokens[0][0],next!=="space"&&next!=="comment")break;firstSpaces.push(tokens.shift())}this.precheckMissedSemicolon(tokens);for(let i2=tokens.length-1;i2>=0;i2--){if(token=tokens[i2],token[1].toLowerCase()==="!important"){node2.important=!0;let string=this.stringFrom(tokens,i2);string=this.spacesFromEnd(tokens)+string;string!==" !important"&&(node2.raws.important=string);break}else if(token[1].toLowerCase()==="important"){let cache=tokens.slice(0),str="";for(let j=i2;j>0;j--){let type=cache[j][0];if(str.trim().indexOf("!")===0&&type!=="space")break;str=cache.pop()[1]+str}str.trim().indexOf("!")===0&&(node2.important=!0,node2.raws.important=str,tokens=cache)}if(token[0]!=="space"&&token[0]!=="comment")break}let hasWord=tokens.some(i2=>i2[0]!=="space"&&i2[0]!=="comment");hasWord&&(node2.raws.between+=firstSpaces.map(i2=>i2[1]).join(""),firstSpaces=[]);this.raw(node2,"value",firstSpaces.concat(tokens),customProperty);node2.value.includes(":")&&!customProperty&&this.checkMissedSemicolon(tokens)}doubleColon(token){throw this.input.error("Double colon",{offset:token[2]},{offset:token[2]+token[1].length});}emptyRule(token){let node2=new Rule$2;this.init(node2,token[2]);node2.selector="";node2.raws.between="";this.current=node2}end(token){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon);this.semicolon=!1;this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.spaces="";this.current.parent?(this.current.source.end=this.getPosition(token[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(token)}endFile(){this.current.parent&&this.unclosedBlock();this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon);this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(token){if(this.spaces+=token[1],this.current.nodes){let prev=this.current.nodes[this.current.nodes.length-1];prev&&prev.type==="rule"&&!prev.raws.ownSemicolon&&(prev.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(offset){let pos=this.input.fromOffset(offset);return{column:pos.col,line:pos.line,offset}}init(node2,offset){this.current.push(node2);node2.source={input:this.input,start:this.getPosition(offset)};node2.raws.before=this.spaces;this.spaces="";node2.type!=="comment"&&(this.semicolon=!1)}other(start){let end=!1,type=null,colon=!1,bracket=null,brackets=[],customProperty=start[1].startsWith("--"),tokens=[],token=start;while(token){if(type=token[0],tokens.push(token),type==="("||type==="[")bracket||(bracket=token),brackets.push(type==="("?")":"]");else if(customProperty&&colon&&type==="{")bracket||(bracket=token),brackets.push("}");else if(brackets.length===0)if(type===";"){if(colon){this.decl(tokens,customProperty);return}break}else{if(type==="{"){this.rule(tokens);return}if(type==="}"){this.tokenizer.back(tokens.pop());end=!0;break}else type===":"&&(colon=!0)}else type===brackets[brackets.length-1]&&(brackets.pop(),brackets.length===0&&(bracket=null));token=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(end=!0),brackets.length>0&&this.unclosedBracket(bracket),end&&colon){if(!customProperty)while(tokens.length){if(token=tokens[tokens.length-1][0],token!=="space"&&token!=="comment")break;this.tokenizer.back(tokens.pop())}this.decl(tokens,customProperty)}else this.unknownWord(tokens)}parse(){let token;while(!this.tokenizer.endOfFile()){token=this.tokenizer.nextToken();switch(token[0]){case"space":this.spaces+=token[1];break;case";":this.freeSemicolon(token);break;case"}":this.end(token);break;case"comment":this.comment(token);break;case"at-word":this.atrule(token);break;case"{":this.emptyRule(token);break;default:this.other(token)}}this.endFile()}precheckMissedSemicolon(){}raw(node2,prop,tokens,customProperty){let token,type,length=tokens.length,value="",clean=!0,next,prev;for(let i2=0;i2<length;i2+=1)token=tokens[i2],type=token[0],type!=="space"||i2!==length-1||customProperty?type==="comment"?(prev=tokens[i2-1]?tokens[i2-1][0]:"empty",next=tokens[i2+1]?tokens[i2+1][0]:"empty",SAFE_COMMENT_NEIGHBOR[prev]||SAFE_COMMENT_NEIGHBOR[next]?clean=!1:value.slice(-1)===","?clean=!1:value+=token[1]):value+=token[1]:clean=!1;if(!clean){let raw=tokens.reduce((all,i2)=>all+i2[1],"");node2.raws[prop]={raw,value}}node2[prop]=value}rule(tokens){tokens.pop();let node2=new Rule$2;this.init(node2,tokens[0][2]);node2.raws.between=this.spacesAndCommentsFromEnd(tokens);this.raw(node2,"selector",tokens);this.current=node2}spacesAndCommentsFromEnd(tokens){let lastTokenType,spaces="";while(tokens.length){if(lastTokenType=tokens[tokens.length-1][0],lastTokenType!=="space"&&lastTokenType!=="comment")break;spaces=tokens.pop()[1]+spaces}return spaces}spacesAndCommentsFromStart(tokens){let next,spaces="";while(tokens.length){if(next=tokens[0][0],next!=="space"&&next!=="comment")break;spaces+=tokens.shift()[1]}return spaces}spacesFromEnd(tokens){let lastTokenType,spaces="";while(tokens.length){if(lastTokenType=tokens[tokens.length-1][0],lastTokenType!=="space")break;spaces=tokens.pop()[1]+spaces}return spaces}stringFrom(tokens,from){let result2="";for(let i2=from;i2<tokens.length;i2++)result2+=tokens[i2][1];return tokens.splice(from,tokens.length-from),result2}unclosedBlock(){let pos=this.current.source.start;throw this.input.error("Unclosed block",pos.line,pos.column);}unclosedBracket(bracket){throw this.input.error("Unclosed bracket",{offset:bracket[2]},{offset:bracket[2]+1});}unexpectedClose(token){throw this.input.error("Unexpected }",{offset:token[2]},{offset:token[2]+1});}unknownWord(tokens){throw this.input.error("Unknown word",{offset:tokens[0][2]},{offset:tokens[0][2]+tokens[0][1].length});}unnamedAtrule(node2,token){throw this.input.error("At-rule without name",{offset:token[2]},{offset:token[2]+token[1].length});}},parser=Parser$1,Container$2=container,Parser22=parser,Input$2=input;parse_1=parse$3;parse$3.default=parse$3;Container$2.registerParse(parse$3);var{isClean,my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,warnOnce$1=warnOnce$2,Result$2=result,parse$2=parse_1,Root$3=root,TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;postcss$2={};LazyResult$2=(class LazyResult2{constructor(processor2,css,opts){this.stringified=!1;this.processed=!1;let root2;if(typeof css=="object"&&css!==null&&(css.type==="root"||css.type==="document"))root2=cleanMarks(css);else if(css instanceof LazyResult2||css instanceof Result$2)root2=cleanMarks(css.root),css.map&&(typeof opts.map=="undefined"&&(opts.map={}),opts.map.inline||(opts.map.inline=!1),opts.map.prev=css.map);else{let parser2=parse$2;opts.syntax&&(parser2=opts.syntax.parse);opts.parser&&(parser2=opts.parser);parser2.parse&&(parser2=parser2.parse);try{root2=parser2(css,opts)}catch(error){this.processed=!0;this.error=error}root2&&!root2[my]&&Container$1.rebuild(root2)}this.result=new Result$2(processor2,root2,opts);this.helpers={...postcss$2,postcss:postcss$2,result:this.result};this.plugins=this.processor.plugins.map(plugin22=>typeof plugin22=="object"&&plugin22.prepare?{...plugin22,...plugin22.prepare(this.result)}:plugin22)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(onRejected){return this.async().catch(onRejected)}finally(onFinally){return this.async().then(onFinally,onFinally)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins");}handleError(error,node2){let plugin22=this.result.lastPlugin;try{if(node2&&node2.addToError(error),this.error=error,error.name!=="CssSyntaxError"||error.plugin){if(plugin22.postcssVersion&&!0){let pluginName=plugin22.postcssPlugin,pluginVer=plugin22.postcssVersion,runtimeVer=this.result.processor.version,a2=pluginVer.split("."),b=runtimeVer.split(".");(a2[0]!==b[0]||parseInt(a2[1])>parseInt(b[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+runtimeVer+", but "+pluginName+" uses "+pluginVer+". Perhaps this is the source of the error below.")}}else error.plugin=plugin22.postcssPlugin,error.setMessage()}catch(err){console&&console.error&&console.error(err)}return error}prepareVisitors(){this.listeners={};let add=(plugin22,type,cb)=>{this.listeners[type]||(this.listeners[type]=[]),this.listeners[type].push([plugin22,cb])};for(let plugin22 of this.plugins)if(typeof plugin22=="object")for(let event in plugin22){if(!PLUGIN_PROPS[event]&&/^[A-Z]/.test(event))throw new Error(`Unknown event ${event} in ${plugin22.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[event])if(typeof plugin22[event]=="object")for(let filter in plugin22[event])filter==="*"?add(plugin22,event,plugin22[event][filter]):add(plugin22,event+"-"+filter.toLowerCase(),plugin22[event][filter]);else typeof plugin22[event]=="function"&&add(plugin22,event,plugin22[event])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let i2=0;i2<this.plugins.length;i2++){let plugin22=this.plugins[i2],promise=this.runOnRoot(plugin22);if(isPromise(promise))try{await promise}catch(error){throw this.handleError(error);}}if(this.prepareVisitors(),this.hasListener){let root2=this.result.root;while(!root2[isClean]){root2[isClean]=!0;let stack=[toStack(root2)];while(stack.length>0){let promise=this.visitTick(stack);if(isPromise(promise))try{await promise}catch(e2){let node2=stack[stack.length-1].node;throw this.handleError(e2,node2);}}}if(this.listeners.OnceExit)for(let[plugin22,visitor]of this.listeners.OnceExit){this.result.lastPlugin=plugin22;try{if(root2.type==="document"){let roots=root2.nodes.map(subRoot=>visitor(subRoot,this.helpers));await Promise.all(roots)}else await visitor(root2,this.helpers)}catch(e2){throw this.handleError(e2);}}}return this.processed=!0,this.stringify()}runOnRoot(plugin22){this.result.lastPlugin=plugin22;try{if(typeof plugin22=="object"&&plugin22.Once){if(this.result.root.type==="document"){let roots=this.result.root.nodes.map(root2=>plugin22.Once(root2,this.helpers));return isPromise(roots[0])?Promise.all(roots):roots}return plugin22.Once(this.result.root,this.helpers)}if(typeof plugin22=="function")return plugin22(this.result.root,this.result)}catch(error){throw this.handleError(error);}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0;this.sync();let opts=this.result.opts,str=stringify$2;opts.syntax&&(str=opts.syntax.stringify);opts.stringifier&&(str=opts.stringifier);str.stringify&&(str=str.stringify);let map=new MapGenerator$1(str,this.result.root,this.result.opts),data=map.generate();return this.result.css=data[0],this.result.map=data[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let plugin22 of this.plugins){let promise=this.runOnRoot(plugin22);if(isPromise(promise))throw this.getAsyncError();}if(this.prepareVisitors(),this.hasListener){let root2=this.result.root;while(!root2[isClean])root2[isClean]=!0,this.walkSync(root2);if(this.listeners.OnceExit)if(root2.type==="document")for(let subRoot of root2.nodes)this.visitSync(this.listeners.OnceExit,subRoot);else this.visitSync(this.listeners.OnceExit,root2)}return this.result}then(onFulfilled,onRejected){return!0&&("from"in this.opts||warnOnce$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(onFulfilled,onRejected)}toString(){return this.css}visitSync(visitors,node2){for(let[plugin22,visitor]of visitors){this.result.lastPlugin=plugin22;let promise;try{promise=visitor(node2,this.helpers)}catch(e2){throw this.handleError(e2,node2.proxyOf);}if(node2.type!=="root"&&node2.type!=="document"&&!node2.parent)return!0;if(isPromise(promise))throw this.getAsyncError();}}visitTick(stack){let visit2=stack[stack.length-1],{node:node2,visitors}=visit2;if(node2.type!=="root"&&node2.type!=="document"&&!node2.parent){stack.pop();return}if(visitors.length>0&&visit2.visitorIndex<visitors.length){let[plugin22,visitor]=visitors[visit2.visitorIndex];visit2.visitorIndex+=1;visit2.visitorIndex===visitors.length&&(visit2.visitors=[],visit2.visitorIndex=0);this.result.lastPlugin=plugin22;try{return visitor(node2.toProxy(),this.helpers)}catch(e2){throw this.handleError(e2,node2);}}if(visit2.iterator!==0){let iterator=visit2.iterator,child;while(child=node2.nodes[node2.indexes[iterator]])if(node2.indexes[iterator]+=1,!child[isClean]){child[isClean]=!0;stack.push(toStack(child));return}visit2.iterator=0;delete node2.indexes[iterator]}let events=visit2.events;while(visit2.eventIndex<events.length){let event=events[visit2.eventIndex];if(visit2.eventIndex+=1,event===CHILDREN){node2.nodes&&node2.nodes.length&&(node2[isClean]=!0,visit2.iterator=node2.getIterator());return}if(this.listeners[event]){visit2.visitors=this.listeners[event];return}}stack.pop()}walkSync(node2){node2[isClean]=!0;let events=getEvents(node2);for(let event of events)if(event===CHILDREN)node2.nodes&&node2.each(child=>{child[isClean]||this.walkSync(child)});else{let visitors=this.listeners[event];if(visitors&&this.visitSync(visitors,node2.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}});LazyResult$2.registerPostcss=dependant=>{postcss$2=dependant};lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2;Root$3.registerLazyResult(LazyResult$2);Document$2.registerLazyResult(LazyResult$2);var MapGenerator22=mapGenerator,stringify$1=stringify_1,warnOnce22=warnOnce$2,parse$1=parse_1,Result$1=result,NoWorkResult$1=class{constructor(processor2,css,opts){css=css.toString();this.stringified=!1;this._processor=processor2;this._css=css;this._opts=opts;this._map=void 0;let root2,str=stringify$1;this.result=new Result$1(this._processor,root2,this._opts);this.result.css=css;let self2=this;Object.defineProperty(this.result,"root",{get(){return self2.root}});let map=new MapGenerator22(str,root2,this._opts,css);if(map.isMap()){let[generatedCSS,generatedMap]=map.generate();generatedCSS&&(this.result.css=generatedCSS);generatedMap&&(this.result.map=generatedMap)}else map.clearAnnotation(),this.result.css=map.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(onRejected){return this.async().catch(onRejected)}finally(onFinally){return this.async().then(onFinally,onFinally)}sync(){if(this.error)throw this.error;return this.result}then(onFulfilled,onRejected){return!0&&("from"in this._opts||warnOnce22("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(onFulfilled,onRejected)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let root2,parser2=parse$1;try{root2=parser2(this._css,this._opts)}catch(error){this.error=error}if(this.error)throw this.error;else return this._root=root2,root2}get[Symbol.toStringTag](){return"NoWorkResult"}},noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;var NoWorkResult22=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(plugins=[]){this.version="8.4.38";this.plugins=this.normalize(plugins)}normalize(plugins){let normalized=[];for(let i2 of plugins)if(i2.postcss===!0?i2=i2():i2.postcss&&(i2=i2.postcss),typeof i2=="object"&&Array.isArray(i2.plugins))normalized=normalized.concat(i2.plugins);else if(typeof i2=="object"&&i2.postcssPlugin)normalized.push(i2);else if(typeof i2=="function")normalized.push(i2);else if(typeof i2=="object"&&(i2.parse||i2.stringify)){if(1)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.");}else throw new Error(i2+" is not a PostCSS plugin");return normalized}process(css,opts={}){return this.plugins.length||opts.parser||opts.stringifier||opts.syntax?new LazyResult$1(this,css,opts):new NoWorkResult22(this,css,opts)}use(plugin22){return this.plugins=this.plugins.concat(this.normalize([plugin22])),this}},processor=Processor$1;Processor$1.default=Processor$1;Root$2.registerProcessor(Processor$1);Document$1.registerProcessor(Processor$1);var Declaration$1=declaration,PreviousMap22=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;var CssSyntaxError22=cssSyntaxError,Declaration22=declaration,LazyResult22=lazyResult,Container22=container,Processor22=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document222=document$1,Warning22=warning,Comment22=comment,AtRule22=atRule,Result22=result,Input22=input,parse=parse_1,list=list_1,Rule22=rule,Root22=root,Node22=node;postcss.plugin=function(name,initializer){function creator(...args){console&&console.warn&&!warningPrinted&&(warningPrinted=!0,console.warn(name+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(name+": é‡Œé¢ postcss.plugin è¢«å¼ƒç”¨. è¿ç§»æŒ‡å—:\nhttps://www.w3ctech.com/topic/2226"));let transformer=initializer(...args);return transformer.postcssPlugin=name,transformer.postcssVersion=(new Processor22).version,transformer}let warningPrinted=!1;let cache;return Object.defineProperty(creator,"postcss",{get(){return cache||(cache=creator()),cache}}),creator.process=function(css,processOpts,pluginOpts){return postcss([creator(pluginOpts)]).process(css,processOpts)},creator};postcss.stringify=stringify;postcss.parse=parse;postcss.fromJSON=fromJSON;postcss.list=list;postcss.comment=defaults=>new Comment22(defaults);postcss.atRule=defaults=>new AtRule22(defaults);postcss.decl=defaults=>new Declaration22(defaults);postcss.rule=defaults=>new Rule22(defaults);postcss.root=defaults=>new Root22(defaults);postcss.document=defaults=>new Document222(defaults);postcss.CssSyntaxError=CssSyntaxError22;postcss.Declaration=Declaration22;postcss.Container=Container22;postcss.Processor=Processor22;postcss.Document=Document222;postcss.Comment=Comment22;postcss.Warning=Warning22;postcss.AtRule=AtRule22;postcss.Result=Result22;postcss.Input=Input22;postcss.Rule=Rule22;postcss.Root=Root22;postcss.Node=Node22;LazyResult22.registerPostcss(postcss);postcss_1=postcss;postcss.default=postcss;postcss$1=getDefaultExportFromCjs(postcss_1);postcss$1.stringify;postcss$1.fromJSON;postcss$1.plugin;postcss$1.parse;postcss$1.list;postcss$1.document;postcss$1.comment;postcss$1.atRule;postcss$1.rule;postcss$1.decl;postcss$1.root;postcss$1.CssSyntaxError;postcss$1.Declaration;postcss$1.Container;postcss$1.Processor;postcss$1.Document;postcss$1.Comment;postcss$1.Warning;postcss$1.AtRule;postcss$1.Result;postcss$1.Input;postcss$1.Rule;postcss$1.Root;postcss$1.Node;var BaseRRNode=class _BaseRRNode{constructor(){__publicField2(this,"parentElement",null);__publicField2(this,"parentNode",null);__publicField2(this,"ownerDocument");__publicField2(this,"firstChild",null);__publicField2(this,"lastChild",null);__publicField2(this,"previousSibling",null);__publicField2(this,"nextSibling",null);__publicField2(this,"ELEMENT_NODE",1);__publicField2(this,"TEXT_NODE",3);__publicField2(this,"nodeType");__publicField2(this,"nodeName");__publicField2(this,"RRNodeType")}get childNodes(){const childNodes2=[];let childIterator=this.firstChild;while(childIterator)childNodes2.push(childIterator),childIterator=childIterator.nextSibling;return childNodes2}contains(node2){if(node2 instanceof _BaseRRNode){if(node2.ownerDocument!==this.ownerDocument)return!1;if(node2===this)return!0}else return!1;while(node2.parentNode){if(node2.parentNode===this)return!0;node2=node2.parentNode}return!1}appendChild(){throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`);}insertBefore(){throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`);}removeChild(){throw new Error(`RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`);}toString(){return"RRNode"}},testableAccessors={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype={},isAngularZonePresent=()=>!!globalThis.Zone;untaintedAccessorCache={};untaintedMethodCache={};index={childNodes,parentNode,parentElement,textContent,contains,getRootNode,host,styleSheets,shadowRoot,querySelector,querySelectorAll,mutationObserver:mutationObserverCtor};DEPARTED_MIRROR_ACCESS_WARNING="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";_mirror={map:{},getId(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get(target,prop,receiver){return prop==="map"&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(target,prop,receiver)}}));nowTimestamp=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(nowTimestamp=()=>(new Date).getTime());StyleSheetMirror=(class{constructor(){__publicField(this,"id",1);__publicField(this,"styleIDMap",new WeakMap);__publicField(this,"idStyleMap",new Map)}getId(stylesheet){var _a3;return(_a3=this.styleIDMap.get(stylesheet))!=null?_a3:-1}has(stylesheet){return this.styleIDMap.has(stylesheet)}add(stylesheet,id){if(this.has(stylesheet))return this.getId(stylesheet);let newId;return newId=id===void 0?this.id++:id,this.styleIDMap.set(stylesheet,newId),this.idStyleMap.set(newId,stylesheet),newId}getStyle(id){return this.idStyleMap.get(id)||null}reset(){this.styleIDMap=new WeakMap;this.idStyleMap=new Map;this.id=1}generateId(){return this.id++}});var EventType=(EventType22=>(EventType22[EventType22.DomContentLoaded=0]="DomContentLoaded",EventType22[EventType22.Load=1]="Load",EventType22[EventType22.FullSnapshot=2]="FullSnapshot",EventType22[EventType22.IncrementalSnapshot=3]="IncrementalSnapshot",EventType22[EventType22.Meta=4]="Meta",EventType22[EventType22.Custom=5]="Custom",EventType22[EventType22.Plugin=6]="Plugin",EventType22))(EventType||{}),IncrementalSource=(IncrementalSource2=>(IncrementalSource2[IncrementalSource2.Mutation=0]="Mutation",IncrementalSource2[IncrementalSource2.MouseMove=1]="MouseMove",IncrementalSource2[IncrementalSource2.MouseInteraction=2]="MouseInteraction",IncrementalSource2[IncrementalSource2.Scroll=3]="Scroll",IncrementalSource2[IncrementalSource2.ViewportResize=4]="ViewportResize",IncrementalSource2[IncrementalSource2.Input=5]="Input",IncrementalSource2[IncrementalSource2.TouchMove=6]="TouchMove",IncrementalSource2[IncrementalSource2.MediaInteraction=7]="MediaInteraction",IncrementalSource2[IncrementalSource2.StyleSheetRule=8]="StyleSheetRule",IncrementalSource2[IncrementalSource2.CanvasMutation=9]="CanvasMutation",IncrementalSource2[IncrementalSource2.Font=10]="Font",IncrementalSource2[IncrementalSource2.Log=11]="Log",IncrementalSource2[IncrementalSource2.Drag=12]="Drag",IncrementalSource2[IncrementalSource2.StyleDeclaration=13]="StyleDeclaration",IncrementalSource2[IncrementalSource2.Selection=14]="Selection",IncrementalSource2[IncrementalSource2.AdoptedStyleSheet=15]="AdoptedStyleSheet",IncrementalSource2[IncrementalSource2.CustomElement=16]="CustomElement",IncrementalSource2))(IncrementalSource||{}),MouseInteractions=(MouseInteractions2=>(MouseInteractions2[MouseInteractions2.MouseUp=0]="MouseUp",MouseInteractions2[MouseInteractions2.MouseDown=1]="MouseDown",MouseInteractions2[MouseInteractions2.Click=2]="Click",MouseInteractions2[MouseInteractions2.ContextMenu=3]="ContextMenu",MouseInteractions2[MouseInteractions2.DblClick=4]="DblClick",MouseInteractions2[MouseInteractions2.Focus=5]="Focus",MouseInteractions2[MouseInteractions2.Blur=6]="Blur",MouseInteractions2[MouseInteractions2.TouchStart=7]="TouchStart",MouseInteractions2[MouseInteractions2.TouchMove_Departed=8]="TouchMove_Departed",MouseInteractions2[MouseInteractions2.TouchEnd=9]="TouchEnd",MouseInteractions2[MouseInteractions2.TouchCancel=10]="TouchCancel",MouseInteractions2))(MouseInteractions||{}),PointerTypes=(PointerTypes2=>(PointerTypes2[PointerTypes2.Mouse=0]="Mouse",PointerTypes2[PointerTypes2.Pen=1]="Pen",PointerTypes2[PointerTypes2.Touch=2]="Touch",PointerTypes2))(PointerTypes||{}),CanvasContext=(CanvasContext2=>(CanvasContext2[CanvasContext2["2D"]=0]="2D",CanvasContext2[CanvasContext2.WebGL=1]="WebGL",CanvasContext2[CanvasContext2.WebGL2=2]="WebGL2",CanvasContext2))(CanvasContext||{}),MediaInteractions=(MediaInteractions2=>(MediaInteractions2[MediaInteractions2.Play=0]="Play",MediaInteractions2[MediaInteractions2.Pause=1]="Pause",MediaInteractions2[MediaInteractions2.Seeked=2]="Seeked",MediaInteractions2[MediaInteractions2.VolumeChange=3]="VolumeChange",MediaInteractions2[MediaInteractions2.RateChange=4]="RateChange",MediaInteractions2))(MediaInteractions||{}),NodeType=(NodeType2=>(NodeType2[NodeType2.Document=0]="Document",NodeType2[NodeType2.DocumentType=1]="DocumentType",NodeType2[NodeType2.Element=2]="Element",NodeType2[NodeType2.Text=3]="Text",NodeType2[NodeType2.CDATA=4]="CDATA",NodeType2[NodeType2.Comment=5]="Comment",NodeType2))(NodeType||{});var DoubleLinkedList=class{constructor(){__publicField(this,"length",0);__publicField(this,"head",null);__publicField(this,"tail",null)}get(position){if(position>=this.length)throw new Error("Position outside of list range");let current=this.head;for(let index2=0;index2<position;index2++)current=(current==null?void 0:current.next)||null;return current}addNode(n2){const node2={value:n2,previous:null,next:null};if(n2.__ln=node2,n2.previousSibling&&isNodeInLinkedList(n2.previousSibling)){const current=n2.previousSibling.__ln.next;node2.next=current;node2.previous=n2.previousSibling.__ln;n2.previousSibling.__ln.next=node2;current&&(current.previous=node2)}else if(n2.nextSibling&&isNodeInLinkedList(n2.nextSibling)&&n2.nextSibling.__ln.previous){const current=n2.nextSibling.__ln.previous;node2.previous=current;node2.next=n2.nextSibling.__ln;n2.nextSibling.__ln.previous=node2;current&&(current.next=node2)}else this.head&&(this.head.previous=node2),node2.next=this.head,this.head=node2;node2.next===null&&(this.tail=node2);this.length++}removeNode(n2){const current=n2.__ln;this.head&&(current.previous?(current.previous.next=current.next,current.next?current.next.previous=current.previous:this.tail=current.previous):(this.head=current.next,this.head?this.head.previous=null:this.tail=null),n2.__ln&&delete n2.__ln,this.length--)}},moveKey=(id,parentId)=>`${id}@${parentId}`,MutationBuffer=class{constructor(){__publicField(this,"frozen",!1);__publicField(this,"locked",!1);__publicField(this,"texts",[]);__publicField(this,"attributes",[]);__publicField(this,"attributeMap",new WeakMap);__publicField(this,"removes",[]);__publicField(this,"mapRemoves",[]);__publicField(this,"movedMap",{});__publicField(this,"addedSet",new Set);__publicField(this,"movedSet",new Set);__publicField(this,"droppedSet",new Set);__publicField(this,"removesSubTreeCache",new Set);__publicField(this,"mutationCb");__publicField(this,"blockClass");__publicField(this,"blockSelector");__publicField(this,"maskTextClass");__publicField(this,"maskTextSelector");__publicField(this,"inlineStylesheet");__publicField(this,"maskInputOptions");__publicField(this,"maskTextFn");__publicField(this,"maskInputFn");__publicField(this,"keepIframeSrcFn");__publicField(this,"recordCanvas");__publicField(this,"inlineImages");__publicField(this,"slimDOMOptions");__publicField(this,"dataURLOptions");__publicField(this,"doc");__publicField(this,"mirror");__publicField(this,"iframeManager");__publicField(this,"stylesheetManager");__publicField(this,"shadowDomManager");__publicField(this,"canvasManager");__publicField(this,"processedNodeManager");__publicField(this,"unattachedDoc");__publicField(this,"processMutations",mutations=>{mutations.forEach(this.processMutation),this.emit()});__publicField(this,"emit",()=>{if(!this.frozen&&!this.locked){const adds=[],addedIds=new Set,addList=new DoubleLinkedList,getNextId=n2=>{let ns=n2,nextId=IGNORED_NODE;while(nextId===IGNORED_NODE)ns=ns&&ns.nextSibling,nextId=ns&&this.mirror.getId(ns);return nextId},pushAdd=n2=>{const parent=index.parentNode(n2);if(parent&&inDom(n2)){let cssCaptured=!1;if(n2.nodeType===Node.TEXT_NODE){const parentTag=parent.tagName;if(parentTag==="TEXTAREA")return;parentTag==="STYLE"&&this.addedSet.has(parent)&&(cssCaptured=!0)}const parentId=isShadowRoot(parent)?this.mirror.getId(getShadowHost(n2)):this.mirror.getId(parent),nextId=getNextId(n2);if(parentId===-1||nextId===-1)return addList.addNode(n2);const sn=serializeNodeWithId(n2,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:currentN=>{isSerializedIframe(currentN,this.mirror)&&this.iframeManager.addIframe(currentN),isSerializedStylesheet(currentN,this.mirror)&&this.stylesheetManager.trackLinkElement(currentN),hasShadowRoot(n2)&&this.shadowDomManager.addShadowRoot(index.shadowRoot(n2),this.doc)},onIframeLoad:(iframe,childSn)=>{this.iframeManager.attachIframe(iframe,childSn),this.shadowDomManager.observeAttachShadow(iframe)},onStylesheetLoad:(link,childSn)=>{this.stylesheetManager.attachLinkElement(link,childSn)},cssCaptured});sn&&(adds.push({parentId,nextId,node:sn}),addedIds.add(sn.id))}};while(this.mapRemoves.length)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const n2 of this.movedSet)(!isParentRemoved(this.removesSubTreeCache,n2,this.mirror)||this.movedSet.has(index.parentNode(n2)))&&pushAdd(n2);for(const n2 of this.addedSet)isAncestorInSet(this.droppedSet,n2)||isParentRemoved(this.removesSubTreeCache,n2,this.mirror)?isAncestorInSet(this.movedSet,n2)?pushAdd(n2):this.droppedSet.add(n2):pushAdd(n2);let candidate=null;while(addList.length){let node2=null;if(candidate){const parentId=this.mirror.getId(index.parentNode(candidate.value)),nextId=getNextId(candidate.value);parentId!==-1&&nextId!==-1&&(node2=candidate)}if(!node2){let tailNode=addList.tail;while(tailNode){const _node=tailNode;if(tailNode=tailNode.previous,_node){const parentId=this.mirror.getId(index.parentNode(_node.value)),nextId=getNextId(_node.value);if(nextId===-1)continue;else if(parentId!==-1){node2=_node;break}else{const unhandledNode=_node.value,parent=index.parentNode(unhandledNode);if(parent&&parent.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const shadowHost=index.host(parent),parentId2=this.mirror.getId(shadowHost);if(parentId2!==-1){node2=_node;break}}}}}}if(!node2){while(addList.head)addList.removeNode(addList.head.value);break}candidate=node2.previous;addList.removeNode(node2.value);pushAdd(node2.value)}const payload={texts:this.texts.map(text=>{const n2=text.node,parent=index.parentNode(n2);return parent&&parent.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(parent),{id:this.mirror.getId(n2),value:text.value}}).filter(text=>!addedIds.has(text.id)).filter(text=>this.mirror.has(text.id)),attributes:this.attributes.map(attribute=>{const{attributes}=attribute;if(typeof attributes.style=="string"){const diffAsStr=JSON.stringify(attribute.styleDiff),unchangedAsStr=JSON.stringify(attribute._unchangedStyles);diffAsStr.length<attributes.style.length&&(diffAsStr+unchangedAsStr).split("var(").length===attributes.style.split("var(").length&&(attributes.style=attribute.styleDiff)}return{id:this.mirror.getId(attribute.node),attributes}}).filter(attribute=>!addedIds.has(attribute.id)).filter(attribute=>this.mirror.has(attribute.id)),removes:this.removes,adds};(payload.texts.length||payload.attributes.length||payload.removes.length||payload.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(payload))}});__publicField(this,"genTextAreaValueMutation",textarea=>{let item=this.attributeMap.get(textarea);item||(item={node:textarea,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(item),this.attributeMap.set(textarea,item));item.attributes.value=Array.from(index.childNodes(textarea),cn=>index.textContent(cn)||"").join("")});__publicField(this,"processMutation",m=>{if(!isIgnored(m.target,this.mirror,this.slimDOMOptions))switch(m.type){case"characterData":const value=index.textContent(m.target);isBlocked(m.target,this.blockClass,this.blockSelector,!1)||value===m.oldValue||this.texts.push({value:needMaskingText(m.target,this.maskTextClass,this.maskTextSelector,!0)&&value?this.maskTextFn?this.maskTextFn(value,closestElementOfNode(m.target)):value.replace(/[\S]/g,"*"):value,node:m.target});break;case"attributes":{const target=m.target;let attributeName=m.attributeName,value=m.target.getAttribute(attributeName);if(attributeName==="value"){const type=getInputType(target);value=maskInputValue({element:target,maskInputOptions:this.maskInputOptions,tagName:target.tagName,type,value,maskInputFn:this.maskInputFn})}if(isBlocked(m.target,this.blockClass,this.blockSelector,!1)||value===m.oldValue)return;let item=this.attributeMap.get(m.target);if(target.tagName==="IFRAME"&&attributeName==="src"&&!this.keepIframeSrcFn(value)){if(target.contentDocument)return;attributeName="rr_src"}if(item||(item={node:m.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(item),this.attributeMap.set(m.target,item)),attributeName==="type"&&target.tagName==="INPUT"&&(m.oldValue||"").toLowerCase()==="password"&&target.setAttribute("data-rr-is-password","true"),!ignoreAttribute(target.tagName,attributeName))if(item.attributes[attributeName]=transformAttribute(this.doc,toLowerCase(target.tagName),toLowerCase(attributeName),value),attributeName==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e2){this.unattachedDoc=this.doc}const old=this.unattachedDoc.createElement("span");m.oldValue&&old.setAttribute("style",m.oldValue);for(const pname of Array.from(target.style)){const newValue=target.style.getPropertyValue(pname),newPriority=target.style.getPropertyPriority(pname);newValue!==old.style.getPropertyValue(pname)||newPriority!==old.style.getPropertyPriority(pname)?item.styleDiff[pname]=newPriority===""?newValue:[newValue,newPriority]:item._unchangedStyles[pname]=[newValue,newPriority]}for(const pname of Array.from(old.style))target.style.getPropertyValue(pname)===""&&(item.styleDiff[pname]=!1)}else attributeName==="open"&&target.tagName==="DIALOG"&&(item.attributes.rr_open_mode=target.matches("dialog:modal")?"modal":"non-modal");break}case"childList":if(isBlocked(m.target,this.blockClass,this.blockSelector,!0))return;if(m.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(m.target);return}m.addedNodes.forEach(n2=>this.genAdds(n2,m.target));m.removedNodes.forEach(n2=>{const nodeId=this.mirror.getId(n2),parentId=isShadowRoot(m.target)?this.mirror.getId(index.host(m.target)):this.mirror.getId(m.target);isBlocked(m.target,this.blockClass,this.blockSelector,!1)||isIgnored(n2,this.mirror,this.slimDOMOptions)||!isSerialized(n2,this.mirror)||(this.addedSet.has(n2)?(deepDelete(this.addedSet,n2),this.droppedSet.add(n2)):this.addedSet.has(m.target)&&nodeId===-1||isAncestorRemoved(m.target,this.mirror)||(this.movedSet.has(n2)&&this.movedMap[moveKey(nodeId,parentId)]?deepDelete(this.movedSet,n2):(this.removes.push({parentId,id:nodeId,isShadow:isShadowRoot(m.target)&&isNativeShadowDom(m.target)?!0:void 0}),processRemoves(n2,this.removesSubTreeCache))),this.mapRemoves.push(n2))})}});__publicField(this,"genAdds",(n2,target)=>{if(!this.processedNodeManager.inOtherBuffer(n2,this)&&!this.addedSet.has(n2)&&!this.movedSet.has(n2)){if(this.mirror.hasNode(n2)){if(isIgnored(n2,this.mirror,this.slimDOMOptions))return;this.movedSet.add(n2);let targetId=null;target&&this.mirror.hasNode(target)&&(targetId=this.mirror.getId(target));targetId&&targetId!==-1&&(this.movedMap[moveKey(this.mirror.getId(n2),targetId)]=!0)}else this.addedSet.add(n2),this.droppedSet.delete(n2);isBlocked(n2,this.blockClass,this.blockSelector,!1)||(index.childNodes(n2).forEach(childN=>this.genAdds(childN)),hasShadowRoot(n2)&&index.childNodes(index.shadowRoot(n2)).forEach(childN=>{this.processedNodeManager.add(childN,this),this.genAdds(childN,n2)}))}})}init(options){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(key=>{this[key]=options[key]})}freeze(){this.frozen=!0;this.canvasManager.freeze()}unfreeze(){this.frozen=!1;this.canvasManager.unfreeze();this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0;this.canvasManager.lock()}unlock(){this.locked=!1;this.canvasManager.unlock();this.emit()}reset(){this.shadowDomManager.reset();this.canvasManager.reset()}};callbackWrapper=cb=>{if(!errorHandler)return cb;return(...rest)=>{try{return cb(...rest)}catch(error){if(errorHandler&&errorHandler(error)===!0)return;throw error;}}};mutationBuffers=[];INPUT_TAGS=["INPUT","TEXTAREA","SELECT"];lastInputValueMap=new WeakMap;var CrossOriginIframeMirror=class{constructor(generateIdFn){__publicField(this,"iframeIdToRemoteIdMap",new WeakMap);__publicField(this,"iframeRemoteIdToIdMap",new WeakMap);this.generateIdFn=generateIdFn}getId(iframe,remoteId,idToRemoteMap,remoteToIdMap){const idToRemoteIdMap=idToRemoteMap||this.getIdToRemoteIdMap(iframe),remoteIdToIdMap=remoteToIdMap||this.getRemoteIdToIdMap(iframe);let id=idToRemoteIdMap.get(remoteId);return id||(id=this.generateIdFn(),idToRemoteIdMap.set(remoteId,id),remoteIdToIdMap.set(id,remoteId)),id}getIds(iframe,remoteId){const idToRemoteIdMap=this.getIdToRemoteIdMap(iframe),remoteIdToIdMap=this.getRemoteIdToIdMap(iframe);return remoteId.map(id=>this.getId(iframe,id,idToRemoteIdMap,remoteIdToIdMap))}getRemoteId(iframe,id,map){const remoteIdToIdMap=map||this.getRemoteIdToIdMap(iframe);if(typeof id!="number")return id;const remoteId=remoteIdToIdMap.get(id);return remoteId?remoteId:-1}getRemoteIds(iframe,ids){const remoteIdToIdMap=this.getRemoteIdToIdMap(iframe);return ids.map(id=>this.getRemoteId(iframe,id,remoteIdToIdMap))}reset(iframe){if(!iframe){this.iframeIdToRemoteIdMap=new WeakMap;this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(iframe);this.iframeRemoteIdToIdMap.delete(iframe)}getIdToRemoteIdMap(iframe){let idToRemoteIdMap=this.iframeIdToRemoteIdMap.get(iframe);return idToRemoteIdMap||(idToRemoteIdMap=new Map,this.iframeIdToRemoteIdMap.set(iframe,idToRemoteIdMap)),idToRemoteIdMap}getRemoteIdToIdMap(iframe){let remoteIdToIdMap=this.iframeRemoteIdToIdMap.get(iframe);return remoteIdToIdMap||(remoteIdToIdMap=new Map,this.iframeRemoteIdToIdMap.set(iframe,remoteIdToIdMap)),remoteIdToIdMap}},IframeManager=class{constructor(options){__publicField(this,"iframes",new WeakMap);__publicField(this,"crossOriginIframeMap",new WeakMap);__publicField(this,"crossOriginIframeMirror",new CrossOriginIframeMirror(genId));__publicField(this,"crossOriginIframeStyleMirror");__publicField(this,"crossOriginIframeRootIdMap",new WeakMap);__publicField(this,"mirror");__publicField(this,"mutationCb");__publicField(this,"wrappedEmit");__publicField(this,"loadListener");__publicField(this,"stylesheetManager");__publicField(this,"recordCrossOriginIframes");this.mutationCb=options.mutationCb;this.wrappedEmit=options.wrappedEmit;this.stylesheetManager=options.stylesheetManager;this.recordCrossOriginIframes=options.recordCrossOriginIframes;this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));this.mirror=options.mirror;this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(iframeEl){this.iframes.set(iframeEl,!0);iframeEl.contentWindow&&this.crossOriginIframeMap.set(iframeEl.contentWindow,iframeEl)}addLoadListener(cb){this.loadListener=cb}attachIframe(iframeEl,childSn){var _a22,_b;this.mutationCb({adds:[{parentId:this.mirror.getId(iframeEl),nextId:null,node:childSn}],removes:[],texts:[],attributes:[],isAttachIframe:!0});this.recordCrossOriginIframes&&((_a22=iframeEl.contentWindow)==null?void 0:_a22.addEventListener("message",this.handleMessage.bind(this)));(_b=this.loadListener)==null?void 0:_b.call(this,iframeEl);iframeEl.contentDocument&&iframeEl.contentDocument.adoptedStyleSheets&&iframeEl.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets,this.mirror.getId(iframeEl.contentDocument))}handleMessage(message){const crossOriginMessageEvent=message;if(crossOriginMessageEvent.data.type==="rrweb"&&crossOriginMessageEvent.origin===crossOriginMessageEvent.data.origin){const iframeSourceWindow=message.source;if(iframeSourceWindow){const iframeEl=this.crossOriginIframeMap.get(message.source);if(iframeEl){const transformedEvent=this.transformCrossOriginEvent(iframeEl,crossOriginMessageEvent.data.event);transformedEvent&&this.wrappedEmit(transformedEvent,crossOriginMessageEvent.data.isCheckout)}}}}transformCrossOriginEvent(iframeEl,e2){var _a22;switch(e2.type){case EventType.FullSnapshot:this.crossOriginIframeMirror.reset(iframeEl);this.crossOriginIframeStyleMirror.reset(iframeEl);this.replaceIdOnNode(e2.data.node,iframeEl);const rootId=e2.data.node.id;return this.crossOriginIframeRootIdMap.set(iframeEl,rootId),this.patchRootIdOnNode(e2.data.node,rootId),{timestamp:e2.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(iframeEl),nextId:null,node:e2.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return e2;case EventType.Custom:return this.replaceIds(e2.data.payload,iframeEl,["id","parentId","previousId","nextId"]),e2;case EventType.IncrementalSnapshot:switch(e2.data.source){case IncrementalSource.Mutation:return e2.data.adds.forEach(n2=>{this.replaceIds(n2,iframeEl,["parentId","nextId","previousId"]);this.replaceIdOnNode(n2.node,iframeEl);const rootId=this.crossOriginIframeRootIdMap.get(iframeEl);rootId&&this.patchRootIdOnNode(n2.node,rootId)}),e2.data.removes.forEach(n2=>{this.replaceIds(n2,iframeEl,["parentId","id"])}),e2.data.attributes.forEach(n2=>{this.replaceIds(n2,iframeEl,["id"])}),e2.data.texts.forEach(n2=>{this.replaceIds(n2,iframeEl,["id"])}),e2;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return e2.data.positions.forEach(p=>{this.replaceIds(p,iframeEl,["id"])}),e2;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(e2.data,iframeEl,["id"]),e2;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(e2.data,iframeEl,["id"]),this.replaceStyleIds(e2.data,iframeEl,["styleId"]),e2;case IncrementalSource.Font:return e2;case IncrementalSource.Selection:return e2.data.ranges.forEach(range=>{this.replaceIds(range,iframeEl,["start","end"])}),e2;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(e2.data,iframeEl,["id"]),this.replaceStyleIds(e2.data,iframeEl,["styleIds"]),(_a22=e2.data.styles)==null?void 0:_a22.forEach(style=>{this.replaceStyleIds(style,iframeEl,["styleId"])}),e2}}return!1}replace(iframeMirror,obj,iframeEl,keys){for(const key of keys)(Array.isArray(obj[key])||typeof obj[key]=="number")&&(obj[key]=Array.isArray(obj[key])?iframeMirror.getIds(iframeEl,obj[key]):iframeMirror.getId(iframeEl,obj[key]));return obj}replaceIds(obj,iframeEl,keys){return this.replace(this.crossOriginIframeMirror,obj,iframeEl,keys)}replaceStyleIds(obj,iframeEl,keys){return this.replace(this.crossOriginIframeStyleMirror,obj,iframeEl,keys)}replaceIdOnNode(node2,iframeEl){this.replaceIds(node2,iframeEl,["id","rootId"]);"childNodes"in node2&&node2.childNodes.forEach(child=>{this.replaceIdOnNode(child,iframeEl)})}patchRootIdOnNode(node2,rootId){node2.type===NodeType.Document||node2.rootId||(node2.rootId=rootId);"childNodes"in node2&&node2.childNodes.forEach(child=>{this.patchRootIdOnNode(child,rootId)})}},ShadowDomManager=class{constructor(options){__publicField(this,"shadowDoms",new WeakSet);__publicField(this,"mutationCb");__publicField(this,"scrollCb");__publicField(this,"bypassOptions");__publicField(this,"mirror");__publicField(this,"restoreHandlers",[]);this.mutationCb=options.mutationCb;this.scrollCb=options.scrollCb;this.bypassOptions=options.bypassOptions;this.mirror=options.mirror;this.init()}init(){this.reset();this.patchAttachShadow(Element,document)}addShadowRoot(shadowRoot2,doc){if(isNativeShadowDom(shadowRoot2)&&!this.shadowDoms.has(shadowRoot2)){this.shadowDoms.add(shadowRoot2);const observer=initMutationObserver({...this.bypassOptions,doc,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},shadowRoot2);this.restoreHandlers.push(()=>observer.disconnect());this.restoreHandlers.push(initScrollObserver({...this.bypassOptions,scrollCb:this.scrollCb,doc:shadowRoot2,mirror:this.mirror}));setTimeout(()=>{shadowRoot2.adoptedStyleSheets&&shadowRoot2.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot2.adoptedStyleSheets,this.mirror.getId(index.host(shadowRoot2))),this.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},shadowRoot2))},0)}}observeAttachShadow(iframeElement){iframeElement.contentWindow&&iframeElement.contentDocument&&this.patchAttachShadow(iframeElement.contentWindow.Element,iframeElement.contentDocument)}patchAttachShadow(element,doc){const manager=this;this.restoreHandlers.push(patch(element.prototype,"attachShadow",function(original){return function(option){const sRoot=original.call(this,option),shadowRootEl=index.shadowRoot(this);return shadowRootEl&&inDom(this)&&manager.addShadowRoot(shadowRootEl,doc),sRoot}}))}reset(){this.restoreHandlers.forEach(handler=>{try{handler()}catch(e2){}});this.restoreHandlers=[];this.shadowDoms=new WeakSet}},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;encode=function(arraybuffer){for(var bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="",i2=0;i2<len;i2+=3)base64+=chars[bytes[i2]>>2],base64+=chars[(bytes[i2]&3)<<4|bytes[i2+1]>>4],base64+=chars[(bytes[i2+1]&15)<<2|bytes[i2+2]>>6],base64+=chars[bytes[i2+2]&63];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64};canvasVarMap=new Map;saveWebGLVar=(value,win,ctx)=>{if(value&&(isInstanceOfWebGLObject(value,win)||typeof value=="object")){const name=value.constructor.name,list2=variableListFor$1(ctx,name);let index2=list2.indexOf(value);return index2===-1&&(index2=list2.length,list2.push(value)),index2}};serializeArgs=(args,win,ctx)=>args.map(arg=>serializeArg(arg,win,ctx));isInstanceOfWebGLObject=(value,win)=>{const supportedWebGLConstructorNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(name=>typeof win[name]=="function");return Boolean(supportedWebGLConstructorNames.find(name=>value instanceof win[name]))};var encodedJs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",decodeBase64=base64=>Uint8Array.from(atob(base64),c2=>c2.charCodeAt(0)),blob=typeof window!="undefined"&&window.Blob&&new Blob([decodeBase64(encodedJs)],{type:"text/javascript;charset=utf-8"});var CanvasManager=class{constructor(options){__publicField(this,"pendingCanvasMutations",new Map);__publicField(this,"rafStamps",{latestId:0,invokeId:null});__publicField(this,"mirror");__publicField(this,"mutationCb");__publicField(this,"resetObservers");__publicField(this,"frozen",!1);__publicField(this,"locked",!1);__publicField(this,"processMutation",(target,mutation)=>{const newFrame=this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId;(newFrame||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId);this.pendingCanvasMutations.has(target)||this.pendingCanvasMutations.set(target,[]);this.pendingCanvasMutations.get(target).push(mutation)});const{sampling="all",win,blockClass,blockSelector,recordCanvas,dataURLOptions}=options;this.mutationCb=options.mutationCb;this.mirror=options.mirror;recordCanvas&&sampling==="all"&&this.initCanvasMutationObserver(win,blockClass,blockSelector);recordCanvas&&typeof sampling=="number"&&this.initCanvasFPSObserver(sampling,win,blockClass,blockSelector,{dataURLOptions})}reset(){this.pendingCanvasMutations.clear();this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(fps,win,blockClass,blockSelector,options){const canvasContextReset=initCanvasContextObserver(win,blockClass,blockSelector,!0),snapshotInProgressMap=new Map,worker=new WorkerWrapper;worker.onmessage=e2=>{const{id}=e2.data;if(snapshotInProgressMap.set(id,!1),"base64"in e2.data){const{base64,type,width,height}=e2.data;this.mutationCb({id,type:CanvasContext["2D"],commands:[{property:"clearRect",args:[0,0,width,height]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64}],type}]},0,0]}]})}};const timeBetweenSnapshots=1e3/fps;let lastSnapshotTime=0,rafId;const getCanvas=()=>{const matchedCanvas=[];return win.document.querySelectorAll("canvas").forEach(canvas=>{isBlocked(canvas,blockClass,blockSelector,!0)||matchedCanvas.push(canvas)}),matchedCanvas},takeCanvasSnapshots=timestamp=>{if(lastSnapshotTime&&timestamp-lastSnapshotTime<timeBetweenSnapshots){rafId=requestAnimationFrame(takeCanvasSnapshots);return}lastSnapshotTime=timestamp;getCanvas().forEach(async canvas=>{var _a22;const id=this.mirror.getId(canvas);if(!snapshotInProgressMap.get(id)&&canvas.width!==0&&canvas.height!==0){if(snapshotInProgressMap.set(id,!0),["webgl","webgl2"].includes(canvas.__context)){const context=canvas.getContext(canvas.__context);((_a22=context==null?void 0:context.getContextAttributes())==null?void 0:_a22.preserveDrawingBuffer)===!1&&context.clear(context.COLOR_BUFFER_BIT)}const bitmap=await createImageBitmap(canvas);worker.postMessage({id,bitmap,width:canvas.width,height:canvas.height,dataURLOptions:options.dataURLOptions},[bitmap])}});rafId=requestAnimationFrame(takeCanvasSnapshots)};rafId=requestAnimationFrame(takeCanvasSnapshots);this.resetObservers=()=>{canvasContextReset(),cancelAnimationFrame(rafId)}}initCanvasMutationObserver(win,blockClass,blockSelector){this.startRAFTimestamping();this.startPendingCanvasMutationFlusher();const canvasContextReset=initCanvasContextObserver(win,blockClass,blockSelector,!1),canvas2DReset=initCanvas2DMutationObserver(this.processMutation.bind(this),win,blockClass,blockSelector),canvasWebGL1and2Reset=initCanvasWebGLMutationObserver(this.processMutation.bind(this),win,blockClass,blockSelector);this.resetObservers=()=>{canvasContextReset(),canvas2DReset(),canvasWebGL1and2Reset()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const setLatestRAFTimestamp=timestamp=>{this.rafStamps.latestId=timestamp,requestAnimationFrame(setLatestRAFTimestamp)};requestAnimationFrame(setLatestRAFTimestamp)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((_values,canvas)=>{const id=this.mirror.getId(canvas);this.flushPendingCanvasMutationFor(canvas,id)});requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(canvas,id){if(!this.frozen&&!this.locked){const valuesWithType=this.pendingCanvasMutations.get(canvas);if(valuesWithType&&id!==-1){const values=valuesWithType.map(value=>{const{...rest}=value;return rest}),{type}=valuesWithType[0];this.mutationCb({id,type,commands:values});this.pendingCanvasMutations.delete(canvas)}}}},StylesheetManager=class{constructor(options){__publicField(this,"trackedLinkElements",new WeakSet);__publicField(this,"mutationCb");__publicField(this,"adoptedStyleSheetCb");__publicField(this,"styleMirror",new StyleSheetMirror);this.mutationCb=options.mutationCb;this.adoptedStyleSheetCb=options.adoptedStyleSheetCb}attachLinkElement(linkEl,childSn){"_cssText"in childSn.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:childSn.id,attributes:childSn.attributes}]});this.trackLinkElement(linkEl)}trackLinkElement(linkEl){this.trackedLinkElements.has(linkEl)||(this.trackedLinkElements.add(linkEl),this.trackStylesheetInLinkElement(linkEl))}adoptStyleSheets(sheets,hostId){if(sheets.length!==0){const adoptedStyleSheetData={id:hostId,styleIds:[]},styles=[];for(const sheet of sheets){let styleId;this.styleMirror.has(sheet)?styleId=this.styleMirror.getId(sheet):(styleId=this.styleMirror.add(sheet),styles.push({styleId,rules:Array.from(sheet.rules||CSSRule,(r2,index2)=>({rule:stringifyRule(r2,sheet.href),index:index2}))}));adoptedStyleSheetData.styleIds.push(styleId)}styles.length>0&&(adoptedStyleSheetData.styles=styles);this.adoptedStyleSheetCb(adoptedStyleSheetData)}}reset(){this.styleMirror.reset();this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(){}},ProcessedNodeManager=class{constructor(){__publicField(this,"nodeMap",new WeakMap);__publicField(this,"active",!1)}inOtherBuffer(node2,thisBuffer){const buffers=this.nodeMap.get(node2);return buffers&&Array.from(buffers).some(buffer=>buffer!==thisBuffer)}add(node2,buffer){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1}));this.nodeMap.set(node2,(this.nodeMap.get(node2)||new Set).add(buffer))}destroy(){}},wrappedEmit,takeFullSnapshot$1,canvasManager,recording=!1;try{if(Array.from([1],x2=>x2*2)[0]!==2){const cleanFrame=document.createElement("iframe");document.body.appendChild(cleanFrame);Array.from=((_a=cleanFrame.contentWindow)==null?void 0:_a.Array.from)||Array.from;document.body.removeChild(cleanFrame)}}catch(err){console.debug("Unable to override Array.from",err)}mirror=createMirror$2();record.addCustomEvent=(tag,payload)=>{if(!recording)throw new Error("please add custom event after start recording");wrappedEmit({type:EventType.Custom,data:{tag,payload}})};record.freezePage=()=>{mutationBuffers.forEach(buf=>buf.freeze())};record.takeFullSnapshot=isCheckout=>{if(!recording)throw new Error("please take full snapshot after start recording");takeFullSnapshot$1(isCheckout)};record.mirror=mirror;!function(t2){t2[t2.NotStarted=0]="NotStarted";t2[t2.Running=1]="Running";t2[t2.Stopped=2]="Stopped"}(n||(n={}));var EventType2=(EventType22=>(EventType22[EventType22.DomContentLoaded=0]="DomContentLoaded",EventType22[EventType22.Load=1]="Load",EventType22[EventType22.FullSnapshot=2]="FullSnapshot",EventType22[EventType22.IncrementalSnapshot=3]="IncrementalSnapshot",EventType22[EventType22.Meta=4]="Meta",EventType22[EventType22.Custom=5]="Custom",EventType22[EventType22.Plugin=6]="Plugin",EventType22))(EventType2||{}),defaultOptions={key:"_seq"},PLUGIN_NAME="si-sequential-id",getSequentialIdPlugin=options=>{const _options={...defaultOptions,...options};let id=0;return{name:PLUGIN_NAME,eventProcessor(event){return Object.assign(event,{[_options.key]:++id}),event},options:_options}};var isNullish=x2=>x2==null,isUndefined=x2=>x2===void 0,isObject=x2=>x2!=null&&typeof x2=="object",isFunction=x2=>x2!=null&&typeof x2=="function";validate={};Stopwatch=(class{constructor(){__privateAdd(this,_timeFunc);__privateAdd(this,_value,0);__privateAdd(this,_marker,null);var _a3;isFunction((_a3=window==null?void 0:window.performance)==null?void 0:_a3.now)?__privateSet(this,_timeFunc,()=>window.performance.now()):__privateSet(this,_timeFunc,()=>Date.now())}get time(){var value=__privateGet(this,_value),now;return __privateGet(this,_marker)!=null&&(now=__privateGet(this,_timeFunc).call(this),value=__privateGet(this,_value)+Math.max(0,now-__privateGet(this,_marker))),Math.round(value)}start(){__privateGet(this,_marker)==null&&__privateSet(this,_marker,__privateGet(this,_timeFunc).call(this))}stop(){if(__privateGet(this,_marker)!=null){var now=__privateGet(this,_timeFunc).call(this);__privateSet(this,_value,__privateGet(this,_value)+Math.max(0,now-__privateGet(this,_marker)));__privateSet(this,_marker,null)}}reset(){__privateSet(this,_value,0);__privateSet(this,_marker,null)}});_timeFunc=new WeakMap;_value=new WeakMap;_marker=new WeakMap;var canvasSupport=typeof OffscreenCanvas=="function",eventBufferWeight={[EventType2.DomContentLoaded]:1,[EventType2.Load]:1,[EventType2.FullSnapshot]:50,[EventType2.IncrementalSnapshot]:3,[EventType2.Meta]:1,[EventType2.Custom]:2,[EventType2.Plugin]:2},_sz,_config,_eventBuffer,_eventBufferWeight,_eventBufferWeightThreshold,_eventsLogged,_recordConfig,_recordHandle,_eventsHandler,_stopwatch,SiteimproveAnalyticsObserver=class{constructor(sz2,config){__privateAdd(this,_sz);__privateAdd(this,_config);__privateAdd(this,_eventBuffer,[]);__privateAdd(this,_eventBufferWeight,0);__privateAdd(this,_eventBufferWeightThreshold,eventBufferWeight[EventType2.FullSnapshot]);__privateAdd(this,_eventsLogged,0);__privateAdd(this,_recordConfig);__privateAdd(this,_recordHandle);__privateAdd(this,_eventsHandler);__privateAdd(this,_stopwatch,new Stopwatch);__privateSet(this,_sz,sz2);__privateSet(this,_config,config)}get isRecording(){return __privateGet(this,_recordHandle)!=null}get recordedEvents(){return __privateGet(this,_eventsLogged)+__privateGet(this,_eventBuffer).length}get recordedDuration(){return __privateGet(this,_stopwatch).time}get config(){return __privateGet(this,_config)}get recordConfig(){return __privateGet(this,_recordConfig)}startNew(handler){this.isRecording&&this.stop();__privateSet(this,_eventsLogged,0);__privateGet(this,_eventBuffer).length=0;__privateSet(this,_eventBufferWeight,0);const recordCanvas=canvasSupport&&__privateGet(this,_config).recording.recordCanvas===!0;if(__privateSet(this,_recordConfig,{emit:event=>{__privateGet(this,_eventBuffer).push(event);__privateSet(this,_eventBufferWeight,__privateGet(this,_eventBufferWeight)+(eventBufferWeight[event.type]||1));const shouldFlush=__privateGet(this,_eventBuffer).length>=25||__privateGet(this,_eventBufferWeight)>=__privateGet(this,_eventBufferWeightThreshold);shouldFlush&&this.flush()},inlineStylesheet:!0,inlineImages:!1,recordCrossOriginIframes:!1,recordCanvas,sampling:{canvas:recordCanvas?1:void 0,mouseInteraction:!0,scroll:100,input:"all",media:250,mousemove:50},maskInputOptions:{password:!0,email:!0,tel:!0},blockSelector:"frame, iframe",plugins:[getSequentialIdPlugin()]}),__privateGet(this,_config).recording.masking!=null){const input2=__privateGet(this,_config).recording.masking.input;input2!=null&&(__privateGet(this,_recordConfig).maskInputOptions={"datetime-local":input2.date==!0,color:input2.color==!0,date:input2.date==!0,email:input2.email==!0,month:input2.date==!0,number:input2.number==!0,password:!0,range:input2.range==!0,search:input2.search==!0,select:input2.select==!0,tel:input2.tel==!0,text:input2.text==!0,textarea:input2.textarea==!0,time:input2.date==!0,url:input2.url==!0,week:input2.date==!0});const maskingSelector=this.convertElementMatchesToSelector(__privateGet(this,_config).recording.masking.elementMatches);maskingSelector&&(__privateGet(this,_recordConfig).maskTextSelector=__privateGet(this,_recordConfig).maskTextSelector?`${__privateGet(this,_recordConfig).maskTextSelector}, ${maskingSelector}`:maskingSelector)}if(__privateGet(this,_config).recording.blocking){const blockingSelector=this.convertElementMatchesToSelector(__privateGet(this,_config).recording.blocking.elementMatches);blockingSelector&&(__privateGet(this,_recordConfig).blockSelector=__privateGet(this,_recordConfig).blockSelector?`${__privateGet(this,_recordConfig).blockSelector}, ${blockingSelector}`:blockingSelector)}__privateGet(this,_stopwatch).reset();__privateGet(this,_stopwatch).start();__privateSet(this,_eventsHandler,handler);__privateSet(this,_recordHandle,record(__privateGet(this,_recordConfig)))}stop(){__privateGet(this,_recordHandle)&&(__privateGet(this,_recordHandle).call(this),__privateSet(this,_recordHandle,void 0));__privateGet(this,_stopwatch).stop()}flush(){if(!(__privateGet(this,_eventBuffer).length<1)){const toFlush=__privateGet(this,_eventBuffer);__privateSet(this,_eventBuffer,[]);__privateSet(this,_eventBufferWeight,0);__privateGet(this,_eventsHandler)&&__privateGet(this,_eventsHandler).call(this,toFlush);__privateSet(this,_eventsLogged,__privateGet(this,_eventsLogged)+toFlush.length)}}customEvent(customEvent){const{type:eventType,event}=customEvent;if(!this.isRecording){__privateGet(this,_sz).core.warn("Observing not started, cant emit custom {0} event",eventType);return}if(!record||typeof record.addCustomEvent!="function"||typeof record.mirror!="object"){__privateGet(this,_sz).core.warn("Observing extensions are not available, cant emit custom {0} event",eventType);return}let loggableEventType=eventType,loggableEvent=null;switch(eventType){case"rage_click":const nodeId=record.mirror.getId(event.node);loggableEvent={id:nodeId,clicks:event.clicks,delta:event.delta};break;case"window_state":loggableEvent={hidden:event.hidden};break;case"excessive_scroll":loggableEvent={pattern:event.pattern,scrolls:event.scrolls,forward_pages:event.forward_pages,backward_pages:event.backward_pages,delta:event.delta};break;default:__privateGet(this,_sz).core.warn("Unrecognized custom {0} event",eventType)}loggableEvent&&record.addCustomEvent(loggableEventType,loggableEvent)}convertElementMatchesToSelector(elementMatches){if(elementMatches==null||elementMatches.length<1)return null;const preppedMatches=[];return(elementMatches.forEach(x2=>{const cssClass=this.prepareCssClassSelector(x2.cssClass);cssClass&&validateSelector(cssClass)&&preppedMatches.push(cssClass);const attr=this.prepareAttributeSelector(x2.attribute);attr&&validateSelector(attr)&&preppedMatches.push(attr)}),preppedMatches.length<1)?null:preppedMatches.join(", ")}prepareCssClassSelector(cssClass){if(!cssClass)return null;let prepped=cssClass.trim();return prepped.length<1?null:(prepped.charAt(0)!="."&&(prepped=`.${prepped}`),prepped)}prepareAttributeSelector(attribute){if(!attribute)return null;const prepped=attribute.trim();return prepped.length<1||prepped.charAt(0)!="["||prepped.charAt(prepped.length-1)!="]"?null:prepped}};_sz=new WeakMap;_config=new WeakMap;_eventBuffer=new WeakMap;_eventBufferWeight=new WeakMap;_eventBufferWeightThreshold=new WeakMap;_eventsLogged=new WeakMap;_recordConfig=new WeakMap;_recordHandle=new WeakMap;_eventsHandler=new WeakMap;_stopwatch=new WeakMap;StorageManager=(class{constructor(){}static localStore(storageKey,factory){const localStorage=window.localStorage;return this.isStorageSupported(localStorage,storageKey)?this.getStorageBackedStorageManager(localStorage,storageKey,factory):this.getMemoryBackedStorageManager(factory)}static sessionStore(storageKey,factory){const sessionStorage=window.sessionStorage;return this.isStorageSupported(sessionStorage,storageKey)?this.getStorageBackedStorageManager(sessionStorage,storageKey,factory):this.getMemoryBackedStorageManager(factory)}static isStorageSupported(storage,key){if(isUndefined(storage))return!1;try{const existingValue=storage.getItem(key);if(!isNullish(existingValue))return!0;const expectedValue="Y";storage.setItem(key,expectedValue);const storedValue=storage.getItem(key);return storage.removeItem(key),expectedValue===storedValue}catch(e){return!1}}static getStorageBackedStorageManager(storage,key,emptyFactory){var _a3;const obj=(_a3=this.readStorage(storage,key,x2=>typeof x2=="object"))!=null?_a3:emptyFactory();return{get:prop=>obj[prop],set:(prop,value)=>{obj[prop]!==value&&(value===void 0?delete obj[prop]:obj[prop]=value,this.writeStorage(storage,key,obj))}}}static getMemoryBackedStorageManager(emptyFactory){const obj=emptyFactory();return{get:prop=>obj[prop],set:(prop,value)=>{value===void 0?delete obj[prop]:obj[prop]=value}}}static readStorage(storage,key,predicate){try{const raw=storage.getItem(key);if(raw!=null&&typeof raw=="string"){const parsed=JSON.parse(raw);if(!predicate||predicate(parsed))return parsed}}catch(e){}return null}static writeStorage(storage,key,value){try{storage.setItem(key,JSON.stringify(value))}catch(e){}}});SiteimproveWindowContextManager=(class{constructor(sz2){__privateAdd(this,_sz2);__privateAdd(this,_storage);__privateAdd(this,_windowId,"");__privateSet(this,_sz2,sz2);__privateSet(this,_storage,StorageManager.sessionStore("_si_ctxm",()=>({})));this.init()}get windowId(){return __privateGet(this,_windowId)}init(){var _a3;__privateSet(this,_windowId,(_a3=__privateGet(this,_storage).get("id"))!=null?_a3:"");__privateGet(this,_windowId)&&__privateGet(this,_storage).get("stale")!=="!"||__privateSet(this,_windowId,__privateGet(this,_sz2).core.uuid());__privateGet(this,_storage).set("id",__privateGet(this,_windowId));try{__privateGet(this,_storage).set("stale","!");window.addEventListener("beforeunload",()=>{__privateGet(this,_storage).set("stale",void 0)},{capture:!1,passive:!0})}catch(err){__privateGet(this,_sz2).core.warn("Failed to set stale marker: {0}",err instanceof Error?err.message:err)}}});_sz2=new WeakMap;_storage=new WeakMap;_windowId=new WeakMap;analyticsRegistry={afterPageviewTracked:"after_pageview_tracked",ping:"ping"};canUseCrypto=typeof((_a2=self==null?void 0:self.crypto)==null?void 0:_a2.randomUUID)=="function";canUseMathImul=typeof(Math==null?void 0:Math.imul)=="function";messageScopes=["session-recording"];sessionRecordingActions=["init","config-test","events-output"],function(w,d){if((sz==null?void 0:sz.core)!=null&&(sz==null?void 0:sz.analytics)!=null){const useFetch=canFetch(),useCompression=canCompress();let handle=null,timeoutHandle=null;const timeoutMilliseconds=186e4,samplingSeed=262254561,keepAliveThreshold=63488,sendEvents=async function(events,context){var buckets,eventsPerBucket,b;if(!events!=null&&!(events.length<1)){let keepalive=!1;const isHidden=d.visibilityState=="hidden";if(isHidden&&events.length>1){const estSize=estimateJsonSize(events)*(useCompression?.7:1);if(estSize>keepAliveThreshold){for(buckets=Math.max(Math.ceil(estSize/(keepAliveThreshold+8)),1),eventsPerBucket=Math.ceil(events.length/buckets),b=0;b<buckets;b++){const bucketEvents=events.slice(b*eventsPerBucket,Math.min((b+1)*eventsPerBucket,events.length));bucketEvents.length>0&&await sendEvents(bucketEvents,context)}return}keepalive=!0}const formData=initFormData(context),json=JSON.stringify(events);if(useCompression){const compressed=await gzip(json);formData.set("events",new Blob([compressed],{type:"application/octet-stream"}),"events.json.gz")}else formData.set("events",new Blob([json],{type:"application/json"}),"events.json");const route=`https://${sz.analytics.endpoint.fullpath("r/observe")}`,res=sz.core.fetch(route,{method:"POST",body:formData,keepalive});return sz.push([analyticsRegistry.ping,!0]),res}},sendAvailableEvents=()=>{var _a3;const observer=(_a3=sz==null?void 0:sz.analytics)==null?void 0:_a3.observer;observer!=null&&observer.flush()},stopAndFlush=observer=>{observer.stop(),observer.flush()},installHandler=flushInterval=>{handle={interval:setInterval(sendAvailableEvents,flushInterval),listener:function(){const isHidden=d.visibilityState=="hidden",currentObserver=sz.analytics.observer;isObject(currentObserver)&&currentObserver.isRecording&&currentObserver.customEvent({type:"window_state",event:{hidden:isHidden}});isHidden&&sendAvailableEvents()}},d.addEventListener("visibilitychange",handle.listener)},uninstallHandler=()=>{if(handle!=null){clearInterval(handle.interval);d.removeEventListener("visibilitychange",handle.listener);handle=null;const existingObserver=sz.analytics.observer;isObject(existingObserver)&&stopAndFlush(existingObserver)}};sz.core.register("observe",config=>{if(!useFetch){sz.core.warn("Fetch not available, cannot enable observing");return}if((config==null?void 0:config.guard)!=null){const lowerHost=w.location.host.toLowerCase(),matchingDomain=(config.guard.domains||[]).find(domain=>lowerHost==domain.toLowerCase());if(config.guard.exclude==!0){if(matchingDomain){sz.core.log("The domain {0} is configured for opting out of observing, skipping enabling observer",matchingDomain);return}}else if(!matchingDomain){sz.core.log("None of the configured domains for observing matched, skipping enabling observer");return}}if(uninstallHandler(),config&&typeof config=="object"){sz.analytics.observer=new SiteimproveAnalyticsObserver(sz,config);const flushInterval=Math.max(~~config.flushInterval,5e3);installHandler(flushInterval);sz.core.log("Observer configured: {0}",JSON.stringify(config))}else sz.analytics.observer=null,sz.core.warn("Could not configure observer with the supplied configuration: {0}",config?JSON.stringify(config):"null")});sz.push([analyticsRegistry.afterPageviewTracked,function(trackOpts){var _a3,_b,_c;const observer=(_a3=sz==null?void 0:sz.analytics)==null?void 0:_a3.observer;if(observer!=null&&useFetch){if(observer.isRecording&&stopAndFlush(observer),timeoutHandle&&(clearInterval(timeoutHandle.interval),timeoutHandle=null),((_b=sz.analytics.config)==null?void 0:_b.cookieless)===!0){sz.core.log("Can not start new observation because cookieless is enabled");return}if(observer.config.sampling!=null){const[samplingPassed,samplingTicket]=!trackOpts.prev?[!1,null]:sampleByIdentifierExt(trackOpts.prev,observer.config.sampling.rate,samplingSeed);if(!samplingPassed){sz.core.log("Skipping starting new observation because sampling configured excludes the current session. Sampling config is: {0}. Sampling ticket was: {1}.",JSON.stringify(observer.config.sampling),samplingTicket);return}}let contextManager=(_c=sz==null?void 0:sz.analytics)==null?void 0:_c.contextManager;contextManager||(contextManager=new SiteimproveWindowContextManager(sz),sz.analytics.contextManager=contextManager);const context={accountId:trackOpts.accountid,logId:trackOpts.luid,windowId:contextManager.windowId,cookieless:trackOpts.ckl,sessionId:trackOpts.prev,counter:0};observer.startNew(events=>{sendEvents(events,context),timeoutHandle&&(timeoutHandle.timestamp=Date.now())});timeoutHandle={logId:trackOpts.luid,interval:setInterval(()=>{if(timeoutHandle&&timeoutHandle.logId===trackOpts.luid){const delta=Date.now()-timeoutHandle.timestamp;delta>timeoutMilliseconds&&(sz.core.warn("It's been {0} seconds since last event emitted. We claim the recording is done.",Math.round(delta/1e3)),observer.isRecording&&stopAndFlush(observer),clearInterval(timeoutHandle.interval),timeoutHandle=null)}},5e3),timestamp:Date.now()};sz.core.log("Started new observation for log {0}: {1}",context.logId,JSON.stringify(context))}}]);sz.core.ready(()=>{listenForMessages()})}}(window,document)})()}(_sz),function(sz){"use strict";(()=>{function now(){return Date.now()}function getDistance(a,b){return Math.hypot(a.x-b.x,a.y-b.y)}function takeWhileReverse(arr,predicate,startIndex){const result=[];for(let i=startIndex!=null?startIndex:arr.length-1;i>=0&&i<arr.length;i--){if(!predicate(arr[i],i))break;result.push(arr[i])}return result}function countWhile(arr,predicate){let count=0;for(let i=0;i<arr.length;i++){if(!predicate(arr[i],i))break;count++}return count}function removeWhile(arr,predicate){const toRemoveCount=countWhile(arr,predicate);return toRemoveCount===arr.length?arr.length=0:toRemoveCount>0&&arr.splice(0,toRemoveCount),toRemoveCount}function isElement(val){return val!=null&&val instanceof Element}function pagePoint(e){return{x:Math.round(e.pageX),y:Math.round(e.pageY)}}function targetPoint(e,target){var _a,_b;const point=pagePoint(e);var rect=target.getBoundingClientRect(),scrollTop=((_a=document.documentElement)==null?void 0:_a.scrollTop)!=null?document.documentElement.scrollTop:document.body.scrollTop,scrollLeft=((_b=document.documentElement)==null?void 0:_b.scrollLeft)!=null?document.documentElement.scrollLeft:document.body.scrollLeft;return{x:Math.round(point.x-rect.left-scrollLeft),y:Math.round(point.y-rect.top-scrollTop)}}function getWindowDimensions(sz2){var _a,_b,_c,_d;let windowWidth=(_a=window.innerWidth)!=null?_a:0,windowHeight=(_b=window.innerHeight)!=null?_b:0;const helpers=(_d=(_c=sz2.analytics)==null?void 0:_c.heatmap)==null?void 0:_d.helpers;if(isObject(helpers)&&isFunction(helpers.viewPort)){const viewPort=helpers.viewPort();windowWidth=viewPort.w;windowHeight=viewPort.h}return{width:windowWidth,height:windowHeight}}function getElementSelector(sz2,element){var _a,_b;let elementSelector="";const helpers=(_b=(_a=sz2.analytics)==null?void 0:_a.heatmap)==null?void 0:_b.helpers;if(isObject(helpers)&&isFunction(helpers.boundingElement)&&isFunction(helpers.cssSelector)){const boundingElement=helpers.boundingElement(element);boundingElement&&(elementSelector=helpers.cssSelector(boundingElement))}return elementSelector}function isStruggleTracker(value){return isObject(value)&&typeof value.logStruggle=="function"&&typeof value.setTrackingContext=="function"}var __typeError=msg=>{throw TypeError(msg);},__accessCheck=(obj,member,msg)=>member.has(obj)||__typeError("Cannot "+msg),__privateGet=(obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),__privateAdd=(obj,member,value)=>member.has(obj)?__typeError("Cannot add the same private member more than once"):member instanceof WeakSet?member.add(obj):member.set(obj,value),__privateSet=(obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),setter?setter.call(obj,value):member.set(obj,value),value),analyticsRegistry={afterPageviewTracked:"after_pageview_tracked",ping:"ping"},_sz,_trackers,StruggleManager=class{constructor(sz2){__privateAdd(this,_sz);__privateAdd(this,_trackers,{});__privateSet(this,_sz,sz2)}addTracker(tracker){const existing=__privateGet(this,_trackers)[tracker.type];existing&&(__privateGet(this,_sz).core.log("Uninstalling struggle tracker: {0}",tracker.type),existing.uninstall());__privateGet(this,_sz).core.log("Installing struggle tracker: {0}",tracker.type);__privateGet(this,_trackers)[tracker.type]=tracker;tracker.install()}clearTrackers(){[...Object.values(__privateGet(this,_trackers))].forEach(tracker=>{tracker.uninstall(),delete __privateGet(this,_trackers)[tracker.type]})}},isObject,isFunction,_sz2,_config,_handler,_listeners,_clickBuffer,RageClickTracker,RageClickStruggle,_sz3,_config2,_handler2,_listeners2,_continuousScrollBuffer,_backAndForthScrollBuffer,_rageScrollBuffer,_lastY,_lastDirection,ExcessiveScrollTracker,ExcessiveScrollStruggle,StruggleTracker;_sz=new WeakMap;_trackers=new WeakMap;isObject=x=>x!=null&&typeof x=="object";isFunction=x=>x!=null&&typeof x=="function";RageClickTracker=(class{constructor(sz2,config){__privateAdd(this,_sz2);__privateAdd(this,_config);__privateAdd(this,_handler,null);__privateAdd(this,_listeners,[]);__privateAdd(this,_clickBuffer,[]);this._type="rage_click";__privateSet(this,_sz2,sz2);__privateSet(this,_config,{...config})}get type(){return this._type}install(){if(__privateGet(this,_handler)==null){const self=this;__privateSet(this,_handler,function(e){self.handleClick.call(self,e)});window.addEventListener("click",__privateGet(this,_handler),{capture:!0,passive:!0})}}uninstall(){__privateGet(this,_handler)!=null&&(window.removeEventListener("click",__privateGet(this,_handler)),__privateSet(this,_handler,null))}addListener(listener){__privateGet(this,_listeners).push(listener)}clearListeners(){__privateGet(this,_listeners).length=0}emitStruggle(struggle){__privateGet(this,_sz2).core.log("ðŸ”¥ Rage click detected: {0}",JSON.stringify(struggle.debugLog()));__privateGet(this,_listeners).forEach(listener=>{try{listener(struggle)}catch(err){__privateGet(this,_sz2).core.warn("Failed to notify rage click listener: {0}",err instanceof Error?err.message:err)}})}handleClick(e){if(isElement(e.target)){const point=targetPoint(e,e.target);__privateGet(this,_clickBuffer).push({clientX:e.clientX,clientY:e.clientY,timestamp:now(),target:e.target,targetX:point.x,targetY:point.y});this.detectRageClick()}}detectRageClick(){this.pruneOldClicks();for(let i=0;i<__privateGet(this,_clickBuffer).length;i++){const base=__privateGet(this,_clickBuffer)[i],basePoint={x:base.clientX,y:base.clientY},cluster=__privateGet(this,_clickBuffer).filter(clickRecord=>{if(clickRecord.target===base.target)return!0;const distance=getDistance({x:clickRecord.clientX,y:clickRecord.clientY},basePoint);if(distance<=__privateGet(this,_config).clickRadius)return!0});if(cluster.length>=__privateGet(this,_config).clickThreshold){const elementSelector=getElementSelector(__privateGet(this,_sz2),base.target),windowDimensions=getWindowDimensions(__privateGet(this,_sz2)),delta=cluster[cluster.length-1].timestamp-cluster[0].timestamp;this.emitStruggle(new RageClickStruggle({type:"rage_click",x:base.targetX,y:base.targetY,node:base.target,elementSelector,clicks:cluster.length,delta,windowWidth:windowDimensions.width,windowHeight:windowDimensions.height}));this.clearClicks();return}}}pruneOldClicks(){const t=now();removeWhile(__privateGet(this,_clickBuffer),x=>t-x.timestamp>__privateGet(this,_config).timeWindowMs)}clearClicks(){__privateGet(this,_clickBuffer).length=0}});_sz2=new WeakMap;_config=new WeakMap;_handler=new WeakMap;_listeners=new WeakMap;_clickBuffer=new WeakMap;RageClickStruggle=(class{constructor(struggle){this.type="rage_click";this.x=struggle.x;this.y=struggle.y;this.node=struggle.node;this.elementSelector=struggle.elementSelector;this.clicks=struggle.clicks;this.delta=struggle.delta;this.windowWidth=struggle.windowWidth;this.windowHeight=struggle.windowHeight}logParameters(){return{st:"rage",p:this.elementSelector,cx:this.x,cy:this.y,cc:this.clicks,cd:this.delta,ww:this.windowWidth,wh:this.windowHeight}}sessionRecordableCustomEvent(){return{type:"rage_click",event:{node:this.node,clicks:this.clicks,delta:this.delta,x:this.x,y:this.y}}}debugLog(){return{elementSelector:this.elementSelector,x:this.x,y:this.y,windowWidth:this.windowWidth,windowHeight:this.windowHeight,clicks:this.clicks,delta:this.delta}}});ExcessiveScrollTracker=(class{constructor(sz2,config){__privateAdd(this,_sz3);__privateAdd(this,_config2);__privateAdd(this,_handler2,null);__privateAdd(this,_listeners2,[]);__privateAdd(this,_continuousScrollBuffer,{scrolls:[]});__privateAdd(this,_backAndForthScrollBuffer,{scrolls:[]});__privateAdd(this,_rageScrollBuffer,{scrolls:[]});__privateAdd(this,_lastY,0);__privateAdd(this,_lastDirection,null);this._type="excessive_scroll";__privateSet(this,_sz3,sz2);__privateSet(this,_config2,{...config});__privateSet(this,_lastY,window.scrollY)}get type(){return this._type}install(){if(__privateGet(this,_handler2)==null){const self=this;__privateSet(this,_handler2,function(){self.handleScroll.call(self)});window.addEventListener("scroll",__privateGet(this,_handler2),{passive:!0})}}uninstall(){__privateGet(this,_handler2)!=null&&(window.removeEventListener("scroll",__privateGet(this,_handler2)),__privateSet(this,_handler2,null))}addListener(listener){__privateGet(this,_listeners2).push(listener)}clearListeners(){__privateGet(this,_listeners2).length=0}emitStruggle(struggle){__privateGet(this,_sz3).core.log("ðŸ“œ Excessive scroll detected: {0}",JSON.stringify(struggle.debugLog()));__privateGet(this,_listeners2).forEach(listener=>{try{listener(struggle)}catch(err){__privateGet(this,_sz3).core.warn("Failed to notify excessive scroll listener: {0}",err instanceof Error?err.message:err)}})}handleScroll(){const timestamp=now(),currentY=window.scrollY;if(currentY!==__privateGet(this,_lastY)){const deltaY=currentY-__privateGet(this,_lastY);__privateSet(this,_lastY,currentY);const windowDimensions=getWindowDimensions(__privateGet(this,_sz3));if(!(windowDimensions.height<1)){const jitterThreshold=Math.min(10,.1*windowDimensions.height);if(!(Math.abs(deltaY)<jitterThreshold)){const direction=deltaY>0?"down":"up",deltaPages=Math.abs(deltaY)/windowDimensions.height,scroll={direction,deltaPages,scrollY:currentY,timestamp};this.updateBufferAndDetect({buffer:__privateGet(this,_continuousScrollBuffer),predicate:()=>this.shouldDebounce(__privateGet(this,_continuousScrollBuffer),timestamp),updateFn:buffer=>buffer.scrolls.push(scroll),detectFn:()=>this.detectContinuousScroll(timestamp,windowDimensions)});this.updateBufferAndDetect({buffer:__privateGet(this,_backAndForthScrollBuffer),predicate:()=>document.documentElement.scrollHeight<__privateGet(this,_config2).backAndForth.minScrollHeightMultiplier*window.innerHeight||this.shouldDebounce(__privateGet(this,_backAndForthScrollBuffer),timestamp),updateFn:buffer=>buffer.scrolls.push(scroll),detectFn:()=>this.detectBackAndForthScroll(timestamp,windowDimensions)});this.updateBufferAndDetect({buffer:__privateGet(this,_rageScrollBuffer),predicate:()=>this.shouldDebounce(__privateGet(this,_rageScrollBuffer),timestamp),updateFn:buffer=>{__privateGet(this,_lastDirection)!==direction?buffer.scrolls.push(scroll):buffer.scrolls.length>1&&(buffer.scrolls[buffer.scrolls.length-1]=scroll)},detectFn:()=>this.detectRageScroll(timestamp,windowDimensions)});__privateSet(this,_lastDirection,direction)}}}}updateBufferAndDetect(options){const{buffer,predicate,updateFn,detectFn}=options;predicate()||(updateFn(buffer),detectFn())}detectContinuousScroll(now2,windowDimensions){const scrolls=__privateGet(this,_continuousScrollBuffer).scrolls;if(this.pruneOldScrolls(scrolls,now2,__privateGet(this,_config2).continuous.timeWindowMs),!(scrolls.length<1)){if(scrolls.length>1){const lastDirection=scrolls[scrolls.length-1].direction;let i=scrolls.length-1;while(i>0){if(scrolls[i-1].direction!=lastDirection)break;i--}i>0&&scrolls.splice(0,i)}const direction=scrolls[0].direction,totalPages=this.getTotalPages(scrolls);if(totalPages>=__privateGet(this,_config2).continuous.pagesThreshold){const firstScroll=scrolls[0],lastScroll=scrolls[scrolls.length-1];this.emitStruggle(new ExcessiveScrollStruggle({type:"excessive_scroll",start_top:firstScroll.scrollY,end_top:lastScroll.scrollY,pattern:0,scrolls:scrolls.length,forward_pages:direction==="down"?totalPages:0,backward_pages:direction==="up"?totalPages:0,delta:lastScroll.timestamp-firstScroll.timestamp,windowWidth:windowDimensions.width,windowHeight:windowDimensions.height}));this.clearScrolls(scrolls);__privateGet(this,_continuousScrollBuffer).lastEmitted=now2}}}detectBackAndForthScroll(now2,windowDimensions){const scrolls=__privateGet(this,_backAndForthScrollBuffer).scrolls;if(this.pruneOldScrolls(scrolls,now2,__privateGet(this,_config2).backAndForth.timeWindowMs),!(scrolls.length<2)){const lastDir=scrolls[scrolls.length-1].direction;if(scrolls.some(x=>x.direction!==lastDir)){const lastDirScrolls=takeWhileReverse(scrolls,x=>x.direction===lastDir),prevDirScrolls=takeWhileReverse(scrolls,x=>x.direction!==lastDir,scrolls.length-lastDirScrolls.length-1),lastDirPages=this.getTotalPages(lastDirScrolls),prevDirPages=this.getTotalPages(prevDirScrolls);if(lastDirPages>=__privateGet(this,_config2).backAndForth.pagesThreshold&&prevDirPages>=__privateGet(this,_config2).backAndForth.pagesThreshold){const forwardPages=lastDir==="down"?lastDirPages:prevDirPages,backwardPages=lastDir==="up"?lastDirPages:prevDirPages,firstScroll=prevDirScrolls[prevDirScrolls.length-1],lastScroll=lastDirScrolls[0];this.emitStruggle(new ExcessiveScrollStruggle({type:"excessive_scroll",start_top:firstScroll.scrollY,end_top:lastScroll.scrollY,pattern:1,scrolls:lastDirScrolls.length+prevDirScrolls.length,forward_pages:forwardPages,backward_pages:backwardPages,delta:lastScroll.timestamp-firstScroll.timestamp,windowWidth:windowDimensions.width,windowHeight:windowDimensions.height}));this.clearScrolls(scrolls);__privateGet(this,_backAndForthScrollBuffer).lastEmitted=now2}}}}detectRageScroll(now2,windowDimensions){const scrolls=__privateGet(this,_rageScrollBuffer).scrolls;if(this.pruneOldScrolls(scrolls,now2,__privateGet(this,_config2).rage.timeWindowMs),scrolls.length>__privateGet(this,_config2).rage.directionChanges){const firstScroll=scrolls[0],lastScroll=scrolls[scrolls.length-1];this.emitStruggle(new ExcessiveScrollStruggle({type:"excessive_scroll",start_top:firstScroll.scrollY,end_top:lastScroll.scrollY,pattern:2,scrolls:scrolls.length,forward_pages:0,backward_pages:0,delta:lastScroll.timestamp-firstScroll.timestamp,windowWidth:windowDimensions.width,windowHeight:windowDimensions.height}));this.clearScrolls(scrolls);__privateGet(this,_rageScrollBuffer).lastEmitted=now2}}shouldDebounce(buffer,now2){return buffer.lastEmitted!==void 0&&now2-buffer.lastEmitted<__privateGet(this,_config2).detectionDebounceMs}pruneOldScrolls(buffer,now2,timeWindowMs){removeWhile(buffer,x=>now2-x.timestamp>timeWindowMs)}getTotalPages(scrolls){const totalPages=scrolls.reduce((acc,x)=>acc+x.deltaPages,0);return Number(totalPages.toFixed(2))}clearScrolls(scrolls){scrolls.length=0}});_sz3=new WeakMap;_config2=new WeakMap;_handler2=new WeakMap;_listeners2=new WeakMap;_continuousScrollBuffer=new WeakMap;_backAndForthScrollBuffer=new WeakMap;_rageScrollBuffer=new WeakMap;_lastY=new WeakMap;_lastDirection=new WeakMap;ExcessiveScrollStruggle=(class{constructor(struggle){this.type="excessive_scroll";this.start_top=struggle.start_top;this.end_top=struggle.end_top;this.pattern=struggle.pattern;this.scrolls=struggle.scrolls;this.forward_pages=struggle.forward_pages;this.backward_pages=struggle.backward_pages;this.delta=struggle.delta;this.windowWidth=struggle.windowWidth;this.windowHeight=struggle.windowHeight}logParameters(){return{st:"excessive_scroll",scst:this.start_top,scet:this.end_top,scpt:this.getPatternShorthand(this.pattern),scs:this.scrolls,scfw:this.forward_pages,scbw:this.backward_pages,scd:this.delta,ww:this.windowWidth,wh:this.windowHeight}}getPatternShorthand(pattern){switch(pattern){case 2:return"rage";case 1:return"bckfth";case 0:default:return"cont"}}sessionRecordableCustomEvent(){return{type:"excessive_scroll",event:{pattern:this.pattern,scrolls:this.scrolls,forward_pages:this.forward_pages,backward_pages:this.backward_pages,delta:this.delta}}}debugLog(){return{start_top:this.start_top,end_top:this.end_top,pattern:this.pattern,forward_pages:this.forward_pages,backward_pages:this.backward_pages,delta:this.delta,windowWidth:this.windowWidth,windowHeight:this.windowHeight}}}),function(){(sz==null?void 0:sz.core)!=null&&(sz==null?void 0:sz.analytics)!=null&&(sz.core.register("detect_struggles",(config,overwrite)=>{if(sz.analytics.struggleTracker!=null)if(overwrite==!0)sz.core.log("Disabling previously configured struggle tracker"),sz.analytics.struggleTracker.manager&&sz.analytics.struggleTracker.manager.clearTrackers(),sz.analytics.struggleTracker=null;else{sz.core.log("Struggle tracking already enabled, skipping enabling again");return}if(!isObject(config)){sz.core.warn("Could not configure struggle tracker with the supplied configuration: {0}",config?JSON.stringify(config):"null");return}const tracker=new StruggleTracker(sz,config);sz.analytics.struggleTracker=tracker;const struggleTrackers=[];if(isObject(config.rageClick)){const rageClickTracker=new RageClickTracker(sz,config.rageClick);rageClickTracker.addListener(function(struggle){tracker.logStruggle(struggle);const observer=sz.analytics.observer;isObject(observer)&&observer.customEvent(struggle.sessionRecordableCustomEvent())});struggleTrackers.push(rageClickTracker);sz.core.log("Configured rage click tracker with configuration: {0}",JSON.stringify(config.rageClick))}if(isObject(config.excessiveScroll)){const excessiveScrollTracker=new ExcessiveScrollTracker(sz,config.excessiveScroll);excessiveScrollTracker.addListener(function(struggle){tracker.logStruggle(struggle);const observer=sz.analytics.observer;isObject(observer)&&observer.customEvent(struggle.sessionRecordableCustomEvent())});struggleTrackers.push(excessiveScrollTracker);sz.core.log("Configured excessive scroll tracker with configuration: {0}",JSON.stringify(config.excessiveScroll))}struggleTrackers.length>0?(struggleTrackers.forEach(struggleTracker=>{tracker.manager.addTracker(struggleTracker)}),sz.core.log("Installed {0} struggle trackers",struggleTrackers.length)):sz.core.log("No struggle trackers to install")}),sz.push([analyticsRegistry.afterPageviewTracked,function(trackOpts){var _a;const struggleTracker=(_a=sz.analytics)==null?void 0:_a.struggleTracker;if(isStruggleTracker(struggleTracker)){const context={accountId:trackOpts.accountid,logId:trackOpts.luid,url:trackOpts.url,cookieless:trackOpts.ckl,sessionId:trackOpts.prev,counter:0};struggleTracker.setTrackingContext(context)}}]))}();StruggleTracker=(class{constructor(sz2,config){this._recordedStruggles=0;this.buffer=[];this.trackingContext=null;this.sz=sz2;this._config=config;this._manager=new StruggleManager(sz2)}get recordedStruggles(){return this._recordedStruggles}get config(){return this._config}get manager(){return this._manager}logStruggle(struggle){isObject(struggle)&&(this.buffer.push(struggle),this._recordedStruggles++,this.emitStruggles())}setTrackingContext(trackingContext){this.trackingContext!=null&&this.emitStruggles();this.trackingContext=trackingContext;trackingContext!=null&&this.emitStruggles()}emitStruggles(){if(this.trackingContext!=null&&!(this.buffer.length<1)){const struggles=[...this.buffer];this.buffer.length=0;const context=this.trackingContext,route=this.sz.analytics.endpoint.fullpath("struggle.aspx");struggles.forEach(struggle=>{const parameters={aid:context.accountId,luid:context.logId,url:context.url,prev:context.sessionId,ckl:context.cookieless,o:++context.counter,...struggle.logParameters()};this.sz.analytics.request(route,parameters)})}}})})()}(_sz),_sz.core._isloaded=!0);