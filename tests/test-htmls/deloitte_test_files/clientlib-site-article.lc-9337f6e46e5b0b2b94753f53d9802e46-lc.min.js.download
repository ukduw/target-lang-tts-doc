(()=>{"use strict";var e,_={},h={};function n(e){var a=h[e];if(void 0!==a)return a.exports;var r=h[e]={exports:{}};return _[e].call(r.exports,r,r.exports,n),r.exports}n.m=_,e=[],n.O=(a,r,s,f)=>{if(!r){var u=1/0;for(t=0;t<e.length;t++){for(var[r,s,f]=e[t],o=!0,l=0;l<r.length;l++)(!1&f||u>=f)&&Object.keys(n.O).every(b=>n.O[b](r[l]))?r.splice(l--,1):(o=!1,f<u&&(u=f));if(o){e.splice(t--,1);var c=s();void 0!==c&&(a=c)}}return a}f=f||0;for(var t=e.length;t>0&&e[t-1][2]>f;t--)e[t]=e[t-1];e[t]=[r,s,f]},n.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return n.d(a,{a}),a},n.d=(e,a)=>{for(var r in a)n.o(a,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={121:0};n.O.j=s=>0===e[s];var a=(s,f)=>{var l,c,[t,u,o]=f,v=0;if(t.some(p=>0!==e[p])){for(l in u)n.o(u,l)&&(n.m[l]=u[l]);if(o)var i=o(n)}for(s&&s(f);v<t.length;v++)n.o(e,c=t[v])&&e[c]&&e[c][0](),e[c]=0;return n.O(i)},r=self.webpackChunkinsight_search=self.webpackChunkinsight_search||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkinsight_search=self.webpackChunkinsight_search||[]).push([[461],{4050:(o,l,t)=>{t(9281),t(9246),t(8881),t(9339),t(1308),t(2696),t(9187),t(8840),t(5913),t(5666),t(4088),t(5257),t(1502),t(7655),t(6935)},6935:()=>{const o=globalThis;function l(S){return(o.__Zone_symbol_prefix||"__zone_symbol__")+S}const n=Object.getOwnPropertyDescriptor,e=Object.defineProperty,a=Object.getPrototypeOf,s=Object.create,u=Array.prototype.slice,i="addEventListener",f="removeEventListener",v=l(i),c=l(f),d="true",h="false",p=l("");function y(S,I){return Zone.current.wrap(S,I)}function g(S,I,G,C,W){return Zone.current.scheduleMacroTask(S,I,G,C,W)}const E=l,P=typeof window<"u",O=P?window:void 0,m=P&&O||globalThis,R="removeAttribute";function x(S,I){for(let G=S.length-1;G>=0;G--)"function"==typeof S[G]&&(S[G]=y(S[G],I+"_"+G));return S}function D(S){return!S||!1!==S.writable&&!("function"==typeof S.get&&typeof S.set>"u")}const F=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,A=!("nw"in m)&&typeof m.process<"u"&&"[object process]"===m.process.toString(),N=!A&&!F&&!(!P||!O.HTMLElement),$=typeof m.process<"u"&&"[object process]"===m.process.toString()&&!F&&!(!P||!O.HTMLElement),B={},b=E("enable_beforeunload"),U=function(S){if(!(S=S||m.event))return;let I=B[S.type];I||(I=B[S.type]=E("ON_PROPERTY"+S.type));const G=this||S.target||m,C=G[I];let W;return N&&G===O&&"error"===S.type?(W=C&&C.call(this,S.message,S.filename,S.lineno,S.colno,S.error),!0===W&&S.preventDefault()):(W=C&&C.apply(this,arguments),"beforeunload"===S.type&&m[b]&&"string"==typeof W?S.returnValue=W:null!=W&&!W&&S.preventDefault()),W};function K(S,I,G){let C=n(S,I);if(!C&&G&&n(G,I)&&(C={enumerable:!0,configurable:!0}),!C||!C.configurable)return;const W=E("on"+I+"patched");if(S.hasOwnProperty(W)&&S[W])return;delete C.writable,delete C.value;const X=C.get,nt=C.set,et=I.slice(2);let st=B[et];st||(st=B[et]=E("ON_PROPERTY"+et)),C.set=function(pt){let tt=this;!tt&&S===m&&(tt=m),tt&&("function"==typeof tt[st]&&tt.removeEventListener(et,U),nt&&nt.call(tt,null),tt[st]=pt,"function"==typeof pt&&tt.addEventListener(et,U,!1))},C.get=function(){let pt=this;if(!pt&&S===m&&(pt=m),!pt)return null;const tt=pt[st];if(tt)return tt;if(X){let ht=X.call(this);if(ht)return C.set.call(this,ht),"function"==typeof pt[R]&&pt.removeAttribute(I),ht}return null},e(S,I,C),S[W]=!0}function H(S,I,G){if(I)for(let C=0;C<I.length;C++)K(S,"on"+I[C],G);else{const C=[];for(const W in S)"on"==W.slice(0,2)&&C.push(W);for(let W=0;W<C.length;W++)K(S,C[W],G)}}const V=E("originalInstance");function J(S){const I=m[S];if(!I)return;m[E(S)]=I,m[S]=function(){const W=x(arguments,S);switch(W.length){case 0:this[V]=new I;break;case 1:this[V]=new I(W[0]);break;case 2:this[V]=new I(W[0],W[1]);break;case 3:this[V]=new I(W[0],W[1],W[2]);break;case 4:this[V]=new I(W[0],W[1],W[2],W[3]);break;default:throw new Error("Arg list too long.")}},_(m[S],I);const G=new I(function(){});let C;for(C in G)"XMLHttpRequest"===S&&"responseBlob"===C||function(W){"function"==typeof G[W]?m[S].prototype[W]=function(){return this[V][W].apply(this[V],arguments)}:e(m[S].prototype,W,{set:function(X){"function"==typeof X?(this[V][W]=y(X,S+"."+W),_(this[V][W],X)):this[V][W]=X},get:function(){return this[V][W]}})}(C);for(C in I)"prototype"!==C&&I.hasOwnProperty(C)&&(m[S][C]=I[C])}function w(S,I,G){let C=S;for(;C&&!C.hasOwnProperty(I);)C=a(C);!C&&S[I]&&(C=S);const W=E(I);let X=null;if(C&&(!(X=C[W])||!C.hasOwnProperty(W))&&(X=C[W]=C[I],D(C&&n(C,I)))){const et=G(X,W,I);C[I]=function(){return et(this,arguments)},_(C[I],X)}return X}function z(S,I,G){let C=null;function W(X){const nt=X.data;return nt.args[nt.cbIdx]=function(){X.invoke.apply(this,arguments)},C.apply(nt.target,nt.args),X}C=w(S,I,X=>function(nt,et){const st=G(nt,et);return st.cbIdx>=0&&"function"==typeof et[st.cbIdx]?g(st.name,et[st.cbIdx],st,W):X.apply(nt,et)})}function _(S,I){S[E("OriginalDelegate")]=I}let q=!1,dt=!1;function xt(){if(q)return dt;q=!0;try{const S=O.navigator.userAgent;(-1!==S.indexOf("MSIE ")||-1!==S.indexOf("Trident/")||-1!==S.indexOf("Edge/"))&&(dt=!0)}catch{}return dt}function Wt(S){return"function"==typeof S}function wt(S){return"number"==typeof S}let jt=!1;if(typeof window<"u")try{const S=Object.defineProperty({},"passive",{get:function(){jt=!0}});window.addEventListener("test",S,S),window.removeEventListener("test",S,S)}catch{jt=!1}const Dt={useG:!0},ft={},kt={},zt=new RegExp("^"+p+"(\\w+)(true|false)$"),Zt=E("propagationStopped");function Vt(S,I){const G=(I?I(S):S)+h,C=(I?I(S):S)+d,W=p+G,X=p+C;ft[S]={},ft[S][h]=W,ft[S][d]=X}function qt(S,I,G,C){const W=C&&C.add||i,X=C&&C.rm||f,nt=C&&C.listeners||"eventListeners",et=C&&C.rmAll||"removeAllListeners",st=E(W),pt="."+W+":",tt="prependListener",ht="."+tt+":",Ct=function(it,k,Nt){if(it.isRemoved)return;const Lt=it.callback;let Qt;"object"==typeof Lt&&Lt.handleEvent&&(it.callback=ot=>Lt.handleEvent(ot),it.originalDelegate=Lt);try{it.invoke(it,k,[Nt])}catch(ot){Qt=ot}const Bt=it.options;return Bt&&"object"==typeof Bt&&Bt.once&&k[X].call(k,Nt.type,it.originalDelegate?it.originalDelegate:it.callback,Bt),Qt};function Ft(it,k,Nt){if(!(k=k||S.event))return;const Lt=it||k.target||S,Qt=Lt[ft[k.type][Nt?d:h]];if(Qt){const Bt=[];if(1===Qt.length){const ot=Ct(Qt[0],Lt,k);ot&&Bt.push(ot)}else{const ot=Qt.slice();for(let Ht=0;Ht<ot.length&&(!k||!0!==k[Zt]);Ht++){const St=Ct(ot[Ht],Lt,k);St&&Bt.push(St)}}if(1===Bt.length)throw Bt[0];for(let ot=0;ot<Bt.length;ot++){const Ht=Bt[ot];I.nativeScheduleMicroTask(()=>{throw Ht})}}}const Kt=function(it){return Ft(this,it,!1)},tr=function(it){return Ft(this,it,!0)};function rr(it,k){if(!it)return!1;let Nt=!0;k&&void 0!==k.useG&&(Nt=k.useG);const Lt=k&&k.vh;let Qt=!0;k&&void 0!==k.chkDup&&(Qt=k.chkDup);let Bt=!1;k&&void 0!==k.rt&&(Bt=k.rt);let ot=it;for(;ot&&!ot.hasOwnProperty(W);)ot=a(ot);if(!ot&&it[W]&&(ot=it),!ot||ot[st])return!1;const Ht=k&&k.eventNameToString,St={},gt=ot[st]=ot[W],vt=ot[E(X)]=ot[X],Et=ot[E(nt)]=ot[nt],nr=ot[E(et)]=ot[et];let Yt;k&&k.prepend&&(Yt=ot[E(k.prepend)]=ot[k.prepend]);const Xt=Nt?function(L){if(!St.isExisting)return gt.call(St.target,St.eventName,St.capture?tr:Kt,St.options)}:function(L){return gt.call(St.target,St.eventName,L.invoke,St.options)},Mt=Nt?function(L){if(!L.isRemoved){const Y=ft[L.eventName];let lt;Y&&(lt=Y[L.capture?d:h]);const yt=lt&&L.target[lt];if(yt)for(let at=0;at<yt.length;at++)if(yt[at]===L){yt.splice(at,1),L.isRemoved=!0,L.removeAbortListener&&(L.removeAbortListener(),L.removeAbortListener=null),0===yt.length&&(L.allRemoved=!0,L.target[lt]=null);break}}if(L.allRemoved)return vt.call(L.target,L.eventName,L.capture?tr:Kt,L.options)}:function(L){return vt.call(L.target,L.eventName,L.invoke,L.options)},fr=k&&k.diff?k.diff:function(L,Y){const lt=typeof Y;return"function"===lt&&L.callback===Y||"object"===lt&&L.originalDelegate===Y},cr=Zone[E("UNPATCHED_EVENTS")],ur=S[E("PASSIVE_EVENTS")],Z=function(L,Y,lt,yt,at=!1,Tt=!1){return function(){const Rt=this||S;let Pt=arguments[0];k&&k.transferEventName&&(Pt=k.transferEventName(Pt));let Ut=arguments[1];if(!Ut)return L.apply(this,arguments);if(A&&"uncaughtException"===Pt)return L.apply(this,arguments);let Gt=!1;if("function"!=typeof Ut){if(!Ut.handleEvent)return L.apply(this,arguments);Gt=!0}if(Lt&&!Lt(L,Ut,Rt,arguments))return;const hr=jt&&!!ur&&-1!==ur.indexOf(Pt),lr=function Q(L){if("object"==typeof L&&null!==L){const Y={...L};return L.signal&&(Y.signal=L.signal),Y}return L}(function Ot(L,Y){return!jt&&"object"==typeof L&&L?!!L.capture:jt&&Y?"boolean"==typeof L?{capture:L,passive:!0}:L?"object"==typeof L&&!1!==L.passive?{...L,passive:!0}:L:{passive:!0}:L}(arguments[2],hr)),Er=lr?.signal;if(Er?.aborted)return;if(cr)for(let vr=0;vr<cr.length;vr++)if(Pt===cr[vr])return hr?L.call(Rt,Pt,Ut,lr):L.apply(this,arguments);const Mr=!!lr&&("boolean"==typeof lr||lr.capture),Nr=!(!lr||"object"!=typeof lr)&&lr.once,$r=Zone.current;let Dr=ft[Pt];Dr||(Vt(Pt,Ht),Dr=ft[Pt]);const jr=Dr[Mr?d:h];let Cr,mr=Rt[jr],Fr=!1;if(mr){if(Fr=!0,Qt)for(let vr=0;vr<mr.length;vr++)if(fr(mr[vr],Ut))return}else mr=Rt[jr]=[];const Lr=Rt.constructor.name,br=kt[Lr];br&&(Cr=br[Pt]),Cr||(Cr=Lr+Y+(Ht?Ht(Pt):Pt)),St.options=lr,Nr&&(St.options.once=!1),St.target=Rt,St.capture=Mr,St.eventName=Pt,St.isExisting=Fr;const Tr=Nt?Dt:void 0;Tr&&(Tr.taskData=St),Er&&(St.options.signal=void 0);const ir=$r.scheduleEventTask(Cr,Ut,Tr,lt,yt);if(Er){St.options.signal=Er;const vr=()=>ir.zone.cancelTask(ir);L.call(Er,"abort",vr,{once:!0}),ir.removeAbortListener=()=>Er.removeEventListener("abort",vr)}return St.target=null,Tr&&(Tr.taskData=null),Nr&&(St.options.once=!0),!jt&&"boolean"==typeof ir.options||(ir.options=lr),ir.target=Rt,ir.capture=Mr,ir.eventName=Pt,Gt&&(ir.originalDelegate=Ut),Tt?mr.unshift(ir):mr.push(ir),at?Rt:void 0}};return ot[W]=Z(gt,pt,Xt,Mt,Bt),Yt&&(ot[tt]=Z(Yt,ht,function(L){return Yt.call(St.target,St.eventName,L.invoke,St.options)},Mt,Bt,!0)),ot[X]=function(){const L=this||S;let Y=arguments[0];k&&k.transferEventName&&(Y=k.transferEventName(Y));const lt=arguments[2],yt=!!lt&&("boolean"==typeof lt||lt.capture),at=arguments[1];if(!at)return vt.apply(this,arguments);if(Lt&&!Lt(vt,at,L,arguments))return;const Tt=ft[Y];let Rt;Tt&&(Rt=Tt[yt?d:h]);const Pt=Rt&&L[Rt];if(Pt)for(let Ut=0;Ut<Pt.length;Ut++){const Gt=Pt[Ut];if(fr(Gt,at))return Pt.splice(Ut,1),Gt.isRemoved=!0,0!==Pt.length||(Gt.allRemoved=!0,L[Rt]=null,yt||"string"!=typeof Y)||(L[p+"ON_PROPERTY"+Y]=null),Gt.zone.cancelTask(Gt),Bt?L:void 0}return vt.apply(this,arguments)},ot[nt]=function(){const L=this||S;let Y=arguments[0];k&&k.transferEventName&&(Y=k.transferEventName(Y));const lt=[],yt=er(L,Ht?Ht(Y):Y);for(let at=0;at<yt.length;at++){const Tt=yt[at];lt.push(Tt.originalDelegate?Tt.originalDelegate:Tt.callback)}return lt},ot[et]=function(){const L=this||S;let Y=arguments[0];if(Y){k&&k.transferEventName&&(Y=k.transferEventName(Y));const lt=ft[Y];if(lt){const Tt=L[lt[h]],Rt=L[lt[d]];if(Tt){const Pt=Tt.slice();for(let Ut=0;Ut<Pt.length;Ut++){const Gt=Pt[Ut];this[X].call(this,Y,Gt.originalDelegate?Gt.originalDelegate:Gt.callback,Gt.options)}}if(Rt){const Pt=Rt.slice();for(let Ut=0;Ut<Pt.length;Ut++){const Gt=Pt[Ut];this[X].call(this,Y,Gt.originalDelegate?Gt.originalDelegate:Gt.callback,Gt.options)}}}}else{const lt=Object.keys(L);for(let yt=0;yt<lt.length;yt++){const Tt=zt.exec(lt[yt]);let Rt=Tt&&Tt[1];Rt&&"removeListener"!==Rt&&this[et].call(this,Rt)}this[et].call(this,"removeListener")}if(Bt)return this},_(ot[W],gt),_(ot[X],vt),nr&&_(ot[et],nr),Et&&_(ot[nt],Et),!0}let Jt=[];for(let it=0;it<G.length;it++)Jt[it]=rr(G[it],C);return Jt}function er(S,I){if(!I){const X=[];for(let nt in S){const et=zt.exec(nt);let st=et&&et[1];if(st&&(!I||st===I)){const pt=S[nt];if(pt)for(let tt=0;tt<pt.length;tt++)X.push(pt[tt])}}return X}let G=ft[I];G||(Vt(I),G=ft[I]);const C=S[G[h]],W=S[G[d]];return C?W?C.concat(W):C.slice():W?W.slice():[]}function _t(S,I){const G=S.Event;G&&G.prototype&&I.patchMethod(G.prototype,"stopImmediatePropagation",C=>function(W,X){W[Zt]=!0,C&&C.apply(W,X)})}const or=E("zoneTask");function ar(S,I,G,C){let W=null,X=null;G+=C;const nt={};function et(pt){const tt=pt.data;tt.args[0]=function(){return pt.invoke.apply(this,arguments)};const ht=W.apply(S,tt.args);return wt(ht)?tt.handleId=ht:(tt.handle=ht,tt.isRefreshable=Wt(ht.refresh)),pt}function st(pt){const{handle:tt,handleId:ht}=pt.data;return X.call(S,tt??ht)}W=w(S,I+=C,pt=>function(tt,ht){if(Wt(ht[0])){const Ct={isRefreshable:!1,isPeriodic:"Interval"===C,delay:"Timeout"===C||"Interval"===C?ht[1]||0:void 0,args:ht},Ft=ht[0];ht[0]=function(){try{return Ft.apply(this,arguments)}finally{const{handle:Nt,handleId:Lt,isPeriodic:Qt,isRefreshable:Bt}=Ct;!Qt&&!Bt&&(Lt?delete nt[Lt]:Nt&&(Nt[or]=null))}};const Kt=g(I,ht[0],Ct,et,st);if(!Kt)return Kt;const{handleId:tr,handle:rr,isRefreshable:Jt,isPeriodic:it}=Kt.data;if(tr)nt[tr]=Kt;else if(rr&&(rr[or]=Kt,Jt&&!it)){const k=rr.refresh;rr.refresh=function(){const{zone:Nt,state:Lt}=Kt;return"notScheduled"===Lt?(Kt._state="scheduled",Nt._updateTaskCount(Kt,1)):"running"===Lt&&(Kt._state="scheduling"),k.call(this)}}return rr??tr??Kt}return pt.apply(S,ht)}),X=w(S,G,pt=>function(tt,ht){const Ct=ht[0];let Ft;wt(Ct)?(Ft=nt[Ct],delete nt[Ct]):(Ft=Ct?.[or],Ft?Ct[or]=null:Ft=Ct),Ft?.type?Ft.cancelFn&&Ft.zone.cancelTask(Ft):pt.apply(S,ht)})}function pr(S,I,G){if(!G||0===G.length)return I;const C=G.filter(X=>X.target===S);if(!C||0===C.length)return I;const W=C[0].ignoreProperties;return I.filter(X=>-1===W.indexOf(X))}function gr(S,I,G,C){S&&H(S,pr(S,I,G),C)}function yr(S){return Object.getOwnPropertyNames(S).filter(I=>I.startsWith("on")&&I.length>2).map(I=>I.substring(2))}function Pr(S,I,G,C,W){const X=Zone.__symbol__(C);if(I[X])return;const nt=I[X]=I[C];I[C]=function(et,st,pt){return st&&st.prototype&&W.forEach(function(tt){const ht=`${G}.${C}::`+tt,Ct=st.prototype;try{if(Ct.hasOwnProperty(tt)){const Ft=S.ObjectGetOwnPropertyDescriptor(Ct,tt);Ft&&Ft.value?(Ft.value=S.wrapWithCurrentZone(Ft.value,ht),S._redefineProperty(st.prototype,tt,Ft)):Ct[tt]&&(Ct[tt]=S.wrapWithCurrentZone(Ct[tt],ht))}else Ct[tt]&&(Ct[tt]=S.wrapWithCurrentZone(Ct[tt],ht))}catch{}}),nt.call(I,et,st,pt)},S.attachOriginToPatched(I[C],nt)}const At=function r(){const S=globalThis,I=!0===S[l("forceDuplicateZoneCheck")];if(S.Zone&&(I||"function"!=typeof S.Zone.__symbol__))throw new Error("Zone already loaded.");return S.Zone??=function t(){const S=o.performance;function I(Ot){S&&S.mark&&S.mark(Ot)}function G(Ot,rt){S&&S.measure&&S.measure(Ot,rt)}I("Zone");let C=(()=>{class Ot{static#t=this.__symbol__=l;static assertZonePatched(){if(o.Promise!==St.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let M=Ot.current;for(;M.parent;)M=M.parent;return M}static get current(){return vt.zone}static get currentTask(){return Et}static __load_patch(M,j,ut=!1){if(St.hasOwnProperty(M)){const ct=!0===o[l("forceDuplicateZoneCheck")];if(!ut&&ct)throw Error("Already loaded patch: "+M)}else if(!o["__Zone_disable_"+M]){const ct="Zone:"+M;I(ct),St[M]=j(o,Ot,gt),G(ct,ct)}}get parent(){return this._parent}get name(){return this._name}constructor(M,j){this._parent=M,this._name=j?j.name||"unnamed":"<root>",this._properties=j&&j.properties||{},this._zoneDelegate=new X(this,this._parent&&this._parent._zoneDelegate,j)}get(M){const j=this.getZoneWith(M);if(j)return j._properties[M]}getZoneWith(M){let j=this;for(;j;){if(j._properties.hasOwnProperty(M))return j;j=j._parent}return null}fork(M){if(!M)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,M)}wrap(M,j){if("function"!=typeof M)throw new Error("Expecting function got: "+M);const ut=this._zoneDelegate.intercept(this,M,j),ct=this;return function(){return ct.runGuarded(ut,this,arguments,j)}}run(M,j,ut,ct){vt={parent:vt,zone:this};try{return this._zoneDelegate.invoke(this,M,j,ut,ct)}finally{vt=vt.parent}}runGuarded(M,j=null,ut,ct){vt={parent:vt,zone:this};try{try{return this._zoneDelegate.invoke(this,M,j,ut,ct)}catch(Xt){if(this._zoneDelegate.handleError(this,Xt))throw Xt}}finally{vt=vt.parent}}runTask(M,j,ut){if(M.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(M.zone||rr).name+"; Execution: "+this.name+")");const ct=M,{type:Xt,data:{isPeriodic:Mt=!1,isRefreshable:dr=!1}={}}=M;if(M.state===Jt&&(Xt===Ht||Xt===ot))return;const fr=M.state!=Nt;fr&&ct._transitionTo(Nt,k);const cr=Et;Et=ct,vt={parent:vt,zone:this};try{Xt==ot&&M.data&&!Mt&&!dr&&(M.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ct,j,ut)}catch(ur){if(this._zoneDelegate.handleError(this,ur))throw ur}}finally{const ur=M.state;if(ur!==Jt&&ur!==Qt)if(Xt==Ht||Mt||dr&&ur===it)fr&&ct._transitionTo(k,Nt,it);else{const Q=ct._zoneDelegates;this._updateTaskCount(ct,-1),fr&&ct._transitionTo(Jt,Nt,Jt),dr&&(ct._zoneDelegates=Q)}vt=vt.parent,Et=cr}}scheduleTask(M){if(M.zone&&M.zone!==this){let ut=this;for(;ut;){if(ut===M.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${M.zone.name}`);ut=ut.parent}}M._transitionTo(it,Jt);const j=[];M._zoneDelegates=j,M._zone=this;try{M=this._zoneDelegate.scheduleTask(this,M)}catch(ut){throw M._transitionTo(Qt,it,Jt),this._zoneDelegate.handleError(this,ut),ut}return M._zoneDelegates===j&&this._updateTaskCount(M,1),M.state==it&&M._transitionTo(k,it),M}scheduleMicroTask(M,j,ut,ct){return this.scheduleTask(new nt(Bt,M,j,ut,ct,void 0))}scheduleMacroTask(M,j,ut,ct,Xt){return this.scheduleTask(new nt(ot,M,j,ut,ct,Xt))}scheduleEventTask(M,j,ut,ct,Xt){return this.scheduleTask(new nt(Ht,M,j,ut,ct,Xt))}cancelTask(M){if(M.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(M.zone||rr).name+"; Execution: "+this.name+")");if(M.state===k||M.state===Nt){M._transitionTo(Lt,k,Nt);try{this._zoneDelegate.cancelTask(this,M)}catch(j){throw M._transitionTo(Qt,Lt),this._zoneDelegate.handleError(this,j),j}return this._updateTaskCount(M,-1),M._transitionTo(Jt,Lt),M.runCount=-1,M}}_updateTaskCount(M,j){const ut=M._zoneDelegates;-1==j&&(M._zoneDelegates=null);for(let ct=0;ct<ut.length;ct++)ut[ct]._updateTaskCount(M.type,j)}}return Ot})();const W={name:"",onHasTask:(Ot,rt,M,j)=>Ot.hasTask(M,j),onScheduleTask:(Ot,rt,M,j)=>Ot.scheduleTask(M,j),onInvokeTask:(Ot,rt,M,j,ut,ct)=>Ot.invokeTask(M,j,ut,ct),onCancelTask:(Ot,rt,M,j)=>Ot.cancelTask(M,j)};class X{get zone(){return this._zone}constructor(rt,M,j){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=rt,this._parentDelegate=M,this._forkZS=j&&(j&&j.onFork?j:M._forkZS),this._forkDlgt=j&&(j.onFork?M:M._forkDlgt),this._forkCurrZone=j&&(j.onFork?this._zone:M._forkCurrZone),this._interceptZS=j&&(j.onIntercept?j:M._interceptZS),this._interceptDlgt=j&&(j.onIntercept?M:M._interceptDlgt),this._interceptCurrZone=j&&(j.onIntercept?this._zone:M._interceptCurrZone),this._invokeZS=j&&(j.onInvoke?j:M._invokeZS),this._invokeDlgt=j&&(j.onInvoke?M:M._invokeDlgt),this._invokeCurrZone=j&&(j.onInvoke?this._zone:M._invokeCurrZone),this._handleErrorZS=j&&(j.onHandleError?j:M._handleErrorZS),this._handleErrorDlgt=j&&(j.onHandleError?M:M._handleErrorDlgt),this._handleErrorCurrZone=j&&(j.onHandleError?this._zone:M._handleErrorCurrZone),this._scheduleTaskZS=j&&(j.onScheduleTask?j:M._scheduleTaskZS),this._scheduleTaskDlgt=j&&(j.onScheduleTask?M:M._scheduleTaskDlgt),this._scheduleTaskCurrZone=j&&(j.onScheduleTask?this._zone:M._scheduleTaskCurrZone),this._invokeTaskZS=j&&(j.onInvokeTask?j:M._invokeTaskZS),this._invokeTaskDlgt=j&&(j.onInvokeTask?M:M._invokeTaskDlgt),this._invokeTaskCurrZone=j&&(j.onInvokeTask?this._zone:M._invokeTaskCurrZone),this._cancelTaskZS=j&&(j.onCancelTask?j:M._cancelTaskZS),this._cancelTaskDlgt=j&&(j.onCancelTask?M:M._cancelTaskDlgt),this._cancelTaskCurrZone=j&&(j.onCancelTask?this._zone:M._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const ut=j&&j.onHasTask;(ut||M&&M._hasTaskZS)&&(this._hasTaskZS=ut?j:W,this._hasTaskDlgt=M,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,j.onScheduleTask||(this._scheduleTaskZS=W,this._scheduleTaskDlgt=M,this._scheduleTaskCurrZone=this._zone),j.onInvokeTask||(this._invokeTaskZS=W,this._invokeTaskDlgt=M,this._invokeTaskCurrZone=this._zone),j.onCancelTask||(this._cancelTaskZS=W,this._cancelTaskDlgt=M,this._cancelTaskCurrZone=this._zone))}fork(rt,M){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,rt,M):new C(rt,M)}intercept(rt,M,j){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,rt,M,j):M}invoke(rt,M,j,ut,ct){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,rt,M,j,ut,ct):M.apply(j,ut)}handleError(rt,M){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,rt,M)}scheduleTask(rt,M){let j=M;if(this._scheduleTaskZS)this._hasTaskZS&&j._zoneDelegates.push(this._hasTaskDlgtOwner),j=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,rt,M),j||(j=M);else if(M.scheduleFn)M.scheduleFn(M);else{if(M.type!=Bt)throw new Error("Task is missing scheduleFn.");Kt(M)}return j}invokeTask(rt,M,j,ut){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,rt,M,j,ut):M.callback.apply(j,ut)}cancelTask(rt,M){let j;if(this._cancelTaskZS)j=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,rt,M);else{if(!M.cancelFn)throw Error("Task is not cancelable");j=M.cancelFn(M)}return j}hasTask(rt,M){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,rt,M)}catch(j){this.handleError(rt,j)}}_updateTaskCount(rt,M){const j=this._taskCounts,ut=j[rt],ct=j[rt]=ut+M;if(ct<0)throw new Error("More tasks executed then were scheduled.");0!=ut&&0!=ct||this.hasTask(this._zone,{microTask:j.microTask>0,macroTask:j.macroTask>0,eventTask:j.eventTask>0,change:rt})}}class nt{constructor(rt,M,j,ut,ct,Xt){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=rt,this.source=M,this.data=ut,this.scheduleFn=ct,this.cancelFn=Xt,!j)throw new Error("callback is not defined");this.callback=j;const Mt=this;this.invoke=rt===Ht&&ut&&ut.useG?nt.invokeTask:function(){return nt.invokeTask.call(o,Mt,this,arguments)}}static invokeTask(rt,M,j){rt||(rt=this),nr++;try{return rt.runCount++,rt.zone.runTask(rt,M,j)}finally{1==nr&&tr(),nr--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Jt,it)}_transitionTo(rt,M,j){if(this._state!==M&&this._state!==j)throw new Error(`${this.type} '${this.source}': can not transition to '${rt}', expecting state '${M}'${j?" or '"+j+"'":""}, was '${this._state}'.`);this._state=rt,rt==Jt&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const et=l("setTimeout"),st=l("Promise"),pt=l("then");let Ct,tt=[],ht=!1;function Ft(Ot){if(Ct||o[st]&&(Ct=o[st].resolve(0)),Ct){let rt=Ct[pt];rt||(rt=Ct.then),rt.call(Ct,Ot)}else o[et](Ot,0)}function Kt(Ot){0===nr&&0===tt.length&&Ft(tr),Ot&&tt.push(Ot)}function tr(){if(!ht){for(ht=!0;tt.length;){const Ot=tt;tt=[];for(let rt=0;rt<Ot.length;rt++){const M=Ot[rt];try{M.zone.runTask(M,null,null)}catch(j){gt.onUnhandledError(j)}}}gt.microtaskDrainDone(),ht=!1}}const rr={name:"NO ZONE"},Jt="notScheduled",it="scheduling",k="scheduled",Nt="running",Lt="canceling",Qt="unknown",Bt="microTask",ot="macroTask",Ht="eventTask",St={},gt={symbol:l,currentZoneFrame:()=>vt,onUnhandledError:Yt,microtaskDrainDone:Yt,scheduleMicroTask:Kt,showUncaughtError:()=>!C[l("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Yt,patchMethod:()=>Yt,bindArguments:()=>[],patchThen:()=>Yt,patchMacroTask:()=>Yt,patchEventPrototype:()=>Yt,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Yt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Yt,wrapWithCurrentZone:()=>Yt,filterProperties:()=>[],attachOriginToPatched:()=>Yt,_redefineProperty:()=>Yt,patchCallbacks:()=>Yt,nativeScheduleMicroTask:Ft};let vt={parent:null,zone:new C(null,null)},Et=null,nr=0;function Yt(){}return G("Zone","Zone"),C}(),S.Zone}();(function It(S){(function Ir(S){S.__load_patch("ZoneAwarePromise",(I,G,C)=>{const W=Object.getOwnPropertyDescriptor,X=Object.defineProperty,et=C.symbol,st=[],pt=!1!==I[et("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],tt=et("Promise"),ht=et("then"),Ct="__creationTrace__";C.onUnhandledError=Q=>{if(C.showUncaughtError()){const Z=Q&&Q.rejection;Z?console.error("Unhandled Promise rejection:",Z instanceof Error?Z.message:Z,"; Zone:",Q.zone.name,"; Task:",Q.task&&Q.task.source,"; Value:",Z,Z instanceof Error?Z.stack:void 0):console.error(Q)}},C.microtaskDrainDone=()=>{for(;st.length;){const Q=st.shift();try{Q.zone.runGuarded(()=>{throw Q.throwOriginal?Q.rejection:Q})}catch(Z){Kt(Z)}}};const Ft=et("unhandledPromiseRejectionHandler");function Kt(Q){C.onUnhandledError(Q);try{const Z=G[Ft];"function"==typeof Z&&Z.call(this,Q)}catch{}}function tr(Q){return Q&&Q.then}function rr(Q){return Q}function Jt(Q){return Mt.reject(Q)}const it=et("state"),k=et("value"),Nt=et("finally"),Lt=et("parentPromiseValue"),Qt=et("parentPromiseState"),Bt="Promise.then",ot=null,Ht=!0,St=!1,gt=0;function vt(Q,Z){return L=>{try{Ot(Q,Z,L)}catch(Y){Ot(Q,!1,Y)}}}const Et=function(){let Q=!1;return function(L){return function(){Q||(Q=!0,L.apply(null,arguments))}}},nr="Promise resolved with itself",Yt=et("currentTaskTrace");function Ot(Q,Z,L){const Y=Et();if(Q===L)throw new TypeError(nr);if(Q[it]===ot){let lt=null;try{("object"==typeof L||"function"==typeof L)&&(lt=L&&L.then)}catch(yt){return Y(()=>{Ot(Q,!1,yt)})(),Q}if(Z!==St&&L instanceof Mt&&L.hasOwnProperty(it)&&L.hasOwnProperty(k)&&L[it]!==ot)M(L),Ot(Q,L[it],L[k]);else if(Z!==St&&"function"==typeof lt)try{lt.call(L,Y(vt(Q,Z)),Y(vt(Q,!1)))}catch(yt){Y(()=>{Ot(Q,!1,yt)})()}else{Q[it]=Z;const yt=Q[k];if(Q[k]=L,Q[Nt]===Nt&&Z===Ht&&(Q[it]=Q[Qt],Q[k]=Q[Lt]),Z===St&&L instanceof Error){const at=G.currentTask&&G.currentTask.data&&G.currentTask.data[Ct];at&&X(L,Yt,{configurable:!0,enumerable:!1,writable:!0,value:at})}for(let at=0;at<yt.length;)j(Q,yt[at++],yt[at++],yt[at++],yt[at++]);if(0==yt.length&&Z==St){Q[it]=gt;let at=L;try{throw new Error("Uncaught (in promise): "+function nt(Q){return Q&&Q.toString===Object.prototype.toString?(Q.constructor&&Q.constructor.name||"")+": "+JSON.stringify(Q):Q?Q.toString():Object.prototype.toString.call(Q)}(L)+(L&&L.stack?"\n"+L.stack:""))}catch(Tt){at=Tt}pt&&(at.throwOriginal=!0),at.rejection=L,at.promise=Q,at.zone=G.current,at.task=G.currentTask,st.push(at),C.scheduleMicroTask()}}}return Q}const rt=et("rejectionHandledHandler");function M(Q){if(Q[it]===gt){try{const Z=G[rt];Z&&"function"==typeof Z&&Z.call(this,{rejection:Q[k],promise:Q})}catch{}Q[it]=St;for(let Z=0;Z<st.length;Z++)Q===st[Z].promise&&st.splice(Z,1)}}function j(Q,Z,L,Y,lt){M(Q);const yt=Q[it],at=yt?"function"==typeof Y?Y:rr:"function"==typeof lt?lt:Jt;Z.scheduleMicroTask(Bt,()=>{try{const Tt=Q[k],Rt=!!L&&Nt===L[Nt];Rt&&(L[Lt]=Tt,L[Qt]=yt);const Pt=Z.run(at,void 0,Rt&&at!==Jt&&at!==rr?[]:[Tt]);Ot(L,!0,Pt)}catch(Tt){Ot(L,!1,Tt)}},L)}const ct=function(){},Xt=I.AggregateError;class Mt{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(Z){return Z instanceof Mt?Z:Ot(new this(null),Ht,Z)}static reject(Z){return Ot(new this(null),St,Z)}static withResolvers(){const Z={};return Z.promise=new Mt((L,Y)=>{Z.resolve=L,Z.reject=Y}),Z}static any(Z){if(!Z||"function"!=typeof Z[Symbol.iterator])return Promise.reject(new Xt([],"All promises were rejected"));const L=[];let Y=0;try{for(let at of Z)Y++,L.push(Mt.resolve(at))}catch{return Promise.reject(new Xt([],"All promises were rejected"))}if(0===Y)return Promise.reject(new Xt([],"All promises were rejected"));let lt=!1;const yt=[];return new Mt((at,Tt)=>{for(let Rt=0;Rt<L.length;Rt++)L[Rt].then(Pt=>{lt||(lt=!0,at(Pt))},Pt=>{yt.push(Pt),Y--,0===Y&&(lt=!0,Tt(new Xt(yt,"All promises were rejected")))})})}static race(Z){let L,Y,lt=new this((Tt,Rt)=>{L=Tt,Y=Rt});function yt(Tt){L(Tt)}function at(Tt){Y(Tt)}for(let Tt of Z)tr(Tt)||(Tt=this.resolve(Tt)),Tt.then(yt,at);return lt}static all(Z){return Mt.allWithCallback(Z)}static allSettled(Z){return(this&&this.prototype instanceof Mt?this:Mt).allWithCallback(Z,{thenCallback:Y=>({status:"fulfilled",value:Y}),errorCallback:Y=>({status:"rejected",reason:Y})})}static allWithCallback(Z,L){let Y,lt,yt=new this((Pt,Ut)=>{Y=Pt,lt=Ut}),at=2,Tt=0;const Rt=[];for(let Pt of Z){tr(Pt)||(Pt=this.resolve(Pt));const Ut=Tt;try{Pt.then(Gt=>{Rt[Ut]=L?L.thenCallback(Gt):Gt,at--,0===at&&Y(Rt)},Gt=>{L?(Rt[Ut]=L.errorCallback(Gt),at--,0===at&&Y(Rt)):lt(Gt)})}catch(Gt){lt(Gt)}at++,Tt++}return at-=2,0===at&&Y(Rt),yt}constructor(Z){const L=this;if(!(L instanceof Mt))throw new Error("Must be an instanceof Promise.");L[it]=ot,L[k]=[];try{const Y=Et();Z&&Z(Y(vt(L,Ht)),Y(vt(L,St)))}catch(Y){Ot(L,!1,Y)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Mt}then(Z,L){let Y=this.constructor?.[Symbol.species];(!Y||"function"!=typeof Y)&&(Y=this.constructor||Mt);const lt=new Y(ct),yt=G.current;return this[it]==ot?this[k].push(yt,lt,Z,L):j(this,yt,lt,Z,L),lt}catch(Z){return this.then(null,Z)}finally(Z){let L=this.constructor?.[Symbol.species];(!L||"function"!=typeof L)&&(L=Mt);const Y=new L(ct);Y[Nt]=Nt;const lt=G.current;return this[it]==ot?this[k].push(lt,Y,Z,Z):j(this,lt,Y,Z,Z),Y}}Mt.resolve=Mt.resolve,Mt.reject=Mt.reject,Mt.race=Mt.race,Mt.all=Mt.all;const dr=I[tt]=I.Promise;I.Promise=Mt;const fr=et("thenPatched");function cr(Q){const Z=Q.prototype,L=W(Z,"then");if(L&&(!1===L.writable||!L.configurable))return;const Y=Z.then;Z[ht]=Y,Q.prototype.then=function(lt,yt){return new Mt((Tt,Rt)=>{Y.call(this,Tt,Rt)}).then(lt,yt)},Q[fr]=!0}return C.patchThen=cr,dr&&(cr(dr),w(I,"fetch",Q=>function ur(Q){return function(Z,L){let Y=Q.apply(Z,L);if(Y instanceof Mt)return Y;let lt=Y.constructor;return lt[fr]||cr(lt),Y}}(Q))),Promise[G.__symbol__("uncaughtPromiseErrors")]=st,Mt})})(S),function Rr(S){S.__load_patch("toString",I=>{const G=Function.prototype.toString,C=E("OriginalDelegate"),W=E("Promise"),X=E("Error"),nt=function(){if("function"==typeof this){const tt=this[C];if(tt)return"function"==typeof tt?G.call(tt):Object.prototype.toString.call(tt);if(this===Promise){const ht=I[W];if(ht)return G.call(ht)}if(this===Error){const ht=I[X];if(ht)return G.call(ht)}}return G.call(this)};nt[C]=G,Function.prototype.toString=nt;const et=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":et.call(this)}})}(S),function $t(S){S.__load_patch("util",(I,G,C)=>{const W=yr(I);C.patchOnProperties=H,C.patchMethod=w,C.bindArguments=x,C.patchMacroTask=z;const X=G.__symbol__("BLACK_LISTED_EVENTS"),nt=G.__symbol__("UNPATCHED_EVENTS");I[nt]&&(I[X]=I[nt]),I[X]&&(G[X]=G[nt]=I[X]),C.patchEventPrototype=_t,C.patchEventTarget=qt,C.isIEOrEdge=xt,C.ObjectDefineProperty=e,C.ObjectGetOwnPropertyDescriptor=n,C.ObjectCreate=s,C.ArraySlice=u,C.patchClass=J,C.wrapWithCurrentZone=y,C.filterProperties=pr,C.attachOriginToPatched=_,C._redefineProperty=Object.defineProperty,C.patchCallbacks=Pr,C.getGlobalObjects=()=>({globalSources:kt,zoneSymbolEventNames:ft,eventNames:W,isBrowser:N,isMix:$,isNode:A,TRUE_STR:d,FALSE_STR:h,ZONE_SYMBOL_PREFIX:p,ADD_EVENT_LISTENER_STR:i,REMOVE_EVENT_LISTENER_STR:f})})}(S)})(At),function Or(S){S.__load_patch("legacy",I=>{const G=I[S.__symbol__("legacyPatch")];G&&G()}),S.__load_patch("timers",I=>{const G="set",C="clear";ar(I,G,C,"Timeout"),ar(I,G,C,"Interval"),ar(I,G,C,"Immediate")}),S.__load_patch("requestAnimationFrame",I=>{ar(I,"request","cancel","AnimationFrame"),ar(I,"mozRequest","mozCancel","AnimationFrame"),ar(I,"webkitRequest","webkitCancel","AnimationFrame")}),S.__load_patch("blocking",(I,G)=>{const C=["alert","prompt","confirm"];for(let W=0;W<C.length;W++)w(I,C[W],(nt,et,st)=>function(pt,tt){return G.current.run(nt,I,tt,st)})}),S.__load_patch("EventTarget",(I,G,C)=>{(function Sr(S,I){I.patchEventPrototype(S,I)})(I,C),function xr(S,I){if(Zone[I.symbol("patchEventTarget")])return;const{eventNames:G,zoneSymbolEventNames:C,TRUE_STR:W,FALSE_STR:X,ZONE_SYMBOL_PREFIX:nt}=I.getGlobalObjects();for(let st=0;st<G.length;st++){const pt=G[st],Ct=nt+(pt+X),Ft=nt+(pt+W);C[pt]={},C[pt][X]=Ct,C[pt][W]=Ft}const et=S.EventTarget;et&&et.prototype&&I.patchEventTarget(S,I,[et&&et.prototype])}(I,C);const W=I.XMLHttpRequestEventTarget;W&&W.prototype&&C.patchEventTarget(I,C,[W.prototype])}),S.__load_patch("MutationObserver",(I,G,C)=>{J("MutationObserver"),J("WebKitMutationObserver")}),S.__load_patch("IntersectionObserver",(I,G,C)=>{J("IntersectionObserver")}),S.__load_patch("FileReader",(I,G,C)=>{J("FileReader")}),S.__load_patch("on_property",(I,G,C)=>{!function Ar(S,I){if(A&&!$||Zone[S.symbol("patchEvents")])return;const G=I.__Zone_ignore_on_properties;let C=[];if(N){const W=window;C=C.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const X=function mt(){try{const S=O.navigator.userAgent;if(-1!==S.indexOf("MSIE ")||-1!==S.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:W,ignoreProperties:["error"]}]:[];gr(W,yr(W),G&&G.concat(X),a(W))}C=C.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let W=0;W<C.length;W++){const X=I[C[W]];X&&X.prototype&&gr(X.prototype,yr(X.prototype),G)}}(C,I)}),S.__load_patch("customElements",(I,G,C)=>{!function sr(S,I){const{isBrowser:G,isMix:C}=I.getGlobalObjects();(G||C)&&S.customElements&&"customElements"in S&&I.patchCallbacks(I,S.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(I,C)}),S.__load_patch("XHR",(I,G)=>{!function pt(tt){const ht=tt.XMLHttpRequest;if(!ht)return;const Ct=ht.prototype;let Kt=Ct[v],tr=Ct[c];if(!Kt){const gt=tt.XMLHttpRequestEventTarget;if(gt){const vt=gt.prototype;Kt=vt[v],tr=vt[c]}}const rr="readystatechange",Jt="scheduled";function it(gt){const vt=gt.data,Et=vt.target;Et[nt]=!1,Et[st]=!1;const nr=Et[X];Kt||(Kt=Et[v],tr=Et[c]),nr&&tr.call(Et,rr,nr);const Yt=Et[X]=()=>{if(Et.readyState===Et.DONE)if(!vt.aborted&&Et[nt]&&gt.state===Jt){const rt=Et[G.__symbol__("loadfalse")];if(0!==Et.status&&rt&&rt.length>0){const M=gt.invoke;gt.invoke=function(){const j=Et[G.__symbol__("loadfalse")];for(let ut=0;ut<j.length;ut++)j[ut]===gt&&j.splice(ut,1);!vt.aborted&&gt.state===Jt&&M.call(gt)},rt.push(gt)}else gt.invoke()}else!vt.aborted&&!1===Et[nt]&&(Et[st]=!0)};return Kt.call(Et,rr,Yt),Et[C]||(Et[C]=gt),Ht.apply(Et,vt.args),Et[nt]=!0,gt}function k(){}function Nt(gt){const vt=gt.data;return vt.aborted=!0,St.apply(vt.target,vt.args)}const Lt=w(Ct,"open",()=>function(gt,vt){return gt[W]=0==vt[2],gt[et]=vt[1],Lt.apply(gt,vt)}),Bt=E("fetchTaskAborting"),ot=E("fetchTaskScheduling"),Ht=w(Ct,"send",()=>function(gt,vt){if(!0===G.current[ot]||gt[W])return Ht.apply(gt,vt);{const Et={target:gt,url:gt[et],isPeriodic:!1,args:vt,aborted:!1},nr=g("XMLHttpRequest.send",k,Et,it,Nt);gt&&!0===gt[st]&&!Et.aborted&&nr.state===Jt&&nr.invoke()}}),St=w(Ct,"abort",()=>function(gt,vt){const Et=function Ft(gt){return gt[C]}(gt);if(Et&&"string"==typeof Et.type){if(null==Et.cancelFn||Et.data&&Et.data.aborted)return;Et.zone.cancelTask(Et)}else if(!0===G.current[Bt])return St.apply(gt,vt)})}(I);const C=E("xhrTask"),W=E("xhrSync"),X=E("xhrListener"),nt=E("xhrScheduled"),et=E("xhrURL"),st=E("xhrErrorBeforeScheduled")}),S.__load_patch("geolocation",I=>{I.navigator&&I.navigator.geolocation&&function T(S,I){const G=S.constructor.name;for(let C=0;C<I.length;C++){const W=I[C],X=S[W];if(X){if(!D(n(S,W)))continue;S[W]=(et=>{const st=function(){return et.apply(this,x(arguments,G+"."+W))};return _(st,et),st})(X)}}}(I.navigator.geolocation,["getCurrentPosition","watchPosition"])}),S.__load_patch("PromiseRejectionEvent",(I,G)=>{function C(W){return function(X){er(I,W).forEach(et=>{const st=I.PromiseRejectionEvent;if(st){const pt=new st(W,{promise:X.promise,reason:X.rejection});et.invoke(pt)}})}}I.PromiseRejectionEvent&&(G[E("unhandledPromiseRejectionHandler")]=C("unhandledrejection"),G[E("rejectionHandledHandler")]=C("rejectionhandled"))}),S.__load_patch("queueMicrotask",(I,G,C)=>{!function bt(S,I){I.patchMethod(S,"queueMicrotask",G=>function(C,W){Zone.current.scheduleMicroTask("queueMicrotask",W[0])})}(I,C)})}(At)},5666:(o,l,t)=>{t(3418),t(4346),t(1051),t(8107),t(8706),t(6835),t(8431),t(3771),t(2008),t(113),t(8980),t(838),t(5832),t(6449),t(8350),t(1629),t(4423),t(5276),t(3792),t(8598),t(8921),t(2062),t(4114),t(2712),t(8863),t(4490),t(4782),t(5086),t(6910),t(7478),t(4554),t(9678),t(7145),t(1658),t(3514),t(237),t(3609),t(1558),t(6099),t(7764);var r=t(9167);o.exports=r.Array},5913:(o,l,t)=>{t(4080),t(9089),t(1191),t(3515),t(1688),t(739),t(3288),t(9572);var r=t(9167);o.exports=r.Date},8881:(o,l,t)=>{t(4170),t(2010),t(8957);var r=t(9167);o.exports=r.Function},5257:(o,l,t)=>{t(3792),t(6033),t(7072),t(6099),t(7764);var r=t(9167);o.exports=r.Map},9187:(o,l,t)=>{t(3153),t(2326),t(6389),t(4444),t(8085),t(7762),t(5070),t(605),t(9469),t(2152),t(5376),t(6624),t(1367),t(5914),t(8553),t(8690),t(479),t(761);var r=t(9167);o.exports=r.Math},2696:(o,l,t)=>{t(2892),t(5374),t(5428),t(2637),t(150),t(9149),t(4601),t(4435),t(7220),t(5843),t(2337),t(9868),t(630);var r=t(9167);o.exports=r.Number},9246:(o,l,t)=>{t(2675),t(9085),t(9904),t(4185),t(7945),t(5506),t(2811),t(3921),t(3851),t(1278),t(1480),t(875),t(7691),t(8347),t(9908),t(4052),t(4003),t(221),t(9432),t(3967),t(3548),t(3941),t(287),t(6034),t(6099),t(7427),t(7607),t(9220),t(7904),t(4731),t(479),t(5472);var r=t(9167);o.exports=r.Object},1308:(o,l,t)=>{t(8459);var r=t(9167);o.exports=r.parseFloat},9339:(o,l,t)=>{t(8940);var r=t(9167);o.exports=r.parseInt},4088:(o,l,t)=>{t(4864),t(8781),t(7465),t(7495),t(9479),t(7745),t(906),t(1761),t(5440),t(5746),t(744)},7655:(o,l,t)=>{t(3792),t(6099),t(1415),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(7764);var r=t(9167);o.exports=r.Set},8840:(o,l,t)=>{t(6099),t(7495),t(7337),t(5906),t(3860),t(7357),t(9449),t(1699),t(2043),t(1761),t(8543),t(5701),t(8156),t(2781),t(5440),t(9978),t(5746),t(744),t(1392),t(375),t(7438),t(2762),t(3359),t(9202),t(7764),t(9907),t(1898),t(5490),t(8126),t(4298),t(268),t(9546),t(781),t(778),t(9195),t(6276),t(8718),t(6308);var r=t(9167);o.exports=r.String},9281:(o,l,t)=>{t(8706),t(6099),t(2675),t(6412),t(9463),t(193),t(2168),t(2259),t(6964),t(3142),t(3237),t(1833),t(7947),t(1073),t(5700),t(8125),t(326),t(4731),t(479),t(5472);var r=t(9167);o.exports=r.Symbol},1502:(o,l,t)=>{t(3792),t(6099),t(3772);var r=t(9167);o.exports=r.WeakMap},9306:(o,l,t)=>{var r=t(4901),n=t(6823),e=TypeError;o.exports=function(a){if(r(a))return a;throw new e(n(a)+" is not a function")}},5548:(o,l,t)=>{var r=t(3517),n=t(6823),e=TypeError;o.exports=function(a){if(r(a))return a;throw new e(n(a)+" is not a constructor")}},3506:(o,l,t)=>{var r=t(3925),n=String,e=TypeError;o.exports=function(a){if(r(a))return a;throw new e("Can't set "+n(a)+" as a prototype")}},7080:(o,l,t)=>{var r=t(4402).has;o.exports=function(n){return r(n),n}},6469:(o,l,t)=>{var r=t(8227),n=t(2360),e=t(4913).f,a=r("unscopables"),s=Array.prototype;void 0===s[a]&&e(s,a,{configurable:!0,value:n(null)}),o.exports=function(u){s[a][u]=!0}},7829:(o,l,t)=>{var r=t(8183).charAt;o.exports=function(n,e,a){return e+(a?r(n,e).length:1)}},679:(o,l,t)=>{var r=t(1625),n=TypeError;o.exports=function(e,a){if(r(a,e))return e;throw new n("Incorrect invocation")}},8551:(o,l,t)=>{var r=t(34),n=String,e=TypeError;o.exports=function(a){if(r(a))return a;throw new e(n(a)+" is not an object")}},5652:(o,l,t)=>{var r=t(9039);o.exports=r(function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}})},7029:(o,l,t)=>{var r=t(8981),n=t(5610),e=t(6198),a=t(4606),s=Math.min;o.exports=[].copyWithin||function(i,f){var v=r(this),c=e(v),d=n(i,c),h=n(f,c),p=arguments.length>2?arguments[2]:void 0,y=s((void 0===p?c:n(p,c))-h,c-d),g=1;for(h<d&&d<h+y&&(g=-1,h+=y-1,d+=y-1);y-- >0;)h in v?v[d]=v[h]:a(v,d),d+=g,h+=g;return v}},4373:(o,l,t)=>{var r=t(8981),n=t(5610),e=t(6198);o.exports=function(s){for(var u=r(this),i=e(u),f=arguments.length,v=n(f>1?arguments[1]:void 0,i),c=f>2?arguments[2]:void 0,d=void 0===c?i:n(c,i);d>v;)u[v++]=s;return u}},235:(o,l,t)=>{var r=t(9213).forEach,e=t(4598)("forEach");o.exports=e?[].forEach:function(s){return r(this,s,arguments.length>1?arguments[1]:void 0)}},5370:(o,l,t)=>{var r=t(6198);o.exports=function(n,e,a){for(var s=0,u=arguments.length>2?a:r(e),i=new n(u);u>s;)i[s]=e[s++];return i}},7916:(o,l,t)=>{var r=t(6080),n=t(9565),e=t(8981),a=t(6319),s=t(4209),u=t(3517),i=t(6198),f=t(4659),v=t(81),c=t(851),d=Array;o.exports=function(p){var y=e(p),g=u(this),E=arguments.length,P=E>1?arguments[1]:void 0,O=void 0!==P;O&&(P=r(P,E>2?arguments[2]:void 0));var x,T,D,F,A,N,m=c(y),R=0;if(!m||this===d&&s(m))for(x=i(y),T=g?new this(x):d(x);x>R;R++)N=O?P(y[R],R):y[R],f(T,R,N);else for(T=g?new this:[],A=(F=v(y,m)).next;!(D=n(A,F)).done;R++)N=O?a(F,P,[D.value,R],!0):D.value,f(T,R,N);return T.length=R,T}},9617:(o,l,t)=>{var r=t(5397),n=t(5610),e=t(6198),a=function(s){return function(u,i,f){var v=r(u),c=e(v);if(0===c)return!s&&-1;var h,d=n(f,c);if(s&&i!=i){for(;c>d;)if((h=v[d++])!=h)return!0}else for(;c>d;d++)if((s||d in v)&&v[d]===i)return s||d||0;return!s&&-1}};o.exports={includes:a(!0),indexOf:a(!1)}},3839:(o,l,t)=>{var r=t(6080),n=t(7055),e=t(8981),a=t(6198),s=function(u){var i=1===u;return function(f,v,c){for(var g,d=e(f),h=n(d),p=a(h),y=r(v,c);p-- >0;)if(y(g=h[p],p,d))switch(u){case 0:return g;case 1:return p}return i?-1:void 0}};o.exports={findLast:s(0),findLastIndex:s(1)}},9213:(o,l,t)=>{var r=t(6080),n=t(9504),e=t(7055),a=t(8981),s=t(6198),u=t(1469),i=n([].push),f=function(v){var c=1===v,d=2===v,h=3===v,p=4===v,y=6===v,g=7===v,E=5===v||y;return function(P,O,m,R){for(var B,b,x=a(P),T=e(x),D=s(T),F=r(O,m),A=0,N=R||u,$=c?N(P,D):d||g?N(P,0):void 0;D>A;A++)if((E||A in T)&&(b=F(B=T[A],A,x),v))if(c)$[A]=b;else if(b)switch(v){case 3:return!0;case 5:return B;case 6:return A;case 2:i($,B)}else switch(v){case 4:return!1;case 7:i($,B)}return y?-1:h||p?p:$}};o.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},8379:(o,l,t)=>{var r=t(8745),n=t(5397),e=t(1291),a=t(6198),s=t(4598),u=Math.min,i=[].lastIndexOf,f=!!i&&1/[1].lastIndexOf(1,-0)<0,v=s("lastIndexOf");o.exports=f||!v?function(h){if(f)return r(i,this,arguments)||0;var p=n(this),y=a(p);if(0===y)return-1;var g=y-1;for(arguments.length>1&&(g=u(g,e(arguments[1]))),g<0&&(g=y+g);g>=0;g--)if(g in p&&p[g]===h)return g||0;return-1}:i},597:(o,l,t)=>{var r=t(9039),n=t(8227),e=t(9519),a=n("species");o.exports=function(s){return e>=51||!r(function(){var u=[];return(u.constructor={})[a]=function(){return{foo:1}},1!==u[s](Boolean).foo})}},4598:(o,l,t)=>{var r=t(9039);o.exports=function(n,e){var a=[][n];return!!a&&r(function(){a.call(null,e||function(){return 1},1)})}},926:(o,l,t)=>{var r=t(9306),n=t(8981),e=t(7055),a=t(6198),s=TypeError,u="Reduce of empty array with no initial value",i=function(f){return function(v,c,d,h){var p=n(v),y=e(p),g=a(p);if(r(c),0===g&&d<2)throw new s(u);var E=f?g-1:0,P=f?-1:1;if(d<2)for(;;){if(E in y){h=y[E],E+=P;break}if(E+=P,f?E<0:g<=E)throw new s(u)}for(;f?E>=0:g>E;E+=P)E in y&&(h=c(h,y[E],E,p));return h}};o.exports={left:i(!1),right:i(!0)}},4527:(o,l,t)=>{var r=t(3724),n=t(4376),e=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();o.exports=s?function(u,i){if(n(u)&&!a(u,"length").writable)throw new e("Cannot set read only .length");return u.length=i}:function(u,i){return u.length=i}},7680:(o,l,t)=>{var r=t(9504);o.exports=r([].slice)},4488:(o,l,t)=>{var r=t(7680),n=Math.floor,e=function(a,s){var u=a.length;if(u<8)for(var f,v,i=1;i<u;){for(v=i,f=a[i];v&&s(a[v-1],f)>0;)a[v]=a[--v];v!==i++&&(a[v]=f)}else for(var c=n(u/2),d=e(r(a,0,c),s),h=e(r(a,c),s),p=d.length,y=h.length,g=0,E=0;g<p||E<y;)a[g+E]=g<p&&E<y?s(d[g],h[E])<=0?d[g++]:h[E++]:g<p?d[g++]:h[E++];return a};o.exports=e},7433:(o,l,t)=>{var r=t(4376),n=t(3517),e=t(34),s=t(8227)("species"),u=Array;o.exports=function(i){var f;return r(i)&&(n(f=i.constructor)&&(f===u||r(f.prototype))||e(f)&&null===(f=f[s]))&&(f=void 0),void 0===f?u:f}},1469:(o,l,t)=>{var r=t(7433);o.exports=function(n,e){return new(r(n))(0===e?0:e)}},7628:(o,l,t)=>{var r=t(6198);o.exports=function(n,e){for(var a=r(n),s=new e(a),u=0;u<a;u++)s[u]=n[a-u-1];return s}},7547:(o,l,t)=>{var r=t(6198),n=t(1291),e=RangeError;o.exports=function(a,s,u,i){var f=r(a),v=n(u),c=v<0?f+v:v;if(c>=f||c<0)throw new e("Incorrect index");for(var d=new s(f),h=0;h<f;h++)d[h]=h===c?i:a[h];return d}},6319:(o,l,t)=>{var r=t(8551),n=t(9539);o.exports=function(e,a,s,u){try{return u?a(r(s)[0],s[1]):a(s)}catch(i){n(e,"throw",i)}}},4428:(o,l,t)=>{var n=t(8227)("iterator"),e=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){e=!0}};s[n]=function(){return this},Array.from(s,function(){throw 2})}catch{}o.exports=function(u,i){try{if(!i&&!e)return!1}catch{return!1}var f=!1;try{var v={};v[n]=function(){return{next:function(){return{done:f=!0}}}},u(v)}catch{}return f}},2195:(o,l,t)=>{var r=t(9504),n=r({}.toString),e=r("".slice);o.exports=function(a){return e(n(a),8,-1)}},6955:(o,l,t)=>{var r=t(2140),n=t(4901),e=t(2195),s=t(8227)("toStringTag"),u=Object,i="Arguments"===e(function(){return arguments}());o.exports=r?e:function(v){var c,d,h;return void 0===v?"Undefined":null===v?"Null":"string"==typeof(d=function(v,c){try{return v[c]}catch{}}(c=u(v),s))?d:i?e(c):"Object"===(h=e(c))&&n(c.callee)?"Arguments":h}},6938:(o,l,t)=>{var r=t(2360),n=t(2106),e=t(6279),a=t(6080),s=t(679),u=t(4117),i=t(2652),f=t(1088),v=t(2529),c=t(7633),d=t(3724),h=t(3451).fastKey,p=t(1181),y=p.set,g=p.getterFor;o.exports={getConstructor:function(E,P,O,m){var R=E(function(A,N){s(A,x),y(A,{type:P,index:r(null),first:null,last:null,size:0}),d||(A.size=0),u(N)||i(N,A[m],{that:A,AS_ENTRIES:O})}),x=R.prototype,T=g(P),D=function(A,N,$){var U,K,B=T(A),b=F(A,N);return b?b.value=$:(B.last=b={index:K=h(N,!0),key:N,value:$,previous:U=B.last,next:null,removed:!1},B.first||(B.first=b),U&&(U.next=b),d?B.size++:A.size++,"F"!==K&&(B.index[K]=b)),A},F=function(A,N){var b,$=T(A),B=h(N);if("F"!==B)return $.index[B];for(b=$.first;b;b=b.next)if(b.key===N)return b};return e(x,{clear:function(){for(var $=T(this),B=$.first;B;)B.removed=!0,B.previous&&(B.previous=B.previous.next=null),B=B.next;$.first=$.last=null,$.index=r(null),d?$.size=0:this.size=0},delete:function(A){var N=this,$=T(N),B=F(N,A);if(B){var b=B.next,U=B.previous;delete $.index[B.index],B.removed=!0,U&&(U.next=b),b&&(b.previous=U),$.first===B&&($.first=b),$.last===B&&($.last=U),d?$.size--:N.size--}return!!B},forEach:function(N){for(var b,$=T(this),B=a(N,arguments.length>1?arguments[1]:void 0);b=b?b.next:$.first;)for(B(b.value,b.key,this);b&&b.removed;)b=b.previous},has:function(N){return!!F(this,N)}}),e(x,O?{get:function(N){var $=F(this,N);return $&&$.value},set:function(N,$){return D(this,0===N?0:N,$)}}:{add:function(N){return D(this,N=0===N?0:N,N)}}),d&&n(x,"size",{configurable:!0,get:function(){return T(this).size}}),R},setStrong:function(E,P,O){var m=P+" Iterator",R=g(P),x=g(m);f(E,P,function(T,D){y(this,{type:m,target:T,state:R(T),kind:D,last:null})},function(){for(var T=x(this),D=T.kind,F=T.last;F&&F.removed;)F=F.previous;return T.target&&(T.last=F=F?F.next:T.state.first)?v("keys"===D?F.key:"values"===D?F.value:[F.key,F.value],!1):(T.target=null,v(void 0,!0))},O?"entries":"values",!O,!0),c(P)}}},4006:(o,l,t)=>{var r=t(9504),n=t(6279),e=t(3451).getWeakData,a=t(679),s=t(8551),u=t(4117),i=t(34),f=t(2652),v=t(9213),c=t(9297),d=t(1181),h=d.set,p=d.getterFor,y=v.find,g=v.findIndex,E=r([].splice),P=0,O=function(x){return x.frozen||(x.frozen=new m)},m=function(){this.entries=[]},R=function(x,T){return y(x.entries,function(D){return D[0]===T})};m.prototype={get:function(x){var T=R(this,x);if(T)return T[1]},has:function(x){return!!R(this,x)},set:function(x,T){var D=R(this,x);D?D[1]=T:this.entries.push([x,T])},delete:function(x){var T=g(this.entries,function(D){return D[0]===x});return~T&&E(this.entries,T,1),!!~T}},o.exports={getConstructor:function(x,T,D,F){var A=x(function(b,U){a(b,N),h(b,{type:T,id:P++,frozen:null}),u(U)||f(U,b[F],{that:b,AS_ENTRIES:D})}),N=A.prototype,$=p(T),B=function(b,U,K){var H=$(b),V=e(s(U),!0);return!0===V?O(H).set(U,K):V[H.id]=K,b};return n(N,{delete:function(b){var U=$(this);if(!i(b))return!1;var K=e(b);return!0===K?O(U).delete(b):K&&c(K,U.id)&&delete K[U.id]},has:function(U){var K=$(this);if(!i(U))return!1;var H=e(U);return!0===H?O(K).has(U):H&&c(H,K.id)}}),n(N,D?{get:function(U){var K=$(this);if(i(U)){var H=e(U);if(!0===H)return O(K).get(U);if(H)return H[K.id]}},set:function(U,K){return B(this,U,K)}}:{add:function(U){return B(this,U,!0)}}),A}}},6468:(o,l,t)=>{var r=t(6518),n=t(4576),e=t(9504),a=t(2796),s=t(6840),u=t(3451),i=t(2652),f=t(679),v=t(4901),c=t(4117),d=t(34),h=t(9039),p=t(4428),y=t(687),g=t(3167);o.exports=function(E,P,O){var m=-1!==E.indexOf("Map"),R=-1!==E.indexOf("Weak"),x=m?"set":"add",T=n[E],D=T&&T.prototype,F=T,A={},N=function(V){var J=e(D[V]);s(D,V,"add"===V?function(z){return J(this,0===z?0:z),this}:"delete"===V?function(w){return!(R&&!d(w))&&J(this,0===w?0:w)}:"get"===V?function(z){return R&&!d(z)?void 0:J(this,0===z?0:z)}:"has"===V?function(z){return!(R&&!d(z))&&J(this,0===z?0:z)}:function(z,_){return J(this,0===z?0:z,_),this})};if(a(E,!v(T)||!(R||D.forEach&&!h(function(){(new T).entries().next()}))))F=O.getConstructor(P,E,m,x),u.enable();else if(a(E,!0)){var B=new F,b=B[x](R?{}:-0,1)!==B,U=h(function(){B.has(1)}),K=p(function(V){new T(V)}),H=!R&&h(function(){for(var V=new T,J=5;J--;)V[x](J,J);return!V.has(-0)});K||((F=P(function(V,J){f(V,D);var w=g(new T,V,F);return c(J)||i(J,w[x],{that:w,AS_ENTRIES:m}),w})).prototype=D,D.constructor=F),(U||H)&&(N("delete"),N("has"),m&&N("get")),(H||b)&&N(x),R&&D.clear&&delete D.clear}return A[E]=F,r({global:!0,constructor:!0,forced:F!==T},A),y(F,E),R||O.setStrong(F,E,m),F}},7740:(o,l,t)=>{var r=t(9297),n=t(5031),e=t(7347),a=t(4913);o.exports=function(s,u,i){for(var f=n(u),v=a.f,c=e.f,d=0;d<f.length;d++){var h=f[d];!r(s,h)&&(!i||!r(i,h))&&v(s,h,c(u,h))}}},1436:(o,l,t)=>{var n=t(8227)("match");o.exports=function(e){var a=/./;try{"/./"[e](a)}catch{try{return a[n]=!1,"/./"[e](a)}catch{}}return!1}},2211:(o,l,t)=>{var r=t(9039);o.exports=!r(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},7240:(o,l,t)=>{var r=t(9504),n=t(7750),e=t(655),a=/"/g,s=r("".replace);o.exports=function(u,i,f,v){var c=e(n(u)),d="<"+i;return""!==f&&(d+=" "+f+'="'+s(e(v),a,"&quot;")+'"'),d+">"+c+"</"+i+">"}},2529:o=>{o.exports=function(l,t){return{value:l,done:t}}},6699:(o,l,t)=>{var r=t(3724),n=t(4913),e=t(6980);o.exports=r?function(a,s,u){return n.f(a,s,e(1,u))}:function(a,s,u){return a[s]=u,a}},6980:o=>{o.exports=function(l,t){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:t}}},4659:(o,l,t)=>{var r=t(3724),n=t(4913),e=t(6980);o.exports=function(a,s,u){r?n.f(a,s,e(0,u)):a[s]=u}},380:(o,l,t)=>{var r=t(9504),n=t(9039),e=t(533).start,a=RangeError,s=isFinite,u=Math.abs,i=Date.prototype,f=i.toISOString,v=r(i.getTime),c=r(i.getUTCDate),d=r(i.getUTCFullYear),h=r(i.getUTCHours),p=r(i.getUTCMilliseconds),y=r(i.getUTCMinutes),g=r(i.getUTCMonth),E=r(i.getUTCSeconds);o.exports=n(function(){return"0385-07-25T07:06:39.999Z"!==f.call(new Date(-50000000000001))})||!n(function(){f.call(new Date(NaN))})?function(){if(!s(v(this)))throw new a("Invalid time value");var O=this,m=d(O),R=p(O),x=m<0?"-":m>9999?"+":"";return x+e(u(m),x?6:4,0)+"-"+e(g(O)+1,2,0)+"-"+e(c(O),2,0)+"T"+e(h(O),2,0)+":"+e(y(O),2,0)+":"+e(E(O),2,0)+"."+e(R,3,0)+"Z"}:f},3640:(o,l,t)=>{var r=t(8551),n=t(4270),e=TypeError;o.exports=function(a){if(r(this),"string"===a||"default"===a)a="string";else if("number"!==a)throw new e("Incorrect hint");return n(this,a)}},2106:(o,l,t)=>{var r=t(283),n=t(4913);o.exports=function(e,a,s){return s.get&&r(s.get,a,{getter:!0}),s.set&&r(s.set,a,{setter:!0}),n.f(e,a,s)}},6840:(o,l,t)=>{var r=t(4901),n=t(4913),e=t(283),a=t(9433);o.exports=function(s,u,i,f){f||(f={});var v=f.enumerable,c=void 0!==f.name?f.name:u;if(r(i)&&e(i,c,f),f.global)v?s[u]=i:a(u,i);else{try{f.unsafe?s[u]&&(v=!0):delete s[u]}catch{}v?s[u]=i:n.f(s,u,{value:i,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return s}},6279:(o,l,t)=>{var r=t(6840);o.exports=function(n,e,a){for(var s in e)r(n,s,e[s],a);return n}},9433:(o,l,t)=>{var r=t(4576),n=Object.defineProperty;o.exports=function(e,a){try{n(r,e,{value:a,configurable:!0,writable:!0})}catch{r[e]=a}return a}},4606:(o,l,t)=>{var r=t(6823),n=TypeError;o.exports=function(e,a){if(!delete e[a])throw new n("Cannot delete property "+r(a)+" of "+r(e))}},3724:(o,l,t)=>{var r=t(9039);o.exports=!r(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4055:(o,l,t)=>{var r=t(4576),n=t(34),e=r.document,a=n(e)&&n(e.createElement);o.exports=function(s){return a?e.createElement(s):{}}},6837:o=>{var l=TypeError;o.exports=function(r){if(r>9007199254740991)throw l("Maximum allowed index exceeded");return r}},8727:o=>{o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3709:(o,l,t)=>{var n=t(2839).match(/firefox\/(\d+)/i);o.exports=!!n&&+n[1]},3763:(o,l,t)=>{var r=t(2839);o.exports=/MSIE|Trident/.test(r)},6193:(o,l,t)=>{var r=t(4215);o.exports="NODE"===r},2839:(o,l,t)=>{var n=t(4576).navigator,e=n&&n.userAgent;o.exports=e?String(e):""},9519:(o,l,t)=>{var i,f,r=t(4576),n=t(2839),e=r.process,a=r.Deno,s=e&&e.versions||a&&a.version,u=s&&s.v8;u&&(f=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!f&&n&&(!(i=n.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=n.match(/Chrome\/(\d+)/))&&(f=+i[1]),o.exports=f},3607:(o,l,t)=>{var n=t(2839).match(/AppleWebKit\/(\d+)\./);o.exports=!!n&&+n[1]},4215:(o,l,t)=>{var r=t(4576),n=t(2839),e=t(2195),a=function(s){return n.slice(0,s.length)===s};o.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===e(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},6518:(o,l,t)=>{var r=t(4576),n=t(7347).f,e=t(6699),a=t(6840),s=t(9433),u=t(7740),i=t(2796);o.exports=function(f,v){var y,g,E,P,O,c=f.target,d=f.global,h=f.stat;if(y=d?r:h?r[c]||s(c,{}):r[c]&&r[c].prototype)for(g in v){if(P=v[g],E=f.dontCallGetSet?(O=n(y,g))&&O.value:y[g],!i(d?g:c+(h?".":"#")+g,f.forced)&&void 0!==E){if(typeof P==typeof E)continue;u(P,E)}(f.sham||E&&E.sham)&&e(P,"sham",!0),a(y,g,P,f)}}},9039:o=>{o.exports=function(l){try{return!!l()}catch{return!0}}},9228:(o,l,t)=>{t(7495);var r=t(9565),n=t(6840),e=t(7323),a=t(9039),s=t(8227),u=t(6699),i=s("species"),f=RegExp.prototype;o.exports=function(v,c,d,h){var p=s(v),y=!a(function(){var O={};return O[p]=function(){return 7},7!==""[v](O)}),g=y&&!a(function(){var O=!1,m=/a/;return"split"===v&&((m={}).constructor={},m.constructor[i]=function(){return m},m.flags="",m[p]=/./[p]),m.exec=function(){return O=!0,null},m[p](""),!O});if(!y||!g||d){var E=/./[p],P=c(p,""[v],function(O,m,R,x,T){var D=m.exec;return D===e||D===f.exec?y&&!T?{done:!0,value:r(E,m,R,x)}:{done:!0,value:r(O,R,m,x)}:{done:!1}});n(String.prototype,v,P[0]),n(f,p,P[1])}h&&u(f[p],"sham",!0)}},259:(o,l,t)=>{var r=t(4376),n=t(6198),e=t(6837),a=t(6080),s=function(u,i,f,v,c,d,h,p){for(var P,O,y=c,g=0,E=!!h&&a(h,p);g<v;)g in f&&(P=E?E(f[g],g,i):f[g],d>0&&r(P)?(O=n(P),y=s(u,i,P,O,y,d-1)-1):(e(y+1),u[y]=P),y++),g++;return y};o.exports=s},2744:(o,l,t)=>{var r=t(9039);o.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},8745:(o,l,t)=>{var r=t(616),n=Function.prototype,e=n.apply,a=n.call;o.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(e):function(){return a.apply(e,arguments)})},6080:(o,l,t)=>{var r=t(7476),n=t(9306),e=t(616),a=r(r.bind);o.exports=function(s,u){return n(s),void 0===u?s:e?a(s,u):function(){return s.apply(u,arguments)}}},616:(o,l,t)=>{var r=t(9039);o.exports=!r(function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")})},566:(o,l,t)=>{var r=t(9504),n=t(9306),e=t(34),a=t(9297),s=t(7680),u=t(616),i=Function,f=r([].concat),v=r([].join),c={};o.exports=u?i.bind:function(p){var y=n(this),g=y.prototype,E=s(arguments,1),P=function(){var m=f(E,s(arguments));return this instanceof P?function(h,p,y){if(!a(c,p)){for(var g=[],E=0;E<p;E++)g[E]="a["+E+"]";c[p]=i("C,a","return new C("+v(g,",")+")")}return c[p](h,y)}(y,m.length,m):y.apply(p,m)};return e(g)&&(P.prototype=g),P}},9565:(o,l,t)=>{var r=t(616),n=Function.prototype.call;o.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},350:(o,l,t)=>{var r=t(3724),n=t(9297),e=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=n(e,"name"),u=s&&"something"===function(){}.name,i=s&&(!r||r&&a(e,"name").configurable);o.exports={EXISTS:s,PROPER:u,CONFIGURABLE:i}},6706:(o,l,t)=>{var r=t(9504),n=t(9306);o.exports=function(e,a,s){try{return r(n(Object.getOwnPropertyDescriptor(e,a)[s]))}catch{}}},7476:(o,l,t)=>{var r=t(2195),n=t(9504);o.exports=function(e){if("Function"===r(e))return n(e)}},9504:(o,l,t)=>{var r=t(616),n=Function.prototype,e=n.call,a=r&&n.bind.bind(e,e);o.exports=r?a:function(s){return function(){return e.apply(s,arguments)}}},1743:(o,l,t)=>{var r=t(4576);o.exports=function(n,e){var a=r[n],s=a&&a.prototype;return s&&s[e]}},7751:(o,l,t)=>{var r=t(4576),n=t(4901);o.exports=function(a,s){return arguments.length<2?function(a){return n(a)?a:void 0}(r[a]):r[a]&&r[a][s]}},1767:o=>{o.exports=function(l){return{iterator:l,next:l.next,done:!1}}},851:(o,l,t)=>{var r=t(6955),n=t(5966),e=t(4117),a=t(6269),u=t(8227)("iterator");o.exports=function(i){if(!e(i))return n(i,u)||n(i,"@@iterator")||a[r(i)]}},81:(o,l,t)=>{var r=t(9565),n=t(9306),e=t(8551),a=t(6823),s=t(851),u=TypeError;o.exports=function(i,f){var v=arguments.length<2?s(i):f;if(n(v))return e(r(v,i));throw new u(a(i)+" is not iterable")}},6933:(o,l,t)=>{var r=t(9504),n=t(4376),e=t(4901),a=t(2195),s=t(655),u=r([].push);o.exports=function(i){if(e(i))return i;if(n(i)){for(var f=i.length,v=[],c=0;c<f;c++){var d=i[c];"string"==typeof d?u(v,d):("number"==typeof d||"Number"===a(d)||"String"===a(d))&&u(v,s(d))}var h=v.length,p=!0;return function(y,g){if(p)return p=!1,g;if(n(this))return g;for(var E=0;E<h;E++)if(v[E]===y)return g}}}},5966:(o,l,t)=>{var r=t(9306),n=t(4117);o.exports=function(e,a){var s=e[a];return n(s)?void 0:r(s)}},3789:(o,l,t)=>{var r=t(9306),n=t(8551),e=t(9565),a=t(1291),s=t(1767),u="Invalid size",i=RangeError,f=TypeError,v=Math.max,c=function(d,h){this.set=d,this.size=v(h,0),this.has=r(d.has),this.keys=r(d.keys)};c.prototype={getIterator:function(){return s(n(e(this.keys,this.set)))},includes:function(d){return e(this.has,this.set,d)}},o.exports=function(d){n(d);var h=+d.size;if(h!=h)throw new f(u);var p=a(h);if(p<0)throw new i(u);return new c(d,p)}},2478:(o,l,t)=>{var r=t(9504),n=t(8981),e=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;o.exports=function(v,c,d,h,p,y){var g=d+v.length,E=h.length,P=f;return void 0!==p&&(p=n(p),P=i),s(y,P,function(O,m){var R;switch(a(m,0)){case"$":return"$";case"&":return v;case"`":return u(c,0,d);case"'":return u(c,g);case"<":R=p[u(m,1,-1)];break;default:var x=+m;if(0===x)return O;if(x>E){var T=e(x/10);return 0===T?O:T<=E?void 0===h[T-1]?a(m,1):h[T-1]+a(m,1):O}R=h[x-1]}return void 0===R?"":R})}},4576:function(o){var l=function(t){return t&&t.Math===Math&&t};o.exports=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof global&&global)||l("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(o,l,t)=>{var r=t(9504),n=t(8981),e=r({}.hasOwnProperty);o.exports=Object.hasOwn||function(s,u){return e(n(s),u)}},421:o=>{o.exports={}},397:(o,l,t)=>{var r=t(7751);o.exports=r("document","documentElement")},5917:(o,l,t)=>{var r=t(3724),n=t(9039),e=t(4055);o.exports=!r&&!n(function(){return 7!==Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},7055:(o,l,t)=>{var r=t(9504),n=t(9039),e=t(2195),a=Object,s=r("".split);o.exports=n(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return"String"===e(u)?s(u,""):a(u)}:a},3167:(o,l,t)=>{var r=t(4901),n=t(34),e=t(2967);o.exports=function(a,s,u){var i,f;return e&&r(i=s.constructor)&&i!==u&&n(f=i.prototype)&&f!==u.prototype&&e(a,f),a}},3706:(o,l,t)=>{var r=t(9504),n=t(4901),e=t(7629),a=r(Function.toString);n(e.inspectSource)||(e.inspectSource=function(s){return a(s)}),o.exports=e.inspectSource},3451:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(421),a=t(34),s=t(9297),u=t(4913).f,i=t(8480),f=t(298),v=t(4124),c=t(3392),d=t(2744),h=!1,p=c("meta"),y=0,g=function(x){u(x,p,{value:{objectID:"O"+y++,weakData:{}}})},R=o.exports={enable:function(){R.enable=function(){},h=!0;var x=i.f,T=n([].splice),D={};D[p]=1,x(D).length&&(i.f=function(F){for(var A=x(F),N=0,$=A.length;N<$;N++)if(A[N]===p){T(A,N,1);break}return A},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(x,T){if(!a(x))return"symbol"==typeof x?x:("string"==typeof x?"S":"P")+x;if(!s(x,p)){if(!v(x))return"F";if(!T)return"E";g(x)}return x[p].objectID},getWeakData:function(x,T){if(!s(x,p)){if(!v(x))return!0;if(!T)return!1;g(x)}return x[p].weakData},onFreeze:function(x){return d&&h&&v(x)&&!s(x,p)&&g(x),x}};e[p]=!0},1181:(o,l,t)=>{var h,p,y,r=t(8622),n=t(4576),e=t(34),a=t(6699),s=t(9297),u=t(7629),i=t(6119),f=t(421),v="Object already initialized",c=n.TypeError;if(r||u.state){var P=u.state||(u.state=new(0,n.WeakMap));P.get=P.get,P.has=P.has,P.set=P.set,h=function(m,R){if(P.has(m))throw new c(v);return R.facade=m,P.set(m,R),R},p=function(m){return P.get(m)||{}},y=function(m){return P.has(m)}}else{var O=i("state");f[O]=!0,h=function(m,R){if(s(m,O))throw new c(v);return R.facade=m,a(m,O,R),R},p=function(m){return s(m,O)?m[O]:{}},y=function(m){return s(m,O)}}o.exports={set:h,get:p,has:y,enforce:function(m){return y(m)?p(m):h(m,{})},getterFor:function(m){return function(R){var x;if(!e(R)||(x=p(R)).type!==m)throw new c("Incompatible receiver, "+m+" required");return x}}}},4209:(o,l,t)=>{var r=t(8227),n=t(6269),e=r("iterator"),a=Array.prototype;o.exports=function(s){return void 0!==s&&(n.Array===s||a[e]===s)}},4376:(o,l,t)=>{var r=t(2195);o.exports=Array.isArray||function(e){return"Array"===r(e)}},4901:o=>{var l="object"==typeof document&&document.all;o.exports=typeof l>"u"&&void 0!==l?function(t){return"function"==typeof t||t===l}:function(t){return"function"==typeof t}},3517:(o,l,t)=>{var r=t(9504),n=t(9039),e=t(4901),a=t(6955),s=t(7751),u=t(3706),i=function(){},f=s("Reflect","construct"),v=/^\s*(?:class|function)\b/,c=r(v.exec),d=!v.test(i),h=function(g){if(!e(g))return!1;try{return f(i,[],g),!0}catch{return!1}},p=function(g){if(!e(g))return!1;switch(a(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(v,u(g))}catch{return!0}};p.sham=!0,o.exports=!f||n(function(){var y;return h(h.call)||!h(Object)||!h(function(){y=!0})||y})?p:h},2796:(o,l,t)=>{var r=t(9039),n=t(4901),e=/#|\.prototype\./,a=function(v,c){var d=u[s(v)];return d===f||d!==i&&(n(c)?r(c):!!c)},s=a.normalize=function(v){return String(v).replace(e,".").toLowerCase()},u=a.data={},i=a.NATIVE="N",f=a.POLYFILL="P";o.exports=a},2087:(o,l,t)=>{var r=t(34),n=Math.floor;o.exports=Number.isInteger||function(a){return!r(a)&&isFinite(a)&&n(a)===a}},4117:o=>{o.exports=function(l){return null==l}},34:(o,l,t)=>{var r=t(4901);o.exports=function(n){return"object"==typeof n?null!==n:r(n)}},3925:(o,l,t)=>{var r=t(34);o.exports=function(n){return r(n)||null===n}},6395:o=>{o.exports=!1},788:(o,l,t)=>{var r=t(34),n=t(2195),a=t(8227)("match");o.exports=function(s){var u;return r(s)&&(void 0!==(u=s[a])?!!u:"RegExp"===n(s))}},757:(o,l,t)=>{var r=t(7751),n=t(4901),e=t(1625),a=t(7040),s=Object;o.exports=a?function(u){return"symbol"==typeof u}:function(u){var i=r("Symbol");return n(i)&&e(i.prototype,s(u))}},507:(o,l,t)=>{var r=t(9565);o.exports=function(n,e,a){for(var i,f,s=a?n:n.iterator,u=n.next;!(i=r(u,s)).done;)if(void 0!==(f=e(i.value)))return f}},2652:(o,l,t)=>{var r=t(6080),n=t(9565),e=t(8551),a=t(6823),s=t(4209),u=t(6198),i=t(1625),f=t(81),v=t(851),c=t(9539),d=TypeError,h=function(y,g){this.stopped=y,this.result=g},p=h.prototype;o.exports=function(y,g,E){var D,F,A,N,$,B,b,O=!(!E||!E.AS_ENTRIES),m=!(!E||!E.IS_RECORD),R=!(!E||!E.IS_ITERATOR),x=!(!E||!E.INTERRUPTED),T=r(g,E&&E.that),U=function(H){return D&&c(D,"normal",H),new h(!0,H)},K=function(H){return O?(e(H),x?T(H[0],H[1],U):T(H[0],H[1])):x?T(H,U):T(H)};if(m)D=y.iterator;else if(R)D=y;else{if(!(F=v(y)))throw new d(a(y)+" is not iterable");if(s(F)){for(A=0,N=u(y);N>A;A++)if(($=K(y[A]))&&i(p,$))return $;return new h(!1)}D=f(y,F)}for(B=m?y.next:D.next;!(b=n(B,D)).done;){try{$=K(b.value)}catch(H){c(D,"throw",H)}if("object"==typeof $&&$&&i(p,$))return $}return new h(!1)}},9539:(o,l,t)=>{var r=t(9565),n=t(8551),e=t(5966);o.exports=function(a,s,u){var i,f;n(a);try{if(!(i=e(a,"return"))){if("throw"===s)throw u;return u}i=r(i,a)}catch(v){f=!0,i=v}if("throw"===s)throw u;if(f)throw i;return n(i),u}},3994:(o,l,t)=>{var r=t(7657).IteratorPrototype,n=t(2360),e=t(6980),a=t(687),s=t(6269),u=function(){return this};o.exports=function(i,f,v,c){var d=f+" Iterator";return i.prototype=n(r,{next:e(+!c,v)}),a(i,d,!1,!0),s[d]=u,i}},1088:(o,l,t)=>{var r=t(6518),n=t(9565),e=t(6395),a=t(350),s=t(4901),u=t(3994),i=t(2787),f=t(2967),v=t(687),c=t(6699),d=t(6840),h=t(8227),p=t(6269),y=t(7657),g=a.PROPER,E=a.CONFIGURABLE,P=y.IteratorPrototype,O=y.BUGGY_SAFARI_ITERATORS,m=h("iterator"),R="keys",x="values",T="entries",D=function(){return this};o.exports=function(F,A,N,$,B,b,U){u(N,A,$);var q,dt,mt,K=function(xt){if(xt===B&&z)return z;if(!O&&xt&&xt in J)return J[xt];switch(xt){case R:case x:case T:return function(){return new N(this,xt)}}return function(){return new N(this)}},H=A+" Iterator",V=!1,J=F.prototype,w=J[m]||J["@@iterator"]||B&&J[B],z=!O&&w||K(B),_="Array"===A&&J.entries||w;if(_&&(q=i(_.call(new F)))!==Object.prototype&&q.next&&(!e&&i(q)!==P&&(f?f(q,P):s(q[m])||d(q,m,D)),v(q,H,!0,!0),e&&(p[H]=D)),g&&B===x&&w&&w.name!==x&&(!e&&E?c(J,"name",x):(V=!0,z=function(){return n(w,this)})),B)if(dt={values:K(x),keys:b?z:K(R),entries:K(T)},U)for(mt in dt)(O||V||!(mt in J))&&d(J,mt,dt[mt]);else r({target:A,proto:!0,forced:O||V},dt);return(!e||U)&&J[m]!==z&&d(J,m,z,{name:B}),p[A]=z,dt}},7657:(o,l,t)=>{var d,h,p,r=t(9039),n=t(4901),e=t(34),a=t(2360),s=t(2787),u=t(6840),i=t(8227),f=t(6395),v=i("iterator"),c=!1;[].keys&&("next"in(p=[].keys())?(h=s(s(p)))!==Object.prototype&&(d=h):c=!0),!e(d)||r(function(){var g={};return d[v].call(g)!==g})?d={}:f&&(d=a(d)),n(d[v])||u(d,v,function(){return this}),o.exports={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:c}},6269:o=>{o.exports={}},6198:(o,l,t)=>{var r=t(8014);o.exports=function(n){return r(n.length)}},283:(o,l,t)=>{var r=t(9504),n=t(9039),e=t(4901),a=t(9297),s=t(3724),u=t(350).CONFIGURABLE,i=t(3706),f=t(1181),v=f.enforce,c=f.get,d=String,h=Object.defineProperty,p=r("".slice),y=r("".replace),g=r([].join),E=s&&!n(function(){return 8!==h(function(){},"length",{value:8}).length}),P=String(String).split("String"),O=o.exports=function(m,R,x){"Symbol("===p(d(R),0,7)&&(R="["+y(d(R),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),x&&x.getter&&(R="get "+R),x&&x.setter&&(R="set "+R),(!a(m,"name")||u&&m.name!==R)&&(s?h(m,"name",{value:R,configurable:!0}):m.name=R),E&&x&&a(x,"arity")&&m.length!==x.arity&&h(m,"length",{value:x.arity});try{x&&a(x,"constructor")&&x.constructor?s&&h(m,"prototype",{writable:!1}):m.prototype&&(m.prototype=void 0)}catch{}var T=v(m);return a(T,"source")||(T.source=g(P,"string"==typeof R?R:"")),m};Function.prototype.toString=O(function(){return e(this)&&c(this).source||i(this)},"toString")},2248:(o,l,t)=>{var r=t(9504),n=Map.prototype;o.exports={Map,set:r(n.set),get:r(n.get),has:r(n.has),remove:r(n.delete),proto:n}},3250:o=>{var l=Math.expm1,t=Math.exp;o.exports=!l||l(10)>22025.465794806718||l(10)<22025.465794806718||-2e-17!==l(-2e-17)?function(n){var e=+n;return 0===e?e:e>-1e-6&&e<1e-6?e+e*e/2:t(e)-1}:l},3164:(o,l,t)=>{var r=t(7782),n=Math.abs,e=2220446049250313e-31,a=1/e;o.exports=function(u,i,f,v){var c=+u,d=n(c),h=r(c);if(d<v)return h*function(u){return u+a-a}(d/v/i)*v*i;var p=(1+i/e)*d,y=p-(p-d);return y>f||y!=y?h*(1/0):h*y}},5617:(o,l,t)=>{var r=t(3164);o.exports=Math.fround||function(u){return r(u,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},9340:o=>{var l=Math.log,t=Math.LOG10E;o.exports=Math.log10||function(n){return l(n)*t}},5359:o=>{var l=Math.log;o.exports=Math.log1p||function(r){var n=+r;return n>-1e-8&&n<1e-8?n-n*n/2:l(1+n)}},7782:o=>{o.exports=Math.sign||function(t){var r=+t;return 0===r||r!=r?r:r<0?-1:1}},741:o=>{var l=Math.ceil,t=Math.floor;o.exports=Math.trunc||function(n){var e=+n;return(e>0?t:l)(e)}},5749:(o,l,t)=>{var r=t(788),n=TypeError;o.exports=function(e){if(r(e))throw new n("The method doesn't accept regular expressions");return e}},360:(o,l,t)=>{var n=t(4576).isFinite;o.exports=Number.isFinite||function(a){return"number"==typeof a&&n(a)}},3904:(o,l,t)=>{var r=t(4576),n=t(9039),e=t(9504),a=t(655),s=t(3802).trim,u=t(7452),i=e("".charAt),f=r.parseFloat,v=r.Symbol,c=v&&v.iterator,d=1/f(u+"-0")!=-1/0||c&&!n(function(){f(Object(c))});o.exports=d?function(p){var y=s(a(p)),g=f(y);return 0===g&&"-"===i(y,0)?-0:g}:f},2703:(o,l,t)=>{var r=t(4576),n=t(9039),e=t(9504),a=t(655),s=t(3802).trim,u=t(7452),i=r.parseInt,f=r.Symbol,v=f&&f.iterator,c=/^[+-]?0x/i,d=e(c.exec),h=8!==i(u+"08")||22!==i(u+"0x16")||v&&!n(function(){i(Object(v))});o.exports=h?function(y,g){var E=s(a(y));return i(E,g>>>0||(d(c,E)?16:10))}:i},4213:(o,l,t)=>{var r=t(3724),n=t(9504),e=t(9565),a=t(9039),s=t(1072),u=t(3717),i=t(8773),f=t(8981),v=t(7055),c=Object.assign,d=Object.defineProperty,h=n([].concat);o.exports=!c||a(function(){if(r&&1!==c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var p={},y={},g=Symbol("assign detection"),E="abcdefghijklmnopqrst";return p[g]=7,E.split("").forEach(function(P){y[P]=P}),7!==c({},p)[g]||s(c({},y)).join("")!==E})?function(y,g){for(var E=f(y),P=arguments.length,O=1,m=u.f,R=i.f;P>O;)for(var A,x=v(arguments[O++]),T=m?h(s(x),m(x)):s(x),D=T.length,F=0;D>F;)A=T[F++],(!r||e(R,x,A))&&(E[A]=x[A]);return E}:c},2360:(o,l,t)=>{var P,r=t(8551),n=t(6801),e=t(8727),a=t(421),s=t(397),u=t(4055),i=t(6119),c="prototype",d="script",h=i("IE_PROTO"),p=function(){},y=function(m){return"<"+d+">"+m+"</"+d+">"},g=function(m){m.write(y("")),m.close();var R=m.parentWindow.Object;return m=null,R},O=function(){try{P=new ActiveXObject("htmlfile")}catch{}O=typeof document<"u"?document.domain&&P?g(P):function(){var x,m=u("iframe"),R="java"+d+":";return m.style.display="none",s.appendChild(m),m.src=String(R),(x=m.contentWindow.document).open(),x.write(y("document.F=Object")),x.close(),x.F}():g(P);for(var m=e.length;m--;)delete O[c][e[m]];return O()};a[h]=!0,o.exports=Object.create||function(R,x){var T;return null!==R?(p[c]=r(R),T=new p,p[c]=null,T[h]=R):T=O(),void 0===x?T:n.f(T,x)}},6801:(o,l,t)=>{var r=t(3724),n=t(8686),e=t(4913),a=t(8551),s=t(5397),u=t(1072);l.f=r&&!n?Object.defineProperties:function(f,v){a(f);for(var y,c=s(v),d=u(v),h=d.length,p=0;h>p;)e.f(f,y=d[p++],c[y]);return f}},4913:(o,l,t)=>{var r=t(3724),n=t(5917),e=t(8686),a=t(8551),s=t(6969),u=TypeError,i=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v="enumerable",c="configurable",d="writable";l.f=r?e?function(p,y,g){if(a(p),y=s(y),a(g),"function"==typeof p&&"prototype"===y&&"value"in g&&d in g&&!g[d]){var E=f(p,y);E&&E[d]&&(p[y]=g.value,g={configurable:c in g?g[c]:E[c],enumerable:v in g?g[v]:E[v],writable:!1})}return i(p,y,g)}:i:function(p,y,g){if(a(p),y=s(y),a(g),n)try{return i(p,y,g)}catch{}if("get"in g||"set"in g)throw new u("Accessors not supported");return"value"in g&&(p[y]=g.value),p}},7347:(o,l,t)=>{var r=t(3724),n=t(9565),e=t(8773),a=t(6980),s=t(5397),u=t(6969),i=t(9297),f=t(5917),v=Object.getOwnPropertyDescriptor;l.f=r?v:function(d,h){if(d=s(d),h=u(h),f)try{return v(d,h)}catch{}if(i(d,h))return a(!n(e.f,d,h),d[h])}},298:(o,l,t)=>{var r=t(2195),n=t(5397),e=t(8480).f,a=t(7680),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(f){return s&&"Window"===r(f)?function(i){try{return e(i)}catch{return a(s)}}(f):e(n(f))}},8480:(o,l,t)=>{var r=t(1828),e=t(8727).concat("length","prototype");l.f=Object.getOwnPropertyNames||function(s){return r(s,e)}},3717:(o,l)=>{l.f=Object.getOwnPropertySymbols},2787:(o,l,t)=>{var r=t(9297),n=t(4901),e=t(8981),a=t(6119),s=t(2211),u=a("IE_PROTO"),i=Object,f=i.prototype;o.exports=s?i.getPrototypeOf:function(v){var c=e(v);if(r(c,u))return c[u];var d=c.constructor;return n(d)&&c instanceof d?d.prototype:c instanceof i?f:null}},4124:(o,l,t)=>{var r=t(9039),n=t(34),e=t(2195),a=t(5652),s=Object.isExtensible,u=r(function(){s(1)});o.exports=u||a?function(f){return!(!n(f)||a&&"ArrayBuffer"===e(f))&&(!s||s(f))}:s},1625:(o,l,t)=>{var r=t(9504);o.exports=r({}.isPrototypeOf)},1828:(o,l,t)=>{var r=t(9504),n=t(9297),e=t(5397),a=t(9617).indexOf,s=t(421),u=r([].push);o.exports=function(i,f){var h,v=e(i),c=0,d=[];for(h in v)!n(s,h)&&n(v,h)&&u(d,h);for(;f.length>c;)n(v,h=f[c++])&&(~a(d,h)||u(d,h));return d}},1072:(o,l,t)=>{var r=t(1828),n=t(8727);o.exports=Object.keys||function(a){return r(a,n)}},8773:(o,l)=>{var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!t.call({1:2},1);l.f=n?function(a){var s=r(this,a);return!!s&&s.enumerable}:t},2551:(o,l,t)=>{var r=t(6395),n=t(4576),e=t(9039),a=t(3607);o.exports=r||!e(function(){if(!(a&&a<535)){var s=Math.random();__defineSetter__.call(null,s,function(){}),delete n[s]}})},2967:(o,l,t)=>{var r=t(6706),n=t(34),e=t(7750),a=t(3506);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,s=!1,u={};try{(i=r(Object.prototype,"__proto__","set"))(u,[]),s=u instanceof Array}catch{}return function(v,c){return e(v),a(c),n(v)&&(s?i(v,c):v.__proto__=c),v}}():void 0)},2357:(o,l,t)=>{var r=t(3724),n=t(9039),e=t(9504),a=t(2787),s=t(1072),u=t(5397),f=e(t(8773).f),v=e([].push),c=r&&n(function(){var h=Object.create(null);return h[2]=2,!f(h,2)}),d=function(h){return function(p){for(var R,y=u(p),g=s(y),E=c&&null===a(y),P=g.length,O=0,m=[];P>O;)R=g[O++],(!r||(E?R in y:f(y,R)))&&v(m,h?[R,y[R]]:y[R]);return m}};o.exports={entries:d(!0),values:d(!1)}},3179:(o,l,t)=>{var r=t(2140),n=t(6955);o.exports=r?{}.toString:function(){return"[object "+n(this)+"]"}},4270:(o,l,t)=>{var r=t(9565),n=t(4901),e=t(34),a=TypeError;o.exports=function(s,u){var i,f;if("string"===u&&n(i=s.toString)&&!e(f=r(i,s))||n(i=s.valueOf)&&!e(f=r(i,s))||"string"!==u&&n(i=s.toString)&&!e(f=r(i,s)))return f;throw new a("Can't convert object to primitive value")}},5031:(o,l,t)=>{var r=t(7751),n=t(9504),e=t(8480),a=t(3717),s=t(8551),u=n([].concat);o.exports=r("Reflect","ownKeys")||function(f){var v=e.f(s(f)),c=a.f;return c?u(v,c(f)):v}},9167:(o,l,t)=>{var r=t(4576);o.exports=r},1056:(o,l,t)=>{var r=t(4913).f;o.exports=function(n,e,a){a in n||r(n,a,{configurable:!0,get:function(){return e[a]},set:function(s){e[a]=s}})}},6682:(o,l,t)=>{var r=t(9565),n=t(8551),e=t(4901),a=t(2195),s=t(7323),u=TypeError;o.exports=function(i,f){var v=i.exec;if(e(v)){var c=r(v,i,f);return null!==c&&n(c),c}if("RegExp"===a(i))return r(s,i,f);throw new u("RegExp#exec called on incompatible receiver")}},7323:(o,l,t)=>{var T,D,r=t(9565),n=t(9504),e=t(655),a=t(7979),s=t(8429),u=t(5745),i=t(2360),f=t(1181).get,v=t(3635),c=t(8814),d=u("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,p=h,y=n("".charAt),g=n("".indexOf),E=n("".replace),P=n("".slice),O=(D=/b*/g,r(h,T=/a/,"a"),r(h,D,"a"),0!==T.lastIndex||0!==D.lastIndex),m=s.BROKEN_CARET,R=void 0!==/()??/.exec("")[1];(O||R||m||v||c)&&(p=function(D){var B,b,U,K,H,V,J,F=this,A=f(F),N=e(D),$=A.raw;if($)return $.lastIndex=F.lastIndex,B=r(p,$,N),F.lastIndex=$.lastIndex,B;var w=A.groups,z=m&&F.sticky,_=r(a,F),q=F.source,dt=0,mt=N;if(z&&(_=E(_,"y",""),-1===g(_,"g")&&(_+="g"),mt=P(N,F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&"\n"!==y(N,F.lastIndex-1))&&(q="(?: "+q+")",mt=" "+mt,dt++),b=new RegExp("^(?:"+q+")",_)),R&&(b=new RegExp("^"+q+"$(?!\\s)",_)),O&&(U=F.lastIndex),K=r(h,z?b:F,mt),z?K?(K.input=P(K.input,dt),K[0]=P(K[0],dt),K.index=F.lastIndex,F.lastIndex+=K[0].length):F.lastIndex=0:O&&K&&(F.lastIndex=F.global?K.index+K[0].length:U),R&&K&&K.length>1&&r(d,K[0],b,function(){for(H=1;H<arguments.length-2;H++)void 0===arguments[H]&&(K[H]=void 0)}),K&&w)for(K.groups=V=i(null),H=0;H<w.length;H++)V[(J=w[H])[0]]=K[J[1]];return K}),o.exports=p},7979:(o,l,t)=>{var r=t(8551);o.exports=function(){var n=r(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e}},1034:(o,l,t)=>{var r=t(9565),n=t(9297),e=t(1625),a=t(7979),s=RegExp.prototype;o.exports=function(u){var i=u.flags;return void 0!==i||"flags"in s||n(u,"flags")||!e(s,u)?i:r(a,u)}},8429:(o,l,t)=>{var r=t(9039),e=t(4576).RegExp,a=r(function(){var i=e("a","y");return i.lastIndex=2,null!==i.exec("abcd")}),s=a||r(function(){return!e("a","y").sticky}),u=a||r(function(){var i=e("^r","gy");return i.lastIndex=2,null!==i.exec("str")});o.exports={BROKEN_CARET:u,MISSED_STICKY:s,UNSUPPORTED_Y:a}},3635:(o,l,t)=>{var r=t(9039),e=t(4576).RegExp;o.exports=r(function(){var a=e(".","s");return!(a.dotAll&&a.test("\n")&&"s"===a.flags)})},8814:(o,l,t)=>{var r=t(9039),e=t(4576).RegExp;o.exports=r(function(){var a=e("(?<a>b)","g");return"b"!==a.exec("b").groups.a||"bc"!=="b".replace(a,"$<a>c")})},7750:(o,l,t)=>{var r=t(4117),n=TypeError;o.exports=function(e){if(r(e))throw new n("Can't call method on "+e);return e}},3470:o=>{o.exports=Object.is||function(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r}},9286:(o,l,t)=>{var r=t(4402),n=t(8469),e=r.Set,a=r.add;o.exports=function(s){var u=new e;return n(s,function(i){a(u,i)}),u}},3440:(o,l,t)=>{var r=t(7080),n=t(4402),e=t(9286),a=t(5170),s=t(3789),u=t(8469),i=t(507),f=n.has,v=n.remove;o.exports=function(d){var h=r(this),p=s(d),y=e(h);return a(h)<=p.size?u(h,function(g){p.includes(g)&&v(y,g)}):i(p.getIterator(),function(g){f(h,g)&&v(y,g)}),y}},4402:(o,l,t)=>{var r=t(9504),n=Set.prototype;o.exports={Set,add:r(n.add),has:r(n.has),remove:r(n.delete),proto:n}},8750:(o,l,t)=>{var r=t(7080),n=t(4402),e=t(5170),a=t(3789),s=t(8469),u=t(507),i=n.Set,f=n.add,v=n.has;o.exports=function(d){var h=r(this),p=a(d),y=new i;return e(h)>p.size?u(p.getIterator(),function(g){v(h,g)&&f(y,g)}):s(h,function(g){p.includes(g)&&f(y,g)}),y}},4449:(o,l,t)=>{var r=t(7080),n=t(4402).has,e=t(5170),a=t(3789),s=t(8469),u=t(507),i=t(9539);o.exports=function(v){var c=r(this),d=a(v);if(e(c)<=d.size)return!1!==s(c,function(p){if(d.includes(p))return!1},!0);var h=d.getIterator();return!1!==u(h,function(p){if(n(c,p))return i(h,"normal",!1)})}},3838:(o,l,t)=>{var r=t(7080),n=t(5170),e=t(8469),a=t(3789);o.exports=function(u){var i=r(this),f=a(u);return!(n(i)>f.size)&&!1!==e(i,function(v){if(!f.includes(v))return!1},!0)}},8527:(o,l,t)=>{var r=t(7080),n=t(4402).has,e=t(5170),a=t(3789),s=t(507),u=t(9539);o.exports=function(f){var v=r(this),c=a(f);if(e(v)<c.size)return!1;var d=c.getIterator();return!1!==s(d,function(h){if(!n(v,h))return u(d,"normal",!1)})}},8469:(o,l,t)=>{var r=t(9504),n=t(507),e=t(4402),a=e.Set,s=e.proto,u=r(s.forEach),i=r(s.keys),f=i(new a).next;o.exports=function(v,c,d){return d?n({iterator:i(v),next:f},c):u(v,c)}},4916:(o,l,t)=>{var r=t(7751),n=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};o.exports=function(e){var a=r("Set");try{(new a)[e](n(0));try{return(new a)[e](n(-1)),!1}catch{return!0}}catch{return!1}}},5170:(o,l,t)=>{var r=t(6706),n=t(4402);o.exports=r(n.proto,"size","get")||function(e){return e.size}},7633:(o,l,t)=>{var r=t(7751),n=t(2106),e=t(8227),a=t(3724),s=e("species");o.exports=function(u){var i=r(u);a&&i&&!i[s]&&n(i,s,{configurable:!0,get:function(){return this}})}},3650:(o,l,t)=>{var r=t(7080),n=t(4402),e=t(9286),a=t(3789),s=t(507),u=n.add,i=n.has,f=n.remove;o.exports=function(c){var d=r(this),h=a(c).getIterator(),p=e(d);return s(h,function(y){i(d,y)?f(p,y):u(p,y)}),p}},687:(o,l,t)=>{var r=t(4913).f,n=t(9297),a=t(8227)("toStringTag");o.exports=function(s,u,i){s&&!i&&(s=s.prototype),s&&!n(s,a)&&r(s,a,{configurable:!0,value:u})}},4204:(o,l,t)=>{var r=t(7080),n=t(4402).add,e=t(9286),a=t(3789),s=t(507);o.exports=function(i){var f=r(this),v=a(i).getIterator(),c=e(f);return s(v,function(d){n(c,d)}),c}},6119:(o,l,t)=>{var r=t(5745),n=t(3392),e=r("keys");o.exports=function(a){return e[a]||(e[a]=n(a))}},7629:(o,l,t)=>{var r=t(6395),n=t(4576),e=t(9433),a="__core-js_shared__",s=o.exports=n[a]||e(a,{});(s.versions||(s.versions=[])).push({version:"3.38.1",mode:r?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(o,l,t)=>{var r=t(7629);o.exports=function(n,e){return r[n]||(r[n]=e||{})}},2293:(o,l,t)=>{var r=t(8551),n=t(5548),e=t(4117),s=t(8227)("species");o.exports=function(u,i){var v,f=r(u).constructor;return void 0===f||e(v=r(f)[s])?i:n(v)}},3061:(o,l,t)=>{var r=t(9039);o.exports=function(n){return r(function(){var e=""[n]('"');return e!==e.toLowerCase()||e.split('"').length>3})}},8183:(o,l,t)=>{var r=t(9504),n=t(1291),e=t(655),a=t(7750),s=r("".charAt),u=r("".charCodeAt),i=r("".slice),f=function(v){return function(c,d){var g,E,h=e(a(c)),p=n(d),y=h.length;return p<0||p>=y?v?"":void 0:(g=u(h,p))<55296||g>56319||p+1===y||(E=u(h,p+1))<56320||E>57343?v?s(h,p):g:v?i(h,p,p+2):E-56320+(g-55296<<10)+65536}};o.exports={codeAt:f(!1),charAt:f(!0)}},3063:(o,l,t)=>{var r=t(2839);o.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},533:(o,l,t)=>{var r=t(9504),n=t(8014),e=t(655),a=t(2333),s=t(7750),u=r(a),i=r("".slice),f=Math.ceil,v=function(c){return function(d,h,p){var O,m,y=e(s(d)),g=n(h),E=y.length,P=void 0===p?" ":e(p);return g<=E||""===P?y:((m=u(P,f((O=g-E)/P.length))).length>O&&(m=i(m,0,O)),c?y+m:m+y)}};o.exports={start:v(!1),end:v(!0)}},2333:(o,l,t)=>{var r=t(1291),n=t(655),e=t(7750),a=RangeError;o.exports=function(u){var i=n(e(this)),f="",v=r(u);if(v<0||v===1/0)throw new a("Wrong number of repetitions");for(;v>0;(v>>>=1)&&(i+=i))1&v&&(f+=i);return f}},8866:(o,l,t)=>{var r=t(3802).end,n=t(706);o.exports=n("trimEnd")?function(){return r(this)}:"".trimEnd},706:(o,l,t)=>{var r=t(350).PROPER,n=t(9039),e=t(7452);o.exports=function(s){return n(function(){return!!e[s]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[s]()||r&&e[s].name!==s})}},3487:(o,l,t)=>{var r=t(3802).start,n=t(706);o.exports=n("trimStart")?function(){return r(this)}:"".trimStart},3802:(o,l,t)=>{var r=t(9504),n=t(7750),e=t(655),a=t(7452),s=r("".replace),u=RegExp("^["+a+"]+"),i=RegExp("(^|[^"+a+"])["+a+"]+$"),f=function(v){return function(c){var d=e(n(c));return 1&v&&(d=s(d,u,"")),2&v&&(d=s(d,i,"$1")),d}};o.exports={start:f(1),end:f(2),trim:f(3)}},4495:(o,l,t)=>{var r=t(9519),n=t(9039),a=t(4576).String;o.exports=!!Object.getOwnPropertySymbols&&!n(function(){var s=Symbol("symbol detection");return!a(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8242:(o,l,t)=>{var r=t(9565),n=t(7751),e=t(8227),a=t(6840);o.exports=function(){var s=n("Symbol"),u=s&&s.prototype,i=u&&u.valueOf,f=e("toPrimitive");u&&!u[f]&&a(u,f,function(v){return r(i,this)},{arity:1})}},1296:(o,l,t)=>{var r=t(4495);o.exports=r&&!!Symbol.for&&!!Symbol.keyFor},1240:(o,l,t)=>{var r=t(9504);o.exports=r(1..valueOf)},5610:(o,l,t)=>{var r=t(1291),n=Math.max,e=Math.min;o.exports=function(a,s){var u=r(a);return u<0?n(u+s,0):e(u,s)}},5397:(o,l,t)=>{var r=t(7055),n=t(7750);o.exports=function(e){return r(n(e))}},1291:(o,l,t)=>{var r=t(741);o.exports=function(n){var e=+n;return e!=e||0===e?0:r(e)}},8014:(o,l,t)=>{var r=t(1291),n=Math.min;o.exports=function(e){var a=r(e);return a>0?n(a,9007199254740991):0}},8981:(o,l,t)=>{var r=t(7750),n=Object;o.exports=function(e){return n(r(e))}},2777:(o,l,t)=>{var r=t(9565),n=t(34),e=t(757),a=t(5966),s=t(4270),u=t(8227),i=TypeError,f=u("toPrimitive");o.exports=function(v,c){if(!n(v)||e(v))return v;var h,d=a(v,f);if(d){if(void 0===c&&(c="default"),h=r(d,v,c),!n(h)||e(h))return h;throw new i("Can't convert object to primitive value")}return void 0===c&&(c="number"),s(v,c)}},6969:(o,l,t)=>{var r=t(2777),n=t(757);o.exports=function(e){var a=r(e,"string");return n(a)?a:a+""}},2140:(o,l,t)=>{var e={};e[t(8227)("toStringTag")]="z",o.exports="[object z]"===String(e)},655:(o,l,t)=>{var r=t(6955),n=String;o.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return n(e)}},6823:o=>{var l=String;o.exports=function(t){try{return l(t)}catch{return"Object"}}},3392:(o,l,t)=>{var r=t(9504),n=0,e=Math.random(),a=r(1..toString);o.exports=function(s){return"Symbol("+(void 0===s?"":s)+")_"+a(++n+e,36)}},7040:(o,l,t)=>{var r=t(4495);o.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(o,l,t)=>{var r=t(3724),n=t(9039);o.exports=r&&n(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8622:(o,l,t)=>{var r=t(4576),n=t(4901),e=r.WeakMap;o.exports=n(e)&&/native code/.test(String(e))},511:(o,l,t)=>{var r=t(9167),n=t(9297),e=t(1951),a=t(4913).f;o.exports=function(s){var u=r.Symbol||(r.Symbol={});n(u,s)||a(u,s,{value:e.f(s)})}},1951:(o,l,t)=>{var r=t(8227);l.f=r},8227:(o,l,t)=>{var r=t(4576),n=t(5745),e=t(9297),a=t(3392),s=t(4495),u=t(7040),i=r.Symbol,f=n("wks"),v=u?i.for||i:i&&i.withoutSetter||a;o.exports=function(c){return e(f,c)||(f[c]=s&&e(i,c)?i[c]:v("Symbol."+c)),f[c]}},7452:o=>{o.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8107:(o,l,t)=>{var r=t(6518),n=t(8981),e=t(6198),a=t(1291),s=t(6469);r({target:"Array",proto:!0},{at:function(i){var f=n(this),v=e(f),c=a(i),d=c>=0?c:v+c;return d<0||d>=v?void 0:f[d]}}),s("at")},8706:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(4376),a=t(34),s=t(8981),u=t(6198),i=t(6837),f=t(4659),v=t(1469),c=t(597),d=t(8227),h=t(9519),p=d("isConcatSpreadable"),y=h>=51||!n(function(){var P=[];return P[p]=!1,P.concat()[0]!==P}),g=function(P){if(!a(P))return!1;var O=P[p];return void 0!==O?!!O:e(P)};r({target:"Array",proto:!0,arity:1,forced:!y||!c("concat")},{concat:function(O){var T,D,F,A,N,m=s(this),R=v(m,0),x=0;for(T=-1,F=arguments.length;T<F;T++)if(g(N=-1===T?m:arguments[T]))for(A=u(N),i(x+A),D=0;D<A;D++,x++)D in N&&f(R,x,N[D]);else i(x+1),f(R,x++,N);return R.length=x,R}})},6835:(o,l,t)=>{var r=t(6518),n=t(7029),e=t(6469);r({target:"Array",proto:!0},{copyWithin:n}),e("copyWithin")},8431:(o,l,t)=>{var r=t(6518),n=t(9213).every;r({target:"Array",proto:!0,forced:!t(4598)("every")},{every:function(u){return n(this,u,arguments.length>1?arguments[1]:void 0)}})},3771:(o,l,t)=>{var r=t(6518),n=t(4373),e=t(6469);r({target:"Array",proto:!0},{fill:n}),e("fill")},2008:(o,l,t)=>{var r=t(6518),n=t(9213).filter;r({target:"Array",proto:!0,forced:!t(597)("filter")},{filter:function(u){return n(this,u,arguments.length>1?arguments[1]:void 0)}})},8980:(o,l,t)=>{var r=t(6518),n=t(9213).findIndex,e=t(6469),a="findIndex",s=!0;a in[]&&Array(1)[a](function(){s=!1}),r({target:"Array",proto:!0,forced:s},{findIndex:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)}}),e(a)},5832:(o,l,t)=>{var r=t(6518),n=t(3839).findLastIndex,e=t(6469);r({target:"Array",proto:!0},{findLastIndex:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}}),e("findLastIndex")},838:(o,l,t)=>{var r=t(6518),n=t(3839).findLast,e=t(6469);r({target:"Array",proto:!0},{findLast:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}}),e("findLast")},113:(o,l,t)=>{var r=t(6518),n=t(9213).find,e=t(6469),a="find",s=!0;a in[]&&Array(1)[a](function(){s=!1}),r({target:"Array",proto:!0,forced:s},{find:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)}}),e(a)},8350:(o,l,t)=>{var r=t(6518),n=t(259),e=t(9306),a=t(8981),s=t(6198),u=t(1469);r({target:"Array",proto:!0},{flatMap:function(f){var d,v=a(this),c=s(v);return e(f),(d=u(v,0)).length=n(d,v,v,c,0,1,f,arguments.length>1?arguments[1]:void 0),d}})},6449:(o,l,t)=>{var r=t(6518),n=t(259),e=t(8981),a=t(6198),s=t(1291),u=t(1469);r({target:"Array",proto:!0},{flat:function(){var f=arguments.length?arguments[0]:void 0,v=e(this),c=a(v),d=u(v,0);return d.length=n(d,v,v,c,0,void 0===f?1:s(f)),d}})},1629:(o,l,t)=>{var r=t(6518),n=t(235);r({target:"Array",proto:!0,forced:[].forEach!==n},{forEach:n})},3418:(o,l,t)=>{var r=t(6518),n=t(7916);r({target:"Array",stat:!0,forced:!t(4428)(function(s){Array.from(s)})},{from:n})},4423:(o,l,t)=>{var r=t(6518),n=t(9617).includes,e=t(9039),a=t(6469);r({target:"Array",proto:!0,forced:e(function(){return!Array(1).includes()})},{includes:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)}}),a("includes")},5276:(o,l,t)=>{var r=t(6518),n=t(7476),e=t(9617).indexOf,a=t(4598),s=n([].indexOf),u=!!s&&1/s([1],1,-0)<0;r({target:"Array",proto:!0,forced:u||!a("indexOf")},{indexOf:function(v){var c=arguments.length>1?arguments[1]:void 0;return u?s(this,v,c)||0:e(this,v,c)}})},4346:(o,l,t)=>{t(6518)({target:"Array",stat:!0},{isArray:t(4376)})},3792:(o,l,t)=>{var r=t(5397),n=t(6469),e=t(6269),a=t(1181),s=t(4913).f,u=t(1088),i=t(2529),f=t(6395),v=t(3724),c="Array Iterator",d=a.set,h=a.getterFor(c);o.exports=u(Array,"Array",function(y,g){d(this,{type:c,target:r(y),index:0,kind:g})},function(){var y=h(this),g=y.target,E=y.index++;if(!g||E>=g.length)return y.target=null,i(void 0,!0);switch(y.kind){case"keys":return i(E,!1);case"values":return i(g[E],!1)}return i([E,g[E]],!1)},"values");var p=e.Arguments=e.Array;if(n("keys"),n("values"),n("entries"),!f&&v&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch{}},8598:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(7055),a=t(5397),s=t(4598),u=n([].join);r({target:"Array",proto:!0,forced:e!==Object||!s("join",",")},{join:function(c){return u(a(this),void 0===c?",":c)}})},8921:(o,l,t)=>{var r=t(6518),n=t(8379);r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},2062:(o,l,t)=>{var r=t(6518),n=t(9213).map;r({target:"Array",proto:!0,forced:!t(597)("map")},{map:function(u){return n(this,u,arguments.length>1?arguments[1]:void 0)}})},1051:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(3517),a=t(4659),s=Array;r({target:"Array",stat:!0,forced:n(function(){function i(){}return!(s.of.call(i)instanceof i)})},{of:function(){for(var f=0,v=arguments.length,c=new(e(this)?this:s)(v);v>f;)a(c,f,arguments[f++]);return c.length=v,c}})},4114:(o,l,t)=>{var r=t(6518),n=t(8981),e=t(6198),a=t(4527),s=t(6837);r({target:"Array",proto:!0,arity:1,forced:t(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(c){return c instanceof TypeError}}()},{push:function(d){var h=n(this),p=e(h),y=arguments.length;s(p+y);for(var g=0;g<y;g++)h[p]=arguments[g],p++;return a(h,p),p}})},8863:(o,l,t)=>{var r=t(6518),n=t(926).right,e=t(4598),a=t(9519);r({target:"Array",proto:!0,forced:!t(6193)&&a>79&&a<83||!e("reduceRight")},{reduceRight:function(v){return n(this,v,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2712:(o,l,t)=>{var r=t(6518),n=t(926).left,e=t(4598),a=t(9519);r({target:"Array",proto:!0,forced:!t(6193)&&a>79&&a<83||!e("reduce")},{reduce:function(v){var c=arguments.length;return n(this,v,c,c>1?arguments[1]:void 0)}})},4490:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(4376),a=n([].reverse),s=[1,2];r({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return e(this)&&(this.length=this.length),a(this)}})},4782:(o,l,t)=>{var r=t(6518),n=t(4376),e=t(3517),a=t(34),s=t(5610),u=t(6198),i=t(5397),f=t(4659),v=t(8227),c=t(597),d=t(7680),h=c("slice"),p=v("species"),y=Array,g=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(P,O){var D,F,A,m=i(this),R=u(m),x=s(P,R),T=s(void 0===O?R:O,R);if(n(m)&&((e(D=m.constructor)&&(D===y||n(D.prototype))||a(D)&&null===(D=D[p]))&&(D=void 0),D===y||void 0===D))return d(m,x,T);for(F=new(void 0===D?y:D)(g(T-x,0)),A=0;x<T;x++,A++)x in m&&f(F,A,m[x]);return F.length=A,F}})},5086:(o,l,t)=>{var r=t(6518),n=t(9213).some;r({target:"Array",proto:!0,forced:!t(4598)("some")},{some:function(u){return n(this,u,arguments.length>1?arguments[1]:void 0)}})},6910:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(9306),a=t(8981),s=t(6198),u=t(4606),i=t(655),f=t(9039),v=t(4488),c=t(4598),d=t(3709),h=t(3763),p=t(9519),y=t(3607),g=[],E=n(g.sort),P=n(g.push),O=f(function(){g.sort(void 0)}),m=f(function(){g.sort(null)}),R=c("sort"),x=!f(function(){if(p)return p<70;if(!(d&&d>3)){if(h)return!0;if(y)return y<603;var A,N,$,B,F="";for(A=65;A<76;A++){switch(N=String.fromCharCode(A),A){case 66:case 69:case 70:case 72:$=3;break;case 68:case 71:$=4;break;default:$=2}for(B=0;B<47;B++)g.push({k:N+B,v:$})}for(g.sort(function(b,U){return U.v-b.v}),B=0;B<g.length;B++)N=g[B].k.charAt(0),F.charAt(F.length-1)!==N&&(F+=N);return"DGBEFHACIJK"!==F}});r({target:"Array",proto:!0,forced:O||!m||!R||!x},{sort:function(A){void 0!==A&&e(A);var N=a(this);if(x)return void 0===A?E(N):E(N,A);var b,U,$=[],B=s(N);for(U=0;U<B;U++)U in N&&P($,N[U]);for(v($,function(F){return function(A,N){return void 0===N?-1:void 0===A?1:void 0!==F?+F(A,N)||0:i(A)>i(N)?1:-1}}(A)),b=s($),U=0;U<b;)N[U]=$[U++];for(;U<B;)u(N,U++);return N}})},7478:(o,l,t)=>{t(7633)("Array")},4554:(o,l,t)=>{var r=t(6518),n=t(8981),e=t(5610),a=t(1291),s=t(6198),u=t(4527),i=t(6837),f=t(1469),v=t(4659),c=t(4606),h=t(597)("splice"),p=Math.max,y=Math.min;r({target:"Array",proto:!0,forced:!h},{splice:function(E,P){var T,D,F,A,N,$,O=n(this),m=s(O),R=e(E,m),x=arguments.length;for(0===x?T=D=0:1===x?(T=0,D=m-R):(T=x-2,D=y(p(a(P),0),m-R)),i(m+T-D),F=f(O,D),A=0;A<D;A++)(N=R+A)in O&&v(F,A,O[N]);if(F.length=D,T<D){for(A=R;A<m-D;A++)$=A+T,(N=A+D)in O?O[$]=O[N]:c(O,$);for(A=m;A>m-D+T;A--)c(O,A-1)}else if(T>D)for(A=m-D;A>R;A--)$=A+T-1,(N=A+D-1)in O?O[$]=O[N]:c(O,$);for(A=0;A<T;A++)O[A+R]=arguments[A+2];return u(O,m-D+T),F}})},9678:(o,l,t)=>{var r=t(6518),n=t(7628),e=t(5397),a=t(6469),s=Array;r({target:"Array",proto:!0},{toReversed:function(){return n(e(this),s)}}),a("toReversed")},7145:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(9306),a=t(5397),s=t(5370),u=t(1743),i=t(6469),f=Array,v=n(u("Array","sort"));r({target:"Array",proto:!0},{toSorted:function(d){void 0!==d&&e(d);var h=a(this),p=s(f,h);return v(p,d)}}),i("toSorted")},1658:(o,l,t)=>{var r=t(6518),n=t(6469),e=t(6837),a=t(6198),s=t(5610),u=t(5397),i=t(1291),f=Array,v=Math.max,c=Math.min;r({target:"Array",proto:!0},{toSpliced:function(h,p){var m,R,x,T,y=u(this),g=a(y),E=s(h,g),P=arguments.length,O=0;for(0===P?m=R=0:1===P?(m=0,R=g-E):(m=P-2,R=c(v(i(p),0),g-E)),x=e(g+m-R),T=f(x);O<E;O++)T[O]=y[O];for(;O<E+m;O++)T[O]=arguments[O-E+2];for(;O<x;O++)T[O]=y[O+R-m];return T}}),n("toSpliced")},237:(o,l,t)=>{t(6469)("flatMap")},3514:(o,l,t)=>{t(6469)("flat")},3609:(o,l,t)=>{var r=t(6518),n=t(8981),e=t(6198),a=t(4527),s=t(4606),u=t(6837);r({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(c){return c instanceof TypeError}}()},{unshift:function(d){var h=n(this),p=e(h),y=arguments.length;if(y){u(p+y);for(var g=p;g--;){var E=g+y;g in h?h[E]=h[g]:s(h,E)}for(var P=0;P<y;P++)h[P]=arguments[P]}return a(h,p+y)}})},1558:(o,l,t)=>{var r=t(6518),n=t(7547),e=t(5397),a=Array;r({target:"Array",proto:!0},{with:function(s,u){return n(e(this),a,s,u)}})},4080:(o,l,t)=>{var r=t(6518),n=t(9504),a=t(9039)(function(){return 120!==new Date(16e11).getYear()}),s=n(Date.prototype.getFullYear);r({target:"Date",proto:!0,forced:a},{getYear:function(){return s(this)-1900}})},9089:(o,l,t)=>{var r=t(6518),n=t(9504),e=Date,a=n(e.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return a(new e)}})},1191:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(1291),a=Date.prototype,s=n(a.getTime),u=n(a.setFullYear);r({target:"Date",proto:!0},{setYear:function(f){s(this);var v=e(f);return u(this,v>=0&&v<=99?v+1900:v)}})},3515:(o,l,t)=>{t(6518)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},1688:(o,l,t)=>{var r=t(6518),n=t(380);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==n},{toISOString:n})},739:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(8981),a=t(2777);r({target:"Date",proto:!0,arity:1,forced:n(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})},{toJSON:function(i){var f=e(this),v=a(f,"number");return"number"!=typeof v||isFinite(v)?f.toISOString():null}})},9572:(o,l,t)=>{var r=t(9297),n=t(6840),e=t(3640),s=t(8227)("toPrimitive"),u=Date.prototype;r(u,s)||n(u,s,e)},3288:(o,l,t)=>{var r=t(9504),n=t(6840),e=Date.prototype,a="Invalid Date",s="toString",u=r(e[s]),i=r(e.getTime);String(new Date(NaN))!==a&&n(e,s,function(){var v=i(this);return v==v?u(this):a})},4170:(o,l,t)=>{var r=t(6518),n=t(566);r({target:"Function",proto:!0,forced:Function.bind!==n},{bind:n})},8957:(o,l,t)=>{var r=t(4901),n=t(34),e=t(4913),a=t(1625),s=t(8227),u=t(283),i=s("hasInstance"),f=Function.prototype;i in f||e.f(f,i,{value:u(function(v){if(!r(this)||!n(v))return!1;var c=this.prototype;return n(c)?a(c,v):v instanceof this},i)})},2010:(o,l,t)=>{var r=t(3724),n=t(350).EXISTS,e=t(9504),a=t(2106),s=Function.prototype,u=e(s.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=e(i.exec);r&&!n&&a(s,"name",{configurable:!0,get:function(){try{return f(i,u(this))[1]}catch{return""}}})},3110:(o,l,t)=>{var r=t(6518),n=t(7751),e=t(8745),a=t(9565),s=t(9504),u=t(9039),i=t(4901),f=t(757),v=t(7680),c=t(6933),d=t(4495),h=String,p=n("JSON","stringify"),y=s(/./.exec),g=s("".charAt),E=s("".charCodeAt),P=s("".replace),O=s(1..toString),m=/[\uD800-\uDFFF]/g,R=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,T=!d||u(function(){var N=n("Symbol")("stringify detection");return"[null]"!==p([N])||"{}"!==p({a:N})||"{}"!==p(Object(N))}),D=u(function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")}),F=function(N,$){var B=v(arguments),b=c($);if(i(b)||void 0!==N&&!f(N))return B[1]=function(U,K){if(i(b)&&(K=a(b,this,h(U),K)),!f(K))return K},e(p,null,B)},A=function(N,$,B){var b=g(B,$-1),U=g(B,$+1);return y(R,N)&&!y(x,U)||y(x,N)&&!y(R,b)?"\\u"+O(E(N,0),16):N};p&&r({target:"JSON",stat:!0,arity:3,forced:T||D},{stringify:function($,B,b){var U=v(arguments),K=e(T?F:p,null,U);return D&&"string"==typeof K?P(K,m,A):K}})},4731:(o,l,t)=>{var r=t(4576);t(687)(r.JSON,"JSON",!0)},8523:(o,l,t)=>{t(6468)("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},t(6938))},7072:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(9306),a=t(7750),s=t(2652),u=t(2248),i=t(6395),f=t(9039),v=u.Map,c=u.has,d=u.get,h=u.set,p=n([].push),y=i||f(function(){return 1!==v.groupBy("ab",function(g){return g}).get("a").length});r({target:"Map",stat:!0,forced:i||y},{groupBy:function(E,P){a(E),e(P);var O=new v,m=0;return s(E,function(R){var x=P(R,m++);c(O,x)?p(d(O,x),R):h(O,x,[R])}),O}})},6033:(o,l,t)=>{t(8523)},3153:(o,l,t)=>{var r=t(6518),n=t(5359),e=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!e||710!==Math.floor(e(Number.MAX_VALUE))||e(1/0)!==1/0},{acosh:function(v){var c=+v;return c<1?NaN:c>94906265.62425156?a(c)+u:n(c-1+s(c-1)*s(c+1))}})},2326:(o,l,t)=>{var r=t(6518),n=Math.asinh,e=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(n&&1/n(0)>0)},{asinh:function s(i){var f=+i;return isFinite(f)&&0!==f?f<0?-s(-f):e(f+a(f*f+1)):f}})},6389:(o,l,t)=>{var r=t(6518),n=Math.atanh,e=Math.log;r({target:"Math",stat:!0,forced:!(n&&1/n(-0)<0)},{atanh:function(u){var i=+u;return 0===i?i:e((1+i)/(1-i))/2}})},4444:(o,l,t)=>{var r=t(6518),n=t(7782),e=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(u){var i=+u;return n(i)*a(e(i),1/3)}})},8085:(o,l,t)=>{var r=t(6518),n=Math.floor,e=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(u){var i=u>>>0;return i?31-n(e(i+.5)*a):32}})},7762:(o,l,t)=>{var r=t(6518),n=t(3250),e=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!e||e(710)===1/0},{cosh:function(f){var v=n(a(f)-1)+1;return(v+1/(v*s*s))*(s/2)}})},5070:(o,l,t)=>{var r=t(6518),n=t(3250);r({target:"Math",stat:!0,forced:n!==Math.expm1},{expm1:n})},605:(o,l,t)=>{t(6518)({target:"Math",stat:!0},{fround:t(5617)})},9469:(o,l,t)=>{var r=t(6518),n=Math.hypot,e=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(i,f){for(var p,y,v=0,c=0,d=arguments.length,h=0;c<d;)h<(p=e(arguments[c++]))?(v=v*(y=h/p)*y+1,h=p):v+=p>0?(y=p/h)*y:p;return h===1/0?1/0:h*a(v)}})},2152:(o,l,t)=>{var r=t(6518),n=t(9039),e=Math.imul;r({target:"Math",stat:!0,forced:n(function(){return-5!==e(4294967295,5)||2!==e.length})},{imul:function(u,i){var f=65535,v=+u,c=+i,d=f&v,h=f&c;return 0|d*h+((f&v>>>16)*h+d*(f&c>>>16)<<16>>>0)}})},5376:(o,l,t)=>{t(6518)({target:"Math",stat:!0},{log10:t(9340)})},6624:(o,l,t)=>{t(6518)({target:"Math",stat:!0},{log1p:t(5359)})},1367:(o,l,t)=>{var r=t(6518),n=Math.log,e=Math.LN2;r({target:"Math",stat:!0},{log2:function(s){return n(s)/e}})},5914:(o,l,t)=>{t(6518)({target:"Math",stat:!0},{sign:t(7782)})},8553:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(3250),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:n(function(){return-2e-17!==Math.sinh(-2e-17)})},{sinh:function(v){var c=+v;return a(c)<1?(e(c)-e(-c))/2:(s(c-1)-s(-c-1))*(u/2)}})},8690:(o,l,t)=>{var r=t(6518),n=t(3250),e=Math.exp;r({target:"Math",stat:!0},{tanh:function(s){var u=+s,i=n(u),f=n(-u);return i===1/0?1:f===1/0?-1:(i-f)/(e(u)+e(-u))}})},479:(o,l,t)=>{t(687)(Math,"Math",!0)},761:(o,l,t)=>{t(6518)({target:"Math",stat:!0},{trunc:t(741)})},2892:(o,l,t)=>{var r=t(6518),n=t(6395),e=t(3724),a=t(4576),s=t(9167),u=t(9504),i=t(2796),f=t(9297),v=t(3167),c=t(1625),d=t(757),h=t(2777),p=t(9039),y=t(8480).f,g=t(7347).f,E=t(4913).f,P=t(1240),O=t(3802).trim,m="Number",R=a[m],x=s[m],T=R.prototype,D=a.TypeError,F=u("".slice),A=u("".charCodeAt),B=i(m,!R(" 0o1")||!R("0b1")||R("+0x1")),U=function(V){var H,J=arguments.length<1?0:R(function(H){var V=h(H,"number");return"bigint"==typeof V?V:function(H){var J,w,z,_,q,dt,mt,xt,V=h(H,"number");if(d(V))throw new D("Cannot convert a Symbol value to a number");if("string"==typeof V&&V.length>2)if(V=O(V),43===(J=A(V,0))||45===J){if(88===(w=A(V,2))||120===w)return NaN}else if(48===J){switch(A(V,1)){case 66:case 98:z=2,_=49;break;case 79:case 111:z=8,_=55;break;default:return+V}for(dt=(q=F(V,2)).length,mt=0;mt<dt;mt++)if((xt=A(q,mt))<48||xt>_)return NaN;return parseInt(q,z)}return+V}(V)}(V));return c(T,H=this)&&p(function(){P(H)})?v(Object(J),this,U):J};U.prototype=T,B&&!n&&(T.constructor=U),r({global:!0,constructor:!0,wrap:!0,forced:B},{Number:U});var K=function(H,V){for(var z,J=e?y(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),w=0;J.length>w;w++)f(V,z=J[w])&&!f(H,z)&&E(H,z,g(V,z))};n&&x&&K(s[m],x),(B||n)&&K(s[m],R)},5374:(o,l,t)=>{t(6518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},5428:(o,l,t)=>{t(6518)({target:"Number",stat:!0},{isFinite:t(360)})},2637:(o,l,t)=>{t(6518)({target:"Number",stat:!0},{isInteger:t(2087)})},150:(o,l,t)=>{t(6518)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},9149:(o,l,t)=>{var r=t(6518),n=t(2087),e=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(s){return n(s)&&e(s)<=9007199254740991}})},4601:(o,l,t)=>{t(6518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},4435:(o,l,t)=>{t(6518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},7220:(o,l,t)=>{var r=t(6518),n=t(3904);r({target:"Number",stat:!0,forced:Number.parseFloat!==n},{parseFloat:n})},5843:(o,l,t)=>{var r=t(6518),n=t(2703);r({target:"Number",stat:!0,forced:Number.parseInt!==n},{parseInt:n})},2337:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(1291),a=t(1240),s=t(2333),u=t(9340),i=t(9039),f=RangeError,v=String,c=isFinite,d=Math.abs,h=Math.floor,p=Math.pow,y=Math.round,g=n(1..toExponential),E=n(s),P=n("".slice),O="-6.9000e-11"===g(-69e-12,4)&&"1.25e+0"===g(1.255,2)&&"1.235e+4"===g(12345,3)&&"3e+1"===g(25,0);r({target:"Number",proto:!0,forced:!O||!(i(function(){g(1,1/0)})&&i(function(){g(1,-1/0)}))||!!i(function(){g(1/0,1/0),g(NaN,1/0)})},{toExponential:function(D){var F=a(this);if(void 0===D)return g(F);var A=e(D);if(!c(F))return String(F);if(A<0||A>20)throw new f("Incorrect fraction digits");if(O)return g(F,A);var $,B,b,U,N="";if(F<0&&(N="-",F=-F),0===F)B=0,$=E("0",A+1);else{var K=u(F);B=h(K);var H=p(10,B-A),V=y(F/H);2*F>=(2*V+1)*H&&(V+=1),V>=p(10,A+1)&&(V/=10,B+=1),$=v(V)}return 0!==A&&($=P($,0,1)+"."+P($,1)),0===B?(b="+",U="0"):(b=B>0?"+":"-",U=v(d(B))),N+($+"e")+b+U}})},9868:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(1291),a=t(1240),s=t(2333),u=t(9039),i=RangeError,f=String,v=Math.floor,c=n(s),d=n("".slice),h=n(1..toFixed),p=function(m,R,x){return 0===R?x:R%2==1?p(m,R-1,x*m):p(m*m,R/2,x)},g=function(m,R,x){for(var T=-1,D=x;++T<6;)m[T]=(D+=R*m[T])%1e7,D=v(D/1e7)},E=function(m,R){for(var x=6,T=0;--x>=0;)m[x]=v((T+=m[x])/R),T=T%R*1e7},P=function(m){for(var R=6,x="";--R>=0;)if(""!==x||0===R||0!==m[R]){var T=f(m[R]);x=""===x?T:x+c("0",7-T.length)+T}return x};r({target:"Number",proto:!0,forced:u(function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)})||!u(function(){h({})})},{toFixed:function(R){var N,$,B,b,x=a(this),T=e(R),D=[0,0,0,0,0,0],F="",A="0";if(T<0||T>20)throw new i("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return f(x);if(x<0&&(F="-",x=-x),x>1e-21)if(N=function(m){for(var R=0,x=m;x>=4096;)R+=12,x/=4096;for(;x>=2;)R+=1,x/=2;return R}(x*p(2,69,1))-69,$=N<0?x*p(2,-N,1):x/p(2,N,1),$*=4503599627370496,(N=52-N)>0){for(g(D,0,$),B=T;B>=7;)g(D,1e7,0),B-=7;for(g(D,p(10,B,1),0),B=N-1;B>=23;)E(D,1<<23),B-=23;E(D,1<<B),g(D,1,1),E(D,2),A=P(D)}else g(D,0,$),g(D,1<<-N,0),A=P(D)+c("0",T);return A=T>0?F+((b=A.length)<=T?"0."+c("0",T-b)+A:d(A,0,b-T)+"."+d(A,b-T)):F+A}})},630:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(9039),a=t(1240),s=n(1..toPrecision);r({target:"Number",proto:!0,forced:e(function(){return"1"!==s(1,void 0)})||!e(function(){s({})})},{toPrecision:function(f){return void 0===f?s(a(this)):s(a(this),f)}})},9085:(o,l,t)=>{var r=t(6518),n=t(4213);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==n},{assign:n})},9904:(o,l,t)=>{t(6518)({target:"Object",stat:!0,sham:!t(3724)},{create:t(2360)})},7427:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(2551),a=t(9306),s=t(8981),u=t(4913);n&&r({target:"Object",proto:!0,forced:e},{__defineGetter__:function(f,v){u.f(s(this),f,{get:a(v),enumerable:!0,configurable:!0})}})},7945:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(6801).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==e,sham:!n},{defineProperties:e})},4185:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(4913).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==e,sham:!n},{defineProperty:e})},7607:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(2551),a=t(9306),s=t(8981),u=t(4913);n&&r({target:"Object",proto:!0,forced:e},{__defineSetter__:function(f,v){u.f(s(this),f,{set:a(v),enumerable:!0,configurable:!0})}})},5506:(o,l,t)=>{var r=t(6518),n=t(2357).entries;r({target:"Object",stat:!0},{entries:function(a){return n(a)}})},2811:(o,l,t)=>{var r=t(6518),n=t(2744),e=t(9039),a=t(34),s=t(3451).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:e(function(){u(1)}),sham:!n},{freeze:function(v){return u&&a(v)?u(s(v)):v}})},3921:(o,l,t)=>{var r=t(6518),n=t(2652),e=t(4659);r({target:"Object",stat:!0},{fromEntries:function(s){var u={};return n(s,function(i,f){e(u,i,f)},{AS_ENTRIES:!0}),u}})},3851:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(5397),a=t(7347).f,s=t(3724);r({target:"Object",stat:!0,forced:!s||n(function(){a(1)}),sham:!s},{getOwnPropertyDescriptor:function(f,v){return a(e(f),v)}})},1278:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(5031),a=t(5397),s=t(7347),u=t(4659);r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(f){for(var y,g,v=a(f),c=s.f,d=e(v),h={},p=0;d.length>p;)void 0!==(g=c(v,y=d[p++]))&&u(h,y,g);return h}})},1480:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(298).f;r({target:"Object",stat:!0,forced:n(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:e})},9773:(o,l,t)=>{var r=t(6518),n=t(4495),e=t(9039),a=t(3717),s=t(8981);r({target:"Object",stat:!0,forced:!n||e(function(){a.f(1)})},{getOwnPropertySymbols:function(f){var v=a.f;return v?v(s(f)):[]}})},875:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(8981),a=t(2787),s=t(2211);r({target:"Object",stat:!0,forced:n(function(){a(1)}),sham:!s},{getPrototypeOf:function(f){return a(e(f))}})},7691:(o,l,t)=>{var r=t(6518),n=t(7751),e=t(9504),a=t(9306),s=t(7750),u=t(6969),i=t(2652),f=t(9039),v=Object.groupBy,c=n("Object","create"),d=e([].push);r({target:"Object",stat:!0,forced:!v||f(function(){return 1!==v("ab",function(p){return p}).a.length})},{groupBy:function(y,g){s(y),a(g);var E=c(null),P=0;return i(y,function(O){var m=u(g(O,P++));m in E?d(E[m],O):E[m]=[O]}),E}})},8347:(o,l,t)=>{t(6518)({target:"Object",stat:!0},{hasOwn:t(9297)})},4052:(o,l,t)=>{var r=t(6518),n=t(4124);r({target:"Object",stat:!0,forced:Object.isExtensible!==n},{isExtensible:n})},4003:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(34),a=t(2195),s=t(5652),u=Object.isFrozen;r({target:"Object",stat:!0,forced:s||n(function(){u(1)})},{isFrozen:function(v){return!(e(v)&&(!s||"ArrayBuffer"!==a(v)))||!!u&&u(v)}})},221:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(34),a=t(2195),s=t(5652),u=Object.isSealed;r({target:"Object",stat:!0,forced:s||n(function(){u(1)})},{isSealed:function(v){return!(e(v)&&(!s||"ArrayBuffer"!==a(v)))||!!u&&u(v)}})},9908:(o,l,t)=>{t(6518)({target:"Object",stat:!0},{is:t(3470)})},9432:(o,l,t)=>{var r=t(6518),n=t(8981),e=t(1072);r({target:"Object",stat:!0,forced:t(9039)(function(){e(1)})},{keys:function(i){return e(n(i))}})},9220:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(2551),a=t(8981),s=t(6969),u=t(2787),i=t(7347).f;n&&r({target:"Object",proto:!0,forced:e},{__lookupGetter__:function(v){var h,c=a(this),d=s(v);do{if(h=i(c,d))return h.get}while(c=u(c))}})},7904:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(2551),a=t(8981),s=t(6969),u=t(2787),i=t(7347).f;n&&r({target:"Object",proto:!0,forced:e},{__lookupSetter__:function(v){var h,c=a(this),d=s(v);do{if(h=i(c,d))return h.set}while(c=u(c))}})},3967:(o,l,t)=>{var r=t(6518),n=t(34),e=t(3451).onFreeze,a=t(2744),s=t(9039),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s(function(){u(1)}),sham:!a},{preventExtensions:function(v){return u&&n(v)?u(e(v)):v}})},3548:(o,l,t)=>{var r=t(3724),n=t(2106),e=t(34),a=t(3925),s=t(8981),u=t(7750),i=Object.getPrototypeOf,f=Object.setPrototypeOf,v=Object.prototype,c="__proto__";if(r&&i&&f&&!(c in v))try{n(v,c,{configurable:!0,get:function(){return i(s(this))},set:function(h){var p=u(this);a(h)&&e(p)&&f(p,h)}})}catch{}},3941:(o,l,t)=>{var r=t(6518),n=t(34),e=t(3451).onFreeze,a=t(2744),s=t(9039),u=Object.seal;r({target:"Object",stat:!0,forced:s(function(){u(1)}),sham:!a},{seal:function(v){return u&&n(v)?u(e(v)):v}})},287:(o,l,t)=>{t(6518)({target:"Object",stat:!0},{setPrototypeOf:t(2967)})},6099:(o,l,t)=>{var r=t(2140),n=t(6840),e=t(3179);r||n(Object.prototype,"toString",e,{unsafe:!0})},6034:(o,l,t)=>{var r=t(6518),n=t(2357).values;r({target:"Object",stat:!0},{values:function(a){return n(a)}})},8459:(o,l,t)=>{var r=t(6518),n=t(3904);r({global:!0,forced:parseFloat!==n},{parseFloat:n})},8940:(o,l,t)=>{var r=t(6518),n=t(2703);r({global:!0,forced:parseInt!==n},{parseInt:n})},5472:(o,l,t)=>{var r=t(6518),n=t(4576),e=t(687);r({global:!0},{Reflect:{}}),e(n.Reflect,"Reflect",!0)},4864:(o,l,t)=>{var r=t(3724),n=t(4576),e=t(9504),a=t(2796),s=t(3167),u=t(6699),i=t(2360),f=t(8480).f,v=t(1625),c=t(788),d=t(655),h=t(1034),p=t(8429),y=t(1056),g=t(6840),E=t(9039),P=t(9297),O=t(1181).enforce,m=t(7633),R=t(8227),x=t(3635),T=t(8814),D=R("match"),F=n.RegExp,A=F.prototype,N=n.SyntaxError,$=e(A.exec),B=e("".charAt),b=e("".replace),U=e("".indexOf),K=e("".slice),H=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,V=/a/g,J=/a/g,w=new F(V)!==V,z=p.MISSED_STICKY,_=p.UNSUPPORTED_Y;if(a("RegExp",r&&(!w||z||x||T||E(function(){return J[D]=!1,F(V)!==V||F(J)===J||"/a/i"!==String(F(V,"i"))})))){for(var xt=function(Dt,ft){var er,_t,bt,or,ar,sr,kt=v(A,this),zt=c(Dt),Zt=void 0===ft,Vt=[],qt=Dt;if(!kt&&zt&&Zt&&Dt.constructor===xt)return Dt;if((zt||v(A,Dt))&&(Dt=Dt.source,Zt&&(ft=h(qt))),Dt=void 0===Dt?"":d(Dt),ft=void 0===ft?"":d(ft),qt=Dt,x&&"dotAll"in V&&(_t=!!ft&&U(ft,"s")>-1)&&(ft=b(ft,/s/g,"")),er=ft,z&&"sticky"in V&&(bt=!!ft&&U(ft,"y")>-1)&&_&&(ft=b(ft,/y/g,"")),T&&(or=function(jt){for(var bt,Dt=jt.length,ft=0,kt="",zt=[],Zt=i(null),Vt=!1,qt=!1,er=0,_t="";ft<=Dt;ft++){if("\\"===(bt=B(jt,ft)))bt+=B(jt,++ft);else if("]"===bt)Vt=!1;else if(!Vt)switch(!0){case"["===bt:Vt=!0;break;case"("===bt:if(kt+=bt,"?:"===K(jt,ft+1,ft+3))continue;$(H,K(jt,ft+1))&&(ft+=2,qt=!0),er++;continue;case">"===bt&&qt:if(""===_t||P(Zt,_t))throw new N("Invalid capture group name");Zt[_t]=!0,zt[zt.length]=[_t,er],qt=!1,_t="";continue}qt?_t+=bt:kt+=bt}return[kt,zt]}(Dt),Dt=or[0],Vt=or[1]),ar=s(F(Dt,ft),kt?this:A,xt),(_t||bt||Vt.length)&&(sr=O(ar),_t&&(sr.dotAll=!0,sr.raw=xt(function(jt){for(var Zt,Dt=jt.length,ft=0,kt="",zt=!1;ft<=Dt;ft++)"\\"!==(Zt=B(jt,ft))?zt||"."!==Zt?("["===Zt?zt=!0:"]"===Zt&&(zt=!1),kt+=Zt):kt+="[\\s\\S]":kt+=Zt+B(jt,++ft);return kt}(Dt),er)),bt&&(sr.sticky=!0),Vt.length&&(sr.groups=Vt)),Dt!==qt)try{u(ar,"source",""===qt?"(?:)":qt)}catch{}return ar},Wt=f(F),wt=0;Wt.length>wt;)y(xt,F,Wt[wt++]);A.constructor=xt,xt.prototype=A,g(n,"RegExp",xt,{constructor:!0})}m("RegExp")},7465:(o,l,t)=>{var r=t(3724),n=t(3635),e=t(2195),a=t(2106),s=t(1181).get,u=RegExp.prototype,i=TypeError;r&&n&&a(u,"dotAll",{configurable:!0,get:function(){if(this!==u){if("RegExp"===e(this))return!!s(this).dotAll;throw new i("Incompatible receiver, RegExp required")}}})},7495:(o,l,t)=>{var r=t(6518),n=t(7323);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},9479:(o,l,t)=>{var r=t(4576),n=t(3724),e=t(2106),a=t(7979),s=t(9039),u=r.RegExp,i=u.prototype;n&&s(function(){var v=!0;try{u(".","d")}catch{v=!1}var c={},d="",h=v?"dgimsy":"gimsy",p=function(P,O){Object.defineProperty(c,P,{get:function(){return d+=O,!0}})},y={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var g in v&&(y.hasIndices="d"),y)p(g,y[g]);return Object.getOwnPropertyDescriptor(i,"flags").get.call(c)!==h||d!==h})&&e(i,"flags",{configurable:!0,get:a})},7745:(o,l,t)=>{var r=t(3724),n=t(8429).MISSED_STICKY,e=t(2195),a=t(2106),s=t(1181).get,u=RegExp.prototype,i=TypeError;r&&n&&a(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===e(this))return!!s(this).sticky;throw new i("Incompatible receiver, RegExp required")}}})},906:(o,l,t)=>{t(7495);var f,v,r=t(6518),n=t(9565),e=t(4901),a=t(8551),s=t(655),u=(f=!1,(v=/[ac]/).exec=function(){return f=!0,/./.exec.apply(this,arguments)},!0===v.test("abc")&&f),i=/./.test;r({target:"RegExp",proto:!0,forced:!u},{test:function(f){var v=a(this),c=s(f),d=v.exec;if(!e(d))return n(i,v,c);var h=n(d,v,c);return null!==h&&(a(h),!0)}})},8781:(o,l,t)=>{var r=t(350).PROPER,n=t(6840),e=t(8551),a=t(655),s=t(9039),u=t(1034),i="toString",f=RegExp.prototype,v=f[i];(s(function(){return"/a/b"!==v.call({source:"a",flags:"b"})})||r&&v.name!==i)&&n(f,i,function(){var p=e(this);return"/"+a(p.source)+"/"+a(u(p))},{unsafe:!0})},2405:(o,l,t)=>{t(6468)("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},t(6938))},7642:(o,l,t)=>{var r=t(6518),n=t(3440);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("difference")},{difference:n})},8004:(o,l,t)=>{var r=t(6518),n=t(9039),e=t(8750);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("intersection")||n(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:e})},3853:(o,l,t)=>{var r=t(6518),n=t(4449);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("isDisjointFrom")},{isDisjointFrom:n})},5876:(o,l,t)=>{var r=t(6518),n=t(3838);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("isSubsetOf")},{isSubsetOf:n})},2475:(o,l,t)=>{var r=t(6518),n=t(8527);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("isSupersetOf")},{isSupersetOf:n})},1415:(o,l,t)=>{t(2405)},5024:(o,l,t)=>{var r=t(6518),n=t(3650);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("symmetricDifference")},{symmetricDifference:n})},1698:(o,l,t)=>{var r=t(6518),n=t(4204);r({target:"Set",proto:!0,real:!0,forced:!t(4916)("union")},{union:n})},9907:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("anchor")},{anchor:function(s){return n(this,"a","name",s)}})},7357:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(7750),a=t(1291),s=t(655),u=t(9039),i=n("".charAt);r({target:"String",proto:!0,forced:u(function(){return"\ud842"!=="\u{20bb7}".at(-2)})},{at:function(c){var d=s(e(this)),h=d.length,p=a(c),y=p>=0?p:h+p;return y<0||y>=h?void 0:i(d,y)}})},1898:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("big")},{big:function(){return n(this,"big","","")}})},5490:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("blink")},{blink:function(){return n(this,"blink","","")}})},8126:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("bold")},{bold:function(){return n(this,"b","","")}})},3860:(o,l,t)=>{var r=t(6518),n=t(8183).codeAt;r({target:"String",proto:!0},{codePointAt:function(a){return n(this,a)}})},9449:(o,l,t)=>{var y,r=t(6518),n=t(7476),e=t(7347).f,a=t(8014),s=t(655),u=t(5749),i=t(7750),f=t(1436),v=t(6395),c=n("".slice),d=Math.min,h=f("endsWith");r({target:"String",proto:!0,forced:!(!v&&!h&&(y=e(String.prototype,"endsWith"),y&&!y.writable)||h)},{endsWith:function(g){var E=s(i(this));u(g);var P=arguments.length>1?arguments[1]:void 0,O=E.length,m=void 0===P?O:d(a(P),O),R=s(g);return c(E,m-R.length,m)===R}})},4298:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("fixed")},{fixed:function(){return n(this,"tt","","")}})},268:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("fontcolor")},{fontcolor:function(s){return n(this,"font","color",s)}})},9546:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("fontsize")},{fontsize:function(s){return n(this,"font","size",s)}})},7337:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(5610),a=RangeError,s=String.fromCharCode,u=String.fromCodePoint,i=n([].join);r({target:"String",stat:!0,arity:1,forced:!!u&&1!==u.length},{fromCodePoint:function(c){for(var y,d=[],h=arguments.length,p=0;h>p;){if(y=+arguments[p++],e(y,1114111)!==y)throw new a(y+" is not a valid code point");d[p]=y<65536?s(y):s(55296+((y-=65536)>>10),y%1024+56320)}return i(d,"")}})},1699:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(5749),a=t(7750),s=t(655),u=t(1436),i=n("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~i(s(a(this)),s(e(v)),arguments.length>1?arguments[1]:void 0)}})},2043:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(7750),a=t(655),s=n("".charCodeAt);r({target:"String",proto:!0},{isWellFormed:function(){for(var i=a(e(this)),f=i.length,v=0;v<f;v++){var c=s(i,v);if(55296==(63488&c)&&(c>=56320||++v>=f||56320!=(64512&s(i,v))))return!1}return!0}})},781:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("italics")},{italics:function(){return n(this,"i","","")}})},7764:(o,l,t)=>{var r=t(8183).charAt,n=t(655),e=t(1181),a=t(1088),s=t(2529),u="String Iterator",i=e.set,f=e.getterFor(u);a(String,"String",function(v){i(this,{type:u,string:n(v),index:0})},function(){var p,c=f(this),d=c.string,h=c.index;return h>=d.length?s(void 0,!0):(p=r(d,h),c.index+=p.length,s(p,!1))})},778:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("link")},{link:function(s){return n(this,"a","href",s)}})},8543:(o,l,t)=>{var r=t(6518),n=t(9565),e=t(7476),a=t(3994),s=t(2529),u=t(7750),i=t(8014),f=t(655),v=t(8551),c=t(4117),d=t(2195),h=t(788),p=t(1034),y=t(5966),g=t(6840),E=t(9039),P=t(8227),O=t(2293),m=t(7829),R=t(6682),x=t(1181),T=t(6395),D=P("matchAll"),F="RegExp String",A=F+" Iterator",N=x.set,$=x.getterFor(A),B=RegExp.prototype,b=TypeError,U=e("".indexOf),K=e("".matchAll),H=!!K&&!E(function(){K("a",/./)}),V=a(function(z,_,q,dt){N(this,{type:A,regexp:z,string:_,global:q,unicode:dt,done:!1})},F,function(){var z=$(this);if(z.done)return s(void 0,!0);var _=z.regexp,q=z.string,dt=R(_,q);return null===dt?(z.done=!0,s(void 0,!0)):z.global?(""===f(dt[0])&&(_.lastIndex=m(q,i(_.lastIndex),z.unicode)),s(dt,!1)):(z.done=!0,s(dt,!1))}),J=function(w){var mt,xt,Wt,z=v(this),_=f(w),q=O(z,RegExp),dt=f(p(z));return mt=new q(q===RegExp?z.source:z,dt),xt=!!~U(dt,"g"),Wt=!!~U(dt,"u"),mt.lastIndex=i(z.lastIndex),new V(mt,_,xt,Wt)};r({target:"String",proto:!0,forced:H},{matchAll:function(z){var q,dt,mt,xt,_=u(this);if(c(z)){if(H)return K(_,z)}else{if(h(z)&&(q=f(u(p(z))),!~U(q,"g")))throw new b("`.matchAll` does not allow non-global regexes");if(H)return K(_,z);if(void 0===(mt=y(z,D))&&T&&"RegExp"===d(z)&&(mt=J),mt)return n(mt,z,_)}return dt=f(_),xt=new RegExp(z,"g"),T?n(J,xt,dt):xt[D](dt)}}),T||D in B||g(B,D,J)},1761:(o,l,t)=>{var r=t(9565),n=t(9228),e=t(8551),a=t(4117),s=t(8014),u=t(655),i=t(7750),f=t(5966),v=t(7829),c=t(6682);n("match",function(d,h,p){return[function(g){var E=i(this),P=a(g)?void 0:f(g,d);return P?r(P,g,E):new RegExp(g)[d](u(E))},function(y){var g=e(this),E=u(y),P=p(h,g,E);if(P.done)return P.value;if(!g.global)return c(g,E);var O=g.unicode;g.lastIndex=0;for(var x,m=[],R=0;null!==(x=c(g,E));){var T=u(x[0]);m[R]=T,""===T&&(g.lastIndex=v(E,s(g.lastIndex),O)),R++}return 0===R?null:m}]})},5701:(o,l,t)=>{var r=t(6518),n=t(533).end;r({target:"String",proto:!0,forced:t(3063)},{padEnd:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}})},8156:(o,l,t)=>{var r=t(6518),n=t(533).start;r({target:"String",proto:!0,forced:t(3063)},{padStart:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}})},5906:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(5397),a=t(8981),s=t(655),u=t(6198),i=n([].push),f=n([].join);r({target:"String",stat:!0},{raw:function(c){var d=e(a(c).raw),h=u(d);if(!h)return"";for(var p=arguments.length,y=[],g=0;;){if(i(y,s(d[g++])),g===h)return f(y,"");g<p&&i(y,s(arguments[g]))}}})},2781:(o,l,t)=>{t(6518)({target:"String",proto:!0},{repeat:t(2333)})},9978:(o,l,t)=>{var r=t(6518),n=t(9565),e=t(9504),a=t(7750),s=t(4901),u=t(4117),i=t(788),f=t(655),v=t(5966),c=t(1034),d=t(2478),h=t(8227),p=t(6395),y=h("replace"),g=TypeError,E=e("".indexOf),P=e("".replace),O=e("".slice),m=Math.max;r({target:"String",proto:!0},{replaceAll:function(x,T){var F,A,N,$,B,b,U,K,H,V,D=a(this),J=0,w="";if(!u(x)){if((F=i(x))&&(A=f(a(c(x))),!~E(A,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(N=v(x,y))return n(N,x,D,T);if(p&&F)return P(f(D),x,T)}for($=f(D),B=f(x),(b=s(T))||(T=f(T)),K=m(1,U=B.length),H=E($,B);-1!==H;)V=b?f(T(B,H,$)):d(B,$,H,[],void 0,T),w+=O($,J,H)+V,J=H+U,H=H+K>$.length?-1:E($,B,H+K);return J<$.length&&(w+=O($,J)),w}})},5440:(o,l,t)=>{var r=t(8745),n=t(9565),e=t(9504),a=t(9228),s=t(9039),u=t(8551),i=t(4901),f=t(4117),v=t(1291),c=t(8014),d=t(655),h=t(7750),p=t(7829),y=t(5966),g=t(2478),E=t(6682),O=t(8227)("replace"),m=Math.max,R=Math.min,x=e([].concat),T=e([].push),D=e("".indexOf),F=e("".slice),A=function(b){return void 0===b?b:String(b)},N="$0"==="a".replace(/./,"$0"),$=!!/./[O]&&""===/./[O]("a","$0");a("replace",function(b,U,K){var H=$?"$":"$0";return[function(J,w){var z=h(this),_=f(J)?void 0:y(J,O);return _?n(_,J,z,w):n(U,d(z),J,w)},function(V,J){var w=u(this),z=d(V);if("string"==typeof J&&-1===D(J,H)&&-1===D(J,"$<")){var _=K(U,w,z,J);if(_.done)return _.value}var q=i(J);q||(J=d(J));var mt,dt=w.global;dt&&(mt=w.unicode,w.lastIndex=0);for(var Wt,xt=[];null!==(Wt=E(w,z))&&(T(xt,Wt),dt);)""===d(Wt[0])&&(w.lastIndex=p(z,c(w.lastIndex),mt));for(var jt="",Dt=0,ft=0;ft<xt.length;ft++){for(var Vt,kt=d((Wt=xt[ft])[0]),zt=m(R(v(Wt.index),z.length),0),Zt=[],qt=1;qt<Wt.length;qt++)T(Zt,A(Wt[qt]));var er=Wt.groups;if(q){var _t=x([kt],Zt,zt,z);void 0!==er&&T(_t,er),Vt=d(r(J,void 0,_t))}else Vt=g(kt,z,zt,Zt,er,J);zt>=Dt&&(jt+=F(z,Dt,zt)+Vt,Dt=zt+kt.length)}return jt+F(z,Dt)}]},!!s(function(){var b=/./;return b.exec=function(){var U=[];return U.groups={a:"7"},U},"7"!=="".replace(b,"$<a>")})||!N||$)},5746:(o,l,t)=>{var r=t(9565),n=t(9228),e=t(8551),a=t(4117),s=t(7750),u=t(3470),i=t(655),f=t(5966),v=t(6682);n("search",function(c,d,h){return[function(y){var g=s(this),E=a(y)?void 0:f(y,c);return E?r(E,y,g):new RegExp(y)[c](i(g))},function(p){var y=e(this),g=i(p),E=h(d,y,g);if(E.done)return E.value;var P=y.lastIndex;u(P,0)||(y.lastIndex=0);var O=v(y,g);return u(y.lastIndex,P)||(y.lastIndex=P),null===O?-1:O.index}]})},9195:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("small")},{small:function(){return n(this,"small","","")}})},744:(o,l,t)=>{var r=t(9565),n=t(9504),e=t(9228),a=t(8551),s=t(4117),u=t(7750),i=t(2293),f=t(7829),v=t(8014),c=t(655),d=t(5966),h=t(6682),p=t(8429),y=t(9039),g=p.UNSUPPORTED_Y,P=Math.min,O=n([].push),m=n("".slice),R=!y(function(){var T=/(?:)/,D=T.exec;T.exec=function(){return D.apply(this,arguments)};var F="ab".split(T);return 2!==F.length||"a"!==F[0]||"b"!==F[1]}),x="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;e("split",function(T,D,F){var A="0".split(void 0,0).length?function(N,$){return void 0===N&&0===$?[]:r(D,this,N,$)}:D;return[function($,B){var b=u(this),U=s($)?void 0:d($,T);return U?r(U,$,b,B):r(A,c(b),$,B)},function(N,$){var B=a(this),b=c(N);if(!x){var U=F(A,B,b,$,A!==D);if(U.done)return U.value}var K=i(B,RegExp),H=B.unicode,J=new K(g?"^(?:"+B.source+")":B,(B.ignoreCase?"i":"")+(B.multiline?"m":"")+(B.unicode?"u":"")+(g?"g":"y")),w=void 0===$?4294967295:$>>>0;if(0===w)return[];if(0===b.length)return null===h(J,b)?[b]:[];for(var z=0,_=0,q=[];_<b.length;){J.lastIndex=g?0:_;var mt,dt=h(J,g?m(b,_):b);if(null===dt||(mt=P(v(J.lastIndex+(g?_:0)),b.length))===z)_=f(b,_,H);else{if(O(q,m(b,z,_)),q.length===w)return q;for(var xt=1;xt<=dt.length-1;xt++)if(O(q,dt[xt]),q.length===w)return q;_=z=mt}}return O(q,m(b,z)),q}]},x||!R,g)},1392:(o,l,t)=>{var y,r=t(6518),n=t(7476),e=t(7347).f,a=t(8014),s=t(655),u=t(5749),i=t(7750),f=t(1436),v=t(6395),c=n("".slice),d=Math.min,h=f("startsWith");r({target:"String",proto:!0,forced:!(!v&&!h&&(y=e(String.prototype,"startsWith"),y&&!y.writable)||h)},{startsWith:function(g){var E=s(i(this));u(g);var P=a(d(arguments.length>1?arguments[1]:void 0,E.length)),O=s(g);return c(E,P,P+O.length)===O}})},6276:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("strike")},{strike:function(){return n(this,"strike","","")}})},8718:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("sub")},{sub:function(){return n(this,"sub","","")}})},375:(o,l,t)=>{var r=t(6518),n=t(9504),e=t(7750),a=t(1291),s=t(655),u=n("".slice),i=Math.max,f=Math.min;r({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(d,h){var E,P,p=s(e(this)),y=p.length,g=a(d);return g===1/0&&(g=0),g<0&&(g=i(y+g,0)),(E=void 0===h?y:a(h))<=0||E===1/0||g>=(P=f(g+E,y))?"":u(p,g,P)}})},6308:(o,l,t)=>{var r=t(6518),n=t(7240);r({target:"String",proto:!0,forced:t(3061)("sup")},{sup:function(){return n(this,"sup","","")}})},7438:(o,l,t)=>{var r=t(6518),n=t(9565),e=t(9504),a=t(7750),s=t(655),u=t(9039),i=Array,f=e("".charAt),v=e("".charCodeAt),c=e([].join),d="".toWellFormed,p=d&&u(function(){return"1"!==n(d,1)});r({target:"String",proto:!0,forced:p},{toWellFormed:function(){var g=s(a(this));if(p)return n(d,g);for(var E=g.length,P=i(E),O=0;O<E;O++){var m=v(g,O);55296!=(63488&m)?P[O]=f(g,O):m>=56320||O+1>=E||56320!=(64512&v(g,O+1))?P[O]="\ufffd":(P[O]=f(g,O),P[++O]=f(g,O))}return c(P,"")}})},9202:(o,l,t)=>{t(3313);var r=t(6518),n=t(8866);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==n},{trimEnd:n})},8934:(o,l,t)=>{var r=t(6518),n=t(3487);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==n},{trimLeft:n})},3313:(o,l,t)=>{var r=t(6518),n=t(8866);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==n},{trimRight:n})},3359:(o,l,t)=>{t(8934);var r=t(6518),n=t(3487);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==n},{trimStart:n})},2762:(o,l,t)=>{var r=t(6518),n=t(3802).trim;r({target:"String",proto:!0,forced:t(706)("trim")},{trim:function(){return n(this)}})},6412:(o,l,t)=>{t(511)("asyncIterator")},6761:(o,l,t)=>{var r=t(6518),n=t(4576),e=t(9565),a=t(9504),s=t(6395),u=t(3724),i=t(4495),f=t(9039),v=t(9297),c=t(1625),d=t(8551),h=t(5397),p=t(6969),y=t(655),g=t(6980),E=t(2360),P=t(1072),O=t(8480),m=t(298),R=t(3717),x=t(7347),T=t(4913),D=t(6801),F=t(8773),A=t(6840),N=t(2106),$=t(5745),B=t(6119),b=t(421),U=t(3392),K=t(8227),H=t(1951),V=t(511),J=t(8242),w=t(687),z=t(1181),_=t(9213).forEach,q=B("hidden"),dt="Symbol",mt="prototype",xt=z.set,Wt=z.getterFor(dt),wt=Object[mt],jt=n.Symbol,Dt=jt&&jt[mt],ft=n.RangeError,kt=n.TypeError,zt=n.QObject,Zt=x.f,Vt=T.f,qt=m.f,er=F.f,_t=a([].push),bt=$("symbols"),or=$("op-symbols"),ar=$("wks"),sr=!zt||!zt[mt]||!zt[mt].findChild,xr=function($t,It,At){var S=Zt(wt,It);S&&delete wt[It],Vt($t,It,At),S&&$t!==wt&&Vt(wt,It,S)},Sr=u&&f(function(){return 7!==E(Vt({},"a",{get:function(){return Vt(this,"a",{value:7}).a}})).a})?xr:Vt,pr=function($t,It){var At=bt[$t]=E(Dt);return xt(At,{type:dt,tag:$t,description:It}),u||(At.description=It),At},gr=function(It,At,S){It===wt&&gr(or,At,S),d(It);var I=p(At);return d(S),v(bt,I)?(S.enumerable?(v(It,q)&&It[q][I]&&(It[q][I]=!1),S=E(S,{enumerable:g(0,!1)})):(v(It,q)||Vt(It,q,g(1,E(null))),It[q][I]=!0),Sr(It,I,S)):Vt(It,I,S)},yr=function(It,At){d(It);var S=h(At),I=P(S).concat(Pr(S));return _(I,function(G){(!u||e(Or,S,G))&&gr(It,G,S[G])}),It},Or=function(It){var At=p(It),S=e(er,this,At);return!(this===wt&&v(bt,At)&&!v(or,At))&&(!(S||!v(this,At)||!v(bt,At)||v(this,q)&&this[q][At])||S)},Ir=function(It,At){var S=h(It),I=p(At);if(S!==wt||!v(bt,I)||v(or,I)){var G=Zt(S,I);return G&&v(bt,I)&&!(v(S,q)&&S[q][I])&&(G.enumerable=!0),G}},Rr=function(It){var At=qt(h(It)),S=[];return _(At,function(I){!v(bt,I)&&!v(b,I)&&_t(S,I)}),S},Pr=function($t){var It=$t===wt,At=qt(It?or:h($t)),S=[];return _(At,function(I){v(bt,I)&&(!It||v(wt,I))&&_t(S,bt[I])}),S};i||(A(Dt=(jt=function(){if(c(Dt,this))throw new kt("Symbol is not a constructor");var It=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,At=U(It),S=function(I){var G=void 0===this?n:this;G===wt&&e(S,or,I),v(G,q)&&v(G[q],At)&&(G[q][At]=!1);var C=g(1,I);try{Sr(G,At,C)}catch(W){if(!(W instanceof ft))throw W;xr(G,At,C)}};return u&&sr&&Sr(wt,At,{configurable:!0,set:S}),pr(At,It)})[mt],"toString",function(){return Wt(this).tag}),A(jt,"withoutSetter",function($t){return pr(U($t),$t)}),F.f=Or,T.f=gr,D.f=yr,x.f=Ir,O.f=m.f=Rr,R.f=Pr,H.f=function($t){return pr(K($t),$t)},u&&(N(Dt,"description",{configurable:!0,get:function(){return Wt(this).description}}),s||A(wt,"propertyIsEnumerable",Or,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!i,sham:!i},{Symbol:jt}),_(P(ar),function($t){V($t)}),r({target:dt,stat:!0,forced:!i},{useSetter:function(){sr=!0},useSimple:function(){sr=!1}}),r({target:"Object",stat:!0,forced:!i,sham:!u},{create:function(It,At){return void 0===At?E(It):yr(E(It),At)},defineProperty:gr,defineProperties:yr,getOwnPropertyDescriptor:Ir}),r({target:"Object",stat:!0,forced:!i},{getOwnPropertyNames:Rr}),J(),w(jt,dt),b[q]=!0},9463:(o,l,t)=>{var r=t(6518),n=t(3724),e=t(4576),a=t(9504),s=t(9297),u=t(4901),i=t(1625),f=t(655),v=t(2106),c=t(7740),d=e.Symbol,h=d&&d.prototype;if(n&&u(d)&&(!("description"in h)||void 0!==d().description)){var p={},y=function(){var T=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),D=i(h,this)?new d(T):void 0===T?d():d(T);return""===T&&(p[D]=!0),D};c(y,d),y.prototype=h,h.constructor=y;var g="Symbol(description detection)"===String(d("description detection")),E=a(h.valueOf),P=a(h.toString),O=/^Symbol\((.*)\)[^)]+$/,m=a("".replace),R=a("".slice);v(h,"description",{configurable:!0,get:function(){var T=E(this);if(s(p,T))return"";var D=P(T),F=g?R(D,7,-1):m(D,O,"$1");return""===F?void 0:F}}),r({global:!0,constructor:!0,forced:!0},{Symbol:y})}},1510:(o,l,t)=>{var r=t(6518),n=t(7751),e=t(9297),a=t(655),s=t(5745),u=t(1296),i=s("string-to-symbol-registry"),f=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{for:function(v){var c=a(v);if(e(i,c))return i[c];var d=n("Symbol")(c);return i[c]=d,f[d]=c,d}})},193:(o,l,t)=>{t(511)("hasInstance")},2168:(o,l,t)=>{t(511)("isConcatSpreadable")},2259:(o,l,t)=>{t(511)("iterator")},2675:(o,l,t)=>{t(6761),t(1510),t(7812),t(3110),t(9773)},7812:(o,l,t)=>{var r=t(6518),n=t(9297),e=t(757),a=t(6823),s=t(5745),u=t(1296),i=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{keyFor:function(v){if(!e(v))throw new TypeError(a(v)+" is not a symbol");if(n(i,v))return i[v]}})},3142:(o,l,t)=>{t(511)("matchAll")},6964:(o,l,t)=>{t(511)("match")},3237:(o,l,t)=>{t(511)("replace")},1833:(o,l,t)=>{t(511)("search")},7947:(o,l,t)=>{t(511)("species")},1073:(o,l,t)=>{t(511)("split")},5700:(o,l,t)=>{var r=t(511),n=t(8242);r("toPrimitive"),n()},8125:(o,l,t)=>{var r=t(7751),n=t(511),e=t(687);n("toStringTag"),e(r("Symbol"),"Symbol")},326:(o,l,t)=>{t(511)("unscopables")},3365:(o,l,t)=>{var R,r=t(2744),n=t(4576),e=t(9504),a=t(6279),s=t(3451),u=t(6468),i=t(4006),f=t(34),v=t(1181).enforce,c=t(9039),d=t(8622),h=Object,p=Array.isArray,y=h.isExtensible,g=h.isFrozen,E=h.isSealed,P=h.freeze,O=h.seal,m=!n.ActiveXObject&&"ActiveXObject"in n,x=function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},T=u("WeakMap",x,i),D=T.prototype,F=e(D.set);if(d)if(m){R=i.getConstructor(x,"WeakMap",!0),s.enable();var N=e(D.delete),$=e(D.has),B=e(D.get);a(D,{delete:function(b){if(f(b)&&!y(b)){var U=v(this);return U.frozen||(U.frozen=new R),N(this,b)||U.frozen.delete(b)}return N(this,b)},has:function(U){if(f(U)&&!y(U)){var K=v(this);return K.frozen||(K.frozen=new R),$(this,U)||K.frozen.has(U)}return $(this,U)},get:function(U){if(f(U)&&!y(U)){var K=v(this);return K.frozen||(K.frozen=new R),$(this,U)?B(this,U):K.frozen.get(U)}return B(this,U)},set:function(U,K){if(f(U)&&!y(U)){var H=v(this);H.frozen||(H.frozen=new R),$(this,U)?F(this,U,K):H.frozen.set(U,K)}else F(this,U,K);return this}})}else r&&c(function(){var b=P([]);return F(new T,b,1),!g(b)})&&a(D,{set:function(U,K){var H;return p(U)&&(g(U)?H=P:E(U)&&(H=O)),F(this,U,K),H&&H(U),this}})},3772:(o,l,t)=>{t(3365)}},o=>{o(o.s=4050)}]);
(self.webpackChunkinsight_search=self.webpackChunkinsight_search||[]).push([[502],{4511:(tt,Ie,B)=>{var h;!function(U,se,De,ee){"use strict";var ue,Y=["","webkit","Moz","MS","ms","o"],Ne=se.createElement("div"),ye="function",de=Math.round,z=Math.abs,H=Date.now;function ne(b,S,P){return setTimeout(Et(b,P),S)}function J(b,S,P){return!!Array.isArray(b)&&(re(b,P[S],P),!0)}function re(b,S,P){var W;if(b)if(b.forEach)b.forEach(S,P);else if(b.length!==ee)for(W=0;W<b.length;)S.call(P,b[W],W,b),W++;else for(W in b)b.hasOwnProperty(W)&&S.call(P,b[W],W,b)}function le(b,S,P){var W="DEPRECATED METHOD: "+S+"\n"+P+" AT \n";return function(){var he=new Error("get-stack-trace"),Me=he&&he.stack?he.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ge=U.console&&(U.console.warn||U.console.log);return Ge&&Ge.call(U.console,W,Me),b.apply(this,arguments)}}ue="function"!=typeof Object.assign?function(S){if(S===ee||null===S)throw new TypeError("Cannot convert undefined or null to object");for(var P=Object(S),W=1;W<arguments.length;W++){var he=arguments[W];if(he!==ee&&null!==he)for(var Me in he)he.hasOwnProperty(Me)&&(P[Me]=he[Me])}return P}:Object.assign;var be=le(function(S,P,W){for(var he=Object.keys(P),Me=0;Me<he.length;)(!W||W&&S[he[Me]]===ee)&&(S[he[Me]]=P[he[Me]]),Me++;return S},"extend","Use `assign`."),mt=le(function(S,P){return be(S,P,!0)},"merge","Use `assign`.");function He(b,S,P){var he,W=S.prototype;(he=b.prototype=Object.create(W)).constructor=b,he._super=W,P&&ue(he,P)}function Et(b,S){return function(){return b.apply(S,arguments)}}function vt(b,S){return typeof b==ye?b.apply(S&&S[0]||ee,S):b}function lt(b,S){return b===ee?S:b}function st(b,S,P){re(Ze(S),function(W){b.addEventListener(W,P,!1)})}function wn(b,S,P){re(Ze(S),function(W){b.removeEventListener(W,P,!1)})}function In(b,S){for(;b;){if(b==S)return!0;b=b.parentNode}return!1}function nt(b,S){return b.indexOf(S)>-1}function Ze(b){return b.trim().split(/\s+/g)}function At(b,S,P){if(b.indexOf&&!P)return b.indexOf(S);for(var W=0;W<b.length;){if(P&&b[W][P]==S||!P&&b[W]===S)return W;W++}return-1}function ut(b){return Array.prototype.slice.call(b,0)}function ur(b,S,P){for(var W=[],he=[],Me=0;Me<b.length;){var Ge=S?b[Me][S]:b[Me];At(he,Ge)<0&&W.push(b[Me]),he[Me]=Ge,Me++}return P&&(W=S?W.sort(function(jt,fn){return jt[S]>fn[S]}):W.sort()),W}function nn(b,S){for(var P,W,he=S[0].toUpperCase()+S.slice(1),Me=0;Me<Y.length;){if((W=(P=Y[Me])?P+he:S)in b)return W;Me++}return ee}var bn=1;function En(b){var S=b.ownerDocument||b;return S.defaultView||S.parentWindow||U}var Tn="ontouchstart"in U,Xr=nn(U,"PointerEvent")!==ee,lr=Tn&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),dr="touch",qt="mouse",vr=25,Ue=1,Nt=4,Bt=8,Mn=1,Fn=2,zn=4,fr=8,_t=16,rt=Fn|zn,Pt=fr|_t,hr=rt|Pt,Or=["x","y"],br=["clientX","clientY"];function Vt(b,S){var P=this;this.manager=b,this.callback=S,this.element=b.element,this.target=b.options.inputTarget,this.domHandler=function(W){vt(b.options.enable,[b])&&P.handler(W)},this.init()}function en(b,S,P){var W=P.pointers.length,he=P.changedPointers.length,Me=S&Ue&&W-he==0,Ge=S&(Nt|Bt)&&W-he==0;P.isFirst=!!Me,P.isFinal=!!Ge,Me&&(b.session={}),P.eventType=S,function Qe(b,S){var P=b.session,W=S.pointers,he=W.length;P.firstInput||(P.firstInput=Rt(S)),he>1&&!P.firstMultiple?P.firstMultiple=Rt(S):1===he&&(P.firstMultiple=!1);var Me=P.firstInput,Ge=P.firstMultiple,Lt=Ge?Ge.center:Me.center,jt=S.center=Sn(W);S.timeStamp=H(),S.deltaTime=S.timeStamp-Me.timeStamp,S.angle=Ft(Lt,jt),S.distance=Wn(Lt,jt),function ge(b,S){var P=S.center,W=b.offsetDelta||{},he=b.prevDelta||{},Me=b.prevInput||{};(S.eventType===Ue||Me.eventType===Nt)&&(he=b.prevDelta={x:Me.deltaX||0,y:Me.deltaY||0},W=b.offsetDelta={x:P.x,y:P.y}),S.deltaX=he.x+(P.x-W.x),S.deltaY=he.y+(P.y-W.y)}(P,S),S.offsetDirection=dn(S.deltaX,S.deltaY);var fn=pr(S.deltaTime,S.deltaX,S.deltaY);S.overallVelocityX=fn.x,S.overallVelocityY=fn.y,S.overallVelocity=z(fn.x)>z(fn.y)?fn.x:fn.y,S.scale=Ge?function at(b,S){return Wn(S[0],S[1],br)/Wn(b[0],b[1],br)}(Ge.pointers,W):1,S.rotation=Ge?function Ti(b,S){return Ft(S[1],S[0],br)+Ft(b[1],b[0],br)}(Ge.pointers,W):0,S.maxPointers=P.prevInput?S.pointers.length>P.prevInput.maxPointers?S.pointers.length:P.prevInput.maxPointers:S.pointers.length,function uo(b,S){var he,Me,Ge,Lt,P=b.lastInterval||S,W=S.timeStamp-P.timeStamp;if(S.eventType!=Bt&&(W>vr||P.velocity===ee)){var jt=S.deltaX-P.deltaX,fn=S.deltaY-P.deltaY,Jn=pr(W,jt,fn);Me=Jn.x,Ge=Jn.y,he=z(Jn.x)>z(Jn.y)?Jn.x:Jn.y,Lt=dn(jt,fn),b.lastInterval=S}else he=P.velocity,Me=P.velocityX,Ge=P.velocityY,Lt=P.direction;S.velocity=he,S.velocityX=Me,S.velocityY=Ge,S.direction=Lt}(P,S);var Jn=b.element;In(S.srcEvent.target,Jn)&&(Jn=S.srcEvent.target),S.target=Jn}(b,P),b.emit("hammer.input",P),b.recognize(P),b.session.prevInput=P}function Rt(b){for(var S=[],P=0;P<b.pointers.length;)S[P]={clientX:de(b.pointers[P].clientX),clientY:de(b.pointers[P].clientY)},P++;return{timeStamp:H(),pointers:S,center:Sn(S),deltaX:b.deltaX,deltaY:b.deltaY}}function Sn(b){var S=b.length;if(1===S)return{x:de(b[0].clientX),y:de(b[0].clientY)};for(var P=0,W=0,he=0;he<S;)P+=b[he].clientX,W+=b[he].clientY,he++;return{x:de(P/S),y:de(W/S)}}function pr(b,S,P){return{x:S/b||0,y:P/b||0}}function dn(b,S){return b===S?Mn:z(b)>=z(S)?b<0?Fn:zn:S<0?fr:_t}function Wn(b,S,P){P||(P=Or);var W=S[P[0]]-b[P[0]],he=S[P[1]]-b[P[1]];return Math.sqrt(W*W+he*he)}function Ft(b,S,P){return P||(P=Or),180*Math.atan2(S[P[1]]-b[P[1]],S[P[0]]-b[P[0]])/Math.PI}Vt.prototype={handler:function(){},init:function(){this.evEl&&st(this.element,this.evEl,this.domHandler),this.evTarget&&st(this.target,this.evTarget,this.domHandler),this.evWin&&st(En(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wn(this.element,this.evEl,this.domHandler),this.evTarget&&wn(this.target,this.evTarget,this.domHandler),this.evWin&&wn(En(this.element),this.evWin,this.domHandler)}};var wt={mousedown:Ue,mousemove:2,mouseup:Nt},xr="mousedown",yr="mousemove mouseup";function Er(){this.evEl=xr,this.evWin=yr,this.pressed=!1,Vt.apply(this,arguments)}He(Er,Vt,{handler:function(S){var P=wt[S.type];P&Ue&&0===S.button&&(this.pressed=!0),2&P&&1!==S.which&&(P=Nt),this.pressed&&(P&Nt&&(this.pressed=!1),this.callback(this.manager,P,{pointers:[S],changedPointers:[S],pointerType:qt,srcEvent:S}))}});var Bo={pointerdown:Ue,pointermove:2,pointerup:Nt,pointercancel:Bt,pointerout:Bt},Io={2:dr,3:"pen",4:qt,5:"kinect"},An="pointerdown",Nn="pointermove pointerup pointercancel";function X(){this.evEl=An,this.evWin=Nn,Vt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}U.MSPointerEvent&&!U.PointerEvent&&(An="MSPointerDown",Nn="MSPointerMove MSPointerUp MSPointerCancel"),He(X,Vt,{handler:function(S){var P=this.store,W=!1,he=S.type.toLowerCase().replace("ms",""),Me=Bo[he],Ge=Io[S.pointerType]||S.pointerType,Lt=Ge==dr,jt=At(P,S.pointerId,"pointerId");Me&Ue&&(0===S.button||Lt)?jt<0&&(P.push(S),jt=P.length-1):Me&(Nt|Bt)&&(W=!0),!(jt<0)&&(P[jt]=S,this.callback(this.manager,Me,{pointers:P,changedPointers:[S],pointerType:Ge,srcEvent:S}),W&&P.splice(jt,1))}});var Z={touchstart:Ue,touchmove:2,touchend:Nt,touchcancel:Bt};function q(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Vt.apply(this,arguments)}function we(b,S){var P=ut(b.touches),W=ut(b.changedTouches);return S&(Nt|Bt)&&(P=ur(P.concat(W),"identifier",!0)),[P,W]}He(q,Vt,{handler:function(S){var P=Z[S.type];if(P===Ue&&(this.started=!0),this.started){var W=we.call(this,S,P);P&(Nt|Bt)&&W[0].length-W[1].length==0&&(this.started=!1),this.callback(this.manager,P,{pointers:W[0],changedPointers:W[1],pointerType:dr,srcEvent:S})}}});var Fe={touchstart:Ue,touchmove:2,touchend:Nt,touchcancel:Bt},$e="touchstart touchmove touchend touchcancel";function It(){this.evTarget=$e,this.targetIds={},Vt.apply(this,arguments)}function Kt(b,S){var P=ut(b.touches),W=this.targetIds;if(S&(2|Ue)&&1===P.length)return W[P[0].identifier]=!0,[P,P];var he,Me,Ge=ut(b.changedTouches),Lt=[],jt=this.target;if(Me=P.filter(function(fn){return In(fn.target,jt)}),S===Ue)for(he=0;he<Me.length;)W[Me[he].identifier]=!0,he++;for(he=0;he<Ge.length;)W[Ge[he].identifier]&&Lt.push(Ge[he]),S&(Nt|Bt)&&delete W[Ge[he].identifier],he++;return Lt.length?[ur(Me.concat(Lt),"identifier",!0),Lt]:void 0}He(It,Vt,{handler:function(S){var P=Fe[S.type],W=Kt.call(this,S,P);W&&this.callback(this.manager,P,{pointers:W[0],changedPointers:W[1],pointerType:dr,srcEvent:S})}});var Ut=2500;function bo(){Vt.apply(this,arguments);var b=Et(this.handler,this);this.touch=new It(this.manager,b),this.mouse=new Er(this.manager,b),this.primaryTouch=null,this.lastTouches=[]}function Zr(b,S){b&Ue?(this.primaryTouch=S.changedPointers[0].identifier,kn.call(this,S)):b&(Nt|Bt)&&kn.call(this,S)}function kn(b){var S=b.changedPointers[0];if(S.identifier===this.primaryTouch){var P={x:S.clientX,y:S.clientY};this.lastTouches.push(P);var W=this.lastTouches;setTimeout(function(){var Me=W.indexOf(P);Me>-1&&W.splice(Me,1)},Ut)}}function To(b){for(var S=b.srcEvent.clientX,P=b.srcEvent.clientY,W=0;W<this.lastTouches.length;W++){var he=this.lastTouches[W],Me=Math.abs(S-he.x),Ge=Math.abs(P-he.y);if(Me<=25&&Ge<=25)return!0}return!1}He(bo,Vt,{handler:function(S,P,W){var Me=W.pointerType==qt;if(!(Me&&W.sourceCapabilities&&W.sourceCapabilities.firesTouchEvents)){if(W.pointerType==dr)Zr.call(this,P,W);else if(Me&&To.call(this,W))return;this.callback(S,P,W)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Qr=nn(Ne.style,"touchAction"),Qn=Qr!==ee,Mo="compute",Yr="manipulation",Cn="none",Dr="pan-x",gn="pan-y",rn=function Pr(){if(!Qn)return!1;var b={},S=U.CSS&&U.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(P){b[P]=!S||U.CSS.supports("touch-action",P)}),b}();function Je(b,S){this.manager=b,this.set(S)}Je.prototype={set:function(b){b==Mo&&(b=this.compute()),Qn&&this.manager.element.style&&rn[b]&&(this.manager.element.style[Qr]=b),this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return re(this.manager.recognizers,function(S){vt(S.options.enable,[S])&&(b=b.concat(S.getTouchAction()))}),function Ln(b){if(nt(b,Cn))return Cn;var S=nt(b,Dr),P=nt(b,gn);return S&&P?Cn:S||P?S?Dr:gn:nt(b,Yr)?Yr:"auto"}(b.join(" "))},preventDefaults:function(b){var S=b.srcEvent,P=b.offsetDirection;if(!this.manager.session.prevented){var W=this.actions,he=nt(W,Cn)&&!rn[Cn],Me=nt(W,gn)&&!rn[gn],Ge=nt(W,Dr)&&!rn[Dr];if(he&&1===b.pointers.length&&b.distance<2&&b.deltaTime<250)return;return Ge&&Me||!(he||Me&&P&rt||Ge&&P&Pt)?void 0:this.preventSrc(S)}S.preventDefault()},preventSrc:function(b){this.manager.session.prevented=!0,b.preventDefault()}};var Rn=1;function Vn(b){this.options=ue({},this.defaults,b||{}),this.id=function pn(){return bn++}(),this.manager=null,this.options.enable=lt(this.options.enable,!0),this.state=Rn,this.simultaneous={},this.requireFail=[]}function A(b){return 16&b?"cancel":8&b?"end":4&b?"move":2&b?"start":""}function L(b){return b==_t?"down":b==fr?"up":b==Fn?"left":b==zn?"right":""}function k(b,S){var P=S.manager;return P?P.get(b):b}function K(){Vn.apply(this,arguments)}function ae(){K.apply(this,arguments),this.pX=null,this.pY=null}function me(){K.apply(this,arguments)}function ve(){Vn.apply(this,arguments),this._timer=null,this._input=null}function xe(){K.apply(this,arguments)}function Re(){K.apply(this,arguments)}function ht(){Vn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function yt(b,S){return(S=S||{}).recognizers=lt(S.recognizers,yt.defaults.preset),new kt(b,S)}function kt(b,S){this.options=ue({},yt.defaults,S||{}),this.options.inputTarget=this.options.inputTarget||b,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=b,this.input=function Kr(b){return new(b.options.inputClass||(Xr?X:lr?It:Tn?bo:Er))(b,en)}(this),this.touchAction=new Je(this,this.options.touchAction),Qt(this,!0),re(this.options.recognizers,function(P){var W=this.add(new P[0](P[1]));P[2]&&W.recognizeWith(P[2]),P[3]&&W.requireFailure(P[3])},this)}function Qt(b,S){var W,P=b.element;P.style&&(re(b.options.cssProps,function(he,Me){W=nn(P.style,Me),S?(b.oldCssProps[W]=P.style[W],P.style[W]=he):P.style[W]=b.oldCssProps[W]||""}),S||(b.oldCssProps={}))}Vn.prototype={defaults:{},set:function(b){return ue(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(b){if(J(b,"recognizeWith",this))return this;var S=this.simultaneous;return S[(b=k(b,this)).id]||(S[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function(b){return J(b,"dropRecognizeWith",this)||(b=k(b,this),delete this.simultaneous[b.id]),this},requireFailure:function(b){if(J(b,"requireFailure",this))return this;var S=this.requireFail;return-1===At(S,b=k(b,this))&&(S.push(b),b.requireFailure(this)),this},dropRequireFailure:function(b){if(J(b,"dropRequireFailure",this))return this;b=k(b,this);var S=At(this.requireFail,b);return S>-1&&this.requireFail.splice(S,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(b){return!!this.simultaneous[b.id]},emit:function(b){var S=this,P=this.state;function W(he){S.manager.emit(he,b)}P<8&&W(S.options.event+A(P)),W(S.options.event),b.additionalEvent&&W(b.additionalEvent),P>=8&&W(S.options.event+A(P))},tryEmit:function(b){if(this.canEmit())return this.emit(b);this.state=32},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(32|Rn)))return!1;b++}return!0},recognize:function(b){var S=ue({},b);if(!vt(this.options.enable,[this,S]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Rn),this.state=this.process(S),30&this.state&&this.tryEmit(S)},process:function(b){},getTouchAction:function(){},reset:function(){}},He(K,Vn,{defaults:{pointers:1},attrTest:function(b){var S=this.options.pointers;return 0===S||b.pointers.length===S},process:function(b){var S=this.state,P=b.eventType,W=6&S,he=this.attrTest(b);return W&&(P&Bt||!he)?16|S:W||he?P&Nt?8|S:2&S?4|S:2:32}}),He(ae,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:hr},getTouchAction:function(){var b=this.options.direction,S=[];return b&rt&&S.push(gn),b&Pt&&S.push(Dr),S},directionTest:function(b){var S=this.options,P=!0,W=b.distance,he=b.direction,Me=b.deltaX,Ge=b.deltaY;return he&S.direction||(S.direction&rt?(he=0===Me?Mn:Me<0?Fn:zn,P=Me!=this.pX,W=Math.abs(b.deltaX)):(he=0===Ge?Mn:Ge<0?fr:_t,P=Ge!=this.pY,W=Math.abs(b.deltaY))),b.direction=he,P&&W>S.threshold&&he&S.direction},attrTest:function(b){return K.prototype.attrTest.call(this,b)&&(2&this.state||!(2&this.state)&&this.directionTest(b))},emit:function(b){this.pX=b.deltaX,this.pY=b.deltaY;var S=L(b.direction);S&&(b.additionalEvent=this.options.event+S),this._super.emit.call(this,b)}}),He(me,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Cn]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||2&this.state)},emit:function(b){1!==b.scale&&(b.additionalEvent=this.options.event+(b.scale<1?"in":"out")),this._super.emit.call(this,b)}}),He(ve,Vn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(b){var S=this.options,P=b.pointers.length===S.pointers,W=b.distance<S.threshold,he=b.deltaTime>S.time;if(this._input=b,!W||!P||b.eventType&(Nt|Bt)&&!he)this.reset();else if(b.eventType&Ue)this.reset(),this._timer=ne(function(){this.state=8,this.tryEmit()},S.time,this);else if(b.eventType&Nt)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(b){8===this.state&&(b&&b.eventType&Nt?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=H(),this.manager.emit(this.options.event,this._input)))}}),He(xe,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Cn]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||2&this.state)}}),He(Re,K,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:rt|Pt,pointers:1},getTouchAction:function(){return ae.prototype.getTouchAction.call(this)},attrTest:function(b){var P,S=this.options.direction;return S&(rt|Pt)?P=b.overallVelocity:S&rt?P=b.overallVelocityX:S&Pt&&(P=b.overallVelocityY),this._super.attrTest.call(this,b)&&S&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&z(P)>this.options.velocity&&b.eventType&Nt},emit:function(b){var S=L(b.offsetDirection);S&&this.manager.emit(this.options.event+S,b),this.manager.emit(this.options.event,b)}}),He(ht,Vn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Yr]},process:function(b){var S=this.options,P=b.pointers.length===S.pointers,W=b.distance<S.threshold,he=b.deltaTime<S.time;if(this.reset(),b.eventType&Ue&&0===this.count)return this.failTimeout();if(W&&he&&P){if(b.eventType!=Nt)return this.failTimeout();var Me=!this.pTime||b.timeStamp-this.pTime<S.interval,Ge=!this.pCenter||Wn(this.pCenter,b.center)<S.posThreshold;if(this.pTime=b.timeStamp,this.pCenter=b.center,Ge&&Me?this.count+=1:this.count=1,this._input=b,0==this.count%S.taps)return this.hasRequireFailures()?(this._timer=ne(function(){this.state=8,this.tryEmit()},S.interval,this),2):8}return 32},failTimeout:function(){return this._timer=ne(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),yt.VERSION="2.0.7",yt.defaults={domEvents:!1,touchAction:Mo,enable:!0,inputTarget:null,inputClass:null,preset:[[xe,{enable:!1}],[me,{enable:!1},["rotate"]],[Re,{direction:rt}],[ae,{direction:rt},["swipe"]],[ht],[ht,{event:"doubletap",taps:2},["tap"]],[ve]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},kt.prototype={set:function(b){return ue(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?2:1},recognize:function(b){var S=this.session;if(!S.stopped){this.touchAction.preventDefaults(b);var P,W=this.recognizers,he=S.curRecognizer;(!he||he&&8&he.state)&&(he=S.curRecognizer=null);for(var Me=0;Me<W.length;)P=W[Me],2===S.stopped||he&&P!=he&&!P.canRecognizeWith(he)?P.reset():P.recognize(b),!he&&14&P.state&&(he=S.curRecognizer=P),Me++}},get:function(b){if(b instanceof Vn)return b;for(var S=this.recognizers,P=0;P<S.length;P++)if(S[P].options.event==b)return S[P];return null},add:function(b){if(J(b,"add",this))return this;var S=this.get(b.options.event);return S&&this.remove(S),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function(b){if(J(b,"remove",this))return this;if(b=this.get(b)){var S=this.recognizers,P=At(S,b);-1!==P&&(S.splice(P,1),this.touchAction.update())}return this},on:function(b,S){if(b!==ee&&S!==ee){var P=this.handlers;return re(Ze(b),function(W){P[W]=P[W]||[],P[W].push(S)}),this}},off:function(b,S){if(b!==ee){var P=this.handlers;return re(Ze(b),function(W){S?P[W]&&P[W].splice(At(P[W],S),1):delete P[W]}),this}},emit:function(b,S){this.options.domEvents&&function pt(b,S){var P=se.createEvent("Event");P.initEvent(b,!0,!0),P.gesture=S,S.target.dispatchEvent(P)}(b,S);var P=this.handlers[b]&&this.handlers[b].slice();if(P&&P.length){S.type=b,S.preventDefault=function(){S.srcEvent.preventDefault()};for(var W=0;W<P.length;)P[W](S),W++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ue(yt,{INPUT_START:Ue,INPUT_MOVE:2,INPUT_END:Nt,INPUT_CANCEL:Bt,STATE_POSSIBLE:Rn,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Mn,DIRECTION_LEFT:Fn,DIRECTION_RIGHT:zn,DIRECTION_UP:fr,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:rt,DIRECTION_VERTICAL:Pt,DIRECTION_ALL:hr,Manager:kt,Input:Vt,TouchAction:Je,TouchInput:It,MouseInput:Er,PointerEventInput:X,TouchMouseInput:bo,SingleTouchInput:q,Recognizer:Vn,AttrRecognizer:K,Tap:ht,Pan:ae,Swipe:Re,Pinch:me,Rotate:xe,Press:ve,on:st,off:wn,each:re,merge:mt,extend:be,assign:ue,inherit:He,bindFn:Et,prefixed:nn}),(typeof U<"u"?U:typeof self<"u"?self:{}).Hammer=yt,(h=function(){return yt}.call(Ie,B,Ie,tt))!==ee&&(tt.exports=h)}(window,document)},9928:(tt,Ie,B)=>{"use strict";B.d(Ie,{t:()=>se});var h=B(5254),U=B(2145);class se extends h.B7{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const Y=super._subscribe(ee);return Y&&!Y.closed&&ee.next(this._value),Y}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new U.P;return this._value}next(ee){super.next(this._value=ee)}}},5817:(tt,Ie,B)=>{"use strict";B.d(Ie,{c:()=>de});var h=B(762),se=B(91),De=B(178),Y=B(5722),Ne=B(8167),ye=B(614);let de=(()=>{class H{constructor(J){this._isScalar=!1,J&&(this._subscribe=J)}lift(J){const re=new H;return re.source=this,re.operator=J,re}subscribe(J,re,le){const{operator:ue}=this,be=function ee(H,ne,J){if(H){if(H instanceof h.v)return H;if(H[se.D])return H[se.D]()}return H||ne||J?new h.v(H,ne,J):new h.v(De.I)}(J,re,le);if(be.add(ue?ue.call(be,this.source):this.source||ye.$.useDeprecatedSynchronousErrorHandling&&!be.syncErrorThrowable?this._subscribe(be):this._trySubscribe(be)),ye.$.useDeprecatedSynchronousErrorHandling&&be.syncErrorThrowable&&(be.syncErrorThrowable=!1,be.syncErrorThrown))throw be.syncErrorValue;return be}_trySubscribe(J){try{return this._subscribe(J)}catch(re){ye.$.useDeprecatedSynchronousErrorHandling&&(J.syncErrorThrown=!0,J.syncErrorValue=re),function U(H){for(;H;){const{closed:ne,destination:J,isStopped:re}=H;if(ne||re)return!1;H=J&&J instanceof h.v?J:null}return!0}(J)?J.error(re):console.warn(re)}}forEach(J,re){return new(re=z(re))((le,ue)=>{let be;be=this.subscribe(mt=>{try{J(mt)}catch(He){ue(He),be&&be.unsubscribe()}},ue,le)})}_subscribe(J){const{source:re}=this;return re&&re.subscribe(J)}[Y.s](){return this}pipe(...J){return 0===J.length?this:(0,Ne.m)(J)(this)}toPromise(J){return new(J=z(J))((re,le)=>{let ue;this.subscribe(be=>ue=be,be=>le(be),()=>re(ue))})}}return H.create=ne=>new H(ne),H})();function z(H){if(H||(H=ye.$.Promise||Promise),!H)throw new Error("no Promise impl found");return H}},178:(tt,Ie,B)=>{"use strict";B.d(Ie,{I:()=>se});var h=B(614),U=B(8253);const se={closed:!0,next(De){},error(De){if(h.$.useDeprecatedSynchronousErrorHandling)throw De;(0,U.T)(De)},complete(){}}},5254:(tt,Ie,B)=>{"use strict";B.d(Ie,{B7:()=>ye,PJ:()=>Ne});var h=B(5817),U=B(762),se=B(4337),De=B(2145);class ee extends se.y{constructor(H,ne){super(),this.subject=H,this.subscriber=ne,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const H=this.subject,ne=H.observers;if(this.subject=null,!ne||0===ne.length||H.isStopped||H.closed)return;const J=ne.indexOf(this.subscriber);-1!==J&&ne.splice(J,1)}}var Y=B(91);class Ne extends U.v{constructor(H){super(H),this.destination=H}}let ye=(()=>{class z extends h.c{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Y.D](){return new Ne(this)}lift(ne){const J=new de(this,this);return J.operator=ne,J}next(ne){if(this.closed)throw new De.P;if(!this.isStopped){const{observers:J}=this,re=J.length,le=J.slice();for(let ue=0;ue<re;ue++)le[ue].next(ne)}}error(ne){if(this.closed)throw new De.P;this.hasError=!0,this.thrownError=ne,this.isStopped=!0;const{observers:J}=this,re=J.length,le=J.slice();for(let ue=0;ue<re;ue++)le[ue].error(ne);this.observers.length=0}complete(){if(this.closed)throw new De.P;this.isStopped=!0;const{observers:ne}=this,J=ne.length,re=ne.slice();for(let le=0;le<J;le++)re[le].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ne){if(this.closed)throw new De.P;return super._trySubscribe(ne)}_subscribe(ne){if(this.closed)throw new De.P;return this.hasError?(ne.error(this.thrownError),se.y.EMPTY):this.isStopped?(ne.complete(),se.y.EMPTY):(this.observers.push(ne),new ee(this,ne))}asObservable(){const ne=new h.c;return ne.source=this,ne}}return z.create=(H,ne)=>new de(H,ne),z})();class de extends ye{constructor(H,ne){super(),this.destination=H,this.source=ne}next(H){const{destination:ne}=this;ne&&ne.next&&ne.next(H)}error(H){const{destination:ne}=this;ne&&ne.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:ne}=this;return ne?this.source.subscribe(H):se.y.EMPTY}}},762:(tt,Ie,B)=>{"use strict";B.d(Ie,{v:()=>Ne});var h=B(8099),U=B(178),se=B(4337),De=B(91),ee=B(614),Y=B(8253);class Ne extends se.y{constructor(z,H,ne){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.I;break;case 1:if(!z){this.destination=U.I;break}if("object"==typeof z){z instanceof Ne?(this.syncErrorThrowable=z.syncErrorThrowable,this.destination=z,z.add(this)):(this.syncErrorThrowable=!0,this.destination=new ye(this,z));break}default:this.syncErrorThrowable=!0,this.destination=new ye(this,z,H,ne)}}[De.D](){return this}static create(z,H,ne){const J=new Ne(z,H,ne);return J.syncErrorThrowable=!1,J}next(z){this.isStopped||this._next(z)}error(z){this.isStopped||(this.isStopped=!0,this._error(z))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(z){this.destination.next(z)}_error(z){this.destination.error(z),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:z}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=z,this}}class ye extends Ne{constructor(z,H,ne,J){super(),this._parentSubscriber=z;let re,le=this;(0,h.T)(H)?re=H:H&&(re=H.next,ne=H.error,J=H.complete,H!==U.I&&(le=Object.create(H),(0,h.T)(le.unsubscribe)&&this.add(le.unsubscribe.bind(le)),le.unsubscribe=this.unsubscribe.bind(this))),this._context=le,this._next=re,this._error=ne,this._complete=J}next(z){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ee.$.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,z)&&this.unsubscribe():this.__tryOrUnsub(this._next,z)}}error(z){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:ne}=ee.$;if(this._error)ne&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,z),this.unsubscribe()):(this.__tryOrUnsub(this._error,z),this.unsubscribe());else if(H.syncErrorThrowable)ne?(H.syncErrorValue=z,H.syncErrorThrown=!0):(0,Y.T)(z),this.unsubscribe();else{if(this.unsubscribe(),ne)throw z;(0,Y.T)(z)}}}complete(){if(!this.isStopped){const{_parentSubscriber:z}=this;if(this._complete){const H=()=>this._complete.call(this._context);ee.$.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?(this.__tryOrSetError(z,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(z,H){try{z.call(this._context,H)}catch(ne){if(this.unsubscribe(),ee.$.useDeprecatedSynchronousErrorHandling)throw ne;(0,Y.T)(ne)}}__tryOrSetError(z,H,ne){if(!ee.$.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,ne)}catch(J){return ee.$.useDeprecatedSynchronousErrorHandling?(z.syncErrorValue=J,z.syncErrorThrown=!0,!0):((0,Y.T)(J),!0)}return!1}_unsubscribe(){const{_parentSubscriber:z}=this;this._context=null,this._parentSubscriber=null,z.unsubscribe()}}},4337:(tt,Ie,B)=>{"use strict";B.d(Ie,{y:()=>Y});var h=B(7354),U=B(1456),se=B(8099);const ee=(()=>{function ye(de){return Error.call(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((z,H)=>`${H+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de,this}return ye.prototype=Object.create(Error.prototype),ye})();class Y{constructor(de){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,de&&(this._ctorUnsubscribe=!0,this._unsubscribe=de)}unsubscribe(){let de;if(this.closed)return;let{_parentOrParents:z,_ctorUnsubscribe:H,_unsubscribe:ne,_subscriptions:J}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,z instanceof Y)z.remove(this);else if(null!==z)for(let re=0;re<z.length;++re)z[re].remove(this);if((0,se.T)(ne)){H&&(this._unsubscribe=void 0);try{ne.call(this)}catch(re){de=re instanceof ee?Ne(re.errors):[re]}}if((0,h.c)(J)){let re=-1,le=J.length;for(;++re<le;){const ue=J[re];if((0,U.G)(ue))try{ue.unsubscribe()}catch(be){de=de||[],be instanceof ee?de=de.concat(Ne(be.errors)):de.push(be)}}}if(de)throw new ee(de)}add(de){let z=de;if(!de)return Y.EMPTY;switch(typeof de){case"function":z=new Y(de);case"object":if(z===this||z.closed||"function"!=typeof z.unsubscribe)return z;if(this.closed)return z.unsubscribe(),z;if(!(z instanceof Y)){const J=z;z=new Y,z._subscriptions=[J]}break;default:throw new Error("unrecognized teardown "+de+" added to Subscription.")}let{_parentOrParents:H}=z;if(null===H)z._parentOrParents=this;else if(H instanceof Y){if(H===this)return z;z._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return z;H.push(this)}const ne=this._subscriptions;return null===ne?this._subscriptions=[z]:ne.push(z),z}remove(de){const z=this._subscriptions;if(z){const H=z.indexOf(de);-1!==H&&z.splice(H,1)}}}var ye;function Ne(ye){return ye.reduce((de,z)=>de.concat(z instanceof ee?z.errors:z),[])}Y.EMPTY=((ye=new Y).closed=!0,ye)},614:(tt,Ie,B)=>{"use strict";B.d(Ie,{$:()=>U});let h=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(se){if(se){const De=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+De.stack)}else h&&console.log("RxJS: Back to a better error behavior. Thank you. <3");h=se},get useDeprecatedSynchronousErrorHandling(){return h}}},3004:(tt,Ie,B)=>{"use strict";B.d(Ie,{gn:()=>Y,tS:()=>ye,zA:()=>De});var h=B(762),U=B(5817),se=B(135);class De extends h.v{constructor(z){super(),this.parent=z}_next(z){this.parent.notifyNext(z)}_error(z){this.parent.notifyError(z),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Y extends h.v{notifyNext(z){this.destination.next(z)}notifyError(z){this.destination.error(z)}notifyComplete(){this.destination.complete()}}function ye(de,z){if(z.closed)return;if(de instanceof U.c)return de.subscribe(z);let H;try{H=(0,se.i)(de)(z)}catch(ne){z.error(ne)}return H}},4787:(tt,Ie,B)=>{"use strict";B.d(Ie,{H:()=>le});var h=B(5817),U=B(135),se=B(4337),De=B(5722),Ne=B(2496),ye=B(7765),H=B(5998),ne=B(5253);function le(ue,be){return be?function re(ue,be){if(null!=ue){if(function z(ue){return ue&&"function"==typeof ue[De.s]}(ue))return function ee(ue,be){return new h.c(mt=>{const He=new se.y;return He.add(be.schedule(()=>{const Et=ue[De.s]();He.add(Et.subscribe({next(vt){He.add(be.schedule(()=>mt.next(vt)))},error(vt){He.add(be.schedule(()=>mt.error(vt)))},complete(){He.add(be.schedule(()=>mt.complete()))}}))})),He})}(ue,be);if((0,H.y)(ue))return function Y(ue,be){return new h.c(mt=>{const He=new se.y;return He.add(be.schedule(()=>ue.then(Et=>{He.add(be.schedule(()=>{mt.next(Et),He.add(be.schedule(()=>mt.complete()))}))},Et=>{He.add(be.schedule(()=>mt.error(Et)))}))),He})}(ue,be);if((0,ne.X)(ue))return(0,Ne.V)(ue,be);if(function J(ue){return ue&&"function"==typeof ue[ye.lJ]}(ue)||"string"==typeof ue)return function de(ue,be){if(!ue)throw new Error("Iterable cannot be null");return new h.c(mt=>{const He=new se.y;let Et;return He.add(()=>{Et&&"function"==typeof Et.return&&Et.return()}),He.add(be.schedule(()=>{Et=ue[ye.lJ](),He.add(be.schedule(function(){if(mt.closed)return;let vt,lt;try{const st=Et.next();vt=st.value,lt=st.done}catch(st){return void mt.error(st)}lt?mt.complete():(mt.next(vt),this.schedule())}))})),He})}(ue,be)}throw new TypeError((null!==ue&&typeof ue||ue)+" is not observable")}(ue,be):ue instanceof h.c?ue:new h.c((0,U.i)(ue))}},4279:(tt,Ie,B)=>{"use strict";B.d(Ie,{c:()=>De});var h=B(5817),U=B(4385),se=B(2496);function De(ee,Y){return Y?(0,se.V)(ee,Y):new h.c((0,U.v)(ee))}},3586:(tt,Ie,B)=>{"use strict";B.d(Ie,{R:()=>Y});var h=B(5817),U=B(7354),se=B(8099),De=B(5006);function Y(H,ne,J,re){return(0,se.T)(J)&&(re=J,J=void 0),re?Y(H,ne,J).pipe((0,De.T)(le=>(0,U.c)(le)?re(...le):re(le))):new h.c(le=>{Ne(H,ne,function ue(be){le.next(arguments.length>1?Array.prototype.slice.call(arguments):be)},le,J)})}function Ne(H,ne,J,re,le){let ue;if(function z(H){return H&&"function"==typeof H.addEventListener&&"function"==typeof H.removeEventListener}(H)){const be=H;H.addEventListener(ne,J,le),ue=()=>be.removeEventListener(ne,J,le)}else if(function de(H){return H&&"function"==typeof H.on&&"function"==typeof H.off}(H)){const be=H;H.on(ne,J),ue=()=>be.off(ne,J)}else if(function ye(H){return H&&"function"==typeof H.addListener&&"function"==typeof H.removeListener}(H)){const be=H;H.addListener(ne,J),ue=()=>be.removeListener(ne,J)}else{if(!H||!H.length)throw new TypeError("Invalid event target");for(let be=0,mt=H.length;be<mt;be++)Ne(H[be],ne,J,re,le)}re.add(ue)}},4421:(tt,Ie,B)=>{"use strict";B.d(Ie,{of:()=>De});var h=B(2234),U=B(4279),se=B(2496);function De(...ee){let Y=ee[ee.length-1];return(0,h.m)(Y)?(ee.pop(),(0,se.V)(ee,Y)):(0,U.c)(ee)}},3574:(tt,Ie,B)=>{"use strict";B.d(Ie,{H:()=>U});var h=B(8456);function U(se,De){return(0,h.ZZ)(se,De,1)}},3383:(tt,Ie,B)=>{"use strict";B.d(Ie,{B:()=>de});var h=B(762),U=B(4337);class se extends U.y{constructor(re,le){super()}schedule(re,le=0){return this}}let ee=(()=>{class J{constructor(le,ue=J.now){this.SchedulerAction=le,this.now=ue}schedule(le,ue=0,be){return new this.SchedulerAction(this,le).schedule(be,ue)}}return J.now=()=>Date.now(),J})();class Y extends ee{constructor(re,le=ee.now){super(re,()=>Y.delegate&&Y.delegate!==this?Y.delegate.now():le()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(re,le=0,ue){return Y.delegate&&Y.delegate!==this?Y.delegate.schedule(re,le,ue):super.schedule(re,le,ue)}flush(re){const{actions:le}=this;if(this.active)return void le.push(re);let ue;this.active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=le.shift());if(this.active=!1,ue){for(;re=le.shift();)re.unsubscribe();throw ue}}}const ye=new Y(class De extends se{constructor(re,le){super(re,le),this.scheduler=re,this.work=le,this.pending=!1}schedule(re,le=0){if(this.closed)return this;this.state=re;const ue=this.id,be=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(be,ue,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(be,this.id,le),this}requestAsyncId(re,le,ue=0){return setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,le,ue=0){if(null!==ue&&this.delay===ue&&!1===this.pending)return le;clearInterval(le)}execute(re,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,le){let be,ue=!1;try{this.work(re)}catch(mt){ue=!0,be=!!mt&&mt||new Error(mt)}if(ue)return this.unsubscribe(),be}_unsubscribe(){const re=this.id,le=this.scheduler,ue=le.actions,be=ue.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==be&&ue.splice(be,1),null!=re&&(this.id=this.recycleAsyncId(le,re,null)),this.delay=null}});function de(J,re=ye){return le=>le.lift(new z(J,re))}class z{constructor(re,le){this.dueTime=re,this.scheduler=le}call(re,le){return le.subscribe(new H(re,this.dueTime,this.scheduler))}}class H extends h.v{constructor(re,le,ue){super(re),this.dueTime=le,this.scheduler=ue,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(re){this.clearDebounce(),this.lastValue=re,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ne,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:re}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(re)}}clearDebounce(){const re=this.debouncedSubscription;null!==re&&(this.remove(re),re.unsubscribe(),this.debouncedSubscription=null)}}function ne(J){J.debouncedNext()}},8728:(tt,Ie,B)=>{"use strict";B.d(Ie,{p:()=>U});var h=B(762);function U(ee,Y){return function(ye){return ye.lift(new se(ee,Y))}}class se{constructor(Y,Ne){this.predicate=Y,this.thisArg=Ne}call(Y,Ne){return Ne.subscribe(new De(Y,this.predicate,this.thisArg))}}class De extends h.v{constructor(Y,Ne,ye){super(Y),this.predicate=Ne,this.thisArg=ye,this.count=0}_next(Y){let Ne;try{Ne=this.predicate.call(this.thisArg,Y,this.count++)}catch(ye){return void this.destination.error(ye)}Ne&&this.destination.next(Y)}}},7312:(tt,Ie,B)=>{"use strict";B.d(Ie,{j:()=>se});var h=B(762),U=B(4337);function se(Y){return Ne=>Ne.lift(new De(Y))}class De{constructor(Ne){this.callback=Ne}call(Ne,ye){return ye.subscribe(new ee(Ne,this.callback))}}class ee extends h.v{constructor(Ne,ye){super(Ne),this.add(new U.y(ye))}}},5006:(tt,Ie,B)=>{"use strict";B.d(Ie,{T:()=>U});var h=B(762);function U(ee,Y){return function(ye){if("function"!=typeof ee)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ye.lift(new se(ee,Y))}}class se{constructor(Y,Ne){this.project=Y,this.thisArg=Ne}call(Y,Ne){return Ne.subscribe(new De(Y,this.project,this.thisArg))}}class De extends h.v{constructor(Y,Ne,ye){super(Y),this.project=Ne,this.count=0,this.thisArg=ye||this}_next(Y){let Ne;try{Ne=this.project.call(this.thisArg,Y,this.count++)}catch(ye){return void this.destination.error(ye)}this.destination.next(Ne)}}},8456:(tt,Ie,B)=>{"use strict";B.d(Ie,{ZZ:()=>De});var h=B(5006),U=B(4787),se=B(3004);function De(ye,de,z=Number.POSITIVE_INFINITY){return"function"==typeof de?H=>H.pipe(De((ne,J)=>(0,U.H)(ye(ne,J)).pipe((0,h.T)((re,le)=>de(ne,re,J,le))),z)):("number"==typeof de&&(z=de),H=>H.lift(new ee(ye,z)))}class ee{constructor(de,z=Number.POSITIVE_INFINITY){this.project=de,this.concurrent=z}call(de,z){return z.subscribe(new Y(de,this.project,this.concurrent))}}class Y extends se.gn{constructor(de,z,H=Number.POSITIVE_INFINITY){super(de),this.project=z,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(de){this.active<this.concurrent?this._tryNext(de):this.buffer.push(de)}_tryNext(de){let z;const H=this.index++;try{z=this.project(de,H)}catch(ne){return void this.destination.error(ne)}this.active++,this._innerSub(z)}_innerSub(de){const z=new se.zA(this),H=this.destination;H.add(z);const ne=(0,se.tS)(de,z);ne!==z&&H.add(ne)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(de){this.destination.next(de)}notifyComplete(){const de=this.buffer;this.active--,de.length>0?this._next(de.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9090:(tt,Ie,B)=>{"use strict";B.d(Ie,{n:()=>De});var h=B(5006),U=B(4787),se=B(3004);function De(Ne,ye){return"function"==typeof ye?de=>de.pipe(De((z,H)=>(0,U.H)(Ne(z,H)).pipe((0,h.T)((ne,J)=>ye(z,ne,H,J))))):de=>de.lift(new ee(Ne))}class ee{constructor(ye){this.project=ye}call(ye,de){return de.subscribe(new Y(ye,this.project))}}class Y extends se.gn{constructor(ye,de){super(ye),this.project=de,this.index=0}_next(ye){let de;const z=this.index++;try{de=this.project(ye,z)}catch(H){return void this.destination.error(H)}this._innerSub(de)}_innerSub(ye){const de=this.innerSubscription;de&&de.unsubscribe();const z=new se.zA(this),H=this.destination;H.add(z),this.innerSubscription=(0,se.tS)(ye,z),this.innerSubscription!==z&&H.add(this.innerSubscription)}_complete(){const{innerSubscription:ye}=this;(!ye||ye.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ye){this.destination.next(ye)}}},7605:(tt,Ie,B)=>{"use strict";B.d(Ie,{Q:()=>U});var h=B(3004);function U(ee){return Y=>Y.lift(new se(ee))}class se{constructor(Y){this.notifier=Y}call(Y,Ne){const ye=new De(Y),de=(0,h.tS)(this.notifier,new h.zA(ye));return de&&!ye.seenValue?(ye.add(de),Ne.subscribe(ye)):ye}}class De extends h.gn{constructor(Y){super(Y),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},2496:(tt,Ie,B)=>{"use strict";B.d(Ie,{V:()=>se});var h=B(5817),U=B(4337);function se(De,ee){return new h.c(Y=>{const Ne=new U.y;let ye=0;return Ne.add(ee.schedule(function(){ye!==De.length?(Y.next(De[ye++]),Y.closed||Ne.add(this.schedule())):Y.complete()})),Ne})}},7765:(tt,Ie,B)=>{"use strict";B.d(Ie,{lJ:()=>U});const U=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},5722:(tt,Ie,B)=>{"use strict";B.d(Ie,{s:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},91:(tt,Ie,B)=>{"use strict";B.d(Ie,{D:()=>h});const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},2145:(tt,Ie,B)=>{"use strict";B.d(Ie,{P:()=>U});const U=(()=>{function se(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return se.prototype=Object.create(Error.prototype),se})()},8253:(tt,Ie,B)=>{"use strict";function h(U){setTimeout(()=>{throw U},0)}B.d(Ie,{T:()=>h})},5241:(tt,Ie,B)=>{"use strict";function h(U){return U}B.d(Ie,{D:()=>h})},7354:(tt,Ie,B)=>{"use strict";B.d(Ie,{c:()=>h});const h=Array.isArray||(U=>U&&"number"==typeof U.length)},5253:(tt,Ie,B)=>{"use strict";B.d(Ie,{X:()=>h});const h=U=>U&&"number"==typeof U.length&&"function"!=typeof U},8099:(tt,Ie,B)=>{"use strict";function h(U){return"function"==typeof U}B.d(Ie,{T:()=>h})},1456:(tt,Ie,B)=>{"use strict";function h(U){return null!==U&&"object"==typeof U}B.d(Ie,{G:()=>h})},5998:(tt,Ie,B)=>{"use strict";function h(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}B.d(Ie,{y:()=>h})},2234:(tt,Ie,B)=>{"use strict";function h(U){return U&&"function"==typeof U.schedule}B.d(Ie,{m:()=>h})},8167:(tt,Ie,B)=>{"use strict";B.d(Ie,{F:()=>U,m:()=>se});var h=B(5241);function U(...De){return se(De)}function se(De){return 0===De.length?h.D:1===De.length?De[0]:function(Y){return De.reduce((Ne,ye)=>ye(Ne),Y)}}},135:(tt,Ie,B)=>{"use strict";B.d(Ie,{i:()=>H});var h=B(4385),U=B(8253),De=B(7765),Y=B(5722),ye=B(5253),de=B(5998),z=B(1456);const H=ne=>{if(ne&&"function"==typeof ne[Y.s])return(ne=>J=>{const re=ne[Y.s]();if("function"!=typeof re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return re.subscribe(J)})(ne);if((0,ye.X)(ne))return(0,h.v)(ne);if((0,de.y)(ne))return(ne=>J=>(ne.then(re=>{J.closed||(J.next(re),J.complete())},re=>J.error(re)).then(null,U.T),J))(ne);if(ne&&"function"==typeof ne[De.lJ])return(ne=>J=>{const re=ne[De.lJ]();for(;;){let le;try{le=re.next()}catch(ue){return J.error(ue),J}if(le.done){J.complete();break}if(J.next(le.value),J.closed)break}return"function"==typeof re.return&&J.add(()=>{re.return&&re.return()}),J})(ne);{const re=`You provided ${(0,z.G)(ne)?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(re)}}},4385:(tt,Ie,B)=>{"use strict";B.d(Ie,{v:()=>h});const h=U=>se=>{for(let De=0,ee=U.length;De<ee&&!se.closed;De++)se.next(U[De]);se.complete()}},177:(tt,Ie,B)=>{"use strict";B.d(Ie,{AJ:()=>oi,Jj:()=>Ge,N0:()=>na,QT:()=>se,Sm:()=>ue,VF:()=>ee,Vy:()=>Qi,YU:()=>Yn,ZD:()=>De,_b:()=>xn,aZ:()=>mt,hb:()=>re,kB:()=>le,qQ:()=>Ne});var h=B(3953);let U=null;function se(){return U}function De(f){U??=f}class ee{}const Ne=new h.nKC("");let ye=(()=>{class f{historyGo(m){throw new Error("")}static#e=this.\u0275fac=function(_){return new(_||f)};static#t=this.\u0275prov=h.jDH({token:f,factory:()=>(0,h.WQX)(z),providedIn:"platform"})}return f})(),z=(()=>{class f extends ye{constructor(){super(),this._doc=(0,h.WQX)(Ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(m){const _=se().getGlobalEventTarget(this._doc,"window");return _.addEventListener("popstate",m,!1),()=>_.removeEventListener("popstate",m)}onHashChange(m){const _=se().getGlobalEventTarget(this._doc,"window");return _.addEventListener("hashchange",m,!1),()=>_.removeEventListener("hashchange",m)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(m){this._location.pathname=m}pushState(m,_,O){this._history.pushState(m,_,O)}replaceState(m,_,O){this._history.replaceState(m,_,O)}forward(){this._history.forward()}back(){this._history.back()}historyGo(m=0){this._history.go(m)}getState(){return this._history.state}static#e=this.\u0275fac=function(_){return new(_||f)};static#t=this.\u0275prov=h.jDH({token:f,factory:()=>new f,providedIn:"platform"})}return f})();function H(f,w){if(0==f.length)return w;if(0==w.length)return f;let m=0;return f.endsWith("/")&&m++,w.startsWith("/")&&m++,2==m?f+w.substring(1):1==m?f+w:f+"/"+w}function ne(f){const w=f.match(/#|\?|$/),m=w&&w.index||f.length;return f.slice(0,m-("/"===f[m-1]?1:0))+f.slice(m)}function J(f){return f&&"?"!==f[0]?"?"+f:f}let re=(()=>{class f{historyGo(m){throw new Error("")}static#e=this.\u0275fac=function(_){return new(_||f)};static#t=this.\u0275prov=h.jDH({token:f,factory:()=>(0,h.WQX)(ue),providedIn:"root"})}return f})();const le=new h.nKC("");let ue=(()=>{class f extends re{constructor(m,_){super(),this._platformLocation=m,this._removeListenerFns=[],this._baseHref=_??this._platformLocation.getBaseHrefFromDOM()??(0,h.WQX)(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(m){this._removeListenerFns.push(this._platformLocation.onPopState(m),this._platformLocation.onHashChange(m))}getBaseHref(){return this._baseHref}prepareExternalUrl(m){return H(this._baseHref,m)}path(m=!1){const _=this._platformLocation.pathname+J(this._platformLocation.search),O=this._platformLocation.hash;return O&&m?`${_}${O}`:_}pushState(m,_,O,Q){const fe=this.prepareExternalUrl(O+J(Q));this._platformLocation.pushState(m,_,fe)}replaceState(m,_,O,Q){const fe=this.prepareExternalUrl(O+J(Q));this._platformLocation.replaceState(m,_,fe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(m=0){this._platformLocation.historyGo?.(m)}static#e=this.\u0275fac=function(_){return new(_||f)(h.KVO(ye),h.KVO(le,8))};static#t=this.\u0275prov=h.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})(),mt=(()=>{class f{constructor(m){this._subject=new h.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=m;const _=this._locationStrategy.getBaseHref();this._basePath=function lt(f){if(new RegExp("^(https?:)?//").test(f)){const[,m]=f.split(/\/\/[^\/]+/);return m}return f}(ne(vt(_))),this._locationStrategy.onPopState(O=>{this._subject.emit({url:this.path(!0),pop:!0,state:O.state,type:O.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(m=!1){return this.normalize(this._locationStrategy.path(m))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(m,_=""){return this.path()==this.normalize(m+J(_))}normalize(m){return f.stripTrailingSlash(function Et(f,w){if(!f||!w.startsWith(f))return w;const m=w.substring(f.length);return""===m||["/",";","?","#"].includes(m[0])?m:w}(this._basePath,vt(m)))}prepareExternalUrl(m){return m&&"/"!==m[0]&&(m="/"+m),this._locationStrategy.prepareExternalUrl(m)}go(m,_="",O=null){this._locationStrategy.pushState(O,"",m,_),this._notifyUrlChangeListeners(this.prepareExternalUrl(m+J(_)),O)}replaceState(m,_="",O=null){this._locationStrategy.replaceState(O,"",m,_),this._notifyUrlChangeListeners(this.prepareExternalUrl(m+J(_)),O)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(m=0){this._locationStrategy.historyGo?.(m)}onUrlChange(m){return this._urlChangeListeners.push(m),this._urlChangeSubscription??=this.subscribe(_=>{this._notifyUrlChangeListeners(_.url,_.state)}),()=>{const _=this._urlChangeListeners.indexOf(m);this._urlChangeListeners.splice(_,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(m="",_){this._urlChangeListeners.forEach(O=>O(m,_))}subscribe(m,_,O){return this._subject.subscribe({next:m,error:_,complete:O})}static#e=this.normalizeQueryParams=J;static#t=this.joinWithSlash=H;static#n=this.stripTrailingSlash=ne;static#r=this.\u0275fac=function(_){return new(_||f)(h.KVO(re))};static#o=this.\u0275prov=h.jDH({token:f,factory:()=>function He(){return new mt((0,h.KVO)(re))}(),providedIn:"root"})}return f})();function vt(f){return f.replace(/\/index.html$/,"")}function xn(f,w){w=encodeURIComponent(w);for(const m of f.split(";")){const _=m.indexOf("="),[O,Q]=-1==_?[m,""]:[m.slice(0,_),m.slice(_+1)];if(O.trim()===w)return decodeURIComponent(Q)}return null}const on=/\s+/,sn=[];let Yn=(()=>{class f{constructor(m,_){this._ngEl=m,this._renderer=_,this.initialClasses=sn,this.stateMap=new Map}set klass(m){this.initialClasses=null!=m?m.trim().split(on):sn}set ngClass(m){this.rawClass="string"==typeof m?m.trim().split(on):m}ngDoCheck(){for(const _ of this.initialClasses)this._updateState(_,!0);const m=this.rawClass;if(Array.isArray(m)||m instanceof Set)for(const _ of m)this._updateState(_,!0);else if(null!=m)for(const _ of Object.keys(m))this._updateState(_,!!m[_]);this._applyStateDiff()}_updateState(m,_){const O=this.stateMap.get(m);void 0!==O?(O.enabled!==_&&(O.changed=!0,O.enabled=_),O.touched=!0):this.stateMap.set(m,{enabled:_,changed:!0,touched:!0})}_applyStateDiff(){for(const m of this.stateMap){const _=m[0],O=m[1];O.changed?(this._toggleClass(_,O.enabled),O.changed=!1):O.touched||(O.enabled&&this._toggleClass(_,!1),this.stateMap.delete(_)),O.touched=!1}}_toggleClass(m,_){(m=m.trim()).length>0&&m.split(on).forEach(O=>{_?this._renderer.addClass(this._ngEl.nativeElement,O):this._renderer.removeClass(this._ngEl.nativeElement,O)})}static#e=this.\u0275fac=function(_){return new(_||f)(h.rXU(h.aKT),h.rXU(h.sFG))};static#t=this.\u0275dir=h.FsC({type:f,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return f})();class P{createSubscription(w,m){return(0,h.O8t)(()=>w.subscribe({next:m,error:_=>{throw _}}))}dispose(w){(0,h.O8t)(()=>w.unsubscribe())}}class W{createSubscription(w,m){return w.then(m,_=>{throw _})}dispose(w){}}const he=new W,Me=new P;let Ge=(()=>{class f{constructor(m){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=m}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(m){if(!this._obj){if(m)try{this.markForCheckOnValueUpdate=!1,this._subscribe(m)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return m!==this._obj?(this._dispose(),this.transform(m)):this._latestValue}_subscribe(m){this._obj=m,this._strategy=this._selectStrategy(m),this._subscription=this._strategy.createSubscription(m,_=>this._updateLatestValue(m,_))}_selectStrategy(m){if((0,h.jNT)(m))return he;if((0,h.zjR)(m))return Me;throw function S(f,w){return new h.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(m,_){m===this._obj&&(this._latestValue=_,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(_){return new(_||f)(h.rXU(h.gRc,16))};static#t=this.\u0275pipe=h.EJ8({name:"async",type:f,pure:!1,standalone:!0})}return f})();const oi="browser",Fr="server";function Qi(f){return f===Fr}class na{}},1562:(tt,Ie,B)=>{"use strict";function h(A,L,k,K,ae,me,ve){try{var xe=A[me](ve),Re=xe.value}catch(ht){return void k(ht)}xe.done?L(Re):Promise.resolve(Re).then(K,ae)}function U(A){return function(){var L=this,k=arguments;return new Promise(function(K,ae){var me=A.apply(L,k);function ve(Re){h(me,K,ae,ve,xe,"next",Re)}function xe(Re){h(me,K,ae,ve,xe,"throw",Re)}ve(void 0)})}}B.d(Ie,{Qq:()=>qt,Lr:()=>le,$R:()=>we,Sx:()=>It});var se=B(3953),De=B(4421),ee=B(5817),Y=B(4787),Ne=B(3574),ye=B(8728),de=B(5006),z=B(7312),H=B(9090),ne=B(177);class J{}class re{}class le{constructor(L){this.normalizedNames=new Map,this.lazyUpdate=null,L?"string"==typeof L?this.lazyInit=()=>{this.headers=new Map,L.split("\n").forEach(k=>{const K=k.indexOf(":");if(K>0){const ae=k.slice(0,K),me=ae.toLowerCase(),ve=k.slice(K+1).trim();this.maybeSetNormalizedName(ae,me),this.headers.has(me)?this.headers.get(me).push(ve):this.headers.set(me,[ve])}})}:typeof Headers<"u"&&L instanceof Headers?(this.headers=new Map,L.forEach((k,K)=>{this.setHeaderEntries(K,k)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(L).forEach(([k,K])=>{this.setHeaderEntries(k,K)})}:this.headers=new Map}has(L){return this.init(),this.headers.has(L.toLowerCase())}get(L){this.init();const k=this.headers.get(L.toLowerCase());return k&&k.length>0?k[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(L){return this.init(),this.headers.get(L.toLowerCase())||null}append(L,k){return this.clone({name:L,value:k,op:"a"})}set(L,k){return this.clone({name:L,value:k,op:"s"})}delete(L,k){return this.clone({name:L,value:k,op:"d"})}maybeSetNormalizedName(L,k){this.normalizedNames.has(k)||this.normalizedNames.set(k,L)}init(){this.lazyInit&&(this.lazyInit instanceof le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(L=>this.applyUpdate(L)),this.lazyUpdate=null))}copyFrom(L){L.init(),Array.from(L.headers.keys()).forEach(k=>{this.headers.set(k,L.headers.get(k)),this.normalizedNames.set(k,L.normalizedNames.get(k))})}clone(L){const k=new le;return k.lazyInit=this.lazyInit&&this.lazyInit instanceof le?this.lazyInit:this,k.lazyUpdate=(this.lazyUpdate||[]).concat([L]),k}applyUpdate(L){const k=L.name.toLowerCase();switch(L.op){case"a":case"s":let K=L.value;if("string"==typeof K&&(K=[K]),0===K.length)return;this.maybeSetNormalizedName(L.name,k);const ae=("a"===L.op?this.headers.get(k):void 0)||[];ae.push(...K),this.headers.set(k,ae);break;case"d":const me=L.value;if(me){let ve=this.headers.get(k);if(!ve)return;ve=ve.filter(xe=>-1===me.indexOf(xe)),0===ve.length?(this.headers.delete(k),this.normalizedNames.delete(k)):this.headers.set(k,ve)}else this.headers.delete(k),this.normalizedNames.delete(k)}}setHeaderEntries(L,k){const K=(Array.isArray(k)?k:[k]).map(me=>me.toString()),ae=L.toLowerCase();this.headers.set(ae,K),this.maybeSetNormalizedName(L,ae)}forEach(L){this.init(),Array.from(this.normalizedNames.keys()).forEach(k=>L(this.normalizedNames.get(k),this.headers.get(k)))}}class be{encodeKey(L){return vt(L)}encodeValue(L){return vt(L)}decodeKey(L){return decodeURIComponent(L)}decodeValue(L){return decodeURIComponent(L)}}const He=/%(\d[a-f0-9])/gi,Et={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vt(A){return encodeURIComponent(A).replace(He,(L,k)=>Et[k]??L)}function lt(A){return`${A}`}class st{constructor(L={}){if(this.updates=null,this.cloneFrom=null,this.encoder=L.encoder||new be,L.fromString){if(L.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mt(A,L){const k=new Map;return A.length>0&&A.replace(/^\?/,"").split("&").forEach(ae=>{const me=ae.indexOf("="),[ve,xe]=-1==me?[L.decodeKey(ae),""]:[L.decodeKey(ae.slice(0,me)),L.decodeValue(ae.slice(me+1))],Re=k.get(ve)||[];Re.push(xe),k.set(ve,Re)}),k}(L.fromString,this.encoder)}else L.fromObject?(this.map=new Map,Object.keys(L.fromObject).forEach(k=>{const K=L.fromObject[k],ae=Array.isArray(K)?K.map(lt):[lt(K)];this.map.set(k,ae)})):this.map=null}has(L){return this.init(),this.map.has(L)}get(L){this.init();const k=this.map.get(L);return k?k[0]:null}getAll(L){return this.init(),this.map.get(L)||null}keys(){return this.init(),Array.from(this.map.keys())}append(L,k){return this.clone({param:L,value:k,op:"a"})}appendAll(L){const k=[];return Object.keys(L).forEach(K=>{const ae=L[K];Array.isArray(ae)?ae.forEach(me=>{k.push({param:K,value:me,op:"a"})}):k.push({param:K,value:ae,op:"a"})}),this.clone(k)}set(L,k){return this.clone({param:L,value:k,op:"s"})}delete(L,k){return this.clone({param:L,value:k,op:"d"})}toString(){return this.init(),this.keys().map(L=>{const k=this.encoder.encodeKey(L);return this.map.get(L).map(K=>k+"="+this.encoder.encodeValue(K)).join("&")}).filter(L=>""!==L).join("&")}clone(L){const k=new st({encoder:this.encoder});return k.cloneFrom=this.cloneFrom||this,k.updates=(this.updates||[]).concat(L),k}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(L=>this.map.set(L,this.cloneFrom.map.get(L))),this.updates.forEach(L=>{switch(L.op){case"a":case"s":const k=("a"===L.op?this.map.get(L.param):void 0)||[];k.push(lt(L.value)),this.map.set(L.param,k);break;case"d":if(void 0===L.value){this.map.delete(L.param);break}{let K=this.map.get(L.param)||[];const ae=K.indexOf(lt(L.value));-1!==ae&&K.splice(ae,1),K.length>0?this.map.set(L.param,K):this.map.delete(L.param)}}}),this.cloneFrom=this.updates=null)}}class In{constructor(){this.map=new Map}set(L,k){return this.map.set(L,k),this}get(L){return this.map.has(L)||this.map.set(L,L.defaultValue()),this.map.get(L)}delete(L){return this.map.delete(L),this}has(L){return this.map.has(L)}keys(){return this.map.keys()}}function Ze(A){return typeof ArrayBuffer<"u"&&A instanceof ArrayBuffer}function At(A){return typeof Blob<"u"&&A instanceof Blob}function ut(A){return typeof FormData<"u"&&A instanceof FormData}class nn{constructor(L,k,K,ae){let me;if(this.url=k,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=L.toUpperCase(),function nt(A){switch(A){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ae?(this.body=void 0!==K?K:null,me=ae):me=K,me&&(this.reportProgress=!!me.reportProgress,this.withCredentials=!!me.withCredentials,me.responseType&&(this.responseType=me.responseType),me.headers&&(this.headers=me.headers),me.context&&(this.context=me.context),me.params&&(this.params=me.params),this.transferCache=me.transferCache),this.headers??=new le,this.context??=new In,this.params){const ve=this.params.toString();if(0===ve.length)this.urlWithParams=k;else{const xe=k.indexOf("?");this.urlWithParams=k+(-1===xe?"?":xe<k.length-1?"&":"")+ve}}else this.params=new st,this.urlWithParams=k}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ze(this.body)||At(this.body)||ut(this.body)||function ur(A){return typeof URLSearchParams<"u"&&A instanceof URLSearchParams}(this.body)?this.body:this.body instanceof st?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ut(this.body)?null:At(this.body)?this.body.type||null:Ze(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof st?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(L={}){const k=L.method||this.method,K=L.url||this.url,ae=L.responseType||this.responseType,me=L.transferCache??this.transferCache,ve=void 0!==L.body?L.body:this.body,xe=L.withCredentials??this.withCredentials,Re=L.reportProgress??this.reportProgress;let ht=L.headers||this.headers,yt=L.params||this.params;const Ht=L.context??this.context;return void 0!==L.setHeaders&&(ht=Object.keys(L.setHeaders).reduce((an,kt)=>an.set(kt,L.setHeaders[kt]),ht)),L.setParams&&(yt=Object.keys(L.setParams).reduce((an,kt)=>an.set(kt,L.setParams[kt]),yt)),new nn(k,K,ve,{params:yt,headers:ht,context:Ht,reportProgress:Re,responseType:ae,withCredentials:xe,transferCache:me})}}var bn=function(A){return A[A.Sent=0]="Sent",A[A.UploadProgress=1]="UploadProgress",A[A.ResponseHeader=2]="ResponseHeader",A[A.DownloadProgress=3]="DownloadProgress",A[A.Response=4]="Response",A[A.User=5]="User",A}(bn||{});class pn{constructor(L,k=200,K="OK"){this.headers=L.headers||new le,this.status=void 0!==L.status?L.status:k,this.statusText=L.statusText||K,this.url=L.url||null,this.ok=this.status>=200&&this.status<300}}class En extends pn{constructor(L={}){super(L),this.type=bn.ResponseHeader}clone(L={}){return new En({headers:L.headers||this.headers,status:void 0!==L.status?L.status:this.status,statusText:L.statusText||this.statusText,url:L.url||this.url||void 0})}}class Dn extends pn{constructor(L={}){super(L),this.type=bn.Response,this.body=void 0!==L.body?L.body:null}clone(L={}){return new Dn({body:void 0!==L.body?L.body:this.body,headers:L.headers||this.headers,status:void 0!==L.status?L.status:this.status,statusText:L.statusText||this.statusText,url:L.url||this.url||void 0})}}class Tn extends pn{constructor(L){super(L,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${L.url||"(unknown url)"}`:`Http failure response for ${L.url||"(unknown url)"}: ${L.status} ${L.statusText}`,this.error=L.error||null}}function Zn(A,L){return{body:L,headers:A.headers,context:A.context,observe:A.observe,params:A.params,reportProgress:A.reportProgress,responseType:A.responseType,withCredentials:A.withCredentials,transferCache:A.transferCache}}let qt=(()=>{class A{constructor(k){this.handler=k}request(k,K,ae={}){let me;if(k instanceof nn)me=k;else{let Re,ht;Re=ae.headers instanceof le?ae.headers:new le(ae.headers),ae.params&&(ht=ae.params instanceof st?ae.params:new st({fromObject:ae.params})),me=new nn(k,K,void 0!==ae.body?ae.body:null,{headers:Re,context:ae.context,params:ht,reportProgress:ae.reportProgress,responseType:ae.responseType||"json",withCredentials:ae.withCredentials,transferCache:ae.transferCache})}const ve=(0,De.of)(me).pipe((0,Ne.H)(Re=>this.handler.handle(Re)));if(k instanceof nn||"events"===ae.observe)return ve;const xe=ve.pipe((0,ye.p)(Re=>Re instanceof Dn));switch(ae.observe||"body"){case"body":switch(me.responseType){case"arraybuffer":return xe.pipe((0,de.T)(Re=>{if(null!==Re.body&&!(Re.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Re.body}));case"blob":return xe.pipe((0,de.T)(Re=>{if(null!==Re.body&&!(Re.body instanceof Blob))throw new Error("Response is not a Blob.");return Re.body}));case"text":return xe.pipe((0,de.T)(Re=>{if(null!==Re.body&&"string"!=typeof Re.body)throw new Error("Response is not a string.");return Re.body}));default:return xe.pipe((0,de.T)(Re=>Re.body))}case"response":return xe;default:throw new Error(`Unreachable: unhandled observe type ${ae.observe}}`)}}delete(k,K={}){return this.request("DELETE",k,K)}get(k,K={}){return this.request("GET",k,K)}head(k,K={}){return this.request("HEAD",k,K)}jsonp(k,K){return this.request("JSONP",k,{params:(new st).append(K,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(k,K={}){return this.request("OPTIONS",k,K)}patch(k,K,ae={}){return this.request("PATCH",k,Zn(ae,K))}post(k,K,ae={}){return this.request("POST",k,Zn(ae,K))}put(k,K,ae={}){return this.request("PUT",k,Zn(ae,K))}static#e=this.\u0275fac=function(K){return new(K||A)(se.KVO(J))};static#t=this.\u0275prov=se.jDH({token:A,factory:A.\u0275fac})}return A})();const Rr=/^\)\]\}',?\n/;function Ue(A){if(A.url)return A.url;const L="X-Request-URL".toLocaleLowerCase();return A.headers.get(L)}let Xt=(()=>{class A{constructor(){this.fetchImpl=(0,se.WQX)(Nt,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=(0,se.WQX)(se.SKi)}handle(k){return new ee.c(K=>{const ae=new AbortController;return this.doRequest(k,ae.signal,K).then(Bt,me=>K.error(new Tn({error:me}))),()=>ae.abort()})}doRequest(k,K,ae){var me=this;return U(function*(){const ve=me.createRequestInit(k);let xe;try{const Qt=me.ngZone.runOutsideAngular(()=>me.fetchImpl(k.urlWithParams,{signal:K,...ve}));(function Mn(A){A.then(Bt,Bt)})(Qt),ae.next({type:bn.Sent}),xe=yield Qt}catch(Qt){return void ae.error(new Tn({error:Qt,status:Qt.status??0,statusText:Qt.statusText,url:k.urlWithParams,headers:Qt.headers}))}const Re=new le(xe.headers),ht=xe.statusText,yt=Ue(xe)??k.urlWithParams;let Ht=xe.status,an=null;if(k.reportProgress&&ae.next(new En({headers:Re,status:Ht,statusText:ht,url:yt})),xe.body){const Qt=xe.headers.get("content-length"),pt=[],Ct=xe.body.getReader();let S,P,b=0;const W=typeof Zone<"u"&&Zone.current;yield me.ngZone.runOutsideAngular(U(function*(){for(;;){const{done:Me,value:Ge}=yield Ct.read();if(Me)break;if(pt.push(Ge),b+=Ge.length,k.reportProgress){P="text"===k.responseType?(P??"")+(S??=new TextDecoder).decode(Ge,{stream:!0}):void 0;const Lt=()=>ae.next({type:bn.DownloadProgress,total:Qt?+Qt:void 0,loaded:b,partialText:P});W?W.run(Lt):Lt()}}}));const he=me.concatChunks(pt,b);try{const Me=xe.headers.get("Content-Type")??"";an=me.parseBody(k,he,Me)}catch(Me){return void ae.error(new Tn({error:Me,headers:new le(xe.headers),status:xe.status,statusText:xe.statusText,url:Ue(xe)??k.urlWithParams}))}}0===Ht&&(Ht=an?200:0),Ht>=200&&Ht<300?(ae.next(new Dn({body:an,headers:Re,status:Ht,statusText:ht,url:yt})),ae.complete()):ae.error(new Tn({error:an,headers:Re,status:Ht,statusText:ht,url:yt}))})()}parseBody(k,K,ae){switch(k.responseType){case"json":const me=(new TextDecoder).decode(K).replace(Rr,"");return""===me?null:JSON.parse(me);case"text":return(new TextDecoder).decode(K);case"blob":return new Blob([K],{type:ae});case"arraybuffer":return K.buffer}}createRequestInit(k){const K={},ae=k.withCredentials?"include":void 0;if(k.headers.forEach((me,ve)=>K[me]=ve.join(",")),k.headers.has("Accept")||(K.Accept="application/json, text/plain, */*"),!k.headers.has("Content-Type")){const me=k.detectContentTypeHeader();null!==me&&(K["Content-Type"]=me)}return{body:k.serializeBody(),method:k.method,headers:K,credentials:ae}}concatChunks(k,K){const ae=new Uint8Array(K);let me=0;for(const ve of k)ae.set(ve,me),me+=ve.length;return ae}static#e=this.\u0275fac=function(K){return new(K||A)};static#t=this.\u0275prov=se.jDH({token:A,factory:A.\u0275fac})}return A})();class Nt{}function Bt(){}function Fn(A,L){return L(A)}function zn(A,L){return(k,K)=>L.intercept(k,{handle:ae=>A(ae,K)})}const _t=new se.nKC(""),rt=new se.nKC(""),Pt=new se.nKC(""),hr=new se.nKC("",{providedIn:"root",factory:()=>!0});function Or(){let A=null;return(L,k)=>{null===A&&(A=((0,se.WQX)(_t,{optional:!0})??[]).reduceRight(zn,Fn));const K=(0,se.WQX)(se.TgB);if((0,se.WQX)(hr)){const me=K.add();return A(L,k).pipe((0,z.j)(()=>K.remove(me)))}return A(L,k)}}let Kr=(()=>{class A extends J{constructor(k,K){super(),this.backend=k,this.injector=K,this.chain=null,this.pendingTasks=(0,se.WQX)(se.TgB),this.contributeToStability=(0,se.WQX)(hr)}handle(k){if(null===this.chain){const K=Array.from(new Set([...this.injector.get(rt),...this.injector.get(Pt,[])]));this.chain=K.reduceRight((ae,me)=>function fr(A,L,k){return(K,ae)=>(0,se.N4e)(k,()=>L(K,me=>A(me,ae)))}(ae,me,this.injector),Fn)}if(this.contributeToStability){const K=this.pendingTasks.add();return this.chain(k,ae=>this.backend.handle(ae)).pipe((0,z.j)(()=>this.pendingTasks.remove(K)))}return this.chain(k,K=>this.backend.handle(K))}static#e=this.\u0275fac=function(K){return new(K||A)(se.KVO(re),se.KVO(se.uvJ))};static#t=this.\u0275prov=se.jDH({token:A,factory:A.\u0275fac})}return A})();const at=/^\)\]\}',?\n/;let xr=(()=>{class A{constructor(k){this.xhrFactory=k}handle(k){if("JSONP"===k.method)throw new se.wOt(-2800,!1);const K=this.xhrFactory;return(K.\u0275loadImpl?(0,Y.H)(K.\u0275loadImpl()):(0,De.of)(null)).pipe((0,H.n)(()=>new ee.c(me=>{const ve=K.build();if(ve.open(k.method,k.urlWithParams),k.withCredentials&&(ve.withCredentials=!0),k.headers.forEach((pt,Ct)=>ve.setRequestHeader(pt,Ct.join(","))),k.headers.has("Accept")||ve.setRequestHeader("Accept","application/json, text/plain, */*"),!k.headers.has("Content-Type")){const pt=k.detectContentTypeHeader();null!==pt&&ve.setRequestHeader("Content-Type",pt)}if(k.responseType){const pt=k.responseType.toLowerCase();ve.responseType="json"!==pt?pt:"text"}const xe=k.serializeBody();let Re=null;const ht=()=>{if(null!==Re)return Re;const pt=ve.statusText||"OK",Ct=new le(ve.getAllResponseHeaders()),b=function wt(A){return"responseURL"in A&&A.responseURL?A.responseURL:/^X-Request-URL:/m.test(A.getAllResponseHeaders())?A.getResponseHeader("X-Request-URL"):null}(ve)||k.url;return Re=new En({headers:Ct,status:ve.status,statusText:pt,url:b}),Re},yt=()=>{let{headers:pt,status:Ct,statusText:b,url:S}=ht(),P=null;204!==Ct&&(P=typeof ve.response>"u"?ve.responseText:ve.response),0===Ct&&(Ct=P?200:0);let W=Ct>=200&&Ct<300;if("json"===k.responseType&&"string"==typeof P){const he=P;P=P.replace(at,"");try{P=""!==P?JSON.parse(P):null}catch(Me){P=he,W&&(W=!1,P={error:Me,text:P})}}W?(me.next(new Dn({body:P,headers:pt,status:Ct,statusText:b,url:S||void 0})),me.complete()):me.error(new Tn({error:P,headers:pt,status:Ct,statusText:b,url:S||void 0}))},Ht=pt=>{const{url:Ct}=ht(),b=new Tn({error:pt,status:ve.status||0,statusText:ve.statusText||"Unknown Error",url:Ct||void 0});me.error(b)};let an=!1;const kt=pt=>{an||(me.next(ht()),an=!0);let Ct={type:bn.DownloadProgress,loaded:pt.loaded};pt.lengthComputable&&(Ct.total=pt.total),"text"===k.responseType&&ve.responseText&&(Ct.partialText=ve.responseText),me.next(Ct)},Qt=pt=>{let Ct={type:bn.UploadProgress,loaded:pt.loaded};pt.lengthComputable&&(Ct.total=pt.total),me.next(Ct)};return ve.addEventListener("load",yt),ve.addEventListener("error",Ht),ve.addEventListener("timeout",Ht),ve.addEventListener("abort",Ht),k.reportProgress&&(ve.addEventListener("progress",kt),null!==xe&&ve.upload&&ve.upload.addEventListener("progress",Qt)),ve.send(xe),me.next({type:bn.Sent}),()=>{ve.removeEventListener("error",Ht),ve.removeEventListener("abort",Ht),ve.removeEventListener("load",yt),ve.removeEventListener("timeout",Ht),k.reportProgress&&(ve.removeEventListener("progress",kt),null!==xe&&ve.upload&&ve.upload.removeEventListener("progress",Qt)),ve.readyState!==ve.DONE&&ve.abort()}})))}static#e=this.\u0275fac=function(K){return new(K||A)(se.KVO(ne.N0))};static#t=this.\u0275prov=se.jDH({token:A,factory:A.\u0275fac})}return A})();const yr=new se.nKC(""),Bo=new se.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),An=new se.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Nn{}let X=(()=>{class A{constructor(k,K,ae){this.doc=k,this.platform=K,this.cookieName=ae,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const k=this.doc.cookie||"";return k!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ne._b)(k,this.cookieName),this.lastCookieString=k),this.lastToken}static#e=this.\u0275fac=function(K){return new(K||A)(se.KVO(ne.qQ),se.KVO(se.Agw),se.KVO(Bo))};static#t=this.\u0275prov=se.jDH({token:A,factory:A.\u0275fac})}return A})();function Z(A,L){const k=A.url.toLowerCase();if(!(0,se.WQX)(yr)||"GET"===A.method||"HEAD"===A.method||k.startsWith("http://")||k.startsWith("https://"))return L(A);const K=(0,se.WQX)(Nn).getToken(),ae=(0,se.WQX)(An);return null!=K&&!A.headers.has(ae)&&(A=A.clone({headers:A.headers.set(ae,K)})),L(A)}var j=function(A){return A[A.Interceptors=0]="Interceptors",A[A.LegacyInterceptors=1]="LegacyInterceptors",A[A.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",A[A.NoXsrfProtection=3]="NoXsrfProtection",A[A.JsonpSupport=4]="JsonpSupport",A[A.RequestsMadeViaParent=5]="RequestsMadeViaParent",A[A.Fetch=6]="Fetch",A}(j||{});function we(...A){const L=[qt,xr,Kr,{provide:J,useExisting:Kr},{provide:re,useFactory:()=>(0,se.WQX)(Xt,{optional:!0})??(0,se.WQX)(xr)},{provide:rt,useValue:Z,multi:!0},{provide:yr,useValue:!0},{provide:Nn,useClass:X}];for(const k of A)L.push(...k.\u0275providers);return(0,se.EmA)(L)}const $e=new se.nKC("");function It(){return function q(A,L){return{\u0275kind:A,\u0275providers:L}}(j.LegacyInterceptors,[{provide:$e,useFactory:Or},{provide:rt,useExisting:$e,multi:!0}])}},3953:(tt,Ie,B)=>{"use strict";function h(e,t){return Object.is(e,t)}B.d(Ie,{iLQ:()=>Md,sZ2:()=>bl,o8S:()=>ei,BIS:()=>ub,gRc:()=>G_,Ql9:()=>uO,OM3:()=>pu,Ocv:()=>mO,Z63:()=>vo,aKT:()=>Bc,uvJ:()=>a,zcH:()=>zi,bkB:()=>Ci,$GK:()=>ct,nKC:()=>Le,zZn:()=>ir,_q3:()=>vg,MKu:()=>yg,xe9:()=>lg,Co$:()=>RE,Vns:()=>Ws,SKi:()=>_n,Xx1:()=>Vr,Agw:()=>Tl,PLl:()=>rv,sFG:()=>eS,_9s:()=>Zh,czy:()=>Ul,C4Q:()=>iu,NYb:()=>tO,giA:()=>S_,RxE:()=>D_,c1b:()=>rd,gXe:()=>hi,L39:()=>vx,EWP:()=>Ex,Ol2:()=>hp,w6W:()=>ZS,SmG:()=>bO,Rfq:()=>er,oKB:()=>cf,WQX:()=>pe,QuC:()=>ji,EmA:()=>Ca,N4e:()=>Ke,vPA:()=>hE,O8t:()=>Dx,H3F:()=>C_,zAP:()=>gw,H8p:()=>el,KH2:()=>uc,TgB:()=>Vs,wOt:()=>Se,WHO:()=>T_,e01:()=>M_,H5H:()=>jp,Zy3:()=>Ho,mq5:()=>VD,JZv:()=>mn,TL3:()=>ZO,LfX:()=>mc,plB:()=>gs,jNT:()=>sg,zjR:()=>A_,TL$:()=>ab,Tbb:()=>$t,Vt3:()=>lp,GFd:()=>NE,OA$:()=>mf,Jv_:()=>zC,aNF:()=>WC,R7$:()=>Jv,BMQ:()=>Tp,AVh:()=>Op,vxM:()=>SD,wni:()=>yC,VBU:()=>Eo,FsC:()=>Cc,jDH:()=>gt,G2t:()=>kr,$C:()=>Zu,EJ8:()=>_c,rXU:()=>Ua,nrm:()=>Lp,k0s:()=>vd,j41:()=>md,RV6:()=>FD,xGo:()=>Cm,KVO:()=>Ye,kS0:()=>El,bIt:()=>$p,lsd:()=>CC,XpG:()=>uC,nI1:()=>t_,bMT:()=>n_,i5U:()=>r_,Y8G:()=>Np,FS9:()=>zp,eq3:()=>KC,mGM:()=>DC,Dyx:()=>RD,Z7z:()=>ND,fX1:()=>AD,Njj:()=>Xg,eBV:()=>qg,npT:()=>Mv,B4B:()=>fh,n$t:()=>Av,DNE:()=>gp,C5r:()=>o_,EFF:()=>RC,JRh:()=>Xp,SpI:()=>_d,Lme:()=>Kp,GBs:()=>EC});let U=null,se=!1,De=1;const ee=Symbol("SIGNAL");function Y(e){const t=U;return U=e,t}const z={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function H(e){if(se)throw new Error("");if(null===U)return;U.consumerOnSignalRead(e);const t=U.nextProducerIndex++;wn(U),t<U.producerNode.length&&U.producerNode[t]!==e&&st(U)&&lt(U.producerNode[t],U.producerIndexOfThis[t]),U.producerNode[t]!==e&&(U.producerNode[t]=e,U.producerIndexOfThis[t]=st(U)?vt(e,U,t):0),U.producerLastReadVersion[t]=e.version}function J(e){if((!st(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==De)){if(!e.producerMustRecompute(e)&&!He(e))return e.dirty=!1,void(e.lastCleanEpoch=De);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=De}}function re(e){if(void 0===e.liveConsumerNode)return;const t=se;se=!0;try{for(const n of e.liveConsumerNode)n.dirty||ue(n)}finally{se=t}}function le(){return!1!==U?.consumerAllowSignalWrites}function ue(e){e.dirty=!0,re(e),e.consumerMarkedDirty?.(e)}function be(e){return e&&(e.nextProducerIndex=0),Y(e)}function mt(e,t){if(Y(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(st(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)lt(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function He(e){wn(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(J(n),r!==n.version))return!0}return!1}function Et(e){if(wn(e),st(e))for(let t=0;t<e.producerNode.length;t++)lt(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function vt(e,t,n){if(In(e),0===e.liveConsumerNode.length&&nt(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=vt(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function lt(e,t){if(In(e),1===e.liveConsumerNode.length&&nt(e))for(let r=0;r<e.producerNode.length;r++)lt(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];wn(o),o.producerIndexOfThis[r]=t}}function st(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function wn(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function In(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function nt(e){return void 0!==e.producerNode}const At=Symbol("UNSET"),ut=Symbol("COMPUTING"),ur=Symbol("ERRORED"),nn={...z,value:At,dirty:!0,error:null,equal:h,producerMustRecompute:e=>e.value===At||e.value===ut,producerRecomputeValue(e){if(e.value===ut)throw new Error("Detected cycle in computations.");const t=e.value;e.value=ut;const n=be(e);let r;try{r=e.computation()}catch(o){r=ur,e.error=o}finally{mt(e,n)}t!==At&&t!==ur&&r!==ur&&e.equal(t,r)?e.value=t:(e.value=r,e.version++)}};let pn=function bn(){throw new Error};function En(){pn()}let Tn=null;function Zn(e,t){le()||En(),e.equal(e.value,t)||(e.value=t,function Ue(e){e.version++,function ne(){De++}(),re(e),Tn?.()}(e))}const vr={...z,equal:h,value:void 0};var Fn=B(9928),zn=B(5254),fr=B(4337),_t=B(5006);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Ji="https://g.co/ng/security#xss";class Se extends Error{constructor(t,n){super(Ho(t,n)),this.code=t}}function Ho(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}function no(e){return{toString:e}.toString()}const $o="__parameters__";function ho(e,t,n){return no(()=>{const r=function Ni(e){return function(...n){if(e){const r=e(...n);for(const o in r)this[o]=r[o]}}}(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return c.annotation=s,c;function c(d,v,C){const M=d.hasOwnProperty($o)?d[$o]:Object.defineProperty(d,$o,{value:[]})[$o];for(;M.length<=C;)M.push(null);return(M[C]=M[C]||[]).push(s),d}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}const mn=globalThis;function dt(e){for(let t in e)if(e[t]===dt)return t;throw Error("Could not find renamed property on target object.")}function Ts(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $t(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map($t).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ri(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const es=dt({__forward_ref__:dt});function er(e){return e.__forward_ref__=er,e.toString=function(){return $t(this())},e}function ke(e){return ii(e)?e():e}function ii(e){return"function"==typeof e&&e.hasOwnProperty(es)&&e.__forward_ref__===er}function gt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function kr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ms(e){return aa(e,ns)||aa(e,rs)}function mc(e){return null!==Ms(e)}function aa(e,t){return e.hasOwnProperty(t)?e[t]:null}function Ss(e){return e&&(e.hasOwnProperty(Pi)||e.hasOwnProperty(ua))?e[Pi]:null}const ns=dt({\u0275prov:dt}),Pi=dt({\u0275inj:dt}),rs=dt({ngInjectableDef:dt}),ua=dt({ngInjectorDef:dt});class Le{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=gt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function da(e){return e&&!!e.\u0275providers}const ai=dt({\u0275cmp:dt}),ci=dt({\u0275dir:dt}),Po=dt({\u0275pipe:dt}),vc=dt({\u0275mod:dt}),po=dt({\u0275fac:dt}),ss=dt({__NG_ELEMENT_ID__:dt}),fa=dt({__NG_ENV_ID__:dt});function We(e){return"string"==typeof e?e:null==e?"":String(e)}function ha(e,t){throw new Se(-201,!1)}var ct=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ct||{});let Fi;function ui(){return Fi}function Mr(e){const t=Fi;return Fi=e,t}function as(e,t,n){const r=Ms(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ct.Optional?null:void 0!==t?t:void ha()}const li={},pa="__NG_DI_FLAG__",f="ngTempTokenPath",m=/\n/gm,O="__source";let Q;function Ae(e){const t=Q;return Q=e,t}function Gt(e,t=ct.Default){if(void 0===Q)throw new Se(-203,!1);return null===Q?as(e,void 0,t):Q.get(e,t&ct.Optional?null:void 0,t)}function Ye(e,t=ct.Default){return(ui()||Gt)(ke(e),t)}function pe(e,t=ct.Default){return Ye(e,zt(t))}function zt(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Mt(e){const t=[];for(let n=0;n<e.length;n++){const r=ke(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Se(900,!1);let o,i=ct.Default;for(let s=0;s<r.length;s++){const c=r[s],d=Fo(c);"number"==typeof d?-1===d?o=c.token:i|=d:o=c}t.push(Ye(o,i))}else t.push(Ye(r))}return t}function cn(e,t){return e[pa]=t,e.prototype[pa]=t,e}function Fo(e){return e[pa]}const Vr=cn(ho("Optional"),8),Lo=cn(ho("SkipSelf"),4);function Li(e,t){return e.hasOwnProperty(po)?e[po]:null}function di(e,t){e.forEach(n=>Array.isArray(n)?di(n,t):t(n))}function Ec(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ga(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Ur(e,t,n){let r=Vi(e,t);return r>=0?e[1|r]=n:(r=~r,function Ns(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(1===o)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;)e[o]=e[o-2],o--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Dc(e,t){const n=Vi(e,t);if(n>=0)return e[1|n]}function Vi(e,t){return function Hu(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}(e,t,1)}const mo={},Dt=[],vo=new Le(""),$u=new Le("",-1),va=new Le("");class Ui{get(t,n=li){if(n===li){const r=new Error(`NullInjectorError: No provider for ${$t(t)}!`);throw r.name="NullInjectorError",r}return n}}var ya=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ya||{}),hi=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(hi||{}),pi=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(pi||{});function Xd(e,t,n){let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function Ea(e,t,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],c=n[r++];e.setAttribute(t,s,c,i)}else{const i=o,s=n[++r];us(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function Gu(e){return 3===e||4===e||6===e}function us(e){return 64===e.charCodeAt(0)}function ls(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||zu(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function zu(e,t,n,r,o){let i=0,s=e.length;if(-1===t)s=-1;else for(;i<e.length;){const c=e[i++];if("number"==typeof c){if(c===t){s=-1;break}if(c>t){s=i-1;break}}}for(;i<e.length;){const c=e[i];if("number"==typeof c)break;if(c===n){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}const Wu="ng-template";function Kd(e,t,n,r){let o=0;if(r){for(;o<t.length&&"string"==typeof t[o];o+=2)if("class"===t[o]&&-1!==Xd(t[o+1].toLowerCase(),n,0))return!0}else if(yo(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&"string"==typeof(i=t[o]);)if(i.toLowerCase()===n)return!0}return!1}function yo(e){return 4===e.type&&e.value!==Wu}function Zd(e,t,n){return t===(4!==e.type||n?e.value:Wu)}function Qd(e,t,n){let r=4;const o=e.attrs,i=null!==o?function _g(e){for(let t=0;t<e.length;t++)if(Gu(e[t]))return t;return e.length}(o):0;let s=!1;for(let c=0;c<t.length;c++){const d=t[c];if("number"!=typeof d){if(!s)if(4&r){if(r=2|1&r,""!==d&&!Zd(e,d,n)||""===d&&1===t.length){if(jr(r))return!1;s=!0}}else if(8&r){if(null===o||!Kd(e,o,d,n)){if(jr(r))return!1;s=!0}}else{const v=t[++c],C=Yd(d,o,yo(e),n);if(-1===C){if(jr(r))return!1;s=!0;continue}if(""!==v){let M;if(M=C>i?"":o[C+1].toLowerCase(),2&r&&v!==M){if(jr(r))return!1;s=!0}}}}else{if(!s&&!jr(r)&&!jr(d))return!1;if(s&&jr(d))continue;s=!1,r=d|1&r}}return jr(r)||s}function jr(e){return!(1&e)}function Yd(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){const s=t[o];if(s===e)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let c=t[++o];for(;"string"==typeof c;)c=t[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function wg(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function qu(e,t,n=!1){for(let r=0;r<t.length;r++)if(Qd(e,t[r],n))return!0;return!1}function Da(e,t){return e?":not("+t.trim()+")":t}function Xu(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const c=e[++n];o+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!jr(s)&&(t+=Da(i,o),o=""),r=s,i=i||!jr(r);n++}return""!==o&&(t+=Da(i,o)),t}function Eo(e){return no(()=>{const t=sf(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ya.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||hi.Emulated,styles:e.styles||Dt,_:null,schemas:e.schemas||null,tView:null,id:""};af(n);const r=e.dependencies;return n.directiveDefs=wc(r,!1),n.pipeDefs=wc(r,!0),n.id=function Tg(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of n)t=Math.imul(31,t)+o.charCodeAt(0)|0;return t+=2147483648,"c"+t}(n),n})}function nf(e){return it(e)||jn(e)}function Ig(e){return null!==e}function Zu(e){return no(()=>({type:e.type,bootstrap:e.bootstrap||Dt,declarations:e.declarations||Dt,imports:e.imports||Dt,exports:e.exports||Dt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function rf(e,t){if(null==e)return mo;const n={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];let i,s,c=pi.None;Array.isArray(o)?(c=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=c!==pi.None?[r,c]:r,t[i]=s):n[i]=r}return n}function Cc(e){return no(()=>{const t=sf(e);return af(t),t})}function _c(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function it(e){return e[ai]||null}function jn(e){return e[ci]||null}function tr(e){return e[Po]||null}function ji(e){const t=it(e)||jn(e)||tr(e);return null!==t&&t.standalone}function nr(e,t){const n=e[vc]||null;if(!n&&!0===t)throw new Error(`Type ${$t(e)} does not have '\u0275mod' property.`);return n}function sf(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||mo,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Dt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rf(e.inputs,t),outputs:rf(e.outputs),debugInfo:null}}function af(e){e.features?.forEach(t=>t(e))}function wc(e,t){if(!e)return null;const n=t?tr:nf;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Ig)}function Ca(e){return{\u0275providers:e}}function cf(...e){return{\u0275providers:Qu(0,e),\u0275fromNgModule:!0}}function Qu(e,...t){const n=[],r=new Set;let o;const i=s=>{n.push(s)};return di(t,s=>{const c=s;Ic(c,i,[],r)&&(o||=[],o.push(c))}),void 0!==o&&uf(o,i),n}function uf(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:o}=e[n];Yu(o,i=>{t(i,r)})}}function Ic(e,t,n,r){if(!(e=ke(e)))return!1;let o=null,i=Ss(e);const s=!i&&it(e);if(i||s){if(s&&!s.standalone)return!1;o=e}else{const d=e.ngModule;if(i=Ss(d),!i)return!1;o=d}const c=r.has(o);if(s){if(c)return!1;if(r.add(o),s.dependencies){const d="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const v of d)Ic(v,t,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!c){let v;r.add(o);try{di(i.imports,C=>{Ic(C,t,n,r)&&(v||=[],v.push(C))})}finally{}void 0!==v&&uf(v,t)}if(!c){const v=Li(o)||(()=>new o);t({provide:o,useFactory:v,deps:Dt},o),t({provide:va,useValue:o,multi:!0},o),t({provide:vo,useValue:()=>Ye(o),multi:!0},o)}const d=i.providers;if(null!=d&&!c){const v=e;Yu(d,C=>{t(C,v)})}}}return o!==e&&void 0!==e.providers}function Yu(e,t){for(let n of e)da(n)&&(n=n.\u0275providers),Array.isArray(n)?Yu(n,t):t(n)}const Mg=dt({provide:String,useValue:dt});function Ju(e){return null!==e&&"object"==typeof e&&Mg in e}function ds(e){return"function"==typeof e}const el=new Le(""),Tc={},Ag={};let tl;function Mc(){return void 0===tl&&(tl=new Ui),tl}class a{}class l extends a{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,je(t,s=>this.processProvider(s)),this.records.set($u,x(void 0,this)),o.has("environment")&&this.records.set(a,x(void 0,this));const i=this.records.get(el);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(va,Dt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const t=Y(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Ae(this),r=Mr(void 0);try{return t()}finally{Ae(n),Mr(r)}}get(t,n=li,r=ct.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(fa))return t[fa](this);r=zt(r);const i=Ae(this),s=Mr(void 0);try{if(!(r&ct.SkipSelf)){let d=this.records.get(t);if(void 0===d){const v=function Te(e){return"function"==typeof e||"object"==typeof e&&e instanceof Le}(t)&&Ms(t);d=v&&this.injectableDefInScope(v)?x(u(t),Tc):null,this.records.set(t,d)}if(null!=d)return this.hydrate(t,d)}return(r&ct.Self?Mc():this.parent).get(t,n=r&ct.Optional&&n===li?null:n)}catch(c){if("NullInjectorError"===c.name){if((c[f]=c[f]||[]).unshift($t(t)),i)throw c;return function Lr(e,t,n,r){const o=e[f];throw t[O]&&o.unshift(t[O]),e.message=function ki(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=$t(t);if(Array.isArray(t))o=t.map($t).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let c=t[s];i.push(s+":"+("string"==typeof c?JSON.stringify(c):$t(c)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(m,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e[f]=null,e}(c,t,"R3InjectorError",this.source)}throw c}finally{Mr(s),Ae(i)}}resolveInjectorInitializers(){const t=Y(null),n=Ae(this),r=Mr(void 0);try{const i=this.get(vo,Dt,ct.Self);for(const s of i)s()}finally{Ae(n),Mr(r),Y(t)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push($t(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(t){let n=ds(t=ke(t))?t:ke(t&&t.provide);const r=function y(e){return Ju(e)?x(void 0,e.useValue):x(T(e),Tc)}(t);if(!ds(t)&&!0===t.multi){let o=this.records.get(n);o||(o=x(void 0,Tc,!0),o.factory=()=>Mt(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){const r=Y(null);try{return n.value===Tc&&(n.value=Ag,n.value=n.factory()),"object"==typeof n.value&&n.value&&function G(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ke(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function u(e){const t=Ms(e),n=null!==t?t.factory:Li(e);if(null!==n)return n;if(e instanceof Le)throw new Se(204,!1);if(e instanceof Function)return function p(e){if(e.length>0)throw new Se(204,!1);const n=function ca(e){return e&&(e[ns]||e[rs])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Se(204,!1)}function T(e,t,n){let r;if(ds(e)){const o=ke(e);return Li(o)||u(o)}if(Ju(e))r=()=>ke(e.useValue);else if(function bc(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Mt(e.deps||[]));else if(function lf(e){return!(!e||!e.useExisting)}(e))r=()=>Ye(ke(e.useExisting));else{const o=ke(e&&(e.useClass||e.provide));if(!function te(e){return!!e.deps}(e))return Li(o)||u(o);r=()=>new o(...Mt(e.deps))}return r}function x(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function je(e,t){for(const n of e)Array.isArray(n)?je(n,t):n&&da(n)?je(n.\u0275providers,t):t(n)}function Ke(e,t){e instanceof l&&e.assertNotDestroyed();const r=Ae(e),o=Mr(void 0);try{return t()}finally{Ae(r),Mr(o)}}const vn=0,Ce=1,Ve=2,Xn=3,Xo=4,wr=5,Hr=6,wa=7,un=8,Kn=9,mi=10,qe=11,Ac=12,Ng=13,Ia=14,yn=15,Rs=16,ba=17,Bi=18,Ta=19,Rg=20,fs=21,ol=22,Vo=23,Pe=25,ff=1,vi=7,Ma=9,Bn=10;var sl=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(sl||{});function rr(e){return Array.isArray(e)&&"object"==typeof e[ff]}function Ar(e){return Array.isArray(e)&&!0===e[ff]}function hf(e){return!!(4&e.flags)}function Os(e){return e.componentOffset>-1}function al(e){return!(1&~e.flags)}function Ko(e){return!!e.template}function Rc(e){return!!(512&e[Ve])}class Fw{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function kg(e,t,n,r){null!==t?t.applyValueToInputSignal(t,r):e[n]=r}function mf(){return Lg}function Lg(e){return e.type.prototype.ngOnChanges&&(e.setInput=Lw),kw}function kw(){const e=Ug(this),t=e?.current;if(t){const n=e.previous;if(n===mo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Lw(e,t,n,r,o){const i=this.declaredInputs[r],s=Ug(e)||function Vw(e,t){return e[Vg]=t}(e,{previous:mo,current:null}),c=s.current||(s.current={}),d=s.previous,v=d[i];c[i]=new Fw(v&&v.currentValue,n,d===mo),kg(e,t,o,n)}mf.ngInherit=!0;const Vg="__ngSimpleChanges__";function Ug(e){return e[Vg]||null}const yi=function(e,t,n){};function Ot(e){for(;Array.isArray(e);)e=e[vn];return e}function Oc(e,t){return Ot(t[e])}function $r(e,t){return Ot(t[e.index])}function xc(e,t){return e.data[t]}function xs(e,t){return e[t]}function Co(e,t){const n=t[e];return rr(n)?n:n[vn]}function Ef(e){return!(128&~e[Ve])}function Uo(e,t){return null==t?null:e[t]}function Hg(e){e[ba]=0}function $g(e){1024&e[Ve]||(e[Ve]|=1024,Ef(e)&&cl(e))}function Pc(e){return!!(9216&e[Ve]||e[Vo]?.dirty)}function Df(e){e[mi].changeDetectionScheduler?.notify(7),64&e[Ve]&&(e[Ve]|=1024),Pc(e)&&cl(e)}function cl(e){e[mi].changeDetectionScheduler?.notify(0);let t=Hi(e);for(;null!==t&&!(8192&t[Ve])&&(t[Ve]|=8192,Ef(t));)t=Hi(t)}function ul(e,t){if(!(256&~e[Ve]))throw new Se(911,!1);null===e[fs]&&(e[fs]=[]),e[fs].push(t)}function Hi(e){const t=e[Xn];return Ar(t)?t[Xn]:t}const Xe={lFrame:om(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let zg=!1;function Wg(){return Xe.bindingsEnabled}function oe(){return Xe.lFrame.lView}function ft(){return Xe.lFrame.tView}function qg(e){return Xe.lFrame.contextLView=e,e[un]}function Xg(e){return Xe.lFrame.contextLView=null,e}function Wt(){let e=Kg();for(;null!==e&&64===e.type;)e=e.parent;return e}function Kg(){return Xe.lFrame.currentTNode}function Zo(e,t){const n=Xe.lFrame;n.currentTNode=e,n.isParent=t}function wf(){return Xe.lFrame.isParent}function Yg(){return zg}function Jg(e){zg=e}function Gr(){const e=Xe.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Qo(){return Xe.lFrame.bindingIndex++}function Gi(e){const t=Xe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Yw(e,t){const n=Xe.lFrame;n.bindingIndex=n.bindingRootIndex=e,bf(t)}function bf(e){Xe.lFrame.currentDirectiveIndex=e}function Mf(){return Xe.lFrame.currentQueryIndex}function dl(e){Xe.lFrame.currentQueryIndex=e}function eI(e){const t=e[Ce];return 2===t.type?t.declTNode:1===t.type?e[wr]:null}function nm(e,t,n){if(n&ct.SkipSelf){let o=t,i=e;for(;!(o=o.parent,null!==o||n&ct.Host||(o=eI(i),null===o||(i=i[Ia],10&o.type))););if(null===o)return!1;t=o,e=i}const r=Xe.lFrame=rm();return r.currentTNode=t,r.lView=e,!0}function Sf(e){const t=rm(),n=e[Ce];Xe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function rm(){const e=Xe.lFrame,t=null===e?null:e.child;return null===t?om(e):t}function om(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function im(){const e=Xe.lFrame;return Xe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const sm=im;function Af(){const e=im();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ir(){return Xe.lFrame.selectedIndex}function Fs(e){Xe.lFrame.selectedIndex=e}function ln(){const e=Xe.lFrame;return xc(e.tView,e.selectedIndex)}let cm=!0;function kc(){return cm}function Ei(e){cm=e}function fl(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:v,ngOnDestroy:C}=i;s&&(e.contentHooks??=[]).push(-n,s),c&&((e.contentHooks??=[]).push(n,c),(e.contentCheckHooks??=[]).push(n,c)),d&&(e.viewHooks??=[]).push(-n,d),v&&((e.viewHooks??=[]).push(n,v),(e.viewCheckHooks??=[]).push(n,v)),null!=C&&(e.destroyHooks??=[]).push(n,C)}}function hl(e,t,n){um(e,t,3,n)}function pl(e,t,n,r){(3&e[Ve])===n&&um(e,t,n,r)}function Nf(e,t){let n=e[Ve];(3&n)===t&&(n&=16383,n+=1,e[Ve]=n)}function um(e,t,n,r){const i=r??-1,s=t.length-1;let c=0;for(let d=void 0!==r?65535&e[ba]:0;d<s;d++)if("number"==typeof t[d+1]){if(c=t[d],null!=r&&c>=r)break}else t[d]<0&&(e[ba]+=65536),(c<i||-1==i)&&(aI(e,n,t,d),e[ba]=(4294901760&e[ba])+d+2),d++}function lm(e,t){yi(4,e,t);const n=Y(null);try{t.call(e)}finally{Y(n),yi(5,e,t)}}function aI(e,t,n,r){const o=n[r]<0,i=n[r+1],c=e[o?-n[r]:n[r]];o?e[Ve]>>14<e[ba]>>16&&(3&e[Ve])===t&&(e[Ve]+=16384,lm(c,i)):lm(c,i)}const Sa=-1;class Lc{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}const Of={};class ks{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=zt(r);const o=this.injector.get(t,Of,r);return o!==Of||n===Of?o:this.parentInjector.get(t,n,r)}}function xf(e){return e!==Sa}function Vc(e){return 32767&e}function Uc(e,t){let n=function dI(e){return e>>16}(e),r=t;for(;n>0;)r=r[Ia],n--;return r}let Pf=!0;function gl(e){const t=Pf;return Pf=e,t}const fm=255,hm=5;let hI=0;const Di={};function ml(e,t){const n=pm(e,t);if(-1!==n)return n;const r=t[Ce];r.firstCreatePass&&(e.injectorIndex=t.length,Ff(r.data,e),Ff(t,null),Ff(r.blueprint,null));const o=vl(e,t),i=e.injectorIndex;if(xf(o)){const s=Vc(o),c=Uc(o,t),d=c[Ce].data;for(let v=0;v<8;v++)t[i+v]=c[s+v]|d[s+v]}return t[i+8]=o,i}function Ff(e,t){e.push(0,0,0,0,0,0,0,0,t)}function pm(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function vl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){if(r=_m(o),null===r)return Sa;if(n++,o=o[Ia],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Sa}function kf(e,t,n){!function pI(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ss)&&(r=n[ss]),null==r&&(r=n[ss]=hI++);const o=r&fm;t.data[e+(o>>hm)]|=1<<o}(e,t,n)}function gm(e,t,n){if(n&ct.Optional||void 0!==e)return e;ha()}function mm(e,t,n,r){if(n&ct.Optional&&void 0===r&&(r=null),!(n&(ct.Self|ct.Host))){const o=e[Kn],i=Mr(void 0);try{return o?o.get(t,r,n&ct.Optional):as(t,r,n&ct.Optional)}finally{Mr(i)}}return gm(r,0,n)}function vm(e,t,n,r=ct.Default,o){if(null!==e){if(2048&t[Ve]&&!(r&ct.Self)){const s=function EI(e,t,n,r,o){let i=e,s=t;for(;null!==i&&null!==s&&2048&s[Ve]&&!(512&s[Ve]);){const c=ym(i,s,n,r|ct.Self,Di);if(c!==Di)return c;let d=i.parent;if(!d){const v=s[Rg];if(v){const C=v.get(n,Di,r);if(C!==Di)return C}d=_m(s),s=s[Ia]}i=d}return o}(e,t,n,r,Di);if(s!==Di)return s}const i=ym(e,t,n,r,Di);if(i!==Di)return i}return mm(t,n,r,o)}function ym(e,t,n,r,o){const i=function vI(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ss)?e[ss]:void 0;return"number"==typeof t?t>=0?t&fm:yI:t}(n);if("function"==typeof i){if(!nm(t,e,r))return r&ct.Host?gm(o,0,r):mm(t,n,r,o);try{let s;if(s=i(r),null!=s||r&ct.Optional)return s;ha()}finally{sm()}}else if("number"==typeof i){let s=null,c=pm(e,t),d=Sa,v=r&ct.Host?t[yn][wr]:null;for((-1===c||r&ct.SkipSelf)&&(d=-1===c?vl(e,t):t[c+8],d!==Sa&&Dm(r,!1)?(s=t[Ce],c=Vc(d),t=Uc(d,t)):c=-1);-1!==c;){const C=t[Ce];if(Em(i,c,C.data)){const M=mI(c,t,n,s,r,v);if(M!==Di)return M}d=t[c+8],d!==Sa&&Dm(r,t[Ce].data[c+8]===v)&&Em(i,c,t)?(s=C,c=Vc(d),t=Uc(d,t)):c=-1}}return o}function mI(e,t,n,r,o,i){const s=t[Ce],c=s.data[e+8],C=yl(c,s,n,null==r?Os(c)&&Pf:r!=s&&!!(3&c.type),o&ct.Host&&i===c);return null!==C?Ls(t,s,C,c):Di}function yl(e,t,n,r,o){const i=e.providerIndexes,s=t.data,c=1048575&i,d=e.directiveStart,C=i>>20,F=o?c+C:e.directiveEnd;for(let V=r?c:c+C;V<F;V++){const $=s[V];if(V<d&&n===$||V>=d&&$.type===n)return V}if(o){const V=s[d];if(V&&Ko(V)&&V.type===n)return d}return null}function Ls(e,t,n,r){let o=e[n];const i=t.data;if(function cI(e){return e instanceof Lc}(o)){const s=o;s.resolving&&function Uu(e,t){throw t&&t.join(" > "),new Se(-200,e)}(function Tt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():We(e)}(i[n]));const c=gl(s.canSeeViewProviders);s.resolving=!0;const v=s.injectImpl?Mr(s.injectImpl):null;nm(e,r,ct.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function sI(e,t,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const s=Lg(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}(n,i[n],t)}finally{null!==v&&Mr(v),gl(c),s.resolving=!1,sm()}}return o}function Em(e,t,n){return!!(n[t+(e>>hm)]&1<<e)}function Dm(e,t){return!(e&ct.Self||e&ct.Host&&t)}class or{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return vm(this._tNode,this._lView,t,zt(r),n)}}function yI(){return new or(Wt(),oe())}function Cm(e){return no(()=>{const t=e.prototype.constructor,n=t[po]||Lf(t),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const i=o[po]||Lf(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Lf(e){return ii(e)?()=>{const t=Lf(ke(e));return t&&t()}:Li(e)}function _m(e){const t=e[Ce],n=t.type;return 2===n?t.declTNode:1===n?e[wr]:null}function El(e){return function gI(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(Gu(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===t)return n[o+1];o+=2}}}return null}(Wt(),e)}function Mm(e,t=null,n=null,r){const o=Sm(e,t,n,r);return o.resolveInjectorInitializers(),o}function Sm(e,t=null,n=null,r,o=new Set){const i=[n||Dt,cf(e)];return r=r||("object"==typeof e?void 0:$t(e)),new l(i,t||Mc(),r||null,o)}class ir{static#e=this.THROW_IF_NOT_FOUND=li;static#t=this.NULL=new Ui;static create(t,n){if(Array.isArray(t))return Mm({name:""},n,t,"");{const r=t.name??"";return Mm({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=gt({token:ir,providedIn:"any",factory:()=>Ye($u)});static#r=this.__NG_ELEMENT_ID__=-1}new Le("").__NG_ELEMENT_ID__=e=>{const t=Wt();if(null===t)throw new Se(204,!1);if(2&t.type)return t.value;if(e&ct.Optional)return null;throw new Se(204,!1)};function Uf(e){return e.ngOriginalError}const Nm=!0;let jc=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=AI;static#t=this.__NG_ENV_ID__=n=>n}return e})();class SI extends jc{constructor(t){super(),this._lView=t}onDestroy(t){return ul(this._lView,t),()=>function Cf(e,t){if(null===e[fs])return;const n=e[fs].indexOf(t);-1!==n&&e[fs].splice(n,1)}(this._lView,t)}}function AI(){return new SI(oe())}let Vs=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Fn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>new e})}return e})();const Ci=class NI extends zn.B7{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,function Yt(){return void 0!==ui()||null!=function fe(){return Q}()}()&&(this.destroyRef=pe(jc,{optional:!0})??void 0,this.pendingTasks=pe(Vs,{optional:!0})??void 0)}emit(t){const n=Y(null);try{super.next(t)}finally{Y(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&"object"==typeof t){const d=t;o=d.next?.bind(d),i=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));const c=super.subscribe({next:o,error:i,complete:s});return t instanceof fr.y&&t.add(c),c}wrapInTimeout(t){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{t(n),void 0!==r&&this.pendingTasks?.remove(r)})}}};function Cl(...e){}function Rm(e){let t,n;function r(){e=Cl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==t&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Om(e){return queueMicrotask(()=>e()),()=>{e=Cl}}const jf="isAngularZone",_l=jf+"_ID";let RI=0;class _n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ci(!1),this.onMicrotaskEmpty=new Ci(!1),this.onStable=new Ci(!1),this.onError=new Ci(!1);const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=Nm}=t;if(typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,function PI(e){const t=()=>{!function xI(e){function t(){Rm(()=>{e.callbackScheduled=!1,Hf(e),e.isCheckStableRunning=!0,Bf(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Hf(e))}(e)},n=RI++;e._inner=e._inner.fork({name:"angular",properties:{[jf]:!0,[_l]:n,[_l+n]:!0},onInvokeTask:(r,o,i,s,c,d)=>{if(function FI(e){return Fm(e,"__ignore_ng_zone__")}(d))return r.invokeTask(i,s,c,d);try{return xm(e),r.invokeTask(i,s,c,d)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Pm(e)}},onInvoke:(r,o,i,s,c,d,v)=>{try{return xm(e),r.invoke(i,s,c,d,v)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function kI(e){return Fm(e,"__scheduler_tick__")}(d)&&t(),Pm(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Hf(e),Bf(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(jf)}static assertInAngularZone(){if(!_n.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new Se(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,OI,Cl,Cl);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const OI={};function Bf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Hf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function xm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Pm(e){e._nesting--,Bf(e)}class $f{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci,this.onMicrotaskEmpty=new Ci,this.onStable=new Ci,this.onError=new Ci}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}}function Fm(e,t){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[t]}class zi{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Uf(t);for(;n&&Uf(n);)n=Uf(n);return n||null}}const VI=new Le("",{providedIn:"root",factory:()=>{const e=pe(_n),t=pe(zi);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function UI(){return Ra(Wt(),oe())}function Ra(e,t){return new Bc($r(e,t))}let Bc=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=UI}return e})();function Lm(e){return e instanceof Bc?e.nativeElement:e}function jI(){return this._results[Symbol.iterator]()}class Gf{static#e=Symbol.iterator;get changes(){return this._changes??=new Ci}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=Gf.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=jI)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;const r=function Sr(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function Wd(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function $c(e){return!(128&~e.flags)}const Wf=new Map;let HI=0;const wl="__ngContext__";function Nr(e,t){rr(t)?(e[wl]=t[Ta],function GI(e){Wf.set(e[Ta],e)}(t)):e[wl]=t}function qm(e){return Km(e[Ac])}function Xm(e){return Km(e[Xo])}function Km(e){for(;null!==e&&!Ar(e);)e=e[Xo];return e}let Xf;function ab(e){Xf=e}function hs(){if(void 0!==Xf)return Xf;if(typeof document<"u")return document;throw new Se(210,!1)}const bl=new Le("",{providedIn:"root",factory:()=>cb}),cb="ng",rv=new Le(""),Tl=new Le("",{providedIn:"platform",factory:()=>"unknown"}),ub=new Le("",{providedIn:"root",factory:()=>hs().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ov=()=>null;function th(e,t,n=!1){return ov(e,t,n)}const fv=new Le("",{providedIn:"root",factory:()=>!1});let Pl,Fl;function Fa(e){return function sh(){if(void 0===Pl&&(Pl=null,mn.trustedTypes))try{Pl=mn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Pl}()?.createHTML(e)||e}function ah(){if(void 0===Fl&&(Fl=null,mn.trustedTypes))try{Fl=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Fl}function gv(e){return ah()?.createHTML(e)||e}function vv(e){return ah()?.createScriptURL(e)||e}class yv{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ji})`}}function ps(e){return e instanceof yv?e.changingThisBreaksApplicationSecurity:e}function Zc(e,t){const n=function Sb(e){return e instanceof yv&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ji})`)}return n===t}class Ab{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Fa(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}}class Nb{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Fa(t),n}}const Ob=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ch(e){return(e=String(e)).match(Ob)?e:"unsafe:"+e}function Wi(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Qc(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const Dv=Wi("area,br,col,hr,img,wbr"),Cv=Wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_v=Wi("rp,rt"),uh=Qc(Dv,Qc(Cv,Wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qc(_v,Wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qc(_v,Cv)),lh=Wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wv=Qc(lh,Wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xb=Wi("script,style,template");class Pb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0,o=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)o.push(n),n=Lb(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=kb(n);if(i){n=i;break}n=o.pop()}return this.buf.join("")}startElement(t){const n=Iv(t).toLowerCase();if(!uh.hasOwnProperty(n))return this.sanitizedSomething=!0,!xb.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let o=0;o<r.length;o++){const i=r.item(o),s=i.name,c=s.toLowerCase();if(!wv.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let d=i.value;lh[c]&&(d=ch(d)),this.buf.push(" ",s,'="',Tv(d),'"')}return this.buf.push(">"),!0}endElement(t){const n=Iv(t).toLowerCase();uh.hasOwnProperty(n)&&!Dv.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Tv(t))}}function kb(e){const t=e.nextSibling;if(t&&e!==t.previousSibling)throw bv(t);return t}function Lb(e){const t=e.firstChild;if(t&&function Fb(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,t))throw bv(t);return t}function Iv(e){const t=e.nodeName;return"string"==typeof t?t:"FORM"}function bv(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const Vb=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ub=/([^\#-~ |!])/g;function Tv(e){return e.replace(/&/g,"&amp;").replace(Vb,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Ub,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kl;function dh(e){return"content"in e&&function Bb(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ka=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(ka||{});function Mv(e){const t=Yc();return t?gv(t.sanitize(ka.HTML,e)||""):Zc(e,"HTML")?gv(ps(e)):function jb(e,t){let n=null;try{kl=kl||function Ev(e){const t=new Nb(e);return function Rb(){try{return!!(new window.DOMParser).parseFromString(Fa(""),"text/html")}catch{return!1}}()?new Ab(t):t}(e);let r=t?String(t):"";n=kl.getInertBodyElement(r);let o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=kl.getInertBodyElement(r)}while(r!==i);return Fa((new Pb).sanitizeChildren(dh(n)||n))}finally{if(n){const r=dh(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}(hs(),We(e))}function fh(e){const t=Yc();return t?t.sanitize(ka.URL,e)||"":Zc(e,"URL")?ps(e):ch(We(e))}function Sv(e){const t=Yc();if(t)return vv(t.sanitize(ka.RESOURCE_URL,e)||"");if(Zc(e,"ResourceURL"))return vv(ps(e));throw new Se(904,!1)}function Av(e,t,n){return function Wb(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?Sv:fh}(t,n)(e)}function Yc(){const e=oe();return e&&e[mi].sanitizer}function _o(e){return e instanceof Function?e():e}var Ul=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ul||{});let gh;function mh(e,t){return gh(e,t)}function Va(e,t,n,r,o){if(null!=r){let i,s=!1;Ar(r)?i=r:rr(r)&&(s=!0,r=r[vn]);const c=Ot(r);0===e&&null!==n?null==o?Hv(t,n,c):js(t,n,c,o||null,!0):1===e&&null!==n?js(t,n,c,o||null,!0):2===e?function eu(e,t,n){e.removeChild(null,t,n)}(t,c,s):3===e&&t.destroyNode(c),null!=i&&function gT(e,t,n,r,o){const i=n[vi];i!==Ot(n)&&Va(t,e,r,i,o);for(let c=Bn;c<n.length;c++){const d=n[c];$l(d[Ce],d,e,t,r,i)}}(t,e,i,n,o)}}function jl(e,t,n){return e.createElement(t,n)}function Uv(e,t){t[mi].changeDetectionScheduler?.notify(8),$l(e,t,t[qe],2,null,null)}function jv(e,t){const n=e[Ma],r=t[Xn];(rr(r)||t[yn]!==r[Xn][yn])&&(e[Ve]|=sl.HasTransplantedViews),null===n?e[Ma]=[t]:n.push(t)}function Eh(e,t){const n=e[Ma],r=n.indexOf(t);n.splice(r,1)}function Jc(e,t){if(e.length<=Bn)return;const n=Bn+t,r=e[n];if(r){const o=r[Rs];null!==o&&o!==e&&Eh(o,r),t>0&&(e[n-1][Xo]=r[Xo]);const i=ga(e,Bn+t);!function aT(e,t){Uv(e,t),t[vn]=null,t[wr]=null}(r[Ce],r);const s=i[Bi];null!==s&&s.detachView(i[Ce]),r[Xn]=null,r[Xo]=null,r[Ve]&=-129}return r}function Bl(e,t){if(!(256&t[Ve])){const n=t[qe];n.destroyNode&&$l(e,t,n,3,null,null),function uT(e){let t=e[Ac];if(!t)return Dh(e[Ce],e);for(;t;){let n=null;if(rr(t))n=t[Ac];else{const r=t[Bn];r&&(n=r)}if(!n){for(;t&&!t[Xo]&&t!==e;)rr(t)&&Dh(t[Ce],t),t=t[Xn];null===t&&(t=e),rr(t)&&Dh(t[Ce],t),n=t&&t[Xo]}t=n}}(t)}}function Dh(e,t){if(256&t[Ve])return;const n=Y(null);try{t[Ve]&=-129,t[Ve]|=256,t[Vo]&&Et(t[Vo]),function fT(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const o=t[n[r]];if(!(o instanceof Lc)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const c=o[i[s]],d=i[s+1];yi(4,c,d);try{d.call(c)}finally{yi(5,c,d)}}else{yi(4,o,i);try{i.call(o)}finally{yi(5,o,i)}}}}}(e,t),function dT(e,t){const n=e.cleanup,r=t[wa];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);null!==r&&(t[wa]=null);const o=t[fs];if(null!==o){t[fs]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(e,t),1===t[Ce].type&&t[qe].destroy();const r=t[Rs];if(null!==r&&Ar(t[Xn])){r!==t[Xn]&&Eh(r,t);const o=t[Bi];null!==o&&o.detachView(e)}!function zI(e){Wf.delete(e[Ta])}(t)}finally{Y(n)}}function Ch(e,t,n){return function Bv(e,t,n){let r=t;for(;null!==r&&168&r.type;)r=(t=r).parent;if(null===r)return n[vn];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=e.data[r.directiveStart+o];if(i===hi.None||i===hi.Emulated)return null}return $r(r,n)}}(e,t.parent,n)}function js(e,t,n,r,o){e.insertBefore(t,n,r,o)}function Hv(e,t,n){e.appendChild(t,n)}function $v(e,t,n,r,o){null!==r?js(e,t,n,r,o):Hv(e,t,n)}function _h(e,t){return e.parentNode(t)}let wh,Wv=function zv(e,t,n){return 40&e.type?$r(e,n):null};function Hl(e,t,n,r){const o=Ch(e,r,t),i=t[qe],c=function Gv(e,t,n){return Wv(e,t,n)}(r.parent||t[wr],r,t);if(null!=o)if(Array.isArray(n))for(let d=0;d<n.length;d++)$v(i,o,n[d],c,!1);else $v(i,o,n,c,!1);void 0!==wh&&wh(i,r,t,n,o)}function Bs(e,t){if(null!==t){const n=t.type;if(3&n)return $r(t,e);if(4&n)return Ih(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Bs(e,r);{const o=e[t.index];return Ar(o)?Ih(-1,o):Ot(o)}}if(128&n)return Bs(e,t.next);if(32&n)return mh(t,e)()||Ot(e[t.index]);{const r=Xv(e,t);return null!==r?Array.isArray(r)?r[0]:Bs(Hi(e[yn]),r):Bs(e,t.next)}}return null}function Xv(e,t){return null!==t?e[yn][wr].projection[t.projection]:null}function Ih(e,t){const n=Bn+e+1;if(n<t.length){const r=t[n],o=r[Ce].firstChild;if(null!==o)return Bs(r,o)}return t[vi]}function bh(e,t,n,r,o,i,s){for(;null!=n;){if(128===n.type){n=n.next;continue}const c=r[n.index],d=n.type;if(s&&0===t&&(c&&Nr(Ot(c),r),n.flags|=2),32&~n.flags)if(8&d)bh(e,t,n.child,r,o,i,!1),Va(t,e,o,c,i);else if(32&d){const v=mh(n,r);let C;for(;C=v();)Va(t,e,o,C,i);Va(t,e,o,c,i)}else 16&d?Zv(e,t,r,n,o,i):Va(t,e,o,c,i);n=s?n.projectionNext:n.next}}function $l(e,t,n,r,o,i){bh(n,r,e.firstChild,t,o,i,!1)}function Zv(e,t,n,r,o,i){const s=n[yn],d=s[wr].projection[r.projection];if(Array.isArray(d))for(let v=0;v<d.length;v++)Va(t,e,o,d[v],i);else{let v=d;const C=s[Xn];$c(r)&&(v.flags|=128),bh(e,t,v,C,o,i,!0)}}function Qv(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Yv(e,t,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&Ea(e,t,r),null!==o&&Qv(e,t,o),null!==i&&function vT(e,t,n){e.setAttribute(t,"style",n)}(e,t,i)}const et={};function Jv(e=1){ey(ft(),oe(),Ir()+e,!1)}function ey(e,t,n,r){if(!r)if(3&~t[Ve]){const i=e.preOrderHooks;null!==i&&pl(t,i,0,n)}else{const i=e.preOrderCheckHooks;null!==i&&hl(t,i,n)}Fs(n)}function Ua(e,t=ct.Default){const n=oe();return null===n?Ye(e,t):vm(Wt(),n,ke(e),t)}function ty(e,t,n,r,o,i){const s=Y(null);try{let c=null;o&pi.SignalBased&&(c=t[r][ee]),null!==c&&void 0!==c.transformFn&&(i=c.transformFn(i)),o&pi.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),null!==e.setInput?e.setInput(t,c,i,n,r):kg(t,c,r,i)}finally{Y(s)}}function Gl(e,t,n,r,o,i,s,c,d,v,C){const M=t.blueprint.slice();return M[vn]=o,M[Ve]=204|r,(null!==v||e&&2048&e[Ve])&&(M[Ve]|=2048),Hg(M),M[Xn]=M[Ia]=e,M[un]=n,M[mi]=s||e&&e[mi],M[qe]=c||e&&e[qe],M[Kn]=d||e&&e[Kn]||null,M[wr]=i,M[Ta]=function $I(){return HI++}(),M[Hr]=C,M[Rg]=v,M[yn]=2==t.type?e[yn]:M,M}function Hs(e,t,n,r,o){let i=e.data[t];if(null===i)i=function Th(e,t,n,r,o){const i=Kg(),s=wf(),d=e.data[t]=function TT(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,c=0;return function Ps(){return null!==Xe.skipHydrationRootTNode}()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,t,r,o);return null===e.firstChild&&(e.firstChild=d),null!==i&&(s?null==i.child&&null!==d.parent&&(i.child=d):null===i.next&&(i.next=d,d.prev=i)),d}(e,t,n,r,o),function Qw(){return Xe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function Fc(){const e=Xe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Zo(i,!0),i}function tu(e,t,n,r){if(0===n)return-1;const o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function ny(e,t,n,r,o){const i=Ir(),s=2&r;try{Fs(-1),s&&t.length>Pe&&ey(e,t,Pe,!1),yi(s?2:0,o),n(r,o)}finally{Fs(i),yi(s?3:1,o)}}function Mh(e,t,n){if(hf(t)){const r=Y(null);try{const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const c=e.data[s];c.contentQueries&&c.contentQueries(1,n[s],s)}}finally{Y(r)}}}function Sh(e,t,n){Wg()&&(function xT(e,t,n,r){const o=n.directiveStart,i=n.directiveEnd;Os(n)&&function jT(e,t,n){const r=$r(t,e),o=ry(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const c=zl(e,Gl(e,o,null,s,r,t,null,e[mi].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=c}(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||ml(n,t),Nr(r,t);const s=n.initialInputs;for(let c=o;c<i;c++){const d=e.data[c],v=Ls(t,e,c,n);Nr(v,t),null!==s&&BT(0,c-o,v,d,0,s),Ko(d)&&(Co(n.index,t)[un]=Ls(t,e,c,n))}}(e,t,n,$r(n,t)),!(64&~n.flags)&&cy(e,t,n))}function Ah(e,t,n=$r){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],c=-1===s?n(t,e):e[s];e[o++]=c}}}function ry(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Nh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Nh(e,t,n,r,o,i,s,c,d,v,C){const M=Pe+r,F=M+o,V=function DT(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:et);return n}(M,F),$="function"==typeof v?v():v;return V[Ce]={type:e,blueprint:V,template:n,queries:null,viewQuery:c,declTNode:t,data:V.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:d,consts:$,incompleteFirstPass:!1,ssrId:C}}let oy=()=>null;function iy(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;const s=t[i];if(void 0===s)continue;r??={};let c,d=pi.None;Array.isArray(s)?(c=s[0],d=s[1]):c=s;let v=i;if(null!==o){if(!o.hasOwnProperty(i))continue;v=o[i]}0===e?sy(r,n,v,c,d):sy(r,n,v,c)}return r}function sy(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],void 0!==o&&i.push(o)}function so(e,t,n,r,o,i,s,c){const d=$r(t,n);let C,v=t.inputs;!c&&null!=v&&(C=v[r])?(Fh(e,n,C,r,o),Os(t)&&function AT(e,t){const n=Co(t,e);16&n[Ve]||(n[Ve]|=64)}(n,t.index)):3&t.type&&(r=function ST(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),o=null!=s?s(o,t.value||"",r):o,i.setProperty(d,r,o))}function Rh(e,t,n,r){if(Wg()){const o=null===r?null:{"":-1},i=function FT(e,t){const n=e.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(qu(t,s.selectors,!1))if(r||(r=[]),Ko(s))if(null!==s.findHostDirectiveDefs){const c=[];o=o||new Map,s.findHostDirectiveDefs(s,c,o),r.unshift(...c,s),Oh(e,t,c.length)}else r.unshift(s),Oh(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(e,n);let s,c;null===i?s=c=null:[s,c]=i,null!==s&&ay(e,t,n,s,o,c),o&&function kT(e,t,n){if(t){const r=e.localNames=[];for(let o=0;o<t.length;o+=2){const i=n[t[o+1]];if(null==i)throw new Se(-301,!1);r.push(t[o],i)}}}(n,r,o)}n.mergedAttrs=ls(n.mergedAttrs,n.attrs)}function ay(e,t,n,r,o,i){for(let v=0;v<r.length;v++)kf(ml(n,t),e,r[v].type);!function VT(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let v=0;v<r.length;v++){const C=r[v];C.providersResolver&&C.providersResolver(C)}let s=!1,c=!1,d=tu(e,t,r.length,null);for(let v=0;v<r.length;v++){const C=r[v];n.mergedAttrs=ls(n.mergedAttrs,C.hostAttrs),UT(e,n,t,d,C),LT(d,C,o),null!==C.contentQueries&&(n.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(n.flags|=64);const M=C.type.prototype;!s&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!c&&(M.ngOnChanges||M.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),c=!0),d++}!function MT(e,t,n){const o=t.directiveEnd,i=e.data,s=t.attrs,c=[];let d=null,v=null;for(let C=t.directiveStart;C<o;C++){const M=i[C],F=n?n.get(M):null,$=F?F.outputs:null;d=iy(0,M.inputs,C,d,F?F.inputs:null),v=iy(1,M.outputs,C,v,$);const ie=null===d||null===s||yo(t)?null:HT(d,C,s);c.push(ie)}null!==d&&(d.hasOwnProperty("class")&&(t.flags|=8),d.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=d,t.outputs=v}(e,n,i)}function cy(e,t,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function Jw(){return Xe.lFrame.currentDirectiveIndex}();try{Fs(i);for(let c=r;c<o;c++){const d=e.data[c],v=t[c];bf(c),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&PT(d,v)}}finally{Fs(-1),bf(s)}}function PT(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Oh(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function LT(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ko(t)&&(n[""]=e)}}function UT(e,t,n,r,o){e.data[r]=o;const i=o.factory||(o.factory=Li(o.type)),s=new Lc(i,Ko(o),Ua);e.blueprint[r]=s,n[r]=s,function RT(e,t,n,r,o){const i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const c=~t.index;(function OT(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=c&&s.push(c),s.push(n,r,i)}}(e,t,r,tu(e,n,o.hostVars,et),o)}function _i(e,t,n,r,o,i){const s=$r(e,t);!function xh(e,t,n,r,o,i,s){if(null==i)e.removeAttribute(t,o,n);else{const c=null==s?We(i):s(i,r||"",o);e.setAttribute(t,o,c,n)}}(t[qe],s,i,e.value,n,r,o)}function BT(e,t,n,r,o,i){const s=i[t];if(null!==s)for(let c=0;c<s.length;)ty(r,n,s[c++],s[c++],s[c++],s[c++])}function HT(e,t,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(e.hasOwnProperty(i)){null===r&&(r=[]);const s=e[i];for(let c=0;c<s.length;c+=3)if(s[c]===t){r.push(i,s[c+1],s[c+2],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function uy(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function ly(e,t){const n=e.contentQueries;if(null!==n){const r=Y(null);try{for(let o=0;o<n.length;o+=2){const s=n[o+1];if(-1!==s){const c=e.data[s];dl(n[o]),c.contentQueries(2,t[s],s)}}}finally{Y(r)}}}function zl(e,t){return e[Ac]?e[Ng][Xo]=t:e[Ac]=t,e[Ng]=t,t}function Ph(e,t,n){dl(0);const r=Y(null);try{t(e,n)}finally{Y(r)}}function dy(e){return e[wa]??=[]}function fy(e){return e.cleanup??=[]}function Wl(e,t){const n=e[Kn],r=n?n.get(zi,null):null;r&&r.handleError(t)}function Fh(e,t,n,r,o){for(let i=0;i<n.length;){const s=n[i++],c=n[i++],d=n[i++];ty(e.data[s],t[s],r,c,d,o)}}function qi(e,t,n){const r=Oc(t,e);!function Vv(e,t,n){e.setValue(t,n)}(e[qe],r,n)}function $T(e,t){const n=Co(t,e),r=n[Ce];!function GT(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const o=n[vn];null!==o&&null===n[Hr]&&(n[Hr]=th(o,n[Kn])),kh(r,n,n[un])}function kh(e,t,n){Sf(t);try{const r=e.viewQuery;null!==r&&Ph(1,r,n);const o=e.template;null!==o&&ny(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Bi]?.finishViewCreation(e),e.staticContentQueries&&ly(e,t),e.staticViewQueries&&Ph(2,e.viewQuery,n);const i=e.components;null!==i&&function zT(e,t){for(let n=0;n<t.length;n++)$T(e,t[n])}(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ve]&=-5,Af()}}function ja(e,t,n,r){const o=Y(null);try{const i=t.tView,d=Gl(e,i,n,4096&e[Ve]?4096:16,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);d[Rs]=e[t.index];const C=e[Bi];return null!==C&&(d[Bi]=C.createEmbeddedView(i)),kh(i,d,n),d}finally{Y(o)}}function py(e,t){const n=Bn+t;if(n<e.length)return e[n]}function $s(e,t){return!t||null===t.firstChild||$c(e)}function Ba(e,t,n,r=!0){const o=t[Ce];if(function lT(e,t,n,r){const o=Bn+r,i=n.length;r>0&&(n[o-1][Xo]=t),r<i-Bn?(t[Xo]=n[o],Ec(n,Bn+r,t)):(n.push(t),t[Xo]=null),t[Xn]=n;const s=t[Rs];null!==s&&n!==s&&jv(s,t);const c=t[Bi];null!==c&&c.insertView(e),Df(t),t[Ve]|=128}(o,t,e,n),r){const s=Ih(n,e),c=t[qe],d=_h(c,e[vi]);null!==d&&function cT(e,t,n,r,o,i){r[vn]=o,r[wr]=t,$l(e,r,n,1,o,i)}(o,e[wr],c,t,d,s)}const i=t[Hr];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function Lh(e,t){const n=Jc(e,t);return void 0!==n&&Bl(n[Ce],n),n}function nu(e,t,n,r,o=!1){for(;null!==n;){if(128===n.type){n=o?n.projectionNext:n.next;continue}const i=t[n.index];null!==i&&r.push(Ot(i)),Ar(i)&&gy(i,r);const s=n.type;if(8&s)nu(e,t,n.child,r);else if(32&s){const c=mh(n,t);let d;for(;d=c();)r.push(d)}else if(16&s){const c=Xv(t,n);if(Array.isArray(c))r.push(...c);else{const d=Hi(t[yn]);nu(d[Ce],d,c,r,!0)}}n=o?n.projectionNext:n.next}return r}function gy(e,t){for(let n=Bn;n<e.length;n++){const r=e[n],o=r[Ce].firstChild;null!==o&&nu(r[Ce],r,o,t)}e[vi]!==e[vn]&&t.push(e[vi])}let my=[];const KT={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{cl(e.lView)},consumerOnSignalRead(){this.lView[Vo]=this}},QT={...z,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Hi(e.lView);for(;t&&!vy(t[Ce]);)t=Hi(t);t&&$g(t)},consumerOnSignalRead(){this.lView[Vo]=this}};function vy(e){return 2!==e.type}const YT=100;function ql(e,t=!0,n=0){const r=e[mi],o=r.rendererFactory;o.begin?.();try{!function JT(e,t){const n=Yg();try{Jg(!0),Vh(e,t);let r=0;for(;Pc(e);){if(r===YT)throw new Se(103,!1);r++,Vh(e,1)}}finally{Jg(n)}}(e,n)}catch(s){throw t&&Wl(e,s),s}finally{o.end?.(),r.inlineEffectRunner?.flush()}}function eM(e,t,n,r){const o=t[Ve];if(!(256&~o))return;t[mi].inlineEffectRunner?.flush(),Sf(t);let c=!0,d=null,v=null;vy(e)?(v=function WT(e){return e[Vo]??function qT(e){const t=my.pop()??Object.create(KT);return t.lView=e,t}(e)}(t),d=be(v)):null===function Ne(){return U}()?(c=!1,v=function ZT(e){const t=e[Vo]??Object.create(QT);return t.lView=e,t}(t),d=be(v)):t[Vo]&&(Et(t[Vo]),t[Vo]=null);try{Hg(t),function em(e){return Xe.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&ny(e,t,n,2,r);const C=!(3&~o);if(C){const V=e.preOrderCheckHooks;null!==V&&hl(t,V,null)}else{const V=e.preOrderHooks;null!==V&&pl(t,V,0,null),Nf(t,0)}if(function tM(e){for(let t=qm(e);null!==t;t=Xm(t)){if(!(t[Ve]&sl.HasTransplantedViews))continue;const n=t[Ma];for(let r=0;r<n.length;r++)$g(n[r])}}(t),Ey(t,0),null!==e.contentQueries&&ly(e,t),C){const V=e.contentCheckHooks;null!==V&&hl(t,V)}else{const V=e.contentHooks;null!==V&&pl(t,V,1),Nf(t,1)}!function ET(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Fs(~o);else{const i=o,s=n[++r],c=n[++r];Yw(s,i),c(2,t[i])}}}finally{Fs(-1)}}(e,t);const M=e.components;null!==M&&Cy(t,M,0);const F=e.viewQuery;if(null!==F&&Ph(2,F,r),C){const V=e.viewCheckHooks;null!==V&&hl(t,V)}else{const V=e.viewHooks;null!==V&&pl(t,V,2),Nf(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[ol]){for(const V of t[ol])V();t[ol]=null}t[Ve]&=-73}catch(C){throw cl(t),C}finally{null!==v&&(mt(v,d),c&&function XT(e){e.lView[Vo]!==e&&(e.lView=null,my.push(e))}(v)),Af()}}function Ey(e,t){for(let n=qm(e);null!==n;n=Xm(n))for(let r=Bn;r<n.length;r++)Dy(n[r],t)}function nM(e,t,n){Dy(Co(t,e),n)}function Dy(e,t){Ef(e)&&Vh(e,t)}function Vh(e,t){const r=e[Ce],o=e[Ve],i=e[Vo];let s=!!(0===t&&16&o);if(s||=!!(64&o&&0===t),s||=!!(1024&o),s||=!(!i?.dirty||!He(i)),s||=!1,i&&(i.dirty=!1),e[Ve]&=-9217,s)eM(r,e,r.template,e[un]);else if(8192&o){Ey(e,1);const c=r.components;null!==c&&Cy(e,c,1)}}function Cy(e,t,n){for(let r=0;r<t.length;r++)nM(e,t[r],n)}function ru(e,t){const n=Yg()?64:1088;for(e[mi].changeDetectionScheduler?.notify(t);e;){e[Ve]|=n;const r=Hi(e);if(Rc(e)&&!r)return e;e=r}return null}class ou{get rootNodes(){const t=this._lView,n=t[Ce];return nu(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(t){this._lView[un]=t}get destroyed(){return!(256&~this._lView[Ve])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Xn];if(Ar(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Jc(t,r),ga(n,r))}this._attachedToViewContainer=!1}Bl(this._lView[Ce],this._lView)}onDestroy(t){ul(this._lView,t)}markForCheck(){ru(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ve]&=-129}reattach(){Df(this._lView),this._lView[Ve]|=128}detectChanges(){this._lView[Ve]|=1024,ql(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const t=Rc(this._lView),n=this._lView[Rs];null!==n&&!t&&Eh(n,this._lView),Uv(this._lView[Ce],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=t;const n=Rc(this._lView),r=this._lView[Rs];null!==r&&!n&&jv(r,this._lView),Df(this._lView)}}let iu=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=iM}return e})();const rM=iu,oM=class extends rM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const o=ja(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new ou(o)}};function iM(){return Xl(Wt(),oe())}function Xl(e,t){return 4&e.type?new oM(t,e,Ra(e,t)):null}let Hy=()=>null;function zs(e,t){return Hy(e,t)}class $a{}const hu=new Le("",{providedIn:"root",factory:()=>!1}),$y=new Le(""),Kh=new Le("");class QM{}class Gy{}class JM{resolveComponentFactory(t){throw function YM(e){const t=Error(`No component factory found for ${$t(e)}.`);return t.ngComponent=e,t}(t)}}class pu{static#e=this.NULL=new JM}class Zh{}let eS=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function tS(){const e=oe(),n=Co(Wt().index,e);return(rr(n)?n:e)[qe]}()}return e})(),nS=(()=>{class e{static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>null})}return e})();const Wy=new Set;function zr(e){Wy.has(e)||(Wy.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}let ed=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>new e})}return e})();function gs(e){return!!nr(e)}function nd(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const c=t[s];"number"==typeof c?i=c:1==i?o=Ri(o,c):2==i&&(r=Ri(r,c+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}class Qy extends pu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=it(t);return new vu(n,this.ngModule)}}function Yy(e,t){const n=[];for(const r in e){if(!e.hasOwnProperty(r))continue;const o=e[r];if(void 0===o)continue;const i=Array.isArray(o),s=i?o[0]:o;n.push(t?{propName:s,templateName:r,isSignal:!!((i?o[1]:pi.None)&pi.SignalBased)}:{propName:s,templateName:r})}return n}class vu extends Gy{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Yy(t.inputs,!0);if(null!==n)for(const o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return Yy(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function tf(e){return e.map(Xu).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){const i=Y(null);try{let s=(o=o||this.ngModule)instanceof a?o:o?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const c=s?new ks(t,s):t,d=c.get(Zh,null);if(null===d)throw new Se(407,!1);const v=c.get(nS,null),F={rendererFactory:d,sanitizer:v,inlineEffectRunner:null,afterRenderEventManager:c.get(ed,null),changeDetectionScheduler:c.get($a,null)},V=d.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",ie=r?function CT(e,t,n,r){const i=r.get(fv,!1)||n===hi.ShadowDom,s=e.selectRootElement(t,i);return function _T(e){oy(e)}(s),s}(V,r,this.componentDef.encapsulation,c):jl(V,$,function lS(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}($));let Ee=512;this.componentDef.signals?Ee|=4096:this.componentDef.onPush||(Ee|=16);let _e=null;null!==ie&&(_e=th(ie,c,!0));const ce=Nh(0,null,null,1,0,null,null,null,null,null,null),Be=Gl(null,ce,null,Ee,null,null,F,V,c,null,_e);let St,Jt;Sf(Be);try{const cr=this.componentDef;let co,fc=null;cr.findHostDirectiveDefs?(co=[],fc=new Map,cr.findHostDirectiveDefs(cr,co,fc),co.push(cr)):co=[cr];const bw=function fS(e,t){const n=e[Ce],r=Pe;return e[r]=t,Hs(n,r,2,"#host",null)}(Be,ie),Tx=function hS(e,t,n,r,o,i,s){const c=o[Ce];!function pS(e,t,n,r){for(const o of e)t.mergedAttrs=ls(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(nd(t,t.mergedAttrs,!0),null!==n&&Yv(r,n,t))}(r,e,t,s);let d=null;null!==t&&(d=th(t,o[Kn]));const v=i.rendererFactory.createRenderer(t,n);let C=16;n.signals?C=4096:n.onPush&&(C=64);const M=Gl(o,ry(n),null,C,o[e.index],e,i,v,null,null,d);return c.firstCreatePass&&Oh(c,e,r.length-1),zl(o,M),o[e.index]=M}(bw,ie,cr,co,Be,F,V);Jt=xc(ce,Pe),ie&&function mS(e,t,n,r){if(r)Ea(e,n,["ng-version","18.2.1"]);else{const{attrs:o,classes:i}=function Ku(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&t.push(i,e[++r]):8===o&&n.push(i);else{if(!jr(o))break;o=i}r++}return{attrs:t,classes:n}}(t.selectors[0]);o&&Ea(e,n,o),i&&i.length>0&&Qv(e,n,i.join(" "))}}(V,cr,ie,r),void 0!==n&&function vS(e,t,n){const r=e.projection=[];for(let o=0;o<t.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(Jt,this.ngContentSelectors,n),St=function gS(e,t,n,r,o,i){const s=Wt(),c=o[Ce],d=$r(s,o);ay(c,o,s,n,null,r);for(let C=0;C<n.length;C++)Nr(Ls(o,c,s.directiveStart+C,s),o);cy(c,o,s),d&&Nr(d,o);const v=Ls(o,c,s.directiveStart+s.componentOffset,s);if(e[un]=o[un]=v,null!==i)for(const C of i)C(v,t);return Mh(c,s,o),v}(Tx,cr,co,fc,Be,[yS]),kh(ce,Be,null)}finally{Af()}return new dS(this.componentType,St,Ra(Jt,Be),Be,Jt)}finally{Y(i)}}}class dS extends QM{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ou(o,void 0,!1),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const i=this._rootLView;Fh(i[Ce],i,o,t,n),this.previousInputValues.set(t,n),ru(Co(this._tNode.index,i),1)}}get injector(){return new or(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function yS(){const e=Wt();fl(oe()[Ce],e)}let rd=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ES}return e})();function ES(){return tE(Wt(),oe())}const DS=rd,Jy=class extends DS{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ra(this._hostTNode,this._hostLView)}get injector(){return new or(this._hostTNode,this._hostLView)}get parentInjector(){const t=vl(this._hostTNode,this._hostLView);if(xf(t)){const n=Uc(t,this._hostLView),r=Vc(t);return new or(n[Ce].data[r+8],n)}return new or(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=eE(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(t,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=zs(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(c,o,$s(this._hostTNode,s)),c}createComponent(t,n,r,o,i){const s=t&&!function Sc(e){return"function"==typeof e}(t);let c;if(s)c=n;else{const $=n||{};c=$.index,r=$.injector,o=$.projectableNodes,i=$.environmentInjector||$.ngModuleRef}const d=s?t:new vu(it(t)),v=r||this.parentInjector;if(!i&&null==d.ngModule){const ie=(s?v:this.parentInjector).get(a,null);ie&&(i=ie)}const C=it(d.componentType??{}),M=zs(this._lContainer,C?.id??null),V=d.create(v,o,M?.firstChild??null,i);return this.insertImpl(V.hostView,c,$s(this._hostTNode,M)),V}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const o=t._lView;if(function Hw(e){return Ar(e[Xn])}(o)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=o[Xn],v=new Jy(d,d[wr],d[Xn]);v.detach(v.indexOf(t))}}const i=this._adjustIndex(n),s=this._lContainer;return Ba(s,o,i,r),t.attachToViewContainerRef(),Ec(ep(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=eE(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Jc(this._lContainer,n);r&&(ga(ep(this._lContainer),n),Bl(r[Ce],r))}detach(t){const n=this._adjustIndex(t,-1),r=Jc(this._lContainer,n);return r&&null!=ga(ep(this._lContainer),n)?new ou(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function eE(e){return e[8]}function ep(e){return e[8]||(e[8]=[])}function tE(e,t){let n;const r=t[e.index];return Ar(r)?n=r:(n=uy(r,t,null,e),t[e.index]=n,zl(t,n)),nE(n,t,e,r),new Jy(n,e,t)}let nE=function oE(e,t,n,r){if(e[vi])return;let o;o=8&n.type?Ot(r):function CS(e,t){const n=e[qe],r=n.createComment(""),o=$r(t,e);return js(n,_h(n,o),r,function hT(e,t){return e.nextSibling(t)}(n,o),!1),r}(t,n),e[vi]=o},tp=()=>!1;class np{constructor(t){this.queryList=t,this.matches=null}clone(){return new np(this.queryList)}setDirty(){this.queryList.setDirty()}}class rp{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){const s=n.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new rp(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==cp(t,n).matches&&this.queries[n].setDirty()}}class iE{constructor(t,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof t?function AS(e){return e.split(",").map(t=>t.trim())}(t):t}}class op{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const o=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new op(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ip{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new ip(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(t,n,bS(n,i)),this.matchTNodeWithReadOption(t,n,yl(n,t,i,!1,!1))}else r===iu?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,yl(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===Bc||o===rd||o===iu&&4&n.type)this.addMatch(n.index,-2);else{const i=yl(n,t,o,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function bS(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function MS(e,t,n,r){return-1===n?function TS(e,t){return 11&e.type?Ra(e,t):4&e.type?Xl(e,t):null}(t,e):-2===n?function SS(e,t,n){return n===Bc?Ra(t,e):n===iu?Xl(t,e):n===rd?tE(t,e):void 0}(e,t,r):Ls(e,e[Ce],n,t)}function sE(e,t,n,r){const o=t[Bi].queries[r];if(null===o.matches){const i=e.data,s=n.matches,c=[];for(let d=0;null!==s&&d<s.length;d+=2){const v=s[d];c.push(v<0?null:MS(t,i[v],s[d+1],n.metadata.read))}o.matches=c}return o.matches}function sp(e,t,n,r){const o=e.queries.getByIndex(n),i=o.matches;if(null!==i){const s=sE(e,t,o,n);for(let c=0;c<i.length;c+=2){const d=i[c];if(d>0)r.push(s[c/2]);else{const v=i[c+1],C=t[-d];for(let M=Bn;M<C.length;M++){const F=C[M];F[Rs]===F[Xn]&&sp(F[Ce],F,v,r)}if(null!==C[Ma]){const M=C[Ma];for(let F=0;F<M.length;F++){const V=M[F];sp(V[Ce],V,v,r)}}}}}return r}function aE(e,t,n){const r=new Gf(!(4&~n));return function bT(e,t,n,r){const o=dy(t);o.push(n),e.firstCreatePass&&fy(e).push(r,o.length-1)}(e,t,r,r.destroy),(t[Bi]??=new rp).queries.push(new np(r))-1}function lE(e,t,n){null===e.queries&&(e.queries=new op),e.queries.track(new ip(t,n))}function cp(e,t){return e.queries.getByIndex(t)}function dE(e,t){const n=e[Ce],r=cp(n,t);return r.crossesNgTemplate?sp(n,e,t,[]):sE(n,e,r,t)}function hE(e,t){zr("NgSignals");const n=function Xr(e){const t=Object.create(vr);t.value=e;const n=()=>(H(t),t.value);return n[ee]=t,n}(e),r=n[ee];return t?.equal&&(r.equal=t.equal),n.set=o=>Zn(r,o),n.update=o=>function qt(e,t){le()||En(),Zn(e,t(e.value))}(r,o),n.asReadonly=pE.bind(n),n}function pE(){const e=this[ee];if(void 0===e.readonlyFn){const t=()=>this();t[ee]=e,e.readonlyFn=t}return e.readonlyFn}function lp(e){let t=function TE(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let o;if(Ko(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Se(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);const s=e;s.inputs=id(e.inputs),s.inputTransforms=id(e.inputTransforms),s.declaredInputs=id(e.declaredInputs),s.outputs=id(e.outputs);const c=o.hostBindings;c&&GS(e,c);const d=o.viewQuery,v=o.contentQueries;if(d&&HS(e,d),v&&$S(e,v),jS(e,o),Ts(e.outputs,o.outputs),Ko(o)&&o.data.animation){const C=e.data;C.animation=(C.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const c=i[s];c&&c.ngInherit&&c(e),c===lp&&(n=!1)}}t=Object.getPrototypeOf(t)}!function BS(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=ls(o.hostAttrs,n=ls(n,o.hostAttrs))}}(r)}function jS(e,t){for(const n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;const r=t.inputs[n];if(void 0!==r&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],null!==t.inputTransforms)){const o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function id(e){return e===mo?{}:e===Dt?[]:e}function HS(e,t){const n=e.viewQuery;e.viewQuery=n?(r,o)=>{t(r,o),n(r,o)}:t}function $S(e,t){const n=e.contentQueries;e.contentQueries=n?(r,o,i)=>{t(r,o,i),n(r,o,i)}:t}function GS(e,t){const n=e.hostBindings;e.hostBindings=n?(r,o)=>{t(r,o),n(r,o)}:t}function NE(e){const t=e.inputConfig,n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r];Array.isArray(o)&&o[3]&&(n[r]=o[3])}e.inputTransforms=n}class Ws{}class RE{}function ZS(e,t){return new dp(e,t??null,[])}class dp extends Ws{constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qy(this);const i=nr(t);this._bootstrapComponents=_o(i.bootstrap),this._r3Injector=Sm(t,n,[{provide:Ws,useValue:this},{provide:pu,useValue:this.componentFactoryResolver},...r],$t(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fp extends RE{constructor(t){super(),this.moduleType=t}create(t){return new dp(this.moduleType,t,[])}}class OE extends Ws{constructor(t){super(),this.componentFactoryResolver=new Qy(this),this.instance=null;const n=new l([...t.providers,{provide:Ws,useValue:this},{provide:pu,useValue:this.componentFactoryResolver}],t.parent||Mc(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function hp(e,t,n=null){return new OE({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function sd(e){return!!pp(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function pp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function wi(e,t,n){return e[t]=n}function Hn(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function qs(e,t,n,r){const o=Hn(e,t,n);return Hn(e,t+1,r)||o}function Du(e,t,n,r,o,i,s,c,d,v){const C=n+Pe,M=t.firstCreatePass?function n0(e,t,n,r,o,i,s,c,d){const v=t.consts,C=Hs(t,e,4,s||null,c||null);Rh(t,n,C,Uo(v,d)),fl(t,C);const M=C.tView=Nh(2,C,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v,null);return null!==t.queries&&(t.queries.template(t,C),M.queries=t.queries.embeddedTView(C)),C}(C,t,e,r,o,i,s,c,d):t.data[C];Zo(M,!1);const F=xE(t,e,M,n);kc()&&Hl(t,e,F,M),Nr(F,e);const V=uy(F,e,F,M);return e[C]=V,zl(e,V),function rE(e,t,n){return tp(e,t,n)}(V,M,e),al(M)&&Sh(t,e,M),null!=d&&Ah(e,M,v),M}function gp(e,t,n,r,o,i,s,c){const d=oe(),v=ft();return Du(d,v,e,t,n,r,o,Uo(v.consts,i),s,c),gp}let xE=function PE(e,t,n,r){return Ei(!0),t[qe].createComment("")};function Tp(e,t,n,r){const o=oe();return Hn(o,Qo(),t)&&(ft(),_i(ln(),o,e,t,n,r)),Tp}function Ja(e,t,n,r){return Hn(e,Qo(),n)?t+We(n)+r:et}function ec(e,t,n,r,o,i){const c=qs(e,function $i(){return Xe.lFrame.bindingIndex}(),n,o);return Gi(2),c?t+We(n)+r+We(o)+i:et}function hd(e,t){return e<<17|t<<2}function ys(e){return e>>17&32767}function Mp(e){return 2|e}function Ks(e){return(131068&e)>>2}function Sp(e,t){return-131069&e|t<<2}function Ap(e){return 1|e}function dD(e,t,n,r){const o=e[n+1],i=null===t;let s=r?ys(o):Ks(o),c=!1;for(;0!==s&&(!1===c||i);){const v=e[s+1];H0(e[s],t)&&(c=!0,e[s+1]=r?Ap(v):Mp(v)),s=r?ys(v):Ks(v)}c&&(e[n+1]=r?Mp(o):Ap(o))}function H0(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Vi(e,t)>=0}function Np(e,t,n){const r=oe();return Hn(r,Qo(),t)&&so(ft(),ln(),r,e,t,r[qe],n,!1),Np}function Rp(e,t,n,r,o){const s=o?"class":"style";Fh(e,n,t.inputs[s],s,r)}function Op(e,t){return function Yo(e,t,n,r){const o=oe(),i=ft(),s=Gi(2);i.firstUpdatePass&&function DD(e,t,n,r){const o=e.data;if(null===o[n+1]){const i=o[Ir()],s=function ED(e,t){return t>=e.expandoStartIndex}(e,n);(function ID(e,t){return!!(e.flags&(t?8:16))})(i,r)&&null===t&&!s&&(t=!1),t=function Q0(e,t,n,r){const o=function Tf(e){const t=Xe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(n=Iu(n=xp(null,e,t,n,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==o)if(n=xp(o,e,t,n,r),null===i){let d=function Y0(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ks(r))return e[ys(r)]}(e,t,r);void 0!==d&&Array.isArray(d)&&(d=xp(null,e,t,d[1],r),d=Iu(d,t.attrs,r),function J0(e,t,n,r){e[ys(n?t.classBindings:t.styleBindings)]=r}(e,t,r,d))}else i=function eA(e,t,n){let r;const o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++)r=Iu(r,e[i].hostAttrs,n);return Iu(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(o,i,t,r),function j0(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,c=ys(s),d=Ks(s);e[r]=n;let C,v=!1;if(Array.isArray(n)?(C=n[1],(null===C||Vi(n,C)>0)&&(v=!0)):C=n,o)if(0!==d){const F=ys(e[c+1]);e[r+1]=hd(F,c),0!==F&&(e[F+1]=Sp(e[F+1],r)),e[c+1]=function V0(e,t){return 131071&e|t<<17}(e[c+1],r)}else e[r+1]=hd(c,0),0!==c&&(e[c+1]=Sp(e[c+1],r)),c=r;else e[r+1]=hd(d,0),0===c?c=r:e[d+1]=Sp(e[d+1],r),d=r;v&&(e[r+1]=Mp(e[r+1])),dD(e,C,r,!0),dD(e,C,r,!1),function B0(e,t,n,r,o){const i=o?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&Vi(i,t)>=0&&(n[r+1]=Ap(n[r+1]))}(t,C,e,r,i),s=hd(c,d),i?t.classBindings=s:t.styleBindings=s}(o,i,t,n,s,r)}}(i,e,s,r),t!==et&&Hn(o,s,t)&&function _D(e,t,n,r,o,i,s,c){if(!(3&t.type))return;const d=e.data,v=d[c+1],C=function U0(e){return!(1&~e)}(v)?wD(d,t,n,o,Ks(v),s):void 0;pd(C)||(pd(i)||function L0(e){return!(2&~e)}(v)&&(i=wD(d,null,n,o,c,s)),function mT(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:Ul.DashCase;null==o?e.removeStyle(n,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Ul.Important),e.setStyle(n,r,o,i))}}(r,s,Oc(Ir(),n),o,i))}(i,i.data[Ir()],o,o[qe],e,o[s+1]=function oA(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=$t(ps(e)))),e}(t,n),r,s)}(e,t,null,!0),Op}function xp(e,t,n,r,o){let i=null;const s=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<s&&(i=t[c],r=Iu(r,i.hostAttrs,o),i!==e);)c++;return null!==e&&(n.directiveStylingLast=c),r}function Iu(e,t,n){const r=n?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ur(e,s,!!n||t[++i]))}return void 0===e?null:e}function wD(e,t,n,r,o,i){const s=null===t;let c;for(;o>0;){const d=e[o],v=Array.isArray(d),C=v?d[1]:d,M=null===C;let F=n[o+1];F===et&&(F=M?Dt:void 0);let V=M?Dc(F,r):C===r?F:void 0;if(v&&!pd(V)&&(V=Dc(d,r)),pd(V)&&(c=V,s))return c;const $=e[o+1];o=s?ys($):Ks($)}if(null!==t){let d=i?t.residualClasses:t.residualStyles;null!=d&&(c=Dc(d,r))}return c}function pd(e){return void 0!==e}class gA{destroy(t){}updateValue(t,n){}swap(t,n){const r=Math.min(t,n),o=Math.max(t,n),i=this.detach(o);if(o-r>1){const s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t))}}function Pp(e,t,n,r,o){return e===n&&Object.is(t,r)?1:Object.is(o(e,t),o(n,r))?-1:0}function Fp(e,t,n,r){return!(void 0===t||!t.has(r)||(e.attach(n,t.get(r)),t.delete(r),0))}function bD(e,t,n,r,o){if(Fp(e,t,r,n(r,o)))e.updateValue(r,o);else{const i=e.create(r,o);e.attach(r,i)}}function TD(e,t,n,r){const o=new Set;for(let i=t;i<=n;i++)o.add(r(i,e.at(i)));return o}class MD{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;const n=this.kvMap.get(t);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);void 0===this._vMap&&(this._vMap=new Map);const o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),void 0!==this._vMap){const o=this._vMap;for(;o.has(r);)r=o.get(r),t(r,n)}}}function SD(e,t){zr("NgControlFlow");const n=oe(),r=Qo(),o=n[r]!==et?n[r]:-1,i=-1!==o?gd(n,Pe+o):void 0;if(Hn(n,r,e)){const c=Y(null);try{if(void 0!==i&&Lh(i,0),-1!==e){const d=Pe+e,v=gd(n,d),C=kp(n[Ce],d),M=zs(v,C.tView.ssrId);Ba(v,ja(n,C,t,{dehydratedView:M}),0,$s(C,M))}}finally{Y(c)}}else if(void 0!==i){const c=py(i,0);void 0!==c&&(c[un]=t)}}class vA{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Bn}}function AD(e,t){return t}class EA{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}}function ND(e,t,n,r,o,i,s,c,d,v,C,M,F){zr("NgControlFlow");const V=oe(),$=ft(),ie=void 0!==d,Ee=oe(),_e=c?s.bind(Ee[yn][un]):s,ce=new EA(ie,_e);Ee[Pe+e]=ce,Du(V,$,e+1,t,n,r,o,Uo($.consts,i)),ie&&Du(V,$,e+2,d,v,C,M,Uo($.consts,F))}class DA extends gA{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Bn}at(t){return this.getLView(t)[un].$implicit}attach(t,n){const r=n[Hr];this.needsIndexUpdate||=t!==this.length,Ba(this.lContainer,n,t,$s(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,function CA(e,t){return Jc(e,t)}(this.lContainer,t)}create(t,n){const r=zs(this.lContainer,this.templateTNode.tView.ssrId),o=ja(this.hostLView,this.templateTNode,new vA(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(t){Bl(t[Ce],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[un].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[un].$index=t}getLView(t){return function _A(e,t){return py(e,t)}(this.lContainer,t)}}function RD(e){const t=Y(null),n=Ir();try{const r=oe(),o=r[Ce],i=r[n],s=n+1,c=gd(r,s);if(void 0===i.liveCollection){const v=kp(o,s);i.liveCollection=new DA(c,r,v)}else i.liveCollection.reset();const d=i.liveCollection;if(function mA(e,t,n){let r,o,i=0,s=e.length-1;if(Array.isArray(t)){let d=t.length-1;for(;i<=s&&i<=d;){const v=e.at(i),C=t[i],M=Pp(i,v,i,C,n);if(0!==M){M<0&&e.updateValue(i,C),i++;continue}const F=e.at(s),V=t[d],$=Pp(s,F,d,V,n);if(0!==$){$<0&&e.updateValue(s,V),s--,d--;continue}const ie=n(i,v),Ee=n(s,F),_e=n(i,C);if(Object.is(_e,Ee)){const ce=n(d,V);Object.is(ce,ie)?(e.swap(i,s),e.updateValue(s,V),d--,s--):e.move(s,i),e.updateValue(i,C),i++}else if(r??=new MD,o??=TD(e,i,s,n),Fp(e,r,i,_e))e.updateValue(i,C),i++,s++;else if(o.has(_e))r.set(ie,e.detach(i)),s--;else{const ce=e.create(i,t[i]);e.attach(i,ce),i++,s++}}for(;i<=d;)bD(e,r,n,i,t[i]),i++}else if(null!=t){const d=t[Symbol.iterator]();let v=d.next();for(;!v.done&&i<=s;){const C=e.at(i),M=v.value,F=Pp(i,C,i,M,n);if(0!==F)F<0&&e.updateValue(i,M),i++,v=d.next();else{r??=new MD,o??=TD(e,i,s,n);const V=n(i,M);if(Fp(e,r,i,V))e.updateValue(i,M),i++,s++,v=d.next();else if(o.has(V)){const $=n(i,C);r.set($,e.detach(i)),s--}else e.attach(i,e.create(i,M)),i++,s++,v=d.next()}}for(;!v.done;)bD(e,r,n,e.length,v.value),v=d.next()}for(;i<=s;)e.destroy(e.detach(s--));r?.forEach(d=>{e.destroy(d)})}(d,e,i.trackByFn),d.updateIndexes(),i.hasEmptyBlock){const v=Qo(),C=0===d.length;if(Hn(r,v,C)){const M=n+2,F=gd(r,M);if(C){const V=kp(o,M),$=zs(F,V.tView.ssrId);Ba(F,ja(r,V,void 0,{dehydratedView:$}),0,$s(V,$))}else Lh(F,0)}}}finally{Y(t)}}function gd(e,t){return e[t]}function kp(e,t){return xc(e,t)}function md(e,t,n,r){const o=oe(),i=ft(),s=Pe+e,c=o[qe],d=i.firstCreatePass?function wA(e,t,n,r,o,i){const s=t.consts,d=Hs(t,e,2,r,Uo(s,o));return Rh(t,n,d,Uo(s,i)),null!==d.attrs&&nd(d,d.attrs,!1),null!==d.mergedAttrs&&nd(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(s,i,o,t,n,r):i.data[s],v=OD(i,o,d,c,t,e);o[s]=v;const C=al(d);return Zo(d,!0),Yv(c,v,d),!function za(e){return!(32&~e.flags)}(d)&&kc()&&Hl(i,o,v,d),0===function $w(){return Xe.lFrame.elementDepthCount}()&&Nr(v,o),function Gw(){Xe.lFrame.elementDepthCount++}(),C&&(Sh(i,o,d),Mh(i,d,o)),null!==r&&Ah(o,d),md}function vd(){let e=Wt();wf()?function If(){Xe.lFrame.isParent=!1}():(e=e.parent,Zo(e,!1));const t=e;(function Ww(e){return Xe.skipHydrationRootTNode===e})(t)&&function Zw(){Xe.skipHydrationRootTNode=null}(),function zw(){Xe.lFrame.elementDepthCount--}();const n=ft();return n.firstCreatePass&&(fl(n,e),hf(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function uI(e){return!!(8&e.flags)}(t)&&Rp(n,t,oe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function lI(e){return!!(16&e.flags)}(t)&&Rp(n,t,oe(),t.stylesWithoutHost,!1),vd}function Lp(e,t,n,r){return md(e,t,n,r),vd(),Lp}let OD=(e,t,n,r,o,i)=>(Ei(!0),jl(r,o,function am(){return Xe.lFrame.currentNamespace}()));function FD(){return oe()}const Zs=void 0;var NA=["en",[["a","p"],["AM","PM"],Zs],[["AM","PM"],Zs,Zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zs,"{1} 'at' {0}",Zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AA(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let cc={};function jp(e){const t=function RA(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=UD(t);if(n)return n;const r=t.split("-")[0];if(n=UD(r),n)return n;if("en"===r)return NA;throw new Se(701,!1)}function VD(e){return jp(e)[uc.PluralCase]}function UD(e){return e in cc||(cc[e]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[e]),cc[e]}var uc=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(uc||{});const yd="en-US";let jD=yd,oC=(e,t,n)=>{};function $p(e,t,n,r){const o=oe(),i=ft(),s=Wt();return function Gp(e,t,n,r,o,i,s){const c=al(r),v=e.firstCreatePass&&fy(e),C=t[un],M=dy(t);let F=!0;if(3&r.type||s){const ie=$r(r,t),Ee=s?s(ie):ie,_e=M.length,ce=s?St=>s(Ot(St[r.index])):r.index;let Be=null;if(!s&&c&&(Be=function EN(e,t,n,r){const o=e.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const c=t[wa],d=o[i+2];return c.length>d?c[d]:null}"string"==typeof s&&(i+=2)}return null}(e,t,o,r.index)),null!==Be)(Be.__ngLastListenerFn__||Be).__ngNextListenerFn__=i,Be.__ngLastListenerFn__=i,F=!1;else{i=cC(r,t,C,i),oC(ie,o,i);const St=n.listen(Ee,o,i);M.push(i,St),v&&v.push(o,ce,_e,_e+1)}}else i=cC(r,t,C,i);const V=r.outputs;let $;if(F&&null!==V&&($=V[o])){const ie=$.length;if(ie)for(let Ee=0;Ee<ie;Ee+=2){const Jt=t[$[Ee]][$[Ee+1]].subscribe(i),cr=M.length;M.push(i,Jt),v&&v.push(o,r.index,cr,-(cr+1))}}}(i,o,o[qe],s,e,t,r),$p}function aC(e,t,n,r){const o=Y(null);try{return yi(6,t,n),!1!==n(r)}catch(i){return Wl(e,i),!1}finally{yi(7,t,n),Y(o)}}function cC(e,t,n,r){return function o(i){if(i===Function)return r;ru(e.componentOffset>-1?Co(e.index,t):t,5);let c=aC(t,n,r,i),d=o.__ngNextListenerFn__;for(;d;)c=aC(t,n,d,i)&&c,d=d.__ngNextListenerFn__;return c}}function uC(e=1){return function tI(e){return(Xe.lFrame.contextLView=function Gg(e,t){for(;e>0;)t=t[Ia],e--;return t}(e,Xe.lFrame.contextLView))[un]}(e)}function zp(e,t,n){return Wp(e,"",t,"",n),zp}function Wp(e,t,n,r,o){const i=oe(),s=Ja(i,t,n,r);return s!==et&&so(ft(),ln(),i,e,s,i[qe],o,!1),Wp}function yC(e,t,n,r){!function uE(e,t,n,r){const o=ft();if(o.firstCreatePass){const i=Wt();lE(o,new iE(t,n,r),i.index),function NS(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(o,e),!(2&~n)&&(o.staticContentQueries=!0)}return aE(o,oe(),n)}(e,t,n,r)}function EC(e,t,n){!function cE(e,t,n){const r=ft();return r.firstCreatePass&&(lE(r,new iE(e,t,n),-1),!(2&~t)&&(r.staticViewQueries=!0)),aE(r,oe(),t)}(e,t,n)}function DC(e){const t=oe(),n=ft(),r=Mf();dl(r+1);const o=cp(n,r);if(e.dirty&&function Bw(e){return!(4&~e[Ve])}(t)===!(2&~o.metadata.flags)){if(null===o.matches)e.reset([]);else{const i=dE(t,r);e.reset(i,Lm),e.notifyOnChanges()}return!0}return!1}function CC(){return function ap(e,t){return e[Bi].queries[t].queryList}(oe(),Mf())}function RC(e,t=""){const n=oe(),r=ft(),o=e+Pe,i=r.firstCreatePass?Hs(r,o,1,t,null):r.data[o],s=OC(r,n,i,t,e);n[o]=s,kc()&&Hl(r,n,s,i),Zo(i,!1)}let OC=(e,t,n,r,o)=>(Ei(!0),function vh(e,t){return e.createText(t)}(t[qe],r));function Xp(e){return _d("",e,""),Xp}function _d(e,t,n){const r=oe(),o=Ja(r,e,t,n);return o!==et&&qi(r,Ir(),o),_d}function Kp(e,t,n,r,o){const i=oe(),s=ec(i,e,t,n,r,o);return s!==et&&qi(i,Ir(),s),Kp}function Zp(e,t,n,r,o){if(e=ke(e),Array.isArray(e))for(let i=0;i<e.length;i++)Zp(e[i],t,n,r,o);else{const i=ft(),s=oe(),c=Wt();let d=ds(e)?e:ke(e.provide);const v=T(e),C=1048575&c.providerIndexes,M=c.directiveStart,F=c.providerIndexes>>20;if(ds(e)||!e.multi){const V=new Lc(v,o,Ua),$=Yp(d,t,o?C:C+F,M);-1===$?(kf(ml(c,s),i,d),Qp(i,e,t.length),t.push(d),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(V),s.push(V)):(n[$]=V,s[$]=V)}else{const V=Yp(d,t,C+F,M),$=Yp(d,t,C,C+F),Ee=$>=0&&n[$];if(o&&!Ee||!o&&!(V>=0&&n[V])){kf(ml(c,s),i,d);const _e=function zN(e,t,n,r,o){const i=new Lc(e,n,Ua);return i.multi=[],i.index=t,i.componentProviders=0,GC(i,o,r&&!n),i}(o?GN:$N,n.length,o,r,v);!o&&Ee&&(n[$].providerFactory=_e),Qp(i,e,t.length,0),t.push(d),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(_e),s.push(_e)}else Qp(i,e,V>-1?V:$,GC(n[o?$:V],v,!o&&r));!o&&r&&Ee&&n[$].componentProviders++}}}function Qp(e,t,n,r){const o=ds(t),i=function Sg(e){return!!e.useClass}(t);if(o||i){const d=(i?ke(t.useClass):t).prototype.ngOnDestroy;if(d){const v=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){const C=v.indexOf(n);-1===C?v.push(n,[r,d]):v[C+1].push(r,d)}else v.push(n,d)}}}function GC(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Yp(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function $N(e,t,n,r){return Jp(this.multi,[])}function GN(e,t,n,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,c=Ls(n,n[Ce],this.providerFactory.index,r);i=c.slice(0,s),Jp(o,i);for(let d=s;d<c.length;d++)i.push(c[d])}else i=[],Jp(o,i);return i}function Jp(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function zC(e,t=[]){return n=>{n.providersResolver=(r,o)=>function HN(e,t,n){const r=ft();if(r.firstCreatePass){const o=Ko(e);Zp(n,r.data,r.blueprint,o,!0),Zp(t,r.data,r.blueprint,o,!1)}}(r,o?o(e):e,t)}}let WN=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Qu(0,n.type),o=r.length>0?hp([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=gt({token:e,providedIn:"environment",factory:()=>new e(Ye(a))})}return e})();function WC(e){zr("NgStandalone"),e.getStandaloneInjector=t=>t.get(WN).getOrCreateStandaloneInjector(e)}function KC(e,t,n,r){return ZC(oe(),Gr(),e,t,n,r)}function Nu(e,t){const n=e[t];return n===et?void 0:n}function ZC(e,t,n,r,o,i){const s=t+n;return Hn(e,s,o)?wi(e,s+1,i?r.call(i,o):r(o)):Nu(e,s+1)}function t_(e,t){const n=ft();let r;const o=e+Pe;n.firstCreatePass?(r=function iR(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];const i=r.factory||(r.factory=Li(r.type)),c=Mr(Ua);try{const d=gl(!1),v=i();return gl(d),function qp(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,oe(),o,v),v}finally{Mr(c)}}function n_(e,t,n){const r=e+Pe,o=oe(),i=xs(o,r);return Ru(o,r)?ZC(o,Gr(),t,i.transform,n,i):i.transform(n)}function r_(e,t,n,r){const o=e+Pe,i=oe(),s=xs(i,o);return Ru(i,o)?function QC(e,t,n,r,o,i,s){const c=t+n;return qs(e,c,o,i)?wi(e,c+2,s?r.call(s,o,i):r(o,i)):Nu(e,c+2)}(i,Gr(),t,s.transform,n,r,s):s.transform(n,r)}function Ru(e,t){return e[Ce].data[t].pure}function o_(e,t){return Xl(e,t)}class D_{constructor(t){this.full=t;const n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}let C_=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const T_=new Le(""),M_=new Le("");let ig,tO=(()=>{class e{constructor(n,r,o){this._ngZone=n,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ig||(function nO(e){ig=e}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(Ye(_n),Ye(S_),Ye(M_))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})(),S_=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ig?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function sg(e){return!!e&&"function"==typeof e.then}function A_(e){return!!e&&"function"==typeof e.subscribe}const rO=new Le("");let N_=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=pe(rO,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=o();if(sg(i))n.push(i);else if(A_(i)){const s=new Promise((c,d)=>{i.subscribe({complete:c,error:d})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Md=new Le("");let ei=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(VI),this.afterRenderEffectManager=pe(ed),this.zonelessEnabled=pe(hu),this.externalTestViews=new Set,this.beforeRender=new zn.B7,this.afterTick=new zn.B7,this.componentTypes=[],this.components=[],this.isStable=pe(Vs).hasPendingTasks.pipe((0,_t.T)(n=>!n)),this._injector=pe(a)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof Gy;if(!this._injector.get(N_).done)throw!o&&ji(n),new Se(405,!1);let s;s=o?n:this._injector.get(pu).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const c=function oO(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Ws),v=s.create(ir.NULL,[],r||s.selector,c),C=v.location.nativeElement,M=v.injector.get(T_,null);return M?.registerApplication(C),v.onDestroy(()=>{this.detachView(v.hostView),Sd(this.components,v),M?.unregisterApplication(C)}),this._loadComponent(v),v}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new Se(101,!1);const r=Y(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,Y(r),this.afterTick.next()}}detectChangesInAttachedViews(n){let r=null;this._injector.destroyed||(r=this._injector.get(Zh,null,{optional:!0}));let o=0;const i=this.afterRenderEffectManager;for(;o<10;){const s=0===o;if(n||!s){this.beforeRender.next(s);for(let{_lView:c,notifyErrorHandler:d}of this._views)aO(c,d,s,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(o++,i.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Pc(c))&&(i.execute(),!this.allViews.some(({_lView:c})=>Pc(c))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Sd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Md,[]);[...this._bootstrapListeners,...r].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Sd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Se(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Sd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function aO(e,t,n,r){(n||Pc(e))&&ql(e,t,n&&!r?0:1)}class cO{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let uO=(()=>{class e{compileModuleSync(n){return new fp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=_o(nr(n).declarations).reduce((s,c)=>{const d=it(c);return d&&s.push(new vu(d)),s},[]);return new cO(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fO=(()=>{class e{constructor(){this.zone=pe(_n),this.changeDetectionScheduler=pe($a),this.applicationRef=pe(ei)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ag({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new _n({...cg(),scheduleInRootZone:n}),[{provide:_n,useFactory:e},{provide:vo,multi:!0,useFactory:()=>{const r=pe(fO,{optional:!0});return()=>r.initialize()}},{provide:vo,multi:!0,useFactory:()=>{const r=pe(pO);return()=>{r.initialize()}}},!0===t?{provide:$y,useValue:!0}:[],{provide:Kh,useValue:n??Nm}]}function cg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let pO=(()=>{class e{constructor(){this.subscription=new fr.y,this.initialized=!1,this.zone=pe(_n),this.pendingTasks=pe(Vs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_n.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Pu=(()=>{class e{constructor(){this.appRef=pe(ei),this.taskService=pe(Vs),this.ngZone=pe(_n),this.zonelessEnabled=pe(hu),this.disableScheduling=pe($y,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new fr.y,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_l):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(pe(Kh,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $f||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?Om:Rm;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick(this.shouldRefreshViews))):this.ngZone.runOutsideAngular(()=>r(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_l+this.angularZoneId))}tick(n){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(n)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(r),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Om(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const lg=new Le("",{providedIn:"root",factory:()=>pe(lg,ct.Optional|ct.SkipSelf)||function gO(){return typeof $localize<"u"&&$localize.locale||yd}()}),mO=new Le("",{providedIn:"root",factory:()=>"USD"}),dg=new Le("");function Nd(e){return!!e.platformInjector}let Es=null;function bO(){}let G_=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TO}return e})();function TO(e){return function MO(e,t,n){if(Os(e)&&!n){const r=Co(e.index,t);return new ou(r,r)}return 175&e.type?new ou(t[yn],t):null}(Wt(),oe(),!(16&~e))}class X_{constructor(){}supports(t){return sd(t)}create(t){return new OO(t)}}const RO=(e,t)=>t;class OO{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||RO}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<Z_(r,o,i)?n:r,c=Z_(s,o,i),d=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const v=c-o,C=d-o;if(v!=C){for(let F=0;F<v;F++){const V=F<i.length?i[F]:i[F]=0,$=V+F;C<=$&&$<v&&(i[F]=V+1)}i[s.previousIndex]=C-v}}c!==d&&t(s,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!sd(t))throw new Se(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)i=t[c],s=this._trackByFn(c,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,c)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,c),r=!0),n=n._next}else o=0,function e0(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,c=>{s=this._trackByFn(o,c),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,c,s,o)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new xO(n,r),i,o),t}_verifyReinsertion(t,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,i=t._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new K_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new K_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xO{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class PO{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class K_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new PO,this.map.set(n,r)),r.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Z_(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}class Q_{constructor(){}supports(t){return t instanceof Map||pp(t)}create(){return new FO}}class FO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||pp(t)))throw new Se(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(o,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,n);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new kO(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class kO{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Y_(){return new vg([new X_])}let vg=(()=>{class e{static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:Y_});constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Y_()),deps:[[e,new Lo,new Vr]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new Se(901,!1)}}return e})();function J_(){return new yg([new Q_])}let yg=(()=>{class e{static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:J_});constructor(n){this.factories=n}static create(n,r){if(r){const o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||J_()),deps:[[e,new Lo,new Vr]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(r)return r;throw new Se(901,!1)}}return e})();function ZO(e){try{const{rootComponent:t,appProviders:n,platformProviders:r}=e,o=function IO(e=[]){if(Es)return Es;const t=function B_(e=[],t){return ir.create({name:t,providers:[{provide:el,useValue:"platform"},{provide:dg,useValue:new Set([()=>Es=null])},...e]})}(e);return Es=t,function R_(){!function Dn(e){pn=e}(()=>{throw new Se(600,!1)})}(),function H_(e){e.get(rv,null)?.forEach(n=>n())}(t),t}(r),i=[ag({}),{provide:$a,useExisting:Pu},...n||[]];return function V_(e){const t=Nd(e)?e.r3Injector:e.moduleRef.injector,n=t.get(_n);return n.run(()=>{Nd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const r=t.get(zi,null);let o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:i=>{r.handleError(i)}})}),Nd(e)){const i=()=>t.destroy(),s=e.platformInjector.get(dg);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else e.moduleRef.onDestroy(()=>{Sd(e.allPlatformModules,e.moduleRef),o.unsubscribe()});return function sO(e,t,n){try{const r=n();return sg(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(r,n,()=>{const i=t.get(N_);return i.runInitializers(),i.donePromise.then(()=>{if(function FA(e){"string"==typeof e&&(jD=e.toLowerCase().replace(/_/g,"-"))}(t.get(lg,yd)||yd),Nd(e)){const c=t.get(ei);return void 0!==e.rootComponent&&c.bootstrap(e.rootComponent),c}return function CO(e,t){const n=e.injector.get(ei);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Se(-403,!1);e.instance.ngDoBootstrap(n)}t.push(e)}(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}({r3Injector:new OE({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:t})}catch(t){return Promise.reject(t)}}const gw=new Le("");function vx(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Ex(e,t){zr("NgSignals");const n=function Ze(e){const t=Object.create(nn);t.computation=e;const n=()=>{if(J(t),H(t),t.value===ur)throw t.error;return t.value};return n[ee]=t,n}(e);return t?.equal&&(n[ee].equal=t.equal),n}function Dx(e){const t=Y(null);try{return e()}finally{Y(t)}}},8326:(tt,Ie,B)=>{"use strict";B.d(Ie,{me:()=>He,JD:()=>Yi,j4:()=>Ao,BC:()=>Vt,cb:()=>Kr,X1:()=>ts,ze:()=>bt});var h=B(3953),U=B(177),se=B(4787),De=B(5817),ee=B(7354),Y=B(5006),Ne=B(1456);function de(E,D){return new De.c(g=>{const I=E.length;if(0===I)return void g.complete();const N=new Array(I);let Oe=0,ze=0;for(let mr=0;mr<I;mr++){const xo=(0,se.H)(E[mr]);let ro=!1;g.add(xo.subscribe({next:gt=>{ro||(ro=!0,ze++),N[mr]=gt},error:gt=>g.error(gt),complete:()=>{Oe++,(Oe===I||!ro)&&(ze===I&&g.next(D?D.reduce((gt,zo,kr)=>(gt[zo]=N[kr],gt),{}):N),g.complete())}}))}})}var z=B(5254);let H=(()=>{class E{constructor(g,I){this._renderer=g,this._elementRef=I,this.onChange=N=>{},this.onTouched=()=>{}}setProperty(g,I){this._renderer.setProperty(this._elementRef.nativeElement,g,I)}registerOnTouched(g){this.onTouched=g}registerOnChange(g){this.onChange=g}setDisabledState(g){this.setProperty("disabled",g)}static#e=this.\u0275fac=function(I){return new(I||E)(h.rXU(h.sFG),h.rXU(h.aKT))};static#t=this.\u0275dir=h.FsC({type:E})}return E})(),ne=(()=>{class E extends H{static#e=this.\u0275fac=(()=>{let g;return function(N){return(g||(g=h.xGo(E)))(N||E)}})();static#t=this.\u0275dir=h.FsC({type:E,features:[h.Vt3]})}return E})();const J=new h.nKC(""),ue={provide:J,useExisting:(0,h.Rfq)(()=>He),multi:!0},mt=new h.nKC("");let He=(()=>{class E extends H{constructor(g,I,N){super(g,I),this._compositionMode=N,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function be(){const E=(0,U.QT)()?(0,U.QT)().getUserAgent():"";return/android (\d+)/.test(E.toLowerCase())}())}writeValue(g){this.setProperty("value",g??"")}_handleInput(g){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(g)}_compositionStart(){this._composing=!0}_compositionEnd(g){this._composing=!1,this._compositionMode&&this.onChange(g)}static#e=this.\u0275fac=function(I){return new(I||E)(h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(mt,8))};static#t=this.\u0275dir=h.FsC({type:E,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(I,N){1&I&&h.bIt("input",function(ze){return N._handleInput(ze.target.value)})("blur",function(){return N.onTouched()})("compositionstart",function(){return N._compositionStart()})("compositionend",function(ze){return N._compositionEnd(ze.target.value)})},features:[h.Jv_([ue]),h.Vt3]})}return E})();const lt=new h.nKC(""),st=new h.nKC("");function Dn(E){return null!=E}function Tn(E){return(0,h.jNT)(E)?(0,se.H)(E):E}function Xr(E){let D={};return E.forEach(g=>{D=null!=g?{...D,...g}:D}),0===Object.keys(D).length?null:D}function lr(E,D){return D.map(g=>g(E))}function Zn(E){return E.map(D=>function dr(E){return!E.validate}(D)?D:g=>D.validate(g))}function Rr(E){return null!=E?function qt(E){if(!E)return null;const D=E.filter(Dn);return 0==D.length?null:function(g){return Xr(lr(g,D))}}(Zn(E)):null}function Ue(E){return null!=E?function vr(E){if(!E)return null;const D=E.filter(Dn);return 0==D.length?null:function(g){return function ye(...E){if(1===E.length){const D=E[0];if((0,ee.c)(D))return de(D,null);if((0,Ne.G)(D)&&Object.getPrototypeOf(D)===Object.prototype){const g=Object.keys(D);return de(g.map(I=>D[I]),g)}}if("function"==typeof E[E.length-1]){const D=E.pop();return de(E=1===E.length&&(0,ee.c)(E[0])?E[0]:E,null).pipe((0,Y.T)(g=>D(...g)))}return de(E,null)}(lr(g,D).map(Tn)).pipe((0,Y.T)(Xr))}}(Zn(E)):null}function Xt(E,D){return null===E?[D]:Array.isArray(E)?[...E,D]:[E,D]}function Nt(E){return E._rawValidators}function Bt(E){return E._rawAsyncValidators}function Mn(E){return E?Array.isArray(E)?E:[E]:[]}function Fn(E,D){return Array.isArray(E)?E.includes(D):E===D}function zn(E,D){const g=Mn(D);return Mn(E).forEach(N=>{Fn(g,N)||g.push(N)}),g}function fr(E,D){return Mn(D).filter(g=>!Fn(E,g))}class _t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(D){this._rawValidators=D||[],this._composedValidatorFn=Rr(this._rawValidators)}_setAsyncValidators(D){this._rawAsyncValidators=D||[],this._composedAsyncValidatorFn=Ue(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(D){this._onDestroyCallbacks.push(D)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(D=>D()),this._onDestroyCallbacks=[]}reset(D=void 0){this.control&&this.control.reset(D)}hasError(D,g){return!!this.control&&this.control.hasError(D,g)}getError(D,g){return this.control?this.control.getError(D,g):null}}class rt extends _t{get formDirective(){return null}get path(){return null}}class Pt extends _t{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hr{constructor(D){this._cd=D}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Vt=(()=>{class E extends hr{constructor(g){super(g)}static#e=this.\u0275fac=function(I){return new(I||E)(h.rXU(Pt,2))};static#t=this.\u0275dir=h.FsC({type:E,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(I,N){2&I&&h.AVh("ng-untouched",N.isUntouched)("ng-touched",N.isTouched)("ng-pristine",N.isPristine)("ng-dirty",N.isDirty)("ng-valid",N.isValid)("ng-invalid",N.isInvalid)("ng-pending",N.isPending)},features:[h.Vt3]})}return E})(),Kr=(()=>{class E extends hr{constructor(g){super(g)}static#e=this.\u0275fac=function(I){return new(I||E)(h.rXU(rt,10))};static#t=this.\u0275dir=h.FsC({type:E,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(I,N){2&I&&h.AVh("ng-untouched",N.isUntouched)("ng-touched",N.isTouched)("ng-pristine",N.isPristine)("ng-dirty",N.isDirty)("ng-valid",N.isValid)("ng-invalid",N.isInvalid)("ng-pending",N.isPending)("ng-submitted",N.isSubmitted)},features:[h.Vt3]})}return E})();const An="VALID",Nn="INVALID",X="PENDING",Z="DISABLED";class R{}class j extends R{constructor(D,g){super(),this.value=D,this.source=g}}class q extends R{constructor(D,g){super(),this.pristine=D,this.source=g}}class we extends R{constructor(D,g){super(),this.touched=D,this.source=g}}class Fe extends R{constructor(D,g){super(),this.status=D,this.source=g}}class $e extends R{constructor(D){super(),this.source=D}}class It extends R{constructor(D){super(),this.source=D}}function Kt(E){return(Zr(E)?E.validators:E)||null}function tn(E,D){return(Zr(D)?D.asyncValidators:E)||null}function Zr(E){return null!=E&&!Array.isArray(E)&&"object"==typeof E}function kn(E,D,g){const I=E.controls;if(!(D?Object.keys(I):I).length)throw new h.wOt(1e3,"");if(!I[g])throw new h.wOt(1001,"")}function To(E,D,g){E._forEachChild((I,N)=>{if(void 0===g[N])throw new h.wOt(1002,"")})}class Qr{constructor(D,g){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,h.EWP)(()=>this.statusReactive()),this.statusReactive=(0,h.vPA)(void 0),this._pristine=(0,h.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,h.vPA)(!0),this._touched=(0,h.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,h.vPA)(!1),this._events=new z.B7,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(D),this._assignAsyncValidators(g)}get validator(){return this._composedValidatorFn}set validator(D){this._rawValidators=this._composedValidatorFn=D}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(D){this._rawAsyncValidators=this._composedAsyncValidatorFn=D}get parent(){return this._parent}get status(){return(0,h.O8t)(this.statusReactive)}set status(D){(0,h.O8t)(()=>this.statusReactive.set(D))}get valid(){return this.status===An}get invalid(){return this.status===Nn}get pending(){return this.status==X}get disabled(){return this.status===Z}get enabled(){return this.status!==Z}get pristine(){return(0,h.O8t)(this.pristineReactive)}set pristine(D){(0,h.O8t)(()=>this.pristineReactive.set(D))}get dirty(){return!this.pristine}get touched(){return(0,h.O8t)(this.touchedReactive)}set touched(D){(0,h.O8t)(()=>this.touchedReactive.set(D))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(D){this._assignValidators(D)}setAsyncValidators(D){this._assignAsyncValidators(D)}addValidators(D){this.setValidators(zn(D,this._rawValidators))}addAsyncValidators(D){this.setAsyncValidators(zn(D,this._rawAsyncValidators))}removeValidators(D){this.setValidators(fr(D,this._rawValidators))}removeAsyncValidators(D){this.setAsyncValidators(fr(D,this._rawAsyncValidators))}hasValidator(D){return Fn(this._rawValidators,D)}hasAsyncValidator(D){return Fn(this._rawAsyncValidators,D)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(D={}){const g=!1===this.touched;this.touched=!0;const I=D.sourceControl??this;this._parent&&!D.onlySelf&&this._parent.markAsTouched({...D,sourceControl:I}),g&&!1!==D.emitEvent&&this._events.next(new we(!0,I))}markAllAsTouched(D={}){this.markAsTouched({onlySelf:!0,emitEvent:D.emitEvent,sourceControl:this}),this._forEachChild(g=>g.markAllAsTouched(D))}markAsUntouched(D={}){const g=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const I=D.sourceControl??this;this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0,emitEvent:D.emitEvent,sourceControl:I})}),this._parent&&!D.onlySelf&&this._parent._updateTouched(D,I),g&&!1!==D.emitEvent&&this._events.next(new we(!1,I))}markAsDirty(D={}){const g=!0===this.pristine;this.pristine=!1;const I=D.sourceControl??this;this._parent&&!D.onlySelf&&this._parent.markAsDirty({...D,sourceControl:I}),g&&!1!==D.emitEvent&&this._events.next(new q(!1,I))}markAsPristine(D={}){const g=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const I=D.sourceControl??this;this._forEachChild(N=>{N.markAsPristine({onlySelf:!0,emitEvent:D.emitEvent})}),this._parent&&!D.onlySelf&&this._parent._updatePristine(D,I),g&&!1!==D.emitEvent&&this._events.next(new q(!0,I))}markAsPending(D={}){this.status=X;const g=D.sourceControl??this;!1!==D.emitEvent&&(this._events.next(new Fe(this.status,g)),this.statusChanges.emit(this.status)),this._parent&&!D.onlySelf&&this._parent.markAsPending({...D,sourceControl:g})}disable(D={}){const g=this._parentMarkedDirty(D.onlySelf);this.status=Z,this.errors=null,this._forEachChild(N=>{N.disable({...D,onlySelf:!0})}),this._updateValue();const I=D.sourceControl??this;!1!==D.emitEvent&&(this._events.next(new j(this.value,I)),this._events.next(new Fe(this.status,I)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...D,skipPristineCheck:g},this),this._onDisabledChange.forEach(N=>N(!0))}enable(D={}){const g=this._parentMarkedDirty(D.onlySelf);this.status=An,this._forEachChild(I=>{I.enable({...D,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent}),this._updateAncestors({...D,skipPristineCheck:g},this),this._onDisabledChange.forEach(I=>I(!1))}_updateAncestors(D,g){this._parent&&!D.onlySelf&&(this._parent.updateValueAndValidity(D),D.skipPristineCheck||this._parent._updatePristine({},g),this._parent._updateTouched({},g))}setParent(D){this._parent=D}getRawValue(){return this.value}updateValueAndValidity(D={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const I=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===An||this.status===X)&&this._runAsyncValidator(I,D.emitEvent)}const g=D.sourceControl??this;!1!==D.emitEvent&&(this._events.next(new j(this.value,g)),this._events.next(new Fe(this.status,g)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!D.onlySelf&&this._parent.updateValueAndValidity({...D,sourceControl:g})}_updateTreeValidity(D={emitEvent:!0}){this._forEachChild(g=>g._updateTreeValidity(D)),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Z:An}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(D,g){if(this.asyncValidator){this.status=X,this._hasOwnPendingAsyncValidator={emitEvent:!1!==g};const I=Tn(this.asyncValidator(this));this._asyncValidationSubscription=I.subscribe(N=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(N,{emitEvent:g,shouldHaveEmitted:D})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const D=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,D}return!1}setErrors(D,g={}){this.errors=D,this._updateControlsErrors(!1!==g.emitEvent,this,g.shouldHaveEmitted)}get(D){let g=D;return null==g||(Array.isArray(g)||(g=g.split(".")),0===g.length)?null:g.reduce((I,N)=>I&&I._find(N),this)}getError(D,g){const I=g?this.get(g):this;return I&&I.errors?I.errors[D]:null}hasError(D,g){return!!this.getError(D,g)}get root(){let D=this;for(;D._parent;)D=D._parent;return D}_updateControlsErrors(D,g,I){this.status=this._calculateStatus(),D&&this.statusChanges.emit(this.status),(D||I)&&this._events.next(new Fe(this.status,g)),this._parent&&this._parent._updateControlsErrors(D,g,I)}_initObservables(){this.valueChanges=new h.bkB,this.statusChanges=new h.bkB}_calculateStatus(){return this._allControlsDisabled()?Z:this.errors?Nn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(X)?X:this._anyControlsHaveStatus(Nn)?Nn:An}_anyControlsHaveStatus(D){return this._anyControls(g=>g.status===D)}_anyControlsDirty(){return this._anyControls(D=>D.dirty)}_anyControlsTouched(){return this._anyControls(D=>D.touched)}_updatePristine(D,g){const I=!this._anyControlsDirty(),N=this.pristine!==I;this.pristine=I,this._parent&&!D.onlySelf&&this._parent._updatePristine(D,g),N&&this._events.next(new q(this.pristine,g))}_updateTouched(D={},g){this.touched=this._anyControlsTouched(),this._events.next(new we(this.touched,g)),this._parent&&!D.onlySelf&&this._parent._updateTouched(D,g)}_registerOnCollectionChange(D){this._onCollectionChange=D}_setUpdateStrategy(D){Zr(D)&&null!=D.updateOn&&(this._updateOn=D.updateOn)}_parentMarkedDirty(D){return!D&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(D){return null}_assignValidators(D){this._rawValidators=Array.isArray(D)?D.slice():D,this._composedValidatorFn=function Ut(E){return Array.isArray(E)?Rr(E):E||null}(this._rawValidators)}_assignAsyncValidators(D){this._rawAsyncValidators=Array.isArray(D)?D.slice():D,this._composedAsyncValidatorFn=function bo(E){return Array.isArray(E)?Ue(E):E||null}(this._rawAsyncValidators)}}class Qn extends Qr{constructor(D,g,I){super(Kt(g),tn(I,g)),this.controls=D,this._initObservables(),this._setUpdateStrategy(g),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(D,g){return this.controls[D]?this.controls[D]:(this.controls[D]=g,g.setParent(this),g._registerOnCollectionChange(this._onCollectionChange),g)}addControl(D,g,I={}){this.registerControl(D,g),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}removeControl(D,g={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}setControl(D,g,I={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],g&&this.registerControl(D,g),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}contains(D){return this.controls.hasOwnProperty(D)&&this.controls[D].enabled}setValue(D,g={}){To(this,0,D),Object.keys(D).forEach(I=>{kn(this,!0,I),this.controls[I].setValue(D[I],{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g)}patchValue(D,g={}){null!=D&&(Object.keys(D).forEach(I=>{const N=this.controls[I];N&&N.patchValue(D[I],{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g))}reset(D={},g={}){this._forEachChild((I,N)=>{I.reset(D?D[N]:null,{onlySelf:!0,emitEvent:g.emitEvent})}),this._updatePristine(g,this),this._updateTouched(g,this),this.updateValueAndValidity(g)}getRawValue(){return this._reduceChildren({},(D,g,I)=>(D[I]=g.getRawValue(),D))}_syncPendingControls(){let D=this._reduceChildren(!1,(g,I)=>!!I._syncPendingControls()||g);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){Object.keys(this.controls).forEach(g=>{const I=this.controls[g];I&&D(I,g)})}_setUpControls(){this._forEachChild(D=>{D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(D){for(const[g,I]of Object.entries(this.controls))if(this.contains(g)&&D(I))return!0;return!1}_reduceValue(){return this._reduceChildren({},(g,I,N)=>((I.enabled||this.disabled)&&(g[N]=I.value),g))}_reduceChildren(D,g){let I=D;return this._forEachChild((N,Oe)=>{I=g(I,N,Oe)}),I}_allControlsDisabled(){for(const D of Object.keys(this.controls))if(this.controls[D].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(D){return this.controls.hasOwnProperty(D)?this.controls[D]:null}}class Cn extends Qn{}const gn=new h.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>rn}),rn="always";function Ln(E,D,g=rn){xn(E,D),D.valueAccessor.writeValue(E.value),(E.disabled||"always"===g)&&D.valueAccessor.setDisabledState?.(E.disabled),function sn(E,D){D.valueAccessor.registerOnChange(g=>{E._pendingValue=g,E._pendingChange=!0,E._pendingDirty=!0,"change"===E.updateOn&&Zt(E,D)})}(E,D),function Vn(E,D){const g=(I,N)=>{D.valueAccessor.writeValue(I),N&&D.viewToModelUpdate(I)};E.registerOnChange(g),D._registerOnDestroy(()=>{E._unregisterOnChange(g)})}(E,D),function Yn(E,D){D.valueAccessor.registerOnTouched(()=>{E._pendingTouched=!0,"blur"===E.updateOn&&E._pendingChange&&Zt(E,D),"submit"!==E.updateOn&&E.markAsTouched()})}(E,D),function On(E,D){if(D.valueAccessor.setDisabledState){const g=I=>{D.valueAccessor.setDisabledState(I)};E.registerOnDisabledChange(g),D._registerOnDestroy(()=>{E._unregisterOnDisabledChange(g)})}}(E,D)}function Pr(E,D,g=!0){const I=()=>{};D.valueAccessor&&(D.valueAccessor.registerOnChange(I),D.valueAccessor.registerOnTouched(I)),on(E,D),E&&(D._invokeOnDestroyCallbacks(),E._registerOnCollectionChange(()=>{}))}function Rn(E,D){E.forEach(g=>{g.registerOnValidatorChange&&g.registerOnValidatorChange(D)})}function xn(E,D){const g=Nt(E);null!==D.validator?E.setValidators(Xt(g,D.validator)):"function"==typeof g&&E.setValidators([g]);const I=Bt(E);null!==D.asyncValidator?E.setAsyncValidators(Xt(I,D.asyncValidator)):"function"==typeof I&&E.setAsyncValidators([I]);const N=()=>E.updateValueAndValidity();Rn(D._rawValidators,N),Rn(D._rawAsyncValidators,N)}function on(E,D){let g=!1;if(null!==E){if(null!==D.validator){const N=Nt(E);if(Array.isArray(N)&&N.length>0){const Oe=N.filter(ze=>ze!==D.validator);Oe.length!==N.length&&(g=!0,E.setValidators(Oe))}}if(null!==D.asyncValidator){const N=Bt(E);if(Array.isArray(N)&&N.length>0){const Oe=N.filter(ze=>ze!==D.asyncValidator);Oe.length!==N.length&&(g=!0,E.setAsyncValidators(Oe))}}}const I=()=>{};return Rn(D._rawValidators,I),Rn(D._rawAsyncValidators,I),g}function Zt(E,D){E._pendingDirty&&E.markAsDirty(),E.setValue(E._pendingValue,{emitModelToViewChange:!1}),D.viewToModelUpdate(E._pendingValue),E._pendingChange=!1}function Ct(E,D){const g=E.indexOf(D);g>-1&&E.splice(g,1)}function b(E){return"object"==typeof E&&null!==E&&2===Object.keys(E).length&&"value"in E&&"disabled"in E}Promise.resolve();const S=class extends Qr{constructor(D=null,g,I){super(Kt(g),tn(I,g)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(D),this._setUpdateStrategy(g),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zr(g)&&(g.nonNullable||g.initialValueIsDefault)&&(this.defaultValue=b(D)?D.value:D)}setValue(D,g={}){this.value=this._pendingValue=D,this._onChange.length&&!1!==g.emitModelToViewChange&&this._onChange.forEach(I=>I(this.value,!1!==g.emitViewToModelChange)),this.updateValueAndValidity(g)}patchValue(D,g={}){this.setValue(D,g)}reset(D=this.defaultValue,g={}){this._applyFormState(D),this.markAsPristine(g),this.markAsUntouched(g),this.setValue(this.value,g),this._pendingChange=!1}_updateValue(){}_anyControls(D){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(D){this._onChange.push(D)}_unregisterOnChange(D){Ct(this._onChange,D)}registerOnDisabledChange(D){this._onDisabledChange.push(D)}_unregisterOnDisabledChange(D){Ct(this._onDisabledChange,D)}_forEachChild(D){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(D){b(D)?(this.value=this._pendingValue=D.value,D.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=D}};Promise.resolve();const ri=new h.nKC(""),_r={provide:rt,useExisting:(0,h.Rfq)(()=>Ao)};let Ao=(()=>{class E extends rt{get submitted(){return(0,h.O8t)(this._submittedReactive)}set submitted(g){this._submittedReactive.set(g)}constructor(g,I,N){super(),this.callSetDisabledState=N,this._submitted=(0,h.EWP)(()=>this._submittedReactive()),this._submittedReactive=(0,h.vPA)(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.bkB,this._setValidators(g),this._setAsyncValidators(I)}ngOnChanges(g){this._checkFormPresent(),g.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(on(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(g){const I=this.form.get(g.path);return Ln(I,g,this.callSetDisabledState),I.updateValueAndValidity({emitEvent:!1}),this.directives.push(g),I}getControl(g){return this.form.get(g.path)}removeControl(g){Pr(g.control||null,g,!1),function Ht(E,D){const g=E.indexOf(D);g>-1&&E.splice(g,1)}(this.directives,g)}addFormGroup(g){this._setUpFormContainer(g)}removeFormGroup(g){this._cleanUpFormContainer(g)}getFormGroup(g){return this.form.get(g.path)}addFormArray(g){this._setUpFormContainer(g)}removeFormArray(g){this._cleanUpFormContainer(g)}getFormArray(g){return this.form.get(g.path)}updateModel(g,I){this.form.get(g.path).setValue(I)}onSubmit(g){return this._submittedReactive.set(!0),function ht(E,D){E._syncPendingControls(),D.forEach(g=>{const I=g.control;"submit"===I.updateOn&&I._pendingChange&&(g.viewToModelUpdate(I._pendingValue),I._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(g),this.form._events.next(new $e(this.control)),"dialog"===g?.target?.method}onReset(){this.resetForm()}resetForm(g=void 0){this.form.reset(g),this._submittedReactive.set(!1),this.form._events.next(new It(this.form))}_updateDomValue(){this.directives.forEach(g=>{const I=g.control,N=this.form.get(g.path);I!==N&&(Pr(I||null,g),(E=>E instanceof S)(N)&&(Ln(N,g,this.callSetDisabledState),g.control=N))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(g){const I=this.form.get(g.path);(function A(E,D){xn(E,D)})(I,g),I.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(g){if(this.form){const I=this.form.get(g.path);I&&function L(E,D){return on(E,D)}(I,g)&&I.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){xn(this.form,this),this._oldForm&&on(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(I){return new(I||E)(h.rXU(lt,10),h.rXU(st,10),h.rXU(gn,8))};static#t=this.\u0275dir=h.FsC({type:E,selectors:[["","formGroup",""]],hostBindings:function(I,N){1&I&&h.bIt("submit",function(ze){return N.onSubmit(ze)})("reset",function(){return N.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h.Jv_([_r]),h.Vt3,h.OA$]})}return E})();const Qi={provide:Pt,useExisting:(0,h.Rfq)(()=>Yi)};let Yi=(()=>{class E extends Pt{set isDisabled(g){}static#e=this._ngModelWarningSentOnce=!1;constructor(g,I,N,Oe,ze){super(),this._ngModelWarningConfig=ze,this._added=!1,this.name=null,this.update=new h.bkB,this._ngModelWarningSent=!1,this._parent=g,this._setValidators(I),this._setAsyncValidators(N),this.valueAccessor=function yt(E,D){if(!D)return null;let g,I,N;return Array.isArray(D),D.forEach(Oe=>{Oe.constructor===He?g=Oe:function Re(E){return Object.getPrototypeOf(E.constructor)===ne}(Oe)?I=Oe:N=Oe}),N||I||g||null}(0,Oe)}ngOnChanges(g){this._added||this._setUpControl(),function xe(E,D){if(!E.hasOwnProperty("model"))return!1;const g=E.model;return!!g.isFirstChange()||!Object.is(D,g.currentValue)}(g,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(g){this.viewModel=g,this.update.emit(g)}get path(){return function Je(E,D){return[...D.path,E]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(I){return new(I||E)(h.rXU(rt,13),h.rXU(lt,10),h.rXU(st,10),h.rXU(J,10),h.rXU(ri,8))};static#n=this.\u0275dir=h.FsC({type:E,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[h.Jv_([Qi]),h.Vt3,h.OA$]})}return E})(),ii=(()=>{class E{static#e=this.\u0275fac=function(I){return new(I||E)};static#t=this.\u0275mod=h.$C({type:E});static#n=this.\u0275inj=h.G2t({})}return E})();class Un extends Qr{constructor(D,g,I){super(Kt(g),tn(I,g)),this.controls=D,this._initObservables(),this._setUpdateStrategy(g),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(D){return this.controls[this._adjustIndex(D)]}push(D,g={}){this.controls.push(D),this._registerControl(D),this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}insert(D,g,I={}){this.controls.splice(D,0,g),this._registerControl(g),this.updateValueAndValidity({emitEvent:I.emitEvent})}removeAt(D,g={}){let I=this._adjustIndex(D);I<0&&(I=0),this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),this.controls.splice(I,1),this.updateValueAndValidity({emitEvent:g.emitEvent})}setControl(D,g,I={}){let N=this._adjustIndex(D);N<0&&(N=0),this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),this.controls.splice(N,1),g&&(this.controls.splice(N,0,g),this._registerControl(g)),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(D,g={}){To(this,0,D),D.forEach((I,N)=>{kn(this,!1,N),this.at(N).setValue(I,{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g)}patchValue(D,g={}){null!=D&&(D.forEach((I,N)=>{this.at(N)&&this.at(N).patchValue(I,{onlySelf:!0,emitEvent:g.emitEvent})}),this.updateValueAndValidity(g))}reset(D=[],g={}){this._forEachChild((I,N)=>{I.reset(D[N],{onlySelf:!0,emitEvent:g.emitEvent})}),this._updatePristine(g,this),this._updateTouched(g,this),this.updateValueAndValidity(g)}getRawValue(){return this.controls.map(D=>D.getRawValue())}clear(D={}){this.controls.length<1||(this._forEachChild(g=>g._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:D.emitEvent}))}_adjustIndex(D){return D<0?D+this.length:D}_syncPendingControls(){let D=this.controls.reduce((g,I)=>!!I._syncPendingControls()||g,!1);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){this.controls.forEach((g,I)=>{D(g,I)})}_updateValue(){this.value=this.controls.filter(D=>D.enabled||this.disabled).map(D=>D.value)}_anyControls(D){return this.controls.some(g=>g.enabled&&D(g))}_setUpControls(){this._forEachChild(D=>this._registerControl(D))}_allControlsDisabled(){for(const D of this.controls)if(D.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(D){D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)}_find(D){return this.at(D)??null}}function xi(E){return!!E&&(void 0!==E.asyncValidators||void 0!==E.validators||void 0!==E.updateOn)}let gr=(()=>{class E{constructor(){this.useNonNullable=!1}get nonNullable(){const g=new E;return g.useNonNullable=!0,g}group(g,I=null){const N=this._reduceControls(g);let Oe={};return xi(I)?Oe=I:null!==I&&(Oe.validators=I.validator,Oe.asyncValidators=I.asyncValidator),new Qn(N,Oe)}record(g,I=null){const N=this._reduceControls(g);return new Cn(N,I)}control(g,I,N){let Oe={};return this.useNonNullable?(xi(I)?Oe=I:(Oe.validators=I,Oe.asyncValidators=N),new S(g,{...Oe,nonNullable:!0})):new S(g,I,N)}array(g,I,N){const Oe=g.map(ze=>this._createControl(ze));return new Un(Oe,I,N)}_reduceControls(g){const I={};return Object.keys(g).forEach(N=>{I[N]=this._createControl(g[N])}),I}_createControl(g){return g instanceof S||g instanceof Qr?g:Array.isArray(g)?this.control(g[0],g.length>1?g[1]:null,g.length>2?g[2]:null):this.control(g)}static#e=this.\u0275fac=function(I){return new(I||E)};static#t=this.\u0275prov=h.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),bt=(()=>{class E extends gr{group(g,I=null){return super.group(g,I)}control(g,I,N){return super.control(g,I,N)}array(g,I,N){return super.array(g,I,N)}static#e=this.\u0275fac=(()=>{let g;return function(N){return(g||(g=h.xGo(E)))(N||E)}})();static#t=this.\u0275prov=h.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),ts=(()=>{class E{static withConfig(g){return{ngModule:E,providers:[{provide:ri,useValue:g.warnOnNgModelWithFormControl??"always"},{provide:gn,useValue:g.callSetDisabledState??rn}]}}static#e=this.\u0275fac=function(I){return new(I||E)};static#t=this.\u0275mod=h.$C({type:E});static#n=this.\u0275inj=h.G2t({imports:[ii]})}return E})()},345:(tt,Ie,B)=>{"use strict";B.d(Ie,{B8:()=>dr,EZ:()=>pr,fM:()=>Wn,hE:()=>Pt,kQ:()=>Rt});var h=B(177),U=B(3953);class se extends h.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends se{static makeCurrent(){(0,h.ZD)(new De)}onAndCancel(Z,R,j){return Z.addEventListener(R,j),()=>{Z.removeEventListener(R,j)}}dispatchEvent(Z,R){Z.dispatchEvent(R)}remove(Z){Z.remove()}createElement(Z,R){return(R=R||this.getDefaultDocument()).createElement(Z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Z){return Z.nodeType===Node.ELEMENT_NODE}isShadowRoot(Z){return Z instanceof DocumentFragment}getGlobalEventTarget(Z,R){return"window"===R?window:"document"===R?Z:"body"===R?Z.body:null}getBaseHref(Z){const R=function Y(){return ee=ee||document.querySelector("base"),ee?ee.getAttribute("href"):null}();return null==R?null:function Ne(X){return new URL(X,document.baseURI).pathname}(R)}resetBaseElement(){ee=null}getUserAgent(){return window.navigator.userAgent}getCookie(Z){return(0,h._b)(document.cookie,Z)}}let ee=null,de=(()=>{class X{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(j){return new(j||X)};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();const z=new U.nKC("");let H=(()=>{class X{constructor(R,j){this._zone=j,this._eventNameToPlugin=new Map,R.forEach(q=>{q.manager=this}),this._plugins=R.slice().reverse()}addEventListener(R,j,q){return this._findPluginFor(j).addEventListener(R,j,q)}getZone(){return this._zone}_findPluginFor(R){let j=this._eventNameToPlugin.get(R);if(j)return j;if(j=this._plugins.find(we=>we.supports(R)),!j)throw new U.wOt(5101,!1);return this._eventNameToPlugin.set(R,j),j}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(z),U.KVO(U.SKi))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();class ne{constructor(Z){this._doc=Z}}const J="ng-app-id";let re=(()=>{class X{constructor(R,j,q,we={}){this.doc=R,this.appId=j,this.nonce=q,this.platformId=we,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,h.Vy)(we),this.resetHostNodes()}addStyles(R){for(const j of R)1===this.changeUsageCount(j,1)&&this.onStyleAdded(j)}removeStyles(R){for(const j of R)this.changeUsageCount(j,-1)<=0&&this.onStyleRemoved(j)}ngOnDestroy(){const R=this.styleNodesInDOM;R&&(R.forEach(j=>j.remove()),R.clear());for(const j of this.getAllStyles())this.onStyleRemoved(j);this.resetHostNodes()}addHost(R){this.hostNodes.add(R);for(const j of this.getAllStyles())this.addStyleToHost(R,j)}removeHost(R){this.hostNodes.delete(R)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(R){for(const j of this.hostNodes)this.addStyleToHost(j,R)}onStyleRemoved(R){const j=this.styleRef;j.get(R)?.elements?.forEach(q=>q.remove()),j.delete(R)}collectServerRenderedStyles(){const R=this.doc.head?.querySelectorAll(`style[${J}="${this.appId}"]`);if(R?.length){const j=new Map;return R.forEach(q=>{null!=q.textContent&&j.set(q.textContent,q)}),j}return null}changeUsageCount(R,j){const q=this.styleRef;if(q.has(R)){const we=q.get(R);return we.usage+=j,we.usage}return q.set(R,{usage:j,elements:[]}),j}getStyleElement(R,j){const q=this.styleNodesInDOM,we=q?.get(j);if(we?.parentNode===R)return q.delete(j),we.removeAttribute(J),we;{const Fe=this.doc.createElement("style");return this.nonce&&Fe.setAttribute("nonce",this.nonce),Fe.textContent=j,this.platformIsServer&&Fe.setAttribute(J,this.appId),R.appendChild(Fe),Fe}}addStyleToHost(R,j){const q=this.getStyleElement(R,j),we=this.styleRef,Fe=we.get(j)?.elements;Fe?Fe.push(q):we.set(j,{elements:[q],usage:1})}resetHostNodes(){const R=this.hostNodes;R.clear(),R.add(this.doc.head)}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ),U.KVO(U.sZ2),U.KVO(U.BIS,8),U.KVO(U.Agw))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();const le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ue=/%COMP%/g,vt=new U.nKC("",{providedIn:"root",factory:()=>!0});function wn(X,Z){return Z.map(R=>R.replace(ue,X))}let In=(()=>{class X{constructor(R,j,q,we,Fe,$e,It,Kt=null){this.eventManager=R,this.sharedStylesHost=j,this.appId=q,this.removeStylesOnCompDestroy=we,this.doc=Fe,this.platformId=$e,this.ngZone=It,this.nonce=Kt,this.rendererByCompId=new Map,this.platformIsServer=(0,h.Vy)($e),this.defaultRenderer=new nt(R,Fe,It,this.platformIsServer)}createRenderer(R,j){if(!R||!j)return this.defaultRenderer;this.platformIsServer&&j.encapsulation===U.gXe.ShadowDom&&(j={...j,encapsulation:U.gXe.Emulated});const q=this.getOrCreateRenderer(R,j);return q instanceof bn?q.applyToHost(R):q instanceof nn&&q.applyStyles(),q}getOrCreateRenderer(R,j){const q=this.rendererByCompId;let we=q.get(j.id);if(!we){const Fe=this.doc,$e=this.ngZone,It=this.eventManager,Kt=this.sharedStylesHost,Ut=this.removeStylesOnCompDestroy,tn=this.platformIsServer;switch(j.encapsulation){case U.gXe.Emulated:we=new bn(It,Kt,j,this.appId,Ut,Fe,$e,tn);break;case U.gXe.ShadowDom:return new ur(It,Kt,R,j,Fe,$e,this.nonce,tn);default:we=new nn(It,Kt,j,Ut,Fe,$e,tn)}q.set(j.id,we)}return we}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(H),U.KVO(re),U.KVO(U.sZ2),U.KVO(vt),U.KVO(h.qQ),U.KVO(U.Agw),U.KVO(U.SKi),U.KVO(U.BIS))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();class nt{constructor(Z,R,j,q){this.eventManager=Z,this.doc=R,this.ngZone=j,this.platformIsServer=q,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Z,R){return R?this.doc.createElementNS(le[R]||R,Z):this.doc.createElement(Z)}createComment(Z){return this.doc.createComment(Z)}createText(Z){return this.doc.createTextNode(Z)}appendChild(Z,R){(ut(Z)?Z.content:Z).appendChild(R)}insertBefore(Z,R,j){Z&&(ut(Z)?Z.content:Z).insertBefore(R,j)}removeChild(Z,R){R.remove()}selectRootElement(Z,R){let j="string"==typeof Z?this.doc.querySelector(Z):Z;if(!j)throw new U.wOt(-5104,!1);return R||(j.textContent=""),j}parentNode(Z){return Z.parentNode}nextSibling(Z){return Z.nextSibling}setAttribute(Z,R,j,q){if(q){R=q+":"+R;const we=le[q];we?Z.setAttributeNS(we,R,j):Z.setAttribute(R,j)}else Z.setAttribute(R,j)}removeAttribute(Z,R,j){if(j){const q=le[j];q?Z.removeAttributeNS(q,R):Z.removeAttribute(`${j}:${R}`)}else Z.removeAttribute(R)}addClass(Z,R){Z.classList.add(R)}removeClass(Z,R){Z.classList.remove(R)}setStyle(Z,R,j,q){q&(U.czy.DashCase|U.czy.Important)?Z.style.setProperty(R,j,q&U.czy.Important?"important":""):Z.style[R]=j}removeStyle(Z,R,j){j&U.czy.DashCase?Z.style.removeProperty(R):Z.style[R]=""}setProperty(Z,R,j){null!=Z&&(Z[R]=j)}setValue(Z,R){Z.nodeValue=R}listen(Z,R,j){if("string"==typeof Z&&!(Z=(0,h.QT)().getGlobalEventTarget(this.doc,Z)))throw new Error(`Unsupported event target ${Z} for event ${R}`);return this.eventManager.addEventListener(Z,R,this.decoratePreventDefault(j))}decoratePreventDefault(Z){return R=>{if("__ngUnwrap__"===R)return Z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Z(R)):Z(R))&&R.preventDefault()}}}function ut(X){return"TEMPLATE"===X.tagName&&void 0!==X.content}class ur extends nt{constructor(Z,R,j,q,we,Fe,$e,It){super(Z,we,Fe,It),this.sharedStylesHost=R,this.hostEl=j,this.shadowRoot=j.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Kt=wn(q.id,q.styles);for(const Ut of Kt){const tn=document.createElement("style");$e&&tn.setAttribute("nonce",$e),tn.textContent=Ut,this.shadowRoot.appendChild(tn)}}nodeOrShadowRoot(Z){return Z===this.hostEl?this.shadowRoot:Z}appendChild(Z,R){return super.appendChild(this.nodeOrShadowRoot(Z),R)}insertBefore(Z,R,j){return super.insertBefore(this.nodeOrShadowRoot(Z),R,j)}removeChild(Z,R){return super.removeChild(null,R)}parentNode(Z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class nn extends nt{constructor(Z,R,j,q,we,Fe,$e,It){super(Z,we,Fe,$e),this.sharedStylesHost=R,this.removeStylesOnCompDestroy=q,this.styles=It?wn(It,j.styles):j.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bn extends nn{constructor(Z,R,j,q,we,Fe,$e,It){const Kt=q+"-"+j.id;super(Z,R,j,we,Fe,$e,It,Kt),this.contentAttr=function lt(X){return"_ngcontent-%COMP%".replace(ue,X)}(Kt),this.hostAttr=function st(X){return"_nghost-%COMP%".replace(ue,X)}(Kt)}applyToHost(Z){this.applyStyles(),this.setAttribute(Z,this.hostAttr,"")}createElement(Z,R){const j=super.createElement(Z,R);return super.setAttribute(j,this.contentAttr,""),j}}let pn=(()=>{class X extends ne{constructor(R){super(R)}supports(R){return!0}addEventListener(R,j,q){return R.addEventListener(j,q,!1),()=>this.removeEventListener(R,j,q)}removeEventListener(R,j,q){return R.removeEventListener(j,q)}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})(),En=(()=>{class X extends ne{constructor(R){super(R),this.delegate=(0,U.WQX)(U.zAP,{optional:!0})}supports(R){return!!this.delegate&&this.delegate.supports(R)}addEventListener(R,j,q){return this.delegate.addEventListener(R,j,q)}removeEventListener(R,j,q){return this.delegate.removeEventListener(R,j,q)}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();const Dn=["alt","control","meta","shift"],Tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xr={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let lr=(()=>{class X extends ne{constructor(R){super(R)}supports(R){return null!=X.parseEventName(R)}addEventListener(R,j,q){const we=X.parseEventName(j),Fe=X.eventCallback(we.fullKey,q,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,h.QT)().onAndCancel(R,we.domEventName,Fe))}static parseEventName(R){const j=R.toLowerCase().split("."),q=j.shift();if(0===j.length||"keydown"!==q&&"keyup"!==q)return null;const we=X._normalizeKey(j.pop());let Fe="",$e=j.indexOf("code");if($e>-1&&(j.splice($e,1),Fe="code."),Dn.forEach(Kt=>{const Ut=j.indexOf(Kt);Ut>-1&&(j.splice(Ut,1),Fe+=Kt+".")}),Fe+=we,0!=j.length||0===we.length)return null;const It={};return It.domEventName=q,It.fullKey=Fe,It}static matchEventFullKeyCode(R,j){let q=Tn[R.key]||R.key,we="";return j.indexOf("code.")>-1&&(q=R.code,we="code."),!(null==q||!q)&&(q=q.toLowerCase()," "===q?q="space":"."===q&&(q="dot"),Dn.forEach(Fe=>{Fe!==q&&(0,Xr[Fe])(R)&&(we+=Fe+".")}),we+=q,we===j)}static eventCallback(R,j,q){return we=>{X.matchEventFullKeyCode(we,R)&&q.runGuarded(()=>j(we))}}static _normalizeKey(R){return"esc"===R?"escape":R}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})();function dr(X,Z){return(0,U.TL3)({rootComponent:X,...qt(Z)})}function qt(X){return{appProviders:[...zn,...X?.providers??[]],platformProviders:Nt}}const Nt=[{provide:U.Agw,useValue:h.AJ},{provide:U.PLl,useValue:function vr(){De.makeCurrent()},multi:!0},{provide:h.qQ,useFactory:function Xt(){return(0,U.TL$)(document),document},deps:[]}],zn=[{provide:U.H8p,useValue:"root"},{provide:U.zcH,useFactory:function Ue(){return new U.zcH},deps:[]},{provide:z,useClass:pn,multi:!0,deps:[h.qQ,U.SKi,U.Agw]},{provide:z,useClass:lr,multi:!0,deps:[h.qQ]},{provide:z,useClass:En,multi:!0},In,re,H,{provide:U._9s,useExisting:In},{provide:h.N0,useClass:de,deps:[]},[]];let Pt=(()=>{class X{constructor(R){this._doc=R}getTitle(){return this._doc.title}setTitle(R){this._doc.title=R||""}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}return X})();const uo={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Rt=new U.nKC("HammerGestureConfig"),Sn=new U.nKC("HammerLoader");let pr=(()=>{class X{constructor(){this.events=[],this.overrides={}}buildHammer(R){const j=new Hammer(R,this.options);j.get("pinch").set({enable:!0}),j.get("rotate").set({enable:!0});for(const q in this.overrides)j.get(q).set(this.overrides[q]);return j}static#e=this.\u0275fac=function(j){return new(j||X)};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})(),dn=(()=>{class X extends ne{constructor(R,j,q,we){super(R),this._config=j,this.console=q,this.loader=we,this._loaderPromise=null}supports(R){return!(!uo.hasOwnProperty(R.toLowerCase())&&!this.isCustomEvent(R)||!window.Hammer&&!this.loader)}addEventListener(R,j,q){const we=this.manager.getZone();if(j=j.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||we.runOutsideAngular(()=>this.loader());let Fe=!1,$e=()=>{Fe=!0};return we.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?Fe||($e=this.addEventListener(R,j,q)):$e=()=>{}}).catch(()=>{$e=()=>{}})),()=>{$e()}}return we.runOutsideAngular(()=>{const Fe=this._config.buildHammer(R),$e=function(It){we.runGuarded(function(){q(It)})};return Fe.on(j,$e),()=>{Fe.off(j,$e),"function"==typeof Fe.destroy&&Fe.destroy()}})}isCustomEvent(R){return this._config.events.indexOf(R)>-1}static#e=this.\u0275fac=function(j){return new(j||X)(U.KVO(h.qQ),U.KVO(Rt),U.KVO(U.H3F),U.KVO(Sn,8))};static#t=this.\u0275prov=U.jDH({token:X,factory:X.\u0275fac})}return X})(),Wn=(()=>{class X{static#e=this.\u0275fac=function(j){return new(j||X)};static#t=this.\u0275mod=U.$C({type:X});static#n=this.\u0275inj=U.G2t({providers:[{provide:z,useClass:dn,multi:!0,deps:[h.qQ,Rt,U.H3F,[new U.Xx1,Sn]]},{provide:Rt,useClass:pr,deps:[]}]})}return X})()},2039:(tt,Ie,B)=>{"use strict";B.d(Ie,{nX:()=>Oo,Ix:()=>yo,lh:()=>tf});var h=B(3953),U=B(5817),De=B(4787),ee=B(4421),Y=B(9928);const ye=(()=>{function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a})();var de=B(2234),z=B(7354),H=B(762);class ne extends H.v{notifyNext(l,u,p,y,T){this.destination.next(u)}notifyError(l,u){this.destination.error(l)}notifyComplete(l){this.destination.complete()}}class J extends H.v{constructor(l,u,p){super(),this.parent=l,this.outerValue=u,this.outerIndex=p,this.index=0}_next(l){this.parent.notifyNext(this.outerValue,l,this.outerIndex,this.index++,this)}_error(l){this.parent.notifyError(l,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var re=B(135);function le(a,l,u,p,y=new J(a,u,p)){if(!y.closed)return l instanceof U.c?l.subscribe(y):(0,re.i)(l)(y)}var ue=B(4279);const be={};function mt(...a){let l,u;return(0,de.m)(a[a.length-1])&&(u=a.pop()),"function"==typeof a[a.length-1]&&(l=a.pop()),1===a.length&&(0,z.c)(a[0])&&(a=a[0]),(0,ue.c)(a,u).lift(new He(l))}class He{constructor(l){this.resultSelector=l}call(l,u){return u.subscribe(new Et(l,this.resultSelector))}}class Et extends ne{constructor(l,u){super(l),this.resultSelector=u,this.active=0,this.values=[],this.observables=[]}_next(l){this.values.push(be),this.observables.push(l)}_complete(){const l=this.observables,u=l.length;if(0===u)this.destination.complete();else{this.active=u,this.toRespond=u;for(let p=0;p<u;p++)this.add(le(this,l[p],void 0,p))}}notifyComplete(l){0==(this.active-=1)&&this.destination.complete()}notifyNext(l,u,p){const y=this.values,x=this.toRespond?y[p]===be?--this.toRespond:this.toRespond:0;y[p]=u,0===x&&(this.resultSelector?this._tryResultSelector(y):this.destination.next(y.slice()))}_tryResultSelector(l){let u;try{u=this.resultSelector.apply(this,l)}catch(p){return void this.destination.error(p)}this.destination.next(u)}}var vt=B(8456),lt=B(5241);function In(...a){return function wn(){return function st(a=Number.POSITIVE_INFINITY){return(0,vt.ZZ)(lt.D,a)}(1)}()((0,ee.of)(...a))}const nt=new U.c(a=>a.complete());function Ze(a){return a?function At(a){return new U.c(l=>a.schedule(()=>l.complete()))}(a):nt}function ut(a){return new U.c(l=>{let u;try{u=a()}catch(y){return void l.error(y)}return(u?(0,De.H)(u):Ze()).subscribe(l)})}var ur=B(8167);function nn(a,l){return new U.c(l?u=>l.schedule(bn,0,{error:a,subscriber:u}):u=>u.error(a))}function bn({error:a,subscriber:l}){l.error(a)}var pn=B(5254),En=B(4337);function Dn(){return function(l){return l.lift(new Tn(l))}}class Tn{constructor(l){this.connectable=l}call(l,u){const{connectable:p}=this;p._refCount++;const y=new Xr(l,p),T=u.subscribe(y);return y.closed||(y.connection=p.connect()),T}}class Xr extends H.v{constructor(l,u){super(l),this.connectable=u}_unsubscribe(){const{connectable:l}=this;if(!l)return void(this.connection=null);this.connectable=null;const u=l._refCount;if(u<=0)return void(this.connection=null);if(l._refCount=u-1,u>1)return void(this.connection=null);const{connection:p}=this,y=l._connection;this.connection=null,y&&(!p||y===p)&&y.unsubscribe()}}class lr extends U.c{constructor(l,u){super(),this.source=l,this.subjectFactory=u,this._refCount=0,this._isComplete=!1}_subscribe(l){return this.getSubject().subscribe(l)}getSubject(){const l=this._subject;return(!l||l.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let l=this._connection;return l||(this._isComplete=!1,l=this._connection=new En.y,l.add(this.source.subscribe(new Zn(this.getSubject(),this))),l.closed&&(this._connection=null,l=En.y.EMPTY)),l}refCount(){return Dn()(this)}}class Zn extends pn.PJ{constructor(l,u){super(l),this.connectable=u}_error(l){this._unsubscribe(),super._error(l)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const l=this.connectable;if(l){this.connectable=null;const u=l._connection;l._refCount=0,l._subject=null,l._connection=null,u&&u.unsubscribe()}}}var vr=B(177),Ue=B(5006),Xt=B(9090);const Bt=(()=>{function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a})();function Mn(a){return l=>0===a?Ze():l.lift(new Fn(a))}class Fn{constructor(l){if(this.total=l,this.total<0)throw new Bt}call(l,u){return u.subscribe(new zn(l,this.total))}}class zn extends H.v{constructor(l,u){super(l),this.total=u,this.count=0}_next(l){const u=this.total,p=++this.count;p<=u&&(this.destination.next(l),p===u&&(this.destination.complete(),this.unsubscribe()))}}var _t=B(8728);function rt(a=null){return l=>l.lift(new Pt(a))}class Pt{constructor(l){this.defaultValue=l}call(l,u){return u.subscribe(new hr(l,this.defaultValue))}}class hr extends H.v{constructor(l,u){super(l),this.defaultValue=u,this.isEmpty=!0}_next(l){this.isEmpty=!1,this.destination.next(l)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Or(a=Kr){return l=>l.lift(new br(a))}class br{constructor(l){this.errorFactory=l}call(l,u){return u.subscribe(new Vt(l,this.errorFactory))}}class Vt extends H.v{constructor(l,u){super(l),this.errorFactory=u,this.hasValue=!1}_next(l){this.hasValue=!0,this.destination.next(l)}_complete(){if(this.hasValue)return this.destination.complete();{let l;try{l=this.errorFactory()}catch(u){l=u}this.destination.error(l)}}}function Kr(){return new ye}function en(a,l){const u=arguments.length>=2;return p=>p.pipe(a?(0,_t.p)((y,T)=>a(y,T,p)):lt.D,Mn(1),u?rt(l):Or(()=>new ye))}var Qe=B(3574);function ge(){}var uo=B(8099);function Rt(a,l,u){return function(y){return y.lift(new Sn(a,l,u))}}class Sn{constructor(l,u,p){this.nextOrObserver=l,this.error=u,this.complete=p}call(l,u){return u.subscribe(new pr(l,this.nextOrObserver,this.error,this.complete))}}class pr extends H.v{constructor(l,u,p,y){super(l),this._tapNext=ge,this._tapError=ge,this._tapComplete=ge,this._tapError=p||ge,this._tapComplete=y||ge,(0,uo.T)(u)?(this._context=this,this._tapNext=u):u&&(this._context=u,this._tapNext=u.next||ge,this._tapError=u.error||ge,this._tapComplete=u.complete||ge)}_next(l){try{this._tapNext.call(this._context,l)}catch(u){return void this.destination.error(u)}this.destination.next(l)}_error(l){try{this._tapError.call(this._context,l)}catch(u){return void this.destination.error(u)}this.destination.error(l)}_complete(){try{this._tapComplete.call(this._context)}catch(l){return void this.destination.error(l)}return this.destination.complete()}}var dn=B(3004);function Wn(a){return function(u){const p=new Ft(a),y=u.lift(p);return p.caught=y}}class Ft{constructor(l){this.selector=l}call(l,u){return u.subscribe(new Ti(l,this.selector,this.caught))}}class Ti extends dn.gn{constructor(l,u,p){super(l),this.selector=u,this.caught=p}error(l){if(!this.isStopped){let u;try{u=this.selector(l,this.caught)}catch(T){return void super.error(T)}this._unsubscribeAndRecycle();const p=new dn.zA(this);this.add(p);const y=(0,dn.tS)(u,p);y!==p&&this.add(y)}}}class wt{constructor(l,u,p=!1){this.accumulator=l,this.seed=u,this.hasSeed=p}call(l,u){return u.subscribe(new xr(l,this.accumulator,this.seed,this.hasSeed))}}class xr extends H.v{constructor(l,u,p,y){super(l),this.accumulator=u,this._seed=p,this.hasSeed=y,this.index=0}get seed(){return this._seed}set seed(l){this.hasSeed=!0,this._seed=l}_next(l){if(this.hasSeed)return this._tryNext(l);this.seed=l,this.destination.next(l)}_tryNext(l){const u=this.index++;let p;try{p=this.accumulator(this.seed,l,u)}catch(y){this.destination.error(y)}this.seed=p,this.destination.next(p)}}function yr(a){return function(u){return 0===a?Ze():u.lift(new Er(a))}}class Er{constructor(l){if(this.total=l,this.total<0)throw new Bt}call(l,u){return u.subscribe(new Bo(l,this.total))}}class Bo extends H.v{constructor(l,u){super(l),this.total=u,this.ring=new Array,this.count=0}_next(l){const u=this.ring,p=this.total,y=this.count++;u.length<p?u.push(l):u[y%p]=l}_complete(){const l=this.destination;let u=this.count;if(u>0){const p=this.count>=this.total?this.total:this.count,y=this.ring;for(let T=0;T<p;T++){const x=u++%p;l.next(y[x])}}l.complete()}}class Nn{constructor(l){this.value=l}call(l,u){return u.subscribe(new X(l,this.value))}}class X extends H.v{constructor(l,u){super(l),this.value=u}_next(l){this.destination.next(this.value)}}var Z=B(7312),R=B(7605),j=B(345);const q="primary",we=Symbol("RouteTitle");class Fe{constructor(l){this.params=l||{}}has(l){return Object.prototype.hasOwnProperty.call(this.params,l)}get(l){if(this.has(l)){const u=this.params[l];return Array.isArray(u)?u[0]:u}return null}getAll(l){if(this.has(l)){const u=this.params[l];return Array.isArray(u)?u:[u]}return[]}get keys(){return Object.keys(this.params)}}function $e(a){return new Fe(a)}function It(a,l,u){const p=u.path.split("/");if(p.length>a.length||"full"===u.pathMatch&&(l.hasChildren()||p.length<a.length))return null;const y={};for(let T=0;T<p.length;T++){const x=p[T],te=a[T];if(":"===x[0])y[x.substring(1)]=te;else if(x!==te.path)return null}return{consumed:a.slice(0,p.length),posParams:y}}function Ut(a,l){const u=a?tn(a):void 0,p=l?tn(l):void 0;if(!u||!p||u.length!=p.length)return!1;let y;for(let T=0;T<u.length;T++)if(y=u[T],!bo(a[y],l[y]))return!1;return!0}function tn(a){return[...Object.keys(a),...Object.getOwnPropertySymbols(a)]}function bo(a,l){if(Array.isArray(a)&&Array.isArray(l)){if(a.length!==l.length)return!1;const u=[...a].sort(),p=[...l].sort();return u.every((y,T)=>p[T]===y)}return a===l}function Zr(a){return a.length>0?a[a.length-1]:null}function kn(a){return function se(a){return!!a&&(a instanceof U.c||"function"==typeof a.lift&&"function"==typeof a.subscribe)}(a)?a:(0,h.jNT)(a)?(0,De.H)(Promise.resolve(a)):(0,ee.of)(a)}const To={exact:function lo(a,l,u){if(!Rn(a.segments,l.segments)||!gn(a.segments,l.segments,u)||a.numberOfChildren!==l.numberOfChildren)return!1;for(const p in l.children)if(!a.children[p]||!lo(a.children[p],l.children[p],u))return!1;return!0},subset:Cn},Qr={exact:function Mo(a,l){return Ut(a,l)},subset:function Yr(a,l){return Object.keys(l).length<=Object.keys(a).length&&Object.keys(l).every(u=>bo(a[u],l[u]))},ignored:()=>!0};function Qn(a,l,u){return To[u.paths](a.root,l.root,u.matrixParams)&&Qr[u.queryParams](a.queryParams,l.queryParams)&&!("exact"===u.fragment&&a.fragment!==l.fragment)}function Cn(a,l,u){return Dr(a,l,l.segments,u)}function Dr(a,l,u,p){if(a.segments.length>u.length){const y=a.segments.slice(0,u.length);return!(!Rn(y,u)||l.hasChildren()||!gn(y,u,p))}if(a.segments.length===u.length){if(!Rn(a.segments,u)||!gn(a.segments,u,p))return!1;for(const y in l.children)if(!a.children[y]||!Cn(a.children[y],l.children[y],p))return!1;return!0}{const y=u.slice(0,a.segments.length),T=u.slice(a.segments.length);return!!(Rn(a.segments,y)&&gn(a.segments,y,p)&&a.children[q])&&Dr(a.children[q],l,T,p)}}function gn(a,l,u){return l.every((p,y)=>Qr[u](a[y].parameters,p.parameters))}class rn{constructor(l=new Je([],{}),u={},p=null){this.root=l,this.queryParams=u,this.fragment=p}get queryParamMap(){return this._queryParamMap??=$e(this.queryParams),this._queryParamMap}toString(){return sn.serialize(this)}}class Je{constructor(l,u){this.segments=l,this.children=u,this.parent=null,Object.values(u).forEach(p=>p.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yn(this)}}class Ln{constructor(l,u){this.path=l,this.parameters=u}get parameterMap(){return this._parameterMap??=$e(this.parameters),this._parameterMap}toString(){return me(this)}}function Rn(a,l){return a.length===l.length&&a.every((u,p)=>u.path===l[p].path)}let xn=(()=>{class a{static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:()=>new on,providedIn:"root"})}return a})();class on{parse(l){const u=new Ct(l);return new rn(u.parseRootSegment(),u.parseQueryParams(),u.parseFragment())}serialize(l){const u=`/${Zt(l.root,!0)}`,p=function xe(a){const l=Object.entries(a).map(([u,p])=>Array.isArray(p)?p.map(y=>`${A(u)}=${A(y)}`).join("&"):`${A(u)}=${A(p)}`).filter(u=>u);return l.length?`?${l.join("&")}`:""}(l.queryParams);return`${u}${p}${"string"==typeof l.fragment?`#${function L(a){return encodeURI(a)}(l.fragment)}`:""}`}}const sn=new on;function Yn(a){return a.segments.map(l=>me(l)).join("/")}function Zt(a,l){if(!a.hasChildren())return Yn(a);if(l){const u=a.children[q]?Zt(a.children[q],!1):"",p=[];return Object.entries(a.children).forEach(([y,T])=>{y!==q&&p.push(`${y}:${Zt(T,!1)}`)}),p.length>0?`${u}(${p.join("//")})`:u}{const u=function On(a,l){let u=[];return Object.entries(a.children).forEach(([p,y])=>{p===q&&(u=u.concat(l(y,p)))}),Object.entries(a.children).forEach(([p,y])=>{p!==q&&(u=u.concat(l(y,p)))}),u}(a,(p,y)=>y===q?[Zt(a.children[q],!1)]:[`${y}:${Zt(p,!1)}`]);return 1===Object.keys(a.children).length&&null!=a.children[q]?`${Yn(a)}/${u[0]}`:`${Yn(a)}/(${u.join("//")})`}}function Vn(a){return encodeURIComponent(a).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function A(a){return Vn(a).replace(/%3B/gi,";")}function k(a){return Vn(a).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K(a){return decodeURIComponent(a)}function ae(a){return K(a.replace(/\+/g,"%20"))}function me(a){return`${k(a.path)}${function ve(a){return Object.entries(a).map(([l,u])=>`;${k(l)}=${k(u)}`).join("")}(a.parameters)}`}const Re=/^[^\/()?;#]+/;function ht(a){const l=a.match(Re);return l?l[0]:""}const yt=/^[^\/()?;=#]+/,an=/^[^=?&#]+/,Qt=/^[^&#]+/;class Ct{constructor(l){this.url=l,this.remaining=l}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){const l={};if(this.consumeOptional("?"))do{this.parseQueryParam(l)}while(this.consumeOptional("&"));return l}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const l=[];for(this.peekStartsWith("(")||l.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),l.push(this.parseSegment());let u={};this.peekStartsWith("/(")&&(this.capture("/"),u=this.parseParens(!0));let p={};return this.peekStartsWith("(")&&(p=this.parseParens(!1)),(l.length>0||Object.keys(u).length>0)&&(p[q]=new Je(l,u)),p}parseSegment(){const l=ht(this.remaining);if(""===l&&this.peekStartsWith(";"))throw new h.wOt(4009,!1);return this.capture(l),new Ln(K(l),this.parseMatrixParams())}parseMatrixParams(){const l={};for(;this.consumeOptional(";");)this.parseParam(l);return l}parseParam(l){const u=function Ht(a){const l=a.match(yt);return l?l[0]:""}(this.remaining);if(!u)return;this.capture(u);let p="";if(this.consumeOptional("=")){const y=ht(this.remaining);y&&(p=y,this.capture(p))}l[K(u)]=K(p)}parseQueryParam(l){const u=function kt(a){const l=a.match(an);return l?l[0]:""}(this.remaining);if(!u)return;this.capture(u);let p="";if(this.consumeOptional("=")){const x=function pt(a){const l=a.match(Qt);return l?l[0]:""}(this.remaining);x&&(p=x,this.capture(p))}const y=ae(u),T=ae(p);if(l.hasOwnProperty(y)){let x=l[y];Array.isArray(x)||(x=[x],l[y]=x),x.push(T)}else l[y]=T}parseParens(l){const u={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const p=ht(this.remaining),y=this.remaining[p.length];if("/"!==y&&")"!==y&&";"!==y)throw new h.wOt(4010,!1);let T;p.indexOf(":")>-1?(T=p.slice(0,p.indexOf(":")),this.capture(T),this.capture(":")):l&&(T=q);const x=this.parseChildren();u[T]=1===Object.keys(x).length?x[q]:new Je([],x),this.consumeOptional("//")}return u}peekStartsWith(l){return this.remaining.startsWith(l)}consumeOptional(l){return!!this.peekStartsWith(l)&&(this.remaining=this.remaining.substring(l.length),!0)}capture(l){if(!this.consumeOptional(l))throw new h.wOt(4011,!1)}}function b(a){return a.segments.length>0?new Je([],{[q]:a}):a}function S(a){const l={};for(const[p,y]of Object.entries(a.children)){const T=S(y);if(p===q&&0===T.segments.length&&T.hasChildren())for(const[x,te]of Object.entries(T.children))l[x]=te;else(T.segments.length>0||T.hasChildren())&&(l[p]=T)}return function P(a){if(1===a.numberOfChildren&&a.children[q]){const l=a.children[q];return new Je(a.segments.concat(l.segments),l.children)}return a}(new Je(a.segments,l))}function W(a){return a instanceof rn}function Me(a){let l;const y=b(function u(T){const x={};for(const G of T.children){const Te=u(G);x[G.outlet]=Te}const te=new Je(T.url,x);return T===a&&(l=te),te}(a.root));return l??y}function Ge(a,l,u,p){let y=a;for(;y.parent;)y=y.parent;if(0===l.length)return fn(y,y,y,u,p);const T=function Ds(a){if("string"==typeof a[0]&&1===a.length&&"/"===a[0])return new Xi(!0,0,a);let l=0,u=!1;const p=a.reduce((y,T,x)=>{if("object"==typeof T&&null!=T){if(T.outlets){const te={};return Object.entries(T.outlets).forEach(([G,Te])=>{te[G]="string"==typeof Te?Te.split("/"):Te}),[...y,{outlets:te}]}if(T.segmentPath)return[...y,T.segmentPath]}return"string"!=typeof T?[...y,T]:0===x?(T.split("/").forEach((te,G)=>{0==G&&"."===te||(0==G&&""===te?u=!0:".."===te?l++:""!=te&&y.push(te))}),y):[...y,T]},[]);return new Xi(u,l,p)}(l);if(T.toRoot())return fn(y,y,new Je([],{}),u,p);const x=function Cs(a,l,u){if(a.isAbsolute)return new So(l,!0,0);if(!u)return new So(l,!1,NaN);if(null===u.parent)return new So(u,!0,0);const p=Lt(a.commands[0])?0:1;return function Ys(a,l,u){let p=a,y=l,T=u;for(;T>y;){if(T-=y,p=p.parent,!p)throw new h.wOt(4005,!1);y=p.segments.length}return new So(p,!1,y-T)}(u,u.segments.length-1+p,a.numberOfDoubleDots)}(T,y,a),te=x.processChildren?ti(x.segmentGroup,x.index,T.commands):_s(x.segmentGroup,x.index,T.commands);return fn(y,x.segmentGroup,te,u,p)}function Lt(a){return"object"==typeof a&&null!=a&&!a.outlets&&!a.segmentPath}function jt(a){return"object"==typeof a&&null!=a&&a.outlets}function fn(a,l,u,p,y){let x,T={};p&&Object.entries(p).forEach(([G,Te])=>{T[G]=Array.isArray(Te)?Te.map(je=>`${je}`):`${Te}`}),x=a===l?u:Jn(a,l,u);const te=b(S(x));return new rn(te,T,y)}function Jn(a,l,u){const p={};return Object.entries(a.children).forEach(([y,T])=>{p[y]=T===l?u:Jn(T,l,u)}),new Je(a.segments,p)}class Xi{constructor(l,u,p){if(this.isAbsolute=l,this.numberOfDoubleDots=u,this.commands=p,l&&p.length>0&&Lt(p[0]))throw new h.wOt(4003,!1);const y=p.find(jt);if(y&&y!==Zr(p))throw new h.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class So{constructor(l,u,p){this.segmentGroup=l,this.processChildren=u,this.index=p}}function _s(a,l,u){if(a??=new Je([],{}),0===a.segments.length&&a.hasChildren())return ti(a,l,u);const p=function Js(a,l,u){let p=0,y=l;const T={match:!1,pathIndex:0,commandIndex:0};for(;y<a.segments.length;){if(p>=u.length)return T;const x=a.segments[y],te=u[p];if(jt(te))break;const G=`${te}`,Te=p<u.length-1?u[p+1]:null;if(y>0&&void 0===G)break;if(G&&Te&&"object"==typeof Te&&void 0===Te.outlets){if(!ri(G,Te,x))return T;p+=2}else{if(!ri(G,{},x))return T;p++}y++}return{match:!0,pathIndex:y,commandIndex:p}}(a,l,u),y=u.slice(p.commandIndex);if(p.match&&p.pathIndex<a.segments.length){const T=new Je(a.segments.slice(0,p.pathIndex),{});return T.children[q]=new Je(a.segments.slice(p.pathIndex),a.children),ti(T,0,y)}return p.match&&0===y.length?new Je(a.segments,{}):p.match&&!a.hasChildren()?ni(a,l,u):p.match?ti(a,0,y):ni(a,l,u)}function ti(a,l,u){if(0===u.length)return new Je(a.segments,{});{const p=function Ki(a){return jt(a[0])?a[0].outlets:{[q]:a}}(u),y={};if(Object.keys(p).some(T=>T!==q)&&a.children[q]&&1===a.numberOfChildren&&0===a.children[q].segments.length){const T=ti(a.children[q],l,u);return new Je(a.segments,T.children)}return Object.entries(p).forEach(([T,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(y[T]=_s(a.children[T],l,x))}),Object.entries(a.children).forEach(([T,x])=>{void 0===p[T]&&(y[T]=x)}),new Je(a.segments,y)}}function ni(a,l,u){const p=a.segments.slice(0,l);let y=0;for(;y<u.length;){const T=u[y];if(jt(T)){const G=Zi(T.outlets);return new Je(p,G)}if(0===y&&Lt(u[0])){p.push(new Ln(a.segments[l].path,Mi(u[0]))),y++;continue}const x=jt(T)?T.outlets[q]:`${T}`,te=y<u.length-1?u[y+1]:null;x&&te&&Lt(te)?(p.push(new Ln(x,Mi(te))),y+=2):(p.push(new Ln(x,{})),y++)}return new Je(p,{})}function Zi(a){const l={};return Object.entries(a).forEach(([u,p])=>{"string"==typeof p&&(p=[p]),null!==p&&(l[u]=ni(new Je([],{}),0,p))}),l}function Mi(a){const l={};return Object.entries(a).forEach(([u,p])=>l[u]=`${p}`),l}function ri(a,l,u){return a==u.path&&Ut(l,u.parameters)}const Cr="imperative";var ot=function(a){return a[a.NavigationStart=0]="NavigationStart",a[a.NavigationEnd=1]="NavigationEnd",a[a.NavigationCancel=2]="NavigationCancel",a[a.NavigationError=3]="NavigationError",a[a.RoutesRecognized=4]="RoutesRecognized",a[a.ResolveStart=5]="ResolveStart",a[a.ResolveEnd=6]="ResolveEnd",a[a.GuardsCheckStart=7]="GuardsCheckStart",a[a.GuardsCheckEnd=8]="GuardsCheckEnd",a[a.RouteConfigLoadStart=9]="RouteConfigLoadStart",a[a.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",a[a.ChildActivationStart=11]="ChildActivationStart",a[a.ChildActivationEnd=12]="ChildActivationEnd",a[a.ActivationStart=13]="ActivationStart",a[a.ActivationEnd=14]="ActivationEnd",a[a.Scroll=15]="Scroll",a[a.NavigationSkipped=16]="NavigationSkipped",a}(ot||{});class _r{constructor(l,u){this.id=l,this.url=u}}class Ao extends _r{constructor(l,u,p="imperative",y=null){super(l,u),this.type=ot.NavigationStart,this.navigationTrigger=p,this.restoredState=y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jr extends _r{constructor(l,u,p){super(l,u),this.urlAfterRedirects=p,this.type=ot.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var qn=function(a){return a[a.Redirect=0]="Redirect",a[a.SupersededByNewNavigation=1]="SupersededByNewNavigation",a[a.NoDataFromResolver=2]="NoDataFromResolver",a[a.GuardRejected=3]="GuardRejected",a}(qn||{}),oi=function(a){return a[a.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",a[a.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",a}(oi||{});class Fr extends _r{constructor(l,u,p,y){super(l,u),this.reason=p,this.code=y,this.type=ot.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class No extends _r{constructor(l,u,p,y){super(l,u),this.reason=p,this.code=y,this.type=ot.NavigationSkipped}}class Qi extends _r{constructor(l,u,p,y){super(l,u),this.error=p,this.target=y,this.type=ot.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yi extends _r{constructor(l,u,p,y){super(l,u),this.urlAfterRedirects=p,this.state=y,this.type=ot.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hc extends _r{constructor(l,u,p,y){super(l,u),this.urlAfterRedirects=p,this.state=y,this.type=ot.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ea extends _r{constructor(l,u,p,y,T){super(l,u),this.urlAfterRedirects=p,this.state=y,this.shouldActivate=T,this.type=ot.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ta extends _r{constructor(l,u,p,y){super(l,u),this.urlAfterRedirects=p,this.state=y,this.type=ot.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws extends _r{constructor(l,u,p,y){super(l,u),this.urlAfterRedirects=p,this.state=y,this.type=ot.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na{constructor(l){this.route=l,this.type=ot.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Si{constructor(l){this.route=l,this.type=ot.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ji{constructor(l){this.snapshot=l,this.type=ot.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Se{constructor(l){this.snapshot=l,this.type=ot.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(l){this.snapshot=l,this.type=ot.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fo{constructor(l){this.snapshot=l,this.type=ot.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ai{}class eo{constructor(l,u){this.url=l,this.navigationBehaviorOptions=u}}function Tr(a){return a.outlet||q}function dt(a){if(!a)return null;if(a.routeConfig?._injector)return a.routeConfig._injector;for(let l=a.parent;l;l=l.parent){const u=l.routeConfig;if(u?._loadedInjector)return u._loadedInjector;if(u?._injector)return u._injector}return null}class Ts{get injector(){return dt(this.route?.snapshot)??this.rootInjector}set injector(l){}constructor(l){this.rootInjector=l,this.outlet=null,this.route=null,this.children=new $t(this.rootInjector),this.attachRef=null}}let $t=(()=>{class a{constructor(u){this.rootInjector=u,this.contexts=new Map}onChildOutletCreated(u,p){const y=this.getOrCreateContext(u);y.outlet=p,this.contexts.set(u,y)}onChildOutletDestroyed(u){const p=this.getContext(u);p&&(p.outlet=null,p.attachRef=null)}onOutletDeactivated(){const u=this.contexts;return this.contexts=new Map,u}onOutletReAttached(u){this.contexts=u}getOrCreateContext(u){let p=this.getContext(u);return p||(p=new Ts(this.rootInjector),this.contexts.set(u,p)),p}getContext(u){return this.contexts.get(u)||null}static#e=this.\u0275fac=function(p){return new(p||a)(h.KVO(h.uvJ))};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();class Ri{constructor(l){this._root=l}get root(){return this._root.value}parent(l){const u=this.pathFromRoot(l);return u.length>1?u[u.length-2]:null}children(l){const u=Oi(l,this._root);return u?u.children.map(p=>p.value):[]}firstChild(l){const u=Oi(l,this._root);return u&&u.children.length>0?u.children[0].value:null}siblings(l){const u=es(l,this._root);return u.length<2?[]:u[u.length-2].children.map(y=>y.value).filter(y=>y!==l)}pathFromRoot(l){return es(l,this._root).map(u=>u.value)}}function Oi(a,l){if(a===l.value)return l;for(const u of l.children){const p=Oi(a,u);if(p)return p}return null}function es(a,l){if(a===l.value)return[l];for(const u of l.children){const p=es(a,u);if(p.length)return p.unshift(l),p}return[]}class er{constructor(l,u){this.value=l,this.children=u}toString(){return`TreeNode(${this.value})`}}function ke(a){const l={};return a&&a.children.forEach(u=>l[u.value.outlet]=u),l}class ii extends Ri{constructor(l,u){super(l),this.snapshot=u,bt(this,l)}toString(){return this.snapshot.toString()}}function Un(a){const l=function pc(a){const T=new gr([],{},{},"",{},q,a,null,{});return new ia("",new er(T,[]))}(a),u=new Y.t([new Ln("",{})]),p=new Y.t({}),y=new Y.t({}),T=new Y.t({}),x=new Y.t(""),te=new Oo(u,p,T,x,y,q,a,l.root);return te.snapshot=l.root,new ii(new er(te,[]),l)}class Oo{constructor(l,u,p,y,T,x,te,G){this.urlSubject=l,this.paramsSubject=u,this.queryParamsSubject=p,this.fragmentSubject=y,this.dataSubject=T,this.outlet=x,this.component=te,this._futureSnapshot=G,this.title=this.dataSubject?.pipe((0,Ue.T)(Te=>Te[we]))??(0,ee.of)(void 0),this.url=l,this.params=u,this.queryParams=p,this.fragment=y,this.data=T}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Ue.T)(l=>$e(l))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Ue.T)(l=>$e(l))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xi(a,l,u="emptyOnly"){let p;const{routeConfig:y}=a;return p=null===l||"always"!==u&&""!==y?.path&&(l.component||l.routeConfig?.loadComponent)?{params:{...a.params},data:{...a.data},resolve:{...a.data,...a._resolvedData??{}}}:{params:{...l.params,...a.params},data:{...l.data,...a.data},resolve:{...a.data,...l.data,...y?.data,...a._resolvedData}},y&&E(y)&&(p.resolve[we]=y.title),p}class gr{get title(){return this.data?.[we]}constructor(l,u,p,y,T,x,te,G,Te){this.url=l,this.params=u,this.queryParams=p,this.fragment=y,this.data=T,this.outlet=x,this.component=te,this.routeConfig=G,this._resolve=Te}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$e(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$e(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(p=>p.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ia extends Ri{constructor(l,u){super(u),this.url=l,bt(this,u)}toString(){return gc(this._root)}}function bt(a,l){l.value._routerState=a,l.children.forEach(u=>bt(a,u))}function gc(a){const l=a.children.length>0?` { ${a.children.map(gc).join(", ")} } `:"";return`${a.value}${l}`}function sa(a){if(a.snapshot){const l=a.snapshot,u=a._futureSnapshot;a.snapshot=u,Ut(l.queryParams,u.queryParams)||a.queryParamsSubject.next(u.queryParams),l.fragment!==u.fragment&&a.fragmentSubject.next(u.fragment),Ut(l.params,u.params)||a.paramsSubject.next(u.params),function Kt(a,l){if(a.length!==l.length)return!1;for(let u=0;u<a.length;++u)if(!Ut(a[u],l[u]))return!1;return!0}(l.url,u.url)||a.urlSubject.next(u.url),Ut(l.data,u.data)||a.dataSubject.next(u.data)}else a.snapshot=a._futureSnapshot,a.dataSubject.next(a._futureSnapshot.data)}function ts(a,l){const u=Ut(a.params,l.params)&&function Pr(a,l){return Rn(a,l)&&a.every((u,p)=>Ut(u.parameters,l[p].parameters))}(a.url,l.url);return u&&!(!a.parent!=!l.parent)&&(!a.parent||ts(a.parent,l.parent))}function E(a){return"string"==typeof a.title||null===a.title}let D=(()=>{class a{constructor(){this.activated=null,this._activatedRoute=null,this.name=q,this.activateEvents=new h.bkB,this.deactivateEvents=new h.bkB,this.attachEvents=new h.bkB,this.detachEvents=new h.bkB,this.parentContexts=(0,h.WQX)($t),this.location=(0,h.WQX)(h.c1b),this.changeDetector=(0,h.WQX)(h.gRc),this.inputBinder=(0,h.WQX)(I,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(u){if(u.name){const{firstChange:p,previousValue:y}=u.name;if(p)return;this.isTrackedInParentContexts(y)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(y)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(u){return this.parentContexts.getContext(u)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const u=this.parentContexts.getContext(this.name);u?.route&&(u.attachRef?this.attach(u.attachRef,u.route):this.activateWith(u.route,u.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.wOt(4012,!1);this.location.detach();const u=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(u.instance),u}attach(u,p){this.activated=u,this._activatedRoute=p,this.location.insert(u.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(u.instance)}deactivate(){if(this.activated){const u=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(u)}}activateWith(u,p){if(this.isActivated)throw new h.wOt(4013,!1);this._activatedRoute=u;const y=this.location,x=u.snapshot.component,te=this.parentContexts.getOrCreateContext(this.name).children,G=new g(u,te,y.injector);this.activated=y.createComponent(x,{index:y.length,injector:G,environmentInjector:p}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275dir=h.FsC({type:a,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.OA$]})}return a})();class g{__ngOutletInjector(l){return new g(this.route,this.childContexts,l)}constructor(l,u,p){this.route=l,this.childContexts=u,this.parent=p}get(l,u){return l===Oo?this.route:l===$t?this.childContexts:this.parent.get(l,u)}}const I=new h.nKC("");function ze(a,l,u){if(u&&a.shouldReuseRoute(l.value,u.value.snapshot)){const p=u.value;p._futureSnapshot=l.value;const y=function mr(a,l,u){return l.children.map(p=>{for(const y of u.children)if(a.shouldReuseRoute(p.value,y.value.snapshot))return ze(a,p,y);return ze(a,p)})}(a,l,u);return new er(p,y)}{if(a.shouldAttach(l.value)){const T=a.retrieve(l.value);if(null!==T){const x=T.route;return x.value._futureSnapshot=l.value,x.children=l.children.map(te=>ze(a,te)),x}}const p=function xo(a){return new Oo(new Y.t(a.url),new Y.t(a.params),new Y.t(a.queryParams),new Y.t(a.fragment),new Y.t(a.data),a.outlet,a.component,a)}(l.value),y=l.children.map(T=>ze(a,T));return new er(p,y)}}class ro{constructor(l,u){this.redirectTo=l,this.navigationBehaviorOptions=u}}const gt="ngNavigationCancelingError";function zo(a,l){const{redirectTo:u,navigationBehaviorOptions:p}=W(l)?{redirectTo:l,navigationBehaviorOptions:void 0}:l,y=kr(!1,qn.Redirect);return y.url=u,y.navigationBehaviorOptions=p,y}function kr(a,l){const u=new Error(`NavigationCancelingError: ${a||""}`);return u[gt]=!0,u.cancellationCode=l,u}function mc(a){return!!a&&a[gt]}class Ss{constructor(l,u,p,y,T){this.routeReuseStrategy=l,this.futureState=u,this.currState=p,this.forwardEvent=y,this.inputBindingEnabled=T}activate(l){const u=this.futureState._root,p=this.currState?this.currState._root:null;this.deactivateChildRoutes(u,p,l),sa(this.futureState.root),this.activateChildRoutes(u,p,l)}deactivateChildRoutes(l,u,p){const y=ke(u);l.children.forEach(T=>{const x=T.value.outlet;this.deactivateRoutes(T,y[x],p),delete y[x]}),Object.values(y).forEach(T=>{this.deactivateRouteAndItsChildren(T,p)})}deactivateRoutes(l,u,p){const y=l.value,T=u?u.value:null;if(y===T)if(y.component){const x=p.getContext(y.outlet);x&&this.deactivateChildRoutes(l,u,x.children)}else this.deactivateChildRoutes(l,u,p);else T&&this.deactivateRouteAndItsChildren(u,p)}deactivateRouteAndItsChildren(l,u){l.value.component&&this.routeReuseStrategy.shouldDetach(l.value.snapshot)?this.detachAndStoreRouteSubtree(l,u):this.deactivateRouteAndOutlet(l,u)}detachAndStoreRouteSubtree(l,u){const p=u.getContext(l.value.outlet),y=p&&l.value.component?p.children:u,T=ke(l);for(const x of Object.values(T))this.deactivateRouteAndItsChildren(x,y);if(p&&p.outlet){const x=p.outlet.detach(),te=p.children.onOutletDeactivated();this.routeReuseStrategy.store(l.value.snapshot,{componentRef:x,route:l,contexts:te})}}deactivateRouteAndOutlet(l,u){const p=u.getContext(l.value.outlet),y=p&&l.value.component?p.children:u,T=ke(l);for(const x of Object.values(T))this.deactivateRouteAndItsChildren(x,y);p&&(p.outlet&&(p.outlet.deactivate(),p.children.onOutletDeactivated()),p.attachRef=null,p.route=null)}activateChildRoutes(l,u,p){const y=ke(u);l.children.forEach(T=>{this.activateRoutes(T,y[T.value.outlet],p),this.forwardEvent(new fo(T.value.snapshot))}),l.children.length&&this.forwardEvent(new Se(l.value.snapshot))}activateRoutes(l,u,p){const y=l.value,T=u?u.value:null;if(sa(y),y===T)if(y.component){const x=p.getOrCreateContext(y.outlet);this.activateChildRoutes(l,u,x.children)}else this.activateChildRoutes(l,u,p);else if(y.component){const x=p.getOrCreateContext(y.outlet);if(this.routeReuseStrategy.shouldAttach(y.snapshot)){const te=this.routeReuseStrategy.retrieve(y.snapshot);this.routeReuseStrategy.store(y.snapshot,null),x.children.onOutletReAttached(te.contexts),x.attachRef=te.componentRef,x.route=te.route.value,x.outlet&&x.outlet.attach(te.componentRef,te.route.value),sa(te.route.value),this.activateChildRoutes(l,null,x.children)}else x.attachRef=null,x.route=y,x.outlet&&x.outlet.activateWith(y,x.injector),this.activateChildRoutes(l,null,x.children)}else this.activateChildRoutes(l,null,p)}}class ns{constructor(l){this.path=l,this.route=this.path[this.path.length-1]}}class Pi{constructor(l,u){this.component=l,this.route=u}}function rs(a,l,u){const p=a._root;return Wo(p,l?l._root:null,u,[p.value])}function Le(a,l){const u=Symbol(),p=l.get(a,u);return p===u?"function"!=typeof a||(0,h.LfX)(a)?l.get(a):a:p}function Wo(a,l,u,p,y={canDeactivateChecks:[],canActivateChecks:[]}){const T=ke(l);return a.children.forEach(x=>{(function os(a,l,u,p,y={canDeactivateChecks:[],canActivateChecks:[]}){const T=a.value,x=l?l.value:null,te=u?u.getContext(a.value.outlet):null;if(x&&T.routeConfig===x.routeConfig){const G=function qo(a,l,u){if("function"==typeof u)return u(a,l);switch(u){case"pathParamsChange":return!Rn(a.url,l.url);case"pathParamsOrQueryParamsChange":return!Rn(a.url,l.url)||!Ut(a.queryParams,l.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ts(a,l)||!Ut(a.queryParams,l.queryParams);default:return!ts(a,l)}}(x,T,T.routeConfig.runGuardsAndResolvers);G?y.canActivateChecks.push(new ns(p)):(T.data=x.data,T._resolvedData=x._resolvedData),Wo(a,l,T.component?te?te.children:null:u,p,y),G&&te&&te.outlet&&te.outlet.isActivated&&y.canDeactivateChecks.push(new Pi(te.outlet.component,x))}else x&&si(l,te,y),y.canActivateChecks.push(new ns(p)),Wo(a,null,T.component?te?te.children:null:u,p,y)})(x,T[x.value.outlet],u,p.concat([x.value]),y),delete T[x.value.outlet]}),Object.entries(T).forEach(([x,te])=>si(te,u.getContext(x),y)),y}function si(a,l,u){const p=ke(a),y=a.value;Object.entries(p).forEach(([T,x])=>{si(x,y.component?l?l.children.getContext(T):null:l,u)}),u.canDeactivateChecks.push(new Pi(y.component&&l&&l.outlet&&l.outlet.isActivated?l.outlet.component:null,y))}function is(a){return"function"==typeof a}function ai(a){return a instanceof ye||"EmptyError"===a?.name}const ci=Symbol("INITIAL_VALUE");function Po(){return(0,Xt.n)(a=>mt(a.map(l=>l.pipe(Mn(1),function fr(...a){const l=a[a.length-1];return(0,de.m)(l)?(a.pop(),u=>In(a,u,l)):u=>In(a,u)}(ci)))).pipe((0,Ue.T)(l=>{for(const u of l)if(!0!==u){if(u===ci)return ci;if(!1===u||vc(u))return u}return!0}),(0,_t.p)(l=>l!==ci),Mn(1)))}function vc(a){return W(a)||a instanceof ro}function yc(a){return(0,ur.F)(Rt(l=>{if("boolean"!=typeof l)throw zo(0,l)}),(0,Ue.T)(l=>!0===l))}class ct{constructor(l){this.segmentGroup=l||null}}class Fi extends Error{constructor(l){super(),this.urlTree=l}}function ui(a){return nn(new ct(a))}class As{constructor(l,u){this.urlSerializer=l,this.urlTree=u}lineralizeSegments(l,u){let p=[],y=u.root;for(;;){if(p=p.concat(y.segments),0===y.numberOfChildren)return(0,ee.of)(p);if(y.numberOfChildren>1||!y.children[q])return nn(new h.wOt(4e3,!1));y=y.children[q]}}applyRedirectCommands(l,u,p,y,T){if("string"!=typeof u){const te=u,{queryParams:G,fragment:Te,routeConfig:je,url:Ke,outlet:Yt,params:Br,data:Pn,title:gi}=y,Do=(0,h.N4e)(T,()=>te({params:Br,data:Pn,queryParams:G,fragment:Te,routeConfig:je,url:Ke,outlet:Yt,title:gi}));if(Do instanceof rn)throw new Fi(Do);u=Do}const x=this.applyRedirectCreateUrlTree(u,this.urlSerializer.parse(u),l,p);if("/"===u[0])throw new Fi(x);return x}applyRedirectCreateUrlTree(l,u,p,y){const T=this.createSegmentGroup(l,u.root,p,y);return new rn(T,this.createQueryParams(u.queryParams,this.urlTree.queryParams),u.fragment)}createQueryParams(l,u){const p={};return Object.entries(l).forEach(([y,T])=>{if("string"==typeof T&&":"===T[0]){const te=T.substring(1);p[y]=u[te]}else p[y]=T}),p}createSegmentGroup(l,u,p,y){const T=this.createSegments(l,u.segments,p,y);let x={};return Object.entries(u.children).forEach(([te,G])=>{x[te]=this.createSegmentGroup(l,G,p,y)}),new Je(T,x)}createSegments(l,u,p,y){return u.map(T=>":"===T.path[0]?this.findPosParam(l,T,y):this.findOrReturn(T,p))}findPosParam(l,u,p){const y=p[u.path.substring(1)];if(!y)throw new h.wOt(4001,!1);return y}findOrReturn(l,u){let p=0;for(const y of u){if(y.path===l.path)return u.splice(p),y;p++}return l}}const li={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pa(a,l,u,p,y){const T=f(a,l,u);return T.matched?(p=function no(a,l){return a.providers&&!a._injector&&(a._injector=(0,h.Ol2)(a.providers,l,`Route: ${a.path}`)),a._injector??l}(l,p),function ha(a,l,u,p){const y=l.canMatch;if(!y||0===y.length)return(0,ee.of)(!0);const T=y.map(x=>{const te=Le(x,a);return kn(function da(a){return a&&is(a.canMatch)}(te)?te.canMatch(l,u):(0,h.N4e)(a,()=>te(l,u)))});return(0,ee.of)(T).pipe(Po(),yc())}(p,l,u).pipe((0,Ue.T)(x=>!0===x?T:{...li}))):(0,ee.of)(T)}function f(a,l,u){if("**"===l.path)return function w(a){return{matched:!0,parameters:a.length>0?Zr(a).parameters:{},consumedSegments:a,remainingSegments:[],positionalParamSegments:{}}}(u);if(""===l.path)return"full"===l.pathMatch&&(a.hasChildren()||u.length>0)?{...li}:{matched:!0,consumedSegments:[],remainingSegments:u,parameters:{},positionalParamSegments:{}};const y=(l.matcher||It)(u,a,l);if(!y)return{...li};const T={};Object.entries(y.posParams??{}).forEach(([te,G])=>{T[te]=G.path});const x=y.consumed.length>0?{...T,...y.consumed[y.consumed.length-1].parameters}:T;return{matched:!0,consumedSegments:y.consumed,remainingSegments:u.slice(y.consumed.length),parameters:x,positionalParamSegments:y.posParams??{}}}function m(a,l,u,p){return u.length>0&&function Q(a,l,u){return u.some(p=>Ae(a,l,p)&&Tr(p)!==q)}(a,u,p)?{segmentGroup:new Je(l,O(p,new Je(u,a.children))),slicedSegments:[]}:0===u.length&&function fe(a,l,u){return u.some(p=>Ae(a,l,p))}(a,u,p)?{segmentGroup:new Je(a.segments,_(a,u,p,a.children)),slicedSegments:u}:{segmentGroup:new Je(a.segments,a.children),slicedSegments:u}}function _(a,l,u,p){const y={};for(const T of u)if(Ae(a,l,T)&&!p[Tr(T)]){const x=new Je([],{});y[Tr(T)]=x}return{...p,...y}}function O(a,l){const u={};u[q]=l;for(const p of a)if(""===p.path&&Tr(p)!==q){const y=new Je([],{});u[Tr(p)]=y}return u}function Ae(a,l,u){return(!(a.hasChildren()||l.length>0)||"full"!==u.pathMatch)&&""===u.path}class xt{}class Mt{constructor(l,u,p,y,T,x,te){this.injector=l,this.configLoader=u,this.rootComponentType=p,this.config=y,this.urlTree=T,this.paramsInheritanceStrategy=x,this.urlSerializer=te,this.applyRedirects=new As(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(l){return new h.wOt(4002,`'${l.segmentGroup}'`)}recognize(){const l=m(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(l).pipe((0,Ue.T)(({children:u,rootSnapshot:p})=>{const y=new er(p,u),T=new ia("",y),x=function he(a,l,u=null,p=null){return Ge(Me(a),l,u,p)}(p,[],this.urlTree.queryParams,this.urlTree.fragment);return x.queryParams=this.urlTree.queryParams,T.url=this.urlSerializer.serialize(x),{state:T,tree:x}}))}match(l){const u=new gr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,l,q,u).pipe((0,Ue.T)(p=>({children:p,rootSnapshot:u})),Wn(p=>{if(p instanceof Fi)return this.urlTree=p.urlTree,this.match(p.urlTree.root);throw p instanceof ct?this.noMatchError(p):p}))}processSegmentGroup(l,u,p,y,T){return 0===p.segments.length&&p.hasChildren()?this.processChildren(l,u,p,T):this.processSegment(l,u,p,p.segments,y,!0,T).pipe((0,Ue.T)(x=>x instanceof er?[x]:[]))}processChildren(l,u,p,y){const T=[];for(const x of Object.keys(p.children))"primary"===x?T.unshift(x):T.push(x);return(0,De.H)(T).pipe((0,Qe.H)(x=>{const te=p.children[x],G=function oa(a,l){const u=a.filter(p=>Tr(p)===l);return u.push(...a.filter(p=>Tr(p)!==l)),u}(u,x);return this.processSegmentGroup(l,G,te,x,y)}),function at(a,l){let u=!1;return arguments.length>=2&&(u=!0),function(y){return y.lift(new wt(a,l,u))}}((x,te)=>(x.push(...te),x)),rt(null),function Io(a,l){const u=arguments.length>=2;return p=>p.pipe(a?(0,_t.p)((y,T)=>a(y,T,p)):lt.D,yr(1),u?rt(l):Or(()=>new ye))}(),(0,vt.ZZ)(x=>{if(null===x)return ui(p);const te=Lr(x);return function cn(a){a.sort((l,u)=>l.value.outlet===q?-1:u.value.outlet===q?1:l.value.outlet.localeCompare(u.value.outlet))}(te),(0,ee.of)(te)}))}processSegment(l,u,p,y,T,x,te){return(0,De.H)(u).pipe((0,Qe.H)(G=>this.processSegmentAgainstRoute(G._injector??l,u,G,p,y,T,x,te).pipe(Wn(Te=>{if(Te instanceof ct)return(0,ee.of)(null);throw Te}))),en(G=>!!G),Wn(G=>{if(ai(G))return function Ye(a,l,u){return 0===l.length&&!a.children[u]}(p,y,T)?(0,ee.of)(new xt):ui(p);throw G}))}processSegmentAgainstRoute(l,u,p,y,T,x,te,G){return function Gt(a,l,u,p){return!!(Tr(a)===p||p!==q&&Ae(l,u,a))&&f(l,a,u).matched}(p,y,T,x)?void 0===p.redirectTo?this.matchSegmentAgainstRoute(l,y,p,T,x,G):this.allowRedirects&&te?this.expandSegmentAgainstRouteUsingRedirect(l,y,u,p,T,x,G):ui(y):ui(y)}expandSegmentAgainstRouteUsingRedirect(l,u,p,y,T,x,te){const{matched:G,parameters:Te,consumedSegments:je,positionalParamSegments:Ke,remainingSegments:Yt}=f(u,y,T);if(!G)return ui(u);"string"==typeof y.redirectTo&&"/"===y.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Br=new gr(T,Te,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,go(y),Tr(y),y.component??y._loadedComponent??null,y,Vr(y)),Pn=xi(Br,te,this.paramsInheritanceStrategy);Br.params=Object.freeze(Pn.params),Br.data=Object.freeze(Pn.data);const gi=this.applyRedirects.applyRedirectCommands(je,y.redirectTo,Ke,Br,l);return this.applyRedirects.lineralizeSegments(y,gi).pipe((0,vt.ZZ)(Do=>this.processSegment(l,p,u,Do.concat(Yt),x,!1,te)))}matchSegmentAgainstRoute(l,u,p,y,T,x){const te=pa(u,p,y,l);return"**"===p.path&&(u.children={}),te.pipe((0,Xt.n)(G=>G.matched?this.getChildConfig(l=p._injector??l,p,y).pipe((0,Xt.n)(({routes:Te})=>{const je=p._loadedInjector??l,{parameters:Ke,consumedSegments:Yt,remainingSegments:Br}=G,Pn=new gr(Yt,Ke,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,go(p),Tr(p),p.component??p._loadedComponent??null,p,Vr(p)),gi=xi(Pn,x,this.paramsInheritanceStrategy);Pn.params=Object.freeze(gi.params),Pn.data=Object.freeze(gi.data);const{segmentGroup:Do,slicedSegments:hn}=m(u,Yt,Br,Te);if(0===hn.length&&Do.hasChildren())return this.processChildren(je,Te,Do,Pn).pipe((0,Ue.T)(_a=>new er(Pn,_a)));if(0===Te.length&&0===hn.length)return(0,ee.of)(new er(Pn,[]));const nl=Tr(p)===T;return this.processSegment(je,Te,Do,hn,nl?q:T,!0,Pn).pipe((0,Ue.T)(_a=>new er(Pn,_a instanceof er?[_a]:[])))})):ui(u)))}getChildConfig(l,u,p){return u.children?(0,ee.of)({routes:u.children,injector:l}):u.loadChildren?void 0!==u._loadedRoutes?(0,ee.of)({routes:u._loadedRoutes,injector:u._loadedInjector}):function Gd(a,l,u,p){const y=l.canLoad;if(void 0===y||0===y.length)return(0,ee.of)(!0);const T=y.map(x=>{const te=Le(x,a);return kn(function Ud(a){return a&&is(a.canLoad)}(te)?te.canLoad(l,u):(0,h.N4e)(a,()=>te(l,u)))});return(0,ee.of)(T).pipe(Po(),yc())}(l,u,p).pipe((0,vt.ZZ)(y=>y?this.configLoader.loadChildren(l,u).pipe(Rt(T=>{u._loadedRoutes=T.routes,u._loadedInjector=T.injector})):function zd(){return nn(kr(!1,qn.GuardRejected))}())):(0,ee.of)({routes:[],injector:l})}}function Fo(a){const l=a.value.routeConfig;return l&&""===l.path}function Lr(a){const l=[],u=new Set;for(const p of a){if(!Fo(p)){l.push(p);continue}const y=l.find(T=>p.value.routeConfig===T.value.routeConfig);void 0!==y?(y.children.push(...p.children),u.add(y)):l.push(p)}for(const p of u){const y=Lr(p.children);l.push(new er(p.value,y))}return l.filter(p=>!u.has(p))}function go(a){return a.data||{}}function Vr(a){return a.resolve||{}}function cs(a){const l=a.children.map(u=>cs(u)).flat();return[a,...l]}function di(a){return(0,Xt.n)(l=>{const u=a(l);return u?(0,De.H)(u).pipe((0,Ue.T)(()=>l)):(0,ee.of)(l)})}let Ec=(()=>{class a{buildTitle(u){let p,y=u.root;for(;void 0!==y;)p=this.getResolvedTitleForRoute(y)??p,y=y.children.find(T=>T.outlet===q);return p}getResolvedTitleForRoute(u){return u.data[we]}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:()=>(0,h.WQX)(ga),providedIn:"root"})}return a})(),ga=(()=>{class a extends Ec{constructor(u){super(),this.title=u}updateTitle(u){const p=this.buildTitle(u);void 0!==p&&this.title.setTitle(p)}static#e=this.\u0275fac=function(p){return new(p||a)(h.KVO(j.hE))};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const fi=new h.nKC("",{providedIn:"root",factory:()=>({})});let ma=(()=>{class a{static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275cmp=h.VBU({type:a,selectors:[["ng-component"]],standalone:!0,features:[h.aNF],decls:1,vars:0,template:function(p,y){1&p&&h.nrm(0,"router-outlet")},dependencies:[D],encapsulation:2})}return a})();function ju(a){const l=a.children&&a.children.map(ju),u=l?{...a,children:l}:{...a};return!u.component&&!u.loadComponent&&(l||u.loadChildren)&&u.outlet&&u.outlet!==q&&(u.component=ma),u}const Ns=new h.nKC("");let qd=(()=>{class a{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.WQX)(h.Ql9)}loadComponent(u){if(this.componentLoaders.get(u))return this.componentLoaders.get(u);if(u._loadedComponent)return(0,ee.of)(u._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(u);const p=kn(u.loadComponent()).pipe((0,Ue.T)(Vi),Rt(T=>{this.onLoadEndListener&&this.onLoadEndListener(u),u._loadedComponent=T}),(0,Z.j)(()=>{this.componentLoaders.delete(u)})),y=new lr(p,()=>new pn.B7).pipe(Dn());return this.componentLoaders.set(u,y),y}loadChildren(u,p){if(this.childrenLoaders.get(p))return this.childrenLoaders.get(p);if(p._loadedRoutes)return(0,ee.of)({routes:p._loadedRoutes,injector:p._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(p);const T=function Ur(a,l,u,p){return kn(a.loadChildren()).pipe((0,Ue.T)(Vi),(0,vt.ZZ)(y=>y instanceof h.Co$||Array.isArray(y)?(0,ee.of)(y):(0,De.H)(l.compileModuleAsync(y))),(0,Ue.T)(y=>{p&&p(a);let T,x,te=!1;return Array.isArray(y)?(x=y,!0):(T=y.create(u).injector,x=T.get(Ns,[],{optional:!0,self:!0}).flat()),{routes:x.map(ju),injector:T}}))}(p,this.compiler,u,this.onLoadEndListener).pipe((0,Z.j)(()=>{this.childrenLoaders.delete(p)})),x=new lr(T,()=>new pn.B7).pipe(Dn());return this.childrenLoaders.set(p,x),x}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function Vi(a){return function Dc(a){return a&&"object"==typeof a&&"default"in a}(a)?a.default:a}let Bu=(()=>{class a{static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:()=>(0,h.WQX)(Hu),providedIn:"root"})}return a})(),Hu=(()=>{class a{shouldProcessUrl(u){return!0}extract(u){return u}merge(u,p){return u}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const mo=new h.nKC(""),va=new h.nKC("");let Ui=(()=>{class a{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pn.B7,this.transitionAbortSubject=new pn.B7,this.configLoader=(0,h.WQX)(qd),this.environmentInjector=(0,h.WQX)(h.uvJ),this.urlSerializer=(0,h.WQX)(xn),this.rootContexts=(0,h.WQX)($t),this.location=(0,h.WQX)(vr.aZ),this.inputBindingEnabled=null!==(0,h.WQX)(I,{optional:!0}),this.titleStrategy=(0,h.WQX)(Ec),this.options=(0,h.WQX)(fi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,h.WQX)(Bu),this.createViewTransition=(0,h.WQX)(mo,{optional:!0}),this.navigationErrorHandler=(0,h.WQX)(va,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=y=>this.events.next(new Si(y)),this.configLoader.onLoadStartListener=y=>this.events.next(new na(y))}complete(){this.transitions?.complete()}handleNavigationRequest(u){const p=++this.navigationId;this.transitions?.next({...this.transitions.value,...u,id:p})}setupNavigations(u,p,y){return this.transitions=new Y.t({id:0,currentUrlTree:p,currentRawUrl:p,extractedUrl:this.urlHandlingStrategy.extract(p),urlAfterRedirects:this.urlHandlingStrategy.extract(p),rawUrl:p,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cr,restoredState:null,currentSnapshot:y.snapshot,targetSnapshot:null,currentRouterState:y,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,_t.p)(T=>0!==T.id),(0,Ue.T)(T=>({...T,extractedUrl:this.urlHandlingStrategy.extract(T.rawUrl)})),(0,Xt.n)(T=>{let x=!1,te=!1;return(0,ee.of)(T).pipe((0,Xt.n)(G=>{if(this.navigationId>T.id)return this.cancelNavigationTransition(T,"",qn.SupersededByNewNavigation),nt;this.currentTransition=T,this.currentNavigation={id:G.id,initialUrl:G.rawUrl,extractedUrl:G.extractedUrl,targetBrowserUrl:"string"==typeof G.extras.browserUrl?this.urlSerializer.parse(G.extras.browserUrl):G.extras.browserUrl,trigger:G.source,extras:G.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Te=!u.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Te&&"reload"!==(G.extras.onSameUrlNavigation??u.onSameUrlNavigation)){const Ke="";return this.events.next(new No(G.id,this.urlSerializer.serialize(G.rawUrl),Ke,oi.IgnoredSameUrlNavigation)),G.resolve(!1),nt}if(this.urlHandlingStrategy.shouldProcessUrl(G.rawUrl))return(0,ee.of)(G).pipe((0,Xt.n)(Ke=>{const Yt=this.transitions?.getValue();return this.events.next(new Ao(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),Ke.source,Ke.restoredState)),Yt!==this.transitions?.getValue()?nt:Promise.resolve(Ke)}),function ko(a,l,u,p,y,T){return(0,vt.ZZ)(x=>function pe(a,l,u,p,y,T,x="emptyOnly"){return new Mt(a,l,u,p,y,x,T).recognize()}(a,l,u,p,x.extractedUrl,y,T).pipe((0,Ue.T)(({state:te,tree:G})=>({...x,targetSnapshot:te,urlAfterRedirects:G}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,u.config,this.urlSerializer,this.paramsInheritanceStrategy),Rt(Ke=>{T.targetSnapshot=Ke.targetSnapshot,T.urlAfterRedirects=Ke.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Ke.urlAfterRedirects};const Yt=new Yi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot);this.events.next(Yt)}));if(Te&&this.urlHandlingStrategy.shouldProcessUrl(G.currentRawUrl)){const{id:Ke,extractedUrl:Yt,source:Br,restoredState:Pn,extras:gi}=G,Do=new Ao(Ke,this.urlSerializer.serialize(Yt),Br,Pn);this.events.next(Do);const hn=Un(this.rootComponentType).snapshot;return this.currentTransition=T={...G,targetSnapshot:hn,urlAfterRedirects:Yt,extras:{...gi,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Yt,(0,ee.of)(T)}{const Ke="";return this.events.next(new No(G.id,this.urlSerializer.serialize(G.extractedUrl),Ke,oi.IgnoredByUrlHandlingStrategy)),G.resolve(!1),nt}}),Rt(G=>{const Te=new hc(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(Te)}),(0,Ue.T)(G=>(this.currentTransition=T={...G,guards:rs(G.targetSnapshot,G.currentSnapshot,this.rootContexts)},T)),function po(a,l){return(0,vt.ZZ)(u=>{const{targetSnapshot:p,currentSnapshot:y,guards:{canActivateChecks:T,canDeactivateChecks:x}}=u;return 0===x.length&&0===T.length?(0,ee.of)({...u,guardsResult:!0}):function ss(a,l,u,p){return(0,De.H)(a).pipe((0,vt.ZZ)(y=>function Uu(a,l,u,p,y){const T=l&&l.routeConfig?l.routeConfig.canDeactivate:null;if(!T||0===T.length)return(0,ee.of)(!0);const x=T.map(te=>{const G=dt(l)??y,Te=Le(te,G);return kn(function Hd(a){return a&&is(a.canDeactivate)}(Te)?Te.canDeactivate(a,l,u,p):(0,h.N4e)(G,()=>Te(a,l,u,p))).pipe(en())});return(0,ee.of)(x).pipe(Po())}(y.component,y.route,u,l,p)),en(y=>!0!==y,!0))}(x,p,y,a).pipe((0,vt.ZZ)(te=>te&&function la(a){return"boolean"==typeof a}(te)?function fa(a,l,u,p){return(0,De.H)(l).pipe((0,Qe.H)(y=>In(function Tt(a,l){return null!==a&&l&&l(new Ji(a)),(0,ee.of)(!0)}(y.route.parent,p),function We(a,l){return null!==a&&l&&l(new Ho(a)),(0,ee.of)(!0)}(y.route,p),function Vu(a,l,u){const p=l[l.length-1],T=l.slice(0,l.length-1).reverse().map(x=>function ua(a){const l=a.routeConfig?a.routeConfig.canActivateChild:null;return l&&0!==l.length?{node:a,guards:l}:null}(x)).filter(x=>null!==x).map(x=>ut(()=>{const te=x.guards.map(G=>{const Te=dt(x.node)??u,je=Le(G,Te);return kn(function Bd(a){return a&&is(a.canActivateChild)}(je)?je.canActivateChild(p,a):(0,h.N4e)(Te,()=>je(p,a))).pipe(en())});return(0,ee.of)(te).pipe(Po())}));return(0,ee.of)(T).pipe(Po())}(a,y.path,u),function $d(a,l,u){const p=l.routeConfig?l.routeConfig.canActivate:null;if(!p||0===p.length)return(0,ee.of)(!0);const y=p.map(T=>ut(()=>{const x=dt(l)??u,te=Le(T,x);return kn(function jd(a){return a&&is(a.canActivate)}(te)?te.canActivate(l,a):(0,h.N4e)(x,()=>te(l,a))).pipe(en())}));return(0,ee.of)(y).pipe(Po())}(a,y.route,u))),en(y=>!0!==y,!0))}(p,T,a,l):(0,ee.of)(te)),(0,Ue.T)(te=>({...u,guardsResult:te})))})}(this.environmentInjector,G=>this.events.next(G)),Rt(G=>{if(T.guardsResult=G.guardsResult,G.guardsResult&&"boolean"!=typeof G.guardsResult)throw zo(0,G.guardsResult);const Te=new ea(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot,!!G.guardsResult);this.events.next(Te)}),(0,_t.p)(G=>!!G.guardsResult||(this.cancelNavigationTransition(G,"",qn.GuardRejected),!1)),di(G=>{if(G.guards.canActivateChecks.length)return(0,ee.of)(G).pipe(Rt(Te=>{const je=new ta(Te.id,this.urlSerializer.serialize(Te.extractedUrl),this.urlSerializer.serialize(Te.urlAfterRedirects),Te.targetSnapshot);this.events.next(je)}),(0,Xt.n)(Te=>{let je=!1;return(0,ee.of)(Te).pipe(function Lo(a,l){return(0,vt.ZZ)(u=>{const{targetSnapshot:p,guards:{canActivateChecks:y}}=u;if(!y.length)return(0,ee.of)(u);const T=new Set(y.map(G=>G.route)),x=new Set;for(const G of T)if(!x.has(G))for(const Te of cs(G))x.add(Te);let te=0;return(0,De.H)(x).pipe((0,Qe.H)(G=>T.has(G)?function Li(a,l,u,p){const y=a.routeConfig,T=a._resolve;return void 0!==y?.title&&!E(y)&&(T[we]=y.title),function Wd(a,l,u,p){const y=tn(a);if(0===y.length)return(0,ee.of)({});const T={};return(0,De.H)(y).pipe((0,vt.ZZ)(x=>function Sr(a,l,u,p){const y=dt(l)??p,T=Le(a,y);return kn(T.resolve?T.resolve(l,u):(0,h.N4e)(y,()=>T(l,u)))}(a[x],l,u,p).pipe(en(),Rt(te=>{if(te instanceof ro)throw zo(new on,te);T[x]=te}))),yr(1),function An(a){return l=>l.lift(new Nn(a))}(T),Wn(x=>ai(x)?nt:nn(x)))}(T,a,l,p).pipe((0,Ue.T)(x=>(a._resolvedData=x,a.data=xi(a,a.parent,u).resolve,null)))}(G,p,a,l):(G.data=xi(G,G.parent,a).resolve,(0,ee.of)(void 0))),Rt(()=>te++),yr(1),(0,vt.ZZ)(G=>te===x.size?(0,ee.of)(u):nt))})}(this.paramsInheritanceStrategy,this.environmentInjector),Rt({next:()=>je=!0,complete:()=>{je||this.cancelNavigationTransition(Te,"",qn.NoDataFromResolver)}}))}),Rt(Te=>{const je=new ws(Te.id,this.urlSerializer.serialize(Te.extractedUrl),this.urlSerializer.serialize(Te.urlAfterRedirects),Te.targetSnapshot);this.events.next(je)}))}),di(G=>{const Te=je=>{const Ke=[];je.routeConfig?.loadComponent&&!je.routeConfig._loadedComponent&&Ke.push(this.configLoader.loadComponent(je.routeConfig).pipe(Rt(Yt=>{je.component=Yt}),(0,Ue.T)(()=>{})));for(const Yt of je.children)Ke.push(...Te(Yt));return Ke};return mt(Te(G.targetSnapshot.root)).pipe(rt(null),Mn(1))}),di(()=>this.afterPreactivation()),(0,Xt.n)(()=>{const{currentSnapshot:G,targetSnapshot:Te}=T,je=this.createViewTransition?.(this.environmentInjector,G.root,Te.root);return je?(0,De.H)(je).pipe((0,Ue.T)(()=>T)):(0,ee.of)(T)}),(0,Ue.T)(G=>{const Te=function Oe(a,l,u){const p=ze(a,l._root,u?u._root:void 0);return new ii(p,l)}(u.routeReuseStrategy,G.targetSnapshot,G.currentRouterState);return this.currentTransition=T={...G,targetRouterState:Te},this.currentNavigation.targetRouterState=Te,T}),Rt(()=>{this.events.next(new Ai)}),((a,l,u,p)=>(0,Ue.T)(y=>(new Ss(l,y.targetRouterState,y.currentRouterState,u,p).activate(a),y)))(this.rootContexts,u.routeReuseStrategy,G=>this.events.next(G),this.inputBindingEnabled),Mn(1),Rt({next:G=>{x=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jr(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects))),this.titleStrategy?.updateTitle(G.targetRouterState.snapshot),G.resolve(!0)},complete:()=>{x=!0}}),(0,R.Q)(this.transitionAbortSubject.pipe(Rt(G=>{throw G}))),(0,Z.j)(()=>{!x&&!te&&this.cancelNavigationTransition(T,"",qn.SupersededByNewNavigation),this.currentTransition?.id===T.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wn(G=>{if(te=!0,mc(G))this.events.next(new Fr(T.id,this.urlSerializer.serialize(T.extractedUrl),G.message,G.cancellationCode)),function Ms(a){return mc(a)&&W(a.url)}(G)?this.events.next(new eo(G.url,G.navigationBehaviorOptions)):T.resolve(!1);else{const Te=new Qi(T.id,this.urlSerializer.serialize(T.extractedUrl),G,T.targetSnapshot??void 0);try{const je=(0,h.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(Te));if(je instanceof ro){const{message:Ke,cancellationCode:Yt}=zo(0,je);this.events.next(new Fr(T.id,this.urlSerializer.serialize(T.extractedUrl),Ke,Yt)),this.events.next(new eo(je.redirectTo,je.navigationBehaviorOptions))}else{this.events.next(Te);const Ke=u.errorHandler(G);T.resolve(!!Ke)}}catch(je){this.options.resolveNavigationPromiseOnError?T.resolve(!1):T.reject(je)}}return nt}))}))}cancelNavigationTransition(u,p,y){const T=new Fr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,y);this.events.next(T),u.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const u=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),p=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return u.toString()!==p?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function ya(a){return a!==Cr}let hi=(()=>{class a{static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:()=>(0,h.WQX)(Xd),providedIn:"root"})}return a})();class pi{shouldDetach(l){return!1}store(l,u){}shouldAttach(l){return!1}retrieve(l){return null}shouldReuseRoute(l,u){return l.routeConfig===u.routeConfig}}let Xd=(()=>{class a extends pi{static#e=this.\u0275fac=(()=>{let u;return function(y){return(u||(u=h.xGo(a)))(y||a)}})();static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Ea=(()=>{class a{static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:()=>(0,h.WQX)(Gu),providedIn:"root"})}return a})(),Gu=(()=>{class a extends Ea{constructor(){super(...arguments),this.location=(0,h.WQX)(vr.aZ),this.urlSerializer=(0,h.WQX)(xn),this.options=(0,h.WQX)(fi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,h.WQX)(Bu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Un(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(u){return this.location.subscribe(p=>{"popstate"===p.type&&u(p.url,p.state)})}handleRouterEvent(u,p){if(u instanceof Ao)this.stateMemento=this.createStateMemento();else if(u instanceof No)this.rawUrlTree=p.initialUrl;else if(u instanceof Yi){if("eager"===this.urlUpdateStrategy&&!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.finalUrl,p.initialUrl);this.setBrowserUrl(p.targetBrowserUrl??y,p)}}else u instanceof Ai?(this.currentUrlTree=p.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(p.finalUrl,p.initialUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&!p.extras.skipLocationChange&&this.setBrowserUrl(p.targetBrowserUrl??this.rawUrlTree,p)):u instanceof Fr&&(u.code===qn.GuardRejected||u.code===qn.NoDataFromResolver)?this.restoreHistory(p):u instanceof Qi?this.restoreHistory(p,!0):u instanceof Jr&&(this.lastSuccessfulId=u.id,this.currentPageId=this.browserPageId)}setBrowserUrl(u,p){const y=u instanceof rn?this.urlSerializer.serialize(u):u;if(this.location.isCurrentPathEqualTo(y)||p.extras.replaceUrl){const x={...p.extras.state,...this.generateNgRouterState(p.id,this.browserPageId)};this.location.replaceState(y,"",x)}else{const T={...p.extras.state,...this.generateNgRouterState(p.id,this.browserPageId+1)};this.location.go(y,"",T)}}restoreHistory(u,p=!1){if("computed"===this.canceledNavigationResolution){const T=this.currentPageId-this.browserPageId;0!==T?this.location.historyGo(T):this.currentUrlTree===u.finalUrl&&0===T&&(this.resetState(u),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(p&&this.resetState(u),this.resetUrlToCurrentUrlTree())}resetState(u){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,u.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(u,p){return"computed"===this.canceledNavigationResolution?{navigationId:u,\u0275routerPageId:p}:{navigationId:u}}static#e=this.\u0275fac=(()=>{let u;return function(y){return(u||(u=h.xGo(a)))(y||a)}})();static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var us=function(a){return a[a.COMPLETE=0]="COMPLETE",a[a.FAILED=1]="FAILED",a[a.REDIRECTING=2]="REDIRECTING",a}(us||{});function zu(a){throw a}const Wu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yo=(()=>{class a{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,h.WQX)(h.H3F),this.stateManager=(0,h.WQX)(Ea),this.options=(0,h.WQX)(fi,{optional:!0})||{},this.pendingTasks=(0,h.WQX)(h.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,h.WQX)(Ui),this.urlSerializer=(0,h.WQX)(xn),this.location=(0,h.WQX)(vr.aZ),this.urlHandlingStrategy=(0,h.WQX)(Bu),this._events=new pn.B7,this.errorHandler=this.options.errorHandler||zu,this.navigated=!1,this.routeReuseStrategy=(0,h.WQX)(hi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,h.WQX)(Ns,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,h.WQX)(I,{optional:!0}),this.eventsSubscription=new En.y,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:u=>{this.console.warn(u)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const u=this.navigationTransitions.events.subscribe(p=>{try{const y=this.navigationTransitions.currentTransition,T=this.navigationTransitions.currentNavigation;if(null!==y&&null!==T)if(this.stateManager.handleRouterEvent(p,T),p instanceof Fr&&p.code!==qn.Redirect&&p.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(p instanceof Jr)this.navigated=!0;else if(p instanceof eo){const x=p.navigationBehaviorOptions,te=this.urlHandlingStrategy.merge(p.url,y.currentRawUrl),G={browserUrl:y.extras.browserUrl,info:y.extras.info,skipLocationChange:y.extras.skipLocationChange,replaceUrl:y.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ya(y.source),...x};this.scheduleNavigation(te,Cr,null,G,{resolve:y.resolve,reject:y.reject,promise:y.promise})}(function Qd(a){return!(a instanceof Ai||a instanceof eo)})(p)&&this._events.next(p)}catch(y){this.navigationTransitions.transitionAbortSubject.next(y)}});this.eventsSubscription.add(u)}resetRootComponentType(u){this.routerState.root.component=u,this.navigationTransitions.rootComponentType=u}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((u,p)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(u,"popstate",p)},0)})}navigateToSyncWithBrowser(u,p,y){const T={replaceUrl:!0},x=y?.navigationId?y:null;if(y){const G={...y};delete G.navigationId,delete G.\u0275routerPageId,0!==Object.keys(G).length&&(T.state=G)}const te=this.parseUrl(u);this.scheduleNavigation(te,p,x,T)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(u){this.config=u.map(ju),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(u,p={}){const{relativeTo:y,queryParams:T,fragment:x,queryParamsHandling:te,preserveFragment:G}=p,Te=G?this.currentUrlTree.fragment:x;let Ke,je=null;switch(te??this.options.defaultQueryParamsHandling){case"merge":je={...this.currentUrlTree.queryParams,...T};break;case"preserve":je=this.currentUrlTree.queryParams;break;default:je=T||null}null!==je&&(je=this.removeEmptyProps(je));try{Ke=Me(y?y.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof u[0]||"/"!==u[0][0])&&(u=[]),Ke=this.currentUrlTree.root}return Ge(Ke,u,je,Te??null)}navigateByUrl(u,p={skipLocationChange:!1}){const y=W(u)?u:this.parseUrl(u),T=this.urlHandlingStrategy.merge(y,this.rawUrlTree);return this.scheduleNavigation(T,Cr,null,p)}navigate(u,p={skipLocationChange:!1}){return function Zd(a){for(let l=0;l<a.length;l++)if(null==a[l])throw new h.wOt(4008,!1)}(u),this.navigateByUrl(this.createUrlTree(u,p),p)}serializeUrl(u){return this.urlSerializer.serialize(u)}parseUrl(u){try{return this.urlSerializer.parse(u)}catch{return this.urlSerializer.parse("/")}}isActive(u,p){let y;if(y=!0===p?{...Wu}:!1===p?{...Kd}:p,W(u))return Qn(this.currentUrlTree,u,y);const T=this.parseUrl(u);return Qn(this.currentUrlTree,T,y)}removeEmptyProps(u){return Object.entries(u).reduce((p,[y,T])=>(null!=T&&(p[y]=T),p),{})}scheduleNavigation(u,p,y,T,x){if(this.disposed)return Promise.resolve(!1);let te,G,Te;x?(te=x.resolve,G=x.reject,Te=x.promise):Te=new Promise((Ke,Yt)=>{te=Ke,G=Yt});const je=this.pendingTasks.add();return function ls(a,l){a.events.pipe((0,_t.p)(u=>u instanceof Jr||u instanceof Fr||u instanceof Qi||u instanceof No),(0,Ue.T)(u=>u instanceof Jr||u instanceof No?us.COMPLETE:u instanceof Fr&&(u.code===qn.Redirect||u.code===qn.SupersededByNewNavigation)?us.REDIRECTING:us.FAILED),(0,_t.p)(u=>u!==us.REDIRECTING),Mn(1)).subscribe(()=>{l()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(je))}),this.navigationTransitions.handleNavigationRequest({source:p,restoredState:y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:u,extras:T,resolve:te,reject:G,promise:Te,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Te.catch(Ke=>Promise.reject(Ke))}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275prov=h.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const Da=new h.nKC("");function tf(a,...l){return(0,h.EmA)([{provide:Ns,multi:!0,useValue:a},[],{provide:Oo,useFactory:Ku,deps:[yo]},{provide:h.iLQ,multi:!0,useFactory:Cc},l.map(u=>u.\u0275providers)])}function Ku(a){return a.routerState.root}function Cc(){const a=(0,h.WQX)(h.zZn);return l=>{const u=a.get(h.o8S);if(l!==u.components[0])return;const p=a.get(yo),y=a.get(_c);1===a.get(it)&&p.initialNavigation(),a.get(nr,null,h.$GK.Optional)?.setUpPreloading(),a.get(Da,null,h.$GK.Optional)?.init(),p.resetRootComponentType(u.componentTypes[0]),y.closed||(y.next(),y.complete(),y.unsubscribe())}}const _c=new h.nKC("",{factory:()=>new pn.B7}),it=new h.nKC("",{providedIn:"root",factory:()=>1}),nr=new h.nKC("")}}]);
"use strict";(self.webpackChunkinsight_search=self.webpackChunkinsight_search||[]).push([[792],{6483:(R,D,u)=>{var e=u(3953);var ie=u(4511),A=u(345),O=u(1562),r=function(n){return n.By="By_key",n.ViewPage="View_page_key",n.CurrentPage="Current_page_key",n.MaxResults="max_results",n.ResultsFor="results_for",n.Results="results",n.Showing="showing",n.Of="of",n.OpenInNewWindow="open_in_new_window",n.Filters="filters",n.SorryNoResultsFor="sorry_no_results_for",n.NoResultsFor="no_results_for",n.SearchSuggestion="search_suggestions",n.CheckYourSpelling="check_your_spelling",n.TryMoreGeneralWords="try_more_general_words",n.TryDifferentWordsThatMeanTheSameThing="try_different_words_that_mean_the_same_thing",n.SolutionsContentType="solutions_content_type",n.TopicContentType="topic_content_type",n.Profile="profile",n.SearchPlaceholder="search_placeholder",n.SearchPlaceholderExtended="search_placeholder_extended",n.ExitSearch="exit_search",n.ReadTime="readtime",n.DigitalTransformation="digital_transformation",n.ClimateTrust="climate_trust",n.Resilience="resilience",n.Careers="careers",n.LifeAtDeloitte="life_at_deloitte",n.FutureOfWork="future_of_work",n.Events="events",n.SuggestedTopics="suggested_topics",n.SearchTips="search_tips",n.PleaseDoubleCheck="please_double_check",n.ReadyToMake="ready_to_make",n.ExploreCareers="explore_careers",n.LearnMore="learn_more",n}(r||{});const se=new Map([[r.SuggestedTopics,"Suggested topics"],[r.SearchTips,"Search Suggestions"],[r.PleaseDoubleCheck,"Please double check the spelling or use a more generic search term."],[r.ReadyToMake,"Ready to make you impact? Searching for a job?"],[r.ExploreCareers,"Explore careers with Deloitte"],[r.NoResultsFor,"No results for"],[r.DigitalTransformation,"Digital Transformation"],[r.ClimateTrust,"Climate & Trust"],[r.Resilience,"Resilience"],[r.Careers,"Careers"],[r.LifeAtDeloitte,"Life at Deloitte"],[r.FutureOfWork,"Future of Work"],[r.Events,"Events"],[r.By,"By"],[r.ViewPage,"View page"],[r.CurrentPage,"Current page"],[r.MaxResults,"More than 100 results"],[r.ResultsFor,"Results for"],[r.OpenInNewWindow,"Open in new window"],[r.LearnMore,"Learn more"],[r.Filters,"Filters"],[r.SorryNoResultsFor,"Sorry, no results found."],[r.SearchSuggestion,"Search suggestion"],[r.CheckYourSpelling,"Check your spelling"],[r.TryMoreGeneralWords,"Try more general words"],[r.TryDifferentWordsThatMeanTheSameThing,"Try different words that mean the same thing"],[r.SolutionsContentType,"Solutions"],[r.TopicContentType,"Topic"],[r.Profile,"Profile"],[r.SearchPlaceholder,"Search"],[r.SearchPlaceholderExtended,"Enter Keywords"],[r.ExitSearch,"Exit Search"],[r.ReadTime,"Min Read"],[r.Results,"results"],[r.Showing,"Showing"],[r.Of,"of"]]);var h=function(n){return n.Country="sc_country",n.Language="sc_language",n.InternalFacets="internalFacets",n.SearchLocationInsights="searchLocationInsights",n.SEARCHENGINE="search_engine",n.EL_SEARCHENGINE="elastic_search_engine",n.SEARCHKEY="search_key",n.EL_SEARCHKEY="elastic_search_key",n.sc_template="sc_template",n.SearchFacets="searchFacets",n}(h||{}),g=function(n){return n.ArrowDown="ArrowDown",n.ArrowUp="ArrowUp",n.Escape="Escape",n.Enter="Enter",n.Tab="Tab",n.Space="Space",n}(g||{});class L{constructor(o=10,t=1,i,s){this.size=o,this.current=t,this.total_results=i,this.total_pages=s}}class G{constructor(o,t,i,s,a,c,l,m,C,b,d,M,v,S,it,st,at,rt,ot,ct,lt,ht,dt,pt,gt,mt,ut,_t,ft,Ct,bt,xt,St,yt,wt,Ot,It,Tt,Pt,Mt,vt,Rt,Et,At,Nt,kt){this.pageType=o,this.title=t,this.promoTitle=i,this.description=s,this.url=a,this.image=c,this.brand=l,this.contentType=m,this.mediaLength=C,this.publishedDateFormatted=b,this.email=d,this.phoneNumber1=M,this.eventType=v,this.eventSubType=S,this.domain=it,this.city=st,this.country=at,this.countryCode=rt,this.countryLang=ot,this.datePublished=ct,this.eventStartDay=lt,this.eventStartMonth=ht,this.eventStartYear=dt,this.eventEndDay=pt,this.eventEndMonth=gt,this.eventEndYear=mt,this.eventStatus=ut,this.RegLink=_t,this.RegLabel=ft,this.regLinkExternalSite=Ct,this.learnMore=bt,this.learnMoreLink=xt,this.mapLink=St,this.address=yt,this.index=wt,this.cta=Ot,this.startDate=It,this.endDate=Tt,this.publishedDay=Pt,this.publishedMonth=Mt,this.publishedYear=vt,this.metaScore=Rt,this.location=Et,this.registercheckbox=At,this.posteventcheckbox=Nt,this.hideEvents=kt}}class U{constructor(o=new L,t){this.pagination=o,this.searchResults=t}}var p=function(n){return n.Query="qr",n.CurrentPage="page",n.SearchFacet="searchFacet",n.Country="country",n}(p||{});const F="leftListFacets";let y=(()=>{class n{updatePageTemplate(t,i){this.assignValueToWindow(t,["dataLayer","page","attributes","pageTemplate"],i)}updateSearchDataLayer(t,i){this.assignValueToWindow(t,["dataLayer","search"],i)}getDataValueByKey(t){return window[t]}gotoSearchScreen(t){const s=`${this.getDataValueByKey(h.SearchLocationInsights)}?qr=${encodeURIComponent(t.qr)}`;window.location.replace(s)}assignValueToWindow(t,i,s){const a=i.length-1;for(let c=0;c<a;++c){const l=i[c];l in t||(t[l]={}),t=t[l]}t[i[a]]=s}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class ce{constructor(o){this.id="",this.queryString="",this.pageType=[],this.from=0,this.pageSize=10,this.currentPage=1,this.siteName="",this.lang="",this.initRequest(o)}initRequest(o){this.WINDOW=new y,this.siteName=this.WINDOW.getDataValueByKey(h.Country),this.lang=this.WINDOW.getDataValueByKey(h.Language),this.queryString=o[p.Query],this.insightsPageType=this.WINDOW.getDataValueByKey(h.SearchFacets);let t=JSON.parse(this.insightsPageType).find(i=>"Insights"===i.anchor);if(this.pageType=t.label_with_op.split("|")||[],o[p.CurrentPage]){const i=Math.ceil(Number(o[p.CurrentPage]));this.currentPage=i,this.from=i>1?this.pageSize*(i-1):0}this.id=this.WINDOW.getDataValueByKey(h.EL_SEARCHENGINE).includes("modern")?"modern-insights-internal-search-template":"dcom-internal-search-template"}getQuery(){let o={};return o=this.WINDOW.getDataValueByKey(h.EL_SEARCHENGINE).includes("modern")?{id:this.id,params:{"query-string":this.queryString,from:this.from,size:this.pageSize,"site-name":this.siteName,language:this.lang}}:{id:this.id,params:{"query-string":this.queryString,from:this.from,size:this.pageSize,"country-code":this.siteName,"country-lang":this.lang}},this.pageType&&(o.params["page-type"]=this.pageType),o}}let le=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-search-placeholder"]],standalone:!0,features:[e.aNF],decls:3,vars:0,consts:[[1,"cmp-di-search-page-placeholder"],["src","data:image/svg+xml, %3Csvg viewBox='0 0 1030 392' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M211 54H0V85H211V54Z' fill='white'/%3E%3Cpath d='M218 0H162V392H218V0Z' fill='white'/%3E%3Cpath d='M211 110H0V141H211V110Z' fill='white'/%3E%3Cpath d='M218 166H0V196.5H218V166Z' fill='white'/%3E%3Cpath d='M218 222H0V392H218V222Z' fill='white'/%3E%3Cpath d='M218 141H208V392H218V141Z' fill='white'/%3E%3Cpath d='M1030 138L615.5 137H408H201V179H1030V138Z' fill='white'/%3E%3Cpath d='M1030 345H302V392H1030V345Z' fill='white'/%3E%3Cpath d='M1030 263H0V307H1030V263Z' fill='white'/%3E%3Cpath d='M322 141H302V392H322V141Z' fill='white'/%3E%3Cpath d='M1030 322H302V330H1030V322Z' fill='white'/%3E%3Cpath d='M1030 305H666V330H1030V305Z' fill='white'/%3E%3Cpath d='M1030 217H302V275H1030V217Z' fill='white'/%3E%3Cpath d='M1030 194H302V202H1030V194Z' fill='white'/%3E%3Cpath d='M1030 176H666V202H1030V176Z' fill='white'/%3E%3Cpath d='M218 0H0V29H218V0Z' fill='white'/%3E%3Cpath d='M1030 113H211V141H1030V113Z' fill='%23F6F6F6'/%3E%3Cpath d='M1030 66H334V113H1030V66Z' fill='%23F6F6F6'/%3E%3Cpath d='M250 0H211V115.67H250V0Z' fill='%23F6F6F6'/%3E%3Cpath d='M354 0H334V69.5H354V0Z' fill='%23F6F6F6'/%3E%3Cpath d='M1030 0H241.33V28H1030V0Z' fill='%23F6F6F6'/%3E%3Cpath d='M1030 22.33H904V66H1030V22.33Z' fill='%23F6F6F6'/%3E%3Cpath d='M912 26.33H579V51H912V26.33Z' fill='%23F6F6F6'/%3E%3Cpath d='M924 43H339.33V51H924V43Z' fill='%23F6F6F6'/%3E%3Cpath d='M334 66H1030V141H334V66Z' fill='%23F6F6F6'/%3E%3Cpath d='M904 0H1030V141H904V0Z' fill='%23F6F6F6'/%3E%3C/svg%3E%0A",1,"cmp-di-search-page-placeholder__img","cmp-di-search-page-placeholder__img--desktop"],["src","data:image/svg+xml, %3Csvg viewBox='0 0 336 398' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M162 0H174V36H162V0Z' fill='white'/%3E%3Cpath d='M0 25H336V36H0V25Z' fill='white'/%3E%3Cpath d='M0 43H336V63H0V43Z' fill='white'/%3E%3Cpath d='M0 175H336V204H0V175Z' fill='white'/%3E%3Cpath d='M84 242H336V314H84V242Z' fill='white'/%3E%3Cpath d='M84 178H99V398H84V178Z' fill='white'/%3E%3Cpath d='M214 178H336V227H214V178Z' fill='white'/%3E%3Cpath d='M84 219H336V227H84V219Z' fill='white'/%3E%3Cpath d='M0 288H336V314H0V288Z' fill='white'/%3E%3Cpath d='M84 352H336V398H84V352Z' fill='white'/%3E%3Cpath d='M214 242H336V337H214V242Z' fill='white'/%3E%3Cpath d='M84 329H336V337H84V329Z' fill='white'/%3E%3Cpath d='M0 60H336V76H0V60Z' fill='%23F6F6F6'/%3E%3Cpath d='M0 60H15V178H0V60Z' fill='%23F6F6F6'/%3E%3Cpath d='M0 160H336V178H0V160Z' fill='%23F6F6F6'/%3E%3Cpath d='M99 91H336V99H99V91Z' fill='%23F6F6F6'/%3E%3Cpath d='M186 60H336V99H186V60Z' fill='%23F6F6F6'/%3E%3Cpath d='M99 60H114V178H99V60Z' fill='%23F6F6F6'/%3E%3Cpath d='M291 60H336V178H291V60Z' fill='%23F6F6F6'/%3E%3Cpath d='M99 114H336V178H99V114Z' fill='%23F6F6F6'/%3E%3C/svg%3E%0A",1,"cmp-di-search-page-placeholder__img","cmp-di-search-page-placeholder__img--mobile"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.nrm(1,"img",1)(2,"img",2),e.k0s())},styles:['[_nghost-%COMP%]{display:block}.cmp-di-search-page-placeholder[_ngcontent-%COMP%]{position:relative;overflow:hidden;background-color:#e0e0e0}[dir="rtl"][_nghost-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%]{transform:scaleX(-1)}[dir=rtl][_ngcontent-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%]{transform:scaleX(-1)}.cmp-di-search-page-placeholder__img[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;transform:scale(1.002)}@media screen and (max-width: 767px){.cmp-di-search-page-placeholder__img--desktop[_ngcontent-%COMP%]{display:none}}.cmp-di-search-page-placeholder__img--mobile[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 767px){.cmp-di-search-page-placeholder__img--mobile[_ngcontent-%COMP%]{display:block}}.cmp-di-search-page-placeholder[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0 0 0 50%;z-index:1;width:500%;margin-left:-250%;animation:_ngcontent-%COMP%_placeholderAnimation 1s linear infinite;background:linear-gradient(to right,#fff0 46%,#ffffff59,#fff0 54%) 50% 50%}[dir="rtl"][_nghost-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%]:before, [dir="rtl"]   [_nghost-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%]:before{margin-right:-250%;margin-left:0}[dir=rtl][_ngcontent-%COMP%]   .cmp-di-search-page-placeholder[_ngcontent-%COMP%]:before{margin-right:-250%;margin-left:0}@keyframes _ngcontent-%COMP%_placeholderAnimation{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}']})}return n})(),I=(()=>{class n{constructor(){this.translationMap=new Map}getTranslatedLabel(t){return this.translationMap.get(t)||this.getFallBackLabel(t)}getTranslatedLabelForHealthCheck(t){return this.translationMap.get(t)}getFallBackLabel(t){return se.get(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W=(()=>{class n{constructor(t){this.TRANSLATIONS=t,this.RESULTS_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Results),this.SHOWING_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Showing),this.OF_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Of),this.label="eqweqweqw"}ngOnInit(){}ngOnChanges(t){if(t.pagination&&t.pagination.currentValue&&Object.keys(t.pagination.currentValue).length>1){const i=t.pagination.currentValue,s=this.list?.length||0;let a=i.current;1!==a&&(a=10*(a-1)+1),this.label=`${this.SHOWING_LABEL} <strong>${a} - ${1===a?s:10*(i.current-1)+s}</strong> ${this.OF_LABEL} ${this.totalItems>100?`<strong>100+</strong> ${this.RESULTS_LABEL}`:`<strong>${this.totalItems}</strong> ${this.RESULTS_LABEL}`}`}}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-showing-label"]],inputs:{list:"list",totalItems:"totalItems",pagination:"pagination"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[[1,"cmp-di-search-list__found",3,"innerHTML"]],template:function(i,s){1&i&&e.nrm(0,"p",0),2&i&&e.Y8G("innerHTML",s.label,e.npT)},styles:['.extend-link[_ngcontent-%COMP%]{transition:none;color:#007cb0}@media print{.extend-link[_ngcontent-%COMP%]{color:#007cb0!important}}.extend-link[_ngcontent-%COMP%]:hover{text-decoration:underline;transition:none}.extend-link[_ngcontent-%COMP%]:visited{color:#609}.extend-break-word[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word}.extend-line[_ngcontent-%COMP%]:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}.cmp-di-search-list__found[_ngcontent-%COMP%]{font-size:1.125em;padding:0 0 20px;font-family:Adelle Sans Condensed,Calibri,sans-serif;border-bottom:1px solid #CCCCCC;font-weight:700;line-height:1.225em}@media screen and (max-width: 767px){.cmp-di-search-list__found[_ngcontent-%COMP%]{padding:.25em 0 1em}}.cmp-di-search-list__found[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}']})}return n})();var w=u(177);function he(n,o){if(1&n&&(e.j41(0,"div",0)(1,"a",4),e.nrm(2,"img",7),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("href",t.getProfileLink(t.item.email,t.item.url),e.B4B),e.R7$(),e.Y8G("src",t.item.image,e.B4B)("alt",t.item.title)}}function de(n,o){1&n&&e.nrm(0,"div",1)}function pe(n,o){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.item.contentType)}}function ge(n,o){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Lme("",t.trimMediatype(t.item.mediaLength)," ",t.READ_LABEL,"")}}let me=(()=>{class n{constructor(t){this.TRANSLATIONS=t,this.PROFILE_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Profile),this.READ_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.ReadTime)}trimDescription(t){return t&&t.length>500?t.substr(0,500)+"...":t}getProfileLink(t,i){return t&&t.length>0?window.profilePagePath+`.${this.trimEmail(t)}.html`:i}trimEmail(t){return t.substring(0,t.lastIndexOf("@"))}trimMediatype(t){return t.replace(/\D/g,"")}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-insight"]],inputs:{item:"item"},standalone:!0,features:[e.aNF],decls:12,vars:6,consts:[[1,"cmp-di-search-list__profile-figure"],[1,"cmp-di-search-list__profile-figure","cmp-di-search-list__figure--empty"],[1,"cmp-di-search-list__content","cmp-di-search-list__content-profile"],[1,"cmp-di-search-list__headline","cmp-di-search__headline"],[3,"href"],[1,"cmp-di-search-list__description","cmp-di-search-list__description-profile"],[1,"cmp-di-search-list__supplement"],["width","152","height","152",1,"cmp-di-search-list__profile-img",3,"src","alt"]],template:function(i,s){1&i&&(e.DNE(0,he,3,3,"div",0)(1,de,1,0,"div",1),e.j41(2,"div",2)(3,"h2",3)(4,"a",4),e.EFF(5),e.k0s()(),e.j41(6,"div",5),e.EFF(7),e.k0s(),e.j41(8,"div",6)(9,"ul"),e.DNE(10,pe,2,1,"li")(11,ge,2,2,"li"),e.k0s()()()),2&i&&(e.vxM(s.item.image?0:1),e.R7$(4),e.Y8G("href",s.getProfileLink(s.item.email,s.item.url),e.B4B),e.R7$(),e.JRh(s.item.title),e.R7$(2),e.JRh(s.trimDescription(s.item.description)),e.R7$(3),e.vxM(s.item.contentType?10:-1),e.R7$(),e.vxM(s.item.mediaLength?11:-1))},encapsulation:2})}return n})();var E=u(5254),P=u(9928),x=u(8728),_=u(5006),T=u(2039);let V=(()=>{class n{constructor(t){this.AR=t,this.satellite=window._satellite,this.maxRecursion=9,this.AR.queryParams.subscribe(i=>{this.searchedTerm=i[p.Query],this.facet=i[p.SearchFacet]?i[p.SearchFacet]:"all"})}searchTermFromDropDown(t){this.doSatelliteCall("dcomInternalSearchDown",{searchedTerm:t})}searchPage(){this.searchedTerm!==sessionStorage.getItem("qr")&&(console.log("Search Analytics call for results"),this.doSatelliteCall("dcomInternalSearchResultsPage",{searchedTerm:this.searchedTerm}),sessionStorage.setItem("qr",this.searchedTerm))}noResultFoundPage(){console.log("Search Analytics call for no results found"),this.doSatelliteCall("dcomInternalSearchNoResultsPage",{searchedTerm:this.searchedTerm})}doSatelliteCall(t,i){setTimeout(()=>{this.doSatelliteCallWhenReady(this.satellite,t,i)},500)}isEmpty(t){return"function"==typeof t&&/^function[^{]*[{]\s*[}]\s*$/.test(Function.prototype.toString.call(t))}doSatelliteCallWhenReady(t,i,s){this.satellite=window._satellite,this.satellite&&(this.isEmpty(this.satellite.track)?this.maxRecursion&&(this.maxRecursion--,setTimeout(()=>{this.doSatelliteCallWhenReady(this.satellite,i,s)},400)):this.satellite.track(i,s))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(T.nX))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j=(()=>{class n{constructor(t){this.WINDOW=t}noResultsPageToggle(t){if(t&&t.searchResults&&t.searchResults.length)document.querySelector(".di-no-searchresults-hidden .show-error-fragment").style.display="none";else{const i=document.querySelector(".di-no-searchresults-hidden .show-error-fragment");i&&(i.style.display="flex")}}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(y))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X=(()=>{class n{get searchResultItems$(){return this._searchResults$.asObservable().pipe((0,x.p)(t=>!!t))}get pagination$(){return this._pagination$.asObservable().pipe((0,x.p)(t=>!!t))}get currentPage$(){return this._currentPage.asObservable().pipe((0,x.p)(t=>!!t))}get pageNumbers$(){return this._pagination$.asObservable().pipe((0,x.p)(i=>!!i),(0,_.T)(i=>Array(i.total_pages).fill(1).map((s,a)=>s+a)))}get totalItems$(){return this._pagination$.asObservable().pipe((0,x.p)(t=>!!t),(0,_.T)(t=>t.total_results))}constructor(t,i,s,a){this.WINDOW=t,this.HTTP=i,this.ANALYTICS=s,this.UTILITY=a,this.elasticEngine=this.WINDOW.getDataValueByKey(h.EL_SEARCHENGINE),this.isModernSite=this.elasticEngine.includes("modern"),this.elasticHeaderDictionary={Authorization:"ApiKey "+this.WINDOW.getDataValueByKey(h.EL_SEARCHKEY)},this.loading$=new E.B7,this.elRequest=new E.B7,this._searchResults$=new P.t(null),this._pagination$=new P.t(null),this._currentPage=new P.t(null),this.facets=new P.t([]),this.insightsPageType=this.WINDOW.getDataValueByKey(h.SearchFacets),this.insightsPageTypeObj=this.insightsPageType,this.elRequest.subscribe(c=>{this.loadElasticSearchResult(c)})}loadElasticSearchResult(t){this.loading$.next(!0);const i={headers:new O.Lr(this.elasticHeaderDictionary)},s=t.getQuery();return this._currentPage.next(t.currentPage),this.HTTP.post(`${this.elasticEngine}/template`,s,i).pipe((0,_.T)(a=>this.mapSearchResultData(a,s))).subscribe(a=>{a&&a.searchResults&&a.searchResults.length?(this.ANALYTICS.searchPage(),this.UTILITY.noResultsPageToggle(a)):(this.ANALYTICS.noResultFoundPage(),this.UTILITY.noResultsPageToggle(a)),this._searchResults$.next(a.searchResults),this._pagination$.next(a.pagination),this.loading$.next(!1)})}mapSearchResultData(t,i){const s=i.params.from/i.params.size+1,a=i.params.size,c=t.hits.total.value,l=Math.ceil(c/a),m=[],C=this.isModernSite?"page-description":"description",b=this.isModernSite?"thumbnail-s7-reference":"thumbnail";return t.hits.hits.forEach(d=>{m.push(new G(d._source["page-type"]||null,d._source.title||null,d._source["promo-title"]||null,d._source[C]||d._source.biography||null,d._source.url||null,d._source[b]||null,d._source["sub-brand"]||null,d._source["content-type"]||null,d._source["media-length"]||null,d._source["date-published"]||null))}),new U(new L(a,s,c,l),m)}getMonthName(t,i=!1){const s=new Date(t);return i?["Jan,","Feb,","Mar,","Apr,","May,","June,","July,","Aug,","Sept,","Oct,","Nov,","Dec,"][s.getUTCMonth()]:["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][s.getUTCMonth()]}getFullYear(t){return new Date(t).getUTCFullYear().toString()}getDayName(t){return["Sun.","Mon.","Tue.","Wed.","Thur.","Fri.","Sat."][new Date(t).getUTCDay()]}getDate(t,i=!1){const s=new Date(t);return i?("0"+s.getUTCDate()).slice(-2):s.getUTCDate().toString()}getTime(t){const i=new Date(t);let s=i.getUTCHours(),a=i.getUTCMinutes().toString();const c=s>=12?"p.m.":"a.m.";return s%=12,s=s||12,a=Number(a)<10?`0${a}`:a.toString(),s+":"+a+" "+c}getPublishedDateFormatted(t,i){return`${this.getDayName(t)} | ${this.getDate(t)} ${this.getMonthName(t,!1)} ${this.getFullYear(t)} | ${this.getTime(t)} ${i}`}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(y),e.KVO(O.Qq),e.KVO(V),e.KVO(j))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ue(n,o){if(1&n&&(e.j41(0,"li"),e.nrm(1,"ds-is-insight",3),e.k0s()),2&n){const t=o.$implicit,i=e.XpG();e.R7$(),e.Y8G("ngClass",i.analyticsClass(t.metaScore))("item",t)}}let _e=(()=>{class n{constructor(t){this.IS_SEARCH=t}analyticsClass(t){return"BI-search\u2014result"}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(X))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-results-list"]],inputs:{list:"list",totalItems:"totalItems",pagination:"pagination"},standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[3,"list","pagination","totalItems"],["id","search-promo-1",1,"search-promo-1"],[1,"cmp-di-search-list"],[1,"cmp-di-search-list__item","cmp-di-search-results__profile",3,"ngClass","item"]],template:function(i,s){1&i&&(e.nrm(0,"ds-showing-label",0)(1,"div",1),e.j41(2,"ul",2),e.Z7z(3,ue,2,2,"li",null,e.fX1),e.k0s()),2&i&&(e.Y8G("list",s.list)("pagination",s.pagination)("totalItems",s.totalItems),e.R7$(3),e.Dyx(s.list))},dependencies:[W,me,w.YU],styles:['.extend-link{transition:none;color:#007cb0}@media print{.extend-link{color:#007cb0!important}}.extend-link:hover{text-decoration:underline;transition:none}.extend-link:visited{color:#609}.extend-break-word{word-wrap:break-word;word-break:break-word}.extend-line:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}@media screen and (max-width: 1023px){ds-showing-label{display:none}}.cmp-di-search-list{margin:0;list-style-type:none;padding:0}.cmp-di-search-list>li{margin-bottom:0}.cmp-di-search-list>li:last-child .cmp-di-search-list__item{border-bottom:none}.cmp-di-search-list-default{display:flex}.cmp-di-search-list__found{font-size:1em;padding:1em 0;margin:0}@media screen and (max-width: 767px){.cmp-di-search-list__found{padding:.25em 0 1em}}.cmp-di-search-list__found strong{font-weight:700}.cmp-di-search-list__item{display:flex;padding:1.25em 0;border-bottom:1px solid #CCCCCC}@media print{.cmp-di-search-list__item{clear:both;page-break-inside:avoid}}@media screen and (max-width: 1023px){.cmp-di-search-list__item{padding:1.5em 0}}.cmp-di-search-list__item--featured{padding:2em;margin-top:1.7em;background-color:#f6f6f5;border:none}@media print{.cmp-di-search-list__item--featured{border-bottom:1px solid #000;margin-top:0}}@media screen and (max-width: 1023px){.cmp-di-search-list__item--featured{padding:1.5em;margin-top:1.5em}}.cmp-di-search-list__item--featured .cmp-di-search-list__figure{width:100px;min-width:100px;height:100px;min-height:100px;margin-right:1.5em}:host-context([dir="rtl"]) .cmp-di-search-list__item--featured .cmp-di-search-list__figure{margin:0 0 0 1.5em}[dir=rtl] .cmp-di-search-list__item--featured .cmp-di-search-list__figure{margin:0 0 0 1.5em}@media print{.cmp-di-search-list__item--featured .cmp-di-search-list__figure{width:120px;min-width:120px;height:120px;min-height:120px;margin-right:2em}}@media print{.cmp-di-search-list__item--featured{background-color:transparent;padding:2em 0}}.cmp-di-search-list__figure{width:220px;min-width:220px;height:158px;min-height:158px;display:block;box-sizing:border-box;margin-right:2em;text-align:right}.cmp-di-search-list__figure--empty{height:auto;min-height:inherit}.cmp-di-search-list__figure--date{display:flex;justify-content:flex-end;line-height:1}.cmp-di-search-list__figure strong{display:block;font-weight:600;font-size:1.875em;line-height:1}.cmp-di-search-list__figure span{font-size:.75em}.cmp-di-search-list__figureSeparator{margin:0 4px;line-height:1;font-size:2em;font-weight:300}:host-context([dir="rtl"]) .cmp-di-search-list__figure{margin:0 0 0 2em;text-align:left}[dir=rtl] .cmp-di-search-list__figure{margin:0 0 0 2em;text-align:left}@media screen and (max-width: 1023px){.cmp-di-search-list__figure{width:208px;min-width:208px;height:149px;min-height:149px;margin-right:1.5em}}@media screen and (max-width: 767px){.cmp-di-search-list__figure{display:none}}.cmp-di-search-list__profile-figure{width:180px;min-width:180px;height:135px;min-height:135px;display:block;box-sizing:border-box;margin:0 1.25em 0 0;text-align:right;background-color:#ccc}.cmp-di-search-list__profile-figure a{display:block;height:inherit}.cmp-di-search-list__profile-figure--empty{height:auto;min-height:inherit}.cmp-di-search-list__profile-figure--date{display:flex;justify-content:flex-end;line-height:1}.cmp-di-search-list__profile-figure strong{display:block;font-weight:600;font-size:1.875em;line-height:1}.cmp-di-search-list__profile-figure span{font-size:.75em}.cmp-di-search-list__profile-figureSeparator{margin:0 4px;line-height:1;font-size:2em;font-weight:300}:host-context([dir="rtl"]) .cmp-di-search-list__profile-figure{margin:0 0 0 2em;text-align:left}[dir=rtl] .cmp-di-search-list__profile-figure{margin:0 0 0 2em;text-align:left}@media screen and (max-width: 1023px){.cmp-di-search-list__profile-figure{width:152px;min-width:152px;height:152px;min-height:152px;margin:0 50px 0 30px}}@media screen and (max-width: 767px){.cmp-di-search-list__profile-figure{display:none}}.cmp-di-search-list__content{width:100%}.cmp-di-search-list__img,.cmp-di-search-list__profile-img{border:1px solid #D0D0CE;width:100%;height:100%!important;object-fit:cover;max-height:100%;overflow:hidden}.cmp-di-search-list__top{display:flex;justify-content:flex-start;margin-bottom:8px}@media screen and (max-width: 767px){.cmp-di-search-list__top{margin-bottom:.5em}}.cmp-di-search-list__type{display:block;color:#595959;font-size:.813em}@media print{.cmp-di-search-list__type{color:#53565a!important}}.cmp-di-search-list__type--insights{background-color:#000;padding:0 8px;font-size:.75em;line-height:1.75em;color:#fff;font-weight:400}.cmp-di-search-list__type--tag{background-color:#000;padding:0 8px;font-size:.75em;line-height:1.75em;color:#fff;font-weight:400;margin-right:12px}.cmp-di-search-list__date{display:flex;align-items:center;font-size:.813em;color:#595959;letter-spacing:-.14px}.cmp-di-search-list__headline{font-weight:700;font-family:Adelle Sans Condensed,Calibri,sans-serif;font-size:1.125em;padding-bottom:0;margin-bottom:10px}@media screen and (max-width: 767px){.cmp-di-search-list__headline{font-size:16px}}.cmp-di-search-list__headline a{line-height:1.225em;color:#26890d;font-weight:700}.cmp-di-search-list__headline a:hover{text-decoration:underline}.cmp-di-search-list__headline a:visited{color:#26890d}.cmp-di-search-list__description{font-family:Sabon LT Pro,Calibri,sans-serif;position:relative;font-size:1.125em;margin-bottom:8px;font-style:italic;color:#1f1f1f;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.cmp-di-search-list__description:last-child{margin-bottom:0}.cmp-di-search-list__description p:last-child,.cmp-di-search-list__description li:last-child{margin-bottom:0}.cmp-di-search-list__description-profile{-webkit-line-clamp:3}@media screen and (max-width: 1023px){.cmp-di-search-list__description-profile{-webkit-line-clamp:2}}@media screen and (max-width: 767px){.cmp-di-search-list__description-profile{-webkit-line-clamp:3}}.cmp-di-search-list__supplement{color:#707070}.cmp-di-search-list__supplement ul{display:inline-flex;padding:0}.cmp-di-search-list__supplement ul li{list-style-type:disc;font-size:12px;margin:0 10px 0 0}.cmp-di-search-list__supplement ul li:nth-child(1){list-style-type:none}.cmp-di-search-list__supplement ul li:nth-child(2){text-transform:uppercase;margin-left:15px}.cmp-di-search-list__contact{font-size:.875em}.cmp-di-search-list__contact span.icon-phone-o{margin-right:15px}.cmp-di-search-list__contact a{color:#26890d;margin-left:5px;font-weight:700}.cmp-di-search-list__link{transition:none;color:#007cb0}@media print{.cmp-di-search-list__link{color:#007cb0!important}}.cmp-di-search-list__link:hover{text-decoration:underline;transition:none}.cmp-di-search-list__link:visited{color:#609}.cmp-di-search-list__buttons{display:flex;margin-top:.75em;flex-wrap:wrap}.cmp-di-search-list__button{transition:none;color:#007cb0;word-wrap:break-word;word-break:break-word;display:flex;align-items:center;border-right:1px solid #D0D0CE;margin:0 1em 6px 0;padding-right:1em;cursor:pointer;font-size:.875em;line-height:1.2;font-weight:600}@media print{.cmp-di-search-list__button{color:#007cb0!important}}.cmp-di-search-list__button:hover{text-decoration:underline;transition:none}.cmp-di-search-list__button:visited{color:#609}:host-context([dir="rtl"]) .cmp-di-search-list__button{margin:0 0 0 1em;padding:0 0 0 1em;border-right:none;border-left:1px solid #D0D0CE}[dir=rtl] .cmp-di-search-list__button{margin:0 0 0 1em;padding:0 0 0 1em;border-right:none;border-left:1px solid #D0D0CE}.cmp-di-search-list__button i{margin-left:6px;font-size:.75em;color:#53565a}:host-context([dir="rtl"]) .cmp-di-search-list__button i{margin:0 6px 0 0}[dir=rtl] .cmp-di-search-list__button i{margin:0 6px 0 0}@media print{.cmp-di-search-list__button i{color:#53565a!important}}.cmp-di-search-list__button:last-child{border-right:none}:host-context([dir="rtl"]) .cmp-di-search-list__button:last-child{border-left:none}[dir=rtl] .cmp-di-search-list__button:last-child{border-left:none}\n'],encapsulation:2,changeDetection:0})}return n})();function fe(n,o){if(1&n&&(e.j41(0,"span",2),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.CURRENT_PAGE_LABEL," ")}}function Ce(n,o){if(1&n&&(e.j41(0,"span",2),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t.VIEW_PAGE_LABEL)}}function be(n,o){if(1&n){const t=e.RV6();e.j41(0,"li")(1,"button",1),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.onPageChange(s))}),e.DNE(2,fe,2,1,"span",2)(3,Ce,2,1,"span",2),e.EFF(4),e.k0s()()}if(2&n){const t=o.$implicit,i=e.XpG(2);e.R7$(),e.AVh("cmp-di-search-pagination__item--active",i.isCurrentPage(t)),e.BMQ("aria-label",i.getPageAriaLabel(t))("aria-current",i.isCurrentPage(t)?"page":null),e.R7$(),e.vxM(i.isCurrentPage(t)?2:3),e.R7$(2),e.SpI(" ",t," ")}}function xe(n,o){if(1&n&&(e.j41(0,"nav",0)(1,"ul"),e.Z7z(2,be,5,6,"li",null,e.fX1),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Dyx(t.pageNumbers)}}let Se=(()=>{class n{constructor(t){this.TRANSLATIONS=t,this.pageChange=new e.bkB,this.CURRENT_PAGE_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.CurrentPage),this.VIEW_PAGE_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.ViewPage),this.RESULTS_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Results),this.SHOWING_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Showing),this.OF_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.Of)}onPageChange(t){window.scroll(0,0),this.pageChange.emit(t)}ngOnChanges(t){t.currentPage&&null===t.currentPage.currentValue&&(this.currentPage=1),t.pageNumbers&&t.pageNumbers.currentValue&&this.pageNumbers.length>10&&(this.pageNumbers.length=10)}isCurrentPage(t){return this.currentPage===t}getPageAriaLabel(t){const i=this.isCurrentPage(t)?`${this.CURRENT_PAGE_LABEL} ${t}`:`${this.VIEW_PAGE_LABEL} ${t}`;if(!this.totalItems)return i;const s=1===t?1:10*(t-1)+1,a=Math.min(10*t,this.totalItems);return`${i}, ${this.SHOWING_LABEL} ${s} - ${a} ${this.OF_LABEL} ${this.totalItems>100?`100+ ${this.RESULTS_LABEL}`:`${this.totalItems} ${this.RESULTS_LABEL}`}`}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-pagination"]],inputs:{pageNumbers:"pageNumbers",currentPage:"currentPage",totalItems:"totalItems"},outputs:{pageChange:"pageChange"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[["role","navigation","id","cmp-di-search-pagination",1,"cmp-di-search-pagination"],["type","button",1,"cmp-di-search-pagination__item",3,"click"],[1,"audible"]],template:function(i,s){1&i&&e.DNE(0,xe,4,0,"nav",0),2&i&&e.vxM(s.pageNumbers?0:-1)},styles:[".cmp-di-search-pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:24px;border-top:1px solid #D0D0CE}.cmp-di-search-pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;list-style-type:none;padding-left:0}.cmp-di-search-pagination__item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:30px;height:30px;font-size:1.125em;border-radius:100%;padding:0 4px;font-weight:700;color:#1f1f1f;border:none;margin-right:4px;background-color:transparent;cursor:pointer}@media print{.cmp-di-search-pagination__item[_ngcontent-%COMP%]{color:#007cb0!important;border-radius:3px!important}}@media screen and (max-width: 360px){.cmp-di-search-pagination__item[_ngcontent-%COMP%]{min-width:26px;height:26px}}@media screen and (max-width: 767px){.cmp-di-search-pagination__item[_ngcontent-%COMP%]{min-width:28px;height:28px;margin-right:0}}.cmp-di-search-pagination__item--active[_ngcontent-%COMP%]{background-color:#86bc25;color:#1f1f1f;cursor:default;font-size:1.125em}@media print{.cmp-di-search-pagination__item--active[_ngcontent-%COMP%]{background:#007cb0!important;color:#fff!important}}.cmp-di-search-pagination__item[_ngcontent-%COMP%]:hover{text-decoration:underline}.cmp-di-search-pagination__item[_ngcontent-%COMP%]:focus{outline:3px solid #ffffff;box-shadow:0 0 0 3px #012169}@media screen and (max-width: 1023px){.cmp-di-search-pagination[_ngcontent-%COMP%]{justify-content:center}}"]})}return n})(),ye=(()=>{class n{constructor(t,i){this.AR=t,this.WINDOW=i}subscribeOnUrlParams(){return this.AR.queryParams.pipe((0,x.p)(t=>{if(!this.checkUrlParams(t)){if("search results page"===this.WINDOW.getDataValueByKey(h.sc_template)){const s=document.querySelector(".cmp-hidden");s&&(s.style.display="block")}return!1}return!0}))}checkUrlParams(t){return!!Object.keys(t).length&&void 0!==t[p.Query]}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(T.nX),e.KVO(y))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class we{constructor(o,t=10){this.current=o,this.size=t,this.size=t,this.current=o}}class Y{constructor(o,t){this.preconfiguredFacets=o,this.suggestedValues=t}}class Oe{constructor(o){this.query=o,this.types={documents:{fields:[]}},this.types.documents.fields=["title","key","desc"],this.size=5}}class Z{constructor(o,t){this.key=o,this.value=t,this.key=o,this.value=t}}let Te=(()=>{class n{constructor(){this.facets=new E.B7}get facets$(){return this.facets.asObservable()}setValue(t){this.facets.next(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),q=(()=>{class n{constructor(t,i,s,a){this.HTTP=t,this.WINDOW=i,this.AR=s,this.LEFT_FACET=a,this.elasticEngine=this.WINDOW.getDataValueByKey(h.EL_SEARCHENGINE),this.isModernSite=this.elasticEngine.includes("modern"),this.elasticHeaderDictionary={Authorization:"ApiKey "+this.WINDOW.getDataValueByKey(h.EL_SEARCHKEY)}}getElasticSearchResult(t){const i={headers:new O.Lr(this.elasticHeaderDictionary)},a={id:this.isModernSite?"modern-insights-internal-search-template":"dcom-internal-search-template",params:{"query-string":t.qr,from:0,size:10,"site-name":this.WINDOW.getDataValueByKey(h.Country),language:this.WINDOW.getDataValueByKey(h.Language)}};return this.HTTP.post(`${this.elasticEngine}/_search/template`,a,i).pipe((0,_.T)(c=>{this.WINDOW.getDataValueByKey(h.InternalFacets),c.aggregations.PageTypes.buckets.map(S=>S.key);const C=a.params.from,b=a.params.size,d=c.hits.total.value,M=Math.ceil(d/b),v=[];return c.hits.hits.forEach(S=>{v.push(new G(S._source["page-type"]||null,S._source.title||null,S._source.description||S._source.biography||null,S._source.url||null,S._source["thumbnail-s7-reference"]||null))}),new U(new L(b,C,d,M),v)}))}getElasticSuggestion(t){const i={headers:new O.Lr(this.elasticHeaderDictionary)};let s={};return s=this.isModernSite?{id:"modern-auto-suggester-search-template",params:{prefix:t.query,"site-name":this.WINDOW.getDataValueByKey(h.Country),language:this.WINDOW.getDataValueByKey(h.Language)}}:{id:"dcom-auto-suggester-search-template",params:{prefix:t.query,"country-code":this.WINDOW.getDataValueByKey(h.Country),"country-lang":this.WINDOW.getDataValueByKey(h.Language)}},this.HTTP.post(`${this.elasticEngine}/template`,s,i).pipe((0,_.T)(a=>{let l=[];return a&&a.hits&&a.hits.hits.length&&(l=a.hits.hits.map(m=>m._source["suggest-title"])),new Y(null,l)}))}getSuggestion(t){const i={Authorization:"Bearer "+this.WINDOW.getDataValueByKey(h.SEARCHKEY)},s={headers:new O.Lr(i)},a={query:t.query,types:{documents:{fields:["title","employeetitle"]}},size:5};return this.HTTP.post(this.WINDOW.getDataValueByKey(h.SEARCHENGINE)+"/query_suggestion",a,s).pipe((0,_.T)(c=>{const m=c.results.documents.map(C=>C.suggestion);return new Y(null,m)}))}getPrebuiltFacet(){return this.HTTP.get("").pipe((0,_.T)(t=>t.map(i=>new Z(i.key,i.value))))}generateLeftSideFacets(t,i){const s=[];return t.forEach(a=>{const c=a.label_with_op.split("|");1===c.length&&i.includes(a.label_with_op)&&s.push(a);let l=!1;c.length>1&&c.forEach(m=>{!l&&i.includes(m)&&(s.push(a),l=!0)})}),sessionStorage.setItem(F,JSON.stringify(s)),s}getLeftSideFacets(t,i,s,a){let c=[];const l=JSON.parse(sessionStorage.getItem(F)),m={};if(!l){this.bufferedResponse=a;const C=this.WINDOW.getDataValueByKey(h.InternalFacets).map(d=>d.label_with_op),b=[];C.forEach(d=>{d.split("|").forEach(v=>{b.push(v)})}),m.all=[{pagetype:[...b]},{countrycode:this.WINDOW.getDataValueByKey(h.Country)}],s.filters=m}l?c=l:t.forEach(C=>{i.includes(C.label_with_op)&&c.push(C)}),this.LEFT_FACET.setValue(c)}getMonthName(t,i=!1){const s=new Date(t);return i?["Jan,","Feb,","Mar,","Apr,","May,","June,","July,","Aug,","Sept,","Oct,","Nov,","Dec,"][s.getUTCMonth()]:["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][s.getUTCMonth()]}getFullYear(t){return new Date(t).getUTCFullYear().toString()}getDayName(t){return["Sun.","Mon.","Tue.","Wed.","Thur.","Fri.","Sat."][new Date(t).getUTCDay()]}getDate(t,i=!1){const s=new Date(t);return i?("0"+s.getUTCDate()).slice(-2):s.getUTCDate().toString()}getTime(t){const i=new Date(t);let s=i.getUTCHours(),a=i.getUTCMinutes().toString();const c=s>=12?"p.m.":"a.m.";return s%=12,s=s||12,a=Number(a)<10?`0${a}`:a.toString(),s+":"+a+" "+c}getPublishedDateFormatted(t,i){return`${this.getDayName(t)} | ${this.getDate(t)} ${this.getMonthName(t,!1)} ${this.getFullYear(t)} | ${this.getTime(t)} ${i}`}getPrebuiltFacetMock(){return this.HTTP.get("http://localhost:3000/prebuiltFacets",{}).pipe((0,_.T)(t=>t.map(i=>new Z(i.key,i.value))))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(O.Qq),e.KVO(y),e.KVO(T.nX),e.KVO(Te))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pe=(()=>{class n{constructor(t,i,s,a){this.HTTP=t,this.ANALYTICS=i,this.WINDOW=s,this.UTILITY=a,this.loading$=new E.B7,this.searchResults$=new P.t(null)}loadElasticSearchResult(t){this.loading$.next(!0),this.HTTP.getElasticSearchResult(t).subscribe(i=>{this.searchResults$.next(i),this.loading$.next(!1),i&&i.searchResults&&i.searchResults.length?(this.ANALYTICS.searchPage(),this.WINDOW.updatePageTemplate(window,"search results page"),this.UTILITY.noResultsPageToggle(i)):(this.WINDOW.updatePageTemplate(window,"no search results page"),this.UTILITY.noResultsPageToggle(i))})}get searchResultItems$(){return this.searchResults$.asObservable().pipe((0,x.p)(t=>!!t),(0,_.T)(t=>t.searchResults))}get totalItems$(){return this.searchResults$.asObservable().pipe((0,x.p)(t=>!!t),(0,_.T)(t=>t.pagination.total_results))}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(q),e.KVO(V),e.KVO(y),e.KVO(j))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H=(()=>{class n{constructor(t,i,s){this.AR=t,this.SEARCH_RESULT=i,this.WINDOW=s,this.isAllResultsTriggered=!1,this.searchParams={Facet:null,pageNum:null,searchTerm:null}}subscribeOnUrlSearchParams(){this.AR.queryParams.subscribe(t=>{0!==Object.keys(t).length&&(void 0!==t[p.Query]?(new we(Number.parseInt(t[p.CurrentPage],10)||1,10),this.updateSearchParamsinDataLayer()):"search results page"===this.WINDOW.getDataValueByKey(h.sc_template)&&(document.querySelector(".cmp-hidden").style.display="block"))})}get searchByLabel$(){return this.AR.queryParams.pipe((0,_.T)(t=>t[p.Query]),(0,x.p)(t=>!!t))}get currentPage$(){return this.AR.queryParams.pipe((0,_.T)(t=>t[p.CurrentPage]),(0,x.p)(t=>!!t),(0,_.T)(t=>Number.parseInt(t,10)))}get activePageFacet$(){return this.AR.queryParams.pipe((0,_.T)(t=>t[p.SearchFacet]))}updateSearchParamsinDataLayer(){this.AR.queryParams.subscribe(t=>{this.searchParams.Facet=t[p.SearchFacet]?t[p.SearchFacet]:"all",this.searchParams.pageNum=t[p.CurrentPage]?t[p.CurrentPage]:1,this.searchParams.searchTerm=t[p.Query]}),this.WINDOW.updateSearchDataLayer(window,this.searchParams)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(T.nX),e.KVO(Pe),e.KVO(y))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K=(()=>{class n{constructor(t,i){this.WINDOW=t,this.TRANSLATION=i}doHealthCheck(){this.doHealthCheckForAdditionalData(),this.doHealthCheckForTranslationData(),this.doAnalyticHealthCheck()}doHealthCheckForAdditionalData(){Object.values(h).forEach(t=>{this.WINDOW.getDataValueByKey(t)||console.log(`Additional data health check failed! Property ${t} is missing`)})}doHealthCheckForTranslationData(){Object.values(r).forEach(t=>{this.TRANSLATION.getTranslatedLabelForHealthCheck(t)})}doAnalyticHealthCheck(){window._satellite||console.log("The analytic isn't enabled. Please check that _satellite function exists.")}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(y),e.KVO(I))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Me(n,o){if(1&n&&(e.j41(0,"h1",3),e.EFF(1),e.j41(2,"strong"),e.EFF(3),e.nI1(4,"async"),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.RESULTS_FOR_LABEL," "),e.R7$(2),e.SpI("\u201c",e.bMT(4,2,t.searchByLabel$),"\u201d")}}function ve(n,o){1&n&&(e.j41(0,"div",4)(1,"div",6),e.nrm(2,"ds-search-placeholder"),e.k0s()())}function Re(n,o){if(1&n){const t=e.RV6();e.nrm(0,"ds-showing-label",7),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.j41(4,"div",8)(5,"div",9)(6,"div",10),e.nrm(7,"ds-is-results-list",7),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.j41(11,"ds-is-pagination",11),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("pageChange",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onPageChange(s))}),e.k0s()()()()}if(2&n){const t=e.XpG(2);e.Y8G("list",e.bMT(1,9,t.searchResultItems$))("pagination",e.bMT(2,11,t.pagination$))("totalItems",e.bMT(3,13,t.totalItems$)),e.R7$(7),e.Y8G("list",e.bMT(8,15,t.searchResultItems$))("pagination",e.bMT(9,17,t.pagination$))("totalItems",e.bMT(10,19,t.totalItems$)),e.R7$(4),e.Y8G("pageNumbers",e.bMT(12,21,t.pageNumbers$))("currentPage",e.bMT(13,23,t.currentPage$))("totalItems",e.bMT(14,25,t.totalItems$))}}function Ee(n,o){if(1&n&&(e.j41(0,"div",4),e.DNE(1,Re,15,27),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.vxM(e.bMT(2,1,t.totalItems$)>0?1:-1)}}function Ae(n,o){if(1&n){const t=e.RV6();e.nrm(0,"ds-showing-label",7),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.j41(4,"div",8)(5,"div",9)(6,"div",10),e.nrm(7,"ds-is-results-list",7),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.j41(11,"ds-is-pagination",11),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("pageChange",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onPageChange(s))}),e.k0s()()()()}if(2&n){const t=e.XpG(2);e.Y8G("list",e.bMT(1,9,t.searchResultItems$))("pagination",e.bMT(2,11,t.pagination$))("totalItems",e.bMT(3,13,t.totalItems$)),e.R7$(7),e.Y8G("list",e.bMT(8,15,t.searchResultItems$))("pagination",e.bMT(9,17,t.pagination$))("totalItems",e.bMT(10,19,t.totalItems$)),e.R7$(4),e.Y8G("pageNumbers",e.bMT(12,21,t.pageNumbers$))("currentPage",e.bMT(13,23,t.currentPage$))("totalItems",e.bMT(14,25,t.totalItems$))}}function Ne(n,o){if(1&n&&(e.j41(0,"div",4),e.DNE(1,Ae,15,27),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.vxM(e.bMT(2,1,t.totalItems$)>0?1:-1)}}let Q=(()=>{class n{constructor(t,i,s,a,c,l){this.IS_URL_PARSER=t,this.IS_SEARCH=i,this.URL_PARSER=s,this.ROUTER=a,this.TRANSLATIONS=c,this.HEALTH_CHECK=l,this.pageNumbers$=this.IS_SEARCH.pageNumbers$,this.currentPage$=this.IS_SEARCH.currentPage$,this.searchResultItems$=this.IS_SEARCH.searchResultItems$,this.pagination$=this.IS_SEARCH.pagination$,this.totalItems$=this.IS_SEARCH.totalItems$,this.searchByLabel$=this.URL_PARSER.searchByLabel$,this.loading$=this.IS_SEARCH.loading$,this.RESULTS_FOR_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.ResultsFor),this.OPEN_IN_NEW_WINDOW=this.TRANSLATIONS.getTranslatedLabel(r.OpenInNewWindow),sessionStorage.removeItem(F)}ngOnInit(){this.IS_URL_PARSER.subscribeOnUrlParams().subscribe(t=>{this.IS_SEARCH.elRequest.next(new ce(t))}),this.URL_PARSER.subscribeOnUrlSearchParams(),this.HEALTH_CHECK.doHealthCheck()}onPageChange(t){this.ROUTER.navigate([],{queryParams:{[p.CurrentPage]:t},queryParamsHandling:"merge"})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ye),e.rXU(X),e.rXU(H),e.rXU(T.Ix),e.rXU(I),e.rXU(K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-search"]],standalone:!0,features:[e.aNF],decls:14,vars:15,consts:[["content",""],["id","cmp-di-search-page","role","main",1,"cmp-is-search-page"],[1,"aem-Grid","aem-Grid--1"],[1,"cmp-is-search-page__title","aem-GridColumn--default--1"],[1,"aem-Grid","aem-Grid--10"],["id","new-window-label",1,"audible"],[1,"cmp-is-search-page__placeholder","aem-GridColumn","aem-GridColumn--default--10"],[3,"list","pagination","totalItems"],[1,"cmp-is-search-page__content-wrapper"],[1,"cmp-is-search-page__content","aem-GridColumn--default--12"],[1,"cmp-is-search-page__search"],[3,"pageChange","pageNumbers","currentPage","totalItems"]],template:function(i,s){1&i&&(e.j41(0,"div",1),e.nI1(1,"async"),e.nI1(2,"async"),e.j41(3,"div",2),e.DNE(4,Me,5,4,"h1",3),e.nI1(5,"async"),e.nI1(6,"async"),e.k0s(),e.DNE(7,ve,3,0,"div",4),e.nI1(8,"async"),e.DNE(9,Ee,3,3,"div",4)(10,Ne,3,3,"ng-template",null,0,e.C5r),e.j41(12,"span",5),e.EFF(13),e.k0s()()),2&i&&(e.AVh("padding-0",!(e.bMT(1,5,s.loading$)||e.bMT(2,7,s.totalItems$)>0)),e.R7$(4),e.vxM(e.bMT(5,9,s.loading$)||e.bMT(6,11,s.totalItems$)>0?4:-1),e.R7$(3),e.vxM(e.bMT(8,13,s.loading$)?7:9),e.R7$(6),e.JRh(s.OPEN_IN_NEW_WINDOW))},dependencies:[le,W,_e,Se,w.Jj],styles:['.extend-link[_ngcontent-%COMP%]{transition:none;color:#007cb0}@media print{.extend-link[_ngcontent-%COMP%]{color:#007cb0!important}}.extend-link[_ngcontent-%COMP%]:hover{text-decoration:underline;transition:none}.extend-link[_ngcontent-%COMP%]:visited{color:#609}.extend-break-word[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word}.extend-line[_ngcontent-%COMP%]:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}ds-showing-label[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 1023px){ds-showing-label[_ngcontent-%COMP%]{display:block}}.cmp-is-search-page[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto 1%;background:#fff;padding:2.5em 1.75em 0 1.5625em;font-size:16px}@media print{.cmp-is-search-page[_ngcontent-%COMP%]{padding:0}}[dir="rtl"][_nghost-%COMP%]   .cmp-is-search-page[_ngcontent-%COMP%]     .audible, [dir="rtl"]   [_nghost-%COMP%]   .cmp-is-search-page[_ngcontent-%COMP%]     .audible{left:auto}[dir=rtl][_ngcontent-%COMP%]   .cmp-is-search-page[_ngcontent-%COMP%]     .audible{left:auto}@media screen and (max-width: 1023px){.cmp-is-search-page[_ngcontent-%COMP%]{padding:30px 20px 0}}@media screen and (max-width: 767px){.cmp-is-search-page[_ngcontent-%COMP%]{padding:0 20px;margin:0 auto 10px}}.cmp-is-search-page__heading[_ngcontent-%COMP%]{margin-top:40px}.cmp-is-search-page__title[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word;font-weight:900;font-family:Adelle Sans Condensed,Calibri,sans-serif;font-size:2.625rem;line-height:1.05em;padding:0 0 0 .5em;color:#1f1f1f;margin-bottom:.478125em}.cmp-is-search-page__title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}@media screen and (max-width: 767px){.cmp-is-search-page__title[_ngcontent-%COMP%]{font-size:1.9em;line-height:1.06em;margin-top:24px}}@media screen and (max-width: 1023px){.cmp-is-search-page__title[_ngcontent-%COMP%]{font-size:1.9em}}@media screen and (max-width: 767px){.cmp-is-search-page__title[_ngcontent-%COMP%]{margin-bottom:20px;padding:0}}.cmp-is-search-page__placeholder[_ngcontent-%COMP%]{padding-bottom:40px}@media screen and (max-width: 1023px){.cmp-is-search-page__placeholder[_ngcontent-%COMP%]{padding-bottom:30px}}@media screen and (max-width: 767px){.cmp-is-search-page__placeholder[_ngcontent-%COMP%]{padding:0 0 20px}}.cmp-is-search-page__facets[_ngcontent-%COMP%]{min-width:260px;padding:0 20px}@media print{.cmp-is-search-page__facets[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 1023px){.cmp-is-search-page__facets[_ngcontent-%COMP%]{min-width:100%;position:sticky;top:0;padding:0}}.cmp-is-search-page__content[_ngcontent-%COMP%]{flex-grow:1}.cmp-is-search-page__content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media screen and (max-width: 1023px){.cmp-is-search-page__content-wrapper[_ngcontent-%COMP%]{flex-direction:column}}@media print{.cmp-is-search-page__content[_ngcontent-%COMP%]{min-width:100%}}@media screen and (max-width: 1023px){.cmp-is-search-page__content[_ngcontent-%COMP%]{min-width:100%;padding:0 0 20px}}.cmp-is-search-page__content--center[_ngcontent-%COMP%]{text-align:center}.cmp-is-search-page__search[_ngcontent-%COMP%]{display:block;padding-left:1.5625em}[dir="rtl"][_nghost-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%]{padding:0 1em 0 0}@media screen and (max-width: 767px){[dir="rtl"][_nghost-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%]{padding-right:0}}[dir=rtl][_ngcontent-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%]{padding:0 1em 0 0}@media screen and (max-width: 767px){[dir=rtl][_ngcontent-%COMP%]   .cmp-is-search-page__search[_ngcontent-%COMP%]{padding-right:0}}@media print{.cmp-is-search-page__search[_ngcontent-%COMP%]{padding:0}}@media screen and (max-width: 1023px){.cmp-is-search-page__search[_ngcontent-%COMP%]{padding-left:2.2em}}@media screen and (max-width: 767px){.cmp-is-search-page__search[_ngcontent-%COMP%]{padding-left:0}}.cmp-is-search-page[_ngcontent-%COMP%]   .aem-Grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.padding-0[_ngcontent-%COMP%]{padding:0!important}']})}return n})();var f=u(8326),J=u(7605),ke=u(3383),Le=u(3586);let Fe=(()=>{class n{transform(t,i){if(i&&t){const s=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").split(" ").filter(c=>c.length>0).join("|"),a=new RegExp(s,"gi");return t.replace(a,c=>`<span class="ds-highlight">${c}</span>`)}return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"highlight",type:n,pure:!0,standalone:!0})}return n})();function Ve(n,o){if(1&n){const t=e.RV6();e.j41(0,"li",1)(1,"a",2),e.nI1(2,"highlight"),e.bIt("mouseenter",function(){const s=e.eBV(t).$index,a=e.XpG();return e.Njj(a.onSuggestionFocus(s))})("click",function(){const s=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onSelectSuggestion(s))}),e.k0s()()}if(2&n){const t=o.$implicit,i=o.$index,s=e.XpG();e.R7$(),e.AVh("active",s.activeSuggestionIndex===i),e.FS9("title",t),e.Y8G("innerHTML",e.i5U(2,5,t,s.searchTerm),e.npT),e.BMQ("aria-label",t)}}let He=(()=>{class n{constructor(t){this.TRANSLATIONS=t,this.selectSuggestion=new e.bkB,this.focusSuggestion=new e.bkB,this.SEARCH_SUGGESTION_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.SearchSuggestion)}get search_suggestion(){return this.SEARCH_SUGGESTION_LABEL}onSelectSuggestion(t){this.selectSuggestion.emit(t)}onSuggestionFocus(t){this.focusSuggestion.emit(t)}onClickOutside(){this.suggestions=[]}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-suggestions"]],inputs:{suggestions:"suggestions",activeSuggestionIndex:"activeSuggestionIndex",searchTerm:"searchTerm"},outputs:{selectSuggestion:"selectSuggestion",focusSuggestion:"focusSuggestion"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["role","listbox",1,"cmp-advanced-search-suggestion"],["role","option",1,"cmp-advanced-search-suggestion__item"],[1,"cmp-advanced-search-suggestion__link",3,"mouseenter","click","title","innerHTML"]],template:function(i,s){1&i&&(e.j41(0,"ul",0),e.Z7z(1,Ve,3,8,"li",1,e.fX1),e.k0s()),2&i&&(e.BMQ("aria-label",s.search_suggestion),e.R7$(),e.Dyx(s.suggestions))},dependencies:[Fe],styles:['.extend-link[_ngcontent-%COMP%]{transition:none;color:#007cb0}@media print{.extend-link[_ngcontent-%COMP%]{color:#007cb0!important}}.extend-link[_ngcontent-%COMP%]:hover{text-decoration:underline;transition:none}.extend-link[_ngcontent-%COMP%]:visited{color:#609}.extend-break-word[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word}.extend-line[_ngcontent-%COMP%]:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}.cmp-advanced-search-suggestion[_ngcontent-%COMP%]{margin:0;padding:0}.cmp-advanced-search-suggestion__item[_ngcontent-%COMP%]{font-size:1em;margin:0 0 .5em;list-style-type:none}.cmp-advanced-search-suggestion__link[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word;display:block;padding:.25em .6em;font-size:1.125em;color:#000;transition:none;box-sizing:border-box;cursor:pointer}.cmp-advanced-search-suggestion__link[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.cmp-advanced-search-suggestion__link[_ngcontent-%COMP%]:hover, .cmp-advanced-search-suggestion__link.active[_ngcontent-%COMP%]{background-color:#f8f8f8;color:#26890d}.cmp-advanced-search-suggestion__link[_ngcontent-%COMP%]:focus{outline:3px solid #ffffff;box-shadow:0 0 0 3px #012169}']})}return n})();class De{constructor(){this.onClosed$=new e.bkB}onClosed(){return this.onClosed$}emitCloseEvent(o){this.onClosed$.next(o),this.onClosed$.complete()}}let ee=(()=>{class n{constructor(t,i,s,a,c){this.componentFactoryResolver=t,this.appRef=i,this.injector=s,this.rendererFactory=a,this.document=c,this.render=a.createRenderer(null,null)}open(t){this.searchModalRef=new De,this.componentRef=this.componentFactoryResolver.resolveComponentFactory(t).create(this.injector);const i=this.componentRef.hostView.rootNodes[0];return this.appRef.attachView(this.componentRef.hostView),this.render.appendChild(this.document.body,i),this.render.setAttribute(i,"role","dialog"),this.render.setAttribute(i,"aria-modal","true"),i.focus(),this.searchModalRef.componentInstance=this.componentRef.instance,this.searchModalRef}close(t){this.searchModalRef.emitCloseEvent(t),this.remove(this.componentRef)}remove(t){const i=t.hostView.rootNodes[0];i.classList.remove("is-search-overlay"),setTimeout(()=>{try{this.render.removeChild(this.document.body,i)}catch{}this.appRef.detachView(t.hostView),t.destroy()},300)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(e.OM3),e.KVO(e.o8S),e.KVO(e.zZn),e.KVO(e._9s),e.KVO(w.qQ))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),te=(()=>{class n{constructor(t){this.HTTP=t,this.currentQuery="",this.searchBarResults$=new P.t(null)}getElasticSuggestion(t){this.HTTP.getElasticSuggestion(t).subscribe(i=>this.searchBarResults$.next(i))}getSuggestion(t){this.HTTP.getSuggestion(t).subscribe(i=>this.searchBarResults$.next(i))}getPrebuiltFacets(){return this.HTTP.getPrebuiltFacet()}clearSearchBar(){this.searchBarResults$.next(null)}get suggestedValues$(){return this.searchBarResults$.asObservable().pipe((0,_.T)(t=>t?.suggestedValues))}get suggestedValues(){return this.searchBarResults$.getValue().suggestedValues}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(q))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $e=["searchInput"],Be=["searchClose"],Ge=n=>({"cmp-di-search__main-active":n}),Ue=n=>({"cmp-di-search__suggestions-active":n}),We=n=>({"cmp-di-search__overlay-active":n});function je(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.isSuggestionActive=!1)}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("ngClass",e.eq3(1,We,t.isSuggestionActive))}}let Xe=(()=>{class n{get FC(){return this.form.controls}constructor(t,i,s,a,c,l,m,C,b,d,M){this.SEARCH_OPEN=t,this.TRANSLATIONS=i,this.HEALTH_CHECK=s,this.WINDOW=a,this.SEARCH_BAR=c,this.ROUTER=l,this.FORM_BUILDER=m,this.URL_PARSER=C,this.ANALYTICS=b,this.element=d,this.document=M,this.isSearchActive=!1,this.isSuggestionActive=!1,this.suggestions=[],this.searchTermValue="",this.isSearchOpen=!0,this.destroy$=new E.B7,this.isSearchInputFocused=!1,this.SEARCH_PLACEHOLDER_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.SearchPlaceholderExtended),this.EXIT_SEARCH_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.ExitSearch)}ngOnInit(){this.HEALTH_CHECK.doHealthCheck(),this.buildFormAndSubscribeForChange(),this.SEARCH_BAR.suggestedValues$.subscribe(t=>{this.FC.searchTerm.value!==this.searchTermValue&&(this.suggestions=t),this.isSuggestionActive=this.suggestions&&!!this.suggestions.length}),this.isSearchActive=!0}ngAfterViewInit(){this.searchInput&&this.searchInput.nativeElement&&setTimeout(()=>{this.searchInput.nativeElement.focus()},0)}ngAfterContentChecked(){this.searchInput&&!this.isSearchInputFocused&&(this.searchInput.nativeElement.focus(),this.isSearchInputFocused=!0,(0,Le.R)(this.document,"keyup").pipe((0,J.Q)(this.destroy$)).subscribe(t=>{t.code===g.Tab&&(this.element.nativeElement.contains(this.document.activeElement)||this.closeSearch())}))}buildFormAndSubscribeForChange(){this.form=this.FORM_BUILDER.group({searchTerm:[this.SEARCH_BAR.currentQuery],facet:""},{updateOn:"change"}),this.subscribeOnSearchTermChange()}onSuggestionSelect(t){this.addHistory(),this.FC.searchTerm.patchValue(t,{emitEvent:!1}),this.suggestions=[],this.searchPage(),this.closeSearch()}subscribeOnSearchTermChange(){this.FC.searchTerm.valueChanges.pipe((0,ke.B)(300),(0,J.Q)(this.destroy$)).subscribe(t=>{if(t.trim().length<3)return this.activeSuggestionIndex=null,this.suggestions=null,void(this.isSuggestionActive=!1);this.activeSuggestionIndex=null;const i=new Oe(t.trim());this.SEARCH_BAR.getElasticSuggestion(i)})}closeSearch(t){t&&t.code!==g.Enter&&t.code!==g.Space||(this.isSearchActive=!1,this.isSuggestionActive=!1,setTimeout(()=>{this.SEARCH_OPEN.close()},400))}handleSearchSubmit(){this.handleEnterAction()}suggestionArrowSelection(t){switch(t.key){case g.ArrowUp:case g.ArrowDown:null===this.activeSuggestionIndex?this.resolveFirstArrowsAction(t):this.resolveFurtherArrowsAction(t);break;case g.Enter:this.handleEnterAction();break;case g.Escape:this.closeSearch()}}handleEnterAction(){if(0!==this.FC.searchTerm.value.length){if(this.addHistory(),this.suggestions){const t=this.suggestions[this.activeSuggestionIndex];t&&this.FC.searchTerm.patchValue(t,{emitEvent:!1})}this.searchPage(),this.SEARCH_BAR.clearSearchBar()}}resolveFirstArrowsAction(t){switch(t.key){case g.ArrowDown:this.activeSuggestionIndex=0;break;case g.ArrowUp:this.activeSuggestionIndex=this.suggestions.length}}resolveFurtherArrowsAction(t){switch(t.key){case g.ArrowDown:this.activeSuggestionIndex=this.activeSuggestionIndex<this.suggestions.length?++this.activeSuggestionIndex:0;break;case g.ArrowUp:this.activeSuggestionIndex=0===this.activeSuggestionIndex?this.suggestions.length:--this.activeSuggestionIndex}}generateQueryParams(){const t={};return t.qr=this.FC.searchTerm.value,t}searchPage(){const t=window.location.href.match(/search.html/g),i=this.generateQueryParams();t?(this.ROUTER.navigate([],{queryParams:i}),this.closeSearch()):this.WINDOW.gotoSearchScreen(i)}addHistory(){window.history.pushState({},"",window.location.href)}onSuggestionFocus(t){this.activeSuggestionIndex=t}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ee),e.rXU(I),e.rXU(K),e.rXU(y),e.rXU(te),e.rXU(T.Ix),e.rXU(f.ze),e.rXU(H),e.rXU(V),e.rXU(e.aKT),e.rXU(w.qQ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-search-overlay"]],viewQuery:function(i,s){if(1&i&&(e.GBs($e,5),e.GBs(Be,5)),2&i){let a;e.mGM(a=e.lsd())&&(s.searchInput=a.first),e.mGM(a=e.lsd())&&(s.searchClose=a.first)}},hostVars:2,hostBindings:function(i,s){2&i&&e.AVh("cmp-search__host-overlay-active",s.isSuggestionActive)},inputs:{searchInputId:"searchInputId"},standalone:!0,features:[e.aNF],decls:15,vars:14,consts:[["searchInput",""],["searchClose",""],[1,"cmp-di-search__main",3,"ngClass"],[1,"cmp-di-search__holder"],[1,"cmp-di-search__field",3,"formGroup"],["type","text","title","search","formControlName","searchTerm","autocomplete","off","tabindex","1",1,"cmp-di-search__input",3,"keydown","placeholder"],["tabindex","2",1,"cmp-di-search__button",3,"click"],[1,"cmp-di-search__suggestions",3,"ngClass"],[1,"cmp-advanced-search__suggestion",3,"selectSuggestion","focusSuggestion","suggestions","activeSuggestionIndex","searchTerm"],["tabindex","3",1,"cmp-di-search__button",3,"click","keydown"],[1,"icon-remove"],[1,"cmp-di-search__overlay",3,"ngClass"],[1,"cmp-di-search__overlay",3,"click","ngClass"]],template:function(i,s){if(1&i){const a=e.RV6();e.j41(0,"div",2),e.nrm(1,"div",3),e.j41(2,"div",4)(3,"input",5,0),e.bIt("keydown",function(l){return e.eBV(a),e.Njj(s.suggestionArrowSelection(l))}),e.k0s(),e.j41(5,"button",6),e.bIt("click",function(){return e.eBV(a),e.Njj(s.handleSearchSubmit())}),e.EFF(6," Search "),e.k0s(),e.j41(7,"div",7)(8,"ds-is-suggestions",8),e.bIt("selectSuggestion",function(l){return e.eBV(a),e.Njj(s.onSuggestionSelect(l))})("focusSuggestion",function(l){return e.eBV(a),e.Njj(s.onSuggestionFocus(l))}),e.k0s()()(),e.j41(9,"div",9,1),e.bIt("click",function(){return e.eBV(a),e.Njj(s.closeSearch())})("keydown",function(l){return e.eBV(a),e.Njj(s.closeSearch(l))}),e.j41(11,"span"),e.EFF(12),e.k0s(),e.nrm(13,"i",10),e.k0s()(),e.DNE(14,je,1,3,"div",11)}2&i&&(e.Y8G("ngClass",e.eq3(10,Ge,s.isSearchActive)),e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(),e.Y8G("placeholder",s.SEARCH_PLACEHOLDER_LABEL),e.BMQ("aria-label",s.SEARCH_PLACEHOLDER_LABEL),e.R7$(4),e.Y8G("ngClass",e.eq3(12,Ue,s.isSuggestionActive)),e.R7$(),e.Y8G("suggestions",s.suggestions)("activeSuggestionIndex",s.activeSuggestionIndex)("searchTerm",s.FC.searchTerm.value),e.R7$(4),e.JRh(s.EXIT_SEARCH_LABEL),e.R7$(2),e.vxM(s.isSuggestionActive?14:-1))},dependencies:[w.YU,f.X1,f.me,f.BC,f.cb,f.j4,f.JD,He],styles:['.extend-link[_ngcontent-%COMP%]{transition:none;color:#007cb0}@media print{.extend-link[_ngcontent-%COMP%]{color:#007cb0!important}}.extend-link[_ngcontent-%COMP%]:hover{text-decoration:underline;transition:none}.extend-link[_ngcontent-%COMP%]:visited{color:#609}.extend-break-word[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word}.extend-line[_ngcontent-%COMP%]:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}.mixin-transform-start[_ngcontent-%COMP%]{transform:perspective(2000px) translate3d(0,-66px,198px) rotateX(-90deg) scale3d(.86,.75,1) translateY(50px);will-change:transform;transition:.4s ease-in-out transform}.mixin-transform-stop[_ngcontent-%COMP%]{transform:scaleZ(1)}[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;height:4.5em;display:flex;flex-flow:column nowrap;justify-content:flex-start;flex-grow:1;flex-shrink:1;background-color:transparent;z-index:2001;font-size:16px;width:0px}.cmp-di-search__host-overlay-active[_nghost-%COMP%]{height:100%}.cmp-di-search__overlay[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#000;opacity:0;transition:.5s ease-in-out opacity}.cmp-di-search__overlay-active[_ngcontent-%COMP%]{opacity:.3}.cmp-di-search__main[_ngcontent-%COMP%]{width:55%;position:fixed;color:#fff;background-color:#1f1f1f;display:flex;flex-flow:row nowrap;flex-shrink:1;flex-grow:1;justify-content:space-between;align-items:center;padding:12px 0 0;height:100%;max-height:48px;z-index:2;opacity:0;margin:0 15% 0 30%;transition:.5s ease-in-out transform,.3s ease-in-out opacity}.cmp-di-search__main-active[_ngcontent-%COMP%]{transform:scaleZ(1);opacity:1}@media screen and (min-width: 768px) and (max-width: 1023px){.cmp-di-search__main[_ngcontent-%COMP%]{width:66%}}@media screen and (max-width: 767px){.cmp-di-search__main[_ngcontent-%COMP%]{flex-flow:column nowrap;margin-left:0!important;padding:0;width:100%;align-items:initial;background-color:transparent;position:fixed}}@media screen and (max-width: 1023px){.cmp-di-search__main[_ngcontent-%COMP%]{margin:0 13.7% 0 20%}}@media screen and (max-width: 1260px) and (min-width: 1024px){.cmp-di-search__main[_ngcontent-%COMP%]{width:56%;margin:0 13% 0 30%}}@media screen and (max-width: 1440px) and (min-width: 1260px){.cmp-di-search__main[_ngcontent-%COMP%]{width:52.5%}}@media screen and (min-width: 1441px){.cmp-di-search__main[_ngcontent-%COMP%]{width:61%;margin:0 9% 0 30%}}@media screen and (min-width: 1920px){.cmp-di-search__main[_ngcontent-%COMP%]{width:54.5%;margin:0 15% 0 30%}}.cmp-di-search__button[_ngcontent-%COMP%]{background-color:#86bc25;color:#000;cursor:pointer;border:none;text-transform:uppercase;font-weight:700;font-size:.875em;font-family:Adelle Sans Condensed,Calibri,sans-serif;text-align:right}.cmp-di-search__button[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%], .cmp-di-search__button[_ngcontent-%COMP%]   .icon-search[_ngcontent-%COMP%]{font-size:1.5em!important}@media screen and (max-width: 767px){.cmp-di-search__button[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%]{margin-right:30px;background:#000}}.cmp-di-search__button[_ngcontent-%COMP%]   .icon-search[_ngcontent-%COMP%]{cursor:auto}.cmp-di-search__button[_ngcontent-%COMP%]:focus{outline:3px solid #ffffff;box-shadow:0 0 0 3px #012169}.cmp-di-search__button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;margin:0 10px 0 0;position:relative;bottom:2px}@media screen and (max-width: 767px){.cmp-di-search__button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.cmp-di-search__button[_ngcontent-%COMP%]:nth-child(3){background:transparent;color:#fff}@media screen and (max-width: 767px){.cmp-di-search__button[_ngcontent-%COMP%]:nth-child(3){margin-top:-13px}}.cmp-di-search__field[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;flex:0 1 25em;padding:0;background:#fff;z-index:5;box-shadow:#63636333 0 2px 8px}@media screen and (max-width: 767px){.cmp-di-search__field[_ngcontent-%COMP%]   .cmp-di-search__button[_ngcontent-%COMP%]{width:30%;text-align:center}}@media screen and (max-width: 767px){.cmp-di-search__field[_ngcontent-%COMP%]{top:60px}}.cmp-di-search__input[_ngcontent-%COMP%]{margin-left:10px;background:transparent;border:0;padding:0 0 0 3px;overflow:hidden;white-space:nowrap;width:90%;font-size:1.125em;color:#1f1f1f;height:2.1875em;font-family:Adelle Sans Condensed,Calibri,sans-serif;font-weight:400}.cmp-di-search__input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.cmp-di-search__input[_ngcontent-%COMP%]::placeholder{color:#1f1f1f;opacity:1;font-family:Adelle Sans Condensed,Calibri,sans-serif;font-weight:400}.cmp-di-search__suggestions[_ngcontent-%COMP%]{position:absolute;top:-1em;left:0;z-index:7;background-color:#fff;width:100%;border-radius:1em;opacity:0;transform:perspective(2000px) translate3d(0,-66px,198px) rotateX(-90deg) scale3d(.86,.75,1) translateY(50px);will-change:transform;transition:.4s ease-in-out transform;transition:.3s ease-in-out transform,.3s ease-in-out border-radius,.4s ease-in-out opacity,.3s linear top}.cmp-di-search__suggestions-active[_ngcontent-%COMP%]{border-radius:0 0 1em 1em;opacity:1;top:2.375em;transform:scaleZ(1)}@media screen and (max-width: 767px){.cmp-di-search__suggestions[_ngcontent-%COMP%]{padding:0}}']})}return n})();const ze=["searchInput"],Ye=["searchIcon"],Ze=n=>({"cmp-advanced-search--open":n});function qe(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",5,0),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.openSearch())})("keydown",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.openSearchByKey(s))}),e.j41(2,"div",6),e.nrm(3,"i",7),e.k0s()()}}function Ke(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",8,1),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.openSearch())})("keydown",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.openSearch(s))}),e.j41(2,"span",6),e.nrm(3,"i",7),e.k0s(),e.nrm(4,"input",9),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(2),e.BMQ("title",t.SEARCH_PLACEHOLDER_LABEL),e.R7$(2),e.Y8G("placeholder",t.SEARCH_PLACEHOLDER_LABEL)}}let ne=(()=>{class n{get FC(){return this.form.controls}constructor(t,i,s,a,c){this.TRANSLATIONS=t,this.URL_PARSER=i,this.FORM_BUILDER=s,this.SEARCH_BAR=a,this.SEARCH_OPEN=c,this.isSearchOpen=!1,this.searchTermValue="",this.SEARCH_PLACEHOLDER_LABEL=this.TRANSLATIONS.getTranslatedLabel(r.SearchPlaceholderExtended)}ngOnInit(){this.buildFormAndSubscribeForChange()}buildFormAndSubscribeForChange(){this.form=this.FORM_BUILDER.group({searchTerm:[{value:this.SEARCH_BAR.currentQuery,disabled:!0}],facet:""},{updateOn:"change"})}openSearch(t){t&&t.code!==g.Enter&&t.code!==g.Space||this.isSearchOpen||(this.isSearchOpen=!0,this.SEARCH_OPEN.open(Xe).onClosed().subscribe(i=>{this.isSearchOpen=!1,this.searchTermValue?setTimeout(()=>{this.searchInput.nativeElement.focus()},500):this.searchIcon.nativeElement.focus()}))}openSearchByKey(t){switch(t.code){case g.Enter:case g.Space:this.openSearch()}}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(I),e.rXU(H),e.rXU(f.ze),e.rXU(te),e.rXU(ee))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-is-search-bar"]],viewQuery:function(i,s){if(1&i&&(e.GBs(ze,5),e.GBs(Ye,5)),2&i){let a;e.mGM(a=e.lsd())&&(s.searchInput=a.first),e.mGM(a=e.lsd())&&(s.searchIcon=a.first)}},inputs:{searchInputId:"searchInputId"},standalone:!0,features:[e.aNF],decls:3,vars:5,consts:[["searchIcon",""],["searchInput",""],["id","cmp-advanced-search",1,"cmp-advanced-search","cmp-advanced-search--dark",3,"ngClass"],["aria-label","Search","type","button"],["aria-label","Search input, press Enter to edit","tabindex","0",1,"cmp-advanced-search__field",3,"formGroup"],["aria-label","Search","type","button",3,"click","keydown"],[1,"cmp-advanced-search__button"],[1,"icon-search"],["aria-label","Search input, press Enter to edit","tabindex","0",1,"cmp-advanced-search__field",3,"click","keydown","formGroup"],["type","text","title","search","formControlName","searchTerm","autocomplete","off",1,"cmp-advanced-search__input",3,"placeholder"]],template:function(i,s){1&i&&(e.j41(0,"div",2),e.DNE(1,qe,4,0,"button",3)(2,Ke,5,3,"div",4),e.k0s()),2&i&&(e.Y8G("ngClass",e.eq3(3,Ze,s.isSearchOpen)),e.R7$(),e.vxM(s.searchTermValue?-1:1),e.R7$(),e.vxM(s.searchTermValue?2:-1))},dependencies:[w.YU,f.X1,f.me,f.BC,f.cb,f.j4,f.JD],styles:['.extend-link[_ngcontent-%COMP%]{transition:none;color:#007cb0}@media print{.extend-link[_ngcontent-%COMP%]{color:#007cb0!important}}.extend-link[_ngcontent-%COMP%]:hover{text-decoration:underline;transition:none}.extend-link[_ngcontent-%COMP%]:visited{color:#609}.extend-break-word[_ngcontent-%COMP%]{word-wrap:break-word;word-break:break-word}.extend-line[_ngcontent-%COMP%]:after{content:"";position:absolute;transform:translateY(-50%);top:50%;right:0;height:45px;border-right:1px solid #636363}[_nghost-%COMP%]{display:flex;justify-content:flex-end;flex-grow:1;height:100%;z-index:5;position:relative;min-height:48px}.cmp-advanced-search[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;height:100%;width:100%;color:#d0d0ce;z-index:2;font-size:16px;min-height:48px}@media screen and (max-width: 767px){.cmp-advanced-search[_ngcontent-%COMP%]{width:auto}.cmp-advanced-search--open[_ngcontent-%COMP%]{display:none}}.cmp-advanced-search__field[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;position:relative;flex:0 1 34.375em;padding:0 1em .5em;border-bottom:1px solid #FFFFFF;z-index:5}.cmp-advanced-search__input[_ngcontent-%COMP%]{margin-left:8px;background:transparent;border:0;padding:0;overflow:hidden;white-space:nowrap;width:90%;font-size:1em;color:#fff}.cmp-advanced-search__input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.cmp-advanced-search__button[_ngcontent-%COMP%]{background-color:transparent;color:#d0d0ce;cursor:pointer}.cmp-advanced-search__button[_ngcontent-%COMP%]   .icon-search[_ngcontent-%COMP%]{font-size:1em!important}.cmp-advanced-search__button[_ngcontent-%COMP%]:focus{border:1px dashed #929292}']})}return n})();const Qe=[{path:"",component:ne},{path:"**",component:Q}];let Je=(()=>{class n extends w.Sm{prepareExternalUrl(t){return super.prepareExternalUrl(t).replace(/(?:\/+(\?))/,"$1").replace(/\/+$/,"")}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}})();static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();const et=[(0,T.lh)(Qe),{provide:w.hb,useClass:Je},{provide:w.kB,useValue:"/"}];let tt=(()=>{class n extends A.EZ{constructor(){super(...arguments),this.overrides={swipe:{direction:ie.DIRECTION_ALL}}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}})();static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();(0,e.SmG)();const nt={providers:[(0,e.oKB)(A.fM),{provide:A.kQ,useClass:tt},(0,O.$R)((0,O.Sx)()),...et]};(0,A.B8)(ne,nt).then(n=>{n.bootstrap(Q)}).catch(n=>console.error(n))}},R=>{R.O(0,[502],()=>R(R.s=6483)),R.O()}]);
(()=>{var cw=Object.create;var pT=Object.defineProperty;var dw=Object.getOwnPropertyDescriptor;var hw=Object.getOwnPropertyNames;var fw=Object.getPrototypeOf,pw=Object.prototype.hasOwnProperty;var gi=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var gw=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of hw(e))!pw.call(s,n)&&n!==t&&pT(s,n,{get:()=>e[n],enumerable:!(i=dw(e,n))||i.enumerable});return s};var Qi=(s,e,t)=>(t=s!=null?cw(fw(s)):{},gw(e||!s||!s.__esModule?pT(t,"default",{value:s,enumerable:!0}):t,s));var mg=gi((xT,Vd)=>{(function(s,e){"use strict";typeof Vd=="object"&&typeof Vd.exports=="object"?Vd.exports=s.document?e(s,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(s)})(typeof window<"u"?window:xT,function(s,e){"use strict";var t=[],i=Object.getPrototypeOf,n=t.slice,r=t.flat?function(p){return t.flat.call(p)}:function(p){return t.concat.apply([],p)},a=t.push,o=t.indexOf,l={},u=l.toString,c=l.hasOwnProperty,h=c.toString,g=h.call(Object),m={},v=function(T){return typeof T=="function"&&typeof T.nodeType!="number"&&typeof T.item!="function"},b=function(T){return T!=null&&T===T.window},A=s.document,R={type:!0,src:!0,nonce:!0,noModule:!0};function F(p,T,D){D=D||A;var k,U,V=D.createElement("script");if(V.text=p,T)for(k in R)U=T[k]||T.getAttribute&&T.getAttribute(k),U&&V.setAttribute(k,U);D.head.appendChild(V).parentNode.removeChild(V)}function O(p){return p==null?p+"":typeof p=="object"||typeof p=="function"?l[u.call(p)]||"object":typeof p}var H="3.7.1",W=/HTML$/i,E=function(p,T){return new E.fn.init(p,T)};E.fn=E.prototype={jquery:H,constructor:E,length:0,toArray:function(){return n.call(this)},get:function(p){return p==null?n.call(this):p<0?this[p+this.length]:this[p]},pushStack:function(p){var T=E.merge(this.constructor(),p);return T.prevObject=this,T},each:function(p){return E.each(this,p)},map:function(p){return this.pushStack(E.map(this,function(T,D){return p.call(T,D,T)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(p,T){return(T+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(p,T){return T%2}))},eq:function(p){var T=this.length,D=+p+(p<0?T:0);return this.pushStack(D>=0&&D<T?[this[D]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:t.sort,splice:t.splice},E.extend=E.fn.extend=function(){var p,T,D,k,U,V,Q=arguments[0]||{},he=1,ue=arguments.length,_e=!1;for(typeof Q=="boolean"&&(_e=Q,Q=arguments[he]||{},he++),typeof Q!="object"&&!v(Q)&&(Q={}),he===ue&&(Q=this,he--);he<ue;he++)if((p=arguments[he])!=null)for(T in p)k=p[T],!(T==="__proto__"||Q===k)&&(_e&&k&&(E.isPlainObject(k)||(U=Array.isArray(k)))?(D=Q[T],U&&!Array.isArray(D)?V=[]:!U&&!E.isPlainObject(D)?V={}:V=D,U=!1,Q[T]=E.extend(_e,V,k)):k!==void 0&&(Q[T]=k));return Q},E.extend({expando:"jQuery"+(H+Math.random()).replace(/\D/g,""),isReady:!0,error:function(p){throw new Error(p)},noop:function(){},isPlainObject:function(p){var T,D;return!p||u.call(p)!=="[object Object]"?!1:(T=i(p),T?(D=c.call(T,"constructor")&&T.constructor,typeof D=="function"&&h.call(D)===g):!0)},isEmptyObject:function(p){var T;for(T in p)return!1;return!0},globalEval:function(p,T,D){F(p,{nonce:T&&T.nonce},D)},each:function(p,T){var D,k=0;if(X(p))for(D=p.length;k<D&&T.call(p[k],k,p[k])!==!1;k++);else for(k in p)if(T.call(p[k],k,p[k])===!1)break;return p},text:function(p){var T,D="",k=0,U=p.nodeType;if(!U)for(;T=p[k++];)D+=E.text(T);return U===1||U===11?p.textContent:U===9?p.documentElement.textContent:U===3||U===4?p.nodeValue:D},makeArray:function(p,T){var D=T||[];return p!=null&&(X(Object(p))?E.merge(D,typeof p=="string"?[p]:p):a.call(D,p)),D},inArray:function(p,T,D){return T==null?-1:o.call(T,p,D)},isXMLDoc:function(p){var T=p&&p.namespaceURI,D=p&&(p.ownerDocument||p).documentElement;return!W.test(T||D&&D.nodeName||"HTML")},merge:function(p,T){for(var D=+T.length,k=0,U=p.length;k<D;k++)p[U++]=T[k];return p.length=U,p},grep:function(p,T,D){for(var k,U=[],V=0,Q=p.length,he=!D;V<Q;V++)k=!T(p[V],V),k!==he&&U.push(p[V]);return U},map:function(p,T,D){var k,U,V=0,Q=[];if(X(p))for(k=p.length;V<k;V++)U=T(p[V],V,D),U!=null&&Q.push(U);else for(V in p)U=T(p[V],V,D),U!=null&&Q.push(U);return r(Q)},guid:1,support:m}),typeof Symbol=="function"&&(E.fn[Symbol.iterator]=t[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(p,T){l["[object "+T+"]"]=T.toLowerCase()});function X(p){var T=!!p&&"length"in p&&p.length,D=O(p);return v(p)||b(p)?!1:D==="array"||T===0||typeof T=="number"&&T>0&&T-1 in p}function Z(p,T){return p.nodeName&&p.nodeName.toLowerCase()===T.toLowerCase()}var re=t.pop,oe=t.sort,ve=t.splice,Ce="[\\x20\\t\\r\\n\\f]",we=new RegExp("^"+Ce+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ce+"+$","g");E.contains=function(p,T){var D=T&&T.parentNode;return p===D||!!(D&&D.nodeType===1&&(p.contains?p.contains(D):p.compareDocumentPosition&&p.compareDocumentPosition(D)&16))};var Ge=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Xe(p,T){return T?p==="\0"?"\uFFFD":p.slice(0,-1)+"\\"+p.charCodeAt(p.length-1).toString(16)+" ":"\\"+p}E.escapeSelector=function(p){return(p+"").replace(Ge,Xe)};var Re=A,We=a;(function(){var p,T,D,k,U,V=We,Q,he,ue,_e,Me,Ue=E.expando,xe=0,Ze=0,Rt=vr(),Vt=vr(),Mt=vr(),bi=vr(),ci=function(ne,ye){return ne===ye&&(U=!0),0},ss="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ji="(?:\\\\[\\da-fA-F]{1,6}"+Ce+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",jt="\\["+Ce+"*("+ji+")(?:"+Ce+"*([*^$|!~]?=)"+Ce+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ji+"))|)"+Ce+"*\\]",Rs=":("+ji+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+jt+")*)|.*)\\)|)",Kt=new RegExp(Ce+"+","g"),di=new RegExp("^"+Ce+"*,"+Ce+"*"),Zr=new RegExp("^"+Ce+"*([>+~]|"+Ce+")"+Ce+"*"),po=new RegExp(Ce+"|>"),Ps=new RegExp(Rs),Fn=new RegExp("^"+ji+"$"),Zs={ID:new RegExp("^#("+ji+")"),CLASS:new RegExp("^\\.("+ji+")"),TAG:new RegExp("^("+ji+"|[*])"),ATTR:new RegExp("^"+jt),PSEUDO:new RegExp("^"+Rs),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ce+"*(even|odd|(([+-]|)(\\d*)n|)"+Ce+"*(?:([+-]|)"+Ce+"*(\\d+)|))"+Ce+"*\\)|)","i"),bool:new RegExp("^(?:"+ss+")$","i"),needsContext:new RegExp("^"+Ce+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ce+"*((?:-\\d)?\\d*)"+Ce+"*\\)|)(?=[^-]|$)","i")},Os=/^(?:input|select|textarea|button)$/i,Tn=/^h\d$/i,ms=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tr=/[+~]/,ys=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ce+"?|\\\\([^\\r\\n\\f])","g"),Ms=function(ne,ye){var Ie="0x"+ne.slice(1)-65536;return ye||(Ie<0?String.fromCharCode(Ie+65536):String.fromCharCode(Ie>>10|55296,Ie&1023|56320))},Bu=function(){_n()},xd=br(function(ne){return ne.disabled===!0&&Z(ne,"fieldset")},{dir:"parentNode",next:"legend"});function ns(){try{return Q.activeElement}catch{}}try{V.apply(t=n.call(Re.childNodes),Re.childNodes),t[Re.childNodes.length].nodeType}catch{V={apply:function(ye,Ie){We.apply(ye,n.call(Ie))},call:function(ye){We.apply(ye,n.call(arguments,1))}}}function Zt(ne,ye,Ie,Le){var Be,ot,ht,yt,dt,Ut,kt,mt=ye&&ye.ownerDocument,$t=ye?ye.nodeType:9;if(Ie=Ie||[],typeof ne!="string"||!ne||$t!==1&&$t!==9&&$t!==11)return Ie;if(!Le&&(_n(ye),ye=ye||Q,ue)){if($t!==11&&(dt=ms.exec(ne)))if(Be=dt[1]){if($t===9)if(ht=ye.getElementById(Be)){if(ht.id===Be)return V.call(Ie,ht),Ie}else return Ie;else if(mt&&(ht=mt.getElementById(Be))&&Zt.contains(ye,ht)&&ht.id===Be)return V.call(Ie,ht),Ie}else{if(dt[2])return V.apply(Ie,ye.getElementsByTagName(ne)),Ie;if((Be=dt[3])&&ye.getElementsByClassName)return V.apply(Ie,ye.getElementsByClassName(Be)),Ie}if(!bi[ne+" "]&&(!_e||!_e.test(ne))){if(kt=ne,mt=ye,$t===1&&(po.test(ne)||Zr.test(ne))){for(mt=tr.test(ne)&&go(ye.parentNode)||ye,(mt!=ye||!m.scope)&&((yt=ye.getAttribute("id"))?yt=E.escapeSelector(yt):ye.setAttribute("id",yt=Ue)),Ut=_r(ne),ot=Ut.length;ot--;)Ut[ot]=(yt?"#"+yt:":scope")+" "+Si(Ut[ot]);kt=Ut.join(",")}try{return V.apply(Ie,mt.querySelectorAll(kt)),Ie}catch{bi(ne,!0)}finally{yt===Ue&&ye.removeAttribute("id")}}}return dl(ne.replace(we,"$1"),ye,Ie,Le)}function vr(){var ne=[];function ye(Ie,Le){return ne.push(Ie+" ")>T.cacheLength&&delete ye[ne.shift()],ye[Ie+" "]=Le}return ye}function bs(ne){return ne[Ue]=!0,ne}function Tr(ne){var ye=Q.createElement("fieldset");try{return!!ne(ye)}catch{return!1}finally{ye.parentNode&&ye.parentNode.removeChild(ye),ye=null}}function al(ne){return function(ye){return Z(ye,"input")&&ye.type===ne}}function ol(ne){return function(ye){return(Z(ye,"input")||Z(ye,"button"))&&ye.type===ne}}function ll(ne){return function(ye){return"form"in ye?ye.parentNode&&ye.disabled===!1?"label"in ye?"label"in ye.parentNode?ye.parentNode.disabled===ne:ye.disabled===ne:ye.isDisabled===ne||ye.isDisabled!==!ne&&xd(ye)===ne:ye.disabled===ne:"label"in ye?ye.disabled===ne:!1}}function $n(ne){return bs(function(ye){return ye=+ye,bs(function(Ie,Le){for(var Be,ot=ne([],Ie.length,ye),ht=ot.length;ht--;)Ie[Be=ot[ht]]&&(Ie[Be]=!(Le[Be]=Ie[Be]))})})}function go(ne){return ne&&typeof ne.getElementsByTagName<"u"&&ne}function _n(ne){var ye,Ie=ne?ne.ownerDocument||ne:Re;return Ie==Q||Ie.nodeType!==9||!Ie.documentElement||(Q=Ie,he=Q.documentElement,ue=!E.isXMLDoc(Q),Me=he.matches||he.webkitMatchesSelector||he.msMatchesSelector,he.msMatchesSelector&&Re!=Q&&(ye=Q.defaultView)&&ye.top!==ye&&ye.addEventListener("unload",Bu),m.getById=Tr(function(Le){return he.appendChild(Le).id=E.expando,!Q.getElementsByName||!Q.getElementsByName(E.expando).length}),m.disconnectedMatch=Tr(function(Le){return Me.call(Le,"*")}),m.scope=Tr(function(){return Q.querySelectorAll(":scope")}),m.cssHas=Tr(function(){try{return Q.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(T.filter.ID=function(Le){var Be=Le.replace(ys,Ms);return function(ot){return ot.getAttribute("id")===Be}},T.find.ID=function(Le,Be){if(typeof Be.getElementById<"u"&&ue){var ot=Be.getElementById(Le);return ot?[ot]:[]}}):(T.filter.ID=function(Le){var Be=Le.replace(ys,Ms);return function(ot){var ht=typeof ot.getAttributeNode<"u"&&ot.getAttributeNode("id");return ht&&ht.value===Be}},T.find.ID=function(Le,Be){if(typeof Be.getElementById<"u"&&ue){var ot,ht,yt,dt=Be.getElementById(Le);if(dt){if(ot=dt.getAttributeNode("id"),ot&&ot.value===Le)return[dt];for(yt=Be.getElementsByName(Le),ht=0;dt=yt[ht++];)if(ot=dt.getAttributeNode("id"),ot&&ot.value===Le)return[dt]}return[]}}),T.find.TAG=function(Le,Be){return typeof Be.getElementsByTagName<"u"?Be.getElementsByTagName(Le):Be.querySelectorAll(Le)},T.find.CLASS=function(Le,Be){if(typeof Be.getElementsByClassName<"u"&&ue)return Be.getElementsByClassName(Le)},_e=[],Tr(function(Le){var Be;he.appendChild(Le).innerHTML="<a id='"+Ue+"' href='' disabled='disabled'></a><select id='"+Ue+"-\r\\' disabled='disabled'><option selected=''></option></select>",Le.querySelectorAll("[selected]").length||_e.push("\\["+Ce+"*(?:value|"+ss+")"),Le.querySelectorAll("[id~="+Ue+"-]").length||_e.push("~="),Le.querySelectorAll("a#"+Ue+"+*").length||_e.push(".#.+[+~]"),Le.querySelectorAll(":checked").length||_e.push(":checked"),Be=Q.createElement("input"),Be.setAttribute("type","hidden"),Le.appendChild(Be).setAttribute("name","D"),he.appendChild(Le).disabled=!0,Le.querySelectorAll(":disabled").length!==2&&_e.push(":enabled",":disabled"),Be=Q.createElement("input"),Be.setAttribute("name",""),Le.appendChild(Be),Le.querySelectorAll("[name='']").length||_e.push("\\["+Ce+"*name"+Ce+"*="+Ce+`*(?:''|"")`)}),m.cssHas||_e.push(":has"),_e=_e.length&&new RegExp(_e.join("|")),ci=function(Le,Be){if(Le===Be)return U=!0,0;var ot=!Le.compareDocumentPosition-!Be.compareDocumentPosition;return ot||(ot=(Le.ownerDocument||Le)==(Be.ownerDocument||Be)?Le.compareDocumentPosition(Be):1,ot&1||!m.sortDetached&&Be.compareDocumentPosition(Le)===ot?Le===Q||Le.ownerDocument==Re&&Zt.contains(Re,Le)?-1:Be===Q||Be.ownerDocument==Re&&Zt.contains(Re,Be)?1:k?o.call(k,Le)-o.call(k,Be):0:ot&4?-1:1)}),Q}Zt.matches=function(ne,ye){return Zt(ne,null,null,ye)},Zt.matchesSelector=function(ne,ye){if(_n(ne),ue&&!bi[ye+" "]&&(!_e||!_e.test(ye)))try{var Ie=Me.call(ne,ye);if(Ie||m.disconnectedMatch||ne.document&&ne.document.nodeType!==11)return Ie}catch{bi(ye,!0)}return Zt(ye,Q,null,[ne]).length>0},Zt.contains=function(ne,ye){return(ne.ownerDocument||ne)!=Q&&_n(ne),E.contains(ne,ye)},Zt.attr=function(ne,ye){(ne.ownerDocument||ne)!=Q&&_n(ne);var Ie=T.attrHandle[ye.toLowerCase()],Le=Ie&&c.call(T.attrHandle,ye.toLowerCase())?Ie(ne,ye,!ue):void 0;return Le!==void 0?Le:ne.getAttribute(ye)},Zt.error=function(ne){throw new Error("Syntax error, unrecognized expression: "+ne)},E.uniqueSort=function(ne){var ye,Ie=[],Le=0,Be=0;if(U=!m.sortStable,k=!m.sortStable&&n.call(ne,0),oe.call(ne,ci),U){for(;ye=ne[Be++];)ye===ne[Be]&&(Le=Ie.push(Be));for(;Le--;)ve.call(ne,Ie[Le],1)}return k=null,ne},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(n.apply(this)))},T=E.expr={cacheLength:50,createPseudo:bs,match:Zs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ne){return ne[1]=ne[1].replace(ys,Ms),ne[3]=(ne[3]||ne[4]||ne[5]||"").replace(ys,Ms),ne[2]==="~="&&(ne[3]=" "+ne[3]+" "),ne.slice(0,4)},CHILD:function(ne){return ne[1]=ne[1].toLowerCase(),ne[1].slice(0,3)==="nth"?(ne[3]||Zt.error(ne[0]),ne[4]=+(ne[4]?ne[5]+(ne[6]||1):2*(ne[3]==="even"||ne[3]==="odd")),ne[5]=+(ne[7]+ne[8]||ne[3]==="odd")):ne[3]&&Zt.error(ne[0]),ne},PSEUDO:function(ne){var ye,Ie=!ne[6]&&ne[2];return Zs.CHILD.test(ne[0])?null:(ne[3]?ne[2]=ne[4]||ne[5]||"":Ie&&Ps.test(Ie)&&(ye=_r(Ie,!0))&&(ye=Ie.indexOf(")",Ie.length-ye)-Ie.length)&&(ne[0]=ne[0].slice(0,ye),ne[2]=Ie.slice(0,ye)),ne.slice(0,3))}},filter:{TAG:function(ne){var ye=ne.replace(ys,Ms).toLowerCase();return ne==="*"?function(){return!0}:function(Ie){return Z(Ie,ye)}},CLASS:function(ne){var ye=Rt[ne+" "];return ye||(ye=new RegExp("(^|"+Ce+")"+ne+"("+Ce+"|$)"))&&Rt(ne,function(Ie){return ye.test(typeof Ie.className=="string"&&Ie.className||typeof Ie.getAttribute<"u"&&Ie.getAttribute("class")||"")})},ATTR:function(ne,ye,Ie){return function(Le){var Be=Zt.attr(Le,ne);return Be==null?ye==="!=":ye?(Be+="",ye==="="?Be===Ie:ye==="!="?Be!==Ie:ye==="^="?Ie&&Be.indexOf(Ie)===0:ye==="*="?Ie&&Be.indexOf(Ie)>-1:ye==="$="?Ie&&Be.slice(-Ie.length)===Ie:ye==="~="?(" "+Be.replace(Kt," ")+" ").indexOf(Ie)>-1:ye==="|="?Be===Ie||Be.slice(0,Ie.length+1)===Ie+"-":!1):!0}},CHILD:function(ne,ye,Ie,Le,Be){var ot=ne.slice(0,3)!=="nth",ht=ne.slice(-4)!=="last",yt=ye==="of-type";return Le===1&&Be===0?function(dt){return!!dt.parentNode}:function(dt,Ut,kt){var mt,$t,It,ti,Xi,Fi=ot!==ht?"nextSibling":"previousSibling",Es=dt.parentNode,Ns=yt&&dt.nodeName.toLowerCase(),sr=!kt&&!yt,Gi=!1;if(Es){if(ot){for(;Fi;){for(It=dt;It=It[Fi];)if(yt?Z(It,Ns):It.nodeType===1)return!1;Xi=Fi=ne==="only"&&!Xi&&"nextSibling"}return!0}if(Xi=[ht?Es.firstChild:Es.lastChild],ht&&sr){for($t=Es[Ue]||(Es[Ue]={}),mt=$t[ne]||[],ti=mt[0]===xe&&mt[1],Gi=ti&&mt[2],It=ti&&Es.childNodes[ti];It=++ti&&It&&It[Fi]||(Gi=ti=0)||Xi.pop();)if(It.nodeType===1&&++Gi&&It===dt){$t[ne]=[xe,ti,Gi];break}}else if(sr&&($t=dt[Ue]||(dt[Ue]={}),mt=$t[ne]||[],ti=mt[0]===xe&&mt[1],Gi=ti),Gi===!1)for(;(It=++ti&&It&&It[Fi]||(Gi=ti=0)||Xi.pop())&&!((yt?Z(It,Ns):It.nodeType===1)&&++Gi&&(sr&&($t=It[Ue]||(It[Ue]={}),$t[ne]=[xe,Gi]),It===dt)););return Gi-=Be,Gi===Le||Gi%Le===0&&Gi/Le>=0}}},PSEUDO:function(ne,ye){var Ie,Le=T.pseudos[ne]||T.setFilters[ne.toLowerCase()]||Zt.error("unsupported pseudo: "+ne);return Le[Ue]?Le(ye):Le.length>1?(Ie=[ne,ne,"",ye],T.setFilters.hasOwnProperty(ne.toLowerCase())?bs(function(Be,ot){for(var ht,yt=Le(Be,ye),dt=yt.length;dt--;)ht=o.call(Be,yt[dt]),Be[ht]=!(ot[ht]=yt[dt])}):function(Be){return Le(Be,0,Ie)}):Le}},pseudos:{not:bs(function(ne){var ye=[],Ie=[],Le=yo(ne.replace(we,"$1"));return Le[Ue]?bs(function(Be,ot,ht,yt){for(var dt,Ut=Le(Be,null,yt,[]),kt=Be.length;kt--;)(dt=Ut[kt])&&(Be[kt]=!(ot[kt]=dt))}):function(Be,ot,ht){return ye[0]=Be,Le(ye,null,ht,Ie),ye[0]=null,!Ie.pop()}}),has:bs(function(ne){return function(ye){return Zt(ne,ye).length>0}}),contains:bs(function(ne){return ne=ne.replace(ys,Ms),function(ye){return(ye.textContent||E.text(ye)).indexOf(ne)>-1}}),lang:bs(function(ne){return Fn.test(ne||"")||Zt.error("unsupported lang: "+ne),ne=ne.replace(ys,Ms).toLowerCase(),function(ye){var Ie;do if(Ie=ue?ye.lang:ye.getAttribute("xml:lang")||ye.getAttribute("lang"))return Ie=Ie.toLowerCase(),Ie===ne||Ie.indexOf(ne+"-")===0;while((ye=ye.parentNode)&&ye.nodeType===1);return!1}}),target:function(ne){var ye=s.location&&s.location.hash;return ye&&ye.slice(1)===ne.id},root:function(ne){return ne===he},focus:function(ne){return ne===ns()&&Q.hasFocus()&&!!(ne.type||ne.href||~ne.tabIndex)},enabled:ll(!1),disabled:ll(!0),checked:function(ne){return Z(ne,"input")&&!!ne.checked||Z(ne,"option")&&!!ne.selected},selected:function(ne){return ne.parentNode&&ne.parentNode.selectedIndex,ne.selected===!0},empty:function(ne){for(ne=ne.firstChild;ne;ne=ne.nextSibling)if(ne.nodeType<6)return!1;return!0},parent:function(ne){return!T.pseudos.empty(ne)},header:function(ne){return Tn.test(ne.nodeName)},input:function(ne){return Os.test(ne.nodeName)},button:function(ne){return Z(ne,"input")&&ne.type==="button"||Z(ne,"button")},text:function(ne){var ye;return Z(ne,"input")&&ne.type==="text"&&((ye=ne.getAttribute("type"))==null||ye.toLowerCase()==="text")},first:$n(function(){return[0]}),last:$n(function(ne,ye){return[ye-1]}),eq:$n(function(ne,ye,Ie){return[Ie<0?Ie+ye:Ie]}),even:$n(function(ne,ye){for(var Ie=0;Ie<ye;Ie+=2)ne.push(Ie);return ne}),odd:$n(function(ne,ye){for(var Ie=1;Ie<ye;Ie+=2)ne.push(Ie);return ne}),lt:$n(function(ne,ye,Ie){var Le;for(Ie<0?Le=Ie+ye:Ie>ye?Le=ye:Le=Ie;--Le>=0;)ne.push(Le);return ne}),gt:$n(function(ne,ye,Ie){for(var Le=Ie<0?Ie+ye:Ie;++Le<ye;)ne.push(Le);return ne})}},T.pseudos.nth=T.pseudos.eq;for(p in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[p]=al(p);for(p in{submit:!0,reset:!0})T.pseudos[p]=ol(p);function ul(){}ul.prototype=T.filters=T.pseudos,T.setFilters=new ul;function _r(ne,ye){var Ie,Le,Be,ot,ht,yt,dt,Ut=Vt[ne+" "];if(Ut)return ye?0:Ut.slice(0);for(ht=ne,yt=[],dt=T.preFilter;ht;){(!Ie||(Le=di.exec(ht)))&&(Le&&(ht=ht.slice(Le[0].length)||ht),yt.push(Be=[])),Ie=!1,(Le=Zr.exec(ht))&&(Ie=Le.shift(),Be.push({value:Ie,type:Le[0].replace(we," ")}),ht=ht.slice(Ie.length));for(ot in T.filter)(Le=Zs[ot].exec(ht))&&(!dt[ot]||(Le=dt[ot](Le)))&&(Ie=Le.shift(),Be.push({value:Ie,type:ot,matches:Le}),ht=ht.slice(Ie.length));if(!Ie)break}return ye?ht.length:ht?Zt.error(ne):Vt(ne,yt).slice(0)}function Si(ne){for(var ye=0,Ie=ne.length,Le="";ye<Ie;ye++)Le+=ne[ye].value;return Le}function br(ne,ye,Ie){var Le=ye.dir,Be=ye.next,ot=Be||Le,ht=Ie&&ot==="parentNode",yt=Ze++;return ye.first?function(dt,Ut,kt){for(;dt=dt[Le];)if(dt.nodeType===1||ht)return ne(dt,Ut,kt);return!1}:function(dt,Ut,kt){var mt,$t,It=[xe,yt];if(kt){for(;dt=dt[Le];)if((dt.nodeType===1||ht)&&ne(dt,Ut,kt))return!0}else for(;dt=dt[Le];)if(dt.nodeType===1||ht)if($t=dt[Ue]||(dt[Ue]={}),Be&&Z(dt,Be))dt=dt[Le]||dt;else{if((mt=$t[ot])&&mt[0]===xe&&mt[1]===yt)return It[2]=mt[2];if($t[ot]=It,It[2]=ne(dt,Ut,kt))return!0}return!1}}function Yi(ne){return ne.length>1?function(ye,Ie,Le){for(var Be=ne.length;Be--;)if(!ne[Be](ye,Ie,Le))return!1;return!0}:ne[0]}function ir(ne,ye,Ie){for(var Le=0,Be=ye.length;Le<Be;Le++)Zt(ne,ye[Le],Ie);return Ie}function wa(ne,ye,Ie,Le,Be){for(var ot,ht=[],yt=0,dt=ne.length,Ut=ye!=null;yt<dt;yt++)(ot=ne[yt])&&(!Ie||Ie(ot,Le,Be))&&(ht.push(ot),Ut&&ye.push(yt));return ht}function mo(ne,ye,Ie,Le,Be,ot){return Le&&!Le[Ue]&&(Le=mo(Le)),Be&&!Be[Ue]&&(Be=mo(Be,ot)),bs(function(ht,yt,dt,Ut){var kt,mt,$t,It,ti=[],Xi=[],Fi=yt.length,Es=ht||ir(ye||"*",dt.nodeType?[dt]:dt,[]),Ns=ne&&(ht||!ye)?wa(Es,ti,ne,dt,Ut):Es;if(Ie?(It=Be||(ht?ne:Fi||Le)?[]:yt,Ie(Ns,It,dt,Ut)):It=Ns,Le)for(kt=wa(It,Xi),Le(kt,[],dt,Ut),mt=kt.length;mt--;)($t=kt[mt])&&(It[Xi[mt]]=!(Ns[Xi[mt]]=$t));if(ht){if(Be||ne){if(Be){for(kt=[],mt=It.length;mt--;)($t=It[mt])&&kt.push(Ns[mt]=$t);Be(null,It=[],kt,Ut)}for(mt=It.length;mt--;)($t=It[mt])&&(kt=Be?o.call(ht,$t):ti[mt])>-1&&(ht[kt]=!(yt[kt]=$t))}}else It=wa(It===yt?It.splice(Fi,It.length):It),Be?Be(null,yt,It,Ut):V.apply(yt,It)})}function en(ne){for(var ye,Ie,Le,Be=ne.length,ot=T.relative[ne[0].type],ht=ot||T.relative[" "],yt=ot?1:0,dt=br(function(mt){return mt===ye},ht,!0),Ut=br(function(mt){return o.call(ye,mt)>-1},ht,!0),kt=[function(mt,$t,It){var ti=!ot&&(It||$t!=D)||((ye=$t).nodeType?dt(mt,$t,It):Ut(mt,$t,It));return ye=null,ti}];yt<Be;yt++)if(Ie=T.relative[ne[yt].type])kt=[br(Yi(kt),Ie)];else{if(Ie=T.filter[ne[yt].type].apply(null,ne[yt].matches),Ie[Ue]){for(Le=++yt;Le<Be&&!T.relative[ne[Le].type];Le++);return mo(yt>1&&Yi(kt),yt>1&&Si(ne.slice(0,yt-1).concat({value:ne[yt-2].type===" "?"*":""})).replace(we,"$1"),Ie,yt<Le&&en(ne.slice(yt,Le)),Le<Be&&en(ne=ne.slice(Le)),Le<Be&&Si(ne))}kt.push(Ie)}return Yi(kt)}function cl(ne,ye){var Ie=ye.length>0,Le=ne.length>0,Be=function(ot,ht,yt,dt,Ut){var kt,mt,$t,It=0,ti="0",Xi=ot&&[],Fi=[],Es=D,Ns=ot||Le&&T.find.TAG("*",Ut),sr=xe+=Es==null?1:Math.random()||.1,Gi=Ns.length;for(Ut&&(D=ht==Q||ht||Ut);ti!==Gi&&(kt=Ns[ti])!=null;ti++){if(Le&&kt){for(mt=0,!ht&&kt.ownerDocument!=Q&&(_n(kt),yt=!ue);$t=ne[mt++];)if($t(kt,ht||Q,yt)){V.call(dt,kt);break}Ut&&(xe=sr)}Ie&&((kt=!$t&&kt)&&It--,ot&&Xi.push(kt))}if(It+=ti,Ie&&ti!==It){for(mt=0;$t=ye[mt++];)$t(Xi,Fi,ht,yt);if(ot){if(It>0)for(;ti--;)Xi[ti]||Fi[ti]||(Fi[ti]=re.call(dt));Fi=wa(Fi)}V.apply(dt,Fi),Ut&&!ot&&Fi.length>0&&It+ye.length>1&&E.uniqueSort(dt)}return Ut&&(xe=sr,D=Es),Xi};return Ie?bs(Be):Be}function yo(ne,ye){var Ie,Le=[],Be=[],ot=Mt[ne+" "];if(!ot){for(ye||(ye=_r(ne)),Ie=ye.length;Ie--;)ot=en(ye[Ie]),ot[Ue]?Le.push(ot):Be.push(ot);ot=Mt(ne,cl(Be,Le)),ot.selector=ne}return ot}function dl(ne,ye,Ie,Le){var Be,ot,ht,yt,dt,Ut=typeof ne=="function"&&ne,kt=!Le&&_r(ne=Ut.selector||ne);if(Ie=Ie||[],kt.length===1){if(ot=kt[0]=kt[0].slice(0),ot.length>2&&(ht=ot[0]).type==="ID"&&ye.nodeType===9&&ue&&T.relative[ot[1].type]){if(ye=(T.find.ID(ht.matches[0].replace(ys,Ms),ye)||[])[0],ye)Ut&&(ye=ye.parentNode);else return Ie;ne=ne.slice(ot.shift().value.length)}for(Be=Zs.needsContext.test(ne)?0:ot.length;Be--&&(ht=ot[Be],!T.relative[yt=ht.type]);)if((dt=T.find[yt])&&(Le=dt(ht.matches[0].replace(ys,Ms),tr.test(ot[0].type)&&go(ye.parentNode)||ye))){if(ot.splice(Be,1),ne=Le.length&&Si(ot),!ne)return V.apply(Ie,Le),Ie;break}}return(Ut||yo(ne,kt))(Le,ye,!ue,Ie,!ye||tr.test(ne)&&go(ye.parentNode)||ye),Ie}m.sortStable=Ue.split("").sort(ci).join("")===Ue,_n(),m.sortDetached=Tr(function(ne){return ne.compareDocumentPosition(Q.createElement("fieldset"))&1}),E.find=Zt,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Zt.compile=yo,Zt.select=dl,Zt.setDocument=_n,Zt.tokenize=_r,Zt.escape=E.escapeSelector,Zt.getText=E.text,Zt.isXML=E.isXMLDoc,Zt.selectors=E.expr,Zt.support=E.support,Zt.uniqueSort=E.uniqueSort})();var Qe=function(p,T,D){for(var k=[],U=D!==void 0;(p=p[T])&&p.nodeType!==9;)if(p.nodeType===1){if(U&&E(p).is(D))break;k.push(p)}return k},rt=function(p,T){for(var D=[];p;p=p.nextSibling)p.nodeType===1&&p!==T&&D.push(p);return D},gt=E.expr.match.needsContext,et=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ye(p,T,D){return v(T)?E.grep(p,function(k,U){return!!T.call(k,U,k)!==D}):T.nodeType?E.grep(p,function(k){return k===T!==D}):typeof T!="string"?E.grep(p,function(k){return o.call(T,k)>-1!==D}):E.filter(T,p,D)}E.filter=function(p,T,D){var k=T[0];return D&&(p=":not("+p+")"),T.length===1&&k.nodeType===1?E.find.matchesSelector(k,p)?[k]:[]:E.find.matches(p,E.grep(T,function(U){return U.nodeType===1}))},E.fn.extend({find:function(p){var T,D,k=this.length,U=this;if(typeof p!="string")return this.pushStack(E(p).filter(function(){for(T=0;T<k;T++)if(E.contains(U[T],this))return!0}));for(D=this.pushStack([]),T=0;T<k;T++)E.find(p,U[T],D);return k>1?E.uniqueSort(D):D},filter:function(p){return this.pushStack(Ye(this,p||[],!1))},not:function(p){return this.pushStack(Ye(this,p||[],!0))},is:function(p){return!!Ye(this,typeof p=="string"&&gt.test(p)?E(p):p||[],!1).length}});var St,wt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,xt=E.fn.init=function(p,T,D){var k,U;if(!p)return this;if(D=D||St,typeof p=="string")if(p[0]==="<"&&p[p.length-1]===">"&&p.length>=3?k=[null,p,null]:k=wt.exec(p),k&&(k[1]||!T))if(k[1]){if(T=T instanceof E?T[0]:T,E.merge(this,E.parseHTML(k[1],T&&T.nodeType?T.ownerDocument||T:A,!0)),et.test(k[1])&&E.isPlainObject(T))for(k in T)v(this[k])?this[k](T[k]):this.attr(k,T[k]);return this}else return U=A.getElementById(k[2]),U&&(this[0]=U,this.length=1),this;else return!T||T.jquery?(T||D).find(p):this.constructor(T).find(p);else{if(p.nodeType)return this[0]=p,this.length=1,this;if(v(p))return D.ready!==void 0?D.ready(p):p(E)}return E.makeArray(p,this)};xt.prototype=E.fn,St=E(A);var At=/^(?:parents|prev(?:Until|All))/,ni={children:!0,contents:!0,next:!0,prev:!0};E.fn.extend({has:function(p){var T=E(p,this),D=T.length;return this.filter(function(){for(var k=0;k<D;k++)if(E.contains(this,T[k]))return!0})},closest:function(p,T){var D,k=0,U=this.length,V=[],Q=typeof p!="string"&&E(p);if(!gt.test(p)){for(;k<U;k++)for(D=this[k];D&&D!==T;D=D.parentNode)if(D.nodeType<11&&(Q?Q.index(D)>-1:D.nodeType===1&&E.find.matchesSelector(D,p))){V.push(D);break}}return this.pushStack(V.length>1?E.uniqueSort(V):V)},index:function(p){return p?typeof p=="string"?o.call(E(p),this[0]):o.call(this,p.jquery?p[0]:p):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(p,T){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(p,T))))},addBack:function(p){return this.add(p==null?this.prevObject:this.prevObject.filter(p))}});function Xt(p,T){for(;(p=p[T])&&p.nodeType!==1;);return p}E.each({parent:function(p){var T=p.parentNode;return T&&T.nodeType!==11?T:null},parents:function(p){return Qe(p,"parentNode")},parentsUntil:function(p,T,D){return Qe(p,"parentNode",D)},next:function(p){return Xt(p,"nextSibling")},prev:function(p){return Xt(p,"previousSibling")},nextAll:function(p){return Qe(p,"nextSibling")},prevAll:function(p){return Qe(p,"previousSibling")},nextUntil:function(p,T,D){return Qe(p,"nextSibling",D)},prevUntil:function(p,T,D){return Qe(p,"previousSibling",D)},siblings:function(p){return rt((p.parentNode||{}).firstChild,p)},children:function(p){return rt(p.firstChild)},contents:function(p){return p.contentDocument!=null&&i(p.contentDocument)?p.contentDocument:(Z(p,"template")&&(p=p.content||p),E.merge([],p.childNodes))}},function(p,T){E.fn[p]=function(D,k){var U=E.map(this,T,D);return p.slice(-5)!=="Until"&&(k=D),k&&typeof k=="string"&&(U=E.filter(k,U)),this.length>1&&(ni[p]||E.uniqueSort(U),At.test(p)&&U.reverse()),this.pushStack(U)}});var Fe=/[^\x20\t\r\n\f]+/g;function ki(p){var T={};return E.each(p.match(Fe)||[],function(D,k){T[k]=!0}),T}E.Callbacks=function(p){p=typeof p=="string"?ki(p):E.extend({},p);var T,D,k,U,V=[],Q=[],he=-1,ue=function(){for(U=U||p.once,k=T=!0;Q.length;he=-1)for(D=Q.shift();++he<V.length;)V[he].apply(D[0],D[1])===!1&&p.stopOnFalse&&(he=V.length,D=!1);p.memory||(D=!1),T=!1,U&&(D?V=[]:V="")},_e={add:function(){return V&&(D&&!T&&(he=V.length-1,Q.push(D)),function Me(Ue){E.each(Ue,function(xe,Ze){v(Ze)?(!p.unique||!_e.has(Ze))&&V.push(Ze):Ze&&Ze.length&&O(Ze)!=="string"&&Me(Ze)})}(arguments),D&&!T&&ue()),this},remove:function(){return E.each(arguments,function(Me,Ue){for(var xe;(xe=E.inArray(Ue,V,xe))>-1;)V.splice(xe,1),xe<=he&&he--}),this},has:function(Me){return Me?E.inArray(Me,V)>-1:V.length>0},empty:function(){return V&&(V=[]),this},disable:function(){return U=Q=[],V=D="",this},disabled:function(){return!V},lock:function(){return U=Q=[],!D&&!T&&(V=D=""),this},locked:function(){return!!U},fireWith:function(Me,Ue){return U||(Ue=Ue||[],Ue=[Me,Ue.slice?Ue.slice():Ue],Q.push(Ue),T||ue()),this},fire:function(){return _e.fireWith(this,arguments),this},fired:function(){return!!k}};return _e};function _i(p){return p}function Ri(p){throw p}function pi(p,T,D,k){var U;try{p&&v(U=p.promise)?U.call(p).done(T).fail(D):p&&v(U=p.then)?U.call(p,T,D):T.apply(void 0,[p].slice(k))}catch(V){D.apply(void 0,[V])}}E.extend({Deferred:function(p){var T=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],D="pending",k={state:function(){return D},always:function(){return U.done(arguments).fail(arguments),this},catch:function(V){return k.then(null,V)},pipe:function(){var V=arguments;return E.Deferred(function(Q){E.each(T,function(he,ue){var _e=v(V[ue[4]])&&V[ue[4]];U[ue[1]](function(){var Me=_e&&_e.apply(this,arguments);Me&&v(Me.promise)?Me.promise().progress(Q.notify).done(Q.resolve).fail(Q.reject):Q[ue[0]+"With"](this,_e?[Me]:arguments)})}),V=null}).promise()},then:function(V,Q,he){var ue=0;function _e(Me,Ue,xe,Ze){return function(){var Rt=this,Vt=arguments,Mt=function(){var ci,ss;if(!(Me<ue)){if(ci=xe.apply(Rt,Vt),ci===Ue.promise())throw new TypeError("Thenable self-resolution");ss=ci&&(typeof ci=="object"||typeof ci=="function")&&ci.then,v(ss)?Ze?ss.call(ci,_e(ue,Ue,_i,Ze),_e(ue,Ue,Ri,Ze)):(ue++,ss.call(ci,_e(ue,Ue,_i,Ze),_e(ue,Ue,Ri,Ze),_e(ue,Ue,_i,Ue.notifyWith))):(xe!==_i&&(Rt=void 0,Vt=[ci]),(Ze||Ue.resolveWith)(Rt,Vt))}},bi=Ze?Mt:function(){try{Mt()}catch(ci){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(ci,bi.error),Me+1>=ue&&(xe!==Ri&&(Rt=void 0,Vt=[ci]),Ue.rejectWith(Rt,Vt))}};Me?bi():(E.Deferred.getErrorHook?bi.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(bi.error=E.Deferred.getStackHook()),s.setTimeout(bi))}}return E.Deferred(function(Me){T[0][3].add(_e(0,Me,v(he)?he:_i,Me.notifyWith)),T[1][3].add(_e(0,Me,v(V)?V:_i)),T[2][3].add(_e(0,Me,v(Q)?Q:Ri))}).promise()},promise:function(V){return V!=null?E.extend(V,k):k}},U={};return E.each(T,function(V,Q){var he=Q[2],ue=Q[5];k[Q[1]]=he.add,ue&&he.add(function(){D=ue},T[3-V][2].disable,T[3-V][3].disable,T[0][2].lock,T[0][3].lock),he.add(Q[3].fire),U[Q[0]]=function(){return U[Q[0]+"With"](this===U?void 0:this,arguments),this},U[Q[0]+"With"]=he.fireWith}),k.promise(U),p&&p.call(U,U),U},when:function(p){var T=arguments.length,D=T,k=Array(D),U=n.call(arguments),V=E.Deferred(),Q=function(he){return function(ue){k[he]=this,U[he]=arguments.length>1?n.call(arguments):ue,--T||V.resolveWith(k,U)}};if(T<=1&&(pi(p,V.done(Q(D)).resolve,V.reject,!T),V.state()==="pending"||v(U[D]&&U[D].then)))return V.then();for(;D--;)pi(U[D],Q(D),V.reject);return V.promise()}});var Ui=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(p,T){s.console&&s.console.warn&&p&&Ui.test(p.name)&&s.console.warn("jQuery.Deferred exception: "+p.message,p.stack,T)},E.readyException=function(p){s.setTimeout(function(){throw p})};var fs=E.Deferred();E.fn.ready=function(p){return fs.then(p).catch(function(T){E.readyException(T)}),this},E.extend({isReady:!1,readyWait:1,ready:function(p){(p===!0?--E.readyWait:E.isReady)||(E.isReady=!0,!(p!==!0&&--E.readyWait>0)&&fs.resolveWith(A,[E]))}}),E.ready.then=fs.then;function Lt(){A.removeEventListener("DOMContentLoaded",Lt),s.removeEventListener("load",Lt),E.ready()}A.readyState==="complete"||A.readyState!=="loading"&&!A.documentElement.doScroll?s.setTimeout(E.ready):(A.addEventListener("DOMContentLoaded",Lt),s.addEventListener("load",Lt));var d=function(p,T,D,k,U,V,Q){var he=0,ue=p.length,_e=D==null;if(O(D)==="object"){U=!0;for(he in D)d(p,T,he,D[he],!0,V,Q)}else if(k!==void 0&&(U=!0,v(k)||(Q=!0),_e&&(Q?(T.call(p,k),T=null):(_e=T,T=function(Me,Ue,xe){return _e.call(E(Me),xe)})),T))for(;he<ue;he++)T(p[he],D,Q?k:k.call(p[he],he,T(p[he],D)));return U?p:_e?T.call(p):ue?T(p[0],D):V},x=/^-ms-/,C=/-([a-z])/g;function I(p,T){return T.toUpperCase()}function M(p){return p.replace(x,"ms-").replace(C,I)}var P=function(p){return p.nodeType===1||p.nodeType===9||!+p.nodeType};function Y(){this.expando=E.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(p){var T=p[this.expando];return T||(T={},P(p)&&(p.nodeType?p[this.expando]=T:Object.defineProperty(p,this.expando,{value:T,configurable:!0}))),T},set:function(p,T,D){var k,U=this.cache(p);if(typeof T=="string")U[M(T)]=D;else for(k in T)U[M(k)]=T[k];return U},get:function(p,T){return T===void 0?this.cache(p):p[this.expando]&&p[this.expando][M(T)]},access:function(p,T,D){return T===void 0||T&&typeof T=="string"&&D===void 0?this.get(p,T):(this.set(p,T,D),D!==void 0?D:T)},remove:function(p,T){var D,k=p[this.expando];if(k!==void 0){if(T!==void 0)for(Array.isArray(T)?T=T.map(M):(T=M(T),T=T in k?[T]:T.match(Fe)||[]),D=T.length;D--;)delete k[T[D]];(T===void 0||E.isEmptyObject(k))&&(p.nodeType?p[this.expando]=void 0:delete p[this.expando])}},hasData:function(p){var T=p[this.expando];return T!==void 0&&!E.isEmptyObject(T)}};var j=new Y,G=new Y,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/[A-Z]/g;function z(p){return p==="true"?!0:p==="false"?!1:p==="null"?null:p===+p+""?+p:J.test(p)?JSON.parse(p):p}function ee(p,T,D){var k;if(D===void 0&&p.nodeType===1)if(k="data-"+T.replace(q,"-$&").toLowerCase(),D=p.getAttribute(k),typeof D=="string"){try{D=z(D)}catch{}G.set(p,T,D)}else D=void 0;return D}E.extend({hasData:function(p){return G.hasData(p)||j.hasData(p)},data:function(p,T,D){return G.access(p,T,D)},removeData:function(p,T){G.remove(p,T)},_data:function(p,T,D){return j.access(p,T,D)},_removeData:function(p,T){j.remove(p,T)}}),E.fn.extend({data:function(p,T){var D,k,U,V=this[0],Q=V&&V.attributes;if(p===void 0){if(this.length&&(U=G.get(V),V.nodeType===1&&!j.get(V,"hasDataAttrs"))){for(D=Q.length;D--;)Q[D]&&(k=Q[D].name,k.indexOf("data-")===0&&(k=M(k.slice(5)),ee(V,k,U[k])));j.set(V,"hasDataAttrs",!0)}return U}return typeof p=="object"?this.each(function(){G.set(this,p)}):d(this,function(he){var ue;if(V&&he===void 0)return ue=G.get(V,p),ue!==void 0||(ue=ee(V,p),ue!==void 0)?ue:void 0;this.each(function(){G.set(this,p,he)})},null,T,arguments.length>1,null,!0)},removeData:function(p){return this.each(function(){G.remove(this,p)})}}),E.extend({queue:function(p,T,D){var k;if(p)return T=(T||"fx")+"queue",k=j.get(p,T),D&&(!k||Array.isArray(D)?k=j.access(p,T,E.makeArray(D)):k.push(D)),k||[]},dequeue:function(p,T){T=T||"fx";var D=E.queue(p,T),k=D.length,U=D.shift(),V=E._queueHooks(p,T),Q=function(){E.dequeue(p,T)};U==="inprogress"&&(U=D.shift(),k--),U&&(T==="fx"&&D.unshift("inprogress"),delete V.stop,U.call(p,Q,V)),!k&&V&&V.empty.fire()},_queueHooks:function(p,T){var D=T+"queueHooks";return j.get(p,D)||j.access(p,D,{empty:E.Callbacks("once memory").add(function(){j.remove(p,[T+"queue",D])})})}}),E.fn.extend({queue:function(p,T){var D=2;return typeof p!="string"&&(T=p,p="fx",D--),arguments.length<D?E.queue(this[0],p):T===void 0?this:this.each(function(){var k=E.queue(this,p,T);E._queueHooks(this,p),p==="fx"&&k[0]!=="inprogress"&&E.dequeue(this,p)})},dequeue:function(p){return this.each(function(){E.dequeue(this,p)})},clearQueue:function(p){return this.queue(p||"fx",[])},promise:function(p,T){var D,k=1,U=E.Deferred(),V=this,Q=this.length,he=function(){--k||U.resolveWith(V,[V])};for(typeof p!="string"&&(T=p,p=void 0),p=p||"fx";Q--;)D=j.get(V[Q],p+"queueHooks"),D&&D.empty&&(k++,D.empty.add(he));return he(),U.promise(T)}});var se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,le=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),de=["Top","Right","Bottom","Left"],ke=A.documentElement,me=function(p){return E.contains(p.ownerDocument,p)},De={composed:!0};ke.getRootNode&&(me=function(p){return E.contains(p.ownerDocument,p)||p.getRootNode(De)===p.ownerDocument});var Se=function(p,T){return p=T||p,p.style.display==="none"||p.style.display===""&&me(p)&&E.css(p,"display")==="none"};function Ke(p,T,D,k){var U,V,Q=20,he=k?function(){return k.cur()}:function(){return E.css(p,T,"")},ue=he(),_e=D&&D[3]||(E.cssNumber[T]?"":"px"),Me=p.nodeType&&(E.cssNumber[T]||_e!=="px"&&+ue)&&le.exec(E.css(p,T));if(Me&&Me[3]!==_e){for(ue=ue/2,_e=_e||Me[3],Me=+ue||1;Q--;)E.style(p,T,Me+_e),(1-V)*(1-(V=he()/ue||.5))<=0&&(Q=0),Me=Me/V;Me=Me*2,E.style(p,T,Me+_e),D=D||[]}return D&&(Me=+Me||+ue||0,U=D[1]?Me+(D[1]+1)*D[2]:+D[2],k&&(k.unit=_e,k.start=Me,k.end=U)),U}var nt={};function qe(p){var T,D=p.ownerDocument,k=p.nodeName,U=nt[k];return U||(T=D.body.appendChild(D.createElement(k)),U=E.css(T,"display"),T.parentNode.removeChild(T),U==="none"&&(U="block"),nt[k]=U,U)}function Je(p,T){for(var D,k,U=[],V=0,Q=p.length;V<Q;V++)k=p[V],k.style&&(D=k.style.display,T?(D==="none"&&(U[V]=j.get(k,"display")||null,U[V]||(k.style.display="")),k.style.display===""&&Se(k)&&(U[V]=qe(k))):D!=="none"&&(U[V]="none",j.set(k,"display",D)));for(V=0;V<Q;V++)U[V]!=null&&(p[V].style.display=U[V]);return p}E.fn.extend({show:function(){return Je(this,!0)},hide:function(){return Je(this)},toggle:function(p){return typeof p=="boolean"?p?this.show():this.hide():this.each(function(){Se(this)?E(this).show():E(this).hide()})}});var it=/^(?:checkbox|radio)$/i,ze=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,$e=/^$|^module$|\/(?:java|ecma)script/i;(function(){var p=A.createDocumentFragment(),T=p.appendChild(A.createElement("div")),D=A.createElement("input");D.setAttribute("type","radio"),D.setAttribute("checked","checked"),D.setAttribute("name","t"),T.appendChild(D),m.checkClone=T.cloneNode(!0).cloneNode(!0).lastChild.checked,T.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!T.cloneNode(!0).lastChild.defaultValue,T.innerHTML="<option></option>",m.option=!!T.lastChild})();var Pe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,m.option||(Pe.optgroup=Pe.option=[1,"<select multiple='multiple'>","</select>"]);function tt(p,T){var D;return typeof p.getElementsByTagName<"u"?D=p.getElementsByTagName(T||"*"):typeof p.querySelectorAll<"u"?D=p.querySelectorAll(T||"*"):D=[],T===void 0||T&&Z(p,T)?E.merge([p],D):D}function _t(p,T){for(var D=0,k=p.length;D<k;D++)j.set(p[D],"globalEval",!T||j.get(T[D],"globalEval"))}var at=/<|&#?\w+;/;function Ct(p,T,D,k,U){for(var V,Q,he,ue,_e,Me,Ue=T.createDocumentFragment(),xe=[],Ze=0,Rt=p.length;Ze<Rt;Ze++)if(V=p[Ze],V||V===0)if(O(V)==="object")E.merge(xe,V.nodeType?[V]:V);else if(!at.test(V))xe.push(T.createTextNode(V));else{for(Q=Q||Ue.appendChild(T.createElement("div")),he=(ze.exec(V)||["",""])[1].toLowerCase(),ue=Pe[he]||Pe._default,Q.innerHTML=ue[1]+E.htmlPrefilter(V)+ue[2],Me=ue[0];Me--;)Q=Q.lastChild;E.merge(xe,Q.childNodes),Q=Ue.firstChild,Q.textContent=""}for(Ue.textContent="",Ze=0;V=xe[Ze++];){if(k&&E.inArray(V,k)>-1){U&&U.push(V);continue}if(_e=me(V),Q=tt(Ue.appendChild(V),"script"),_e&&_t(Q),D)for(Me=0;V=Q[Me++];)$e.test(V.type||"")&&D.push(V)}return Ue}var Tt=/^([^.]*)(?:\.(.+)|)/;function Bt(){return!0}function Wt(){return!1}function Ai(p,T,D,k,U,V){var Q,he;if(typeof T=="object"){typeof D!="string"&&(k=k||D,D=void 0);for(he in T)Ai(p,he,D,k,T[he],V);return p}if(k==null&&U==null?(U=D,k=D=void 0):U==null&&(typeof D=="string"?(U=k,k=void 0):(U=k,k=D,D=void 0)),U===!1)U=Wt;else if(!U)return p;return V===1&&(Q=U,U=function(ue){return E().off(ue),Q.apply(this,arguments)},U.guid=Q.guid||(Q.guid=E.guid++)),p.each(function(){E.event.add(this,T,U,k,D)})}E.event={global:{},add:function(p,T,D,k,U){var V,Q,he,ue,_e,Me,Ue,xe,Ze,Rt,Vt,Mt=j.get(p);if(!!P(p))for(D.handler&&(V=D,D=V.handler,U=V.selector),U&&E.find.matchesSelector(ke,U),D.guid||(D.guid=E.guid++),(ue=Mt.events)||(ue=Mt.events=Object.create(null)),(Q=Mt.handle)||(Q=Mt.handle=function(bi){return typeof E<"u"&&E.event.triggered!==bi.type?E.event.dispatch.apply(p,arguments):void 0}),T=(T||"").match(Fe)||[""],_e=T.length;_e--;)he=Tt.exec(T[_e])||[],Ze=Vt=he[1],Rt=(he[2]||"").split(".").sort(),Ze&&(Ue=E.event.special[Ze]||{},Ze=(U?Ue.delegateType:Ue.bindType)||Ze,Ue=E.event.special[Ze]||{},Me=E.extend({type:Ze,origType:Vt,data:k,handler:D,guid:D.guid,selector:U,needsContext:U&&E.expr.match.needsContext.test(U),namespace:Rt.join(".")},V),(xe=ue[Ze])||(xe=ue[Ze]=[],xe.delegateCount=0,(!Ue.setup||Ue.setup.call(p,k,Rt,Q)===!1)&&p.addEventListener&&p.addEventListener(Ze,Q)),Ue.add&&(Ue.add.call(p,Me),Me.handler.guid||(Me.handler.guid=D.guid)),U?xe.splice(xe.delegateCount++,0,Me):xe.push(Me),E.event.global[Ze]=!0)},remove:function(p,T,D,k,U){var V,Q,he,ue,_e,Me,Ue,xe,Ze,Rt,Vt,Mt=j.hasData(p)&&j.get(p);if(!(!Mt||!(ue=Mt.events))){for(T=(T||"").match(Fe)||[""],_e=T.length;_e--;){if(he=Tt.exec(T[_e])||[],Ze=Vt=he[1],Rt=(he[2]||"").split(".").sort(),!Ze){for(Ze in ue)E.event.remove(p,Ze+T[_e],D,k,!0);continue}for(Ue=E.event.special[Ze]||{},Ze=(k?Ue.delegateType:Ue.bindType)||Ze,xe=ue[Ze]||[],he=he[2]&&new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"),Q=V=xe.length;V--;)Me=xe[V],(U||Vt===Me.origType)&&(!D||D.guid===Me.guid)&&(!he||he.test(Me.namespace))&&(!k||k===Me.selector||k==="**"&&Me.selector)&&(xe.splice(V,1),Me.selector&&xe.delegateCount--,Ue.remove&&Ue.remove.call(p,Me));Q&&!xe.length&&((!Ue.teardown||Ue.teardown.call(p,Rt,Mt.handle)===!1)&&E.removeEvent(p,Ze,Mt.handle),delete ue[Ze])}E.isEmptyObject(ue)&&j.remove(p,"handle events")}},dispatch:function(p){var T,D,k,U,V,Q,he=new Array(arguments.length),ue=E.event.fix(p),_e=(j.get(this,"events")||Object.create(null))[ue.type]||[],Me=E.event.special[ue.type]||{};for(he[0]=ue,T=1;T<arguments.length;T++)he[T]=arguments[T];if(ue.delegateTarget=this,!(Me.preDispatch&&Me.preDispatch.call(this,ue)===!1)){for(Q=E.event.handlers.call(this,ue,_e),T=0;(U=Q[T++])&&!ue.isPropagationStopped();)for(ue.currentTarget=U.elem,D=0;(V=U.handlers[D++])&&!ue.isImmediatePropagationStopped();)(!ue.rnamespace||V.namespace===!1||ue.rnamespace.test(V.namespace))&&(ue.handleObj=V,ue.data=V.data,k=((E.event.special[V.origType]||{}).handle||V.handler).apply(U.elem,he),k!==void 0&&(ue.result=k)===!1&&(ue.preventDefault(),ue.stopPropagation()));return Me.postDispatch&&Me.postDispatch.call(this,ue),ue.result}},handlers:function(p,T){var D,k,U,V,Q,he=[],ue=T.delegateCount,_e=p.target;if(ue&&_e.nodeType&&!(p.type==="click"&&p.button>=1)){for(;_e!==this;_e=_e.parentNode||this)if(_e.nodeType===1&&!(p.type==="click"&&_e.disabled===!0)){for(V=[],Q={},D=0;D<ue;D++)k=T[D],U=k.selector+" ",Q[U]===void 0&&(Q[U]=k.needsContext?E(U,this).index(_e)>-1:E.find(U,this,null,[_e]).length),Q[U]&&V.push(k);V.length&&he.push({elem:_e,handlers:V})}}return _e=this,ue<T.length&&he.push({elem:_e,handlers:T.slice(ue)}),he},addProp:function(p,T){Object.defineProperty(E.Event.prototype,p,{enumerable:!0,configurable:!0,get:v(T)?function(){if(this.originalEvent)return T(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[p]},set:function(D){Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:D})}})},fix:function(p){return p[E.expando]?p:new E.Event(p)},special:{load:{noBubble:!0},click:{setup:function(p){var T=this||p;return it.test(T.type)&&T.click&&Z(T,"input")&&Hi(T,"click",!0),!1},trigger:function(p){var T=this||p;return it.test(T.type)&&T.click&&Z(T,"input")&&Hi(T,"click"),!0},_default:function(p){var T=p.target;return it.test(T.type)&&T.click&&Z(T,"input")&&j.get(T,"click")||Z(T,"a")}},beforeunload:{postDispatch:function(p){p.result!==void 0&&p.originalEvent&&(p.originalEvent.returnValue=p.result)}}}};function Hi(p,T,D){if(!D){j.get(p,T)===void 0&&E.event.add(p,T,Bt);return}j.set(p,T,!1),E.event.add(p,T,{namespace:!1,handler:function(k){var U,V=j.get(this,T);if(k.isTrigger&1&&this[T]){if(V)(E.event.special[T]||{}).delegateType&&k.stopPropagation();else if(V=n.call(arguments),j.set(this,T,V),this[T](),U=j.get(this,T),j.set(this,T,!1),V!==U)return k.stopImmediatePropagation(),k.preventDefault(),U}else V&&(j.set(this,T,E.event.trigger(V[0],V.slice(1),this)),k.stopPropagation(),k.isImmediatePropagationStopped=Bt)}})}E.removeEvent=function(p,T,D){p.removeEventListener&&p.removeEventListener(T,D)},E.Event=function(p,T){if(!(this instanceof E.Event))return new E.Event(p,T);p&&p.type?(this.originalEvent=p,this.type=p.type,this.isDefaultPrevented=p.defaultPrevented||p.defaultPrevented===void 0&&p.returnValue===!1?Bt:Wt,this.target=p.target&&p.target.nodeType===3?p.target.parentNode:p.target,this.currentTarget=p.currentTarget,this.relatedTarget=p.relatedTarget):this.type=p,T&&E.extend(this,T),this.timeStamp=p&&p.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Wt,isPropagationStopped:Wt,isImmediatePropagationStopped:Wt,isSimulated:!1,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=Bt,p&&!this.isSimulated&&p.preventDefault()},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=Bt,p&&!this.isSimulated&&p.stopPropagation()},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=Bt,p&&!this.isSimulated&&p.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(p,T){function D(k){if(A.documentMode){var U=j.get(this,"handle"),V=E.event.fix(k);V.type=k.type==="focusin"?"focus":"blur",V.isSimulated=!0,U(k),V.target===V.currentTarget&&U(V)}else E.event.simulate(T,k.target,E.event.fix(k))}E.event.special[p]={setup:function(){var k;if(Hi(this,p,!0),A.documentMode)k=j.get(this,T),k||this.addEventListener(T,D),j.set(this,T,(k||0)+1);else return!1},trigger:function(){return Hi(this,p),!0},teardown:function(){var k;if(A.documentMode)k=j.get(this,T)-1,k?j.set(this,T,k):(this.removeEventListener(T,D),j.remove(this,T));else return!1},_default:function(k){return j.get(k.target,p)},delegateType:T},E.event.special[T]={setup:function(){var k=this.ownerDocument||this.document||this,U=A.documentMode?this:k,V=j.get(U,T);V||(A.documentMode?this.addEventListener(T,D):k.addEventListener(p,D,!0)),j.set(U,T,(V||0)+1)},teardown:function(){var k=this.ownerDocument||this.document||this,U=A.documentMode?this:k,V=j.get(U,T)-1;V?j.set(U,T,V):(A.documentMode?this.removeEventListener(T,D):k.removeEventListener(p,D,!0),j.remove(U,T))}}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,T){E.event.special[p]={delegateType:T,bindType:T,handle:function(D){var k,U=this,V=D.relatedTarget,Q=D.handleObj;return(!V||V!==U&&!E.contains(U,V))&&(D.type=Q.origType,k=Q.handler.apply(this,arguments),D.type=T),k}}}),E.fn.extend({on:function(p,T,D,k){return Ai(this,p,T,D,k)},one:function(p,T,D,k){return Ai(this,p,T,D,k,1)},off:function(p,T,D){var k,U;if(p&&p.preventDefault&&p.handleObj)return k=p.handleObj,E(p.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:k.origType,k.selector,k.handler),this;if(typeof p=="object"){for(U in p)this.off(U,T,p[U]);return this}return(T===!1||typeof T=="function")&&(D=T,T=void 0),D===!1&&(D=Wt),this.each(function(){E.event.remove(this,p,D,T)})}});var Ds=/<script|<style|<link/i,vi=/checked\s*(?:[^=]|=\s*.checked.)/i,Ls=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Vi(p,T){return Z(p,"table")&&Z(T.nodeType!==11?T:T.firstChild,"tr")&&E(p).children("tbody")[0]||p}function es(p){return p.type=(p.getAttribute("type")!==null)+"/"+p.type,p}function Ni(p){return(p.type||"").slice(0,5)==="true/"?p.type=p.type.slice(5):p.removeAttribute("type"),p}function ks(p,T){var D,k,U,V,Q,he,ue;if(T.nodeType===1){if(j.hasData(p)&&(V=j.get(p),ue=V.events,ue)){j.remove(T,"handle events");for(U in ue)for(D=0,k=ue[U].length;D<k;D++)E.event.add(T,U,ue[U][D])}G.hasData(p)&&(Q=G.access(p),he=E.extend({},Q),G.set(T,he))}}function Qt(p,T){var D=T.nodeName.toLowerCase();D==="input"&&it.test(p.type)?T.checked=p.checked:(D==="input"||D==="textarea")&&(T.defaultValue=p.defaultValue)}function ps(p,T,D,k){T=r(T);var U,V,Q,he,ue,_e,Me=0,Ue=p.length,xe=Ue-1,Ze=T[0],Rt=v(Ze);if(Rt||Ue>1&&typeof Ze=="string"&&!m.checkClone&&vi.test(Ze))return p.each(function(Vt){var Mt=p.eq(Vt);Rt&&(T[0]=Ze.call(this,Vt,Mt.html())),ps(Mt,T,D,k)});if(Ue&&(U=Ct(T,p[0].ownerDocument,!1,p,k),V=U.firstChild,U.childNodes.length===1&&(U=V),V||k)){for(Q=E.map(tt(U,"script"),es),he=Q.length;Me<Ue;Me++)ue=U,Me!==xe&&(ue=E.clone(ue,!0,!0),he&&E.merge(Q,tt(ue,"script"))),D.call(p[Me],ue,Me);if(he)for(_e=Q[Q.length-1].ownerDocument,E.map(Q,Ni),Me=0;Me<he;Me++)ue=Q[Me],$e.test(ue.type||"")&&!j.access(ue,"globalEval")&&E.contains(_e,ue)&&(ue.src&&(ue.type||"").toLowerCase()!=="module"?E._evalUrl&&!ue.noModule&&E._evalUrl(ue.src,{nonce:ue.nonce||ue.getAttribute("nonce")},_e):F(ue.textContent.replace(Ls,""),ue,_e))}return p}function Ks(p,T,D){for(var k,U=T?E.filter(T,p):p,V=0;(k=U[V])!=null;V++)!D&&k.nodeType===1&&E.cleanData(tt(k)),k.parentNode&&(D&&me(k)&&_t(tt(k,"script")),k.parentNode.removeChild(k));return p}E.extend({htmlPrefilter:function(p){return p},clone:function(p,T,D){var k,U,V,Q,he=p.cloneNode(!0),ue=me(p);if(!m.noCloneChecked&&(p.nodeType===1||p.nodeType===11)&&!E.isXMLDoc(p))for(Q=tt(he),V=tt(p),k=0,U=V.length;k<U;k++)Qt(V[k],Q[k]);if(T)if(D)for(V=V||tt(p),Q=Q||tt(he),k=0,U=V.length;k<U;k++)ks(V[k],Q[k]);else ks(p,he);return Q=tt(he,"script"),Q.length>0&&_t(Q,!ue&&tt(p,"script")),he},cleanData:function(p){for(var T,D,k,U=E.event.special,V=0;(D=p[V])!==void 0;V++)if(P(D)){if(T=D[j.expando]){if(T.events)for(k in T.events)U[k]?E.event.remove(D,k):E.removeEvent(D,k,T.handle);D[j.expando]=void 0}D[G.expando]&&(D[G.expando]=void 0)}}}),E.fn.extend({detach:function(p){return Ks(this,p,!0)},remove:function(p){return Ks(this,p)},text:function(p){return d(this,function(T){return T===void 0?E.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=T)})},null,p,arguments.length)},append:function(){return ps(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var T=Vi(this,p);T.appendChild(p)}})},prepend:function(){return ps(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var T=Vi(this,p);T.insertBefore(p,T.firstChild)}})},before:function(){return ps(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this)})},after:function(){return ps(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this.nextSibling)})},empty:function(){for(var p,T=0;(p=this[T])!=null;T++)p.nodeType===1&&(E.cleanData(tt(p,!1)),p.textContent="");return this},clone:function(p,T){return p=p??!1,T=T??p,this.map(function(){return E.clone(this,p,T)})},html:function(p){return d(this,function(T){var D=this[0]||{},k=0,U=this.length;if(T===void 0&&D.nodeType===1)return D.innerHTML;if(typeof T=="string"&&!Ds.test(T)&&!Pe[(ze.exec(T)||["",""])[1].toLowerCase()]){T=E.htmlPrefilter(T);try{for(;k<U;k++)D=this[k]||{},D.nodeType===1&&(E.cleanData(tt(D,!1)),D.innerHTML=T);D=0}catch{}}D&&this.empty().append(T)},null,p,arguments.length)},replaceWith:function(){var p=[];return ps(this,arguments,function(T){var D=this.parentNode;E.inArray(this,p)<0&&(E.cleanData(tt(this)),D&&D.replaceChild(T,this))},p)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(p,T){E.fn[p]=function(D){for(var k,U=[],V=E(D),Q=V.length-1,he=0;he<=Q;he++)k=he===Q?this:this.clone(!0),E(V[he])[T](k),a.apply(U,k.get());return this.pushStack(U)}});var Ys=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),Zn=/^--/,ts=function(p){var T=p.ownerDocument.defaultView;return(!T||!T.opener)&&(T=s),T.getComputedStyle(p)},Jt=function(p,T,D){var k,U,V={};for(U in T)V[U]=p.style[U],p.style[U]=T[U];k=D.call(p);for(U in T)p.style[U]=V[U];return k},Xo=new RegExp(de.join("|"),"i");(function(){function p(){if(!!_e){ue.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",_e.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ke.appendChild(ue).appendChild(_e);var Me=s.getComputedStyle(_e);D=Me.top!=="1%",he=T(Me.marginLeft)===12,_e.style.right="60%",V=T(Me.right)===36,k=T(Me.width)===36,_e.style.position="absolute",U=T(_e.offsetWidth/3)===12,ke.removeChild(ue),_e=null}}function T(Me){return Math.round(parseFloat(Me))}var D,k,U,V,Q,he,ue=A.createElement("div"),_e=A.createElement("div");!_e.style||(_e.style.backgroundClip="content-box",_e.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=_e.style.backgroundClip==="content-box",E.extend(m,{boxSizingReliable:function(){return p(),k},pixelBoxStyles:function(){return p(),V},pixelPosition:function(){return p(),D},reliableMarginLeft:function(){return p(),he},scrollboxSize:function(){return p(),U},reliableTrDimensions:function(){var Me,Ue,xe,Ze;return Q==null&&(Me=A.createElement("table"),Ue=A.createElement("tr"),xe=A.createElement("div"),Me.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ue.style.cssText="box-sizing:content-box;border:1px solid",Ue.style.height="1px",xe.style.height="9px",xe.style.display="block",ke.appendChild(Me).appendChild(Ue).appendChild(xe),Ze=s.getComputedStyle(Ue),Q=parseInt(Ze.height,10)+parseInt(Ze.borderTopWidth,10)+parseInt(Ze.borderBottomWidth,10)===Ue.offsetHeight,ke.removeChild(Me)),Q}}))})();function gn(p,T,D){var k,U,V,Q,he=Zn.test(T),ue=p.style;return D=D||ts(p),D&&(Q=D.getPropertyValue(T)||D[T],he&&Q&&(Q=Q.replace(we,"$1")||void 0),Q===""&&!me(p)&&(Q=E.style(p,T)),!m.pixelBoxStyles()&&Ys.test(Q)&&Xo.test(T)&&(k=ue.width,U=ue.minWidth,V=ue.maxWidth,ue.minWidth=ue.maxWidth=ue.width=Q,Q=D.width,ue.width=k,ue.minWidth=U,ue.maxWidth=V)),Q!==void 0?Q+"":Q}function zr(p,T){return{get:function(){if(p()){delete this.get;return}return(this.get=T).apply(this,arguments)}}}var Qo=["Webkit","Moz","ms"],Jo=A.createElement("div").style,so={};function no(p){for(var T=p[0].toUpperCase()+p.slice(1),D=Qo.length;D--;)if(p=Qo[D]+T,p in Jo)return p}function Wr(p){var T=E.cssProps[p]||so[p];return T||(p in Jo?p:so[p]=no(p)||p)}var ro=/^(none|table(?!-c[ea]).+)/,Zo={position:"absolute",visibility:"hidden",display:"block"},el={letterSpacing:"0",fontWeight:"400"};function Kr(p,T,D){var k=le.exec(T);return k?Math.max(0,k[2]-(D||0))+(k[3]||"px"):T}function gr(p,T,D,k,U,V){var Q=T==="width"?1:0,he=0,ue=0,_e=0;if(D===(k?"border":"content"))return 0;for(;Q<4;Q+=2)D==="margin"&&(_e+=E.css(p,D+de[Q],!0,U)),k?(D==="content"&&(ue-=E.css(p,"padding"+de[Q],!0,U)),D!=="margin"&&(ue-=E.css(p,"border"+de[Q]+"Width",!0,U))):(ue+=E.css(p,"padding"+de[Q],!0,U),D!=="padding"?ue+=E.css(p,"border"+de[Q]+"Width",!0,U):he+=E.css(p,"border"+de[Q]+"Width",!0,U));return!k&&V>=0&&(ue+=Math.max(0,Math.ceil(p["offset"+T[0].toUpperCase()+T.slice(1)]-V-ue-he-.5))||0),ue+_e}function ao(p,T,D){var k=ts(p),U=!m.boxSizingReliable()||D,V=U&&E.css(p,"boxSizing",!1,k)==="border-box",Q=V,he=gn(p,T,k),ue="offset"+T[0].toUpperCase()+T.slice(1);if(Ys.test(he)){if(!D)return he;he="auto"}return(!m.boxSizingReliable()&&V||!m.reliableTrDimensions()&&Z(p,"tr")||he==="auto"||!parseFloat(he)&&E.css(p,"display",!1,k)==="inline")&&p.getClientRects().length&&(V=E.css(p,"boxSizing",!1,k)==="border-box",Q=ue in p,Q&&(he=p[ue])),he=parseFloat(he)||0,he+gr(p,T,D||(V?"border":"content"),Q,k,he)+"px"}E.extend({cssHooks:{opacity:{get:function(p,T){if(T){var D=gn(p,"opacity");return D===""?"1":D}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(p,T,D,k){if(!(!p||p.nodeType===3||p.nodeType===8||!p.style)){var U,V,Q,he=M(T),ue=Zn.test(T),_e=p.style;if(ue||(T=Wr(he)),Q=E.cssHooks[T]||E.cssHooks[he],D!==void 0){if(V=typeof D,V==="string"&&(U=le.exec(D))&&U[1]&&(D=Ke(p,T,U),V="number"),D==null||D!==D)return;V==="number"&&!ue&&(D+=U&&U[3]||(E.cssNumber[he]?"":"px")),!m.clearCloneStyle&&D===""&&T.indexOf("background")===0&&(_e[T]="inherit"),(!Q||!("set"in Q)||(D=Q.set(p,D,k))!==void 0)&&(ue?_e.setProperty(T,D):_e[T]=D)}else return Q&&"get"in Q&&(U=Q.get(p,!1,k))!==void 0?U:_e[T]}},css:function(p,T,D,k){var U,V,Q,he=M(T),ue=Zn.test(T);return ue||(T=Wr(he)),Q=E.cssHooks[T]||E.cssHooks[he],Q&&"get"in Q&&(U=Q.get(p,!0,D)),U===void 0&&(U=gn(p,T,k)),U==="normal"&&T in el&&(U=el[T]),D===""||D?(V=parseFloat(U),D===!0||isFinite(V)?V||0:U):U}}),E.each(["height","width"],function(p,T){E.cssHooks[T]={get:function(D,k,U){if(k)return ro.test(E.css(D,"display"))&&(!D.getClientRects().length||!D.getBoundingClientRect().width)?Jt(D,Zo,function(){return ao(D,T,U)}):ao(D,T,U)},set:function(D,k,U){var V,Q=ts(D),he=!m.scrollboxSize()&&Q.position==="absolute",ue=he||U,_e=ue&&E.css(D,"boxSizing",!1,Q)==="border-box",Me=U?gr(D,T,U,_e,Q):0;return _e&&he&&(Me-=Math.ceil(D["offset"+T[0].toUpperCase()+T.slice(1)]-parseFloat(Q[T])-gr(D,T,"border",!1,Q)-.5)),Me&&(V=le.exec(k))&&(V[3]||"px")!=="px"&&(D.style[T]=k,k=E.css(D,T)),Kr(D,k,Me)}}}),E.cssHooks.marginLeft=zr(m.reliableMarginLeft,function(p,T){if(T)return(parseFloat(gn(p,"marginLeft"))||p.getBoundingClientRect().left-Jt(p,{marginLeft:0},function(){return p.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(p,T){E.cssHooks[p+T]={expand:function(D){for(var k=0,U={},V=typeof D=="string"?D.split(" "):[D];k<4;k++)U[p+de[k]+T]=V[k]||V[k-2]||V[0];return U}},p!=="margin"&&(E.cssHooks[p+T].set=Kr)}),E.fn.extend({css:function(p,T){return d(this,function(D,k,U){var V,Q,he={},ue=0;if(Array.isArray(k)){for(V=ts(D),Q=k.length;ue<Q;ue++)he[k[ue]]=E.css(D,k[ue],!1,V);return he}return U!==void 0?E.style(D,k,U):E.css(D,k)},p,T,arguments.length>1)}});function Pi(p,T,D,k,U){return new Pi.prototype.init(p,T,D,k,U)}E.Tween=Pi,Pi.prototype={constructor:Pi,init:function(p,T,D,k,U,V){this.elem=p,this.prop=D,this.easing=U||E.easing._default,this.options=T,this.start=this.now=this.cur(),this.end=k,this.unit=V||(E.cssNumber[D]?"":"px")},cur:function(){var p=Pi.propHooks[this.prop];return p&&p.get?p.get(this):Pi.propHooks._default.get(this)},run:function(p){var T,D=Pi.propHooks[this.prop];return this.options.duration?this.pos=T=E.easing[this.easing](p,this.options.duration*p,0,1,this.options.duration):this.pos=T=p,this.now=(this.end-this.start)*T+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),D&&D.set?D.set(this):Pi.propHooks._default.set(this),this}},Pi.prototype.init.prototype=Pi.prototype,Pi.propHooks={_default:{get:function(p){var T;return p.elem.nodeType!==1||p.elem[p.prop]!=null&&p.elem.style[p.prop]==null?p.elem[p.prop]:(T=E.css(p.elem,p.prop,""),!T||T==="auto"?0:T)},set:function(p){E.fx.step[p.prop]?E.fx.step[p.prop](p):p.elem.nodeType===1&&(E.cssHooks[p.prop]||p.elem.style[Wr(p.prop)]!=null)?E.style(p.elem,p.prop,p.now+p.unit):p.elem[p.prop]=p.now}}},Pi.propHooks.scrollTop=Pi.propHooks.scrollLeft={set:function(p){p.elem.nodeType&&p.elem.parentNode&&(p.elem[p.prop]=p.now)}},E.easing={linear:function(p){return p},swing:function(p){return .5-Math.cos(p*Math.PI)/2},_default:"swing"},E.fx=Pi.prototype.init,E.fx.step={};var Xs,Rn,Yr=/^(?:toggle|show|hide)$/,mr=/queueHooks$/;function ya(){Rn&&(A.hidden===!1&&s.requestAnimationFrame?s.requestAnimationFrame(ya):s.setTimeout(ya,E.fx.interval),E.fx.tick())}function Du(){return s.setTimeout(function(){Xs=void 0}),Xs=Date.now()}function Pn(p,T){var D,k=0,U={height:p};for(T=T?1:0;k<4;k+=2-T)D=de[k],U["margin"+D]=U["padding"+D]=p;return T&&(U.opacity=U.width=p),U}function mn(p,T,D){for(var k,U=(gs.tweeners[T]||[]).concat(gs.tweeners["*"]),V=0,Q=U.length;V<Q;V++)if(k=U[V].call(D,T,p))return k}function va(p,T,D){var k,U,V,Q,he,ue,_e,Me,Ue="width"in T||"height"in T,xe=this,Ze={},Rt=p.style,Vt=p.nodeType&&Se(p),Mt=j.get(p,"fxshow");D.queue||(Q=E._queueHooks(p,"fx"),Q.unqueued==null&&(Q.unqueued=0,he=Q.empty.fire,Q.empty.fire=function(){Q.unqueued||he()}),Q.unqueued++,xe.always(function(){xe.always(function(){Q.unqueued--,E.queue(p,"fx").length||Q.empty.fire()})}));for(k in T)if(U=T[k],Yr.test(U)){if(delete T[k],V=V||U==="toggle",U===(Vt?"hide":"show"))if(U==="show"&&Mt&&Mt[k]!==void 0)Vt=!0;else continue;Ze[k]=Mt&&Mt[k]||E.style(p,k)}if(ue=!E.isEmptyObject(T),!(!ue&&E.isEmptyObject(Ze))){Ue&&p.nodeType===1&&(D.overflow=[Rt.overflow,Rt.overflowX,Rt.overflowY],_e=Mt&&Mt.display,_e==null&&(_e=j.get(p,"display")),Me=E.css(p,"display"),Me==="none"&&(_e?Me=_e:(Je([p],!0),_e=p.style.display||_e,Me=E.css(p,"display"),Je([p]))),(Me==="inline"||Me==="inline-block"&&_e!=null)&&E.css(p,"float")==="none"&&(ue||(xe.done(function(){Rt.display=_e}),_e==null&&(Me=Rt.display,_e=Me==="none"?"":Me)),Rt.display="inline-block")),D.overflow&&(Rt.overflow="hidden",xe.always(function(){Rt.overflow=D.overflow[0],Rt.overflowX=D.overflow[1],Rt.overflowY=D.overflow[2]})),ue=!1;for(k in Ze)ue||(Mt?"hidden"in Mt&&(Vt=Mt.hidden):Mt=j.access(p,"fxshow",{display:_e}),V&&(Mt.hidden=!Vt),Vt&&Je([p],!0),xe.done(function(){Vt||Je([p]),j.remove(p,"fxshow");for(k in Ze)E.style(p,k,Ze[k])})),ue=mn(Vt?Mt[k]:0,k,xe),k in Mt||(Mt[k]=ue.start,Vt&&(ue.end=ue.start,ue.start=0))}}function Lu(p,T){var D,k,U,V,Q;for(D in p)if(k=M(D),U=T[k],V=p[D],Array.isArray(V)&&(U=V[1],V=p[D]=V[0]),D!==k&&(p[k]=V,delete p[D]),Q=E.cssHooks[k],Q&&"expand"in Q){V=Q.expand(V),delete p[k];for(D in V)D in p||(p[D]=V[D],T[D]=U)}else T[k]=U}function gs(p,T,D){var k,U,V=0,Q=gs.prefilters.length,he=E.Deferred().always(function(){delete ue.elem}),ue=function(){if(U)return!1;for(var Ue=Xs||Du(),xe=Math.max(0,_e.startTime+_e.duration-Ue),Ze=xe/_e.duration||0,Rt=1-Ze,Vt=0,Mt=_e.tweens.length;Vt<Mt;Vt++)_e.tweens[Vt].run(Rt);return he.notifyWith(p,[_e,Rt,xe]),Rt<1&&Mt?xe:(Mt||he.notifyWith(p,[_e,1,0]),he.resolveWith(p,[_e]),!1)},_e=he.promise({elem:p,props:E.extend({},T),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},D),originalProperties:T,originalOptions:D,startTime:Xs||Du(),duration:D.duration,tweens:[],createTween:function(Ue,xe){var Ze=E.Tween(p,_e.opts,Ue,xe,_e.opts.specialEasing[Ue]||_e.opts.easing);return _e.tweens.push(Ze),Ze},stop:function(Ue){var xe=0,Ze=Ue?_e.tweens.length:0;if(U)return this;for(U=!0;xe<Ze;xe++)_e.tweens[xe].run(1);return Ue?(he.notifyWith(p,[_e,1,0]),he.resolveWith(p,[_e,Ue])):he.rejectWith(p,[_e,Ue]),this}}),Me=_e.props;for(Lu(Me,_e.opts.specialEasing);V<Q;V++)if(k=gs.prefilters[V].call(_e,p,Me,_e.opts),k)return v(k.stop)&&(E._queueHooks(_e.elem,_e.opts.queue).stop=k.stop.bind(k)),k;return E.map(Me,mn,_e),v(_e.opts.start)&&_e.opts.start.call(p,_e),_e.progress(_e.opts.progress).done(_e.opts.done,_e.opts.complete).fail(_e.opts.fail).always(_e.opts.always),E.fx.timer(E.extend(ue,{elem:p,anim:_e,queue:_e.opts.queue})),_e}E.Animation=E.extend(gs,{tweeners:{"*":[function(p,T){var D=this.createTween(p,T);return Ke(D.elem,p,le.exec(T),D),D}]},tweener:function(p,T){v(p)?(T=p,p=["*"]):p=p.match(Fe);for(var D,k=0,U=p.length;k<U;k++)D=p[k],gs.tweeners[D]=gs.tweeners[D]||[],gs.tweeners[D].unshift(T)},prefilters:[va],prefilter:function(p,T){T?gs.prefilters.unshift(p):gs.prefilters.push(p)}}),E.speed=function(p,T,D){var k=p&&typeof p=="object"?E.extend({},p):{complete:D||!D&&T||v(p)&&p,duration:p,easing:D&&T||T&&!v(T)&&T};return E.fx.off?k.duration=0:typeof k.duration!="number"&&(k.duration in E.fx.speeds?k.duration=E.fx.speeds[k.duration]:k.duration=E.fx.speeds._default),(k.queue==null||k.queue===!0)&&(k.queue="fx"),k.old=k.complete,k.complete=function(){v(k.old)&&k.old.call(this),k.queue&&E.dequeue(this,k.queue)},k},E.fn.extend({fadeTo:function(p,T,D,k){return this.filter(Se).css("opacity",0).show().end().animate({opacity:T},p,D,k)},animate:function(p,T,D,k){var U=E.isEmptyObject(p),V=E.speed(T,D,k),Q=function(){var he=gs(this,E.extend({},p),V);(U||j.get(this,"finish"))&&he.stop(!0)};return Q.finish=Q,U||V.queue===!1?this.each(Q):this.queue(V.queue,Q)},stop:function(p,T,D){var k=function(U){var V=U.stop;delete U.stop,V(D)};return typeof p!="string"&&(D=T,T=p,p=void 0),T&&this.queue(p||"fx",[]),this.each(function(){var U=!0,V=p!=null&&p+"queueHooks",Q=E.timers,he=j.get(this);if(V)he[V]&&he[V].stop&&k(he[V]);else for(V in he)he[V]&&he[V].stop&&mr.test(V)&&k(he[V]);for(V=Q.length;V--;)Q[V].elem===this&&(p==null||Q[V].queue===p)&&(Q[V].anim.stop(D),U=!1,Q.splice(V,1));(U||!D)&&E.dequeue(this,p)})},finish:function(p){return p!==!1&&(p=p||"fx"),this.each(function(){var T,D=j.get(this),k=D[p+"queue"],U=D[p+"queueHooks"],V=E.timers,Q=k?k.length:0;for(D.finish=!0,E.queue(this,p,[]),U&&U.stop&&U.stop.call(this,!0),T=V.length;T--;)V[T].elem===this&&V[T].queue===p&&(V[T].anim.stop(!0),V.splice(T,1));for(T=0;T<Q;T++)k[T]&&k[T].finish&&k[T].finish.call(this);delete D.finish})}}),E.each(["toggle","show","hide"],function(p,T){var D=E.fn[T];E.fn[T]=function(k,U,V){return k==null||typeof k=="boolean"?D.apply(this,arguments):this.animate(Pn(T,!0),k,U,V)}}),E.each({slideDown:Pn("show"),slideUp:Pn("hide"),slideToggle:Pn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(p,T){E.fn[p]=function(D,k,U){return this.animate(T,D,k,U)}}),E.timers=[],E.fx.tick=function(){var p,T=0,D=E.timers;for(Xs=Date.now();T<D.length;T++)p=D[T],!p()&&D[T]===p&&D.splice(T--,1);D.length||E.fx.stop(),Xs=void 0},E.fx.timer=function(p){E.timers.push(p),E.fx.start()},E.fx.interval=13,E.fx.start=function(){Rn||(Rn=!0,ya())},E.fx.stop=function(){Rn=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(p,T){return p=E.fx&&E.fx.speeds[p]||p,T=T||"fx",this.queue(T,function(D,k){var U=s.setTimeout(D,p);k.stop=function(){s.clearTimeout(U)}})},function(){var p=A.createElement("input"),T=A.createElement("select"),D=T.appendChild(A.createElement("option"));p.type="checkbox",m.checkOn=p.value!=="",m.optSelected=D.selected,p=A.createElement("input"),p.value="t",p.type="radio",m.radioValue=p.value==="t"}();var Ta,Ki=E.expr.attrHandle;E.fn.extend({attr:function(p,T){return d(this,E.attr,p,T,arguments.length>1)},removeAttr:function(p){return this.each(function(){E.removeAttr(this,p)})}}),E.extend({attr:function(p,T,D){var k,U,V=p.nodeType;if(!(V===3||V===8||V===2)){if(typeof p.getAttribute>"u")return E.prop(p,T,D);if((V!==1||!E.isXMLDoc(p))&&(U=E.attrHooks[T.toLowerCase()]||(E.expr.match.bool.test(T)?Ta:void 0)),D!==void 0){if(D===null){E.removeAttr(p,T);return}return U&&"set"in U&&(k=U.set(p,D,T))!==void 0?k:(p.setAttribute(T,D+""),D)}return U&&"get"in U&&(k=U.get(p,T))!==null?k:(k=E.find.attr(p,T),k??void 0)}},attrHooks:{type:{set:function(p,T){if(!m.radioValue&&T==="radio"&&Z(p,"input")){var D=p.value;return p.setAttribute("type",T),D&&(p.value=D),T}}}},removeAttr:function(p,T){var D,k=0,U=T&&T.match(Fe);if(U&&p.nodeType===1)for(;D=U[k++];)p.removeAttribute(D)}}),Ta={set:function(p,T,D){return T===!1?E.removeAttr(p,D):p.setAttribute(D,D),D}},E.each(E.expr.match.bool.source.match(/\w+/g),function(p,T){var D=Ki[T]||E.find.attr;Ki[T]=function(k,U,V){var Q,he,ue=U.toLowerCase();return V||(he=Ki[ue],Ki[ue]=Q,Q=D(k,U,V)!=null?ue:null,Ki[ue]=he),Q}});var oo=/^(?:input|select|textarea|button)$/i,yn=/^(?:a|area)$/i;E.fn.extend({prop:function(p,T){return d(this,E.prop,p,T,arguments.length>1)},removeProp:function(p){return this.each(function(){delete this[E.propFix[p]||p]})}}),E.extend({prop:function(p,T,D){var k,U,V=p.nodeType;if(!(V===3||V===8||V===2))return(V!==1||!E.isXMLDoc(p))&&(T=E.propFix[T]||T,U=E.propHooks[T]),D!==void 0?U&&"set"in U&&(k=U.set(p,D,T))!==void 0?k:p[T]=D:U&&"get"in U&&(k=U.get(p,T))!==null?k:p[T]},propHooks:{tabIndex:{get:function(p){var T=E.find.attr(p,"tabindex");return T?parseInt(T,10):oo.test(p.nodeName)||yn.test(p.nodeName)&&p.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(p){var T=p.parentNode;return T&&T.parentNode&&T.parentNode.selectedIndex,null},set:function(p){var T=p.parentNode;T&&(T.selectedIndex,T.parentNode&&T.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this});function is(p){var T=p.match(Fe)||[];return T.join(" ")}function Qs(p){return p.getAttribute&&p.getAttribute("class")||""}function On(p){return Array.isArray(p)?p:typeof p=="string"?p.match(Fe)||[]:[]}E.fn.extend({addClass:function(p){var T,D,k,U,V,Q;return v(p)?this.each(function(he){E(this).addClass(p.call(this,he,Qs(this)))}):(T=On(p),T.length?this.each(function(){if(k=Qs(this),D=this.nodeType===1&&" "+is(k)+" ",D){for(V=0;V<T.length;V++)U=T[V],D.indexOf(" "+U+" ")<0&&(D+=U+" ");Q=is(D),k!==Q&&this.setAttribute("class",Q)}}):this)},removeClass:function(p){var T,D,k,U,V,Q;return v(p)?this.each(function(he){E(this).removeClass(p.call(this,he,Qs(this)))}):arguments.length?(T=On(p),T.length?this.each(function(){if(k=Qs(this),D=this.nodeType===1&&" "+is(k)+" ",D){for(V=0;V<T.length;V++)for(U=T[V];D.indexOf(" "+U+" ")>-1;)D=D.replace(" "+U+" "," ");Q=is(D),k!==Q&&this.setAttribute("class",Q)}}):this):this.attr("class","")},toggleClass:function(p,T){var D,k,U,V,Q=typeof p,he=Q==="string"||Array.isArray(p);return v(p)?this.each(function(ue){E(this).toggleClass(p.call(this,ue,Qs(this),T),T)}):typeof T=="boolean"&&he?T?this.addClass(p):this.removeClass(p):(D=On(p),this.each(function(){if(he)for(V=E(this),U=0;U<D.length;U++)k=D[U],V.hasClass(k)?V.removeClass(k):V.addClass(k);else(p===void 0||Q==="boolean")&&(k=Qs(this),k&&j.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||p===!1?"":j.get(this,"__className__")||""))}))},hasClass:function(p){var T,D,k=0;for(T=" "+p+" ";D=this[k++];)if(D.nodeType===1&&(" "+is(Qs(D))+" ").indexOf(T)>-1)return!0;return!1}});var lo=/\r/g;E.fn.extend({val:function(p){var T,D,k,U=this[0];return arguments.length?(k=v(p),this.each(function(V){var Q;this.nodeType===1&&(k?Q=p.call(this,V,E(this).val()):Q=p,Q==null?Q="":typeof Q=="number"?Q+="":Array.isArray(Q)&&(Q=E.map(Q,function(he){return he==null?"":he+""})),T=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],(!T||!("set"in T)||T.set(this,Q,"value")===void 0)&&(this.value=Q))})):U?(T=E.valHooks[U.type]||E.valHooks[U.nodeName.toLowerCase()],T&&"get"in T&&(D=T.get(U,"value"))!==void 0?D:(D=U.value,typeof D=="string"?D.replace(lo,""):D??"")):void 0}}),E.extend({valHooks:{option:{get:function(p){var T=E.find.attr(p,"value");return T??is(E.text(p))}},select:{get:function(p){var T,D,k,U=p.options,V=p.selectedIndex,Q=p.type==="select-one",he=Q?null:[],ue=Q?V+1:U.length;for(V<0?k=ue:k=Q?V:0;k<ue;k++)if(D=U[k],(D.selected||k===V)&&!D.disabled&&(!D.parentNode.disabled||!Z(D.parentNode,"optgroup"))){if(T=E(D).val(),Q)return T;he.push(T)}return he},set:function(p,T){for(var D,k,U=p.options,V=E.makeArray(T),Q=U.length;Q--;)k=U[Q],(k.selected=E.inArray(E.valHooks.option.get(k),V)>-1)&&(D=!0);return D||(p.selectedIndex=-1),V}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(p,T){if(Array.isArray(T))return p.checked=E.inArray(E(p).val(),T)>-1}},m.checkOn||(E.valHooks[this].get=function(p){return p.getAttribute("value")===null?"on":p.value})});var yr=s.location,_a={guid:Date.now()},uo=/\?/;E.parseXML=function(p){var T,D;if(!p||typeof p!="string")return null;try{T=new s.DOMParser().parseFromString(p,"text/xml")}catch{}return D=T&&T.getElementsByTagName("parsererror")[0],(!T||D)&&E.error("Invalid XML: "+(D?E.map(D.childNodes,function(k){return k.textContent}).join(`
`):p)),T};var ba=/^(?:focusinfocus|focusoutblur)$/,tl=function(p){p.stopPropagation()};E.extend(E.event,{trigger:function(p,T,D,k){var U,V,Q,he,ue,_e,Me,Ue,xe=[D||A],Ze=c.call(p,"type")?p.type:p,Rt=c.call(p,"namespace")?p.namespace.split("."):[];if(V=Ue=Q=D=D||A,!(D.nodeType===3||D.nodeType===8)&&!ba.test(Ze+E.event.triggered)&&(Ze.indexOf(".")>-1&&(Rt=Ze.split("."),Ze=Rt.shift(),Rt.sort()),ue=Ze.indexOf(":")<0&&"on"+Ze,p=p[E.expando]?p:new E.Event(Ze,typeof p=="object"&&p),p.isTrigger=k?2:3,p.namespace=Rt.join("."),p.rnamespace=p.namespace?new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p.result=void 0,p.target||(p.target=D),T=T==null?[p]:E.makeArray(T,[p]),Me=E.event.special[Ze]||{},!(!k&&Me.trigger&&Me.trigger.apply(D,T)===!1))){if(!k&&!Me.noBubble&&!b(D)){for(he=Me.delegateType||Ze,ba.test(he+Ze)||(V=V.parentNode);V;V=V.parentNode)xe.push(V),Q=V;Q===(D.ownerDocument||A)&&xe.push(Q.defaultView||Q.parentWindow||s)}for(U=0;(V=xe[U++])&&!p.isPropagationStopped();)Ue=V,p.type=U>1?he:Me.bindType||Ze,_e=(j.get(V,"events")||Object.create(null))[p.type]&&j.get(V,"handle"),_e&&_e.apply(V,T),_e=ue&&V[ue],_e&&_e.apply&&P(V)&&(p.result=_e.apply(V,T),p.result===!1&&p.preventDefault());return p.type=Ze,!k&&!p.isDefaultPrevented()&&(!Me._default||Me._default.apply(xe.pop(),T)===!1)&&P(D)&&ue&&v(D[Ze])&&!b(D)&&(Q=D[ue],Q&&(D[ue]=null),E.event.triggered=Ze,p.isPropagationStopped()&&Ue.addEventListener(Ze,tl),D[Ze](),p.isPropagationStopped()&&Ue.removeEventListener(Ze,tl),E.event.triggered=void 0,Q&&(D[ue]=Q)),p.result}},simulate:function(p,T,D){var k=E.extend(new E.Event,D,{type:p,isSimulated:!0});E.event.trigger(k,null,T)}}),E.fn.extend({trigger:function(p,T){return this.each(function(){E.event.trigger(p,T,this)})},triggerHandler:function(p,T){var D=this[0];if(D)return E.event.trigger(p,T,D,!0)}});var Ea=/\[\]$/,Mn=/\r?\n/g,il=/^(?:submit|button|image|reset|file)$/i,ku=/^(?:input|select|textarea|keygen)/i;function vn(p,T,D,k){var U;if(Array.isArray(T))E.each(T,function(V,Q){D||Ea.test(p)?k(p,Q):vn(p+"["+(typeof Q=="object"&&Q!=null?V:"")+"]",Q,D,k)});else if(!D&&O(T)==="object")for(U in T)vn(p+"["+U+"]",T[U],D,k);else k(p,T)}E.param=function(p,T){var D,k=[],U=function(V,Q){var he=v(Q)?Q():Q;k[k.length]=encodeURIComponent(V)+"="+encodeURIComponent(he??"")};if(p==null)return"";if(Array.isArray(p)||p.jquery&&!E.isPlainObject(p))E.each(p,function(){U(this.name,this.value)});else for(D in p)vn(D,p[D],T,U);return k.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var p=E.prop(this,"elements");return p?E.makeArray(p):this}).filter(function(){var p=this.type;return this.name&&!E(this).is(":disabled")&&ku.test(this.nodeName)&&!il.test(p)&&(this.checked||!it.test(p))}).map(function(p,T){var D=E(this).val();return D==null?null:Array.isArray(D)?E.map(D,function(k){return{name:T.name,value:k.replace(Mn,`\r
`)}}):{name:T.name,value:D.replace(Mn,`\r
`)}}).get()}});var Sa=/%20/g,Ru=/#.*$/,Xr=/([?&])_=[^&]*/,Qr=/^(.*?):[ \t]*([^\r\n]*)$/mg,co=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pu=/^(?:GET|HEAD)$/,Ou=/^\/\//,ho={},xa={},sl="*/".concat("*"),Jr=A.createElement("a");Jr.href=yr.href;function fo(p){return function(T,D){typeof T!="string"&&(D=T,T="*");var k,U=0,V=T.toLowerCase().match(Fe)||[];if(v(D))for(;k=V[U++];)k[0]==="+"?(k=k.slice(1)||"*",(p[k]=p[k]||[]).unshift(D)):(p[k]=p[k]||[]).push(D)}}function nl(p,T,D,k){var U={},V=p===xa;function Q(he){var ue;return U[he]=!0,E.each(p[he]||[],function(_e,Me){var Ue=Me(T,D,k);if(typeof Ue=="string"&&!V&&!U[Ue])return T.dataTypes.unshift(Ue),Q(Ue),!1;if(V)return!(ue=Ue)}),ue}return Q(T.dataTypes[0])||!U["*"]&&Q("*")}function Nn(p,T){var D,k,U=E.ajaxSettings.flatOptions||{};for(D in T)T[D]!==void 0&&((U[D]?p:k||(k={}))[D]=T[D]);return k&&E.extend(!0,p,k),p}function Mu(p,T,D){for(var k,U,V,Q,he=p.contents,ue=p.dataTypes;ue[0]==="*";)ue.shift(),k===void 0&&(k=p.mimeType||T.getResponseHeader("Content-Type"));if(k){for(U in he)if(he[U]&&he[U].test(k)){ue.unshift(U);break}}if(ue[0]in D)V=ue[0];else{for(U in D){if(!ue[0]||p.converters[U+" "+ue[0]]){V=U;break}Q||(Q=U)}V=V||Q}if(V)return V!==ue[0]&&ue.unshift(V),D[V]}function Nu(p,T,D,k){var U,V,Q,he,ue,_e={},Me=p.dataTypes.slice();if(Me[1])for(Q in p.converters)_e[Q.toLowerCase()]=p.converters[Q];for(V=Me.shift();V;)if(p.responseFields[V]&&(D[p.responseFields[V]]=T),!ue&&k&&p.dataFilter&&(T=p.dataFilter(T,p.dataType)),ue=V,V=Me.shift(),V){if(V==="*")V=ue;else if(ue!=="*"&&ue!==V){if(Q=_e[ue+" "+V]||_e["* "+V],!Q){for(U in _e)if(he=U.split(" "),he[1]===V&&(Q=_e[ue+" "+he[0]]||_e["* "+he[0]],Q)){Q===!0?Q=_e[U]:_e[U]!==!0&&(V=he[0],Me.unshift(he[1]));break}}if(Q!==!0)if(Q&&p.throws)T=Q(T);else try{T=Q(T)}catch(Ue){return{state:"parsererror",error:Q?Ue:"No conversion from "+ue+" to "+V}}}}return{state:"success",data:T}}E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yr.href,type:"GET",isLocal:co.test(yr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sl,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(p,T){return T?Nn(Nn(p,E.ajaxSettings),T):Nn(E.ajaxSettings,p)},ajaxPrefilter:fo(ho),ajaxTransport:fo(xa),ajax:function(p,T){typeof p=="object"&&(T=p,p=void 0),T=T||{};var D,k,U,V,Q,he,ue,_e,Me,Ue,xe=E.ajaxSetup({},T),Ze=xe.context||xe,Rt=xe.context&&(Ze.nodeType||Ze.jquery)?E(Ze):E.event,Vt=E.Deferred(),Mt=E.Callbacks("once memory"),bi=xe.statusCode||{},ci={},ss={},ji="canceled",jt={readyState:0,getResponseHeader:function(Kt){var di;if(ue){if(!V)for(V={};di=Qr.exec(U);)V[di[1].toLowerCase()+" "]=(V[di[1].toLowerCase()+" "]||[]).concat(di[2]);di=V[Kt.toLowerCase()+" "]}return di==null?null:di.join(", ")},getAllResponseHeaders:function(){return ue?U:null},setRequestHeader:function(Kt,di){return ue==null&&(Kt=ss[Kt.toLowerCase()]=ss[Kt.toLowerCase()]||Kt,ci[Kt]=di),this},overrideMimeType:function(Kt){return ue==null&&(xe.mimeType=Kt),this},statusCode:function(Kt){var di;if(Kt)if(ue)jt.always(Kt[jt.status]);else for(di in Kt)bi[di]=[bi[di],Kt[di]];return this},abort:function(Kt){var di=Kt||ji;return D&&D.abort(di),Rs(0,di),this}};if(Vt.promise(jt),xe.url=((p||xe.url||yr.href)+"").replace(Ou,yr.protocol+"//"),xe.type=T.method||T.type||xe.method||xe.type,xe.dataTypes=(xe.dataType||"*").toLowerCase().match(Fe)||[""],xe.crossDomain==null){he=A.createElement("a");try{he.href=xe.url,he.href=he.href,xe.crossDomain=Jr.protocol+"//"+Jr.host!=he.protocol+"//"+he.host}catch{xe.crossDomain=!0}}if(xe.data&&xe.processData&&typeof xe.data!="string"&&(xe.data=E.param(xe.data,xe.traditional)),nl(ho,xe,T,jt),ue)return jt;_e=E.event&&xe.global,_e&&E.active++===0&&E.event.trigger("ajaxStart"),xe.type=xe.type.toUpperCase(),xe.hasContent=!Pu.test(xe.type),k=xe.url.replace(Ru,""),xe.hasContent?xe.data&&xe.processData&&(xe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(xe.data=xe.data.replace(Sa,"+")):(Ue=xe.url.slice(k.length),xe.data&&(xe.processData||typeof xe.data=="string")&&(k+=(uo.test(k)?"&":"?")+xe.data,delete xe.data),xe.cache===!1&&(k=k.replace(Xr,"$1"),Ue=(uo.test(k)?"&":"?")+"_="+_a.guid+++Ue),xe.url=k+Ue),xe.ifModified&&(E.lastModified[k]&&jt.setRequestHeader("If-Modified-Since",E.lastModified[k]),E.etag[k]&&jt.setRequestHeader("If-None-Match",E.etag[k])),(xe.data&&xe.hasContent&&xe.contentType!==!1||T.contentType)&&jt.setRequestHeader("Content-Type",xe.contentType),jt.setRequestHeader("Accept",xe.dataTypes[0]&&xe.accepts[xe.dataTypes[0]]?xe.accepts[xe.dataTypes[0]]+(xe.dataTypes[0]!=="*"?", "+sl+"; q=0.01":""):xe.accepts["*"]);for(Me in xe.headers)jt.setRequestHeader(Me,xe.headers[Me]);if(xe.beforeSend&&(xe.beforeSend.call(Ze,jt,xe)===!1||ue))return jt.abort();if(ji="abort",Mt.add(xe.complete),jt.done(xe.success),jt.fail(xe.error),D=nl(xa,xe,T,jt),!D)Rs(-1,"No Transport");else{if(jt.readyState=1,_e&&Rt.trigger("ajaxSend",[jt,xe]),ue)return jt;xe.async&&xe.timeout>0&&(Q=s.setTimeout(function(){jt.abort("timeout")},xe.timeout));try{ue=!1,D.send(ci,Rs)}catch(Kt){if(ue)throw Kt;Rs(-1,Kt)}}function Rs(Kt,di,Zr,po){var Ps,Fn,Zs,Os,Tn,ms=di;ue||(ue=!0,Q&&s.clearTimeout(Q),D=void 0,U=po||"",jt.readyState=Kt>0?4:0,Ps=Kt>=200&&Kt<300||Kt===304,Zr&&(Os=Mu(xe,jt,Zr)),!Ps&&E.inArray("script",xe.dataTypes)>-1&&E.inArray("json",xe.dataTypes)<0&&(xe.converters["text script"]=function(){}),Os=Nu(xe,Os,jt,Ps),Ps?(xe.ifModified&&(Tn=jt.getResponseHeader("Last-Modified"),Tn&&(E.lastModified[k]=Tn),Tn=jt.getResponseHeader("etag"),Tn&&(E.etag[k]=Tn)),Kt===204||xe.type==="HEAD"?ms="nocontent":Kt===304?ms="notmodified":(ms=Os.state,Fn=Os.data,Zs=Os.error,Ps=!Zs)):(Zs=ms,(Kt||!ms)&&(ms="error",Kt<0&&(Kt=0))),jt.status=Kt,jt.statusText=(di||ms)+"",Ps?Vt.resolveWith(Ze,[Fn,ms,jt]):Vt.rejectWith(Ze,[jt,ms,Zs]),jt.statusCode(bi),bi=void 0,_e&&Rt.trigger(Ps?"ajaxSuccess":"ajaxError",[jt,xe,Ps?Fn:Zs]),Mt.fireWith(Ze,[jt,ms]),_e&&(Rt.trigger("ajaxComplete",[jt,xe]),--E.active||E.event.trigger("ajaxStop")))}return jt},getJSON:function(p,T,D){return E.get(p,T,D,"json")},getScript:function(p,T){return E.get(p,void 0,T,"script")}}),E.each(["get","post"],function(p,T){E[T]=function(D,k,U,V){return v(k)&&(V=V||U,U=k,k=void 0),E.ajax(E.extend({url:D,type:T,dataType:V,data:k,success:U},E.isPlainObject(D)&&D))}}),E.ajaxPrefilter(function(p){var T;for(T in p.headers)T.toLowerCase()==="content-type"&&(p.contentType=p.headers[T]||"")}),E._evalUrl=function(p,T,D){return E.ajax({url:p,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(k){E.globalEval(k,T,D)}})},E.fn.extend({wrapAll:function(p){var T;return this[0]&&(v(p)&&(p=p.call(this[0])),T=E(p,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&T.insertBefore(this[0]),T.map(function(){for(var D=this;D.firstElementChild;)D=D.firstElementChild;return D}).append(this)),this},wrapInner:function(p){return v(p)?this.each(function(T){E(this).wrapInner(p.call(this,T))}):this.each(function(){var T=E(this),D=T.contents();D.length?D.wrapAll(p):T.append(p)})},wrap:function(p){var T=v(p);return this.each(function(D){E(this).wrapAll(T?p.call(this,D):p)})},unwrap:function(p){return this.parent(p).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(p){return!E.expr.pseudos.visible(p)},E.expr.pseudos.visible=function(p){return!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new s.XMLHttpRequest}catch{}};var Fu={0:200,1223:204},er=E.ajaxSettings.xhr();m.cors=!!er&&"withCredentials"in er,m.ajax=er=!!er,E.ajaxTransport(function(p){var T,D;if(m.cors||er&&!p.crossDomain)return{send:function(k,U){var V,Q=p.xhr();if(Q.open(p.type,p.url,p.async,p.username,p.password),p.xhrFields)for(V in p.xhrFields)Q[V]=p.xhrFields[V];p.mimeType&&Q.overrideMimeType&&Q.overrideMimeType(p.mimeType),!p.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");for(V in k)Q.setRequestHeader(V,k[V]);T=function(he){return function(){T&&(T=D=Q.onload=Q.onerror=Q.onabort=Q.ontimeout=Q.onreadystatechange=null,he==="abort"?Q.abort():he==="error"?typeof Q.status!="number"?U(0,"error"):U(Q.status,Q.statusText):U(Fu[Q.status]||Q.status,Q.statusText,(Q.responseType||"text")!=="text"||typeof Q.responseText!="string"?{binary:Q.response}:{text:Q.responseText},Q.getAllResponseHeaders()))}},Q.onload=T(),D=Q.onerror=Q.ontimeout=T("error"),Q.onabort!==void 0?Q.onabort=D:Q.onreadystatechange=function(){Q.readyState===4&&s.setTimeout(function(){T&&D()})},T=T("abort");try{Q.send(p.hasContent&&p.data||null)}catch(he){if(T)throw he}},abort:function(){T&&T()}}}),E.ajaxPrefilter(function(p){p.crossDomain&&(p.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(p){return E.globalEval(p),p}}}),E.ajaxPrefilter("script",function(p){p.cache===void 0&&(p.cache=!1),p.crossDomain&&(p.type="GET")}),E.ajaxTransport("script",function(p){if(p.crossDomain||p.scriptAttrs){var T,D;return{send:function(k,U){T=E("<script>").attr(p.scriptAttrs||{}).prop({charset:p.scriptCharset,src:p.url}).on("load error",D=function(V){T.remove(),D=null,V&&U(V.type==="error"?404:200,V.type)}),A.head.appendChild(T[0])},abort:function(){D&&D()}}}});var rl=[],Js=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var p=rl.pop()||E.expando+"_"+_a.guid++;return this[p]=!0,p}}),E.ajaxPrefilter("json jsonp",function(p,T,D){var k,U,V,Q=p.jsonp!==!1&&(Js.test(p.url)?"url":typeof p.data=="string"&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Js.test(p.data)&&"data");if(Q||p.dataTypes[0]==="jsonp")return k=p.jsonpCallback=v(p.jsonpCallback)?p.jsonpCallback():p.jsonpCallback,Q?p[Q]=p[Q].replace(Js,"$1"+k):p.jsonp!==!1&&(p.url+=(uo.test(p.url)?"&":"?")+p.jsonp+"="+k),p.converters["script json"]=function(){return V||E.error(k+" was not called"),V[0]},p.dataTypes[0]="json",U=s[k],s[k]=function(){V=arguments},D.always(function(){U===void 0?E(s).removeProp(k):s[k]=U,p[k]&&(p.jsonpCallback=T.jsonpCallback,rl.push(k)),V&&v(U)&&U(V[0]),V=U=void 0}),"script"}),m.createHTMLDocument=function(){var p=A.implementation.createHTMLDocument("").body;return p.innerHTML="<form></form><form></form>",p.childNodes.length===2}(),E.parseHTML=function(p,T,D){if(typeof p!="string")return[];typeof T=="boolean"&&(D=T,T=!1);var k,U,V;return T||(m.createHTMLDocument?(T=A.implementation.createHTMLDocument(""),k=T.createElement("base"),k.href=A.location.href,T.head.appendChild(k)):T=A),U=et.exec(p),V=!D&&[],U?[T.createElement(U[1])]:(U=Ct([p],T,V),V&&V.length&&E(V).remove(),E.merge([],U.childNodes))},E.fn.load=function(p,T,D){var k,U,V,Q=this,he=p.indexOf(" ");return he>-1&&(k=is(p.slice(he)),p=p.slice(0,he)),v(T)?(D=T,T=void 0):T&&typeof T=="object"&&(U="POST"),Q.length>0&&E.ajax({url:p,type:U||"GET",dataType:"html",data:T}).done(function(ue){V=arguments,Q.html(k?E("<div>").append(E.parseHTML(ue)).find(k):ue)}).always(D&&function(ue,_e){Q.each(function(){D.apply(this,V||[ue.responseText,_e,ue])})}),this},E.expr.pseudos.animated=function(p){return E.grep(E.timers,function(T){return p===T.elem}).length},E.offset={setOffset:function(p,T,D){var k,U,V,Q,he,ue,_e,Me=E.css(p,"position"),Ue=E(p),xe={};Me==="static"&&(p.style.position="relative"),he=Ue.offset(),V=E.css(p,"top"),ue=E.css(p,"left"),_e=(Me==="absolute"||Me==="fixed")&&(V+ue).indexOf("auto")>-1,_e?(k=Ue.position(),Q=k.top,U=k.left):(Q=parseFloat(V)||0,U=parseFloat(ue)||0),v(T)&&(T=T.call(p,D,E.extend({},he))),T.top!=null&&(xe.top=T.top-he.top+Q),T.left!=null&&(xe.left=T.left-he.left+U),"using"in T?T.using.call(p,xe):Ue.css(xe)}},E.fn.extend({offset:function(p){if(arguments.length)return p===void 0?this:this.each(function(U){E.offset.setOffset(this,p,U)});var T,D,k=this[0];if(!!k)return k.getClientRects().length?(T=k.getBoundingClientRect(),D=k.ownerDocument.defaultView,{top:T.top+D.pageYOffset,left:T.left+D.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var p,T,D,k=this[0],U={top:0,left:0};if(E.css(k,"position")==="fixed")T=k.getBoundingClientRect();else{for(T=this.offset(),D=k.ownerDocument,p=k.offsetParent||D.documentElement;p&&(p===D.body||p===D.documentElement)&&E.css(p,"position")==="static";)p=p.parentNode;p&&p!==k&&p.nodeType===1&&(U=E(p).offset(),U.top+=E.css(p,"borderTopWidth",!0),U.left+=E.css(p,"borderLeftWidth",!0))}return{top:T.top-U.top-E.css(k,"marginTop",!0),left:T.left-U.left-E.css(k,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var p=this.offsetParent;p&&E.css(p,"position")==="static";)p=p.offsetParent;return p||ke})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(p,T){var D=T==="pageYOffset";E.fn[p]=function(k){return d(this,function(U,V,Q){var he;if(b(U)?he=U:U.nodeType===9&&(he=U.defaultView),Q===void 0)return he?he[T]:U[V];he?he.scrollTo(D?he.pageXOffset:Q,D?Q:he.pageYOffset):U[V]=Q},p,k,arguments.length)}}),E.each(["top","left"],function(p,T){E.cssHooks[T]=zr(m.pixelPosition,function(D,k){if(k)return k=gn(D,T),Ys.test(k)?E(D).position()[T]+"px":k})}),E.each({Height:"height",Width:"width"},function(p,T){E.each({padding:"inner"+p,content:T,"":"outer"+p},function(D,k){E.fn[k]=function(U,V){var Q=arguments.length&&(D||typeof U!="boolean"),he=D||(U===!0||V===!0?"margin":"border");return d(this,function(ue,_e,Me){var Ue;return b(ue)?k.indexOf("outer")===0?ue["inner"+p]:ue.document.documentElement["client"+p]:ue.nodeType===9?(Ue=ue.documentElement,Math.max(ue.body["scroll"+p],Ue["scroll"+p],ue.body["offset"+p],Ue["offset"+p],Ue["client"+p])):Me===void 0?E.css(ue,_e,he):E.style(ue,_e,Me,he)},T,Q?U:void 0,Q)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(p,T){E.fn[T]=function(D){return this.on(T,D)}}),E.fn.extend({bind:function(p,T,D){return this.on(p,null,T,D)},unbind:function(p,T){return this.off(p,null,T)},delegate:function(p,T,D,k){return this.on(T,p,D,k)},undelegate:function(p,T,D){return arguments.length===1?this.off(p,"**"):this.off(T,p||"**",D)},hover:function(p,T){return this.on("mouseenter",p).on("mouseleave",T||p)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(p,T){E.fn[T]=function(D,k){return arguments.length>0?this.on(T,null,D,k):this.trigger(T)}});var Aa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(p,T){var D,k,U;if(typeof T=="string"&&(D=p[T],T=p,p=D),!!v(p))return k=n.call(arguments,2),U=function(){return p.apply(T||this,k.concat(n.call(arguments)))},U.guid=p.guid=p.guid||E.guid++,U},E.holdReady=function(p){p?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=Z,E.isFunction=v,E.isWindow=b,E.camelCase=M,E.type=O,E.now=Date.now,E.isNumeric=function(p){var T=E.type(p);return(T==="number"||T==="string")&&!isNaN(p-parseFloat(p))},E.trim=function(p){return p==null?"":(p+"").replace(Aa,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return E});var Ca=s.jQuery,$u=s.$;return E.noConflict=function(p){return s.$===E&&(s.$=$u),p&&s.jQuery===E&&(s.jQuery=Ca),E},typeof e>"u"&&(s.jQuery=s.$=E),E})});var wT=gi((yg,vg)=>{(function(s,e){typeof yg=="object"&&typeof vg<"u"?vg.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self).Swiper=e()})(yg,function(){"use strict";function s(d){return d!==null&&typeof d=="object"&&"constructor"in d&&d.constructor===Object}function e(d={},x={}){Object.keys(x).forEach(C=>{d[C]===void 0?d[C]=x[C]:s(x[C])&&s(d[C])&&Object.keys(x[C]).length>0&&e(d[C],x[C])})}let t={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function i(){let d=typeof document<"u"?document:{};return e(d,t),d}let n={document:t,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:d=>typeof setTimeout>"u"?(d(),null):setTimeout(d,0),cancelAnimationFrame(d){typeof setTimeout<"u"&&clearTimeout(d)}};function r(){let d=typeof window<"u"?window:{};return e(d,n),d}class a extends Array{constructor(x){super(...x||[]),function(C){let I=C.__proto__;Object.defineProperty(C,"__proto__",{get:()=>I,set(M){I.__proto__=M}})}(this)}}function o(d=[]){let x=[];return d.forEach(C=>{Array.isArray(C)?x.push(...o(C)):x.push(C)}),x}function l(d,x){return Array.prototype.filter.call(d,x)}function u(d,x){let C=r(),I=i(),M=[];if(!x&&d instanceof a)return d;if(!d)return new a(M);if(typeof d=="string"){let P=d.trim();if(P.indexOf("<")>=0&&P.indexOf(">")>=0){let Y="div";P.indexOf("<li")===0&&(Y="ul"),P.indexOf("<tr")===0&&(Y="tbody"),P.indexOf("<td")!==0&&P.indexOf("<th")!==0||(Y="tr"),P.indexOf("<tbody")===0&&(Y="table"),P.indexOf("<option")===0&&(Y="select");let j=I.createElement(Y);j.innerHTML=P;for(let G=0;G<j.childNodes.length;G+=1)M.push(j.childNodes[G])}else M=function(Y,j){if(typeof Y!="string")return[Y];let G=[],J=j.querySelectorAll(Y);for(let q=0;q<J.length;q+=1)G.push(J[q]);return G}(d.trim(),x||I)}else if(d.nodeType||d===C||d===I)M.push(d);else if(Array.isArray(d)){if(d instanceof a)return d;M=d}return new a(function(P){let Y=[];for(let j=0;j<P.length;j+=1)Y.indexOf(P[j])===-1&&Y.push(P[j]);return Y}(M))}u.fn=a.prototype;let c={addClass:function(...d){let x=o(d.map(C=>C.split(" ")));return this.forEach(C=>{C.classList.add(...x)}),this},removeClass:function(...d){let x=o(d.map(C=>C.split(" ")));return this.forEach(C=>{C.classList.remove(...x)}),this},hasClass:function(...d){let x=o(d.map(C=>C.split(" ")));return l(this,C=>x.filter(I=>C.classList.contains(I)).length>0).length>0},toggleClass:function(...d){let x=o(d.map(C=>C.split(" ")));this.forEach(C=>{x.forEach(I=>{C.classList.toggle(I)})})},attr:function(d,x){if(arguments.length===1&&typeof d=="string")return this[0]?this[0].getAttribute(d):void 0;for(let C=0;C<this.length;C+=1)if(arguments.length===2)this[C].setAttribute(d,x);else for(let I in d)this[C][I]=d[I],this[C].setAttribute(I,d[I]);return this},removeAttr:function(d){for(let x=0;x<this.length;x+=1)this[x].removeAttribute(d);return this},transform:function(d){for(let x=0;x<this.length;x+=1)this[x].style.transform=d;return this},transition:function(d){for(let x=0;x<this.length;x+=1)this[x].style.transitionDuration=typeof d!="string"?`${d}ms`:d;return this},on:function(...d){let[x,C,I,M]=d;function P(J){let q=J.target;if(!q)return;let z=J.target.dom7EventData||[];if(z.indexOf(J)<0&&z.unshift(J),u(q).is(C))I.apply(q,z);else{let ee=u(q).parents();for(let se=0;se<ee.length;se+=1)u(ee[se]).is(C)&&I.apply(ee[se],z)}}function Y(J){let q=J&&J.target&&J.target.dom7EventData||[];q.indexOf(J)<0&&q.unshift(J),I.apply(this,q)}typeof d[1]=="function"&&([x,I,M]=d,C=void 0),M||(M=!1);let j=x.split(" "),G;for(let J=0;J<this.length;J+=1){let q=this[J];if(C)for(G=0;G<j.length;G+=1){let z=j[G];q.dom7LiveListeners||(q.dom7LiveListeners={}),q.dom7LiveListeners[z]||(q.dom7LiveListeners[z]=[]),q.dom7LiveListeners[z].push({listener:I,proxyListener:P}),q.addEventListener(z,P,M)}else for(G=0;G<j.length;G+=1){let z=j[G];q.dom7Listeners||(q.dom7Listeners={}),q.dom7Listeners[z]||(q.dom7Listeners[z]=[]),q.dom7Listeners[z].push({listener:I,proxyListener:Y}),q.addEventListener(z,Y,M)}}return this},off:function(...d){let[x,C,I,M]=d;typeof d[1]=="function"&&([x,I,M]=d,C=void 0),M||(M=!1);let P=x.split(" ");for(let Y=0;Y<P.length;Y+=1){let j=P[Y];for(let G=0;G<this.length;G+=1){let J=this[G],q;if(!C&&J.dom7Listeners?q=J.dom7Listeners[j]:C&&J.dom7LiveListeners&&(q=J.dom7LiveListeners[j]),q&&q.length)for(let z=q.length-1;z>=0;z-=1){let ee=q[z];I&&ee.listener===I||I&&ee.listener&&ee.listener.dom7proxy&&ee.listener.dom7proxy===I?(J.removeEventListener(j,ee.proxyListener,M),q.splice(z,1)):I||(J.removeEventListener(j,ee.proxyListener,M),q.splice(z,1))}}}return this},trigger:function(...d){let x=r(),C=d[0].split(" "),I=d[1];for(let M=0;M<C.length;M+=1){let P=C[M];for(let Y=0;Y<this.length;Y+=1){let j=this[Y];if(x.CustomEvent){let G=new x.CustomEvent(P,{detail:I,bubbles:!0,cancelable:!0});j.dom7EventData=d.filter((J,q)=>q>0),j.dispatchEvent(G),j.dom7EventData=[],delete j.dom7EventData}}}return this},transitionEnd:function(d){let x=this;return d&&x.on("transitionend",function C(I){I.target===this&&(d.call(this,I),x.off("transitionend",C))}),this},outerWidth:function(d){if(this.length>0){if(d){let x=this.styles();return this[0].offsetWidth+parseFloat(x.getPropertyValue("margin-right"))+parseFloat(x.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(d){if(this.length>0){if(d){let x=this.styles();return this[0].offsetHeight+parseFloat(x.getPropertyValue("margin-top"))+parseFloat(x.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){let d=r();return this[0]?d.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){let d=r(),x=i(),C=this[0],I=C.getBoundingClientRect(),M=x.body,P=C.clientTop||M.clientTop||0,Y=C.clientLeft||M.clientLeft||0,j=C===d?d.scrollY:C.scrollTop,G=C===d?d.scrollX:C.scrollLeft;return{top:I.top+j-P,left:I.left+G-Y}}return null},css:function(d,x){let C=r(),I;if(arguments.length===1){if(typeof d!="string"){for(I=0;I<this.length;I+=1)for(let M in d)this[I].style[M]=d[M];return this}if(this[0])return C.getComputedStyle(this[0],null).getPropertyValue(d)}if(arguments.length===2&&typeof d=="string"){for(I=0;I<this.length;I+=1)this[I].style[d]=x;return this}return this},each:function(d){return d?(this.forEach((x,C)=>{d.apply(x,[x,C])}),this):this},html:function(d){if(d===void 0)return this[0]?this[0].innerHTML:null;for(let x=0;x<this.length;x+=1)this[x].innerHTML=d;return this},text:function(d){if(d===void 0)return this[0]?this[0].textContent.trim():null;for(let x=0;x<this.length;x+=1)this[x].textContent=d;return this},is:function(d){let x=r(),C=i(),I=this[0],M,P;if(!I||d===void 0)return!1;if(typeof d=="string"){if(I.matches)return I.matches(d);if(I.webkitMatchesSelector)return I.webkitMatchesSelector(d);if(I.msMatchesSelector)return I.msMatchesSelector(d);for(M=u(d),P=0;P<M.length;P+=1)if(M[P]===I)return!0;return!1}if(d===C)return I===C;if(d===x)return I===x;if(d.nodeType||d instanceof a){for(M=d.nodeType?[d]:d,P=0;P<M.length;P+=1)if(M[P]===I)return!0;return!1}return!1},index:function(){let d,x=this[0];if(x){for(d=0;(x=x.previousSibling)!==null;)x.nodeType===1&&(d+=1);return d}},eq:function(d){if(d===void 0)return this;let x=this.length;if(d>x-1)return u([]);if(d<0){let C=x+d;return u(C<0?[]:[this[C]])}return u([this[d]])},append:function(...d){let x,C=i();for(let I=0;I<d.length;I+=1){x=d[I];for(let M=0;M<this.length;M+=1)if(typeof x=="string"){let P=C.createElement("div");for(P.innerHTML=x;P.firstChild;)this[M].appendChild(P.firstChild)}else if(x instanceof a)for(let P=0;P<x.length;P+=1)this[M].appendChild(x[P]);else this[M].appendChild(x)}return this},prepend:function(d){let x=i(),C,I;for(C=0;C<this.length;C+=1)if(typeof d=="string"){let M=x.createElement("div");for(M.innerHTML=d,I=M.childNodes.length-1;I>=0;I-=1)this[C].insertBefore(M.childNodes[I],this[C].childNodes[0])}else if(d instanceof a)for(I=0;I<d.length;I+=1)this[C].insertBefore(d[I],this[C].childNodes[0]);else this[C].insertBefore(d,this[C].childNodes[0]);return this},next:function(d){return this.length>0?d?this[0].nextElementSibling&&u(this[0].nextElementSibling).is(d)?u([this[0].nextElementSibling]):u([]):this[0].nextElementSibling?u([this[0].nextElementSibling]):u([]):u([])},nextAll:function(d){let x=[],C=this[0];if(!C)return u([]);for(;C.nextElementSibling;){let I=C.nextElementSibling;d?u(I).is(d)&&x.push(I):x.push(I),C=I}return u(x)},prev:function(d){if(this.length>0){let x=this[0];return d?x.previousElementSibling&&u(x.previousElementSibling).is(d)?u([x.previousElementSibling]):u([]):x.previousElementSibling?u([x.previousElementSibling]):u([])}return u([])},prevAll:function(d){let x=[],C=this[0];if(!C)return u([]);for(;C.previousElementSibling;){let I=C.previousElementSibling;d?u(I).is(d)&&x.push(I):x.push(I),C=I}return u(x)},parent:function(d){let x=[];for(let C=0;C<this.length;C+=1)this[C].parentNode!==null&&(d?u(this[C].parentNode).is(d)&&x.push(this[C].parentNode):x.push(this[C].parentNode));return u(x)},parents:function(d){let x=[];for(let C=0;C<this.length;C+=1){let I=this[C].parentNode;for(;I;)d?u(I).is(d)&&x.push(I):x.push(I),I=I.parentNode}return u(x)},closest:function(d){let x=this;return d===void 0?u([]):(x.is(d)||(x=x.parents(d).eq(0)),x)},find:function(d){let x=[];for(let C=0;C<this.length;C+=1){let I=this[C].querySelectorAll(d);for(let M=0;M<I.length;M+=1)x.push(I[M])}return u(x)},children:function(d){let x=[];for(let C=0;C<this.length;C+=1){let I=this[C].children;for(let M=0;M<I.length;M+=1)d&&!u(I[M]).is(d)||x.push(I[M])}return u(x)},filter:function(d){return u(l(this,d))},remove:function(){for(let d=0;d<this.length;d+=1)this[d].parentNode&&this[d].parentNode.removeChild(this[d]);return this}};function h(d,x=0){return setTimeout(d,x)}function g(){return Date.now()}function m(d,x="x"){let C=r(),I,M,P,Y=function(j){let G=r(),J;return G.getComputedStyle&&(J=G.getComputedStyle(j,null)),!J&&j.currentStyle&&(J=j.currentStyle),J||(J=j.style),J}(d);return C.WebKitCSSMatrix?(M=Y.transform||Y.webkitTransform,M.split(",").length>6&&(M=M.split(", ").map(j=>j.replace(",",".")).join(", ")),P=new C.WebKitCSSMatrix(M==="none"?"":M)):(P=Y.MozTransform||Y.OTransform||Y.MsTransform||Y.msTransform||Y.transform||Y.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),I=P.toString().split(",")),x==="x"&&(M=C.WebKitCSSMatrix?P.m41:I.length===16?parseFloat(I[12]):parseFloat(I[4])),x==="y"&&(M=C.WebKitCSSMatrix?P.m42:I.length===16?parseFloat(I[13]):parseFloat(I[5])),M||0}function v(d){return typeof d=="object"&&d!==null&&d.constructor&&Object.prototype.toString.call(d).slice(8,-1)==="Object"}function b(...d){let x=Object(d[0]),C=["__proto__","constructor","prototype"];for(let M=1;M<d.length;M+=1){let P=d[M];if(P!=null&&(I=P,!(typeof window<"u"&&window.HTMLElement!==void 0?I instanceof HTMLElement:I&&(I.nodeType===1||I.nodeType===11)))){let Y=Object.keys(Object(P)).filter(j=>C.indexOf(j)<0);for(let j=0,G=Y.length;j<G;j+=1){let J=Y[j],q=Object.getOwnPropertyDescriptor(P,J);q!==void 0&&q.enumerable&&(v(x[J])&&v(P[J])?P[J].__swiper__?x[J]=P[J]:b(x[J],P[J]):!v(x[J])&&v(P[J])?(x[J]={},P[J].__swiper__?x[J]=P[J]:b(x[J],P[J])):x[J]=P[J])}}}var I;return x}function A(d,x,C){d.style.setProperty(x,C)}function R({swiper:d,targetPosition:x,side:C}){let I=r(),M=-d.translate,P,Y=null,j=d.params.speed;d.wrapperEl.style.scrollSnapType="none",I.cancelAnimationFrame(d.cssModeFrameID);let G=x>M?"next":"prev",J=(z,ee)=>G==="next"&&z>=ee||G==="prev"&&z<=ee,q=()=>{P=new Date().getTime(),Y===null&&(Y=P);let z=Math.max(Math.min((P-Y)/j,1),0),ee=.5-Math.cos(z*Math.PI)/2,se=M+ee*(x-M);if(J(se,x)&&(se=x),d.wrapperEl.scrollTo({[C]:se}),J(se,x))return d.wrapperEl.style.overflow="hidden",d.wrapperEl.style.scrollSnapType="",setTimeout(()=>{d.wrapperEl.style.overflow="",d.wrapperEl.scrollTo({[C]:se})}),void I.cancelAnimationFrame(d.cssModeFrameID);d.cssModeFrameID=I.requestAnimationFrame(q)};q()}let F,O,H;function W(){return F||(F=function(){let d=r(),x=i();return{smoothScroll:x.documentElement&&"scrollBehavior"in x.documentElement.style,touch:!!("ontouchstart"in d||d.DocumentTouch&&x instanceof d.DocumentTouch),passiveListener:function(){let C=!1;try{let I=Object.defineProperty({},"passive",{get(){C=!0}});d.addEventListener("testPassiveListener",null,I)}catch{}return C}(),gestures:"ongesturestart"in d}}()),F}function E(d={}){return O||(O=function({userAgent:x}={}){let C=W(),I=r(),M=I.navigator.platform,P=x||I.navigator.userAgent,Y={ios:!1,android:!1},j=I.screen.width,G=I.screen.height,J=P.match(/(Android);?[\s\/]+([\d.]+)?/),q=P.match(/(iPad).*OS\s([\d_]+)/),z=P.match(/(iPod)(.*OS\s([\d_]+))?/),ee=!q&&P.match(/(iPhone\sOS|iOS)\s([\d_]+)/),se=M==="Win32",le=M==="MacIntel";return!q&&le&&C.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${j}x${G}`)>=0&&(q=P.match(/(Version)\/([\d.]+)/),q||(q=[0,1,"13_0_0"]),le=!1),J&&!se&&(Y.os="android",Y.android=!0),(q||ee||z)&&(Y.os="ios",Y.ios=!0),Y}(d)),O}function X(){return H||(H=function(){let d=r();return{isSafari:function(){let x=d.navigator.userAgent.toLowerCase();return x.indexOf("safari")>=0&&x.indexOf("chrome")<0&&x.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(d.navigator.userAgent)}}()),H}Object.keys(c).forEach(d=>{Object.defineProperty(u.fn,d,{value:c[d],writable:!0})});var Z={on(d,x,C){let I=this;if(typeof x!="function")return I;let M=C?"unshift":"push";return d.split(" ").forEach(P=>{I.eventsListeners[P]||(I.eventsListeners[P]=[]),I.eventsListeners[P][M](x)}),I},once(d,x,C){let I=this;if(typeof x!="function")return I;function M(...P){I.off(d,M),M.__emitterProxy&&delete M.__emitterProxy,x.apply(I,P)}return M.__emitterProxy=x,I.on(d,M,C)},onAny(d,x){let C=this;if(typeof d!="function")return C;let I=x?"unshift":"push";return C.eventsAnyListeners.indexOf(d)<0&&C.eventsAnyListeners[I](d),C},offAny(d){let x=this;if(!x.eventsAnyListeners)return x;let C=x.eventsAnyListeners.indexOf(d);return C>=0&&x.eventsAnyListeners.splice(C,1),x},off(d,x){let C=this;return C.eventsListeners&&d.split(" ").forEach(I=>{x===void 0?C.eventsListeners[I]=[]:C.eventsListeners[I]&&C.eventsListeners[I].forEach((M,P)=>{(M===x||M.__emitterProxy&&M.__emitterProxy===x)&&C.eventsListeners[I].splice(P,1)})}),C},emit(...d){let x=this;if(!x.eventsListeners)return x;let C,I,M;return typeof d[0]=="string"||Array.isArray(d[0])?(C=d[0],I=d.slice(1,d.length),M=x):(C=d[0].events,I=d[0].data,M=d[0].context||x),I.unshift(M),(Array.isArray(C)?C:C.split(" ")).forEach(P=>{x.eventsAnyListeners&&x.eventsAnyListeners.length&&x.eventsAnyListeners.forEach(Y=>{Y.apply(M,[P,...I])}),x.eventsListeners&&x.eventsListeners[P]&&x.eventsListeners[P].forEach(Y=>{Y.apply(M,I)})}),x}};function re({swiper:d,runCallbacks:x,direction:C,step:I}){let{activeIndex:M,previousIndex:P}=d,Y=C;if(Y||(Y=M>P?"next":M<P?"prev":"reset"),d.emit(`transition${I}`),x&&M!==P){if(Y==="reset")return void d.emit(`slideResetTransition${I}`);d.emit(`slideChangeTransition${I}`),Y==="next"?d.emit(`slideNextTransition${I}`):d.emit(`slidePrevTransition${I}`)}}function oe(d){let x=this,C=i(),I=r(),M=x.touchEventsData,{params:P,touches:Y,enabled:j}=x;if(!j||x.animating&&P.preventInteractionOnTransition)return;!x.animating&&P.cssMode&&P.loop&&x.loopFix();let G=d;G.originalEvent&&(G=G.originalEvent);let J=u(G.target);if(P.touchEventsTarget==="wrapper"&&!J.closest(x.wrapperEl).length||(M.isTouchEvent=G.type==="touchstart",!M.isTouchEvent&&"which"in G&&G.which===3)||!M.isTouchEvent&&"button"in G&&G.button>0||M.isTouched&&M.isMoved)return;!!P.noSwipingClass&&P.noSwipingClass!==""&&G.target&&G.target.shadowRoot&&d.path&&d.path[0]&&(J=u(d.path[0]));let q=P.noSwipingSelector?P.noSwipingSelector:`.${P.noSwipingClass}`,z=!(!G.target||!G.target.shadowRoot);if(P.noSwiping&&(z?function(ke,me=this){return function De(Se){return Se&&Se!==i()&&Se!==r()?(Se.assignedSlot&&(Se=Se.assignedSlot),Se.closest(ke)||De(Se.getRootNode().host)):null}(me)}(q,G.target):J.closest(q)[0]))return void(x.allowClick=!0);if(P.swipeHandler&&!J.closest(P.swipeHandler)[0])return;Y.currentX=G.type==="touchstart"?G.targetTouches[0].pageX:G.pageX,Y.currentY=G.type==="touchstart"?G.targetTouches[0].pageY:G.pageY;let ee=Y.currentX,se=Y.currentY,le=P.edgeSwipeDetection||P.iOSEdgeSwipeDetection,de=P.edgeSwipeThreshold||P.iOSEdgeSwipeThreshold;if(le&&(ee<=de||ee>=I.innerWidth-de)){if(le!=="prevent")return;d.preventDefault()}if(Object.assign(M,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Y.startX=ee,Y.startY=se,M.touchStartTime=g(),x.allowClick=!0,x.updateSize(),x.swipeDirection=void 0,P.threshold>0&&(M.allowThresholdMove=!1),G.type!=="touchstart"){let ke=!0;J.is(M.focusableElements)&&(ke=!1),C.activeElement&&u(C.activeElement).is(M.focusableElements)&&C.activeElement!==J[0]&&C.activeElement.blur();let me=ke&&x.allowTouchMove&&P.touchStartPreventDefault;!P.touchStartForcePreventDefault&&!me||J[0].isContentEditable||G.preventDefault()}x.emit("touchStart",G)}function ve(d){let x=i(),C=this,I=C.touchEventsData,{params:M,touches:P,rtlTranslate:Y,enabled:j}=C;if(!j)return;let G=d;if(G.originalEvent&&(G=G.originalEvent),!I.isTouched)return void(I.startMoving&&I.isScrolling&&C.emit("touchMoveOpposite",G));if(I.isTouchEvent&&G.type!=="touchmove")return;let J=G.type==="touchmove"&&G.targetTouches&&(G.targetTouches[0]||G.changedTouches[0]),q=G.type==="touchmove"?J.pageX:G.pageX,z=G.type==="touchmove"?J.pageY:G.pageY;if(G.preventedByNestedSwiper)return P.startX=q,void(P.startY=z);if(!C.allowTouchMove)return C.allowClick=!1,void(I.isTouched&&(Object.assign(P,{startX:q,startY:z,currentX:q,currentY:z}),I.touchStartTime=g()));if(I.isTouchEvent&&M.touchReleaseOnEdges&&!M.loop){if(C.isVertical()){if(z<P.startY&&C.translate<=C.maxTranslate()||z>P.startY&&C.translate>=C.minTranslate())return I.isTouched=!1,void(I.isMoved=!1)}else if(q<P.startX&&C.translate<=C.maxTranslate()||q>P.startX&&C.translate>=C.minTranslate())return}if(I.isTouchEvent&&x.activeElement&&G.target===x.activeElement&&u(G.target).is(I.focusableElements))return I.isMoved=!0,void(C.allowClick=!1);if(I.allowTouchCallbacks&&C.emit("touchMove",G),G.targetTouches&&G.targetTouches.length>1)return;P.currentX=q,P.currentY=z;let ee=P.currentX-P.startX,se=P.currentY-P.startY;if(C.params.threshold&&Math.sqrt(ee**2+se**2)<C.params.threshold)return;if(I.isScrolling===void 0){let me;C.isHorizontal()&&P.currentY===P.startY||C.isVertical()&&P.currentX===P.startX?I.isScrolling=!1:ee*ee+se*se>=25&&(me=180*Math.atan2(Math.abs(se),Math.abs(ee))/Math.PI,I.isScrolling=C.isHorizontal()?me>M.touchAngle:90-me>M.touchAngle)}if(I.isScrolling&&C.emit("touchMoveOpposite",G),I.startMoving===void 0&&(P.currentX===P.startX&&P.currentY===P.startY||(I.startMoving=!0)),I.isScrolling)return void(I.isTouched=!1);if(!I.startMoving)return;C.allowClick=!1,!M.cssMode&&G.cancelable&&G.preventDefault(),M.touchMoveStopPropagation&&!M.nested&&G.stopPropagation(),I.isMoved||(M.loop&&!M.cssMode&&C.loopFix(),I.startTranslate=C.getTranslate(),C.setTransition(0),C.animating&&C.$wrapperEl.trigger("webkitTransitionEnd transitionend"),I.allowMomentumBounce=!1,!M.grabCursor||C.allowSlideNext!==!0&&C.allowSlidePrev!==!0||C.setGrabCursor(!0),C.emit("sliderFirstMove",G)),C.emit("sliderMove",G),I.isMoved=!0;let le=C.isHorizontal()?ee:se;P.diff=le,le*=M.touchRatio,Y&&(le=-le),C.swipeDirection=le>0?"prev":"next",I.currentTranslate=le+I.startTranslate;let de=!0,ke=M.resistanceRatio;if(M.touchReleaseOnEdges&&(ke=0),le>0&&I.currentTranslate>C.minTranslate()?(de=!1,M.resistance&&(I.currentTranslate=C.minTranslate()-1+(-C.minTranslate()+I.startTranslate+le)**ke)):le<0&&I.currentTranslate<C.maxTranslate()&&(de=!1,M.resistance&&(I.currentTranslate=C.maxTranslate()+1-(C.maxTranslate()-I.startTranslate-le)**ke)),de&&(G.preventedByNestedSwiper=!0),!C.allowSlideNext&&C.swipeDirection==="next"&&I.currentTranslate<I.startTranslate&&(I.currentTranslate=I.startTranslate),!C.allowSlidePrev&&C.swipeDirection==="prev"&&I.currentTranslate>I.startTranslate&&(I.currentTranslate=I.startTranslate),C.allowSlidePrev||C.allowSlideNext||(I.currentTranslate=I.startTranslate),M.threshold>0){if(!(Math.abs(le)>M.threshold||I.allowThresholdMove))return void(I.currentTranslate=I.startTranslate);if(!I.allowThresholdMove)return I.allowThresholdMove=!0,P.startX=P.currentX,P.startY=P.currentY,I.currentTranslate=I.startTranslate,void(P.diff=C.isHorizontal()?P.currentX-P.startX:P.currentY-P.startY)}M.followFinger&&!M.cssMode&&((M.freeMode&&M.freeMode.enabled&&C.freeMode||M.watchSlidesProgress)&&(C.updateActiveIndex(),C.updateSlidesClasses()),C.params.freeMode&&M.freeMode.enabled&&C.freeMode&&C.freeMode.onTouchMove(),C.updateProgress(I.currentTranslate),C.setTranslate(I.currentTranslate))}function Ce(d){let x=this,C=x.touchEventsData,{params:I,touches:M,rtlTranslate:P,slidesGrid:Y,enabled:j}=x;if(!j)return;let G=d;if(G.originalEvent&&(G=G.originalEvent),C.allowTouchCallbacks&&x.emit("touchEnd",G),C.allowTouchCallbacks=!1,!C.isTouched)return C.isMoved&&I.grabCursor&&x.setGrabCursor(!1),C.isMoved=!1,void(C.startMoving=!1);I.grabCursor&&C.isMoved&&C.isTouched&&(x.allowSlideNext===!0||x.allowSlidePrev===!0)&&x.setGrabCursor(!1);let J=g(),q=J-C.touchStartTime;if(x.allowClick&&(x.updateClickedSlide(G),x.emit("tap click",G),q<300&&J-C.lastClickTime<300&&x.emit("doubleTap doubleClick",G)),C.lastClickTime=g(),h(()=>{x.destroyed||(x.allowClick=!0)}),!C.isTouched||!C.isMoved||!x.swipeDirection||M.diff===0||C.currentTranslate===C.startTranslate)return C.isTouched=!1,C.isMoved=!1,void(C.startMoving=!1);let z;if(C.isTouched=!1,C.isMoved=!1,C.startMoving=!1,z=I.followFinger?P?x.translate:-x.translate:-C.currentTranslate,I.cssMode)return;if(x.params.freeMode&&I.freeMode.enabled)return void x.freeMode.onTouchEnd({currentPos:z});let ee=0,se=x.slidesSizesGrid[0];for(let ke=0;ke<Y.length;ke+=ke<I.slidesPerGroupSkip?1:I.slidesPerGroup){let me=ke<I.slidesPerGroupSkip-1?1:I.slidesPerGroup;Y[ke+me]!==void 0?z>=Y[ke]&&z<Y[ke+me]&&(ee=ke,se=Y[ke+me]-Y[ke]):z>=Y[ke]&&(ee=ke,se=Y[Y.length-1]-Y[Y.length-2])}let le=(z-Y[ee])/se,de=ee<I.slidesPerGroupSkip-1?1:I.slidesPerGroup;if(q>I.longSwipesMs){if(!I.longSwipes)return void x.slideTo(x.activeIndex);x.swipeDirection==="next"&&(le>=I.longSwipesRatio?x.slideTo(ee+de):x.slideTo(ee)),x.swipeDirection==="prev"&&(le>1-I.longSwipesRatio?x.slideTo(ee+de):x.slideTo(ee))}else{if(!I.shortSwipes)return void x.slideTo(x.activeIndex);x.navigation&&(G.target===x.navigation.nextEl||G.target===x.navigation.prevEl)?G.target===x.navigation.nextEl?x.slideTo(ee+de):x.slideTo(ee):(x.swipeDirection==="next"&&x.slideTo(ee+de),x.swipeDirection==="prev"&&x.slideTo(ee))}}function we(){let d=this,{params:x,el:C}=d;if(C&&C.offsetWidth===0)return;x.breakpoints&&d.setBreakpoint();let{allowSlideNext:I,allowSlidePrev:M,snapGrid:P}=d;d.allowSlideNext=!0,d.allowSlidePrev=!0,d.updateSize(),d.updateSlides(),d.updateSlidesClasses(),(x.slidesPerView==="auto"||x.slidesPerView>1)&&d.isEnd&&!d.isBeginning&&!d.params.centeredSlides?d.slideTo(d.slides.length-1,0,!1,!0):d.slideTo(d.activeIndex,0,!1,!0),d.autoplay&&d.autoplay.running&&d.autoplay.paused&&d.autoplay.run(),d.allowSlidePrev=M,d.allowSlideNext=I,d.params.watchOverflow&&P!==d.snapGrid&&d.checkOverflow()}function Ge(d){let x=this;x.enabled&&(x.allowClick||(x.params.preventClicks&&d.preventDefault(),x.params.preventClicksPropagation&&x.animating&&(d.stopPropagation(),d.stopImmediatePropagation())))}function Xe(){let d=this,{wrapperEl:x,rtlTranslate:C,enabled:I}=d;if(!I)return;let M;d.previousTranslate=d.translate,d.isHorizontal()?d.translate=-x.scrollLeft:d.translate=-x.scrollTop,d.translate===-0&&(d.translate=0),d.updateActiveIndex(),d.updateSlidesClasses();let P=d.maxTranslate()-d.minTranslate();M=P===0?0:(d.translate-d.minTranslate())/P,M!==d.progress&&d.updateProgress(C?-d.translate:d.translate),d.emit("setTranslate",d.translate,!1)}let Re=!1;function We(){}let Qe=(d,x)=>{let C=i(),{params:I,touchEvents:M,el:P,wrapperEl:Y,device:j,support:G}=d,J=!!I.nested,q=x==="on"?"addEventListener":"removeEventListener",z=x;if(G.touch){let ee=!(M.start!=="touchstart"||!G.passiveListener||!I.passiveListeners)&&{passive:!0,capture:!1};P[q](M.start,d.onTouchStart,ee),P[q](M.move,d.onTouchMove,G.passiveListener?{passive:!1,capture:J}:J),P[q](M.end,d.onTouchEnd,ee),M.cancel&&P[q](M.cancel,d.onTouchEnd,ee)}else P[q](M.start,d.onTouchStart,!1),C[q](M.move,d.onTouchMove,J),C[q](M.end,d.onTouchEnd,!1);(I.preventClicks||I.preventClicksPropagation)&&P[q]("click",d.onClick,!0),I.cssMode&&Y[q]("scroll",d.onScroll),I.updateOnWindowResize?d[z](j.ios||j.android?"resize orientationchange observerUpdate":"resize observerUpdate",we,!0):d[z]("observerUpdate",we,!0)},rt=(d,x)=>d.grid&&x.grid&&x.grid.rows>1;var gt={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function et(d,x){return function(C={}){let I=Object.keys(C)[0],M=C[I];typeof M=="object"&&M!==null?(["navigation","pagination","scrollbar"].indexOf(I)>=0&&d[I]===!0&&(d[I]={auto:!0}),I in d&&"enabled"in M&&(d[I]===!0&&(d[I]={enabled:!0}),typeof d[I]!="object"||"enabled"in d[I]||(d[I].enabled=!0),d[I]||(d[I]={enabled:!1})),b(x,C)):b(x,C)}}let Ye={eventsEmitter:Z,update:{updateSize:function(){let d=this,x,C,I=d.$el;x=d.params.width!==void 0&&d.params.width!==null?d.params.width:I[0].clientWidth,C=d.params.height!==void 0&&d.params.height!==null?d.params.height:I[0].clientHeight,x===0&&d.isHorizontal()||C===0&&d.isVertical()||(x=x-parseInt(I.css("padding-left")||0,10)-parseInt(I.css("padding-right")||0,10),C=C-parseInt(I.css("padding-top")||0,10)-parseInt(I.css("padding-bottom")||0,10),Number.isNaN(x)&&(x=0),Number.isNaN(C)&&(C=0),Object.assign(d,{width:x,height:C,size:d.isHorizontal()?x:C}))},updateSlides:function(){let d=this;function x($e){return d.isHorizontal()?$e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[$e]}function C($e,Pe){return parseFloat($e.getPropertyValue(x(Pe))||0)}let I=d.params,{$wrapperEl:M,size:P,rtlTranslate:Y,wrongRTL:j}=d,G=d.virtual&&I.virtual.enabled,J=G?d.virtual.slides.length:d.slides.length,q=M.children(`.${d.params.slideClass}`),z=G?d.virtual.slides.length:q.length,ee=[],se=[],le=[],de=I.slidesOffsetBefore;typeof de=="function"&&(de=I.slidesOffsetBefore.call(d));let ke=I.slidesOffsetAfter;typeof ke=="function"&&(ke=I.slidesOffsetAfter.call(d));let me=d.snapGrid.length,De=d.slidesGrid.length,Se=I.spaceBetween,Ke=-de,nt=0,qe=0;if(P===void 0)return;typeof Se=="string"&&Se.indexOf("%")>=0&&(Se=parseFloat(Se.replace("%",""))/100*P),d.virtualSize=-Se,Y?q.css({marginLeft:"",marginBottom:"",marginTop:""}):q.css({marginRight:"",marginBottom:"",marginTop:""}),I.centeredSlides&&I.cssMode&&(A(d.wrapperEl,"--swiper-centered-offset-before",""),A(d.wrapperEl,"--swiper-centered-offset-after",""));let Je=I.grid&&I.grid.rows>1&&d.grid,it;Je&&d.grid.initSlides(z);let ze=I.slidesPerView==="auto"&&I.breakpoints&&Object.keys(I.breakpoints).filter($e=>I.breakpoints[$e].slidesPerView!==void 0).length>0;for(let $e=0;$e<z;$e+=1){it=0;let Pe=q.eq($e);if(Je&&d.grid.updateSlide($e,Pe,z,x),Pe.css("display")!=="none"){if(I.slidesPerView==="auto"){ze&&(q[$e].style[x("width")]="");let tt=getComputedStyle(Pe[0]),_t=Pe[0].style.transform,at=Pe[0].style.webkitTransform;if(_t&&(Pe[0].style.transform="none"),at&&(Pe[0].style.webkitTransform="none"),I.roundLengths)it=d.isHorizontal()?Pe.outerWidth(!0):Pe.outerHeight(!0);else{let Ct=C(tt,"width"),Tt=C(tt,"padding-left"),Bt=C(tt,"padding-right"),Wt=C(tt,"margin-left"),Ai=C(tt,"margin-right"),Hi=tt.getPropertyValue("box-sizing");if(Hi&&Hi==="border-box")it=Ct+Wt+Ai;else{let{clientWidth:Ds,offsetWidth:vi}=Pe[0];it=Ct+Tt+Bt+Wt+Ai+(vi-Ds)}}_t&&(Pe[0].style.transform=_t),at&&(Pe[0].style.webkitTransform=at),I.roundLengths&&(it=Math.floor(it))}else it=(P-(I.slidesPerView-1)*Se)/I.slidesPerView,I.roundLengths&&(it=Math.floor(it)),q[$e]&&(q[$e].style[x("width")]=`${it}px`);q[$e]&&(q[$e].swiperSlideSize=it),le.push(it),I.centeredSlides?(Ke=Ke+it/2+nt/2+Se,nt===0&&$e!==0&&(Ke=Ke-P/2-Se),$e===0&&(Ke=Ke-P/2-Se),Math.abs(Ke)<.001&&(Ke=0),I.roundLengths&&(Ke=Math.floor(Ke)),qe%I.slidesPerGroup==0&&ee.push(Ke),se.push(Ke)):(I.roundLengths&&(Ke=Math.floor(Ke)),(qe-Math.min(d.params.slidesPerGroupSkip,qe))%d.params.slidesPerGroup==0&&ee.push(Ke),se.push(Ke),Ke=Ke+it+Se),d.virtualSize+=it+Se,nt=it,qe+=1}}if(d.virtualSize=Math.max(d.virtualSize,P)+ke,Y&&j&&(I.effect==="slide"||I.effect==="coverflow")&&M.css({width:`${d.virtualSize+I.spaceBetween}px`}),I.setWrapperSize&&M.css({[x("width")]:`${d.virtualSize+I.spaceBetween}px`}),Je&&d.grid.updateWrapperSize(it,ee,x),!I.centeredSlides){let $e=[];for(let Pe=0;Pe<ee.length;Pe+=1){let tt=ee[Pe];I.roundLengths&&(tt=Math.floor(tt)),ee[Pe]<=d.virtualSize-P&&$e.push(tt)}ee=$e,Math.floor(d.virtualSize-P)-Math.floor(ee[ee.length-1])>1&&ee.push(d.virtualSize-P)}if(ee.length===0&&(ee=[0]),I.spaceBetween!==0){let $e=d.isHorizontal()&&Y?"marginLeft":x("marginRight");q.filter((Pe,tt)=>!I.cssMode||tt!==q.length-1).css({[$e]:`${Se}px`})}if(I.centeredSlides&&I.centeredSlidesBounds){let $e=0;le.forEach(tt=>{$e+=tt+(I.spaceBetween?I.spaceBetween:0)}),$e-=I.spaceBetween;let Pe=$e-P;ee=ee.map(tt=>tt<0?-de:tt>Pe?Pe+ke:tt)}if(I.centerInsufficientSlides){let $e=0;if(le.forEach(Pe=>{$e+=Pe+(I.spaceBetween?I.spaceBetween:0)}),$e-=I.spaceBetween,$e<P){let Pe=(P-$e)/2;ee.forEach((tt,_t)=>{ee[_t]=tt-Pe}),se.forEach((tt,_t)=>{se[_t]=tt+Pe})}}if(Object.assign(d,{slides:q,snapGrid:ee,slidesGrid:se,slidesSizesGrid:le}),I.centeredSlides&&I.cssMode&&!I.centeredSlidesBounds){A(d.wrapperEl,"--swiper-centered-offset-before",-ee[0]+"px"),A(d.wrapperEl,"--swiper-centered-offset-after",d.size/2-le[le.length-1]/2+"px");let $e=-d.snapGrid[0],Pe=-d.slidesGrid[0];d.snapGrid=d.snapGrid.map(tt=>tt+$e),d.slidesGrid=d.slidesGrid.map(tt=>tt+Pe)}z!==J&&d.emit("slidesLengthChange"),ee.length!==me&&(d.params.watchOverflow&&d.checkOverflow(),d.emit("snapGridLengthChange")),se.length!==De&&d.emit("slidesGridLengthChange"),I.watchSlidesProgress&&d.updateSlidesOffset()},updateAutoHeight:function(d){let x=this,C=[],I=x.virtual&&x.params.virtual.enabled,M,P=0;typeof d=="number"?x.setTransition(d):d===!0&&x.setTransition(x.params.speed);let Y=j=>I?x.slides.filter(G=>parseInt(G.getAttribute("data-swiper-slide-index"),10)===j)[0]:x.slides.eq(j)[0];if(x.params.slidesPerView!=="auto"&&x.params.slidesPerView>1)if(x.params.centeredSlides)x.visibleSlides.each(j=>{C.push(j)});else for(M=0;M<Math.ceil(x.params.slidesPerView);M+=1){let j=x.activeIndex+M;if(j>x.slides.length&&!I)break;C.push(Y(j))}else C.push(Y(x.activeIndex));for(M=0;M<C.length;M+=1)if(C[M]!==void 0){let j=C[M].offsetHeight;P=j>P?j:P}P&&x.$wrapperEl.css("height",`${P}px`)},updateSlidesOffset:function(){let d=this,x=d.slides;for(let C=0;C<x.length;C+=1)x[C].swiperSlideOffset=d.isHorizontal()?x[C].offsetLeft:x[C].offsetTop},updateSlidesProgress:function(d=this&&this.translate||0){let x=this,C=x.params,{slides:I,rtlTranslate:M,snapGrid:P}=x;if(I.length===0)return;I[0].swiperSlideOffset===void 0&&x.updateSlidesOffset();let Y=-d;M&&(Y=d),I.removeClass(C.slideVisibleClass),x.visibleSlidesIndexes=[],x.visibleSlides=[];for(let j=0;j<I.length;j+=1){let G=I[j],J=G.swiperSlideOffset;C.cssMode&&C.centeredSlides&&(J-=I[0].swiperSlideOffset);let q=(Y+(C.centeredSlides?x.minTranslate():0)-J)/(G.swiperSlideSize+C.spaceBetween),z=(Y-P[0]+(C.centeredSlides?x.minTranslate():0)-J)/(G.swiperSlideSize+C.spaceBetween),ee=-(Y-J),se=ee+x.slidesSizesGrid[j];(ee>=0&&ee<x.size-1||se>1&&se<=x.size||ee<=0&&se>=x.size)&&(x.visibleSlides.push(G),x.visibleSlidesIndexes.push(j),I.eq(j).addClass(C.slideVisibleClass)),G.progress=M?-q:q,G.originalProgress=M?-z:z}x.visibleSlides=u(x.visibleSlides)},updateProgress:function(d){let x=this;if(d===void 0){let J=x.rtlTranslate?-1:1;d=x&&x.translate&&x.translate*J||0}let C=x.params,I=x.maxTranslate()-x.minTranslate(),{progress:M,isBeginning:P,isEnd:Y}=x,j=P,G=Y;I===0?(M=0,P=!0,Y=!0):(M=(d-x.minTranslate())/I,P=M<=0,Y=M>=1),Object.assign(x,{progress:M,isBeginning:P,isEnd:Y}),(C.watchSlidesProgress||C.centeredSlides&&C.autoHeight)&&x.updateSlidesProgress(d),P&&!j&&x.emit("reachBeginning toEdge"),Y&&!G&&x.emit("reachEnd toEdge"),(j&&!P||G&&!Y)&&x.emit("fromEdge"),x.emit("progress",M)},updateSlidesClasses:function(){let d=this,{slides:x,params:C,$wrapperEl:I,activeIndex:M,realIndex:P}=d,Y=d.virtual&&C.virtual.enabled,j;x.removeClass(`${C.slideActiveClass} ${C.slideNextClass} ${C.slidePrevClass} ${C.slideDuplicateActiveClass} ${C.slideDuplicateNextClass} ${C.slideDuplicatePrevClass}`),j=Y?d.$wrapperEl.find(`.${C.slideClass}[data-swiper-slide-index="${M}"]`):x.eq(M),j.addClass(C.slideActiveClass),C.loop&&(j.hasClass(C.slideDuplicateClass)?I.children(`.${C.slideClass}:not(.${C.slideDuplicateClass})[data-swiper-slide-index="${P}"]`).addClass(C.slideDuplicateActiveClass):I.children(`.${C.slideClass}.${C.slideDuplicateClass}[data-swiper-slide-index="${P}"]`).addClass(C.slideDuplicateActiveClass));let G=j.nextAll(`.${C.slideClass}`).eq(0).addClass(C.slideNextClass);C.loop&&G.length===0&&(G=x.eq(0),G.addClass(C.slideNextClass));let J=j.prevAll(`.${C.slideClass}`).eq(0).addClass(C.slidePrevClass);C.loop&&J.length===0&&(J=x.eq(-1),J.addClass(C.slidePrevClass)),C.loop&&(G.hasClass(C.slideDuplicateClass)?I.children(`.${C.slideClass}:not(.${C.slideDuplicateClass})[data-swiper-slide-index="${G.attr("data-swiper-slide-index")}"]`).addClass(C.slideDuplicateNextClass):I.children(`.${C.slideClass}.${C.slideDuplicateClass}[data-swiper-slide-index="${G.attr("data-swiper-slide-index")}"]`).addClass(C.slideDuplicateNextClass),J.hasClass(C.slideDuplicateClass)?I.children(`.${C.slideClass}:not(.${C.slideDuplicateClass})[data-swiper-slide-index="${J.attr("data-swiper-slide-index")}"]`).addClass(C.slideDuplicatePrevClass):I.children(`.${C.slideClass}.${C.slideDuplicateClass}[data-swiper-slide-index="${J.attr("data-swiper-slide-index")}"]`).addClass(C.slideDuplicatePrevClass)),d.emitSlidesClasses()},updateActiveIndex:function(d){let x=this,C=x.rtlTranslate?x.translate:-x.translate,{slidesGrid:I,snapGrid:M,params:P,activeIndex:Y,realIndex:j,snapIndex:G}=x,J,q=d;if(q===void 0){for(let ee=0;ee<I.length;ee+=1)I[ee+1]!==void 0?C>=I[ee]&&C<I[ee+1]-(I[ee+1]-I[ee])/2?q=ee:C>=I[ee]&&C<I[ee+1]&&(q=ee+1):C>=I[ee]&&(q=ee);P.normalizeSlideIndex&&(q<0||q===void 0)&&(q=0)}if(M.indexOf(C)>=0)J=M.indexOf(C);else{let ee=Math.min(P.slidesPerGroupSkip,q);J=ee+Math.floor((q-ee)/P.slidesPerGroup)}if(J>=M.length&&(J=M.length-1),q===Y)return void(J!==G&&(x.snapIndex=J,x.emit("snapIndexChange")));let z=parseInt(x.slides.eq(q).attr("data-swiper-slide-index")||q,10);Object.assign(x,{snapIndex:J,realIndex:z,previousIndex:Y,activeIndex:q}),x.emit("activeIndexChange"),x.emit("snapIndexChange"),j!==z&&x.emit("realIndexChange"),(x.initialized||x.params.runCallbacksOnInit)&&x.emit("slideChange")},updateClickedSlide:function(d){let x=this,C=x.params,I=u(d.target).closest(`.${C.slideClass}`)[0],M,P=!1;if(I){for(let Y=0;Y<x.slides.length;Y+=1)if(x.slides[Y]===I){P=!0,M=Y;break}}if(!I||!P)return x.clickedSlide=void 0,void(x.clickedIndex=void 0);x.clickedSlide=I,x.virtual&&x.params.virtual.enabled?x.clickedIndex=parseInt(u(I).attr("data-swiper-slide-index"),10):x.clickedIndex=M,C.slideToClickedSlide&&x.clickedIndex!==void 0&&x.clickedIndex!==x.activeIndex&&x.slideToClickedSlide()}},translate:{getTranslate:function(d=this.isHorizontal()?"x":"y"){let{params:x,rtlTranslate:C,translate:I,$wrapperEl:M}=this;if(x.virtualTranslate)return C?-I:I;if(x.cssMode)return I;let P=m(M[0],d);return C&&(P=-P),P||0},setTranslate:function(d,x){let C=this,{rtlTranslate:I,params:M,$wrapperEl:P,wrapperEl:Y,progress:j}=C,G,J=0,q=0;C.isHorizontal()?J=I?-d:d:q=d,M.roundLengths&&(J=Math.floor(J),q=Math.floor(q)),M.cssMode?Y[C.isHorizontal()?"scrollLeft":"scrollTop"]=C.isHorizontal()?-J:-q:M.virtualTranslate||P.transform(`translate3d(${J}px, ${q}px, 0px)`),C.previousTranslate=C.translate,C.translate=C.isHorizontal()?J:q;let z=C.maxTranslate()-C.minTranslate();G=z===0?0:(d-C.minTranslate())/z,G!==j&&C.updateProgress(d),C.emit("setTranslate",C.translate,x)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(d=0,x=this.params.speed,C=!0,I=!0,M){let P=this,{params:Y,wrapperEl:j}=P;if(P.animating&&Y.preventInteractionOnTransition)return!1;let G=P.minTranslate(),J=P.maxTranslate(),q;if(q=I&&d>G?G:I&&d<J?J:d,P.updateProgress(q),Y.cssMode){let z=P.isHorizontal();if(x===0)j[z?"scrollLeft":"scrollTop"]=-q;else{if(!P.support.smoothScroll)return R({swiper:P,targetPosition:-q,side:z?"left":"top"}),!0;j.scrollTo({[z?"left":"top"]:-q,behavior:"smooth"})}return!0}return x===0?(P.setTransition(0),P.setTranslate(q),C&&(P.emit("beforeTransitionStart",x,M),P.emit("transitionEnd"))):(P.setTransition(x),P.setTranslate(q),C&&(P.emit("beforeTransitionStart",x,M),P.emit("transitionStart")),P.animating||(P.animating=!0,P.onTranslateToWrapperTransitionEnd||(P.onTranslateToWrapperTransitionEnd=function(z){P&&!P.destroyed&&z.target===this&&(P.$wrapperEl[0].removeEventListener("transitionend",P.onTranslateToWrapperTransitionEnd),P.$wrapperEl[0].removeEventListener("webkitTransitionEnd",P.onTranslateToWrapperTransitionEnd),P.onTranslateToWrapperTransitionEnd=null,delete P.onTranslateToWrapperTransitionEnd,C&&P.emit("transitionEnd"))}),P.$wrapperEl[0].addEventListener("transitionend",P.onTranslateToWrapperTransitionEnd),P.$wrapperEl[0].addEventListener("webkitTransitionEnd",P.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(d,x){let C=this;C.params.cssMode||C.$wrapperEl.transition(d),C.emit("setTransition",d,x)},transitionStart:function(d=!0,x){let C=this,{params:I}=C;I.cssMode||(I.autoHeight&&C.updateAutoHeight(),re({swiper:C,runCallbacks:d,direction:x,step:"Start"}))},transitionEnd:function(d=!0,x){let C=this,{params:I}=C;C.animating=!1,I.cssMode||(C.setTransition(0),re({swiper:C,runCallbacks:d,direction:x,step:"End"}))}},slide:{slideTo:function(d=0,x=this.params.speed,C=!0,I,M){if(typeof d!="number"&&typeof d!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof d}] given.`);if(typeof d=="string"){let Se=parseInt(d,10);if(!isFinite(Se))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${d}] given.`);d=Se}let P=this,Y=d;Y<0&&(Y=0);let{params:j,snapGrid:G,slidesGrid:J,previousIndex:q,activeIndex:z,rtlTranslate:ee,wrapperEl:se,enabled:le}=P;if(P.animating&&j.preventInteractionOnTransition||!le&&!I&&!M)return!1;let de=Math.min(P.params.slidesPerGroupSkip,Y),ke=de+Math.floor((Y-de)/P.params.slidesPerGroup);ke>=G.length&&(ke=G.length-1),(z||j.initialSlide||0)===(q||0)&&C&&P.emit("beforeSlideChangeStart");let me=-G[ke];if(P.updateProgress(me),j.normalizeSlideIndex)for(let Se=0;Se<J.length;Se+=1){let Ke=-Math.floor(100*me),nt=Math.floor(100*J[Se]),qe=Math.floor(100*J[Se+1]);J[Se+1]!==void 0?Ke>=nt&&Ke<qe-(qe-nt)/2?Y=Se:Ke>=nt&&Ke<qe&&(Y=Se+1):Ke>=nt&&(Y=Se)}if(P.initialized&&Y!==z&&(!P.allowSlideNext&&me<P.translate&&me<P.minTranslate()||!P.allowSlidePrev&&me>P.translate&&me>P.maxTranslate()&&(z||0)!==Y))return!1;let De;if(De=Y>z?"next":Y<z?"prev":"reset",ee&&-me===P.translate||!ee&&me===P.translate)return P.updateActiveIndex(Y),j.autoHeight&&P.updateAutoHeight(),P.updateSlidesClasses(),j.effect!=="slide"&&P.setTranslate(me),De!=="reset"&&(P.transitionStart(C,De),P.transitionEnd(C,De)),!1;if(j.cssMode){let Se=P.isHorizontal(),Ke=ee?me:-me;if(x===0){let nt=P.virtual&&P.params.virtual.enabled;nt&&(P.wrapperEl.style.scrollSnapType="none",P._immediateVirtual=!0),se[Se?"scrollLeft":"scrollTop"]=Ke,nt&&requestAnimationFrame(()=>{P.wrapperEl.style.scrollSnapType="",P._swiperImmediateVirtual=!1})}else{if(!P.support.smoothScroll)return R({swiper:P,targetPosition:Ke,side:Se?"left":"top"}),!0;se.scrollTo({[Se?"left":"top"]:Ke,behavior:"smooth"})}return!0}return x===0?(P.setTransition(0),P.setTranslate(me),P.updateActiveIndex(Y),P.updateSlidesClasses(),P.emit("beforeTransitionStart",x,I),P.transitionStart(C,De),P.transitionEnd(C,De)):(P.setTransition(x),P.setTranslate(me),P.updateActiveIndex(Y),P.updateSlidesClasses(),P.emit("beforeTransitionStart",x,I),P.transitionStart(C,De),P.animating||(P.animating=!0,P.onSlideToWrapperTransitionEnd||(P.onSlideToWrapperTransitionEnd=function(Se){P&&!P.destroyed&&Se.target===this&&(P.$wrapperEl[0].removeEventListener("transitionend",P.onSlideToWrapperTransitionEnd),P.$wrapperEl[0].removeEventListener("webkitTransitionEnd",P.onSlideToWrapperTransitionEnd),P.onSlideToWrapperTransitionEnd=null,delete P.onSlideToWrapperTransitionEnd,P.transitionEnd(C,De))}),P.$wrapperEl[0].addEventListener("transitionend",P.onSlideToWrapperTransitionEnd),P.$wrapperEl[0].addEventListener("webkitTransitionEnd",P.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(d=0,x=this.params.speed,C=!0,I){let M=this,P=d;return M.params.loop&&(P+=M.loopedSlides),M.slideTo(P,x,C,I)},slideNext:function(d=this.params.speed,x=!0,C){let I=this,{animating:M,enabled:P,params:Y}=I;if(!P)return I;let j=Y.slidesPerGroup;Y.slidesPerView==="auto"&&Y.slidesPerGroup===1&&Y.slidesPerGroupAuto&&(j=Math.max(I.slidesPerViewDynamic("current",!0),1));let G=I.activeIndex<Y.slidesPerGroupSkip?1:j;if(Y.loop){if(M&&Y.loopPreventsSlide)return!1;I.loopFix(),I._clientLeft=I.$wrapperEl[0].clientLeft}return I.slideTo(I.activeIndex+G,d,x,C)},slidePrev:function(d=this.params.speed,x=!0,C){let I=this,{params:M,animating:P,snapGrid:Y,slidesGrid:j,rtlTranslate:G,enabled:J}=I;if(!J)return I;if(M.loop){if(P&&M.loopPreventsSlide)return!1;I.loopFix(),I._clientLeft=I.$wrapperEl[0].clientLeft}function q(de){return de<0?-Math.floor(Math.abs(de)):Math.floor(de)}let z=q(G?I.translate:-I.translate),ee=Y.map(de=>q(de)),se=Y[ee.indexOf(z)-1];if(se===void 0&&M.cssMode){let de;Y.forEach((ke,me)=>{z>=ke&&(de=me)}),de!==void 0&&(se=Y[de>0?de-1:de])}let le=0;return se!==void 0&&(le=j.indexOf(se),le<0&&(le=I.activeIndex-1),M.slidesPerView==="auto"&&M.slidesPerGroup===1&&M.slidesPerGroupAuto&&(le=le-I.slidesPerViewDynamic("previous",!0)+1,le=Math.max(le,0))),I.slideTo(le,d,x,C)},slideReset:function(d=this.params.speed,x=!0,C){return this.slideTo(this.activeIndex,d,x,C)},slideToClosest:function(d=this.params.speed,x=!0,C,I=.5){let M=this,P=M.activeIndex,Y=Math.min(M.params.slidesPerGroupSkip,P),j=Y+Math.floor((P-Y)/M.params.slidesPerGroup),G=M.rtlTranslate?M.translate:-M.translate;if(G>=M.snapGrid[j]){let J=M.snapGrid[j];G-J>(M.snapGrid[j+1]-J)*I&&(P+=M.params.slidesPerGroup)}else{let J=M.snapGrid[j-1];G-J<=(M.snapGrid[j]-J)*I&&(P-=M.params.slidesPerGroup)}return P=Math.max(P,0),P=Math.min(P,M.slidesGrid.length-1),M.slideTo(P,d,x,C)},slideToClickedSlide:function(){let d=this,{params:x,$wrapperEl:C}=d,I=x.slidesPerView==="auto"?d.slidesPerViewDynamic():x.slidesPerView,M,P=d.clickedIndex;if(x.loop){if(d.animating)return;M=parseInt(u(d.clickedSlide).attr("data-swiper-slide-index"),10),x.centeredSlides?P<d.loopedSlides-I/2||P>d.slides.length-d.loopedSlides+I/2?(d.loopFix(),P=C.children(`.${x.slideClass}[data-swiper-slide-index="${M}"]:not(.${x.slideDuplicateClass})`).eq(0).index(),h(()=>{d.slideTo(P)})):d.slideTo(P):P>d.slides.length-I?(d.loopFix(),P=C.children(`.${x.slideClass}[data-swiper-slide-index="${M}"]:not(.${x.slideDuplicateClass})`).eq(0).index(),h(()=>{d.slideTo(P)})):d.slideTo(P)}else d.slideTo(P)}},loop:{loopCreate:function(){let d=this,x=i(),{params:C,$wrapperEl:I}=d,M=u(I.children()[0].parentNode);M.children(`.${C.slideClass}.${C.slideDuplicateClass}`).remove();let P=M.children(`.${C.slideClass}`);if(C.loopFillGroupWithBlank){let G=C.slidesPerGroup-P.length%C.slidesPerGroup;if(G!==C.slidesPerGroup){for(let J=0;J<G;J+=1){let q=u(x.createElement("div")).addClass(`${C.slideClass} ${C.slideBlankClass}`);M.append(q)}P=M.children(`.${C.slideClass}`)}}C.slidesPerView!=="auto"||C.loopedSlides||(C.loopedSlides=P.length),d.loopedSlides=Math.ceil(parseFloat(C.loopedSlides||C.slidesPerView,10)),d.loopedSlides+=C.loopAdditionalSlides,d.loopedSlides>P.length&&(d.loopedSlides=P.length);let Y=[],j=[];P.each((G,J)=>{let q=u(G);J<d.loopedSlides&&j.push(G),J<P.length&&J>=P.length-d.loopedSlides&&Y.push(G),q.attr("data-swiper-slide-index",J)});for(let G=0;G<j.length;G+=1)M.append(u(j[G].cloneNode(!0)).addClass(C.slideDuplicateClass));for(let G=Y.length-1;G>=0;G-=1)M.prepend(u(Y[G].cloneNode(!0)).addClass(C.slideDuplicateClass))},loopFix:function(){let d=this;d.emit("beforeLoopFix");let{activeIndex:x,slides:C,loopedSlides:I,allowSlidePrev:M,allowSlideNext:P,snapGrid:Y,rtlTranslate:j}=d,G;d.allowSlidePrev=!0,d.allowSlideNext=!0;let J=-Y[x]-d.getTranslate();x<I?(G=C.length-3*I+x,G+=I,d.slideTo(G,0,!1,!0)&&J!==0&&d.setTranslate((j?-d.translate:d.translate)-J)):x>=C.length-I&&(G=-C.length+x+I,G+=I,d.slideTo(G,0,!1,!0)&&J!==0&&d.setTranslate((j?-d.translate:d.translate)-J)),d.allowSlidePrev=M,d.allowSlideNext=P,d.emit("loopFix")},loopDestroy:function(){let{$wrapperEl:d,params:x,slides:C}=this;d.children(`.${x.slideClass}.${x.slideDuplicateClass},.${x.slideClass}.${x.slideBlankClass}`).remove(),C.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(d){let x=this;if(x.support.touch||!x.params.simulateTouch||x.params.watchOverflow&&x.isLocked||x.params.cssMode)return;let C=x.params.touchEventsTarget==="container"?x.el:x.wrapperEl;C.style.cursor="move",C.style.cursor=d?"-webkit-grabbing":"-webkit-grab",C.style.cursor=d?"-moz-grabbin":"-moz-grab",C.style.cursor=d?"grabbing":"grab"},unsetGrabCursor:function(){let d=this;d.support.touch||d.params.watchOverflow&&d.isLocked||d.params.cssMode||(d[d.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function(){let d=this,x=i(),{params:C,support:I}=d;d.onTouchStart=oe.bind(d),d.onTouchMove=ve.bind(d),d.onTouchEnd=Ce.bind(d),C.cssMode&&(d.onScroll=Xe.bind(d)),d.onClick=Ge.bind(d),I.touch&&!Re&&(x.addEventListener("touchstart",We),Re=!0),Qe(d,"on")},detachEvents:function(){Qe(this,"off")}},breakpoints:{setBreakpoint:function(){let d=this,{activeIndex:x,initialized:C,loopedSlides:I=0,params:M,$el:P}=d,Y=M.breakpoints;if(!Y||Y&&Object.keys(Y).length===0)return;let j=d.getBreakpoint(Y,d.params.breakpointsBase,d.el);if(!j||d.currentBreakpoint===j)return;let G=(j in Y?Y[j]:void 0)||d.originalParams,J=rt(d,M),q=rt(d,G),z=M.enabled;J&&!q?(P.removeClass(`${M.containerModifierClass}grid ${M.containerModifierClass}grid-column`),d.emitContainerClasses()):!J&&q&&(P.addClass(`${M.containerModifierClass}grid`),(G.grid.fill&&G.grid.fill==="column"||!G.grid.fill&&M.grid.fill==="column")&&P.addClass(`${M.containerModifierClass}grid-column`),d.emitContainerClasses());let ee=G.direction&&G.direction!==M.direction,se=M.loop&&(G.slidesPerView!==M.slidesPerView||ee);ee&&C&&d.changeDirection(),b(d.params,G);let le=d.params.enabled;Object.assign(d,{allowTouchMove:d.params.allowTouchMove,allowSlideNext:d.params.allowSlideNext,allowSlidePrev:d.params.allowSlidePrev}),z&&!le?d.disable():!z&&le&&d.enable(),d.currentBreakpoint=j,d.emit("_beforeBreakpoint",G),se&&C&&(d.loopDestroy(),d.loopCreate(),d.updateSlides(),d.slideTo(x-I+d.loopedSlides,0,!1)),d.emit("breakpoint",G)},getBreakpoint:function(d,x="window",C){if(!d||x==="container"&&!C)return;let I=!1,M=r(),P=x==="window"?M.innerHeight:C.clientHeight,Y=Object.keys(d).map(j=>{if(typeof j=="string"&&j.indexOf("@")===0){let G=parseFloat(j.substr(1));return{value:P*G,point:j}}return{value:j,point:j}});Y.sort((j,G)=>parseInt(j.value,10)-parseInt(G.value,10));for(let j=0;j<Y.length;j+=1){let{point:G,value:J}=Y[j];x==="window"?M.matchMedia(`(min-width: ${J}px)`).matches&&(I=G):J<=C.clientWidth&&(I=G)}return I||"max"}},checkOverflow:{checkOverflow:function(){let d=this,{isLocked:x,params:C}=d,{slidesOffsetBefore:I}=C;if(I){let M=d.slides.length-1,P=d.slidesGrid[M]+d.slidesSizesGrid[M]+2*I;d.isLocked=d.size>P}else d.isLocked=d.snapGrid.length===1;C.allowSlideNext===!0&&(d.allowSlideNext=!d.isLocked),C.allowSlidePrev===!0&&(d.allowSlidePrev=!d.isLocked),x&&x!==d.isLocked&&(d.isEnd=!1),x!==d.isLocked&&d.emit(d.isLocked?"lock":"unlock")}},classes:{addClasses:function(){let d=this,{classNames:x,params:C,rtl:I,$el:M,device:P,support:Y}=d,j=function(G,J){let q=[];return G.forEach(z=>{typeof z=="object"?Object.keys(z).forEach(ee=>{z[ee]&&q.push(J+ee)}):typeof z=="string"&&q.push(J+z)}),q}(["initialized",C.direction,{"pointer-events":!Y.touch},{"free-mode":d.params.freeMode&&C.freeMode.enabled},{autoheight:C.autoHeight},{rtl:I},{grid:C.grid&&C.grid.rows>1},{"grid-column":C.grid&&C.grid.rows>1&&C.grid.fill==="column"},{android:P.android},{ios:P.ios},{"css-mode":C.cssMode},{centered:C.cssMode&&C.centeredSlides}],C.containerModifierClass);x.push(...j),M.addClass([...x].join(" ")),d.emitContainerClasses()},removeClasses:function(){let{$el:d,classNames:x}=this;d.removeClass(x.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(d,x,C,I,M,P){let Y=r(),j;function G(){P&&P()}u(d).parent("picture")[0]||d.complete&&M?G():x?(j=new Y.Image,j.onload=G,j.onerror=G,I&&(j.sizes=I),C&&(j.srcset=C),x&&(j.src=x)):G()},preloadImages:function(){let d=this;function x(){d!=null&&d&&!d.destroyed&&(d.imagesLoaded!==void 0&&(d.imagesLoaded+=1),d.imagesLoaded===d.imagesToLoad.length&&(d.params.updateOnImagesReady&&d.update(),d.emit("imagesReady")))}d.imagesToLoad=d.$el.find("img");for(let C=0;C<d.imagesToLoad.length;C+=1){let I=d.imagesToLoad[C];d.loadImage(I,I.currentSrc||I.getAttribute("src"),I.srcset||I.getAttribute("srcset"),I.sizes||I.getAttribute("sizes"),!0,x)}}}},St={};class wt{constructor(...x){let C,I;if(x.length===1&&x[0].constructor&&Object.prototype.toString.call(x[0]).slice(8,-1)==="Object"?I=x[0]:[C,I]=x,I||(I={}),I=b({},I),C&&!I.el&&(I.el=C),I.el&&u(I.el).length>1){let j=[];return u(I.el).each(G=>{let J=b({},I,{el:G});j.push(new wt(J))}),j}let M=this;M.__swiper__=!0,M.support=W(),M.device=E({userAgent:I.userAgent}),M.browser=X(),M.eventsListeners={},M.eventsAnyListeners=[],M.modules=[...M.__modules__],I.modules&&Array.isArray(I.modules)&&M.modules.push(...I.modules);let P={};M.modules.forEach(j=>{j({swiper:M,extendParams:et(I,P),on:M.on.bind(M),once:M.once.bind(M),off:M.off.bind(M),emit:M.emit.bind(M)})});let Y=b({},gt,P);return M.params=b({},Y,St,I),M.originalParams=b({},M.params),M.passedParams=b({},I),M.params&&M.params.on&&Object.keys(M.params.on).forEach(j=>{M.on(j,M.params.on[j])}),M.params&&M.params.onAny&&M.onAny(M.params.onAny),M.$=u,Object.assign(M,{enabled:M.params.enabled,el:C,classNames:[],slides:u(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>M.params.direction==="horizontal",isVertical:()=>M.params.direction==="vertical",activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:M.params.allowSlideNext,allowSlidePrev:M.params.allowSlidePrev,touchEvents:function(){let j=["touchstart","touchmove","touchend","touchcancel"],G=["pointerdown","pointermove","pointerup"];return M.touchEventsTouch={start:j[0],move:j[1],end:j[2],cancel:j[3]},M.touchEventsDesktop={start:G[0],move:G[1],end:G[2]},M.support.touch||!M.params.simulateTouch?M.touchEventsTouch:M.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:M.params.focusableElements,lastClickTime:g(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:M.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),M.emit("_swiper"),M.params.init&&M.init(),M}enable(){let x=this;x.enabled||(x.enabled=!0,x.params.grabCursor&&x.setGrabCursor(),x.emit("enable"))}disable(){let x=this;x.enabled&&(x.enabled=!1,x.params.grabCursor&&x.unsetGrabCursor(),x.emit("disable"))}setProgress(x,C){let I=this;x=Math.min(Math.max(x,0),1);let M=I.minTranslate(),P=(I.maxTranslate()-M)*x+M;I.translateTo(P,C===void 0?0:C),I.updateActiveIndex(),I.updateSlidesClasses()}emitContainerClasses(){let x=this;if(!x.params._emitClasses||!x.el)return;let C=x.el.className.split(" ").filter(I=>I.indexOf("swiper")===0||I.indexOf(x.params.containerModifierClass)===0);x.emit("_containerClasses",C.join(" "))}getSlideClasses(x){let C=this;return x.className.split(" ").filter(I=>I.indexOf("swiper-slide")===0||I.indexOf(C.params.slideClass)===0).join(" ")}emitSlidesClasses(){let x=this;if(!x.params._emitClasses||!x.el)return;let C=[];x.slides.each(I=>{let M=x.getSlideClasses(I);C.push({slideEl:I,classNames:M}),x.emit("_slideClass",I,M)}),x.emit("_slideClasses",C)}slidesPerViewDynamic(x="current",C=!1){let{params:I,slides:M,slidesGrid:P,slidesSizesGrid:Y,size:j,activeIndex:G}=this,J=1;if(I.centeredSlides){let q,z=M[G].swiperSlideSize;for(let ee=G+1;ee<M.length;ee+=1)M[ee]&&!q&&(z+=M[ee].swiperSlideSize,J+=1,z>j&&(q=!0));for(let ee=G-1;ee>=0;ee-=1)M[ee]&&!q&&(z+=M[ee].swiperSlideSize,J+=1,z>j&&(q=!0))}else if(x==="current")for(let q=G+1;q<M.length;q+=1)(C?P[q]+Y[q]-P[G]<j:P[q]-P[G]<j)&&(J+=1);else for(let q=G-1;q>=0;q-=1)P[G]-P[q]<j&&(J+=1);return J}update(){let x=this;if(!x||x.destroyed)return;let{snapGrid:C,params:I}=x;function M(){let Y=x.rtlTranslate?-1*x.translate:x.translate,j=Math.min(Math.max(Y,x.maxTranslate()),x.minTranslate());x.setTranslate(j),x.updateActiveIndex(),x.updateSlidesClasses()}let P;I.breakpoints&&x.setBreakpoint(),x.updateSize(),x.updateSlides(),x.updateProgress(),x.updateSlidesClasses(),x.params.freeMode&&x.params.freeMode.enabled?(M(),x.params.autoHeight&&x.updateAutoHeight()):(P=(x.params.slidesPerView==="auto"||x.params.slidesPerView>1)&&x.isEnd&&!x.params.centeredSlides?x.slideTo(x.slides.length-1,0,!1,!0):x.slideTo(x.activeIndex,0,!1,!0),P||M()),I.watchOverflow&&C!==x.snapGrid&&x.checkOverflow(),x.emit("update")}changeDirection(x,C=!0){let I=this,M=I.params.direction;return x||(x=M==="horizontal"?"vertical":"horizontal"),x===M||x!=="horizontal"&&x!=="vertical"||(I.$el.removeClass(`${I.params.containerModifierClass}${M}`).addClass(`${I.params.containerModifierClass}${x}`),I.emitContainerClasses(),I.params.direction=x,I.slides.each(P=>{x==="vertical"?P.style.width="":P.style.height=""}),I.emit("changeDirection"),C&&I.update()),I}mount(x){let C=this;if(C.mounted)return!0;let I=u(x||C.params.el);if(!(x=I[0]))return!1;x.swiper=C;let M=()=>`.${(C.params.wrapperClass||"").trim().split(" ").join(".")}`,P=(()=>{if(x&&x.shadowRoot&&x.shadowRoot.querySelector){let Y=u(x.shadowRoot.querySelector(M()));return Y.children=j=>I.children(j),Y}return I.children(M())})();if(P.length===0&&C.params.createElements){let Y=i().createElement("div");P=u(Y),Y.className=C.params.wrapperClass,I.append(Y),I.children(`.${C.params.slideClass}`).each(j=>{P.append(j)})}return Object.assign(C,{$el:I,el:x,$wrapperEl:P,wrapperEl:P[0],mounted:!0,rtl:x.dir.toLowerCase()==="rtl"||I.css("direction")==="rtl",rtlTranslate:C.params.direction==="horizontal"&&(x.dir.toLowerCase()==="rtl"||I.css("direction")==="rtl"),wrongRTL:P.css("display")==="-webkit-box"}),!0}init(x){let C=this;return C.initialized||C.mount(x)===!1||(C.emit("beforeInit"),C.params.breakpoints&&C.setBreakpoint(),C.addClasses(),C.params.loop&&C.loopCreate(),C.updateSize(),C.updateSlides(),C.params.watchOverflow&&C.checkOverflow(),C.params.grabCursor&&C.enabled&&C.setGrabCursor(),C.params.preloadImages&&C.preloadImages(),C.params.loop?C.slideTo(C.params.initialSlide+C.loopedSlides,0,C.params.runCallbacksOnInit,!1,!0):C.slideTo(C.params.initialSlide,0,C.params.runCallbacksOnInit,!1,!0),C.attachEvents(),C.initialized=!0,C.emit("init"),C.emit("afterInit")),C}destroy(x=!0,C=!0){let I=this,{params:M,$el:P,$wrapperEl:Y,slides:j}=I;return I.params===void 0||I.destroyed||(I.emit("beforeDestroy"),I.initialized=!1,I.detachEvents(),M.loop&&I.loopDestroy(),C&&(I.removeClasses(),P.removeAttr("style"),Y.removeAttr("style"),j&&j.length&&j.removeClass([M.slideVisibleClass,M.slideActiveClass,M.slideNextClass,M.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),I.emit("destroy"),Object.keys(I.eventsListeners).forEach(G=>{I.off(G)}),x!==!1&&(I.$el[0].swiper=null,function(G){let J=G;Object.keys(J).forEach(q=>{try{J[q]=null}catch{}try{delete J[q]}catch{}})}(I)),I.destroyed=!0),null}static extendDefaults(x){b(St,x)}static get extendedDefaults(){return St}static get defaults(){return gt}static installModule(x){wt.prototype.__modules__||(wt.prototype.__modules__=[]);let C=wt.prototype.__modules__;typeof x=="function"&&C.indexOf(x)<0&&C.push(x)}static use(x){return Array.isArray(x)?(x.forEach(C=>wt.installModule(C)),wt):(wt.installModule(x),wt)}}function xt(d,x,C,I){let M=i();return d.params.createElements&&Object.keys(I).forEach(P=>{if(!C[P]&&C.auto===!0){let Y=d.$el.children(`.${I[P]}`)[0];Y||(Y=M.createElement("div"),Y.className=I[P],d.$el.append(Y)),C[P]=Y,x[P]=Y}}),C}function At(d=""){return`.${d.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function ni(d){let x=this,{$wrapperEl:C,params:I}=x;if(I.loop&&x.loopDestroy(),typeof d=="object"&&"length"in d)for(let M=0;M<d.length;M+=1)d[M]&&C.append(d[M]);else C.append(d);I.loop&&x.loopCreate(),I.observer||x.update()}function Xt(d){let x=this,{params:C,$wrapperEl:I,activeIndex:M}=x;C.loop&&x.loopDestroy();let P=M+1;if(typeof d=="object"&&"length"in d){for(let Y=0;Y<d.length;Y+=1)d[Y]&&I.prepend(d[Y]);P=M+d.length}else I.prepend(d);C.loop&&x.loopCreate(),C.observer||x.update(),x.slideTo(P,0,!1)}function Fe(d,x){let C=this,{$wrapperEl:I,params:M,activeIndex:P}=C,Y=P;M.loop&&(Y-=C.loopedSlides,C.loopDestroy(),C.slides=I.children(`.${M.slideClass}`));let j=C.slides.length;if(d<=0)return void C.prependSlide(x);if(d>=j)return void C.appendSlide(x);let G=Y>d?Y+1:Y,J=[];for(let q=j-1;q>=d;q-=1){let z=C.slides.eq(q);z.remove(),J.unshift(z)}if(typeof x=="object"&&"length"in x){for(let q=0;q<x.length;q+=1)x[q]&&I.append(x[q]);G=Y>d?Y+x.length:Y}else I.append(x);for(let q=0;q<J.length;q+=1)I.append(J[q]);M.loop&&C.loopCreate(),M.observer||C.update(),M.loop?C.slideTo(G+C.loopedSlides,0,!1):C.slideTo(G,0,!1)}function ki(d){let x=this,{params:C,$wrapperEl:I,activeIndex:M}=x,P=M;C.loop&&(P-=x.loopedSlides,x.loopDestroy(),x.slides=I.children(`.${C.slideClass}`));let Y,j=P;if(typeof d=="object"&&"length"in d){for(let G=0;G<d.length;G+=1)Y=d[G],x.slides[Y]&&x.slides.eq(Y).remove(),Y<j&&(j-=1);j=Math.max(j,0)}else Y=d,x.slides[Y]&&x.slides.eq(Y).remove(),Y<j&&(j-=1),j=Math.max(j,0);C.loop&&x.loopCreate(),C.observer||x.update(),C.loop?x.slideTo(j+x.loopedSlides,0,!1):x.slideTo(j,0,!1)}function _i(){let d=this,x=[];for(let C=0;C<d.slides.length;C+=1)x.push(C);d.removeSlide(x)}function Ri(d){let{effect:x,swiper:C,on:I,setTranslate:M,setTransition:P,overwriteParams:Y,perspective:j}=d;I("beforeInit",()=>{if(C.params.effect!==x)return;C.classNames.push(`${C.params.containerModifierClass}${x}`),j&&j()&&C.classNames.push(`${C.params.containerModifierClass}3d`);let G=Y?Y():{};Object.assign(C.params,G),Object.assign(C.originalParams,G)}),I("setTranslate",()=>{C.params.effect===x&&M()}),I("setTransition",(G,J)=>{C.params.effect===x&&P(J)})}function pi(d,x){return d.transformEl?x.find(d.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):x}function Ui({swiper:d,duration:x,transformEl:C,allSlides:I}){let{slides:M,activeIndex:P,$wrapperEl:Y}=d;if(d.params.virtualTranslate&&x!==0){let j,G=!1;j=I?C?M.find(C):M:C?M.eq(P).find(C):M.eq(P),j.transitionEnd(()=>{if(G||!d||d.destroyed)return;G=!0,d.animating=!1;let J=["webkitTransitionEnd","transitionend"];for(let q=0;q<J.length;q+=1)Y.trigger(J[q])})}}function fs(d,x,C){let I="swiper-slide-shadow"+(C?`-${C}`:""),M=d.transformEl?x.find(d.transformEl):x,P=M.children(`.${I}`);return P.length||(P=u(`<div class="swiper-slide-shadow${C?`-${C}`:""}"></div>`),M.append(P)),P}Object.keys(Ye).forEach(d=>{Object.keys(Ye[d]).forEach(x=>{wt.prototype[x]=Ye[d][x]})}),wt.use([function({swiper:d,on:x,emit:C}){let I=r(),M=null,P=()=>{d&&!d.destroyed&&d.initialized&&(C("beforeResize"),C("resize"))},Y=()=>{d&&!d.destroyed&&d.initialized&&C("orientationchange")};x("init",()=>{d.params.resizeObserver&&I.ResizeObserver!==void 0?d&&!d.destroyed&&d.initialized&&(M=new ResizeObserver(j=>{let{width:G,height:J}=d,q=G,z=J;j.forEach(({contentBoxSize:ee,contentRect:se,target:le})=>{le&&le!==d.el||(q=se?se.width:(ee[0]||ee).inlineSize,z=se?se.height:(ee[0]||ee).blockSize)}),q===G&&z===J||P()}),M.observe(d.el)):(I.addEventListener("resize",P),I.addEventListener("orientationchange",Y))}),x("destroy",()=>{M&&M.unobserve&&d.el&&(M.unobserve(d.el),M=null),I.removeEventListener("resize",P),I.removeEventListener("orientationchange",Y)})},function({swiper:d,extendParams:x,on:C,emit:I}){let M=[],P=r(),Y=(j,G={})=>{let J=new(P.MutationObserver||P.WebkitMutationObserver)(q=>{if(q.length===1)return void I("observerUpdate",q[0]);let z=function(){I("observerUpdate",q[0])};P.requestAnimationFrame?P.requestAnimationFrame(z):P.setTimeout(z,0)});J.observe(j,{attributes:G.attributes===void 0||G.attributes,childList:G.childList===void 0||G.childList,characterData:G.characterData===void 0||G.characterData}),M.push(J)};x({observer:!1,observeParents:!1,observeSlideChildren:!1}),C("init",()=>{if(d.params.observer){if(d.params.observeParents){let j=d.$el.parents();for(let G=0;G<j.length;G+=1)Y(j[G])}Y(d.$el[0],{childList:d.params.observeSlideChildren}),Y(d.$wrapperEl[0],{attributes:!1})}}),C("destroy",()=>{M.forEach(j=>{j.disconnect()}),M.splice(0,M.length)})}]);let Lt=[function({swiper:d,extendParams:x,on:C}){let I;function M(Y,j){let G=d.params.virtual;if(G.cache&&d.virtual.cache[j])return d.virtual.cache[j];let J=G.renderSlide?u(G.renderSlide.call(d,Y,j)):u(`<div class="${d.params.slideClass}" data-swiper-slide-index="${j}">${Y}</div>`);return J.attr("data-swiper-slide-index")||J.attr("data-swiper-slide-index",j),G.cache&&(d.virtual.cache[j]=J),J}function P(Y){let{slidesPerView:j,slidesPerGroup:G,centeredSlides:J}=d.params,{addSlidesBefore:q,addSlidesAfter:z}=d.params.virtual,{from:ee,to:se,slides:le,slidesGrid:de,offset:ke}=d.virtual;d.params.cssMode||d.updateActiveIndex();let me=d.activeIndex||0,De,Se,Ke;De=d.rtlTranslate?"right":d.isHorizontal()?"left":"top",J?(Se=Math.floor(j/2)+G+z,Ke=Math.floor(j/2)+G+q):(Se=j+(G-1)+z,Ke=G+q);let nt=Math.max((me||0)-Ke,0),qe=Math.min((me||0)+Se,le.length-1),Je=(d.slidesGrid[nt]||0)-(d.slidesGrid[0]||0);function it(){d.updateSlides(),d.updateProgress(),d.updateSlidesClasses(),d.lazy&&d.params.lazy.enabled&&d.lazy.load()}if(Object.assign(d.virtual,{from:nt,to:qe,offset:Je,slidesGrid:d.slidesGrid}),ee===nt&&se===qe&&!Y)return d.slidesGrid!==de&&Je!==ke&&d.slides.css(De,`${Je}px`),void d.updateProgress();if(d.params.virtual.renderExternal)return d.params.virtual.renderExternal.call(d,{offset:Je,from:nt,to:qe,slides:function(){let Pe=[];for(let tt=nt;tt<=qe;tt+=1)Pe.push(le[tt]);return Pe}()}),void(d.params.virtual.renderExternalUpdate&&it());let ze=[],$e=[];if(Y)d.$wrapperEl.find(`.${d.params.slideClass}`).remove();else for(let Pe=ee;Pe<=se;Pe+=1)(Pe<nt||Pe>qe)&&d.$wrapperEl.find(`.${d.params.slideClass}[data-swiper-slide-index="${Pe}"]`).remove();for(let Pe=0;Pe<le.length;Pe+=1)Pe>=nt&&Pe<=qe&&(se===void 0||Y?$e.push(Pe):(Pe>se&&$e.push(Pe),Pe<ee&&ze.push(Pe)));$e.forEach(Pe=>{d.$wrapperEl.append(M(le[Pe],Pe))}),ze.sort((Pe,tt)=>tt-Pe).forEach(Pe=>{d.$wrapperEl.prepend(M(le[Pe],Pe))}),d.$wrapperEl.children(".swiper-slide").css(De,`${Je}px`),it()}x({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),d.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},C("beforeInit",()=>{d.params.virtual.enabled&&(d.virtual.slides=d.params.virtual.slides,d.classNames.push(`${d.params.containerModifierClass}virtual`),d.params.watchSlidesProgress=!0,d.originalParams.watchSlidesProgress=!0,d.params.initialSlide||P())}),C("setTranslate",()=>{d.params.virtual.enabled&&(d.params.cssMode&&!d._immediateVirtual?(clearTimeout(I),I=setTimeout(()=>{P()},100)):P())}),C("init update resize",()=>{d.params.virtual.enabled&&d.params.cssMode&&A(d.wrapperEl,"--swiper-virtual-size",`${d.virtualSize}px`)}),Object.assign(d.virtual,{appendSlide:function(Y){if(typeof Y=="object"&&"length"in Y)for(let j=0;j<Y.length;j+=1)Y[j]&&d.virtual.slides.push(Y[j]);else d.virtual.slides.push(Y);P(!0)},prependSlide:function(Y){let j=d.activeIndex,G=j+1,J=1;if(Array.isArray(Y)){for(let q=0;q<Y.length;q+=1)Y[q]&&d.virtual.slides.unshift(Y[q]);G=j+Y.length,J=Y.length}else d.virtual.slides.unshift(Y);if(d.params.virtual.cache){let q=d.virtual.cache,z={};Object.keys(q).forEach(ee=>{let se=q[ee],le=se.attr("data-swiper-slide-index");le&&se.attr("data-swiper-slide-index",parseInt(le,10)+J),z[parseInt(ee,10)+J]=se}),d.virtual.cache=z}P(!0),d.slideTo(G,0)},removeSlide:function(Y){if(Y==null)return;let j=d.activeIndex;if(Array.isArray(Y))for(let G=Y.length-1;G>=0;G-=1)d.virtual.slides.splice(Y[G],1),d.params.virtual.cache&&delete d.virtual.cache[Y[G]],Y[G]<j&&(j-=1),j=Math.max(j,0);else d.virtual.slides.splice(Y,1),d.params.virtual.cache&&delete d.virtual.cache[Y],Y<j&&(j-=1),j=Math.max(j,0);P(!0),d.slideTo(j,0)},removeAllSlides:function(){d.virtual.slides=[],d.params.virtual.cache&&(d.virtual.cache={}),P(!0),d.slideTo(0,0)},update:P})},function({swiper:d,extendParams:x,on:C,emit:I}){let M=i(),P=r();function Y(J){if(!d.enabled)return;let{rtlTranslate:q}=d,z=J;z.originalEvent&&(z=z.originalEvent);let ee=z.keyCode||z.charCode,se=d.params.keyboard.pageUpDown,le=se&&ee===33,de=se&&ee===34,ke=ee===37,me=ee===39,De=ee===38,Se=ee===40;if(!d.allowSlideNext&&(d.isHorizontal()&&me||d.isVertical()&&Se||de)||!d.allowSlidePrev&&(d.isHorizontal()&&ke||d.isVertical()&&De||le))return!1;if(!(z.shiftKey||z.altKey||z.ctrlKey||z.metaKey||M.activeElement&&M.activeElement.nodeName&&(M.activeElement.nodeName.toLowerCase()==="input"||M.activeElement.nodeName.toLowerCase()==="textarea"))){if(d.params.keyboard.onlyInViewport&&(le||de||ke||me||De||Se)){let Ke=!1;if(d.$el.parents(`.${d.params.slideClass}`).length>0&&d.$el.parents(`.${d.params.slideActiveClass}`).length===0)return;let nt=d.$el,qe=nt[0].clientWidth,Je=nt[0].clientHeight,it=P.innerWidth,ze=P.innerHeight,$e=d.$el.offset();q&&($e.left-=d.$el[0].scrollLeft);let Pe=[[$e.left,$e.top],[$e.left+qe,$e.top],[$e.left,$e.top+Je],[$e.left+qe,$e.top+Je]];for(let tt=0;tt<Pe.length;tt+=1){let _t=Pe[tt];if(_t[0]>=0&&_t[0]<=it&&_t[1]>=0&&_t[1]<=ze){if(_t[0]===0&&_t[1]===0)continue;Ke=!0}}if(!Ke)return}d.isHorizontal()?((le||de||ke||me)&&(z.preventDefault?z.preventDefault():z.returnValue=!1),((de||me)&&!q||(le||ke)&&q)&&d.slideNext(),((le||ke)&&!q||(de||me)&&q)&&d.slidePrev()):((le||de||De||Se)&&(z.preventDefault?z.preventDefault():z.returnValue=!1),(de||Se)&&d.slideNext(),(le||De)&&d.slidePrev()),I("keyPress",ee)}}function j(){d.keyboard.enabled||(u(M).on("keydown",Y),d.keyboard.enabled=!0)}function G(){d.keyboard.enabled&&(u(M).off("keydown",Y),d.keyboard.enabled=!1)}d.keyboard={enabled:!1},x({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),C("init",()=>{d.params.keyboard.enabled&&j()}),C("destroy",()=>{d.keyboard.enabled&&G()}),Object.assign(d.keyboard,{enable:j,disable:G})},function({swiper:d,extendParams:x,on:C,emit:I}){let M=r(),P;x({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),d.mousewheel={enabled:!1};let Y,j=g(),G=[];function J(){d.enabled&&(d.mouseEntered=!0)}function q(){d.enabled&&(d.mouseEntered=!1)}function z(ke){return!(d.params.mousewheel.thresholdDelta&&ke.delta<d.params.mousewheel.thresholdDelta)&&!(d.params.mousewheel.thresholdTime&&g()-j<d.params.mousewheel.thresholdTime)&&(ke.delta>=6&&g()-j<60||(ke.direction<0?d.isEnd&&!d.params.loop||d.animating||(d.slideNext(),I("scroll",ke.raw)):d.isBeginning&&!d.params.loop||d.animating||(d.slidePrev(),I("scroll",ke.raw)),j=new M.Date().getTime(),!1))}function ee(ke){let me=ke,De=!0;if(!d.enabled)return;let Se=d.params.mousewheel;d.params.cssMode&&me.preventDefault();let Ke=d.$el;if(d.params.mousewheel.eventsTarget!=="container"&&(Ke=u(d.params.mousewheel.eventsTarget)),!d.mouseEntered&&!Ke[0].contains(me.target)&&!Se.releaseOnEdges)return!0;me.originalEvent&&(me=me.originalEvent);let nt=0,qe=d.rtlTranslate?-1:1,Je=function(ze){let $e=0,Pe=0,tt=0,_t=0;return"detail"in ze&&(Pe=ze.detail),"wheelDelta"in ze&&(Pe=-ze.wheelDelta/120),"wheelDeltaY"in ze&&(Pe=-ze.wheelDeltaY/120),"wheelDeltaX"in ze&&($e=-ze.wheelDeltaX/120),"axis"in ze&&ze.axis===ze.HORIZONTAL_AXIS&&($e=Pe,Pe=0),tt=10*$e,_t=10*Pe,"deltaY"in ze&&(_t=ze.deltaY),"deltaX"in ze&&(tt=ze.deltaX),ze.shiftKey&&!tt&&(tt=_t,_t=0),(tt||_t)&&ze.deltaMode&&(ze.deltaMode===1?(tt*=40,_t*=40):(tt*=800,_t*=800)),tt&&!$e&&($e=tt<1?-1:1),_t&&!Pe&&(Pe=_t<1?-1:1),{spinX:$e,spinY:Pe,pixelX:tt,pixelY:_t}}(me);if(Se.forceToAxis)if(d.isHorizontal()){if(!(Math.abs(Je.pixelX)>Math.abs(Je.pixelY)))return!0;nt=-Je.pixelX*qe}else{if(!(Math.abs(Je.pixelY)>Math.abs(Je.pixelX)))return!0;nt=-Je.pixelY}else nt=Math.abs(Je.pixelX)>Math.abs(Je.pixelY)?-Je.pixelX*qe:-Je.pixelY;if(nt===0)return!0;Se.invert&&(nt=-nt);let it=d.getTranslate()+nt*Se.sensitivity;if(it>=d.minTranslate()&&(it=d.minTranslate()),it<=d.maxTranslate()&&(it=d.maxTranslate()),De=!!d.params.loop||!(it===d.minTranslate()||it===d.maxTranslate()),De&&d.params.nested&&me.stopPropagation(),d.params.freeMode&&d.params.freeMode.enabled){let ze={time:g(),delta:Math.abs(nt),direction:Math.sign(nt)},$e=Y&&ze.time<Y.time+500&&ze.delta<=Y.delta&&ze.direction===Y.direction;if(!$e){Y=void 0,d.params.loop&&d.loopFix();let Pe=d.getTranslate()+nt*Se.sensitivity,tt=d.isBeginning,_t=d.isEnd;if(Pe>=d.minTranslate()&&(Pe=d.minTranslate()),Pe<=d.maxTranslate()&&(Pe=d.maxTranslate()),d.setTransition(0),d.setTranslate(Pe),d.updateProgress(),d.updateActiveIndex(),d.updateSlidesClasses(),(!tt&&d.isBeginning||!_t&&d.isEnd)&&d.updateSlidesClasses(),d.params.freeMode.sticky){clearTimeout(P),P=void 0,G.length>=15&&G.shift();let at=G.length?G[G.length-1]:void 0,Ct=G[0];if(G.push(ze),at&&(ze.delta>at.delta||ze.direction!==at.direction))G.splice(0);else if(G.length>=15&&ze.time-Ct.time<500&&Ct.delta-ze.delta>=1&&ze.delta<=6){let Tt=nt>0?.8:.2;Y=ze,G.splice(0),P=h(()=>{d.slideToClosest(d.params.speed,!0,void 0,Tt)},0)}P||(P=h(()=>{Y=ze,G.splice(0),d.slideToClosest(d.params.speed,!0,void 0,.5)},500))}if($e||I("scroll",me),d.params.autoplay&&d.params.autoplayDisableOnInteraction&&d.autoplay.stop(),Pe===d.minTranslate()||Pe===d.maxTranslate())return!0}}else{let ze={time:g(),delta:Math.abs(nt),direction:Math.sign(nt),raw:ke};G.length>=2&&G.shift();let $e=G.length?G[G.length-1]:void 0;if(G.push(ze),$e?(ze.direction!==$e.direction||ze.delta>$e.delta||ze.time>$e.time+150)&&z(ze):z(ze),function(Pe){let tt=d.params.mousewheel;if(Pe.direction<0){if(d.isEnd&&!d.params.loop&&tt.releaseOnEdges)return!0}else if(d.isBeginning&&!d.params.loop&&tt.releaseOnEdges)return!0;return!1}(ze))return!0}return me.preventDefault?me.preventDefault():me.returnValue=!1,!1}function se(ke){let me=d.$el;d.params.mousewheel.eventsTarget!=="container"&&(me=u(d.params.mousewheel.eventsTarget)),me[ke]("mouseenter",J),me[ke]("mouseleave",q),me[ke]("wheel",ee)}function le(){return d.params.cssMode?(d.wrapperEl.removeEventListener("wheel",ee),!0):!d.mousewheel.enabled&&(se("on"),d.mousewheel.enabled=!0,!0)}function de(){return d.params.cssMode?(d.wrapperEl.addEventListener(event,ee),!0):!!d.mousewheel.enabled&&(se("off"),d.mousewheel.enabled=!1,!0)}C("init",()=>{!d.params.mousewheel.enabled&&d.params.cssMode&&de(),d.params.mousewheel.enabled&&le()}),C("destroy",()=>{d.params.cssMode&&le(),d.mousewheel.enabled&&de()}),Object.assign(d.mousewheel,{enable:le,disable:de})},function({swiper:d,extendParams:x,on:C,emit:I}){function M(z){let ee;return z&&(ee=u(z),d.params.uniqueNavElements&&typeof z=="string"&&ee.length>1&&d.$el.find(z).length===1&&(ee=d.$el.find(z))),ee}function P(z,ee){let se=d.params.navigation;z&&z.length>0&&(z[ee?"addClass":"removeClass"](se.disabledClass),z[0]&&z[0].tagName==="BUTTON"&&(z[0].disabled=ee),d.params.watchOverflow&&d.enabled&&z[d.isLocked?"addClass":"removeClass"](se.lockClass))}function Y(){if(d.params.loop)return;let{$nextEl:z,$prevEl:ee}=d.navigation;P(ee,d.isBeginning),P(z,d.isEnd)}function j(z){z.preventDefault(),d.isBeginning&&!d.params.loop||d.slidePrev()}function G(z){z.preventDefault(),d.isEnd&&!d.params.loop||d.slideNext()}function J(){let z=d.params.navigation;if(d.params.navigation=xt(d,d.originalParams.navigation,d.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!z.nextEl&&!z.prevEl)return;let ee=M(z.nextEl),se=M(z.prevEl);ee&&ee.length>0&&ee.on("click",G),se&&se.length>0&&se.on("click",j),Object.assign(d.navigation,{$nextEl:ee,nextEl:ee&&ee[0],$prevEl:se,prevEl:se&&se[0]}),d.enabled||(ee&&ee.addClass(z.lockClass),se&&se.addClass(z.lockClass))}function q(){let{$nextEl:z,$prevEl:ee}=d.navigation;z&&z.length&&(z.off("click",G),z.removeClass(d.params.navigation.disabledClass)),ee&&ee.length&&(ee.off("click",j),ee.removeClass(d.params.navigation.disabledClass))}x({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),d.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},C("init",()=>{J(),Y()}),C("toEdge fromEdge lock unlock",()=>{Y()}),C("destroy",()=>{q()}),C("enable disable",()=>{let{$nextEl:z,$prevEl:ee}=d.navigation;z&&z[d.enabled?"removeClass":"addClass"](d.params.navigation.lockClass),ee&&ee[d.enabled?"removeClass":"addClass"](d.params.navigation.lockClass)}),C("click",(z,ee)=>{let{$nextEl:se,$prevEl:le}=d.navigation,de=ee.target;if(d.params.navigation.hideOnClick&&!u(de).is(le)&&!u(de).is(se)){if(d.pagination&&d.params.pagination&&d.params.pagination.clickable&&(d.pagination.el===de||d.pagination.el.contains(de)))return;let ke;se?ke=se.hasClass(d.params.navigation.hiddenClass):le&&(ke=le.hasClass(d.params.navigation.hiddenClass)),I(ke===!0?"navigationShow":"navigationHide"),se&&se.toggleClass(d.params.navigation.hiddenClass),le&&le.toggleClass(d.params.navigation.hiddenClass)}}),Object.assign(d.navigation,{update:Y,init:J,destroy:q})},function({swiper:d,extendParams:x,on:C,emit:I}){let M="swiper-pagination",P;x({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:se=>se,formatFractionTotal:se=>se,bulletClass:`${M}-bullet`,bulletActiveClass:`${M}-bullet-active`,modifierClass:`${M}-`,currentClass:`${M}-current`,totalClass:`${M}-total`,hiddenClass:`${M}-hidden`,progressbarFillClass:`${M}-progressbar-fill`,progressbarOppositeClass:`${M}-progressbar-opposite`,clickableClass:`${M}-clickable`,lockClass:`${M}-lock`,horizontalClass:`${M}-horizontal`,verticalClass:`${M}-vertical`}}),d.pagination={el:null,$el:null,bullets:[]};let Y=0;function j(){return!d.params.pagination.el||!d.pagination.el||!d.pagination.$el||d.pagination.$el.length===0}function G(se,le){let{bulletActiveClass:de}=d.params.pagination;se[le]().addClass(`${de}-${le}`)[le]().addClass(`${de}-${le}-${le}`)}function J(){let se=d.rtl,le=d.params.pagination;if(j())return;let de=d.virtual&&d.params.virtual.enabled?d.virtual.slides.length:d.slides.length,ke=d.pagination.$el,me,De=d.params.loop?Math.ceil((de-2*d.loopedSlides)/d.params.slidesPerGroup):d.snapGrid.length;if(d.params.loop?(me=Math.ceil((d.activeIndex-d.loopedSlides)/d.params.slidesPerGroup),me>de-1-2*d.loopedSlides&&(me-=de-2*d.loopedSlides),me>De-1&&(me-=De),me<0&&d.params.paginationType!=="bullets"&&(me=De+me)):me=d.snapIndex!==void 0?d.snapIndex:d.activeIndex||0,le.type==="bullets"&&d.pagination.bullets&&d.pagination.bullets.length>0){let Se=d.pagination.bullets,Ke,nt,qe;if(le.dynamicBullets&&(P=Se.eq(0)[d.isHorizontal()?"outerWidth":"outerHeight"](!0),ke.css(d.isHorizontal()?"width":"height",P*(le.dynamicMainBullets+4)+"px"),le.dynamicMainBullets>1&&d.previousIndex!==void 0&&(Y+=me-d.previousIndex,Y>le.dynamicMainBullets-1?Y=le.dynamicMainBullets-1:Y<0&&(Y=0)),Ke=me-Y,nt=Ke+(Math.min(Se.length,le.dynamicMainBullets)-1),qe=(nt+Ke)/2),Se.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(Je=>`${le.bulletActiveClass}${Je}`).join(" ")),ke.length>1)Se.each(Je=>{let it=u(Je),ze=it.index();ze===me&&it.addClass(le.bulletActiveClass),le.dynamicBullets&&(ze>=Ke&&ze<=nt&&it.addClass(`${le.bulletActiveClass}-main`),ze===Ke&&G(it,"prev"),ze===nt&&G(it,"next"))});else{let Je=Se.eq(me),it=Je.index();if(Je.addClass(le.bulletActiveClass),le.dynamicBullets){let ze=Se.eq(Ke),$e=Se.eq(nt);for(let Pe=Ke;Pe<=nt;Pe+=1)Se.eq(Pe).addClass(`${le.bulletActiveClass}-main`);if(d.params.loop)if(it>=Se.length-le.dynamicMainBullets){for(let Pe=le.dynamicMainBullets;Pe>=0;Pe-=1)Se.eq(Se.length-Pe).addClass(`${le.bulletActiveClass}-main`);Se.eq(Se.length-le.dynamicMainBullets-1).addClass(`${le.bulletActiveClass}-prev`)}else G(ze,"prev"),G($e,"next");else G(ze,"prev"),G($e,"next")}}if(le.dynamicBullets){let Je=Math.min(Se.length,le.dynamicMainBullets+4),it=(P*Je-P)/2-qe*P,ze=se?"right":"left";Se.css(d.isHorizontal()?ze:"top",`${it}px`)}}if(le.type==="fraction"&&(ke.find(At(le.currentClass)).text(le.formatFractionCurrent(me+1)),ke.find(At(le.totalClass)).text(le.formatFractionTotal(De))),le.type==="progressbar"){let Se;Se=le.progressbarOpposite?d.isHorizontal()?"vertical":"horizontal":d.isHorizontal()?"horizontal":"vertical";let Ke=(me+1)/De,nt=1,qe=1;Se==="horizontal"?nt=Ke:qe=Ke,ke.find(At(le.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${nt}) scaleY(${qe})`).transition(d.params.speed)}le.type==="custom"&&le.renderCustom?(ke.html(le.renderCustom(d,me+1,De)),I("paginationRender",ke[0])):I("paginationUpdate",ke[0]),d.params.watchOverflow&&d.enabled&&ke[d.isLocked?"addClass":"removeClass"](le.lockClass)}function q(){let se=d.params.pagination;if(j())return;let le=d.virtual&&d.params.virtual.enabled?d.virtual.slides.length:d.slides.length,de=d.pagination.$el,ke="";if(se.type==="bullets"){let me=d.params.loop?Math.ceil((le-2*d.loopedSlides)/d.params.slidesPerGroup):d.snapGrid.length;d.params.freeMode&&d.params.freeMode.enabled&&!d.params.loop&&me>le&&(me=le);for(let De=0;De<me;De+=1)se.renderBullet?ke+=se.renderBullet.call(d,De,se.bulletClass):ke+=`<${se.bulletElement} class="${se.bulletClass}"></${se.bulletElement}>`;de.html(ke),d.pagination.bullets=de.find(At(se.bulletClass))}se.type==="fraction"&&(ke=se.renderFraction?se.renderFraction.call(d,se.currentClass,se.totalClass):`<span class="${se.currentClass}"></span> / <span class="${se.totalClass}"></span>`,de.html(ke)),se.type==="progressbar"&&(ke=se.renderProgressbar?se.renderProgressbar.call(d,se.progressbarFillClass):`<span class="${se.progressbarFillClass}"></span>`,de.html(ke)),se.type!=="custom"&&I("paginationRender",d.pagination.$el[0])}function z(){d.params.pagination=xt(d,d.originalParams.pagination,d.params.pagination,{el:"swiper-pagination"});let se=d.params.pagination;if(!se.el)return;let le=u(se.el);le.length!==0&&(d.params.uniqueNavElements&&typeof se.el=="string"&&le.length>1&&(le=d.$el.find(se.el),le.length>1&&(le=le.filter(de=>u(de).parents(".swiper")[0]===d.el))),se.type==="bullets"&&se.clickable&&le.addClass(se.clickableClass),le.addClass(se.modifierClass+se.type),le.addClass(se.modifierClass+d.params.direction),se.type==="bullets"&&se.dynamicBullets&&(le.addClass(`${se.modifierClass}${se.type}-dynamic`),Y=0,se.dynamicMainBullets<1&&(se.dynamicMainBullets=1)),se.type==="progressbar"&&se.progressbarOpposite&&le.addClass(se.progressbarOppositeClass),se.clickable&&le.on("click",At(se.bulletClass),function(de){de.preventDefault();let ke=u(this).index()*d.params.slidesPerGroup;d.params.loop&&(ke+=d.loopedSlides),d.slideTo(ke)}),Object.assign(d.pagination,{$el:le,el:le[0]}),d.enabled||le.addClass(se.lockClass))}function ee(){let se=d.params.pagination;if(j())return;let le=d.pagination.$el;le.removeClass(se.hiddenClass),le.removeClass(se.modifierClass+se.type),le.removeClass(se.modifierClass+d.params.direction),d.pagination.bullets&&d.pagination.bullets.removeClass&&d.pagination.bullets.removeClass(se.bulletActiveClass),se.clickable&&le.off("click",At(se.bulletClass))}C("init",()=>{z(),q(),J()}),C("activeIndexChange",()=>{(d.params.loop||d.snapIndex===void 0)&&J()}),C("snapIndexChange",()=>{d.params.loop||J()}),C("slidesLengthChange",()=>{d.params.loop&&(q(),J())}),C("snapGridLengthChange",()=>{d.params.loop||(q(),J())}),C("destroy",()=>{ee()}),C("enable disable",()=>{let{$el:se}=d.pagination;se&&se[d.enabled?"removeClass":"addClass"](d.params.pagination.lockClass)}),C("lock unlock",()=>{J()}),C("click",(se,le)=>{let de=le.target,{$el:ke}=d.pagination;if(d.params.pagination.el&&d.params.pagination.hideOnClick&&ke.length>0&&!u(de).hasClass(d.params.pagination.bulletClass)){if(d.navigation&&(d.navigation.nextEl&&de===d.navigation.nextEl||d.navigation.prevEl&&de===d.navigation.prevEl))return;let me=ke.hasClass(d.params.pagination.hiddenClass);I(me===!0?"paginationShow":"paginationHide"),ke.toggleClass(d.params.pagination.hiddenClass)}}),Object.assign(d.pagination,{render:q,update:J,init:z,destroy:ee})},function({swiper:d,extendParams:x,on:C,emit:I}){let M=i(),P,Y,j,G,J=!1,q=null,z=null;function ee(){if(!d.params.scrollbar.el||!d.scrollbar.el)return;let{scrollbar:qe,rtlTranslate:Je,progress:it}=d,{$dragEl:ze,$el:$e}=qe,Pe=d.params.scrollbar,tt=Y,_t=(j-Y)*it;Je?(_t=-_t,_t>0?(tt=Y-_t,_t=0):-_t+Y>j&&(tt=j+_t)):_t<0?(tt=Y+_t,_t=0):_t+Y>j&&(tt=j-_t),d.isHorizontal()?(ze.transform(`translate3d(${_t}px, 0, 0)`),ze[0].style.width=`${tt}px`):(ze.transform(`translate3d(0px, ${_t}px, 0)`),ze[0].style.height=`${tt}px`),Pe.hide&&(clearTimeout(q),$e[0].style.opacity=1,q=setTimeout(()=>{$e[0].style.opacity=0,$e.transition(400)},1e3))}function se(){if(!d.params.scrollbar.el||!d.scrollbar.el)return;let{scrollbar:qe}=d,{$dragEl:Je,$el:it}=qe;Je[0].style.width="",Je[0].style.height="",j=d.isHorizontal()?it[0].offsetWidth:it[0].offsetHeight,G=d.size/(d.virtualSize+d.params.slidesOffsetBefore-(d.params.centeredSlides?d.snapGrid[0]:0)),Y=d.params.scrollbar.dragSize==="auto"?j*G:parseInt(d.params.scrollbar.dragSize,10),d.isHorizontal()?Je[0].style.width=`${Y}px`:Je[0].style.height=`${Y}px`,it[0].style.display=G>=1?"none":"",d.params.scrollbar.hide&&(it[0].style.opacity=0),d.params.watchOverflow&&d.enabled&&qe.$el[d.isLocked?"addClass":"removeClass"](d.params.scrollbar.lockClass)}function le(qe){return d.isHorizontal()?qe.type==="touchstart"||qe.type==="touchmove"?qe.targetTouches[0].clientX:qe.clientX:qe.type==="touchstart"||qe.type==="touchmove"?qe.targetTouches[0].clientY:qe.clientY}function de(qe){let{scrollbar:Je,rtlTranslate:it}=d,{$el:ze}=Je,$e;$e=(le(qe)-ze.offset()[d.isHorizontal()?"left":"top"]-(P!==null?P:Y/2))/(j-Y),$e=Math.max(Math.min($e,1),0),it&&($e=1-$e);let Pe=d.minTranslate()+(d.maxTranslate()-d.minTranslate())*$e;d.updateProgress(Pe),d.setTranslate(Pe),d.updateActiveIndex(),d.updateSlidesClasses()}function ke(qe){let Je=d.params.scrollbar,{scrollbar:it,$wrapperEl:ze}=d,{$el:$e,$dragEl:Pe}=it;J=!0,P=qe.target===Pe[0]||qe.target===Pe?le(qe)-qe.target.getBoundingClientRect()[d.isHorizontal()?"left":"top"]:null,qe.preventDefault(),qe.stopPropagation(),ze.transition(100),Pe.transition(100),de(qe),clearTimeout(z),$e.transition(0),Je.hide&&$e.css("opacity",1),d.params.cssMode&&d.$wrapperEl.css("scroll-snap-type","none"),I("scrollbarDragStart",qe)}function me(qe){let{scrollbar:Je,$wrapperEl:it}=d,{$el:ze,$dragEl:$e}=Je;J&&(qe.preventDefault?qe.preventDefault():qe.returnValue=!1,de(qe),it.transition(0),ze.transition(0),$e.transition(0),I("scrollbarDragMove",qe))}function De(qe){let Je=d.params.scrollbar,{scrollbar:it,$wrapperEl:ze}=d,{$el:$e}=it;J&&(J=!1,d.params.cssMode&&(d.$wrapperEl.css("scroll-snap-type",""),ze.transition("")),Je.hide&&(clearTimeout(z),z=h(()=>{$e.css("opacity",0),$e.transition(400)},1e3)),I("scrollbarDragEnd",qe),Je.snapOnRelease&&d.slideToClosest())}function Se(qe){let{scrollbar:Je,touchEventsTouch:it,touchEventsDesktop:ze,params:$e,support:Pe}=d,tt=Je.$el[0],_t=!(!Pe.passiveListener||!$e.passiveListeners)&&{passive:!1,capture:!1},at=!(!Pe.passiveListener||!$e.passiveListeners)&&{passive:!0,capture:!1};if(!tt)return;let Ct=qe==="on"?"addEventListener":"removeEventListener";Pe.touch?(tt[Ct](it.start,ke,_t),tt[Ct](it.move,me,_t),tt[Ct](it.end,De,at)):(tt[Ct](ze.start,ke,_t),M[Ct](ze.move,me,_t),M[Ct](ze.end,De,at))}function Ke(){let{scrollbar:qe,$el:Je}=d;d.params.scrollbar=xt(d,d.originalParams.scrollbar,d.params.scrollbar,{el:"swiper-scrollbar"});let it=d.params.scrollbar;if(!it.el)return;let ze=u(it.el);d.params.uniqueNavElements&&typeof it.el=="string"&&ze.length>1&&Je.find(it.el).length===1&&(ze=Je.find(it.el));let $e=ze.find(`.${d.params.scrollbar.dragClass}`);$e.length===0&&($e=u(`<div class="${d.params.scrollbar.dragClass}"></div>`),ze.append($e)),Object.assign(qe,{$el:ze,el:ze[0],$dragEl:$e,dragEl:$e[0]}),it.draggable&&d.params.scrollbar.el&&Se("on"),ze&&ze[d.enabled?"removeClass":"addClass"](d.params.scrollbar.lockClass)}function nt(){d.params.scrollbar.el&&Se("off")}x({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}}),d.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},C("init",()=>{Ke(),se(),ee()}),C("update resize observerUpdate lock unlock",()=>{se()}),C("setTranslate",()=>{ee()}),C("setTransition",(qe,Je)=>{(function(it){d.params.scrollbar.el&&d.scrollbar.el&&d.scrollbar.$dragEl.transition(it)})(Je)}),C("enable disable",()=>{let{$el:qe}=d.scrollbar;qe&&qe[d.enabled?"removeClass":"addClass"](d.params.scrollbar.lockClass)}),C("destroy",()=>{nt()}),Object.assign(d.scrollbar,{updateSize:se,setTranslate:ee,init:Ke,destroy:nt})},function({swiper:d,extendParams:x,on:C}){x({parallax:{enabled:!1}});let I=(P,Y)=>{let{rtl:j}=d,G=u(P),J=j?-1:1,q=G.attr("data-swiper-parallax")||"0",z=G.attr("data-swiper-parallax-x"),ee=G.attr("data-swiper-parallax-y"),se=G.attr("data-swiper-parallax-scale"),le=G.attr("data-swiper-parallax-opacity");if(z||ee?(z=z||"0",ee=ee||"0"):d.isHorizontal()?(z=q,ee="0"):(ee=q,z="0"),z=z.indexOf("%")>=0?parseInt(z,10)*Y*J+"%":z*Y*J+"px",ee=ee.indexOf("%")>=0?parseInt(ee,10)*Y+"%":ee*Y+"px",le!=null){let de=le-(le-1)*(1-Math.abs(Y));G[0].style.opacity=de}if(se==null)G.transform(`translate3d(${z}, ${ee}, 0px)`);else{let de=se-(se-1)*(1-Math.abs(Y));G.transform(`translate3d(${z}, ${ee}, 0px) scale(${de})`)}},M=()=>{let{$el:P,slides:Y,progress:j,snapGrid:G}=d;P.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(J=>{I(J,j)}),Y.each((J,q)=>{let z=J.progress;d.params.slidesPerGroup>1&&d.params.slidesPerView!=="auto"&&(z+=Math.ceil(q/2)-j*(G.length-1)),z=Math.min(Math.max(z,-1),1),u(J).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(ee=>{I(ee,z)})})};C("beforeInit",()=>{d.params.parallax.enabled&&(d.params.watchSlidesProgress=!0,d.originalParams.watchSlidesProgress=!0)}),C("init",()=>{d.params.parallax.enabled&&M()}),C("setTranslate",()=>{d.params.parallax.enabled&&M()}),C("setTransition",(P,Y)=>{d.params.parallax.enabled&&((j=d.params.speed)=>{let{$el:G}=d;G.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(J=>{let q=u(J),z=parseInt(q.attr("data-swiper-parallax-duration"),10)||j;j===0&&(z=0),q.transition(z)})})(Y)})},function({swiper:d,extendParams:x,on:C,emit:I}){let M=r();x({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),d.zoom={enabled:!1};let P,Y,j,G=1,J=!1,q={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},z={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},ee={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},se=1;function le(at){if(at.targetTouches.length<2)return 1;let Ct=at.targetTouches[0].pageX,Tt=at.targetTouches[0].pageY,Bt=at.targetTouches[1].pageX,Wt=at.targetTouches[1].pageY;return Math.sqrt((Bt-Ct)**2+(Wt-Tt)**2)}function de(at){let Ct=d.support,Tt=d.params.zoom;if(Y=!1,j=!1,!Ct.gestures){if(at.type!=="touchstart"||at.type==="touchstart"&&at.targetTouches.length<2)return;Y=!0,q.scaleStart=le(at)}q.$slideEl&&q.$slideEl.length||(q.$slideEl=u(at.target).closest(`.${d.params.slideClass}`),q.$slideEl.length===0&&(q.$slideEl=d.slides.eq(d.activeIndex)),q.$imageEl=q.$slideEl.find(`.${Tt.containerClass}`).eq(0).find("img, svg, canvas, picture, .swiper-zoom-target"),q.$imageWrapEl=q.$imageEl.parent(`.${Tt.containerClass}`),q.maxRatio=q.$imageWrapEl.attr("data-swiper-zoom")||Tt.maxRatio,q.$imageWrapEl.length!==0)?(q.$imageEl&&q.$imageEl.transition(0),J=!0):q.$imageEl=void 0}function ke(at){let Ct=d.support,Tt=d.params.zoom,Bt=d.zoom;if(!Ct.gestures){if(at.type!=="touchmove"||at.type==="touchmove"&&at.targetTouches.length<2)return;j=!0,q.scaleMove=le(at)}q.$imageEl&&q.$imageEl.length!==0?(Ct.gestures?Bt.scale=at.scale*G:Bt.scale=q.scaleMove/q.scaleStart*G,Bt.scale>q.maxRatio&&(Bt.scale=q.maxRatio-1+(Bt.scale-q.maxRatio+1)**.5),Bt.scale<Tt.minRatio&&(Bt.scale=Tt.minRatio+1-(Tt.minRatio-Bt.scale+1)**.5),q.$imageEl.transform(`translate3d(0,0,0) scale(${Bt.scale})`)):at.type==="gesturechange"&&de(at)}function me(at){let Ct=d.device,Tt=d.support,Bt=d.params.zoom,Wt=d.zoom;if(!Tt.gestures){if(!Y||!j||at.type!=="touchend"||at.type==="touchend"&&at.changedTouches.length<2&&!Ct.android)return;Y=!1,j=!1}q.$imageEl&&q.$imageEl.length!==0&&(Wt.scale=Math.max(Math.min(Wt.scale,q.maxRatio),Bt.minRatio),q.$imageEl.transition(d.params.speed).transform(`translate3d(0,0,0) scale(${Wt.scale})`),G=Wt.scale,J=!1,Wt.scale===1&&(q.$slideEl=void 0))}function De(at){let Ct=d.zoom;if(!q.$imageEl||q.$imageEl.length===0||(d.allowClick=!1,!z.isTouched||!q.$slideEl))return;z.isMoved||(z.width=q.$imageEl[0].offsetWidth,z.height=q.$imageEl[0].offsetHeight,z.startX=m(q.$imageWrapEl[0],"x")||0,z.startY=m(q.$imageWrapEl[0],"y")||0,q.slideWidth=q.$slideEl[0].offsetWidth,q.slideHeight=q.$slideEl[0].offsetHeight,q.$imageWrapEl.transition(0));let Tt=z.width*Ct.scale,Bt=z.height*Ct.scale;if(!(Tt<q.slideWidth&&Bt<q.slideHeight)){if(z.minX=Math.min(q.slideWidth/2-Tt/2,0),z.maxX=-z.minX,z.minY=Math.min(q.slideHeight/2-Bt/2,0),z.maxY=-z.minY,z.touchesCurrent.x=at.type==="touchmove"?at.targetTouches[0].pageX:at.pageX,z.touchesCurrent.y=at.type==="touchmove"?at.targetTouches[0].pageY:at.pageY,!z.isMoved&&!J&&(d.isHorizontal()&&(Math.floor(z.minX)===Math.floor(z.startX)&&z.touchesCurrent.x<z.touchesStart.x||Math.floor(z.maxX)===Math.floor(z.startX)&&z.touchesCurrent.x>z.touchesStart.x)||!d.isHorizontal()&&(Math.floor(z.minY)===Math.floor(z.startY)&&z.touchesCurrent.y<z.touchesStart.y||Math.floor(z.maxY)===Math.floor(z.startY)&&z.touchesCurrent.y>z.touchesStart.y)))return void(z.isTouched=!1);at.cancelable&&at.preventDefault(),at.stopPropagation(),z.isMoved=!0,z.currentX=z.touchesCurrent.x-z.touchesStart.x+z.startX,z.currentY=z.touchesCurrent.y-z.touchesStart.y+z.startY,z.currentX<z.minX&&(z.currentX=z.minX+1-(z.minX-z.currentX+1)**.8),z.currentX>z.maxX&&(z.currentX=z.maxX-1+(z.currentX-z.maxX+1)**.8),z.currentY<z.minY&&(z.currentY=z.minY+1-(z.minY-z.currentY+1)**.8),z.currentY>z.maxY&&(z.currentY=z.maxY-1+(z.currentY-z.maxY+1)**.8),ee.prevPositionX||(ee.prevPositionX=z.touchesCurrent.x),ee.prevPositionY||(ee.prevPositionY=z.touchesCurrent.y),ee.prevTime||(ee.prevTime=Date.now()),ee.x=(z.touchesCurrent.x-ee.prevPositionX)/(Date.now()-ee.prevTime)/2,ee.y=(z.touchesCurrent.y-ee.prevPositionY)/(Date.now()-ee.prevTime)/2,Math.abs(z.touchesCurrent.x-ee.prevPositionX)<2&&(ee.x=0),Math.abs(z.touchesCurrent.y-ee.prevPositionY)<2&&(ee.y=0),ee.prevPositionX=z.touchesCurrent.x,ee.prevPositionY=z.touchesCurrent.y,ee.prevTime=Date.now(),q.$imageWrapEl.transform(`translate3d(${z.currentX}px, ${z.currentY}px,0)`)}}function Se(){let at=d.zoom;q.$slideEl&&d.previousIndex!==d.activeIndex&&(q.$imageEl&&q.$imageEl.transform("translate3d(0,0,0) scale(1)"),q.$imageWrapEl&&q.$imageWrapEl.transform("translate3d(0,0,0)"),at.scale=1,G=1,q.$slideEl=void 0,q.$imageEl=void 0,q.$imageWrapEl=void 0)}function Ke(at){let Ct=d.zoom,Tt=d.params.zoom;if(q.$slideEl||(at&&at.target&&(q.$slideEl=u(at.target).closest(`.${d.params.slideClass}`)),q.$slideEl||(d.params.virtual&&d.params.virtual.enabled&&d.virtual?q.$slideEl=d.$wrapperEl.children(`.${d.params.slideActiveClass}`):q.$slideEl=d.slides.eq(d.activeIndex)),q.$imageEl=q.$slideEl.find(`.${Tt.containerClass}`).eq(0).find("img, svg, canvas, picture, .swiper-zoom-target"),q.$imageWrapEl=q.$imageEl.parent(`.${Tt.containerClass}`)),!q.$imageEl||q.$imageEl.length===0||!q.$imageWrapEl||q.$imageWrapEl.length===0)return;let Bt,Wt,Ai,Hi,Ds,vi,Ls,Vi,es,Ni,ks,Qt,ps,Ks,Ys,Zn,ts,Jt;d.params.cssMode&&(d.wrapperEl.style.overflow="hidden",d.wrapperEl.style.touchAction="none"),q.$slideEl.addClass(`${Tt.zoomedSlideClass}`),z.touchesStart.x===void 0&&at?(Bt=at.type==="touchend"?at.changedTouches[0].pageX:at.pageX,Wt=at.type==="touchend"?at.changedTouches[0].pageY:at.pageY):(Bt=z.touchesStart.x,Wt=z.touchesStart.y),Ct.scale=q.$imageWrapEl.attr("data-swiper-zoom")||Tt.maxRatio,G=q.$imageWrapEl.attr("data-swiper-zoom")||Tt.maxRatio,at?(ts=q.$slideEl[0].offsetWidth,Jt=q.$slideEl[0].offsetHeight,Ai=q.$slideEl.offset().left+M.scrollX,Hi=q.$slideEl.offset().top+M.scrollY,Ds=Ai+ts/2-Bt,vi=Hi+Jt/2-Wt,es=q.$imageEl[0].offsetWidth,Ni=q.$imageEl[0].offsetHeight,ks=es*Ct.scale,Qt=Ni*Ct.scale,ps=Math.min(ts/2-ks/2,0),Ks=Math.min(Jt/2-Qt/2,0),Ys=-ps,Zn=-Ks,Ls=Ds*Ct.scale,Vi=vi*Ct.scale,Ls<ps&&(Ls=ps),Ls>Ys&&(Ls=Ys),Vi<Ks&&(Vi=Ks),Vi>Zn&&(Vi=Zn)):(Ls=0,Vi=0),q.$imageWrapEl.transition(300).transform(`translate3d(${Ls}px, ${Vi}px,0)`),q.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${Ct.scale})`)}function nt(){let at=d.zoom,Ct=d.params.zoom;q.$slideEl||(d.params.virtual&&d.params.virtual.enabled&&d.virtual?q.$slideEl=d.$wrapperEl.children(`.${d.params.slideActiveClass}`):q.$slideEl=d.slides.eq(d.activeIndex),q.$imageEl=q.$slideEl.find(`.${Ct.containerClass}`).eq(0).find("img, svg, canvas, picture, .swiper-zoom-target"),q.$imageWrapEl=q.$imageEl.parent(`.${Ct.containerClass}`)),q.$imageEl&&q.$imageEl.length!==0&&q.$imageWrapEl&&q.$imageWrapEl.length!==0&&(d.params.cssMode&&(d.wrapperEl.style.overflow="",d.wrapperEl.style.touchAction=""),at.scale=1,G=1,q.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),q.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),q.$slideEl.removeClass(`${Ct.zoomedSlideClass}`),q.$slideEl=void 0)}function qe(at){let Ct=d.zoom;Ct.scale&&Ct.scale!==1?nt():Ke(at)}function Je(){let at=d.support;return{passiveListener:!(d.touchEvents.start!=="touchstart"||!at.passiveListener||!d.params.passiveListeners)&&{passive:!0,capture:!1},activeListenerWithCapture:!at.passiveListener||{passive:!1,capture:!0}}}function it(){return`.${d.params.slideClass}`}function ze(at){let{passiveListener:Ct}=Je(),Tt=it();d.$wrapperEl[at]("gesturestart",Tt,de,Ct),d.$wrapperEl[at]("gesturechange",Tt,ke,Ct),d.$wrapperEl[at]("gestureend",Tt,me,Ct)}function $e(){P||(P=!0,ze("on"))}function Pe(){P&&(P=!1,ze("off"))}function tt(){let at=d.zoom;if(at.enabled)return;at.enabled=!0;let Ct=d.support,{passiveListener:Tt,activeListenerWithCapture:Bt}=Je(),Wt=it();Ct.gestures?(d.$wrapperEl.on(d.touchEvents.start,$e,Tt),d.$wrapperEl.on(d.touchEvents.end,Pe,Tt)):d.touchEvents.start==="touchstart"&&(d.$wrapperEl.on(d.touchEvents.start,Wt,de,Tt),d.$wrapperEl.on(d.touchEvents.move,Wt,ke,Bt),d.$wrapperEl.on(d.touchEvents.end,Wt,me,Tt),d.touchEvents.cancel&&d.$wrapperEl.on(d.touchEvents.cancel,Wt,me,Tt)),d.$wrapperEl.on(d.touchEvents.move,`.${d.params.zoom.containerClass}`,De,Bt)}function _t(){let at=d.zoom;if(!at.enabled)return;let Ct=d.support;at.enabled=!1;let{passiveListener:Tt,activeListenerWithCapture:Bt}=Je(),Wt=it();Ct.gestures?(d.$wrapperEl.off(d.touchEvents.start,$e,Tt),d.$wrapperEl.off(d.touchEvents.end,Pe,Tt)):d.touchEvents.start==="touchstart"&&(d.$wrapperEl.off(d.touchEvents.start,Wt,de,Tt),d.$wrapperEl.off(d.touchEvents.move,Wt,ke,Bt),d.$wrapperEl.off(d.touchEvents.end,Wt,me,Tt),d.touchEvents.cancel&&d.$wrapperEl.off(d.touchEvents.cancel,Wt,me,Tt)),d.$wrapperEl.off(d.touchEvents.move,`.${d.params.zoom.containerClass}`,De,Bt)}Object.defineProperty(d.zoom,"scale",{get:()=>se,set(at){if(se!==at){let Ct=q.$imageEl?q.$imageEl[0]:void 0,Tt=q.$slideEl?q.$slideEl[0]:void 0;I("zoomChange",at,Ct,Tt)}se=at}}),C("init",()=>{d.params.zoom.enabled&&tt()}),C("destroy",()=>{_t()}),C("touchStart",(at,Ct)=>{d.zoom.enabled&&function(Tt){let Bt=d.device;q.$imageEl&&q.$imageEl.length!==0&&(z.isTouched||(Bt.android&&Tt.cancelable&&Tt.preventDefault(),z.isTouched=!0,z.touchesStart.x=Tt.type==="touchstart"?Tt.targetTouches[0].pageX:Tt.pageX,z.touchesStart.y=Tt.type==="touchstart"?Tt.targetTouches[0].pageY:Tt.pageY))}(Ct)}),C("touchEnd",(at,Ct)=>{d.zoom.enabled&&function(){let Tt=d.zoom;if(!q.$imageEl||q.$imageEl.length===0)return;if(!z.isTouched||!z.isMoved)return z.isTouched=!1,void(z.isMoved=!1);z.isTouched=!1,z.isMoved=!1;let Bt=300,Wt=300,Ai=ee.x*Bt,Hi=z.currentX+Ai,Ds=ee.y*Wt,vi=z.currentY+Ds;ee.x!==0&&(Bt=Math.abs((Hi-z.currentX)/ee.x)),ee.y!==0&&(Wt=Math.abs((vi-z.currentY)/ee.y));let Ls=Math.max(Bt,Wt);z.currentX=Hi,z.currentY=vi;let Vi=z.width*Tt.scale,es=z.height*Tt.scale;z.minX=Math.min(q.slideWidth/2-Vi/2,0),z.maxX=-z.minX,z.minY=Math.min(q.slideHeight/2-es/2,0),z.maxY=-z.minY,z.currentX=Math.max(Math.min(z.currentX,z.maxX),z.minX),z.currentY=Math.max(Math.min(z.currentY,z.maxY),z.minY),q.$imageWrapEl.transition(Ls).transform(`translate3d(${z.currentX}px, ${z.currentY}px,0)`)}()}),C("doubleTap",(at,Ct)=>{!d.animating&&d.params.zoom.enabled&&d.zoom.enabled&&d.params.zoom.toggle&&qe(Ct)}),C("transitionEnd",()=>{d.zoom.enabled&&d.params.zoom.enabled&&Se()}),C("slideChange",()=>{d.zoom.enabled&&d.params.zoom.enabled&&d.params.cssMode&&Se()}),Object.assign(d.zoom,{enable:tt,disable:_t,in:Ke,out:nt,toggle:qe})},function({swiper:d,extendParams:x,on:C,emit:I}){x({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),d.lazy={};let M=!1,P=!1;function Y(J,q=!0){let z=d.params.lazy;if(J===void 0||d.slides.length===0)return;let ee=d.virtual&&d.params.virtual.enabled?d.$wrapperEl.children(`.${d.params.slideClass}[data-swiper-slide-index="${J}"]`):d.slides.eq(J),se=ee.find(`.${z.elementClass}:not(.${z.loadedClass}):not(.${z.loadingClass})`);!ee.hasClass(z.elementClass)||ee.hasClass(z.loadedClass)||ee.hasClass(z.loadingClass)||se.push(ee[0]),se.length!==0&&se.each(le=>{let de=u(le);de.addClass(z.loadingClass);let ke=de.attr("data-background"),me=de.attr("data-src"),De=de.attr("data-srcset"),Se=de.attr("data-sizes"),Ke=de.parent("picture");d.loadImage(de[0],me||ke,De,Se,!1,()=>{if(d!=null&&d&&(!d||d.params)&&!d.destroyed){if(ke?(de.css("background-image",`url("${ke}")`),de.removeAttr("data-background")):(De&&(de.attr("srcset",De),de.removeAttr("data-srcset")),Se&&(de.attr("sizes",Se),de.removeAttr("data-sizes")),Ke.length&&Ke.children("source").each(nt=>{let qe=u(nt);qe.attr("data-srcset")&&(qe.attr("srcset",qe.attr("data-srcset")),qe.removeAttr("data-srcset"))}),me&&(de.attr("src",me),de.removeAttr("data-src"))),de.addClass(z.loadedClass).removeClass(z.loadingClass),ee.find(`.${z.preloaderClass}`).remove(),d.params.loop&&q){let nt=ee.attr("data-swiper-slide-index");ee.hasClass(d.params.slideDuplicateClass)?Y(d.$wrapperEl.children(`[data-swiper-slide-index="${nt}"]:not(.${d.params.slideDuplicateClass})`).index(),!1):Y(d.$wrapperEl.children(`.${d.params.slideDuplicateClass}[data-swiper-slide-index="${nt}"]`).index(),!1)}I("lazyImageReady",ee[0],de[0]),d.params.autoHeight&&d.updateAutoHeight()}}),I("lazyImageLoad",ee[0],de[0])})}function j(){let{$wrapperEl:J,params:q,slides:z,activeIndex:ee}=d,se=d.virtual&&q.virtual.enabled,le=q.lazy,de=q.slidesPerView;function ke(De){if(se){if(J.children(`.${q.slideClass}[data-swiper-slide-index="${De}"]`).length)return!0}else if(z[De])return!0;return!1}function me(De){return se?u(De).attr("data-swiper-slide-index"):u(De).index()}if(de==="auto"&&(de=0),P||(P=!0),d.params.watchSlidesProgress)J.children(`.${q.slideVisibleClass}`).each(De=>{Y(se?u(De).attr("data-swiper-slide-index"):u(De).index())});else if(de>1)for(let De=ee;De<ee+de;De+=1)ke(De)&&Y(De);else Y(ee);if(le.loadPrevNext)if(de>1||le.loadPrevNextAmount&&le.loadPrevNextAmount>1){let De=le.loadPrevNextAmount,Se=de,Ke=Math.min(ee+Se+Math.max(De,Se),z.length),nt=Math.max(ee-Math.max(Se,De),0);for(let qe=ee+de;qe<Ke;qe+=1)ke(qe)&&Y(qe);for(let qe=nt;qe<ee;qe+=1)ke(qe)&&Y(qe)}else{let De=J.children(`.${q.slideNextClass}`);De.length>0&&Y(me(De));let Se=J.children(`.${q.slidePrevClass}`);Se.length>0&&Y(me(Se))}}function G(){let J=r();if(!d||d.destroyed)return;let q=d.params.lazy.scrollingElement?u(d.params.lazy.scrollingElement):u(J),z=q[0]===J,ee=z?J.innerWidth:q[0].offsetWidth,se=z?J.innerHeight:q[0].offsetHeight,le=d.$el.offset(),{rtlTranslate:de}=d,ke=!1;de&&(le.left-=d.$el[0].scrollLeft);let me=[[le.left,le.top],[le.left+d.width,le.top],[le.left,le.top+d.height],[le.left+d.width,le.top+d.height]];for(let Se=0;Se<me.length;Se+=1){let Ke=me[Se];if(Ke[0]>=0&&Ke[0]<=ee&&Ke[1]>=0&&Ke[1]<=se){if(Ke[0]===0&&Ke[1]===0)continue;ke=!0}}let De=!(d.touchEvents.start!=="touchstart"||!d.support.passiveListener||!d.params.passiveListeners)&&{passive:!0,capture:!1};ke?(j(),q.off("scroll",G,De)):M||(M=!0,q.on("scroll",G,De))}C("beforeInit",()=>{d.params.lazy.enabled&&d.params.preloadImages&&(d.params.preloadImages=!1)}),C("init",()=>{d.params.lazy.enabled&&(d.params.lazy.checkInView?G():j())}),C("scroll",()=>{d.params.freeMode&&d.params.freeMode.enabled&&!d.params.freeMode.sticky&&j()}),C("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{d.params.lazy.enabled&&(d.params.lazy.checkInView?G():j())}),C("transitionStart",()=>{d.params.lazy.enabled&&(d.params.lazy.loadOnTransitionStart||!d.params.lazy.loadOnTransitionStart&&!P)&&(d.params.lazy.checkInView?G():j())}),C("transitionEnd",()=>{d.params.lazy.enabled&&!d.params.lazy.loadOnTransitionStart&&(d.params.lazy.checkInView?G():j())}),C("slideChange",()=>{let{lazy:J,cssMode:q,watchSlidesProgress:z,touchReleaseOnEdges:ee,resistanceRatio:se}=d.params;J.enabled&&(q||z&&(ee||se===0))&&j()}),Object.assign(d.lazy,{load:j,loadInSlide:Y})},function({swiper:d,extendParams:x,on:C}){function I(P,Y){let j=function(){let q,z,ee;return(se,le)=>{for(z=-1,q=se.length;q-z>1;)ee=q+z>>1,se[ee]<=le?z=ee:q=ee;return q}}(),G,J;return this.x=P,this.y=Y,this.lastIndex=P.length-1,this.interpolate=function(q){return q?(J=j(this.x,q),G=J-1,(q-this.x[G])*(this.y[J]-this.y[G])/(this.x[J]-this.x[G])+this.y[G]):0},this}function M(){d.controller.control&&d.controller.spline&&(d.controller.spline=void 0,delete d.controller.spline)}x({controller:{control:void 0,inverse:!1,by:"slide"}}),d.controller={control:void 0},C("beforeInit",()=>{d.controller.control=d.params.controller.control}),C("update",()=>{M()}),C("resize",()=>{M()}),C("observerUpdate",()=>{M()}),C("setTranslate",(P,Y,j)=>{d.controller.control&&d.controller.setTranslate(Y,j)}),C("setTransition",(P,Y,j)=>{d.controller.control&&d.controller.setTransition(Y,j)}),Object.assign(d.controller,{setTranslate:function(P,Y){let j=d.controller.control,G,J,q=d.constructor;function z(ee){let se=d.rtlTranslate?-d.translate:d.translate;d.params.controller.by==="slide"&&(function(le){d.controller.spline||(d.controller.spline=d.params.loop?new I(d.slidesGrid,le.slidesGrid):new I(d.snapGrid,le.snapGrid))}(ee),J=-d.controller.spline.interpolate(-se)),J&&d.params.controller.by!=="container"||(G=(ee.maxTranslate()-ee.minTranslate())/(d.maxTranslate()-d.minTranslate()),J=(se-d.minTranslate())*G+ee.minTranslate()),d.params.controller.inverse&&(J=ee.maxTranslate()-J),ee.updateProgress(J),ee.setTranslate(J,d),ee.updateActiveIndex(),ee.updateSlidesClasses()}if(Array.isArray(j))for(let ee=0;ee<j.length;ee+=1)j[ee]!==Y&&j[ee]instanceof q&&z(j[ee]);else j instanceof q&&Y!==j&&z(j)},setTransition:function(P,Y){let j=d.constructor,G=d.controller.control,J;function q(z){z.setTransition(P,d),P!==0&&(z.transitionStart(),z.params.autoHeight&&h(()=>{z.updateAutoHeight()}),z.$wrapperEl.transitionEnd(()=>{G&&(z.params.loop&&d.params.controller.by==="slide"&&z.loopFix(),z.transitionEnd())}))}if(Array.isArray(G))for(J=0;J<G.length;J+=1)G[J]!==Y&&G[J]instanceof j&&q(G[J]);else G instanceof j&&Y!==G&&q(G)}})},function({swiper:d,extendParams:x,on:C}){x({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group"}});let I=null;function M(me){let De=I;De.length!==0&&(De.html(""),De.html(me))}function P(me){me.attr("tabIndex","0")}function Y(me){me.attr("tabIndex","-1")}function j(me,De){me.attr("role",De)}function G(me,De){me.attr("aria-roledescription",De)}function J(me,De){me.attr("aria-label",De)}function q(me){me.attr("aria-disabled",!0)}function z(me){me.attr("aria-disabled",!1)}function ee(me){if(me.keyCode!==13&&me.keyCode!==32)return;let De=d.params.a11y,Se=u(me.target);d.navigation&&d.navigation.$nextEl&&Se.is(d.navigation.$nextEl)&&(d.isEnd&&!d.params.loop||d.slideNext(),d.isEnd?M(De.lastSlideMessage):M(De.nextSlideMessage)),d.navigation&&d.navigation.$prevEl&&Se.is(d.navigation.$prevEl)&&(d.isBeginning&&!d.params.loop||d.slidePrev(),d.isBeginning?M(De.firstSlideMessage):M(De.prevSlideMessage)),d.pagination&&Se.is(At(d.params.pagination.bulletClass))&&Se[0].click()}function se(){if(d.params.loop||!d.navigation)return;let{$nextEl:me,$prevEl:De}=d.navigation;De&&De.length>0&&(d.isBeginning?(q(De),Y(De)):(z(De),P(De))),me&&me.length>0&&(d.isEnd?(q(me),Y(me)):(z(me),P(me)))}function le(){return d.pagination&&d.params.pagination.clickable&&d.pagination.bullets&&d.pagination.bullets.length}let de=(me,De,Se)=>{P(me),me[0].tagName!=="BUTTON"&&(j(me,"button"),me.on("keydown",ee)),J(me,Se),function(Ke,nt){Ke.attr("aria-controls",nt)}(me,De)};function ke(){let me=d.params.a11y;d.$el.append(I);let De=d.$el;me.containerRoleDescriptionMessage&&G(De,me.containerRoleDescriptionMessage),me.containerMessage&&J(De,me.containerMessage);let Se=d.$wrapperEl,Ke=Se.attr("id")||`swiper-wrapper-${function($e=16){return"x".repeat($e).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}(16)}`,nt=d.params.autoplay&&d.params.autoplay.enabled?"off":"polite";var qe;qe=Ke,Se.attr("id",qe),function($e,Pe){$e.attr("aria-live",Pe)}(Se,nt),me.itemRoleDescriptionMessage&&G(u(d.slides),me.itemRoleDescriptionMessage),j(u(d.slides),me.slideRole);let Je=d.params.loop?d.slides.filter($e=>!$e.classList.contains(d.params.slideDuplicateClass)).length:d.slides.length,it,ze;d.slides.each(($e,Pe)=>{let tt=u($e),_t=d.params.loop?parseInt(tt.attr("data-swiper-slide-index"),10):Pe;J(tt,me.slideLabelMessage.replace(/\{\{index\}\}/,_t+1).replace(/\{\{slidesLength\}\}/,Je))}),d.navigation&&d.navigation.$nextEl&&(it=d.navigation.$nextEl),d.navigation&&d.navigation.$prevEl&&(ze=d.navigation.$prevEl),it&&it.length&&de(it,Ke,me.nextSlideMessage),ze&&ze.length&&de(ze,Ke,me.prevSlideMessage),le()&&d.pagination.$el.on("keydown",At(d.params.pagination.bulletClass),ee)}C("beforeInit",()=>{I=u(`<span class="${d.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),C("afterInit",()=>{d.params.a11y.enabled&&(ke(),se())}),C("toEdge",()=>{d.params.a11y.enabled&&se()}),C("fromEdge",()=>{d.params.a11y.enabled&&se()}),C("paginationUpdate",()=>{d.params.a11y.enabled&&function(){let me=d.params.a11y;le()&&d.pagination.bullets.each(De=>{let Se=u(De);P(Se),d.params.pagination.renderBullet||(j(Se,"button"),J(Se,me.paginationBulletMessage.replace(/\{\{index\}\}/,Se.index()+1)))})}()}),C("destroy",()=>{d.params.a11y.enabled&&function(){let me,De;I&&I.length>0&&I.remove(),d.navigation&&d.navigation.$nextEl&&(me=d.navigation.$nextEl),d.navigation&&d.navigation.$prevEl&&(De=d.navigation.$prevEl),me&&me.off("keydown",ee),De&&De.off("keydown",ee),le()&&d.pagination.$el.off("keydown",At(d.params.pagination.bulletClass),ee)}()})},function({swiper:d,extendParams:x,on:C}){x({history:{enabled:!1,root:"",replaceState:!1,key:"slides"}});let I=!1,M={},P=q=>q.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),Y=q=>{let z=r(),ee;ee=q?new URL(q):z.location;let se=ee.pathname.slice(1).split("/").filter(de=>de!==""),le=se.length;return{key:se[le-2],value:se[le-1]}},j=(q,z)=>{let ee=r();if(!I||!d.params.history.enabled)return;let se;se=d.params.url?new URL(d.params.url):ee.location;let le=d.slides.eq(z),de=P(le.attr("data-history"));if(d.params.history.root.length>0){let me=d.params.history.root;me[me.length-1]==="/"&&(me=me.slice(0,me.length-1)),de=`${me}/${q}/${de}`}else se.pathname.includes(q)||(de=`${q}/${de}`);let ke=ee.history.state;ke&&ke.value===de||(d.params.history.replaceState?ee.history.replaceState({value:de},null,de):ee.history.pushState({value:de},null,de))},G=(q,z,ee)=>{if(z)for(let se=0,le=d.slides.length;se<le;se+=1){let de=d.slides.eq(se);if(P(de.attr("data-history"))===z&&!de.hasClass(d.params.slideDuplicateClass)){let ke=de.index();d.slideTo(ke,q,ee)}}else d.slideTo(0,q,ee)},J=()=>{M=Y(d.params.url),G(d.params.speed,d.paths.value,!1)};C("init",()=>{d.params.history.enabled&&(()=>{let q=r();if(d.params.history){if(!q.history||!q.history.pushState)return d.params.history.enabled=!1,void(d.params.hashNavigation.enabled=!0);I=!0,M=Y(d.params.url),(M.key||M.value)&&(G(0,M.value,d.params.runCallbacksOnInit),d.params.history.replaceState||q.addEventListener("popstate",J))}})()}),C("destroy",()=>{d.params.history.enabled&&(()=>{let q=r();d.params.history.replaceState||q.removeEventListener("popstate",J)})()}),C("transitionEnd _freeModeNoMomentumRelease",()=>{I&&j(d.params.history.key,d.activeIndex)}),C("slideChange",()=>{I&&d.params.cssMode&&j(d.params.history.key,d.activeIndex)})},function({swiper:d,extendParams:x,emit:C,on:I}){let M=!1,P=i(),Y=r();x({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}});let j=()=>{C("hashChange");let J=P.location.hash.replace("#","");if(J!==d.slides.eq(d.activeIndex).attr("data-hash")){let q=d.$wrapperEl.children(`.${d.params.slideClass}[data-hash="${J}"]`).index();if(q===void 0)return;d.slideTo(q)}},G=()=>{if(M&&d.params.hashNavigation.enabled)if(d.params.hashNavigation.replaceState&&Y.history&&Y.history.replaceState)Y.history.replaceState(null,null,`#${d.slides.eq(d.activeIndex).attr("data-hash")}`||""),C("hashSet");else{let J=d.slides.eq(d.activeIndex),q=J.attr("data-hash")||J.attr("data-history");P.location.hash=q||"",C("hashSet")}};I("init",()=>{d.params.hashNavigation.enabled&&(()=>{if(!d.params.hashNavigation.enabled||d.params.history&&d.params.history.enabled)return;M=!0;let J=P.location.hash.replace("#","");if(J)for(let z=0,ee=d.slides.length;z<ee;z+=1){let se=d.slides.eq(z);if((se.attr("data-hash")||se.attr("data-history"))===J&&!se.hasClass(d.params.slideDuplicateClass)){let le=se.index();d.slideTo(le,0,d.params.runCallbacksOnInit,!0)}}d.params.hashNavigation.watchState&&u(Y).on("hashchange",j)})()}),I("destroy",()=>{d.params.hashNavigation.enabled&&d.params.hashNavigation.watchState&&u(Y).off("hashchange",j)}),I("transitionEnd _freeModeNoMomentumRelease",()=>{M&&G()}),I("slideChange",()=>{M&&d.params.cssMode&&G()})},function({swiper:d,extendParams:x,on:C,emit:I}){let M;function P(){let se=d.slides.eq(d.activeIndex),le=d.params.autoplay.delay;se.attr("data-swiper-autoplay")&&(le=se.attr("data-swiper-autoplay")||d.params.autoplay.delay),clearTimeout(M),M=h(()=>{let de;d.params.autoplay.reverseDirection?d.params.loop?(d.loopFix(),de=d.slidePrev(d.params.speed,!0,!0),I("autoplay")):d.isBeginning?d.params.autoplay.stopOnLastSlide?j():(de=d.slideTo(d.slides.length-1,d.params.speed,!0,!0),I("autoplay")):(de=d.slidePrev(d.params.speed,!0,!0),I("autoplay")):d.params.loop?(d.loopFix(),de=d.slideNext(d.params.speed,!0,!0),I("autoplay")):d.isEnd?d.params.autoplay.stopOnLastSlide?j():(de=d.slideTo(0,d.params.speed,!0,!0),I("autoplay")):(de=d.slideNext(d.params.speed,!0,!0),I("autoplay")),(d.params.cssMode&&d.autoplay.running||de===!1)&&P()},le)}function Y(){return M===void 0&&!d.autoplay.running&&(d.autoplay.running=!0,I("autoplayStart"),P(),!0)}function j(){return!!d.autoplay.running&&M!==void 0&&(M&&(clearTimeout(M),M=void 0),d.autoplay.running=!1,I("autoplayStop"),!0)}function G(se){d.autoplay.running&&(d.autoplay.paused||(M&&clearTimeout(M),d.autoplay.paused=!0,se!==0&&d.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach(le=>{d.$wrapperEl[0].addEventListener(le,q)}):(d.autoplay.paused=!1,P())))}function J(){let se=i();se.visibilityState==="hidden"&&d.autoplay.running&&G(),se.visibilityState==="visible"&&d.autoplay.paused&&(P(),d.autoplay.paused=!1)}function q(se){d&&!d.destroyed&&d.$wrapperEl&&se.target===d.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(le=>{d.$wrapperEl[0].removeEventListener(le,q)}),d.autoplay.paused=!1,d.autoplay.running?P():j())}function z(){d.params.autoplay.disableOnInteraction?j():G(),["transitionend","webkitTransitionEnd"].forEach(se=>{d.$wrapperEl[0].removeEventListener(se,q)})}function ee(){d.params.autoplay.disableOnInteraction||(d.autoplay.paused=!1,P())}d.autoplay={running:!1,paused:!1},x({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),C("init",()=>{d.params.autoplay.enabled&&(Y(),i().addEventListener("visibilitychange",J),d.params.autoplay.pauseOnMouseEnter&&(d.$el.on("mouseenter",z),d.$el.on("mouseleave",ee)))}),C("beforeTransitionStart",(se,le,de)=>{d.autoplay.running&&(de||!d.params.autoplay.disableOnInteraction?d.autoplay.pause(le):j())}),C("sliderFirstMove",()=>{d.autoplay.running&&(d.params.autoplay.disableOnInteraction?j():G())}),C("touchEnd",()=>{d.params.cssMode&&d.autoplay.paused&&!d.params.autoplay.disableOnInteraction&&P()}),C("destroy",()=>{d.$el.off("mouseenter",z),d.$el.off("mouseleave",ee),d.autoplay.running&&j(),i().removeEventListener("visibilitychange",J)}),Object.assign(d.autoplay,{pause:G,run:P,start:Y,stop:j})},function({swiper:d,extendParams:x,on:C}){x({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let I=!1,M=!1;function P(){let G=d.thumbs.swiper;if(!G)return;let J=G.clickedIndex,q=G.clickedSlide;if(q&&u(q).hasClass(d.params.thumbs.slideThumbActiveClass)||J==null)return;let z;if(z=G.params.loop?parseInt(u(G.clickedSlide).attr("data-swiper-slide-index"),10):J,d.params.loop){let ee=d.activeIndex;d.slides.eq(ee).hasClass(d.params.slideDuplicateClass)&&(d.loopFix(),d._clientLeft=d.$wrapperEl[0].clientLeft,ee=d.activeIndex);let se=d.slides.eq(ee).prevAll(`[data-swiper-slide-index="${z}"]`).eq(0).index(),le=d.slides.eq(ee).nextAll(`[data-swiper-slide-index="${z}"]`).eq(0).index();z=se===void 0?le:le===void 0?se:le-ee<ee-se?le:se}d.slideTo(z)}function Y(){let{thumbs:G}=d.params;if(I)return!1;I=!0;let J=d.constructor;if(G.swiper instanceof J)d.thumbs.swiper=G.swiper,Object.assign(d.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(d.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1});else if(v(G.swiper)){let q=Object.assign({},G.swiper);Object.assign(q,{watchSlidesProgress:!0,slideToClickedSlide:!1}),d.thumbs.swiper=new J(q),M=!0}return d.thumbs.swiper.$el.addClass(d.params.thumbs.thumbsContainerClass),d.thumbs.swiper.on("tap",P),!0}function j(G){let J=d.thumbs.swiper;if(!J)return;let q=J.params.slidesPerView==="auto"?J.slidesPerViewDynamic():J.params.slidesPerView,z=d.params.thumbs.autoScrollOffset,ee=z&&!J.params.loop;if(d.realIndex!==J.realIndex||ee){let de,ke,me=J.activeIndex;if(J.params.loop){J.slides.eq(me).hasClass(J.params.slideDuplicateClass)&&(J.loopFix(),J._clientLeft=J.$wrapperEl[0].clientLeft,me=J.activeIndex);let De=J.slides.eq(me).prevAll(`[data-swiper-slide-index="${d.realIndex}"]`).eq(0).index(),Se=J.slides.eq(me).nextAll(`[data-swiper-slide-index="${d.realIndex}"]`).eq(0).index();de=De===void 0?Se:Se===void 0?De:Se-me==me-De?J.params.slidesPerGroup>1?Se:me:Se-me<me-De?Se:De,ke=d.activeIndex>d.previousIndex?"next":"prev"}else de=d.realIndex,ke=de>d.previousIndex?"next":"prev";ee&&(de+=ke==="next"?z:-1*z),J.visibleSlidesIndexes&&J.visibleSlidesIndexes.indexOf(de)<0&&(J.params.centeredSlides?de=de>me?de-Math.floor(q/2)+1:de+Math.floor(q/2)-1:de>me&&J.params.slidesPerGroup,J.slideTo(de,G?0:void 0))}let se=1,le=d.params.thumbs.slideThumbActiveClass;if(d.params.slidesPerView>1&&!d.params.centeredSlides&&(se=d.params.slidesPerView),d.params.thumbs.multipleActiveThumbs||(se=1),se=Math.floor(se),J.slides.removeClass(le),J.params.loop||J.params.virtual&&J.params.virtual.enabled)for(let de=0;de<se;de+=1)J.$wrapperEl.children(`[data-swiper-slide-index="${d.realIndex+de}"]`).addClass(le);else for(let de=0;de<se;de+=1)J.slides.eq(d.realIndex+de).addClass(le)}d.thumbs={swiper:null},C("beforeInit",()=>{let{thumbs:G}=d.params;G&&G.swiper&&(Y(),j(!0))}),C("slideChange update resize observerUpdate",()=>{d.thumbs.swiper&&j()}),C("setTransition",(G,J)=>{let q=d.thumbs.swiper;q&&q.setTransition(J)}),C("beforeDestroy",()=>{let G=d.thumbs.swiper;G&&M&&G&&G.destroy()}),Object.assign(d.thumbs,{init:Y,update:j})},function({swiper:d,extendParams:x,emit:C,once:I}){x({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(d,{freeMode:{onTouchMove:function(){let{touchEventsData:M,touches:P}=d;M.velocities.length===0&&M.velocities.push({position:P[d.isHorizontal()?"startX":"startY"],time:M.touchStartTime}),M.velocities.push({position:P[d.isHorizontal()?"currentX":"currentY"],time:g()})},onTouchEnd:function({currentPos:M}){let{params:P,$wrapperEl:Y,rtlTranslate:j,snapGrid:G,touchEventsData:J}=d,q=g()-J.touchStartTime;if(M<-d.minTranslate())d.slideTo(d.activeIndex);else if(M>-d.maxTranslate())d.slides.length<G.length?d.slideTo(G.length-1):d.slideTo(d.slides.length-1);else{if(P.freeMode.momentum){if(J.velocities.length>1){let De=J.velocities.pop(),Se=J.velocities.pop(),Ke=De.position-Se.position,nt=De.time-Se.time;d.velocity=Ke/nt,d.velocity/=2,Math.abs(d.velocity)<P.freeMode.minimumVelocity&&(d.velocity=0),(nt>150||g()-De.time>300)&&(d.velocity=0)}else d.velocity=0;d.velocity*=P.freeMode.momentumVelocityRatio,J.velocities.length=0;let z=1e3*P.freeMode.momentumRatio,ee=d.velocity*z,se=d.translate+ee;j&&(se=-se);let le,de=!1,ke=20*Math.abs(d.velocity)*P.freeMode.momentumBounceRatio,me;if(se<d.maxTranslate())P.freeMode.momentumBounce?(se+d.maxTranslate()<-ke&&(se=d.maxTranslate()-ke),le=d.maxTranslate(),de=!0,J.allowMomentumBounce=!0):se=d.maxTranslate(),P.loop&&P.centeredSlides&&(me=!0);else if(se>d.minTranslate())P.freeMode.momentumBounce?(se-d.minTranslate()>ke&&(se=d.minTranslate()+ke),le=d.minTranslate(),de=!0,J.allowMomentumBounce=!0):se=d.minTranslate(),P.loop&&P.centeredSlides&&(me=!0);else if(P.freeMode.sticky){let De;for(let Se=0;Se<G.length;Se+=1)if(G[Se]>-se){De=Se;break}se=Math.abs(G[De]-se)<Math.abs(G[De-1]-se)||d.swipeDirection==="next"?G[De]:G[De-1],se=-se}if(me&&I("transitionEnd",()=>{d.loopFix()}),d.velocity!==0){if(z=Math.abs(j?(-se-d.translate)/d.velocity:(se-d.translate)/d.velocity),P.freeMode.sticky){let De=Math.abs((j?-se:se)-d.translate),Se=d.slidesSizesGrid[d.activeIndex];z=De<Se?P.speed:De<2*Se?1.5*P.speed:2.5*P.speed}}else if(P.freeMode.sticky)return void d.slideToClosest();P.freeMode.momentumBounce&&de?(d.updateProgress(le),d.setTransition(z),d.setTranslate(se),d.transitionStart(!0,d.swipeDirection),d.animating=!0,Y.transitionEnd(()=>{d&&!d.destroyed&&J.allowMomentumBounce&&(C("momentumBounce"),d.setTransition(P.speed),setTimeout(()=>{d.setTranslate(le),Y.transitionEnd(()=>{d&&!d.destroyed&&d.transitionEnd()})},0))})):d.velocity?(C("_freeModeNoMomentumRelease"),d.updateProgress(se),d.setTransition(z),d.setTranslate(se),d.transitionStart(!0,d.swipeDirection),d.animating||(d.animating=!0,Y.transitionEnd(()=>{d&&!d.destroyed&&d.transitionEnd()}))):d.updateProgress(se),d.updateActiveIndex(),d.updateSlidesClasses()}else{if(P.freeMode.sticky)return void d.slideToClosest();P.freeMode&&C("_freeModeNoMomentumRelease")}(!P.freeMode.momentum||q>=P.longSwipesMs)&&(d.updateProgress(),d.updateActiveIndex(),d.updateSlidesClasses())}}}})},function({swiper:d,extendParams:x}){let C,I,M;x({grid:{rows:1,fill:"column"}}),d.grid={initSlides:P=>{let{slidesPerView:Y}=d.params,{rows:j,fill:G}=d.params.grid;I=C/j,M=Math.floor(P/j),C=Math.floor(P/j)===P/j?P:Math.ceil(P/j)*j,Y!=="auto"&&G==="row"&&(C=Math.max(C,Y*j))},updateSlide:(P,Y,j,G)=>{let{slidesPerGroup:J,spaceBetween:q}=d.params,{rows:z,fill:ee}=d.params.grid,se,le,de;if(ee==="row"&&J>1){let ke=Math.floor(P/(J*z)),me=P-z*J*ke,De=ke===0?J:Math.min(Math.ceil((j-ke*z*J)/z),J);de=Math.floor(me/De),le=me-de*De+ke*J,se=le+de*C/z,Y.css({"-webkit-order":se,order:se})}else ee==="column"?(le=Math.floor(P/z),de=P-le*z,(le>M||le===M&&de===z-1)&&(de+=1,de>=z&&(de=0,le+=1))):(de=Math.floor(P/I),le=P-de*I);Y.css(G("margin-top"),de!==0?q&&`${q}px`:"")},updateWrapperSize:(P,Y,j)=>{let{spaceBetween:G,centeredSlides:J,roundLengths:q}=d.params,{rows:z}=d.params.grid;if(d.virtualSize=(P+G)*C,d.virtualSize=Math.ceil(d.virtualSize/z)-G,d.$wrapperEl.css({[j("width")]:`${d.virtualSize+G}px`}),J){Y.splice(0,Y.length);let ee=[];for(let se=0;se<Y.length;se+=1){let le=Y[se];q&&(le=Math.floor(le)),Y[se]<d.virtualSize+Y[0]&&ee.push(le)}Y.push(...ee)}}}},function({swiper:d}){Object.assign(d,{appendSlide:ni.bind(d),prependSlide:Xt.bind(d),addSlide:Fe.bind(d),removeSlide:ki.bind(d),removeAllSlides:_i.bind(d)})},function({swiper:d,extendParams:x,on:C}){x({fadeEffect:{crossFade:!1,transformEl:null}}),Ri({effect:"fade",swiper:d,on:C,setTranslate:()=>{let{slides:I}=d,M=d.params.fadeEffect;for(let P=0;P<I.length;P+=1){let Y=d.slides.eq(P),j=-Y[0].swiperSlideOffset;d.params.virtualTranslate||(j-=d.translate);let G=0;d.isHorizontal()||(G=j,j=0);let J=d.params.fadeEffect.crossFade?Math.max(1-Math.abs(Y[0].progress),0):1+Math.min(Math.max(Y[0].progress,-1),0);pi(M,Y).css({opacity:J}).transform(`translate3d(${j}px, ${G}px, 0px)`)}},setTransition:I=>{let{transformEl:M}=d.params.fadeEffect;(M?d.slides.find(M):d.slides).transition(I),Ui({swiper:d,duration:I,transformEl:M,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!d.params.cssMode})})},function({swiper:d,extendParams:x,on:C}){x({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}}),Ri({effect:"cube",swiper:d,on:C,setTranslate:()=>{let{$el:I,$wrapperEl:M,slides:P,width:Y,height:j,rtlTranslate:G,size:J,browser:q}=d,z=d.params.cubeEffect,ee=d.isHorizontal(),se=d.virtual&&d.params.virtual.enabled,le,de=0;z.shadow&&(ee?(le=M.find(".swiper-cube-shadow"),le.length===0&&(le=u('<div class="swiper-cube-shadow"></div>'),M.append(le)),le.css({height:`${Y}px`})):(le=I.find(".swiper-cube-shadow"),le.length===0&&(le=u('<div class="swiper-cube-shadow"></div>'),I.append(le))));for(let me=0;me<P.length;me+=1){let De=P.eq(me),Se=me;se&&(Se=parseInt(De.attr("data-swiper-slide-index"),10));let Ke=90*Se,nt=Math.floor(Ke/360);G&&(Ke=-Ke,nt=Math.floor(-Ke/360));let qe=Math.max(Math.min(De[0].progress,1),-1),Je=0,it=0,ze=0;Se%4==0?(Je=4*-nt*J,ze=0):(Se-1)%4==0?(Je=0,ze=4*-nt*J):(Se-2)%4==0?(Je=J+4*nt*J,ze=J):(Se-3)%4==0&&(Je=-J,ze=3*J+4*J*nt),G&&(Je=-Je),ee||(it=Je,Je=0);let $e=`rotateX(${ee?0:-Ke}deg) rotateY(${ee?Ke:0}deg) translate3d(${Je}px, ${it}px, ${ze}px)`;if(qe<=1&&qe>-1&&(de=90*Se+90*qe,G&&(de=90*-Se-90*qe)),De.transform($e),z.slideShadows){let Pe=ee?De.find(".swiper-slide-shadow-left"):De.find(".swiper-slide-shadow-top"),tt=ee?De.find(".swiper-slide-shadow-right"):De.find(".swiper-slide-shadow-bottom");Pe.length===0&&(Pe=u(`<div class="swiper-slide-shadow-${ee?"left":"top"}"></div>`),De.append(Pe)),tt.length===0&&(tt=u(`<div class="swiper-slide-shadow-${ee?"right":"bottom"}"></div>`),De.append(tt)),Pe.length&&(Pe[0].style.opacity=Math.max(-qe,0)),tt.length&&(tt[0].style.opacity=Math.max(qe,0))}}if(M.css({"-webkit-transform-origin":`50% 50% -${J/2}px`,"transform-origin":`50% 50% -${J/2}px`}),z.shadow)if(ee)le.transform(`translate3d(0px, ${Y/2+z.shadowOffset}px, ${-Y/2}px) rotateX(90deg) rotateZ(0deg) scale(${z.shadowScale})`);else{let me=Math.abs(de)-90*Math.floor(Math.abs(de)/90),De=1.5-(Math.sin(2*me*Math.PI/360)/2+Math.cos(2*me*Math.PI/360)/2),Se=z.shadowScale,Ke=z.shadowScale/De,nt=z.shadowOffset;le.transform(`scale3d(${Se}, 1, ${Ke}) translate3d(0px, ${j/2+nt}px, ${-j/2/Ke}px) rotateX(-90deg)`)}let ke=q.isSafari||q.isWebView?-J/2:0;M.transform(`translate3d(0px,0,${ke}px) rotateX(${d.isHorizontal()?0:de}deg) rotateY(${d.isHorizontal()?-de:0}deg)`)},setTransition:I=>{let{$el:M,slides:P}=d;P.transition(I).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(I),d.params.cubeEffect.shadow&&!d.isHorizontal()&&M.find(".swiper-cube-shadow").transition(I)},perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function({swiper:d,extendParams:x,on:C}){x({flipEffect:{slideShadows:!0,limitRotation:!0,transformEl:null}}),Ri({effect:"flip",swiper:d,on:C,setTranslate:()=>{let{slides:I,rtlTranslate:M}=d,P=d.params.flipEffect;for(let Y=0;Y<I.length;Y+=1){let j=I.eq(Y),G=j[0].progress;d.params.flipEffect.limitRotation&&(G=Math.max(Math.min(j[0].progress,1),-1));let J=j[0].swiperSlideOffset,q=-180*G,z=0,ee=d.params.cssMode?-J-d.translate:-J,se=0;if(d.isHorizontal()?M&&(q=-q):(se=ee,ee=0,z=-q,q=0),j[0].style.zIndex=-Math.abs(Math.round(G))+I.length,P.slideShadows){let de=d.isHorizontal()?j.find(".swiper-slide-shadow-left"):j.find(".swiper-slide-shadow-top"),ke=d.isHorizontal()?j.find(".swiper-slide-shadow-right"):j.find(".swiper-slide-shadow-bottom");de.length===0&&(de=fs(P,j,d.isHorizontal()?"left":"top")),ke.length===0&&(ke=fs(P,j,d.isHorizontal()?"right":"bottom")),de.length&&(de[0].style.opacity=Math.max(-G,0)),ke.length&&(ke[0].style.opacity=Math.max(G,0))}let le=`translate3d(${ee}px, ${se}px, 0px) rotateX(${z}deg) rotateY(${q}deg)`;pi(P,j).transform(le)}},setTransition:I=>{let{transformEl:M}=d.params.flipEffect;(M?d.slides.find(M):d.slides).transition(I).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(I),Ui({swiper:d,duration:I,transformEl:M})},perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!d.params.cssMode})})},function({swiper:d,extendParams:x,on:C}){x({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0,transformEl:null}}),Ri({effect:"coverflow",swiper:d,on:C,setTranslate:()=>{let{width:I,height:M,slides:P,slidesSizesGrid:Y}=d,j=d.params.coverflowEffect,G=d.isHorizontal(),J=d.translate,q=G?I/2-J:M/2-J,z=G?j.rotate:-j.rotate,ee=j.depth;for(let se=0,le=P.length;se<le;se+=1){let de=P.eq(se),ke=Y[se],me=(q-de[0].swiperSlideOffset-ke/2)/ke*j.modifier,De=G?z*me:0,Se=G?0:z*me,Ke=-ee*Math.abs(me),nt=j.stretch;typeof nt=="string"&&nt.indexOf("%")!==-1&&(nt=parseFloat(j.stretch)/100*ke);let qe=G?0:nt*me,Je=G?nt*me:0,it=1-(1-j.scale)*Math.abs(me);Math.abs(Je)<.001&&(Je=0),Math.abs(qe)<.001&&(qe=0),Math.abs(Ke)<.001&&(Ke=0),Math.abs(De)<.001&&(De=0),Math.abs(Se)<.001&&(Se=0),Math.abs(it)<.001&&(it=0);let ze=`translate3d(${Je}px,${qe}px,${Ke}px)  rotateX(${Se}deg) rotateY(${De}deg) scale(${it})`;if(pi(j,de).transform(ze),de[0].style.zIndex=1-Math.abs(Math.round(me)),j.slideShadows){let $e=G?de.find(".swiper-slide-shadow-left"):de.find(".swiper-slide-shadow-top"),Pe=G?de.find(".swiper-slide-shadow-right"):de.find(".swiper-slide-shadow-bottom");$e.length===0&&($e=fs(j,de,G?"left":"top")),Pe.length===0&&(Pe=fs(j,de,G?"right":"bottom")),$e.length&&($e[0].style.opacity=me>0?me:0),Pe.length&&(Pe[0].style.opacity=-me>0?-me:0)}}},setTransition:I=>{let{transformEl:M}=d.params.coverflowEffect;(M?d.slides.find(M):d.slides).transition(I).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(I)},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function({swiper:d,extendParams:x,on:C}){x({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});let I=M=>typeof M=="string"?M:`${M}px`;Ri({effect:"creative",swiper:d,on:C,setTranslate:()=>{let{slides:M,$wrapperEl:P,slidesSizesGrid:Y}=d,j=d.params.creativeEffect,{progressMultiplier:G}=j,J=d.params.centeredSlides;if(J){let q=Y[0]/2-d.params.slidesOffsetBefore||0;P.transform(`translateX(calc(50% - ${q}px))`)}for(let q=0;q<M.length;q+=1){let z=M.eq(q),ee=z[0].progress,se=Math.min(Math.max(z[0].progress,-j.limitProgress),j.limitProgress),le=se;J||(le=Math.min(Math.max(z[0].originalProgress,-j.limitProgress),j.limitProgress));let de=z[0].swiperSlideOffset,ke=[d.params.cssMode?-de-d.translate:-de,0,0],me=[0,0,0],De=!1;d.isHorizontal()||(ke[1]=ke[0],ke[0]=0);let Se={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};se<0?(Se=j.next,De=!0):se>0&&(Se=j.prev,De=!0),ke.forEach(($e,Pe)=>{ke[Pe]=`calc(${$e}px + (${I(Se.translate[Pe])} * ${Math.abs(se*G)}))`}),me.forEach(($e,Pe)=>{me[Pe]=Se.rotate[Pe]*Math.abs(se*G)}),z[0].style.zIndex=-Math.abs(Math.round(ee))+M.length;let Ke=ke.join(", "),nt=`rotateX(${me[0]}deg) rotateY(${me[1]}deg) rotateZ(${me[2]}deg)`,qe=le<0?`scale(${1+(1-Se.scale)*le*G})`:`scale(${1-(1-Se.scale)*le*G})`,Je=le<0?1+(1-Se.opacity)*le*G:1-(1-Se.opacity)*le*G,it=`translate3d(${Ke}) ${nt} ${qe}`;if(De&&Se.shadow||!De){let $e=z.children(".swiper-slide-shadow");if($e.length===0&&Se.shadow&&($e=fs(j,z)),$e.length){let Pe=j.shadowPerProgress?se*(1/j.limitProgress):se;$e[0].style.opacity=Math.min(Math.max(Math.abs(Pe),0),1)}}let ze=pi(j,z);ze.transform(it).css({opacity:Je}),Se.origin&&ze.css("transform-origin",Se.origin)}},setTransition:M=>{let{transformEl:P}=d.params.creativeEffect;(P?d.slides.find(P):d.slides).transition(M).find(".swiper-slide-shadow").transition(M),Ui({swiper:d,duration:M,transformEl:P,allSlides:!0})},perspective:()=>d.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!d.params.cssMode})})},function({swiper:d,extendParams:x,on:C}){x({cardsEffect:{slideShadows:!0,transformEl:null}}),Ri({effect:"cards",swiper:d,on:C,setTranslate:()=>{let{slides:I,activeIndex:M}=d,P=d.params.cardsEffect,{startTranslate:Y,isTouched:j}=d.touchEventsData,G=d.translate;for(let J=0;J<I.length;J+=1){let q=I.eq(J),z=q[0].progress,ee=Math.min(Math.max(z,-4),4),se=q[0].swiperSlideOffset;d.params.centeredSlides&&!d.params.cssMode&&d.$wrapperEl.transform(`translateX(${d.minTranslate()}px)`),d.params.centeredSlides&&d.params.cssMode&&(se-=I[0].swiperSlideOffset);let le=d.params.cssMode?-se-d.translate:-se,de=0,ke=-100*Math.abs(ee),me=1,De=-2*ee,Se=8-.75*Math.abs(ee),Ke=(J===M||J===M-1)&&ee>0&&ee<1&&(j||d.params.cssMode)&&G<Y,nt=(J===M||J===M+1)&&ee<0&&ee>-1&&(j||d.params.cssMode)&&G>Y;if(Ke||nt){let Je=(1-Math.abs((Math.abs(ee)-.5)/.5))**.5;De+=-28*ee*Je,me+=-.5*Je,Se+=96*Je,de=-25*Je*Math.abs(ee)+"%"}if(le=ee<0?`calc(${le}px + (${Se*Math.abs(ee)}%))`:ee>0?`calc(${le}px + (-${Se*Math.abs(ee)}%))`:`${le}px`,!d.isHorizontal()){let Je=de;de=le,le=Je}let qe=`
        translate3d(${le}, ${de}, ${ke}px)
        rotateZ(${De}deg)
        scale(${ee<0?""+(1+(1-me)*ee):""+(1-(1-me)*ee)})
      `;if(P.slideShadows){let Je=q.find(".swiper-slide-shadow");Je.length===0&&(Je=fs(P,q)),Je.length&&(Je[0].style.opacity=Math.min(Math.max((Math.abs(ee)-.5)/.5,0),1))}q[0].style.zIndex=-Math.abs(Math.round(z))+I.length,pi(P,q).transform(qe)}},setTransition:I=>{let{transformEl:M}=d.params.cardsEffect;(M?d.slides.find(M):d.slides).transition(I).find(".swiper-slide-shadow").transition(I),Ui({swiper:d,duration:I,transformEl:M})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!d.params.cssMode})})}];return wt.use(Lt),wt})});var JT=gi(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});function Sn(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function Ao(s){var e=Sn(s).Element;return s instanceof e||s instanceof Element}function Hn(s){var e=Sn(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function bg(s){if(typeof ShadowRoot>"u")return!1;var e=Sn(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}var xo=Math.max,qd=Math.min,Tl=Math.round;function Tg(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function FT(){return!/^((?!chrome|android).)*safari/i.test(Tg())}function _l(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=s.getBoundingClientRect(),n=1,r=1;e&&Hn(s)&&(n=s.offsetWidth>0&&Tl(i.width)/s.offsetWidth||1,r=s.offsetHeight>0&&Tl(i.height)/s.offsetHeight||1);var a=Ao(s)?Sn(s):window,o=a.visualViewport,l=!FT()&&t,u=(i.left+(l&&o?o.offsetLeft:0))/n,c=(i.top+(l&&o?o.offsetTop:0))/r,h=i.width/n,g=i.height/r;return{width:h,height:g,top:c,right:u+h,bottom:c+g,left:u,x:u,y:c}}function Eg(s){var e=Sn(s),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function bw(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function Ew(s){return s===Sn(s)||!Hn(s)?Eg(s):bw(s)}function Cr(s){return s?(s.nodeName||"").toLowerCase():null}function Pa(s){return((Ao(s)?s.ownerDocument:s.document)||window.document).documentElement}function Sg(s){return _l(Pa(s)).left+Eg(s).scrollLeft}function ia(s){return Sn(s).getComputedStyle(s)}function xg(s){var e=ia(s),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function Sw(s){var e=s.getBoundingClientRect(),t=Tl(e.width)/s.offsetWidth||1,i=Tl(e.height)/s.offsetHeight||1;return t!==1||i!==1}function xw(s,e,t){t===void 0&&(t=!1);var i=Hn(e),n=Hn(e)&&Sw(e),r=Pa(e),a=_l(s,n,t),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Cr(e)!=="body"||xg(r))&&(o=Ew(e)),Hn(e)?(l=_l(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Sg(r))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Ag(s){var e=_l(s),t=s.offsetWidth,i=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:i}}function zd(s){return Cr(s)==="html"?s:s.assignedSlot||s.parentNode||(bg(s)?s.host:null)||Pa(s)}function $T(s){return["html","body","#document"].indexOf(Cr(s))>=0?s.ownerDocument.body:Hn(s)&&xg(s)?s:$T(zd(s))}function Yu(s,e){var t;e===void 0&&(e=[]);var i=$T(s),n=i===((t=s.ownerDocument)==null?void 0:t.body),r=Sn(i),a=n?[r].concat(r.visualViewport||[],xg(i)?i:[]):i,o=e.concat(a);return n?o:o.concat(Yu(zd(a)))}function Aw(s){return["table","td","th"].indexOf(Cr(s))>=0}function IT(s){return!Hn(s)||ia(s).position==="fixed"?null:s.offsetParent}function Cw(s){var e=/firefox/i.test(Tg()),t=/Trident/i.test(Tg());if(t&&Hn(s)){var i=ia(s);if(i.position==="fixed")return null}var n=zd(s);for(bg(n)&&(n=n.host);Hn(n)&&["html","body"].indexOf(Cr(n))<0;){var r=ia(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function Ju(s){for(var e=Sn(s),t=IT(s);t&&Aw(t)&&ia(t).position==="static";)t=IT(t);return t&&(Cr(t)==="html"||Cr(t)==="body"&&ia(t).position==="static")?e:t||Cw(s)||e}var nn="top",Vn="bottom",jn="right",rn="left",Cg="auto",Zu=[nn,Vn,jn,rn],bl="start",Qu="end",ww="clippingParents",BT="viewport",Ku="popper",Iw="reference",DT=Zu.reduce(function(s,e){return s.concat([e+"-"+bl,e+"-"+Qu])},[]),UT=[].concat(Zu,[Cg]).reduce(function(s,e){return s.concat([e,e+"-"+bl,e+"-"+Qu])},[]),Dw="beforeRead",Lw="read",kw="afterRead",Rw="beforeMain",Pw="main",Ow="afterMain",Mw="beforeWrite",Nw="write",Fw="afterWrite",$w=[Dw,Lw,kw,Rw,Pw,Ow,Mw,Nw,Fw];function Bw(s){var e=new Map,t=new Set,i=[];s.forEach(function(r){e.set(r.name,r)});function n(r){t.add(r.name);var a=[].concat(r.requires||[],r.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&n(l)}}),i.push(r)}return s.forEach(function(r){t.has(r.name)||n(r)}),i}function Uw(s){var e=Bw(s);return $w.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function Hw(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function Vw(s){var e=s.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}function jw(s,e){var t=Sn(s),i=Pa(s),n=t.visualViewport,r=i.clientWidth,a=i.clientHeight,o=0,l=0;if(n){r=n.width,a=n.height;var u=FT();(u||!u&&e==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}return{width:r,height:a,x:o+Sg(s),y:l}}function Gw(s){var e,t=Pa(s),i=Eg(s),n=(e=s.ownerDocument)==null?void 0:e.body,r=xo(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=xo(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-i.scrollLeft+Sg(s),l=-i.scrollTop;return ia(n||t).direction==="rtl"&&(o+=xo(t.clientWidth,n?n.clientWidth:0)-r),{width:r,height:a,x:o,y:l}}function HT(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&bg(t)){var i=e;do{if(i&&s.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function _g(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function qw(s,e){var t=_l(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function LT(s,e,t){return e===BT?_g(jw(s,t)):Ao(e)?qw(e,t):_g(Gw(Pa(s)))}function zw(s){var e=Yu(zd(s)),t=["absolute","fixed"].indexOf(ia(s).position)>=0,i=t&&Hn(s)?Ju(s):s;return Ao(i)?e.filter(function(n){return Ao(n)&&HT(n,i)&&Cr(n)!=="body"}):[]}function Ww(s,e,t,i){var n=e==="clippingParents"?zw(s):[].concat(e),r=[].concat(n,[t]),a=r[0],o=r.reduce(function(l,u){var c=LT(s,u,i);return l.top=xo(c.top,l.top),l.right=qd(c.right,l.right),l.bottom=qd(c.bottom,l.bottom),l.left=xo(c.left,l.left),l},LT(s,a,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ar(s){return s.split("-")[0]}function El(s){return s.split("-")[1]}function wg(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function VT(s){var e=s.reference,t=s.element,i=s.placement,n=i?Ar(i):null,r=i?El(i):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(n){case nn:l={x:a,y:e.y-t.height};break;case Vn:l={x:a,y:e.y+e.height};break;case jn:l={x:e.x+e.width,y:o};break;case rn:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var u=n?wg(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case bl:l[u]=l[u]-(e[c]/2-t[c]/2);break;case Qu:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function jT(){return{top:0,right:0,bottom:0,left:0}}function GT(s){return Object.assign({},jT(),s)}function qT(s,e){return e.reduce(function(t,i){return t[i]=s,t},{})}function Sl(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?s.placement:i,r=t.strategy,a=r===void 0?s.strategy:r,o=t.boundary,l=o===void 0?ww:o,u=t.rootBoundary,c=u===void 0?BT:u,h=t.elementContext,g=h===void 0?Ku:h,m=t.altBoundary,v=m===void 0?!1:m,b=t.padding,A=b===void 0?0:b,R=GT(typeof A!="number"?A:qT(A,Zu)),F=g===Ku?Iw:Ku,O=s.rects.popper,H=s.elements[v?F:g],W=Ww(Ao(H)?H:H.contextElement||Pa(s.elements.popper),l,c,a),E=_l(s.elements.reference),X=VT({reference:E,element:O,strategy:"absolute",placement:n}),Z=_g(Object.assign({},O,X)),re=g===Ku?Z:E,oe={top:W.top-re.top+R.top,bottom:re.bottom-W.bottom+R.bottom,left:W.left-re.left+R.left,right:re.right-W.right+R.right},ve=s.modifiersData.offset;if(g===Ku&&ve){var Ce=ve[n];Object.keys(oe).forEach(function(we){var Ge=[jn,Vn].indexOf(we)>=0?1:-1,Xe=[nn,Vn].indexOf(we)>=0?"y":"x";oe[we]+=Ce[Xe]*Ge})}return oe}var kT={placement:"bottom",modifiers:[],strategy:"absolute"};function RT(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ig(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,r=n===void 0?kT:n;return function(o,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},kT,r),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},h=[],g=!1,m={state:c,setOptions:function(R){var F=typeof R=="function"?R(c.options):R;b(),c.options=Object.assign({},r,c.options,F),c.scrollParents={reference:Ao(o)?Yu(o):o.contextElement?Yu(o.contextElement):[],popper:Yu(l)};var O=Uw(Vw([].concat(i,c.options.modifiers)));return c.orderedModifiers=O.filter(function(H){return H.enabled}),v(),m.update()},forceUpdate:function(){if(!g){var R=c.elements,F=R.reference,O=R.popper;if(!!RT(F,O)){c.rects={reference:xw(F,Ju(O),c.options.strategy==="fixed"),popper:Ag(O)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(oe){return c.modifiersData[oe.name]=Object.assign({},oe.data)});for(var H=0;H<c.orderedModifiers.length;H++){if(c.reset===!0){c.reset=!1,H=-1;continue}var W=c.orderedModifiers[H],E=W.fn,X=W.options,Z=X===void 0?{}:X,re=W.name;typeof E=="function"&&(c=E({state:c,options:Z,name:re,instance:m})||c)}}}},update:Hw(function(){return new Promise(function(A){m.forceUpdate(),A(c)})}),destroy:function(){b(),g=!0}};if(!RT(o,l))return m;m.setOptions(u).then(function(A){!g&&u.onFirstUpdate&&u.onFirstUpdate(A)});function v(){c.orderedModifiers.forEach(function(A){var R=A.name,F=A.options,O=F===void 0?{}:F,H=A.effect;if(typeof H=="function"){var W=H({state:c,name:R,instance:m,options:O}),E=function(){};h.push(W||E)}})}function b(){h.forEach(function(A){return A()}),h=[]}return m}}var jd={passive:!0};function Kw(s){var e=s.state,t=s.instance,i=s.options,n=i.scroll,r=n===void 0?!0:n,a=i.resize,o=a===void 0?!0:a,l=Sn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",t.update,jd)}),o&&l.addEventListener("resize",t.update,jd),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",t.update,jd)}),o&&l.removeEventListener("resize",t.update,jd)}}var Dg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kw,data:{}};function Yw(s){var e=s.state,t=s.name;e.modifiersData[t]=VT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Lg={name:"popperOffsets",enabled:!0,phase:"read",fn:Yw,data:{}},Xw={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qw(s,e){var t=s.x,i=s.y,n=e.devicePixelRatio||1;return{x:Tl(t*n)/n||0,y:Tl(i*n)/n||0}}function PT(s){var e,t=s.popper,i=s.popperRect,n=s.placement,r=s.variation,a=s.offsets,o=s.position,l=s.gpuAcceleration,u=s.adaptive,c=s.roundOffsets,h=s.isFixed,g=a.x,m=g===void 0?0:g,v=a.y,b=v===void 0?0:v,A=typeof c=="function"?c({x:m,y:b}):{x:m,y:b};m=A.x,b=A.y;var R=a.hasOwnProperty("x"),F=a.hasOwnProperty("y"),O=rn,H=nn,W=window;if(u){var E=Ju(t),X="clientHeight",Z="clientWidth";if(E===Sn(t)&&(E=Pa(t),ia(E).position!=="static"&&o==="absolute"&&(X="scrollHeight",Z="scrollWidth")),E=E,n===nn||(n===rn||n===jn)&&r===Qu){H=Vn;var re=h&&E===W&&W.visualViewport?W.visualViewport.height:E[X];b-=re-i.height,b*=l?1:-1}if(n===rn||(n===nn||n===Vn)&&r===Qu){O=jn;var oe=h&&E===W&&W.visualViewport?W.visualViewport.width:E[Z];m-=oe-i.width,m*=l?1:-1}}var ve=Object.assign({position:o},u&&Xw),Ce=c===!0?Qw({x:m,y:b},Sn(t)):{x:m,y:b};if(m=Ce.x,b=Ce.y,l){var we;return Object.assign({},ve,(we={},we[H]=F?"0":"",we[O]=R?"0":"",we.transform=(W.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",we))}return Object.assign({},ve,(e={},e[H]=F?b+"px":"",e[O]=R?m+"px":"",e.transform="",e))}function Jw(s){var e=s.state,t=s.options,i=t.gpuAcceleration,n=i===void 0?!0:i,r=t.adaptive,a=r===void 0?!0:r,o=t.roundOffsets,l=o===void 0?!0:o,u={placement:Ar(e.placement),variation:El(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,PT(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,PT(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var kg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Jw,data:{}};function Zw(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];!Hn(r)||!Cr(r)||(Object.assign(r.style,i),Object.keys(n).forEach(function(a){var o=n[a];o===!1?r.removeAttribute(a):r.setAttribute(a,o===!0?"":o)}))})}function eI(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],r=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),o=a.reduce(function(l,u){return l[u]="",l},{});!Hn(n)||!Cr(n)||(Object.assign(n.style,o),Object.keys(r).forEach(function(l){n.removeAttribute(l)}))})}}var Rg={name:"applyStyles",enabled:!0,phase:"write",fn:Zw,effect:eI,requires:["computeStyles"]};function tI(s,e,t){var i=Ar(s),n=[rn,nn].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,a=r[0],o=r[1];return a=a||0,o=(o||0)*n,[rn,jn].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function iI(s){var e=s.state,t=s.options,i=s.name,n=t.offset,r=n===void 0?[0,0]:n,a=UT.reduce(function(c,h){return c[h]=tI(h,e.rects,r),c},{}),o=a[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=a}var zT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iI},sI={left:"right",right:"left",bottom:"top",top:"bottom"};function Gd(s){return s.replace(/left|right|bottom|top/g,function(e){return sI[e]})}var nI={start:"end",end:"start"};function OT(s){return s.replace(/start|end/g,function(e){return nI[e]})}function rI(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,r=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?UT:l,c=El(i),h=c?o?DT:DT.filter(function(v){return El(v)===c}):Zu,g=h.filter(function(v){return u.indexOf(v)>=0});g.length===0&&(g=h);var m=g.reduce(function(v,b){return v[b]=Sl(s,{placement:b,boundary:n,rootBoundary:r,padding:a})[Ar(b)],v},{});return Object.keys(m).sort(function(v,b){return m[v]-m[b]})}function aI(s){if(Ar(s)===Cg)return[];var e=Gd(s);return[OT(s),e,OT(e)]}function oI(s){var e=s.state,t=s.options,i=s.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,r=n===void 0?!0:n,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,u=t.padding,c=t.boundary,h=t.rootBoundary,g=t.altBoundary,m=t.flipVariations,v=m===void 0?!0:m,b=t.allowedAutoPlacements,A=e.options.placement,R=Ar(A),F=R===A,O=l||(F||!v?[Gd(A)]:aI(A)),H=[A].concat(O).reduce(function(wt,xt){return wt.concat(Ar(xt)===Cg?rI(e,{placement:xt,boundary:c,rootBoundary:h,padding:u,flipVariations:v,allowedAutoPlacements:b}):xt)},[]),W=e.rects.reference,E=e.rects.popper,X=new Map,Z=!0,re=H[0],oe=0;oe<H.length;oe++){var ve=H[oe],Ce=Ar(ve),we=El(ve)===bl,Ge=[nn,Vn].indexOf(Ce)>=0,Xe=Ge?"width":"height",Re=Sl(e,{placement:ve,boundary:c,rootBoundary:h,altBoundary:g,padding:u}),We=Ge?we?jn:rn:we?Vn:nn;W[Xe]>E[Xe]&&(We=Gd(We));var Qe=Gd(We),rt=[];if(r&&rt.push(Re[Ce]<=0),o&&rt.push(Re[We]<=0,Re[Qe]<=0),rt.every(function(wt){return wt})){re=ve,Z=!1;break}X.set(ve,rt)}if(Z)for(var gt=v?3:1,et=function(xt){var At=H.find(function(ni){var Xt=X.get(ni);if(Xt)return Xt.slice(0,xt).every(function(Fe){return Fe})});if(At)return re=At,"break"},Ye=gt;Ye>0;Ye--){var St=et(Ye);if(St==="break")break}e.placement!==re&&(e.modifiersData[i]._skip=!0,e.placement=re,e.reset=!0)}}var WT={name:"flip",enabled:!0,phase:"main",fn:oI,requiresIfExists:["offset"],data:{_skip:!1}};function lI(s){return s==="x"?"y":"x"}function Xu(s,e,t){return xo(s,qd(e,t))}function uI(s,e,t){var i=Xu(s,e,t);return i>t?t:i}function cI(s){var e=s.state,t=s.options,i=s.name,n=t.mainAxis,r=n===void 0?!0:n,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,h=t.padding,g=t.tether,m=g===void 0?!0:g,v=t.tetherOffset,b=v===void 0?0:v,A=Sl(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),R=Ar(e.placement),F=El(e.placement),O=!F,H=wg(R),W=lI(H),E=e.modifiersData.popperOffsets,X=e.rects.reference,Z=e.rects.popper,re=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,oe=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),ve=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ce={x:0,y:0};if(!!E){if(r){var we,Ge=H==="y"?nn:rn,Xe=H==="y"?Vn:jn,Re=H==="y"?"height":"width",We=E[H],Qe=We+A[Ge],rt=We-A[Xe],gt=m?-Z[Re]/2:0,et=F===bl?X[Re]:Z[Re],Ye=F===bl?-Z[Re]:-X[Re],St=e.elements.arrow,wt=m&&St?Ag(St):{width:0,height:0},xt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jT(),At=xt[Ge],ni=xt[Xe],Xt=Xu(0,X[Re],wt[Re]),Fe=O?X[Re]/2-gt-Xt-At-oe.mainAxis:et-Xt-At-oe.mainAxis,ki=O?-X[Re]/2+gt+Xt+ni+oe.mainAxis:Ye+Xt+ni+oe.mainAxis,_i=e.elements.arrow&&Ju(e.elements.arrow),Ri=_i?H==="y"?_i.clientTop||0:_i.clientLeft||0:0,pi=(we=ve?.[H])!=null?we:0,Ui=We+Fe-pi-Ri,fs=We+ki-pi,Lt=Xu(m?qd(Qe,Ui):Qe,We,m?xo(rt,fs):rt);E[H]=Lt,Ce[H]=Lt-We}if(o){var d,x=H==="x"?nn:rn,C=H==="x"?Vn:jn,I=E[W],M=W==="y"?"height":"width",P=I+A[x],Y=I-A[C],j=[nn,rn].indexOf(R)!==-1,G=(d=ve?.[W])!=null?d:0,J=j?P:I-X[M]-Z[M]-G+oe.altAxis,q=j?I+X[M]+Z[M]-G-oe.altAxis:Y,z=m&&j?uI(J,I,q):Xu(m?J:P,I,m?q:Y);E[W]=z,Ce[W]=z-I}e.modifiersData[i]=Ce}}var KT={name:"preventOverflow",enabled:!0,phase:"main",fn:cI,requiresIfExists:["offset"]},dI=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,GT(typeof e!="number"?e:qT(e,Zu))};function hI(s){var e,t=s.state,i=s.name,n=s.options,r=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Ar(t.placement),l=wg(o),u=[rn,jn].indexOf(o)>=0,c=u?"height":"width";if(!(!r||!a)){var h=dI(n.padding,t),g=Ag(r),m=l==="y"?nn:rn,v=l==="y"?Vn:jn,b=t.rects.reference[c]+t.rects.reference[l]-a[l]-t.rects.popper[c],A=a[l]-t.rects.reference[l],R=Ju(r),F=R?l==="y"?R.clientHeight||0:R.clientWidth||0:0,O=b/2-A/2,H=h[m],W=F-g[c]-h[v],E=F/2-g[c]/2+O,X=Xu(H,E,W),Z=l;t.modifiersData[i]=(e={},e[Z]=X,e.centerOffset=X-E,e)}}function fI(s){var e=s.state,t=s.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||!HT(e.elements.popper,n)||(e.elements.arrow=n))}var YT={name:"arrow",enabled:!0,phase:"main",fn:hI,effect:fI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function MT(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function NT(s){return[nn,jn,Vn,rn].some(function(e){return s[e]>=0})}function pI(s){var e=s.state,t=s.name,i=e.rects.reference,n=e.rects.popper,r=e.modifiersData.preventOverflow,a=Sl(e,{elementContext:"reference"}),o=Sl(e,{altBoundary:!0}),l=MT(a,i),u=MT(o,n,r),c=NT(l),h=NT(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}var XT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pI},gI=[Dg,Lg,kg,Rg],mI=Ig({defaultModifiers:gI}),QT=[Dg,Lg,kg,Rg,zT,WT,KT,YT,XT],yI=Ig({defaultModifiers:QT});xs.applyStyles=Rg;xs.arrow=YT;xs.computeStyles=kg;xs.createPopper=yI;xs.createPopperLite=mI;xs.defaultModifiers=QT;xs.detectOverflow=Sl;xs.eventListeners=Dg;xs.flip=WT;xs.hide=XT;xs.offset=zT;xs.popperGenerator=Ig;xs.popperOffsets=Lg;xs.preventOverflow=KT});var Mg=gi((Pg,Og)=>{(function(s,e){typeof Pg=="object"&&typeof Og<"u"?Og.exports=e(JT()):typeof define=="function"&&define.amd?define(["@popperjs/core"],e):(s=typeof globalThis<"u"?globalThis:s||self,s.bootstrap=e(s.Popper))})(Pg,function(s){"use strict";function e(fe){let w=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(fe){for(let K in fe)if(K!=="default"){let pe=Object.getOwnPropertyDescriptor(fe,K);Object.defineProperty(w,K,pe.get?pe:{enumerable:!0,get:()=>fe[K]})}}return w.default=fe,Object.freeze(w)}let t=e(s),i=new Map,n={set(fe,w,K){i.has(fe)||i.set(fe,new Map);let pe=i.get(fe);if(!pe.has(w)&&pe.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(pe.keys())[0]}.`);return}pe.set(w,K)},get(fe,w){return i.has(fe)&&i.get(fe).get(w)||null},remove(fe,w){if(!i.has(fe))return;let K=i.get(fe);K.delete(w),K.size===0&&i.delete(fe)}},r=1e6,a=1e3,o="transitionend",l=fe=>(fe&&window.CSS&&window.CSS.escape&&(fe=fe.replace(/#([^\s"#']+)/g,(w,K)=>`#${CSS.escape(K)}`)),fe),u=fe=>fe==null?`${fe}`:Object.prototype.toString.call(fe).match(/\s([a-z]+)/i)[1].toLowerCase(),c=fe=>{do fe+=Math.floor(Math.random()*r);while(document.getElementById(fe));return fe},h=fe=>{if(!fe)return 0;let{transitionDuration:w,transitionDelay:K}=window.getComputedStyle(fe),pe=Number.parseFloat(w),Ve=Number.parseFloat(K);return!pe&&!Ve?0:(w=w.split(",")[0],K=K.split(",")[0],(Number.parseFloat(w)+Number.parseFloat(K))*a)},g=fe=>{fe.dispatchEvent(new Event(o))},m=fe=>!fe||typeof fe!="object"?!1:(typeof fe.jquery<"u"&&(fe=fe[0]),typeof fe.nodeType<"u"),v=fe=>m(fe)?fe.jquery?fe[0]:fe:typeof fe=="string"&&fe.length>0?document.querySelector(l(fe)):null,b=fe=>{if(!m(fe)||fe.getClientRects().length===0)return!1;let w=getComputedStyle(fe).getPropertyValue("visibility")==="visible",K=fe.closest("details:not([open])");if(!K)return w;if(K!==fe){let pe=fe.closest("summary");if(pe&&pe.parentNode!==K||pe===null)return!1}return w},A=fe=>!fe||fe.nodeType!==Node.ELEMENT_NODE||fe.classList.contains("disabled")?!0:typeof fe.disabled<"u"?fe.disabled:fe.hasAttribute("disabled")&&fe.getAttribute("disabled")!=="false",R=fe=>{if(!document.documentElement.attachShadow)return null;if(typeof fe.getRootNode=="function"){let w=fe.getRootNode();return w instanceof ShadowRoot?w:null}return fe instanceof ShadowRoot?fe:fe.parentNode?R(fe.parentNode):null},F=()=>{},O=fe=>{fe.offsetHeight},H=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,W=[],E=fe=>{document.readyState==="loading"?(W.length||document.addEventListener("DOMContentLoaded",()=>{for(let w of W)w()}),W.push(fe)):fe()},X=()=>document.documentElement.dir==="rtl",Z=fe=>{E(()=>{let w=H();if(w){let K=fe.NAME,pe=w.fn[K];w.fn[K]=fe.jQueryInterface,w.fn[K].Constructor=fe,w.fn[K].noConflict=()=>(w.fn[K]=pe,fe.jQueryInterface)}})},re=(fe,w=[],K=fe)=>typeof fe=="function"?fe.call(...w):K,oe=(fe,w,K=!0)=>{if(!K){re(fe);return}let pe=5,Ve=h(w)+pe,ct=!1,lt=({target:Gt})=>{Gt===w&&(ct=!0,w.removeEventListener(o,lt),re(fe))};w.addEventListener(o,lt),setTimeout(()=>{ct||g(w)},Ve)},ve=(fe,w,K,pe)=>{let Ve=fe.length,ct=fe.indexOf(w);return ct===-1?!K&&pe?fe[Ve-1]:fe[0]:(ct+=K?1:-1,pe&&(ct=(ct+Ve)%Ve),fe[Math.max(0,Math.min(ct,Ve-1))])},Ce=/[^.]*(?=\..*)\.|.*/,we=/\..*/,Ge=/::\d+$/,Xe={},Re=1,We={mouseenter:"mouseover",mouseleave:"mouseout"},Qe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function rt(fe,w){return w&&`${w}::${Re++}`||fe.uidEvent||Re++}function gt(fe){let w=rt(fe);return fe.uidEvent=w,Xe[w]=Xe[w]||{},Xe[w]}function et(fe,w){return function K(pe){return ki(pe,{delegateTarget:fe}),K.oneOff&&Fe.off(fe,pe.type,w),w.apply(fe,[pe])}}function Ye(fe,w,K){return function pe(Ve){let ct=fe.querySelectorAll(w);for(let{target:lt}=Ve;lt&&lt!==this;lt=lt.parentNode)for(let Gt of ct)if(Gt===lt)return ki(Ve,{delegateTarget:lt}),pe.oneOff&&Fe.off(fe,Ve.type,w,K),K.apply(lt,[Ve])}}function St(fe,w,K=null){return Object.values(fe).find(pe=>pe.callable===w&&pe.delegationSelector===K)}function wt(fe,w,K){let pe=typeof w=="string",Ve=pe?K:w||K,ct=Xt(fe);return Qe.has(ct)||(ct=fe),[pe,Ve,ct]}function xt(fe,w,K,pe,Ve){if(typeof w!="string"||!fe)return;let[ct,lt,Gt]=wt(w,K,pe);w in We&&(lt=(uw=>function(ml){if(!ml.relatedTarget||ml.relatedTarget!==ml.delegateTarget&&!ml.delegateTarget.contains(ml.relatedTarget))return uw.call(this,ml)})(lt));let sn=gt(fe),Un=sn[Gt]||(sn[Gt]={}),rs=St(Un,lt,ct?K:null);if(rs){rs.oneOff=rs.oneOff&&Ve;return}let xr=rt(lt,w.replace(Ce,"")),rr=ct?Ye(fe,K,lt):et(fe,lt);rr.delegationSelector=ct?K:null,rr.callable=lt,rr.oneOff=Ve,rr.uidEvent=xr,Un[xr]=rr,fe.addEventListener(Gt,rr,ct)}function At(fe,w,K,pe,Ve){let ct=St(w[K],pe,Ve);!ct||(fe.removeEventListener(K,ct,Boolean(Ve)),delete w[K][ct.uidEvent])}function ni(fe,w,K,pe){let Ve=w[K]||{};for(let[ct,lt]of Object.entries(Ve))ct.includes(pe)&&At(fe,w,K,lt.callable,lt.delegationSelector)}function Xt(fe){return fe=fe.replace(we,""),We[fe]||fe}let Fe={on(fe,w,K,pe){xt(fe,w,K,pe,!1)},one(fe,w,K,pe){xt(fe,w,K,pe,!0)},off(fe,w,K,pe){if(typeof w!="string"||!fe)return;let[Ve,ct,lt]=wt(w,K,pe),Gt=lt!==w,sn=gt(fe),Un=sn[lt]||{},rs=w.startsWith(".");if(typeof ct<"u"){if(!Object.keys(Un).length)return;At(fe,sn,lt,ct,Ve?K:null);return}if(rs)for(let xr of Object.keys(sn))ni(fe,sn,xr,w.slice(1));for(let[xr,rr]of Object.entries(Un)){let Bd=xr.replace(Ge,"");(!Gt||w.includes(Bd))&&At(fe,sn,lt,rr.callable,rr.delegationSelector)}},trigger(fe,w,K){if(typeof w!="string"||!fe)return null;let pe=H(),Ve=Xt(w),ct=w!==Ve,lt=null,Gt=!0,sn=!0,Un=!1;ct&&pe&&(lt=pe.Event(w,K),pe(fe).trigger(lt),Gt=!lt.isPropagationStopped(),sn=!lt.isImmediatePropagationStopped(),Un=lt.isDefaultPrevented());let rs=ki(new Event(w,{bubbles:Gt,cancelable:!0}),K);return Un&&rs.preventDefault(),sn&&fe.dispatchEvent(rs),rs.defaultPrevented&&lt&&lt.preventDefault(),rs}};function ki(fe,w={}){for(let[K,pe]of Object.entries(w))try{fe[K]=pe}catch{Object.defineProperty(fe,K,{configurable:!0,get(){return pe}})}return fe}function _i(fe){if(fe==="true")return!0;if(fe==="false")return!1;if(fe===Number(fe).toString())return Number(fe);if(fe===""||fe==="null")return null;if(typeof fe!="string")return fe;try{return JSON.parse(decodeURIComponent(fe))}catch{return fe}}function Ri(fe){return fe.replace(/[A-Z]/g,w=>`-${w.toLowerCase()}`)}let pi={setDataAttribute(fe,w,K){fe.setAttribute(`data-bs-${Ri(w)}`,K)},removeDataAttribute(fe,w){fe.removeAttribute(`data-bs-${Ri(w)}`)},getDataAttributes(fe){if(!fe)return{};let w={},K=Object.keys(fe.dataset).filter(pe=>pe.startsWith("bs")&&!pe.startsWith("bsConfig"));for(let pe of K){let Ve=pe.replace(/^bs/,"");Ve=Ve.charAt(0).toLowerCase()+Ve.slice(1),w[Ve]=_i(fe.dataset[pe])}return w},getDataAttribute(fe,w){return _i(fe.getAttribute(`data-bs-${Ri(w)}`))}};class Ui{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(w){return w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w}_mergeConfigObj(w,K){let pe=m(K)?pi.getDataAttribute(K,"config"):{};return{...this.constructor.Default,...typeof pe=="object"?pe:{},...m(K)?pi.getDataAttributes(K):{},...typeof w=="object"?w:{}}}_typeCheckConfig(w,K=this.constructor.DefaultType){for(let[pe,Ve]of Object.entries(K)){let ct=w[pe],lt=m(ct)?"element":u(ct);if(!new RegExp(Ve).test(lt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${pe}" provided type "${lt}" but expected type "${Ve}".`)}}}let fs="5.3.8";class Lt extends Ui{constructor(w,K){super(),w=v(w),w&&(this._element=w,this._config=this._getConfig(K),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),Fe.off(this._element,this.constructor.EVENT_KEY);for(let w of Object.getOwnPropertyNames(this))this[w]=null}_queueCallback(w,K,pe=!0){oe(w,K,pe)}_getConfig(w){return w=this._mergeConfigObj(w,this._element),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}static getInstance(w){return n.get(v(w),this.DATA_KEY)}static getOrCreateInstance(w,K={}){return this.getInstance(w)||new this(w,typeof K=="object"?K:null)}static get VERSION(){return fs}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(w){return`${w}${this.EVENT_KEY}`}}let d=fe=>{let w=fe.getAttribute("data-bs-target");if(!w||w==="#"){let K=fe.getAttribute("href");if(!K||!K.includes("#")&&!K.startsWith("."))return null;K.includes("#")&&!K.startsWith("#")&&(K=`#${K.split("#")[1]}`),w=K&&K!=="#"?K.trim():null}return w?w.split(",").map(K=>l(K)).join(","):null},x={find(fe,w=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(w,fe))},findOne(fe,w=document.documentElement){return Element.prototype.querySelector.call(w,fe)},children(fe,w){return[].concat(...fe.children).filter(K=>K.matches(w))},parents(fe,w){let K=[],pe=fe.parentNode.closest(w);for(;pe;)K.push(pe),pe=pe.parentNode.closest(w);return K},prev(fe,w){let K=fe.previousElementSibling;for(;K;){if(K.matches(w))return[K];K=K.previousElementSibling}return[]},next(fe,w){let K=fe.nextElementSibling;for(;K;){if(K.matches(w))return[K];K=K.nextElementSibling}return[]},focusableChildren(fe){let w=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(K=>`${K}:not([tabindex^="-"])`).join(",");return this.find(w,fe).filter(K=>!A(K)&&b(K))},getSelectorFromElement(fe){let w=d(fe);return w&&x.findOne(w)?w:null},getElementFromSelector(fe){let w=d(fe);return w?x.findOne(w):null},getMultipleElementsFromSelector(fe){let w=d(fe);return w?x.find(w):[]}},C=(fe,w="hide")=>{let K=`click.dismiss${fe.EVENT_KEY}`,pe=fe.NAME;Fe.on(document,K,`[data-bs-dismiss="${pe}"]`,function(Ve){if(["A","AREA"].includes(this.tagName)&&Ve.preventDefault(),A(this))return;let ct=x.getElementFromSelector(this)||this.closest(`.${pe}`);fe.getOrCreateInstance(ct)[w]()})},I="alert",P=".bs.alert",Y=`close${P}`,j=`closed${P}`,G="fade",J="show";class q extends Lt{static get NAME(){return I}close(){if(Fe.trigger(this._element,Y).defaultPrevented)return;this._element.classList.remove(J);let K=this._element.classList.contains(G);this._queueCallback(()=>this._destroyElement(),this._element,K)}_destroyElement(){this._element.remove(),Fe.trigger(this._element,j),this.dispose()}static jQueryInterface(w){return this.each(function(){let K=q.getOrCreateInstance(this);if(typeof w=="string"){if(K[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);K[w](this)}})}}C(q,"close"),Z(q);let z="button",se=".bs.button",le=".data-api",de="active",ke='[data-bs-toggle="button"]',me=`click${se}${le}`;class De extends Lt{static get NAME(){return z}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(de))}static jQueryInterface(w){return this.each(function(){let K=De.getOrCreateInstance(this);w==="toggle"&&K[w]()})}}Fe.on(document,me,ke,fe=>{fe.preventDefault();let w=fe.target.closest(ke);De.getOrCreateInstance(w).toggle()}),Z(De);let Se="swipe",Ke=".bs.swipe",nt=`touchstart${Ke}`,qe=`touchmove${Ke}`,Je=`touchend${Ke}`,it=`pointerdown${Ke}`,ze=`pointerup${Ke}`,$e="touch",Pe="pen",tt="pointer-event",_t=40,at={endCallback:null,leftCallback:null,rightCallback:null},Ct={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Tt extends Ui{constructor(w,K){super(),this._element=w,!(!w||!Tt.isSupported())&&(this._config=this._getConfig(K),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return at}static get DefaultType(){return Ct}static get NAME(){return Se}dispose(){Fe.off(this._element,Ke)}_start(w){if(!this._supportPointerEvents){this._deltaX=w.touches[0].clientX;return}this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX)}_end(w){this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX-this._deltaX),this._handleSwipe(),re(this._config.endCallback)}_move(w){this._deltaX=w.touches&&w.touches.length>1?0:w.touches[0].clientX-this._deltaX}_handleSwipe(){let w=Math.abs(this._deltaX);if(w<=_t)return;let K=w/this._deltaX;this._deltaX=0,K&&re(K>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Fe.on(this._element,it,w=>this._start(w)),Fe.on(this._element,ze,w=>this._end(w)),this._element.classList.add(tt)):(Fe.on(this._element,nt,w=>this._start(w)),Fe.on(this._element,qe,w=>this._move(w)),Fe.on(this._element,Je,w=>this._end(w)))}_eventIsPointerPenTouch(w){return this._supportPointerEvents&&(w.pointerType===Pe||w.pointerType===$e)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}let Bt="carousel",Ai=".bs.carousel",Hi=".data-api",Ds="ArrowLeft",vi="ArrowRight",Ls=500,Vi="next",es="prev",Ni="left",ks="right",Qt=`slide${Ai}`,ps=`slid${Ai}`,Ks=`keydown${Ai}`,Ys=`mouseenter${Ai}`,Zn=`mouseleave${Ai}`,ts=`dragstart${Ai}`,Jt=`load${Ai}${Hi}`,Xo=`click${Ai}${Hi}`,gn="carousel",zr="active",Qo="slide",Jo="carousel-item-end",so="carousel-item-start",no="carousel-item-next",Wr="carousel-item-prev",ro=".active",Zo=".carousel-item",el=ro+Zo,Kr=".carousel-item img",gr=".carousel-indicators",ao="[data-bs-slide], [data-bs-slide-to]",Pi='[data-bs-ride="carousel"]',Xs={[Ds]:ks,[vi]:Ni},Rn={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Yr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class mr extends Lt{constructor(w,K){super(w,K),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=x.findOne(gr,this._element),this._addEventListeners(),this._config.ride===gn&&this.cycle()}static get Default(){return Rn}static get DefaultType(){return Yr}static get NAME(){return Bt}next(){this._slide(Vi)}nextWhenVisible(){!document.hidden&&b(this._element)&&this.next()}prev(){this._slide(es)}pause(){this._isSliding&&g(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){Fe.one(this._element,ps,()=>this.cycle());return}this.cycle()}}to(w){let K=this._getItems();if(w>K.length-1||w<0)return;if(this._isSliding){Fe.one(this._element,ps,()=>this.to(w));return}let pe=this._getItemIndex(this._getActive());if(pe===w)return;let Ve=w>pe?Vi:es;this._slide(Ve,K[w])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(w){return w.defaultInterval=w.interval,w}_addEventListeners(){this._config.keyboard&&Fe.on(this._element,Ks,w=>this._keydown(w)),this._config.pause==="hover"&&(Fe.on(this._element,Ys,()=>this.pause()),Fe.on(this._element,Zn,()=>this._maybeEnableCycle())),this._config.touch&&Tt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let pe of x.find(Kr,this._element))Fe.on(pe,ts,Ve=>Ve.preventDefault());let K={leftCallback:()=>this._slide(this._directionToOrder(Ni)),rightCallback:()=>this._slide(this._directionToOrder(ks)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ls+this._config.interval))}};this._swipeHelper=new Tt(this._element,K)}_keydown(w){if(/input|textarea/i.test(w.target.tagName))return;let K=Xs[w.key];K&&(w.preventDefault(),this._slide(this._directionToOrder(K)))}_getItemIndex(w){return this._getItems().indexOf(w)}_setActiveIndicatorElement(w){if(!this._indicatorsElement)return;let K=x.findOne(ro,this._indicatorsElement);K.classList.remove(zr),K.removeAttribute("aria-current");let pe=x.findOne(`[data-bs-slide-to="${w}"]`,this._indicatorsElement);pe&&(pe.classList.add(zr),pe.setAttribute("aria-current","true"))}_updateInterval(){let w=this._activeElement||this._getActive();if(!w)return;let K=Number.parseInt(w.getAttribute("data-bs-interval"),10);this._config.interval=K||this._config.defaultInterval}_slide(w,K=null){if(this._isSliding)return;let pe=this._getActive(),Ve=w===Vi,ct=K||ve(this._getItems(),pe,Ve,this._config.wrap);if(ct===pe)return;let lt=this._getItemIndex(ct),Gt=Bd=>Fe.trigger(this._element,Bd,{relatedTarget:ct,direction:this._orderToDirection(w),from:this._getItemIndex(pe),to:lt});if(Gt(Qt).defaultPrevented||!pe||!ct)return;let Un=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(lt),this._activeElement=ct;let rs=Ve?so:Jo,xr=Ve?no:Wr;ct.classList.add(xr),O(ct),pe.classList.add(rs),ct.classList.add(rs);let rr=()=>{ct.classList.remove(rs,xr),ct.classList.add(zr),pe.classList.remove(zr,xr,rs),this._isSliding=!1,Gt(ps)};this._queueCallback(rr,pe,this._isAnimated()),Un&&this.cycle()}_isAnimated(){return this._element.classList.contains(Qo)}_getActive(){return x.findOne(el,this._element)}_getItems(){return x.find(Zo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(w){return X()?w===Ni?es:Vi:w===Ni?Vi:es}_orderToDirection(w){return X()?w===es?Ni:ks:w===es?ks:Ni}static jQueryInterface(w){return this.each(function(){let K=mr.getOrCreateInstance(this,w);if(typeof w=="number"){K.to(w);return}if(typeof w=="string"){if(K[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);K[w]()}})}}Fe.on(document,Xo,ao,function(fe){let w=x.getElementFromSelector(this);if(!w||!w.classList.contains(gn))return;fe.preventDefault();let K=mr.getOrCreateInstance(w),pe=this.getAttribute("data-bs-slide-to");if(pe){K.to(pe),K._maybeEnableCycle();return}if(pi.getDataAttribute(this,"slide")==="next"){K.next(),K._maybeEnableCycle();return}K.prev(),K._maybeEnableCycle()}),Fe.on(window,Jt,()=>{let fe=x.find(Pi);for(let w of fe)mr.getOrCreateInstance(w)}),Z(mr);let ya="collapse",Pn=".bs.collapse",mn=".data-api",va=`show${Pn}`,Lu=`shown${Pn}`,gs=`hide${Pn}`,Ta=`hidden${Pn}`,Ki=`click${Pn}${mn}`,oo="show",yn="collapse",is="collapsing",Qs="collapsed",On=`:scope .${yn} .${yn}`,lo="collapse-horizontal",yr="width",_a="height",uo=".collapse.show, .collapse.collapsing",ba='[data-bs-toggle="collapse"]',tl={parent:null,toggle:!0},Ea={parent:"(null|element)",toggle:"boolean"};class Mn extends Lt{constructor(w,K){super(w,K),this._isTransitioning=!1,this._triggerArray=[];let pe=x.find(ba);for(let Ve of pe){let ct=x.getSelectorFromElement(Ve),lt=x.find(ct).filter(Gt=>Gt===this._element);ct!==null&&lt.length&&this._triggerArray.push(Ve)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tl}static get DefaultType(){return Ea}static get NAME(){return ya}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let w=[];if(this._config.parent&&(w=this._getFirstLevelChildren(uo).filter(Gt=>Gt!==this._element).map(Gt=>Mn.getOrCreateInstance(Gt,{toggle:!1}))),w.length&&w[0]._isTransitioning||Fe.trigger(this._element,va).defaultPrevented)return;for(let Gt of w)Gt.hide();let pe=this._getDimension();this._element.classList.remove(yn),this._element.classList.add(is),this._element.style[pe]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let Ve=()=>{this._isTransitioning=!1,this._element.classList.remove(is),this._element.classList.add(yn,oo),this._element.style[pe]="",Fe.trigger(this._element,Lu)},lt=`scroll${pe[0].toUpperCase()+pe.slice(1)}`;this._queueCallback(Ve,this._element,!0),this._element.style[pe]=`${this._element[lt]}px`}hide(){if(this._isTransitioning||!this._isShown()||Fe.trigger(this._element,gs).defaultPrevented)return;let K=this._getDimension();this._element.style[K]=`${this._element.getBoundingClientRect()[K]}px`,O(this._element),this._element.classList.add(is),this._element.classList.remove(yn,oo);for(let Ve of this._triggerArray){let ct=x.getElementFromSelector(Ve);ct&&!this._isShown(ct)&&this._addAriaAndCollapsedClass([Ve],!1)}this._isTransitioning=!0;let pe=()=>{this._isTransitioning=!1,this._element.classList.remove(is),this._element.classList.add(yn),Fe.trigger(this._element,Ta)};this._element.style[K]="",this._queueCallback(pe,this._element,!0)}_isShown(w=this._element){return w.classList.contains(oo)}_configAfterMerge(w){return w.toggle=Boolean(w.toggle),w.parent=v(w.parent),w}_getDimension(){return this._element.classList.contains(lo)?yr:_a}_initializeChildren(){if(!this._config.parent)return;let w=this._getFirstLevelChildren(ba);for(let K of w){let pe=x.getElementFromSelector(K);pe&&this._addAriaAndCollapsedClass([K],this._isShown(pe))}}_getFirstLevelChildren(w){let K=x.find(On,this._config.parent);return x.find(w,this._config.parent).filter(pe=>!K.includes(pe))}_addAriaAndCollapsedClass(w,K){if(!!w.length)for(let pe of w)pe.classList.toggle(Qs,!K),pe.setAttribute("aria-expanded",K)}static jQueryInterface(w){let K={};return typeof w=="string"&&/show|hide/.test(w)&&(K.toggle=!1),this.each(function(){let pe=Mn.getOrCreateInstance(this,K);if(typeof w=="string"){if(typeof pe[w]>"u")throw new TypeError(`No method named "${w}"`);pe[w]()}})}}Fe.on(document,Ki,ba,function(fe){(fe.target.tagName==="A"||fe.delegateTarget&&fe.delegateTarget.tagName==="A")&&fe.preventDefault();for(let w of x.getMultipleElementsFromSelector(this))Mn.getOrCreateInstance(w,{toggle:!1}).toggle()}),Z(Mn);let il="dropdown",vn=".bs.dropdown",Sa=".data-api",Ru="Escape",Xr="Tab",Qr="ArrowUp",co="ArrowDown",Pu=2,Ou=`hide${vn}`,ho=`hidden${vn}`,xa=`show${vn}`,sl=`shown${vn}`,Jr=`click${vn}${Sa}`,fo=`keydown${vn}${Sa}`,nl=`keyup${vn}${Sa}`,Nn="show",Mu="dropup",Nu="dropend",Fu="dropstart",er="dropup-center",rl="dropdown-center",Js='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Aa=`${Js}.${Nn}`,Ca=".dropdown-menu",$u=".navbar",p=".navbar-nav",T=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",D=X()?"top-end":"top-start",k=X()?"top-start":"top-end",U=X()?"bottom-end":"bottom-start",V=X()?"bottom-start":"bottom-end",Q=X()?"left-start":"right-start",he=X()?"right-start":"left-start",ue="top",_e="bottom",Me={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ue={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class xe extends Lt{constructor(w,K){super(w,K),this._popper=null,this._parent=this._element.parentNode,this._menu=x.next(this._element,Ca)[0]||x.prev(this._element,Ca)[0]||x.findOne(Ca,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Me}static get DefaultType(){return Ue}static get NAME(){return il}toggle(){return this._isShown()?this.hide():this.show()}show(){if(A(this._element)||this._isShown())return;let w={relatedTarget:this._element};if(!Fe.trigger(this._element,xa,w).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(p))for(let pe of[].concat(...document.body.children))Fe.on(pe,"mouseover",F);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Nn),this._element.classList.add(Nn),Fe.trigger(this._element,sl,w)}}hide(){if(A(this._element)||!this._isShown())return;let w={relatedTarget:this._element};this._completeHide(w)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(w){if(!Fe.trigger(this._element,Ou,w).defaultPrevented){if("ontouchstart"in document.documentElement)for(let pe of[].concat(...document.body.children))Fe.off(pe,"mouseover",F);this._popper&&this._popper.destroy(),this._menu.classList.remove(Nn),this._element.classList.remove(Nn),this._element.setAttribute("aria-expanded","false"),pi.removeDataAttribute(this._menu,"popper"),Fe.trigger(this._element,ho,w)}}_getConfig(w){if(w=super._getConfig(w),typeof w.reference=="object"&&!m(w.reference)&&typeof w.reference.getBoundingClientRect!="function")throw new TypeError(`${il.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return w}_createPopper(){if(typeof t>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let w=this._element;this._config.reference==="parent"?w=this._parent:m(this._config.reference)?w=v(this._config.reference):typeof this._config.reference=="object"&&(w=this._config.reference);let K=this._getPopperConfig();this._popper=t.createPopper(w,this._menu,K)}_isShown(){return this._menu.classList.contains(Nn)}_getPlacement(){let w=this._parent;if(w.classList.contains(Nu))return Q;if(w.classList.contains(Fu))return he;if(w.classList.contains(er))return ue;if(w.classList.contains(rl))return _e;let K=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return w.classList.contains(Mu)?K?k:D:K?V:U}_detectNavbar(){return this._element.closest($u)!==null}_getOffset(){let{offset:w}=this._config;return typeof w=="string"?w.split(",").map(K=>Number.parseInt(K,10)):typeof w=="function"?K=>w(K,this._element):w}_getPopperConfig(){let w={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(pi.setDataAttribute(this._menu,"popper","static"),w.modifiers=[{name:"applyStyles",enabled:!1}]),{...w,...re(this._config.popperConfig,[void 0,w])}}_selectMenuItem({key:w,target:K}){let pe=x.find(T,this._menu).filter(Ve=>b(Ve));!pe.length||ve(pe,K,w===co,!pe.includes(K)).focus()}static jQueryInterface(w){return this.each(function(){let K=xe.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof K[w]>"u")throw new TypeError(`No method named "${w}"`);K[w]()}})}static clearMenus(w){if(w.button===Pu||w.type==="keyup"&&w.key!==Xr)return;let K=x.find(Aa);for(let pe of K){let Ve=xe.getInstance(pe);if(!Ve||Ve._config.autoClose===!1)continue;let ct=w.composedPath(),lt=ct.includes(Ve._menu);if(ct.includes(Ve._element)||Ve._config.autoClose==="inside"&&!lt||Ve._config.autoClose==="outside"&&lt||Ve._menu.contains(w.target)&&(w.type==="keyup"&&w.key===Xr||/input|select|option|textarea|form/i.test(w.target.tagName)))continue;let Gt={relatedTarget:Ve._element};w.type==="click"&&(Gt.clickEvent=w),Ve._completeHide(Gt)}}static dataApiKeydownHandler(w){let K=/input|textarea/i.test(w.target.tagName),pe=w.key===Ru,Ve=[Qr,co].includes(w.key);if(!Ve&&!pe||K&&!pe)return;w.preventDefault();let ct=this.matches(Js)?this:x.prev(this,Js)[0]||x.next(this,Js)[0]||x.findOne(Js,w.delegateTarget.parentNode),lt=xe.getOrCreateInstance(ct);if(Ve){w.stopPropagation(),lt.show(),lt._selectMenuItem(w);return}lt._isShown()&&(w.stopPropagation(),lt.hide(),ct.focus())}}Fe.on(document,fo,Js,xe.dataApiKeydownHandler),Fe.on(document,fo,Ca,xe.dataApiKeydownHandler),Fe.on(document,Jr,xe.clearMenus),Fe.on(document,nl,xe.clearMenus),Fe.on(document,Jr,Js,function(fe){fe.preventDefault(),xe.getOrCreateInstance(this).toggle()}),Z(xe);let Ze="backdrop",Rt="fade",Vt="show",Mt=`mousedown.bs.${Ze}`,bi={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ci={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ss extends Ui{constructor(w){super(),this._config=this._getConfig(w),this._isAppended=!1,this._element=null}static get Default(){return bi}static get DefaultType(){return ci}static get NAME(){return Ze}show(w){if(!this._config.isVisible){re(w);return}this._append();let K=this._getElement();this._config.isAnimated&&O(K),K.classList.add(Vt),this._emulateAnimation(()=>{re(w)})}hide(w){if(!this._config.isVisible){re(w);return}this._getElement().classList.remove(Vt),this._emulateAnimation(()=>{this.dispose(),re(w)})}dispose(){!this._isAppended||(Fe.off(this._element,Mt),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let w=document.createElement("div");w.className=this._config.className,this._config.isAnimated&&w.classList.add(Rt),this._element=w}return this._element}_configAfterMerge(w){return w.rootElement=v(w.rootElement),w}_append(){if(this._isAppended)return;let w=this._getElement();this._config.rootElement.append(w),Fe.on(w,Mt,()=>{re(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(w){oe(w,this._getElement(),this._config.isAnimated)}}let ji="focustrap",Rs=".bs.focustrap",Kt=`focusin${Rs}`,di=`keydown.tab${Rs}`,Zr="Tab",po="forward",Ps="backward",Fn={autofocus:!0,trapElement:null},Zs={autofocus:"boolean",trapElement:"element"};class Os extends Ui{constructor(w){super(),this._config=this._getConfig(w),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Fn}static get DefaultType(){return Zs}static get NAME(){return ji}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Fe.off(document,Rs),Fe.on(document,Kt,w=>this._handleFocusin(w)),Fe.on(document,di,w=>this._handleKeydown(w)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Fe.off(document,Rs))}_handleFocusin(w){let{trapElement:K}=this._config;if(w.target===document||w.target===K||K.contains(w.target))return;let pe=x.focusableChildren(K);pe.length===0?K.focus():this._lastTabNavDirection===Ps?pe[pe.length-1].focus():pe[0].focus()}_handleKeydown(w){w.key===Zr&&(this._lastTabNavDirection=w.shiftKey?Ps:po)}}let Tn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ms=".sticky-top",tr="padding-right",ys="margin-right";class Ms{constructor(){this._element=document.body}getWidth(){let w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){let w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,tr,K=>K+w),this._setElementAttributes(Tn,tr,K=>K+w),this._setElementAttributes(ms,ys,K=>K-w)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,tr),this._resetElementAttributes(Tn,tr),this._resetElementAttributes(ms,ys)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,K,pe){let Ve=this.getWidth(),ct=lt=>{if(lt!==this._element&&window.innerWidth>lt.clientWidth+Ve)return;this._saveInitialAttribute(lt,K);let Gt=window.getComputedStyle(lt).getPropertyValue(K);lt.style.setProperty(K,`${pe(Number.parseFloat(Gt))}px`)};this._applyManipulationCallback(w,ct)}_saveInitialAttribute(w,K){let pe=w.style.getPropertyValue(K);pe&&pi.setDataAttribute(w,K,pe)}_resetElementAttributes(w,K){let pe=Ve=>{let ct=pi.getDataAttribute(Ve,K);if(ct===null){Ve.style.removeProperty(K);return}pi.removeDataAttribute(Ve,K),Ve.style.setProperty(K,ct)};this._applyManipulationCallback(w,pe)}_applyManipulationCallback(w,K){if(m(w)){K(w);return}for(let pe of x.find(w,this._element))K(pe)}}let Bu="modal",ns=".bs.modal",Zt=".data-api",vr="Escape",bs=`hide${ns}`,Tr=`hidePrevented${ns}`,al=`hidden${ns}`,ol=`show${ns}`,ll=`shown${ns}`,$n=`resize${ns}`,go=`click.dismiss${ns}`,_n=`mousedown.dismiss${ns}`,ul=`keydown.dismiss${ns}`,_r=`click${ns}${Zt}`,Si="modal-open",br="fade",Yi="show",ir="modal-static",wa=".modal.show",mo=".modal-dialog",en=".modal-body",cl='[data-bs-toggle="modal"]',yo={backdrop:!0,focus:!0,keyboard:!0},dl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ne extends Lt{constructor(w,K){super(w,K),this._dialog=x.findOne(mo,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ms,this._addEventListeners()}static get Default(){return yo}static get DefaultType(){return dl}static get NAME(){return Bu}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||this._isTransitioning||Fe.trigger(this._element,ol,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Si),this._adjustDialog(),this._backdrop.show(()=>this._showElement(w)))}hide(){!this._isShown||this._isTransitioning||Fe.trigger(this._element,bs).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Yi),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){Fe.off(window,ns),Fe.off(this._dialog,ns),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ss({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Os({trapElement:this._element})}_showElement(w){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let K=x.findOne(en,this._dialog);K&&(K.scrollTop=0),O(this._element),this._element.classList.add(Yi);let pe=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Fe.trigger(this._element,ll,{relatedTarget:w})};this._queueCallback(pe,this._dialog,this._isAnimated())}_addEventListeners(){Fe.on(this._element,ul,w=>{if(w.key===vr){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),Fe.on(window,$n,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Fe.on(this._element,_n,w=>{Fe.one(this._element,go,K=>{if(!(this._element!==w.target||this._element!==K.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Si),this._resetAdjustments(),this._scrollBar.reset(),Fe.trigger(this._element,al)})}_isAnimated(){return this._element.classList.contains(br)}_triggerBackdropTransition(){if(Fe.trigger(this._element,Tr).defaultPrevented)return;let K=this._element.scrollHeight>document.documentElement.clientHeight,pe=this._element.style.overflowY;pe==="hidden"||this._element.classList.contains(ir)||(K||(this._element.style.overflowY="hidden"),this._element.classList.add(ir),this._queueCallback(()=>{this._element.classList.remove(ir),this._queueCallback(()=>{this._element.style.overflowY=pe},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let w=this._element.scrollHeight>document.documentElement.clientHeight,K=this._scrollBar.getWidth(),pe=K>0;if(pe&&!w){let Ve=X()?"paddingLeft":"paddingRight";this._element.style[Ve]=`${K}px`}if(!pe&&w){let Ve=X()?"paddingRight":"paddingLeft";this._element.style[Ve]=`${K}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(w,K){return this.each(function(){let pe=ne.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof pe[w]>"u")throw new TypeError(`No method named "${w}"`);pe[w](K)}})}}Fe.on(document,_r,cl,function(fe){let w=x.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&fe.preventDefault(),Fe.one(w,ol,Ve=>{Ve.defaultPrevented||Fe.one(w,al,()=>{b(this)&&this.focus()})});let K=x.findOne(wa);K&&ne.getInstance(K).hide(),ne.getOrCreateInstance(w).toggle(this)}),C(ne),Z(ne);let ye="offcanvas",Le=".bs.offcanvas",Be=".data-api",ot=`load${Le}${Be}`,ht="Escape",yt="show",dt="showing",Ut="hiding",kt="offcanvas-backdrop",mt=".offcanvas.show",$t=`show${Le}`,It=`shown${Le}`,ti=`hide${Le}`,Xi=`hidePrevented${Le}`,Fi=`hidden${Le}`,Es=`resize${Le}`,Ns=`click${Le}${Be}`,sr=`keydown.dismiss${Le}`,Gi='[data-bs-toggle="offcanvas"]',Ad={backdrop:!0,keyboard:!0,scroll:!1},Cd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class bn extends Lt{constructor(w,K){super(w,K),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ad}static get DefaultType(){return Cd}static get NAME(){return ye}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){if(this._isShown||Fe.trigger(this._element,$t,{relatedTarget:w}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ms().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(dt);let pe=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(yt),this._element.classList.remove(dt),Fe.trigger(this._element,It,{relatedTarget:w})};this._queueCallback(pe,this._element,!0)}hide(){if(!this._isShown||Fe.trigger(this._element,ti).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ut),this._backdrop.hide();let K=()=>{this._element.classList.remove(yt,Ut),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ms().reset(),Fe.trigger(this._element,Fi)};this._queueCallback(K,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let w=()=>{if(this._config.backdrop==="static"){Fe.trigger(this._element,Xi);return}this.hide()},K=Boolean(this._config.backdrop);return new ss({className:kt,isVisible:K,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:K?w:null})}_initializeFocusTrap(){return new Os({trapElement:this._element})}_addEventListeners(){Fe.on(this._element,sr,w=>{if(w.key===ht){if(this._config.keyboard){this.hide();return}Fe.trigger(this._element,Xi)}})}static jQueryInterface(w){return this.each(function(){let K=bn.getOrCreateInstance(this,w);if(typeof w=="string"){if(K[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);K[w](this)}})}}Fe.on(document,Ns,Gi,function(fe){let w=x.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&fe.preventDefault(),A(this))return;Fe.one(w,Fi,()=>{b(this)&&this.focus()});let K=x.findOne(mt);K&&K!==w&&bn.getInstance(K).hide(),bn.getOrCreateInstance(w).toggle(this)}),Fe.on(window,ot,()=>{for(let fe of x.find(mt))bn.getOrCreateInstance(fe).show()}),Fe.on(window,Es,()=>{for(let fe of x.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(fe).position!=="fixed"&&bn.getOrCreateInstance(fe).hide()}),C(bn),Z(bn);let hl={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Bp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),vo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Up=(fe,w)=>{let K=fe.nodeName.toLowerCase();return w.includes(K)?Bp.has(K)?Boolean(vo.test(fe.nodeValue)):!0:w.filter(pe=>pe instanceof RegExp).some(pe=>pe.test(K))};function wd(fe,w,K){if(!fe.length)return fe;if(K&&typeof K=="function")return K(fe);let Ve=new window.DOMParser().parseFromString(fe,"text/html"),ct=[].concat(...Ve.body.querySelectorAll("*"));for(let lt of ct){let Gt=lt.nodeName.toLowerCase();if(!Object.keys(w).includes(Gt)){lt.remove();continue}let sn=[].concat(...lt.attributes),Un=[].concat(w["*"]||[],w[Gt]||[]);for(let rs of sn)Up(rs,Un)||lt.removeAttribute(rs.nodeName)}return Ve.body.innerHTML}let Id="TemplateFactory",Hp={allowList:hl,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Vp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Dd={entry:"(string|element|function|null)",selector:"(string|element)"};class jp extends Ui{constructor(w){super(),this._config=this._getConfig(w)}static get Default(){return Hp}static get DefaultType(){return Vp}static get NAME(){return Id}getContent(){return Object.values(this._config.content).map(w=>this._resolvePossibleFunction(w)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(w){return this._checkContent(w),this._config.content={...this._config.content,...w},this}toHtml(){let w=document.createElement("div");w.innerHTML=this._maybeSanitize(this._config.template);for(let[Ve,ct]of Object.entries(this._config.content))this._setContent(w,ct,Ve);let K=w.children[0],pe=this._resolvePossibleFunction(this._config.extraClass);return pe&&K.classList.add(...pe.split(" ")),K}_typeCheckConfig(w){super._typeCheckConfig(w),this._checkContent(w.content)}_checkContent(w){for(let[K,pe]of Object.entries(w))super._typeCheckConfig({selector:K,entry:pe},Dd)}_setContent(w,K,pe){let Ve=x.findOne(pe,w);if(!!Ve){if(K=this._resolvePossibleFunction(K),!K){Ve.remove();return}if(m(K)){this._putElementInTemplate(v(K),Ve);return}if(this._config.html){Ve.innerHTML=this._maybeSanitize(K);return}Ve.textContent=K}}_maybeSanitize(w){return this._config.sanitize?wd(w,this._config.allowList,this._config.sanitizeFn):w}_resolvePossibleFunction(w){return re(w,[void 0,this])}_putElementInTemplate(w,K){if(this._config.html){K.innerHTML="",K.append(w);return}K.textContent=w.textContent}}let Gp="tooltip",Uu=new Set(["sanitize","allowList","sanitizeFn"]),Hu="fade",qp="modal",fl="show",zp=".tooltip-inner",Ld=`.${qp}`,kd="hide.bs.modal",To="hover",Vu="focus",ju="click",Wp="manual",Kp="hide",Er="hidden",Yp="show",Xp="shown",Qp="inserted",cT="click",Rd="focusin",Gu="focusout",Pd="mouseenter",pl="mouseleave",gl={AUTO:"auto",TOP:"top",RIGHT:X()?"left":"right",BOTTOM:"bottom",LEFT:X()?"right":"left"},Jp={allowList:hl,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Zp={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ea extends Lt{constructor(w,K){if(typeof t>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(w,K),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Jp}static get DefaultType(){return Zp}static get NAME(){return Gp}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Fe.off(this._element.closest(Ld),kd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let w=Fe.trigger(this._element,this.constructor.eventName(Yp)),pe=(R(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(w.defaultPrevented||!pe)return;this._disposePopper();let Ve=this._getTipElement();this._element.setAttribute("aria-describedby",Ve.getAttribute("id"));let{container:ct}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ct.append(Ve),Fe.trigger(this._element,this.constructor.eventName(Qp))),this._popper=this._createPopper(Ve),Ve.classList.add(fl),"ontouchstart"in document.documentElement)for(let Gt of[].concat(...document.body.children))Fe.on(Gt,"mouseover",F);let lt=()=>{Fe.trigger(this._element,this.constructor.eventName(Xp)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(lt,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Fe.trigger(this._element,this.constructor.eventName(Kp)).defaultPrevented)return;if(this._getTipElement().classList.remove(fl),"ontouchstart"in document.documentElement)for(let Ve of[].concat(...document.body.children))Fe.off(Ve,"mouseover",F);this._activeTrigger[ju]=!1,this._activeTrigger[Vu]=!1,this._activeTrigger[To]=!1,this._isHovered=null;let pe=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Fe.trigger(this._element,this.constructor.eventName(Er)))};this._queueCallback(pe,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(w){let K=this._getTemplateFactory(w).toHtml();if(!K)return null;K.classList.remove(Hu,fl),K.classList.add(`bs-${this.constructor.NAME}-auto`);let pe=c(this.constructor.NAME).toString();return K.setAttribute("id",pe),this._isAnimated()&&K.classList.add(Hu),K}setContent(w){this._newContent=w,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(w){return this._templateFactory?this._templateFactory.changeContent(w):this._templateFactory=new jp({...this._config,content:w,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[zp]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(w){return this.constructor.getOrCreateInstance(w.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Hu)}_isShown(){return this.tip&&this.tip.classList.contains(fl)}_createPopper(w){let K=re(this._config.placement,[this,w,this._element]),pe=gl[K.toUpperCase()];return t.createPopper(this._element,w,this._getPopperConfig(pe))}_getOffset(){let{offset:w}=this._config;return typeof w=="string"?w.split(",").map(K=>Number.parseInt(K,10)):typeof w=="function"?K=>w(K,this._element):w}_resolvePossibleFunction(w){return re(w,[this._element,this._element])}_getPopperConfig(w){let K={placement:w,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:pe=>{this._getTipElement().setAttribute("data-popper-placement",pe.state.placement)}}]};return{...K,...re(this._config.popperConfig,[void 0,K])}}_setListeners(){let w=this._config.trigger.split(" ");for(let K of w)if(K==="click")Fe.on(this._element,this.constructor.eventName(cT),this._config.selector,pe=>{let Ve=this._initializeOnDelegatedTarget(pe);Ve._activeTrigger[ju]=!(Ve._isShown()&&Ve._activeTrigger[ju]),Ve.toggle()});else if(K!==Wp){let pe=K===To?this.constructor.eventName(Pd):this.constructor.eventName(Rd),Ve=K===To?this.constructor.eventName(pl):this.constructor.eventName(Gu);Fe.on(this._element,pe,this._config.selector,ct=>{let lt=this._initializeOnDelegatedTarget(ct);lt._activeTrigger[ct.type==="focusin"?Vu:To]=!0,lt._enter()}),Fe.on(this._element,Ve,this._config.selector,ct=>{let lt=this._initializeOnDelegatedTarget(ct);lt._activeTrigger[ct.type==="focusout"?Vu:To]=lt._element.contains(ct.relatedTarget),lt._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Fe.on(this._element.closest(Ld),kd,this._hideModalHandler)}_fixTitle(){let w=this._element.getAttribute("title");!w||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",w),this._element.setAttribute("data-bs-original-title",w),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(w,K){clearTimeout(this._timeout),this._timeout=setTimeout(w,K)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(w){let K=pi.getDataAttributes(this._element);for(let pe of Object.keys(K))Uu.has(pe)&&delete K[pe];return w={...K,...typeof w=="object"&&w?w:{}},w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w.container=w.container===!1?document.body:v(w.container),typeof w.delay=="number"&&(w.delay={show:w.delay,hide:w.delay}),typeof w.title=="number"&&(w.title=w.title.toString()),typeof w.content=="number"&&(w.content=w.content.toString()),w}_getDelegateConfig(){let w={};for(let[K,pe]of Object.entries(this._config))this.constructor.Default[K]!==pe&&(w[K]=pe);return w.selector=!1,w.trigger="manual",w}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(w){return this.each(function(){let K=ea.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof K[w]>"u")throw new TypeError(`No method named "${w}"`);K[w]()}})}}Z(ea);let eg="popover",tg=".popover-header",qu=".popover-body",ig={...ea.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},sg={...ea.DefaultType,content:"(null|string|element|function)"};class _o extends ea{static get Default(){return ig}static get DefaultType(){return sg}static get NAME(){return eg}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[tg]:this._getTitle(),[qu]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(w){return this.each(function(){let K=_o.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof K[w]>"u")throw new TypeError(`No method named "${w}"`);K[w]()}})}}Z(_o);let Ia="scrollspy",nr=".bs.scrollspy",vs=".data-api",Bn=`activate${nr}`,Od=`click${nr}`,Md=`load${nr}${vs}`,ng="dropdown-item",Da="active",rg='[data-bs-spy="scroll"]',zu="[href]",ag=".nav, .list-group",Nd=".nav-link",f=`${Nd}, .nav-item > ${Nd}, .list-group-item`,y=".dropdown",_=".dropdown-toggle",S={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},L={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class N extends Lt{constructor(w,K){super(w,K),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return S}static get DefaultType(){return L}static get NAME(){return Ia}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let w of this._observableSections.values())this._observer.observe(w)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(w){return w.target=v(w.target)||document.body,w.rootMargin=w.offset?`${w.offset}px 0px -30%`:w.rootMargin,typeof w.threshold=="string"&&(w.threshold=w.threshold.split(",").map(K=>Number.parseFloat(K))),w}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(Fe.off(this._config.target,Od),Fe.on(this._config.target,Od,zu,w=>{let K=this._observableSections.get(w.target.hash);if(K){w.preventDefault();let pe=this._rootElement||window,Ve=K.offsetTop-this._element.offsetTop;if(pe.scrollTo){pe.scrollTo({top:Ve,behavior:"smooth"});return}pe.scrollTop=Ve}}))}_getNewObserver(){let w={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(K=>this._observerCallback(K),w)}_observerCallback(w){let K=lt=>this._targetLinks.get(`#${lt.target.id}`),pe=lt=>{this._previousScrollData.visibleEntryTop=lt.target.offsetTop,this._process(K(lt))},Ve=(this._rootElement||document.documentElement).scrollTop,ct=Ve>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Ve;for(let lt of w){if(!lt.isIntersecting){this._activeTarget=null,this._clearActiveClass(K(lt));continue}let Gt=lt.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ct&&Gt){if(pe(lt),!Ve)return;continue}!ct&&!Gt&&pe(lt)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let w=x.find(zu,this._config.target);for(let K of w){if(!K.hash||A(K))continue;let pe=x.findOne(decodeURI(K.hash),this._element);b(pe)&&(this._targetLinks.set(decodeURI(K.hash),K),this._observableSections.set(K.hash,pe))}}_process(w){this._activeTarget!==w&&(this._clearActiveClass(this._config.target),this._activeTarget=w,w.classList.add(Da),this._activateParents(w),Fe.trigger(this._element,Bn,{relatedTarget:w}))}_activateParents(w){if(w.classList.contains(ng)){x.findOne(_,w.closest(y)).classList.add(Da);return}for(let K of x.parents(w,ag))for(let pe of x.prev(K,f))pe.classList.add(Da)}_clearActiveClass(w){w.classList.remove(Da);let K=x.find(`${zu}.${Da}`,w);for(let pe of K)pe.classList.remove(Da)}static jQueryInterface(w){return this.each(function(){let K=N.getOrCreateInstance(this,w);if(typeof w=="string"){if(K[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);K[w]()}})}}Fe.on(window,Md,()=>{for(let fe of x.find(rg))N.getOrCreateInstance(fe)}),Z(N);let te="tab",ae=".bs.tab",ce=`hide${ae}`,Te=`hidden${ae}`,Oe=`show${ae}`,ut=`shown${ae}`,He=`click${ae}`,Dt=`keydown${ae}`,Ot=`load${ae}`,qi="ArrowLeft",Ss="ArrowRight",Sr="ArrowUp",La="ArrowDown",ta="Home",ka="End",En="active",bo="fade",ri="show",Eo="dropdown",tn=".dropdown-toggle",zC=".dropdown-menu",lg=`:not(${tn})`,WC='.list-group, .nav, [role="tablist"]',KC=".nav-item, .list-group-item",YC=`.nav-link${lg}, .list-group-item${lg}, [role="tab"]${lg}`,hT='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ug=`${YC}, ${hT}`,XC=`.${En}[data-bs-toggle="tab"], .${En}[data-bs-toggle="pill"], .${En}[data-bs-toggle="list"]`;class So extends Lt{constructor(w){super(w),this._parent=this._element.closest(WC),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Fe.on(this._element,Dt,K=>this._keydown(K)))}static get NAME(){return te}show(){let w=this._element;if(this._elemIsActive(w))return;let K=this._getActiveElem(),pe=K?Fe.trigger(K,ce,{relatedTarget:w}):null;Fe.trigger(w,Oe,{relatedTarget:K}).defaultPrevented||pe&&pe.defaultPrevented||(this._deactivate(K,w),this._activate(w,K))}_activate(w,K){if(!w)return;w.classList.add(En),this._activate(x.getElementFromSelector(w));let pe=()=>{if(w.getAttribute("role")!=="tab"){w.classList.add(ri);return}w.removeAttribute("tabindex"),w.setAttribute("aria-selected",!0),this._toggleDropDown(w,!0),Fe.trigger(w,ut,{relatedTarget:K})};this._queueCallback(pe,w,w.classList.contains(bo))}_deactivate(w,K){if(!w)return;w.classList.remove(En),w.blur(),this._deactivate(x.getElementFromSelector(w));let pe=()=>{if(w.getAttribute("role")!=="tab"){w.classList.remove(ri);return}w.setAttribute("aria-selected",!1),w.setAttribute("tabindex","-1"),this._toggleDropDown(w,!1),Fe.trigger(w,Te,{relatedTarget:K})};this._queueCallback(pe,w,w.classList.contains(bo))}_keydown(w){if(![qi,Ss,Sr,La,ta,ka].includes(w.key))return;w.stopPropagation(),w.preventDefault();let K=this._getChildren().filter(Ve=>!A(Ve)),pe;if([ta,ka].includes(w.key))pe=K[w.key===ta?0:K.length-1];else{let Ve=[Ss,La].includes(w.key);pe=ve(K,w.target,Ve,!0)}pe&&(pe.focus({preventScroll:!0}),So.getOrCreateInstance(pe).show())}_getChildren(){return x.find(ug,this._parent)}_getActiveElem(){return this._getChildren().find(w=>this._elemIsActive(w))||null}_setInitialAttributes(w,K){this._setAttributeIfNotExists(w,"role","tablist");for(let pe of K)this._setInitialAttributesOnChild(pe)}_setInitialAttributesOnChild(w){w=this._getInnerElement(w);let K=this._elemIsActive(w),pe=this._getOuterElement(w);w.setAttribute("aria-selected",K),pe!==w&&this._setAttributeIfNotExists(pe,"role","presentation"),K||w.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(w,"role","tab"),this._setInitialAttributesOnTargetPanel(w)}_setInitialAttributesOnTargetPanel(w){let K=x.getElementFromSelector(w);!K||(this._setAttributeIfNotExists(K,"role","tabpanel"),w.id&&this._setAttributeIfNotExists(K,"aria-labelledby",`${w.id}`))}_toggleDropDown(w,K){let pe=this._getOuterElement(w);if(!pe.classList.contains(Eo))return;let Ve=(ct,lt)=>{let Gt=x.findOne(ct,pe);Gt&&Gt.classList.toggle(lt,K)};Ve(tn,En),Ve(zC,ri),pe.setAttribute("aria-expanded",K)}_setAttributeIfNotExists(w,K,pe){w.hasAttribute(K)||w.setAttribute(K,pe)}_elemIsActive(w){return w.classList.contains(En)}_getInnerElement(w){return w.matches(ug)?w:x.findOne(ug,w)}_getOuterElement(w){return w.closest(KC)||w}static jQueryInterface(w){return this.each(function(){let K=So.getOrCreateInstance(this);if(typeof w=="string"){if(K[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);K[w]()}})}}Fe.on(document,He,hT,function(fe){["A","AREA"].includes(this.tagName)&&fe.preventDefault(),!A(this)&&So.getOrCreateInstance(this).show()}),Fe.on(window,Ot,()=>{for(let fe of x.find(XC))So.getOrCreateInstance(fe)}),Z(So);let QC="toast",Ra=".bs.toast",JC=`mouseover${Ra}`,ZC=`mouseout${Ra}`,ew=`focusin${Ra}`,tw=`focusout${Ra}`,iw=`hide${Ra}`,sw=`hidden${Ra}`,nw=`show${Ra}`,rw=`shown${Ra}`,aw="fade",fT="hide",Fd="show",$d="showing",ow={animation:"boolean",autohide:"boolean",delay:"number"},lw={animation:!0,autohide:!0,delay:5e3};class Wu extends Lt{constructor(w,K){super(w,K),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return lw}static get DefaultType(){return ow}static get NAME(){return QC}show(){if(Fe.trigger(this._element,nw).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(aw);let K=()=>{this._element.classList.remove($d),Fe.trigger(this._element,rw),this._maybeScheduleHide()};this._element.classList.remove(fT),O(this._element),this._element.classList.add(Fd,$d),this._queueCallback(K,this._element,this._config.animation)}hide(){if(!this.isShown()||Fe.trigger(this._element,iw).defaultPrevented)return;let K=()=>{this._element.classList.add(fT),this._element.classList.remove($d,Fd),Fe.trigger(this._element,sw)};this._element.classList.add($d),this._queueCallback(K,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Fd),super.dispose()}isShown(){return this._element.classList.contains(Fd)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(w,K){switch(w.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=K;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=K;break}}if(K){this._clearTimeout();return}let pe=w.relatedTarget;this._element===pe||this._element.contains(pe)||this._maybeScheduleHide()}_setListeners(){Fe.on(this._element,JC,w=>this._onInteraction(w,!0)),Fe.on(this._element,ZC,w=>this._onInteraction(w,!1)),Fe.on(this._element,ew,w=>this._onInteraction(w,!0)),Fe.on(this._element,tw,w=>this._onInteraction(w,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(w){return this.each(function(){let K=Wu.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof K[w]>"u")throw new TypeError(`No method named "${w}"`);K[w](this)}})}}return C(Wu),Z(Wu),{Alert:q,Button:De,Carousel:mr,Collapse:Mn,Dropdown:xe,Modal:ne,Offcanvas:bn,Popover:_o,ScrollSpy:N,Tab:So,Toast:Wu,Tooltip:ea}})});var Ng=gi((ZT,e_)=>{(function(s){"use strict";typeof define=="function"&&define.amd?define(["jquery"],s):typeof ZT<"u"?e_.exports=s(mg()):s(jQuery)})(function(s){"use strict";var e=window.Slick||{};e=function(){var t=0;function i(n,r){var a=this,o;a.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:s(n),appendDots:s(n),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(l,u){return s('<button type="button" />').text(u+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},s.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.focussed=!1,a.interrupted=!1,a.hidden="hidden",a.paused=!0,a.positionProp=null,a.respondTo=null,a.rowCount=1,a.shouldClick=!0,a.$slider=s(n),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.visibilityChange="visibilitychange",a.windowWidth=0,a.windowTimer=null,o=s(n).data("slick")||{},a.options=s.extend({},a.defaults,r,o),a.currentSlide=a.options.initialSlide,a.originalSettings=a.options,typeof document.mozHidden<"u"?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):typeof document.webkitHidden<"u"&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.autoPlay=s.proxy(a.autoPlay,a),a.autoPlayClear=s.proxy(a.autoPlayClear,a),a.autoPlayIterator=s.proxy(a.autoPlayIterator,a),a.changeSlide=s.proxy(a.changeSlide,a),a.clickHandler=s.proxy(a.clickHandler,a),a.selectHandler=s.proxy(a.selectHandler,a),a.setPosition=s.proxy(a.setPosition,a),a.swipeHandler=s.proxy(a.swipeHandler,a),a.dragHandler=s.proxy(a.dragHandler,a),a.keyHandler=s.proxy(a.keyHandler,a),a.instanceUid=t++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.registerBreakpoints(),a.init(!0)}return i}(),e.prototype.activateADA=function(){var t=this;t.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(t,i,n){var r=this;if(typeof i=="boolean")n=i,i=null;else if(i<0||i>=r.slideCount)return!1;r.unload(),typeof i=="number"?i===0&&r.$slides.length===0?s(t).appendTo(r.$slideTrack):n?s(t).insertBefore(r.$slides.eq(i)):s(t).insertAfter(r.$slides.eq(i)):n===!0?s(t).prependTo(r.$slideTrack):s(t).appendTo(r.$slideTrack),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slides.each(function(a,o){s(o).attr("data-slick-index",a)}),r.$slidesCache=r.$slides,r.reinit()},e.prototype.animateHeight=function(){var t=this;if(t.options.slidesToShow===1&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var i=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:i},t.options.speed)}},e.prototype.animateSlide=function(t,i){var n={},r=this;r.animateHeight(),r.options.rtl===!0&&r.options.vertical===!1&&(t=-t),r.transformsEnabled===!1?r.options.vertical===!1?r.$slideTrack.animate({left:t},r.options.speed,r.options.easing,i):r.$slideTrack.animate({top:t},r.options.speed,r.options.easing,i):r.cssTransitions===!1?(r.options.rtl===!0&&(r.currentLeft=-r.currentLeft),s({animStart:r.currentLeft}).animate({animStart:t},{duration:r.options.speed,easing:r.options.easing,step:function(a){a=Math.ceil(a),r.options.vertical===!1?(n[r.animType]="translate("+a+"px, 0px)",r.$slideTrack.css(n)):(n[r.animType]="translate(0px,"+a+"px)",r.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(r.applyTransition(),t=Math.ceil(t),r.options.vertical===!1?n[r.animType]="translate3d("+t+"px, 0px, 0px)":n[r.animType]="translate3d(0px,"+t+"px, 0px)",r.$slideTrack.css(n),i&&setTimeout(function(){r.disableTransition(),i.call()},r.options.speed))},e.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&i!==null&&(i=s(i).not(t.$slider)),i},e.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();n!==null&&typeof n=="object"&&n.each(function(){var r=s(this).slick("getSlick");r.unslicked||r.slideHandler(t,!0)})},e.prototype.applyTransition=function(t){var i=this,n={};i.options.fade===!1?n[i.transitionType]=i.transformType+" "+i.options.speed+"ms "+i.options.cssEase:n[i.transitionType]="opacity "+i.options.speed+"ms "+i.options.cssEase,i.options.fade===!1?i.$slideTrack.css(n):i.$slides.eq(t).css(n)},e.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this,i=t.currentSlide+t.options.slidesToScroll;!t.paused&&!t.interrupted&&!t.focussed&&(t.options.infinite===!1&&(t.direction===1&&t.currentSlide+1===t.slideCount-1?t.direction=0:t.direction===0&&(i=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1===0&&(t.direction=1))),t.slideHandler(i))},e.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=s(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=s(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var t=this,i,n;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){for(t.$slider.addClass("slick-dotted"),n=s("<ul />").addClass(t.options.dotsClass),i=0;i<=t.getDotCount();i+=1)n.append(s("<li />").append(t.options.customPaging.call(this,t,i)));t.$dots=n.appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(i,n){s(n).attr("data-slick-index",i).data("originalStyling",s(n).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=t.slideCount===0?s('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),s("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses(typeof t.currentSlide=="number"?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},e.prototype.buildRows=function(){var t=this,i,n,r,a,o,l,u;if(a=document.createDocumentFragment(),l=t.$slider.children(),t.options.rows>0){for(u=t.options.slidesPerRow*t.options.rows,o=Math.ceil(l.length/u),i=0;i<o;i++){var c=document.createElement("div");for(n=0;n<t.options.rows;n++){var h=document.createElement("div");for(r=0;r<t.options.slidesPerRow;r++){var g=i*u+(n*t.options.slidesPerRow+r);l.get(g)&&h.appendChild(l.get(g))}c.appendChild(h)}a.appendChild(c)}t.$slider.empty().append(a),t.$slider.children().children().children().css({width:100/t.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(t,i){var n=this,r,a,o,l=!1,u=n.$slider.width(),c=window.innerWidth||s(window).width();if(n.respondTo==="window"?o=c:n.respondTo==="slider"?o=u:n.respondTo==="min"&&(o=Math.min(c,u)),n.options.responsive&&n.options.responsive.length&&n.options.responsive!==null){a=null;for(r in n.breakpoints)n.breakpoints.hasOwnProperty(r)&&(n.originalSettings.mobileFirst===!1?o<n.breakpoints[r]&&(a=n.breakpoints[r]):o>n.breakpoints[r]&&(a=n.breakpoints[r]));a!==null?n.activeBreakpoint!==null?(a!==n.activeBreakpoint||i)&&(n.activeBreakpoint=a,n.breakpointSettings[a]==="unslick"?n.unslick(a):(n.options=s.extend({},n.originalSettings,n.breakpointSettings[a]),t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh(t)),l=a):(n.activeBreakpoint=a,n.breakpointSettings[a]==="unslick"?n.unslick(a):(n.options=s.extend({},n.originalSettings,n.breakpointSettings[a]),t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh(t)),l=a):n.activeBreakpoint!==null&&(n.activeBreakpoint=null,n.options=n.originalSettings,t===!0&&(n.currentSlide=n.options.initialSlide),n.refresh(t),l=a),!t&&l!==!1&&n.$slider.trigger("breakpoint",[n,l])}},e.prototype.changeSlide=function(t,i){var n=this,r=s(t.currentTarget),a,o,l;switch(r.is("a")&&t.preventDefault(),r.is("li")||(r=r.closest("li")),l=n.slideCount%n.options.slidesToScroll!==0,a=l?0:(n.slideCount-n.currentSlide)%n.options.slidesToScroll,t.data.message){case"previous":o=a===0?n.options.slidesToScroll:n.options.slidesToShow-a,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide-o,!1,i);break;case"next":o=a===0?n.options.slidesToScroll:a,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide+o,!1,i);break;case"index":var u=t.data.index===0?0:t.data.index||r.index()*n.options.slidesToScroll;n.slideHandler(n.checkNavigable(u),!1,i),r.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(t){var i=this,n,r;if(n=i.getNavigableIndexes(),r=0,t>n[n.length-1])t=n[n.length-1];else for(var a in n){if(t<n[a]){t=r;break}r=n[a]}return t},e.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&t.$dots!==null&&(s("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",s.proxy(t.interrupt,t,!0)).off("mouseleave.slick",s.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),s(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&s(t.$slideTrack).children().off("click.slick",t.selectHandler),s(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),s(window).off("resize.slick.slick-"+t.instanceUid,t.resize),s("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),s(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},e.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",s.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",s.proxy(t.interrupt,t,!1))},e.prototype.cleanUpRows=function(){var t=this,i;t.options.rows>0&&(i=t.$slides.children().children(),i.removeAttr("style"),t.$slider.empty().append(i))},e.prototype.clickHandler=function(t){var i=this;i.shouldClick===!1&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},e.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),s(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){s(this).attr("style",s(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},e.prototype.disableTransition=function(t){var i=this,n={};n[i.transitionType]="",i.options.fade===!1?i.$slideTrack.css(n):i.$slides.eq(t).css(n)},e.prototype.fadeSlide=function(t,i){var n=this;n.cssTransitions===!1?(n.$slides.eq(t).css({zIndex:n.options.zIndex}),n.$slides.eq(t).animate({opacity:1},n.options.speed,n.options.easing,i)):(n.applyTransition(t),n.$slides.eq(t).css({opacity:1,zIndex:n.options.zIndex}),i&&setTimeout(function(){n.disableTransition(t),i.call()},n.options.speed))},e.prototype.fadeSlideOut=function(t){var i=this;i.cssTransitions===!1?i.$slides.eq(t).animate({opacity:0,zIndex:i.options.zIndex-2},i.options.speed,i.options.easing):(i.applyTransition(t),i.$slides.eq(t).css({opacity:0,zIndex:i.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(t){var i=this;t!==null&&(i.$slidesCache=i.$slides,i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.filter(t).appendTo(i.$slideTrack),i.reinit())},e.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=s(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var t=this;return t.currentSlide},e.prototype.getDotCount=function(){var t=this,i=0,n=0,r=0;if(t.options.infinite===!0)if(t.slideCount<=t.options.slidesToShow)++r;else for(;i<t.slideCount;)++r,i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(t.options.centerMode===!0)r=t.slideCount;else if(!t.options.asNavFor)r=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);else for(;i<t.slideCount;)++r,i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return r-1},e.prototype.getLeft=function(t){var i=this,n,r,a=0,o,l;return i.slideOffset=0,r=i.$slides.first().outerHeight(!0),i.options.infinite===!0?(i.slideCount>i.options.slidesToShow&&(i.slideOffset=i.slideWidth*i.options.slidesToShow*-1,l=-1,i.options.vertical===!0&&i.options.centerMode===!0&&(i.options.slidesToShow===2?l=-1.5:i.options.slidesToShow===1&&(l=-2)),a=r*i.options.slidesToShow*l),i.slideCount%i.options.slidesToScroll!==0&&t+i.options.slidesToScroll>i.slideCount&&i.slideCount>i.options.slidesToShow&&(t>i.slideCount?(i.slideOffset=(i.options.slidesToShow-(t-i.slideCount))*i.slideWidth*-1,a=(i.options.slidesToShow-(t-i.slideCount))*r*-1):(i.slideOffset=i.slideCount%i.options.slidesToScroll*i.slideWidth*-1,a=i.slideCount%i.options.slidesToScroll*r*-1))):t+i.options.slidesToShow>i.slideCount&&(i.slideOffset=(t+i.options.slidesToShow-i.slideCount)*i.slideWidth,a=(t+i.options.slidesToShow-i.slideCount)*r),i.slideCount<=i.options.slidesToShow&&(i.slideOffset=0,a=0),i.options.centerMode===!0&&i.slideCount<=i.options.slidesToShow?i.slideOffset=i.slideWidth*Math.floor(i.options.slidesToShow)/2-i.slideWidth*i.slideCount/2:i.options.centerMode===!0&&i.options.infinite===!0?i.slideOffset+=i.slideWidth*Math.floor(i.options.slidesToShow/2)-i.slideWidth:i.options.centerMode===!0&&(i.slideOffset=0,i.slideOffset+=i.slideWidth*Math.floor(i.options.slidesToShow/2)),i.options.vertical===!1?n=t*i.slideWidth*-1+i.slideOffset:n=t*r*-1+a,i.options.variableWidth===!0&&(i.slideCount<=i.options.slidesToShow||i.options.infinite===!1?o=i.$slideTrack.children(".slick-slide").eq(t):o=i.$slideTrack.children(".slick-slide").eq(t+i.options.slidesToShow),i.options.rtl===!0?o[0]?n=(i.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:n=0:n=o[0]?o[0].offsetLeft*-1:0,i.options.centerMode===!0&&(i.slideCount<=i.options.slidesToShow||i.options.infinite===!1?o=i.$slideTrack.children(".slick-slide").eq(t):o=i.$slideTrack.children(".slick-slide").eq(t+i.options.slidesToShow+1),i.options.rtl===!0?o[0]?n=(i.$slideTrack.width()-o[0].offsetLeft-o.width())*-1:n=0:n=o[0]?o[0].offsetLeft*-1:0,n+=(i.$list.width()-o.outerWidth())/2)),n},e.prototype.getOption=e.prototype.slickGetOption=function(t){var i=this;return i.options[t]},e.prototype.getNavigableIndexes=function(){var t=this,i=0,n=0,r=[],a;for(t.options.infinite===!1?a=t.slideCount:(i=t.options.slidesToScroll*-1,n=t.options.slidesToScroll*-1,a=t.slideCount*2);i<a;)r.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return r},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var t=this,i,n,r;return r=t.options.centerMode===!0?t.slideWidth*Math.floor(t.options.slidesToShow/2):0,t.options.swipeToSlide===!0?(t.$slideTrack.find(".slick-slide").each(function(a,o){if(o.offsetLeft-r+s(o).outerWidth()/2>t.swipeLeft*-1)return n=o,!1}),i=Math.abs(s(n).attr("data-slick-index")-t.currentSlide)||1,i):t.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(t,i){var n=this;n.changeSlide({data:{message:"index",index:parseInt(t)}},i)},e.prototype.init=function(t){var i=this;s(i.$slider).hasClass("slick-initialized")||(s(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},e.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(o){return o>=0&&o<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$dots!==null&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(o){var l=n.indexOf(o);if(s(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+o,tabindex:-1}),l!==-1){var u="slick-slide-control"+t.instanceUid+l;s("#"+u).length&&s(this).attr({"aria-describedby":u})}}),t.$dots.attr("role","tablist").find("li").each(function(o){var l=n[o];s(this).attr({role:"presentation"}),s(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+o,"aria-controls":"slick-slide"+t.instanceUid+l,"aria-label":o+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var r=t.currentSlide,a=r+t.options.slidesToShow;r<a;r++)t.options.focusOnChange?t.$slides.eq(r).attr({tabindex:"0"}):t.$slides.eq(r).removeAttr("tabindex");t.activateADA()},e.prototype.initArrowEvents=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},e.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&(s("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler)),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.slideCount>t.options.slidesToShow&&s("li",t.$dots).on("mouseenter.slick",s.proxy(t.interrupt,t,!0)).on("mouseleave.slick",s.proxy(t.interrupt,t,!1))},e.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",s.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",s.proxy(t.interrupt,t,!1)))},e.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),s(document).on(t.visibilityChange,s.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&s(t.$slideTrack).children().on("click.slick",t.selectHandler),s(window).on("orientationchange.slick.slick-"+t.instanceUid,s.proxy(t.orientationChange,t)),s(window).on("resize.slick.slick-"+t.instanceUid,s.proxy(t.resize,t)),s("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),s(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),s(t.setPosition)},e.prototype.initUI=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},e.prototype.keyHandler=function(t){var i=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(t.keyCode===37&&i.options.accessibility===!0?i.changeSlide({data:{message:i.options.rtl===!0?"next":"previous"}}):t.keyCode===39&&i.options.accessibility===!0&&i.changeSlide({data:{message:i.options.rtl===!0?"previous":"next"}}))},e.prototype.lazyLoad=function(){var t=this,i,n,r,a;function o(g){s("img[data-lazy]",g).each(function(){var m=s(this),v=s(this).attr("data-lazy"),b=s(this).attr("data-srcset"),A=s(this).attr("data-sizes")||t.$slider.attr("data-sizes"),R=document.createElement("img");R.onload=function(){m.animate({opacity:0},100,function(){b&&(m.attr("srcset",b),A&&m.attr("sizes",A)),m.attr("src",v).animate({opacity:1},200,function(){m.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),t.$slider.trigger("lazyLoaded",[t,m,v])})},R.onerror=function(){m.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),t.$slider.trigger("lazyLoadError",[t,m,v])},R.src=v})}if(t.options.centerMode===!0?t.options.infinite===!0?(r=t.currentSlide+(t.options.slidesToShow/2+1),a=r+t.options.slidesToShow+2):(r=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),a=2+(t.options.slidesToShow/2+1)+t.currentSlide):(r=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,a=Math.ceil(r+t.options.slidesToShow),t.options.fade===!0&&(r>0&&r--,a<=t.slideCount&&a++)),i=t.$slider.find(".slick-slide").slice(r,a),t.options.lazyLoad==="anticipated")for(var l=r-1,u=a,c=t.$slider.find(".slick-slide"),h=0;h<t.options.slidesToScroll;h++)l<0&&(l=t.slideCount-1),i=i.add(c.eq(l)),i=i.add(c.eq(u)),l--,u++;o(i),t.slideCount<=t.options.slidesToShow?(n=t.$slider.find(".slick-slide"),o(n)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(n=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),o(n)):t.currentSlide===0&&(n=t.$slider.find(".slick-cloned").slice(t.options.slidesToShow*-1),o(n))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),t.options.lazyLoad==="progressive"&&t.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var t=this;t.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var t=this;t.checkResponsive(),t.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var t=this;t.autoPlayClear(),t.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},e.prototype.postSlide=function(t){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))){var n=s(i.$slides.get(i.currentSlide));n.attr("tabindex",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var t=this;t.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(t){t.preventDefault()},e.prototype.progressiveLazyLoad=function(t){t=t||1;var i=this,n=s("img[data-lazy]",i.$slider),r,a,o,l,u;n.length?(r=n.first(),a=r.attr("data-lazy"),o=r.attr("data-srcset"),l=r.attr("data-sizes")||i.$slider.attr("data-sizes"),u=document.createElement("img"),u.onload=function(){o&&(r.attr("srcset",o),l&&r.attr("sizes",l)),r.attr("src",a).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),i.options.adaptiveHeight===!0&&i.setPosition(),i.$slider.trigger("lazyLoaded",[i,r,a]),i.progressiveLazyLoad()},u.onerror=function(){t<3?setTimeout(function(){i.progressiveLazyLoad(t+1)},500):(r.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),i.$slider.trigger("lazyLoadError",[i,r,a]),i.progressiveLazyLoad())},u.src=a):i.$slider.trigger("allImagesLoaded",[i])},e.prototype.refresh=function(t){var i=this,n,r;r=i.slideCount-i.options.slidesToShow,!i.options.infinite&&i.currentSlide>r&&(i.currentSlide=r),i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0),n=i.currentSlide,i.destroy(!0),s.extend(i,i.initials,{currentSlide:n}),i.init(),t||i.changeSlide({data:{message:"index",index:n}},!1)},e.prototype.registerBreakpoints=function(){var t=this,i,n,r,a=t.options.responsive||null;if(s.type(a)==="array"&&a.length){t.respondTo=t.options.respondTo||"window";for(i in a)if(r=t.breakpoints.length-1,a.hasOwnProperty(i)){for(n=a[i].breakpoint;r>=0;)t.breakpoints[r]&&t.breakpoints[r]===n&&t.breakpoints.splice(r,1),r--;t.breakpoints.push(n),t.breakpointSettings[n]=a[i].settings}t.breakpoints.sort(function(o,l){return t.options.mobileFirst?o-l:l-o})}},e.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&t.currentSlide!==0&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&s(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(typeof t.currentSlide=="number"?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},e.prototype.resize=function(){var t=this;s(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=s(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(t,i,n){var r=this;if(typeof t=="boolean"?(i=t,t=i===!0?0:r.slideCount-1):t=i===!0?--t:t,r.slideCount<1||t<0||t>r.slideCount-1)return!1;r.unload(),n===!0?r.$slideTrack.children().remove():r.$slideTrack.children(this.options.slide).eq(t).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,r.reinit()},e.prototype.setCSS=function(t){var i=this,n={},r,a;i.options.rtl===!0&&(t=-t),r=i.positionProp=="left"?Math.ceil(t)+"px":"0px",a=i.positionProp=="top"?Math.ceil(t)+"px":"0px",n[i.positionProp]=t,i.transformsEnabled===!1?i.$slideTrack.css(n):(n={},i.cssTransitions===!1?(n[i.animType]="translate("+r+", "+a+")",i.$slideTrack.css(n)):(n[i.animType]="translate3d("+r+", "+a+", 0px)",i.$slideTrack.css(n)))},e.prototype.setDimensions=function(){var t=this;t.options.vertical===!1?t.options.centerMode===!0&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),t.options.centerMode===!0&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.options.vertical===!1&&t.options.variableWidth===!1?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):t.options.variableWidth===!0?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var i=t.$slides.first().outerWidth(!0)-t.$slides.first().width();t.options.variableWidth===!1&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-i)},e.prototype.setFade=function(){var t=this,i;t.$slides.each(function(n,r){i=t.slideWidth*n*-1,t.options.rtl===!0?s(r).css({position:"relative",right:i,top:0,zIndex:t.options.zIndex-2,opacity:0}):s(r).css({position:"relative",left:i,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var t=this;if(t.options.slidesToShow===1&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var i=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",i)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var t=this,i,n,r,a,o=!1,l;if(s.type(arguments[0])==="object"?(r=arguments[0],o=arguments[1],l="multiple"):s.type(arguments[0])==="string"&&(r=arguments[0],a=arguments[1],o=arguments[2],arguments[0]==="responsive"&&s.type(arguments[1])==="array"?l="responsive":typeof arguments[1]<"u"&&(l="single")),l==="single")t.options[r]=a;else if(l==="multiple")s.each(r,function(u,c){t.options[u]=c});else if(l==="responsive")for(n in a)if(s.type(t.options.responsive)!=="array")t.options.responsive=[a[n]];else{for(i=t.options.responsive.length-1;i>=0;)t.options.responsive[i].breakpoint===a[n].breakpoint&&t.options.responsive.splice(i,1),i--;t.options.responsive.push(a[n])}o&&(t.unload(),t.reinit())},e.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),t.options.fade===!1?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},e.prototype.setProps=function(){var t=this,i=document.body.style;t.positionProp=t.options.vertical===!0?"top":"left",t.positionProp==="top"?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),(i.WebkitTransition!==void 0||i.MozTransition!==void 0||i.msTransition!==void 0)&&t.options.useCSS===!0&&(t.cssTransitions=!0),t.options.fade&&(typeof t.options.zIndex=="number"?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),i.OTransform!==void 0&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",i.perspectiveProperty===void 0&&i.webkitPerspective===void 0&&(t.animType=!1)),i.MozTransform!==void 0&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",i.perspectiveProperty===void 0&&i.MozPerspective===void 0&&(t.animType=!1)),i.webkitTransform!==void 0&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",i.perspectiveProperty===void 0&&i.webkitPerspective===void 0&&(t.animType=!1)),i.msTransform!==void 0&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",i.msTransform===void 0&&(t.animType=!1)),i.transform!==void 0&&t.animType!==!1&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&t.animType!==null&&t.animType!==!1},e.prototype.setSlideClasses=function(t){var i=this,n,r,a,o;if(r=i.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),i.$slides.eq(t).addClass("slick-current"),i.options.centerMode===!0){var l=i.options.slidesToShow%2===0?1:0;n=Math.floor(i.options.slidesToShow/2),i.options.infinite===!0&&(t>=n&&t<=i.slideCount-1-n?i.$slides.slice(t-n+l,t+n+1).addClass("slick-active").attr("aria-hidden","false"):(a=i.options.slidesToShow+t,r.slice(a-n+1+l,a+n+2).addClass("slick-active").attr("aria-hidden","false")),t===0?r.eq(r.length-1-i.options.slidesToShow).addClass("slick-center"):t===i.slideCount-1&&r.eq(i.options.slidesToShow).addClass("slick-center")),i.$slides.eq(t).addClass("slick-center")}else t>=0&&t<=i.slideCount-i.options.slidesToShow?i.$slides.slice(t,t+i.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):r.length<=i.options.slidesToShow?r.addClass("slick-active").attr("aria-hidden","false"):(o=i.slideCount%i.options.slidesToShow,a=i.options.infinite===!0?i.options.slidesToShow+t:t,i.options.slidesToShow==i.options.slidesToScroll&&i.slideCount-t<i.options.slidesToShow?r.slice(a-(i.options.slidesToShow-o),a+o).addClass("slick-active").attr("aria-hidden","false"):r.slice(a,a+i.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));(i.options.lazyLoad==="ondemand"||i.options.lazyLoad==="anticipated")&&i.lazyLoad()},e.prototype.setupInfinite=function(){var t=this,i,n,r;if(t.options.fade===!0&&(t.options.centerMode=!1),t.options.infinite===!0&&t.options.fade===!1&&(n=null,t.slideCount>t.options.slidesToShow)){for(t.options.centerMode===!0?r=t.options.slidesToShow+1:r=t.options.slidesToShow,i=t.slideCount;i>t.slideCount-r;i-=1)n=i-1,s(t.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(i=0;i<r+t.slideCount;i+=1)n=i,s(t.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){s(this).attr("id","")})}},e.prototype.interrupt=function(t){var i=this;t||i.autoPlay(),i.interrupted=t},e.prototype.selectHandler=function(t){var i=this,n=s(t.target).is(".slick-slide")?s(t.target):s(t.target).parents(".slick-slide"),r=parseInt(n.attr("data-slick-index"));if(r||(r=0),i.slideCount<=i.options.slidesToShow){i.slideHandler(r,!1,!0);return}i.slideHandler(r)},e.prototype.slideHandler=function(t,i,n){var r,a,o,l,u=null,c=this,h;if(i=i||!1,!(c.animating===!0&&c.options.waitForAnimate===!0)&&!(c.options.fade===!0&&c.currentSlide===t)){if(i===!1&&c.asNavFor(t),r=t,u=c.getLeft(r),l=c.getLeft(c.currentSlide),c.currentLeft=c.swipeLeft===null?l:c.swipeLeft,c.options.infinite===!1&&c.options.centerMode===!1&&(t<0||t>c.getDotCount()*c.options.slidesToScroll)){c.options.fade===!1&&(r=c.currentSlide,n!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(l,function(){c.postSlide(r)}):c.postSlide(r));return}else if(c.options.infinite===!1&&c.options.centerMode===!0&&(t<0||t>c.slideCount-c.options.slidesToScroll)){c.options.fade===!1&&(r=c.currentSlide,n!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(l,function(){c.postSlide(r)}):c.postSlide(r));return}if(c.options.autoplay&&clearInterval(c.autoPlayTimer),r<0?c.slideCount%c.options.slidesToScroll!==0?a=c.slideCount-c.slideCount%c.options.slidesToScroll:a=c.slideCount+r:r>=c.slideCount?c.slideCount%c.options.slidesToScroll!==0?a=0:a=r-c.slideCount:a=r,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,a]),o=c.currentSlide,c.currentSlide=a,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(h=c.getNavTarget(),h=h.slick("getSlick"),h.slideCount<=h.options.slidesToShow&&h.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),c.options.fade===!0){n!==!0?(c.fadeSlideOut(o),c.fadeSlide(a,function(){c.postSlide(a)})):c.postSlide(a),c.animateHeight();return}n!==!0&&c.slideCount>c.options.slidesToShow?c.animateSlide(u,function(){c.postSlide(a)}):c.postSlide(a)}},e.prototype.startLoad=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,i,n,r,a=this;return t=a.touchObject.startX-a.touchObject.curX,i=a.touchObject.startY-a.touchObject.curY,n=Math.atan2(i,t),r=Math.round(n*180/Math.PI),r<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?a.options.rtl===!1?"left":"right":r>=135&&r<=225?a.options.rtl===!1?"right":"left":a.options.verticalSwiping===!0?r>=35&&r<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(t){var i=this,n,r;if(i.dragging=!1,i.swiping=!1,i.scrolling)return i.scrolling=!1,!1;if(i.interrupted=!1,i.shouldClick=!(i.touchObject.swipeLength>10),i.touchObject.curX===void 0)return!1;if(i.touchObject.edgeHit===!0&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe){switch(r=i.swipeDirection(),r){case"left":case"down":n=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.currentDirection=0;break;case"right":case"up":n=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.currentDirection=1;break;default:}r!="vertical"&&(i.slideHandler(n),i.touchObject={},i.$slider.trigger("swipe",[i,r]))}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},e.prototype.swipeHandler=function(t){var i=this;if(!(i.options.swipe===!1||"ontouchend"in document&&i.options.swipe===!1)&&!(i.options.draggable===!1&&t.type.indexOf("mouse")!==-1))switch(i.touchObject.fingerCount=t.originalEvent&&t.originalEvent.touches!==void 0?t.originalEvent.touches.length:1,i.touchObject.minSwipe=i.listWidth/i.options.touchThreshold,i.options.verticalSwiping===!0&&(i.touchObject.minSwipe=i.listHeight/i.options.touchThreshold),t.data.action){case"start":i.swipeStart(t);break;case"move":i.swipeMove(t);break;case"end":i.swipeEnd(t);break}},e.prototype.swipeMove=function(t){var i=this,n=!1,r,a,o,l,u,c;if(u=t.originalEvent!==void 0?t.originalEvent.touches:null,!i.dragging||i.scrolling||u&&u.length!==1)return!1;if(r=i.getLeft(i.currentSlide),i.touchObject.curX=u!==void 0?u[0].pageX:t.clientX,i.touchObject.curY=u!==void 0?u[0].pageY:t.clientY,i.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(i.touchObject.curX-i.touchObject.startX,2))),c=Math.round(Math.sqrt(Math.pow(i.touchObject.curY-i.touchObject.startY,2))),!i.options.verticalSwiping&&!i.swiping&&c>4)return i.scrolling=!0,!1;if(i.options.verticalSwiping===!0&&(i.touchObject.swipeLength=c),a=i.swipeDirection(),t.originalEvent!==void 0&&i.touchObject.swipeLength>4&&(i.swiping=!0,t.preventDefault()),l=(i.options.rtl===!1?1:-1)*(i.touchObject.curX>i.touchObject.startX?1:-1),i.options.verticalSwiping===!0&&(l=i.touchObject.curY>i.touchObject.startY?1:-1),o=i.touchObject.swipeLength,i.touchObject.edgeHit=!1,i.options.infinite===!1&&(i.currentSlide===0&&a==="right"||i.currentSlide>=i.getDotCount()&&a==="left")&&(o=i.touchObject.swipeLength*i.options.edgeFriction,i.touchObject.edgeHit=!0),i.options.vertical===!1?i.swipeLeft=r+o*l:i.swipeLeft=r+o*(i.$list.height()/i.listWidth)*l,i.options.verticalSwiping===!0&&(i.swipeLeft=r+o*l),i.options.fade===!0||i.options.touchMove===!1)return!1;if(i.animating===!0)return i.swipeLeft=null,!1;i.setCSS(i.swipeLeft)},e.prototype.swipeStart=function(t){var i=this,n;if(i.interrupted=!0,i.touchObject.fingerCount!==1||i.slideCount<=i.options.slidesToShow)return i.touchObject={},!1;t.originalEvent!==void 0&&t.originalEvent.touches!==void 0&&(n=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=n!==void 0?n.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=n!==void 0?n.pageY:t.clientY,i.dragging=!0},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var t=this;t.$slidesCache!==null&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var t=this;s(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(t){var i=this;i.$slider.trigger("unslick",[i,t]),i.destroy()},e.prototype.updateArrows=function(){var t=this,i;i=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.currentSlide===0?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1||t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0)&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var t=this;t.$dots!==null&&(t.$dots.find("li").removeClass("slick-active").end(),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var t=this;t.options.autoplay&&(document[t.hidden]?t.interrupted=!0:t.interrupted=!1)},s.fn.slick=function(){var t=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1),r=t.length,a,o;for(a=0;a<r;a++)if(typeof i=="object"||typeof i>"u"?t[a].slick=new e(t[a],i):o=t[a].slick[i].apply(t[a].slick,n),typeof o<"u")return o;return t}})});var wr=gi((LU,u_)=>{var ec;typeof window<"u"?ec=window:typeof global<"u"?ec=global:typeof self<"u"?ec=self:ec={};u_.exports=ec});var c_=gi(()=>{});var Kd=gi((PU,h_)=>{var d_=typeof global<"u"?global:typeof window<"u"?window:{},PI=c_(),tc;typeof document<"u"?tc=document:(tc=d_["__GLOBAL_DOCUMENT_CACHE@4"],tc||(tc=d_["__GLOBAL_DOCUMENT_CACHE@4"]=PI));h_.exports=tc});var f_=gi((OU,sa)=>{function $g(){return sa.exports=$g=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},sa.exports.__esModule=!0,sa.exports.default=sa.exports,$g.apply(null,arguments)}sa.exports=$g,sa.exports.__esModule=!0,sa.exports.default=sa.exports});var g_=gi((MU,p_)=>{p_.exports=MI;var OI=Object.prototype.toString;function MI(s){if(!s)return!1;var e=OI.call(s);return e==="[object Function]"||typeof s=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(s===window.setTimeout||s===window.alert||s===window.confirm||s===window.prompt)}});var v_=gi((NU,y_)=>{"use strict";function NI(s,e){var t=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(t)return(t=t.call(s)).next.bind(t);if(Array.isArray(s)||(t=FI(s))||e&&s&&typeof s.length=="number"){t&&(s=t);var i=0;return function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FI(s,e){if(!!s){if(typeof s=="string")return m_(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m_(s,e)}}function m_(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}var $I=function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=s.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(i,n){this.typeToInterceptorsMap_.has(i)||this.typeToInterceptorsMap_.set(i,new Set);var r=this.typeToInterceptorsMap_.get(i);return r.has(n)?!1:(r.add(n),!0)},e.removeInterceptor=function(i,n){var r=this.typeToInterceptorsMap_.get(i);return r&&r.has(n)?(r.delete(n),!0):!1},e.clearInterceptorsByType=function(i){var n=this.typeToInterceptorsMap_.get(i);return n?(this.typeToInterceptorsMap_.delete(i),this.typeToInterceptorsMap_.set(i,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(i){return this.typeToInterceptorsMap_.get(i)||new Set},e.execute=function(i,n){for(var r=this.getForType(i),a=NI(r),o;!(o=a()).done;){var l=o.value;try{n=l(n)}catch{}}return n},s}();y_.exports=$I});var __=gi((FU,T_)=>{"use strict";var BI=function(){function s(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=s.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(i){this.maxAttempts_=i},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(i){this.delayFactor_=i},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(i){this.fuzzFactor_=i},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(i){this.initialDelay_=i},e.createRetry=function(i){var n=i===void 0?{}:i,r=n.maxAttempts,a=n.delayFactor,o=n.fuzzFactor,l=n.initialDelay;return new UI({maxAttempts:r||this.maxAttempts_,delayFactor:a||this.delayFactor_,fuzzFactor:o||this.fuzzFactor_,initialDelay:l||this.initialDelay_})},s}(),UI=function(){function s(t){this.maxAttempts_=t.maxAttempts,this.delayFactor_=t.delayFactor,this.fuzzFactor_=t.fuzzFactor,this.currentDelay_=t.initialDelay,this.currentAttempt_=1}var e=s.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var i=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+i},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var i=this.getCurrentMinPossibleDelay(),n=this.getCurrentMaxPossibleDelay();return i+Math.random()*(n-i)},s}();T_.exports=BI});var E_=gi(($U,b_)=>{"use strict";var HI=wr(),VI=function(e,t){return t===void 0&&(t=!1),function(i,n,r){if(i){e(i);return}if(n.statusCode>=400&&n.statusCode<=599){var a=r;if(t)if(HI.TextDecoder){var o=jI(n.headers&&n.headers["content-type"]);try{a=new TextDecoder(o).decode(r)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:a});return}e(null,r)}};function jI(s){return s===void 0&&(s=""),s.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),n=i[0],r=i[1];return n.trim()==="charset"?r.trim():e},"utf-8")}b_.exports=VI});var C_=gi((BU,Ug)=>{"use strict";var S_=wr(),GI=f_(),qI=g_(),x_=v_(),zI=__();$i.httpHandler=E_();$i.requestInterceptorsStorage=new x_;$i.responseInterceptorsStorage=new x_;$i.retryManager=new zI;var WI=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(i){var n=i.indexOf(":"),r=i.slice(0,n).trim().toLowerCase(),a=i.slice(n+1).trim();typeof t[r]>"u"?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]}),t};Ug.exports=$i;Ug.exports.default=$i;$i.XMLHttpRequest=S_.XMLHttpRequest||QI;$i.XDomainRequest="withCredentials"in new $i.XMLHttpRequest?$i.XMLHttpRequest:S_.XDomainRequest;KI(["get","put","post","patch","head","delete"],function(s){$i[s==="delete"?"del":s]=function(e,t,i){return t=A_(e,t,i),t.method=s.toUpperCase(),Bg(t)}});function KI(s,e){for(var t=0;t<s.length;t++)e(s[t])}function YI(s){for(var e in s)if(s.hasOwnProperty(e))return!1;return!0}function A_(s,e,t){var i=s;return qI(e)?(t=e,typeof s=="string"&&(i={uri:s})):i=GI({},e,{uri:s}),i.callback=t,i}function $i(s,e,t){return e=A_(s,e,t),Bg(e)}function Bg(s){if(typeof s.callback>"u")throw new Error("callback argument missing");if(s.requestType&&$i.requestInterceptorsStorage.getIsEnabled()){var e={uri:s.uri||s.url,headers:s.headers||{},body:s.body,metadata:s.metadata||{},retry:s.retry,timeout:s.timeout},t=$i.requestInterceptorsStorage.execute(s.requestType,e);s.uri=t.uri,s.headers=t.headers,s.body=t.body,s.metadata=t.metadata,s.retry=t.retry,s.timeout=t.timeout}var i=!1,n=function(W,E,X){i||(i=!0,s.callback(W,E,X))};function r(){u.readyState===4&&!$i.responseInterceptorsStorage.getIsEnabled()&&setTimeout(l,0)}function a(){var H=void 0;if(u.response?H=u.response:H=u.responseText||XI(u),R)try{H=JSON.parse(H)}catch{}return H}function o(H){if(clearTimeout(F),clearTimeout(s.retryTimeout),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,!h&&$i.retryManager.getIsEnabled()&&s.retry&&s.retry.shouldRetry()){s.retryTimeout=setTimeout(function(){s.retry.moveToNextAttempt(),s.xhr=u,Bg(s)},s.retry.getCurrentFuzzedDelay());return}if(s.requestType&&$i.responseInterceptorsStorage.getIsEnabled()){var W={headers:O.headers||{},body:O.body,responseUrl:u.responseURL,responseType:u.responseType},E=$i.responseInterceptorsStorage.execute(s.requestType,W);O.body=E.body,O.headers=E.headers}return n(H,O)}function l(){if(!h){var H;clearTimeout(F),clearTimeout(s.retryTimeout),s.useXDR&&u.status===void 0?H=200:H=u.status===1223?204:u.status;var W=O,E=null;if(H!==0?(W={body:a(),statusCode:H,method:m,headers:{},url:g,rawRequest:u},u.getAllResponseHeaders&&(W.headers=WI(u.getAllResponseHeaders()))):E=new Error("Internal XMLHttpRequest Error"),s.requestType&&$i.responseInterceptorsStorage.getIsEnabled()){var X={headers:W.headers||{},body:W.body,responseUrl:u.responseURL,responseType:u.responseType},Z=$i.responseInterceptorsStorage.execute(s.requestType,X);W.body=Z.body,W.headers=Z.headers}return n(E,W,W.body)}}var u=s.xhr||null;u||(s.cors||s.useXDR?u=new $i.XDomainRequest:u=new $i.XMLHttpRequest);var c,h,g=u.url=s.uri||s.url,m=u.method=s.method||"GET",v=s.body||s.data,b=u.headers=s.headers||{},A=!!s.sync,R=!1,F,O={body:void 0,headers:{},statusCode:0,method:m,url:g,rawRequest:u};if("json"in s&&s.json!==!1&&(R=!0,b.accept||b.Accept||(b.Accept="application/json"),m!=="GET"&&m!=="HEAD"&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),v=JSON.stringify(s.json===!0?v:s.json))),u.onreadystatechange=r,u.onload=l,u.onerror=o,u.onprogress=function(){},u.onabort=function(){h=!0,clearTimeout(s.retryTimeout)},u.ontimeout=o,u.open(m,g,!A,s.username,s.password),A||(u.withCredentials=!!s.withCredentials),!A&&s.timeout>0&&(F=setTimeout(function(){if(!h){h=!0,u.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",o(H)}},s.timeout)),u.setRequestHeader)for(c in b)b.hasOwnProperty(c)&&u.setRequestHeader(c,b[c]);else if(s.headers&&!YI(s.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in s&&(u.responseType=s.responseType),"beforeSend"in s&&typeof s.beforeSend=="function"&&s.beforeSend(u),u.send(v||null),u}function XI(s){try{if(s.responseType==="document")return s.responseXML;var e=s.responseXML&&s.responseXML.documentElement.nodeName==="parsererror";if(s.responseType===""&&!e)return s.responseXML}catch{}return null}function QI(){}});var P_=gi((UU,R_)=>{var w_=Kd(),Vg=Object.create||function(){function s(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return s.prototype=e,new s}}();function xn(s,e){this.name="ParsingError",this.code=s.code,this.message=e||s.message}xn.prototype=Vg(Error.prototype);xn.prototype.constructor=xn;xn.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function jg(s){function e(i,n,r,a){return(i|0)*3600+(n|0)*60+(r|0)+(a|0)/1e3}var t=s.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function sc(){this.values=Vg(null)}sc.prototype={set:function(s,e){!this.get(s)&&e!==""&&(this.values[s]=e)},get:function(s,e,t){return t?this.has(s)?this.values[s]:e[t]:this.has(s)?this.values[s]:e},has:function(s){return s in this.values},alt:function(s,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(s,e);break}},integer:function(s,e){/^-?\d+$/.test(e)&&this.set(s,parseInt(e,10))},percent:function(s,e){var t;return(t=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(s,e),!0):!1}};function ic(s,e,t,i){var n=i?s.split(i):[s];for(var r in n)if(typeof n[r]=="string"){var a=n[r].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function JI(s,e,t){var i=s;function n(){var o=jg(s);if(o===null)throw new xn(xn.Errors.BadTimeStamp,"Malformed timestamp: "+i);return s=s.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){var u=new sc;ic(o,function(c,h){switch(c){case"region":for(var g=t.length-1;g>=0;g--)if(t[g].id===h){u.set(c,t[g].region);break}break;case"vertical":u.alt(c,h,["rl","lr"]);break;case"line":var m=h.split(","),v=m[0];u.integer(c,v),u.percent(c,v)&&u.set("snapToLines",!1),u.alt(c,v,["auto"]),m.length===2&&u.alt("lineAlign",m[1],["start","center","end"]);break;case"position":m=h.split(","),u.percent(c,m[0]),m.length===2&&u.alt("positionAlign",m[1],["start","center","end"]);break;case"size":u.percent(c,h);break;case"align":u.alt(c,h,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){s=s.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),s.substr(0,3)!=="-->")throw new xn(xn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);s=s.substr(3),a(),e.endTime=n(),a(),r(s,e)}var Hg=w_.createElement&&w_.createElement("textarea"),ZI={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},I_={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},eD={v:"title",lang:"lang"},D_={rt:"ruby"};function k_(s,e){function t(){if(!e)return null;function v(A){return e=e.substr(A.length),A}var b=e.match(/^([^<]*)(<[^>]*>?)?/);return v(b[1]?b[1]:b[2])}function i(v){return Hg.innerHTML=v,v=Hg.textContent,Hg.textContent="",v}function n(v,b){return!D_[b.localName]||D_[b.localName]===v.localName}function r(v,b){var A=ZI[v];if(!A)return null;var R=s.document.createElement(A),F=eD[v];return F&&b&&(R[F]=b.trim()),R}for(var a=s.document.createElement("div"),o=a,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=jg(l.substr(1,l.length-2)),h;if(c){h=s.document.createProcessingInstruction("timestamp",c),o.appendChild(h);continue}var g=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!g||(h=r(g[1],g[3]),!h)||!n(o,h))continue;if(g[2]){var m=g[2].split(".");m.forEach(function(v){var b=/^bg_/.test(v),A=b?v.slice(3):v;if(I_.hasOwnProperty(A)){var R=b?"background-color":"color",F=I_[A];h.style[R]=F}}),h.className=m.join(" ")}u.push(g[1]),o.appendChild(h),o=h;continue}o.appendChild(s.document.createTextNode(i(l)))}return a}var L_=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function tD(s){for(var e=0;e<L_.length;e++){var t=L_[e];if(s>=t[0]&&s<=t[1])return!0}return!1}function iD(s){var e=[],t="",i;if(!s||!s.childNodes)return"ltr";function n(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function r(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return r(o);if(l.childNodes)return n(o,l),r(o)}for(n(e,s);t=r(e);)for(var a=0;a<t.length;a++)if(i=t.charCodeAt(a),tD(i))return"rtl";return"ltr"}function sD(s){if(typeof s.line=="number"&&(s.snapToLines||s.line>=0&&s.line<=100))return s.line;if(!s.track||!s.track.textTrackList||!s.track.textTrackList.mediaElement)return-1;for(var e=s.track,t=e.textTrackList,i=0,n=0;n<t.length&&t[n]!==e;n++)t[n].mode==="showing"&&i++;return++i*-1}function Xd(){}Xd.prototype.applyStyles=function(s,e){e=e||this.div;for(var t in s)s.hasOwnProperty(t)&&(e.style[t]=s[t])};Xd.prototype.formatStyle=function(s,e){return s===0?0:s+e};function Yd(s,e,t){Xd.call(this),this.cue=e,this.cueDiv=k_(s,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=s.document.createElement("div"),i={direction:iD(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var n=0;switch(e.positionAlign){case"start":case"line-left":n=e.position;break;case"center":n=e.position-e.size/2;break;case"end":case"line-right":n=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(r){this.applyStyles({top:this.formatStyle(r.top,"px"),bottom:this.formatStyle(r.bottom,"px"),left:this.formatStyle(r.left,"px"),right:this.formatStyle(r.right,"px"),height:this.formatStyle(r.height,"px"),width:this.formatStyle(r.width,"px")})}}Yd.prototype=Vg(Xd.prototype);Yd.prototype.constructor=Yd;function Fs(s){var e,t,i,n;if(s.div){t=s.div.offsetHeight,i=s.div.offsetWidth,n=s.div.offsetTop;var r=(r=s.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();s=s.div.getBoundingClientRect(),e=r?Math.max(r[0]&&r[0].height||0,s.height/r.length):0}this.left=s.left,this.right=s.right,this.top=s.top||n,this.height=s.height||t,this.bottom=s.bottom||n+(s.height||t),this.width=s.width||i,this.lineHeight=e!==void 0?e:s.lineHeight}Fs.prototype.move=function(s,e){switch(e=e!==void 0?e:this.lineHeight,s){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Fs.prototype.overlaps=function(s){return this.left<s.right&&this.right>s.left&&this.top<s.bottom&&this.bottom>s.top};Fs.prototype.overlapsAny=function(s){for(var e=0;e<s.length;e++)if(this.overlaps(s[e]))return!0;return!1};Fs.prototype.within=function(s){return this.top>=s.top&&this.bottom<=s.bottom&&this.left>=s.left&&this.right<=s.right};Fs.prototype.overlapsOppositeAxis=function(s,e){switch(e){case"+x":return this.left<s.left;case"-x":return this.right>s.right;case"+y":return this.top<s.top;case"-y":return this.bottom>s.bottom}};Fs.prototype.intersectPercentage=function(s){var e=Math.max(0,Math.min(this.right,s.right)-Math.max(this.left,s.left)),t=Math.max(0,Math.min(this.bottom,s.bottom)-Math.max(this.top,s.top)),i=e*t;return i/(this.height*this.width)};Fs.prototype.toCSSCompatValues=function(s){return{top:this.top-s.top,bottom:s.bottom-this.bottom,left:this.left-s.left,right:s.right-this.right,height:this.height,width:this.width}};Fs.getSimpleBoxPosition=function(s){var e=s.div?s.div.offsetHeight:s.tagName?s.offsetHeight:0,t=s.div?s.div.offsetWidth:s.tagName?s.offsetWidth:0,i=s.div?s.div.offsetTop:s.tagName?s.offsetTop:0;s=s.div?s.div.getBoundingClientRect():s.tagName?s.getBoundingClientRect():s;var n={left:s.left,right:s.right,top:s.top||i,height:s.height||e,bottom:s.bottom||i+(s.height||e),width:s.width||t};return n};function nD(s,e,t,i){function n(A,R){for(var F,O=new Fs(A),H=1,W=0;W<R.length;W++){for(;A.overlapsOppositeAxis(t,R[W])||A.within(t)&&A.overlapsAny(i);)A.move(R[W]);if(A.within(t))return A;var E=A.intersectPercentage(t);H>E&&(F=new Fs(A),H=E),A=new Fs(O)}return F||O}var r=new Fs(e),a=e.cue,o=sD(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=r.lineHeight,h=c*Math.round(o),g=t[u]+c,m=l[0];Math.abs(h)>g&&(h=h<0?-1:1,h*=Math.ceil(g/c)*c),o<0&&(h+=a.vertical===""?t.height:t.width,l=l.reverse()),r.move(m,h)}else{var v=r.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=v/2;break;case"end":o-=v;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],r=new Fs(e)}var b=n(r,l);e.move(b.toCSSCompatValues(t))}function Cl(){}Cl.StringDecoder=function(){return{decode:function(s){if(!s)return"";if(typeof s!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(s))}}};Cl.convertCueToDOMTree=function(s,e){return!s||!e?null:k_(s,e)};var rD=.05,aD="sans-serif",oD="1.5%";Cl.processCues=function(s,e,t){if(!s||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=s.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=oD,t.appendChild(i);function n(c){for(var h=0;h<c.length;h++)if(c[h].hasBeenReset||!c[h].displayState)return!0;return!1}if(!n(e)){for(var r=0;r<e.length;r++)i.appendChild(e[r].displayState);return}var a=[],o=Fs.getSimpleBoxPosition(i),l=Math.round(o.height*rD*100)/100,u={font:l+"px "+aD};(function(){for(var c,h,g=0;g<e.length;g++)h=e[g],c=new Yd(s,h,u),i.appendChild(c.div),nD(s,c,o,a),h.displayState=c.div,a.push(Fs.getSimpleBoxPosition(c))})()};Cl.Parser=function(s,e,t){t||(t=e,e={}),e||(e={}),this.window=s,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};Cl.Parser.prototype={reportOrThrowError:function(s){if(s instanceof xn)this.onparsingerror&&this.onparsingerror(s);else throw s},parse:function(s){var e=this;s&&(e.buffer+=e.decoder.decode(s,{stream:!0}));function t(){for(var c=e.buffer,h=0;h<c.length&&c[h]!=="\r"&&c[h]!==`
`;)++h;var g=c.substr(0,h);return c[h]==="\r"&&++h,c[h]===`
`&&++h,e.buffer=c.substr(h),g}function i(c){var h=new sc;if(ic(c,function(m,v){switch(m){case"id":h.set(m,v);break;case"width":h.percent(m,v);break;case"lines":h.integer(m,v);break;case"regionanchor":case"viewportanchor":var b=v.split(",");if(b.length!==2)break;var A=new sc;if(A.percent("x",b[0]),A.percent("y",b[1]),!A.has("x")||!A.has("y"))break;h.set(m+"X",A.get("x")),h.set(m+"Y",A.get("y"));break;case"scroll":h.alt(m,v,["up"]);break}},/=/,/\s/),h.has("id")){var g=new(e.vttjs.VTTRegion||e.window.VTTRegion);g.width=h.get("width",100),g.lines=h.get("lines",3),g.regionAnchorX=h.get("regionanchorX",0),g.regionAnchorY=h.get("regionanchorY",100),g.viewportAnchorX=h.get("viewportanchorX",0),g.viewportAnchorY=h.get("viewportanchorY",100),g.scroll=h.get("scroll",""),e.onregion&&e.onregion(g),e.regionList.push({id:h.get("id"),region:g})}}function n(c){var h=new sc;ic(c,function(g,m){switch(g){case"MPEGT":h.integer(g+"S",m);break;case"LOCA":h.set(g+"L",jg(m));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function r(c){c.match(/X-TIMESTAMP-MAP/)?ic(c,function(h,g){switch(h){case"X-TIMESTAMP-MAP":n(g);break}},/=/):ic(c,function(h,g){switch(h){case"Region":i(g);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new xn(xn.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?r(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{JI(a,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var s=this;try{if(s.buffer+=s.decoder.decode(),(s.cue||s.state==="HEADER")&&(s.buffer+=`

`,s.parse()),s.state==="INITIAL")throw new xn(xn.Errors.BadSignature)}catch(e){s.reportOrThrowError(e)}return s.onflush&&s.onflush(),this}};R_.exports=Cl});var N_=gi((HU,M_)=>{var lD="auto",uD={"":1,lr:1,rl:1},cD={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function dD(s){if(typeof s!="string")return!1;var e=uD[s.toLowerCase()];return e?s.toLowerCase():!1}function Gg(s){if(typeof s!="string")return!1;var e=cD[s.toLowerCase()];return e?s.toLowerCase():!1}function O_(s,e,t){this.hasBeenReset=!1;var i="",n=!1,r=s,a=e,o=t,l=null,u="",c=!0,h="auto",g="start",m="auto",v="auto",b=100,A="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(R){i=""+R}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(R){n=!!R}},startTime:{enumerable:!0,get:function(){return r},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");r=R,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");a=R,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(R){o=""+R,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(R){l=R,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(R){var F=dD(R);if(F===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=F,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(R){c=!!R,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(R){if(typeof R!="number"&&R!==lD)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=R,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return g},set:function(R){var F=Gg(R);F?(g=F,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");m=R,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(R){var F=Gg(R);F?(v=F,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");b=R,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return A},set:function(R){var F=Gg(R);if(!F)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");A=F,this.hasBeenReset=!0}}}),this.displayState=void 0}O_.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};M_.exports=O_});var $_=gi((VU,F_)=>{var hD={"":!0,up:!0};function fD(s){if(typeof s!="string")return!1;var e=hD[s.toLowerCase()];return e?s.toLowerCase():!1}function nc(s){return typeof s=="number"&&s>=0&&s<=100}function pD(){var s=100,e=3,t=0,i=100,n=0,r=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(o){if(!nc(o))throw new Error("Width must be between 0 and 100.");s=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!nc(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!nc(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!nc(o))throw new Error("ViewportAnchorY must be between 0 and 100.");r=o}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(o){if(!nc(o))throw new Error("ViewportAnchorX must be between 0 and 100.");n=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=fD(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}F_.exports=pD});var U_=gi((jU,B_)=>{var na=wr(),Co=B_.exports={WebVTT:P_(),VTTCue:N_(),VTTRegion:$_()};na.vttjs=Co;na.WebVTT=Co.WebVTT;var gD=Co.VTTCue,mD=Co.VTTRegion,yD=na.VTTCue,vD=na.VTTRegion;Co.shim=function(){na.VTTCue=gD,na.VTTRegion=mD};Co.restore=function(){na.VTTCue=yD,na.VTTRegion=vD};na.VTTCue||Co.shim()});var ac=gi(Ll=>{"use strict";function kD(s,e,t){if(t===void 0&&(t=Array.prototype),s&&typeof t.find=="function")return t.find.call(s,e);for(var i=0;i<s.length;i++)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];if(e.call(void 0,n,i,s))return n}}function nm(s,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(s):s}function RD(s,e){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t]);return s}var X_=nm({HTML:"text/html",isHTML:function(s){return s===X_.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Q_=nm({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===Q_.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ll.assign=RD;Ll.find=kD;Ll.freeze=nm;Ll.MIME_TYPE=X_;Ll.NAMESPACE=Q_});var gm=gi(Ma=>{var rb=ac(),Ir=rb.find,oc=rb.NAMESPACE;function PD(s){return s!==""}function OD(s){return s?s.split(/[\t\n\f\r ]+/).filter(PD):[]}function MD(s,e){return s.hasOwnProperty(e)||(s[e]=!0),s}function J_(s){if(!s)return[];var e=OD(s);return Object.keys(e.reduce(MD,{}))}function ND(s){return function(e){return s&&s.indexOf(e)!==-1}}function cc(s,e){for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}function on(s,e){var t=s.prototype;if(!(t instanceof e)){let n=function(){};var i=n;n.prototype=e.prototype,n=new n,cc(t,n),s.prototype=t=n}t.constructor!=s&&(typeof s!="function"&&console.error("unknown Class:"+s),t.constructor=s)}var ln={},Gn=ln.ELEMENT_NODE=1,Rl=ln.ATTRIBUTE_NODE=2,th=ln.TEXT_NODE=3,ab=ln.CDATA_SECTION_NODE=4,ob=ln.ENTITY_REFERENCE_NODE=5,FD=ln.ENTITY_NODE=6,lb=ln.PROCESSING_INSTRUCTION_NODE=7,ub=ln.COMMENT_NODE=8,cb=ln.DOCUMENT_NODE=9,db=ln.DOCUMENT_TYPE_NODE=10,aa=ln.DOCUMENT_FRAGMENT_NODE=11,$D=ln.NOTATION_NODE=12,As={},as={},n3=As.INDEX_SIZE_ERR=(as[1]="Index size error",1),r3=As.DOMSTRING_SIZE_ERR=(as[2]="DOMString size error",2),an=As.HIERARCHY_REQUEST_ERR=(as[3]="Hierarchy request error",3),a3=As.WRONG_DOCUMENT_ERR=(as[4]="Wrong document",4),o3=As.INVALID_CHARACTER_ERR=(as[5]="Invalid character",5),l3=As.NO_DATA_ALLOWED_ERR=(as[6]="No data allowed",6),u3=As.NO_MODIFICATION_ALLOWED_ERR=(as[7]="No modification allowed",7),hb=As.NOT_FOUND_ERR=(as[8]="Not found",8),c3=As.NOT_SUPPORTED_ERR=(as[9]="Not supported",9),Z_=As.INUSE_ATTRIBUTE_ERR=(as[10]="Attribute in use",10),d3=As.INVALID_STATE_ERR=(as[11]="Invalid state",11),h3=As.SYNTAX_ERR=(as[12]="Syntax error",12),f3=As.INVALID_MODIFICATION_ERR=(as[13]="Invalid modification",13),p3=As.NAMESPACE_ERR=(as[14]="Invalid namespace",14),g3=As.INVALID_ACCESS_ERR=(as[15]="Invalid access",15);function Bi(s,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,as[s]),this.message=as[s],Error.captureStackTrace&&Error.captureStackTrace(this,Bi);return t.code=s,e&&(this.message=this.message+": "+e),t}Bi.prototype=Error.prototype;cc(As,Bi);function ra(){}ra.prototype={length:0,item:function(s){return s>=0&&s<this.length?this[s]:null},toString:function(s,e){for(var t=[],i=0;i<this.length;i++)kl(this[i],t,s,e);return t.join("")},filter:function(s){return Array.prototype.filter.call(this,s)},indexOf:function(s){return Array.prototype.indexOf.call(this,s)}};function Pl(s,e){this._node=s,this._refresh=e,om(this)}function om(s){var e=s._node._inc||s._node.ownerDocument._inc;if(s._inc!==e){var t=s._refresh(s._node);if(xb(s,"length",t.length),!s.$$length||t.length<s.$$length)for(var i=t.length;i in s;i++)Object.prototype.hasOwnProperty.call(s,i)&&delete s[i];cc(t,s),s._inc=e}}Pl.prototype.item=function(s){return om(this),this[s]||null};on(Pl,ra);function ih(){}function fb(s,e){for(var t=s.length;t--;)if(s[t]===e)return t}function eb(s,e,t,i){if(i?e[fb(e,i)]=t:e[e.length++]=t,s){t.ownerElement=s;var n=s.ownerDocument;n&&(i&&mb(n,s,i),BD(n,s,t))}}function tb(s,e,t){var i=fb(e,t);if(i>=0){for(var n=e.length-1;i<n;)e[i]=e[++i];if(e.length=n,s){var r=s.ownerDocument;r&&(mb(r,s,t),t.ownerElement=null)}}else throw new Bi(hb,new Error(s.tagName+"@"+t))}ih.prototype={length:0,item:ra.prototype.item,getNamedItem:function(s){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==s)return t}},setNamedItem:function(s){var e=s.ownerElement;if(e&&e!=this._ownerElement)throw new Bi(Z_);var t=this.getNamedItem(s.nodeName);return eb(this._ownerElement,this,s,t),t},setNamedItemNS:function(s){var e=s.ownerElement,t;if(e&&e!=this._ownerElement)throw new Bi(Z_);return t=this.getNamedItemNS(s.namespaceURI,s.localName),eb(this._ownerElement,this,s,t),t},removeNamedItem:function(s){var e=this.getNamedItem(s);return tb(this._ownerElement,this,e),e},removeNamedItemNS:function(s,e){var t=this.getNamedItemNS(s,e);return tb(this._ownerElement,this,t),t},getNamedItemNS:function(s,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==s)return i}return null}};function pb(){}pb.prototype={hasFeature:function(s,e){return!0},createDocument:function(s,e,t){var i=new dc;if(i.implementation=this,i.childNodes=new ra,i.doctype=t||null,t&&i.appendChild(t),e){var n=i.createElementNS(s,e);i.appendChild(n)}return i},createDocumentType:function(s,e,t){var i=new rh;return i.name=s,i.nodeName=s,i.publicId=e||"",i.systemId=t||"",i}};function oi(){}oi.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(s,e){return sh(this,s,e)},replaceChild:function(s,e){sh(this,s,e,vb),e&&this.removeChild(e)},removeChild:function(s){return yb(this,s)},appendChild:function(s){return this.insertBefore(s,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(s){return am(this.ownerDocument||this,this,s)},normalize:function(){for(var s=this.firstChild;s;){var e=s.nextSibling;e&&e.nodeType==th&&s.nodeType==th?(this.removeChild(e),s.appendData(e.data)):(s.normalize(),s=e)}},isSupported:function(s,e){return this.ownerDocument.implementation.hasFeature(s,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(s){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===s)return i}e=e.nodeType==Rl?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(s){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s];e=e.nodeType==Rl?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(s){var e=this.lookupPrefix(s);return e==null}};function gb(s){return s=="<"&&"&lt;"||s==">"&&"&gt;"||s=="&"&&"&amp;"||s=='"'&&"&quot;"||"&#"+s.charCodeAt()+";"}cc(ln,oi);cc(ln,oi.prototype);function lc(s,e){if(e(s))return!0;if(s=s.firstChild)do if(lc(s,e))return!0;while(s=s.nextSibling)}function dc(){this.ownerDocument=this}function BD(s,e,t){s&&s._inc++;var i=t.namespaceURI;i===oc.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function mb(s,e,t,i){s&&s._inc++;var n=t.namespaceURI;n===oc.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function lm(s,e,t){if(s&&s._inc){s._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var n=e.firstChild,r=0;n;)i[r++]=n,n=n.nextSibling;i.length=r,delete i[i.length]}}}function yb(s,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:s.firstChild=i,i?i.previousSibling=t:s.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,lm(s.ownerDocument,s),e}function UD(s){return s&&(s.nodeType===oi.DOCUMENT_NODE||s.nodeType===oi.DOCUMENT_FRAGMENT_NODE||s.nodeType===oi.ELEMENT_NODE)}function HD(s){return s&&(Dr(s)||um(s)||oa(s)||s.nodeType===oi.DOCUMENT_FRAGMENT_NODE||s.nodeType===oi.COMMENT_NODE||s.nodeType===oi.PROCESSING_INSTRUCTION_NODE)}function oa(s){return s&&s.nodeType===oi.DOCUMENT_TYPE_NODE}function Dr(s){return s&&s.nodeType===oi.ELEMENT_NODE}function um(s){return s&&s.nodeType===oi.TEXT_NODE}function ib(s,e){var t=s.childNodes||[];if(Ir(t,Dr)||oa(e))return!1;var i=Ir(t,oa);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function sb(s,e){var t=s.childNodes||[];function i(r){return Dr(r)&&r!==e}if(Ir(t,i))return!1;var n=Ir(t,oa);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function VD(s,e,t){if(!UD(s))throw new Bi(an,"Unexpected parent node type "+s.nodeType);if(t&&t.parentNode!==s)throw new Bi(hb,"child not in parent");if(!HD(e)||oa(e)&&s.nodeType!==oi.DOCUMENT_NODE)throw new Bi(an,"Unexpected node type "+e.nodeType+" for parent node type "+s.nodeType)}function jD(s,e,t){var i=s.childNodes||[],n=e.childNodes||[];if(e.nodeType===oi.DOCUMENT_FRAGMENT_NODE){var r=n.filter(Dr);if(r.length>1||Ir(n,um))throw new Bi(an,"More than one element or text in fragment");if(r.length===1&&!ib(s,t))throw new Bi(an,"Element in fragment can not be inserted before doctype")}if(Dr(e)&&!ib(s,t))throw new Bi(an,"Only one element can be added and only after doctype");if(oa(e)){if(Ir(i,oa))throw new Bi(an,"Only one doctype is allowed");var a=Ir(i,Dr);if(t&&i.indexOf(a)<i.indexOf(t))throw new Bi(an,"Doctype can only be inserted before an element");if(!t&&a)throw new Bi(an,"Doctype can not be appended since element is present")}}function vb(s,e,t){var i=s.childNodes||[],n=e.childNodes||[];if(e.nodeType===oi.DOCUMENT_FRAGMENT_NODE){var r=n.filter(Dr);if(r.length>1||Ir(n,um))throw new Bi(an,"More than one element or text in fragment");if(r.length===1&&!sb(s,t))throw new Bi(an,"Element in fragment can not be inserted before doctype")}if(Dr(e)&&!sb(s,t))throw new Bi(an,"Only one element can be added and only after doctype");if(oa(e)){let l=function(u){return oa(u)&&u!==t};var o=l;if(Ir(i,l))throw new Bi(an,"Only one doctype is allowed");var a=Ir(i,Dr);if(t&&i.indexOf(a)<i.indexOf(t))throw new Bi(an,"Doctype can only be inserted before an element")}}function sh(s,e,t,i){VD(s,e,t),s.nodeType===oi.DOCUMENT_NODE&&(i||jD)(s,e,t);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===aa){var r=e.firstChild;if(r==null)return e;var a=e.lastChild}else r=a=e;var o=t?t.previousSibling:s.lastChild;r.previousSibling=o,a.nextSibling=t,o?o.nextSibling=r:s.firstChild=r,t==null?s.lastChild=a:t.previousSibling=a;do{r.parentNode=s;var l=s.ownerDocument||s;uc(r,l)}while(r!==a&&(r=r.nextSibling));return lm(s.ownerDocument||s,s),e.nodeType==aa&&(e.firstChild=e.lastChild=null),e}function uc(s,e){if(s.ownerDocument!==e){if(s.ownerDocument=e,s.nodeType===Gn&&s.attributes)for(var t=0;t<s.attributes.length;t++){var i=s.attributes.item(t);i&&(i.ownerDocument=e)}for(var n=s.firstChild;n;)uc(n,e),n=n.nextSibling}}function GD(s,e){e.parentNode&&e.parentNode.removeChild(e),e.parentNode=s,e.previousSibling=s.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:s.firstChild=e,s.lastChild=e,lm(s.ownerDocument,s,e);var t=s.ownerDocument||s;return uc(e,t),e}dc.prototype={nodeName:"#document",nodeType:cb,doctype:null,documentElement:null,_inc:1,insertBefore:function(s,e){if(s.nodeType==aa){for(var t=s.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return s}return sh(this,s,e),uc(s,this),this.documentElement===null&&s.nodeType===Gn&&(this.documentElement=s),s},removeChild:function(s){return this.documentElement==s&&(this.documentElement=null),yb(this,s)},replaceChild:function(s,e){sh(this,s,e,vb),uc(s,this),e&&this.removeChild(e),Dr(s)&&(this.documentElement=s)},importNode:function(s,e){return Sb(this,s,e)},getElementById:function(s){var e=null;return lc(this.documentElement,function(t){if(t.nodeType==Gn&&t.getAttribute("id")==s)return e=t,!0}),e},getElementsByClassName:function(s){var e=J_(s);return new Pl(this,function(t){var i=[];return e.length>0&&lc(t.documentElement,function(n){if(n!==t&&n.nodeType===Gn){var r=n.getAttribute("class");if(r){var a=s===r;if(!a){var o=J_(r);a=e.every(ND(o))}a&&i.push(n)}}}),i})},createElement:function(s){var e=new Lo;e.ownerDocument=this,e.nodeName=s,e.tagName=s,e.localName=s,e.childNodes=new ra;var t=e.attributes=new ih;return t._ownerElement=e,e},createDocumentFragment:function(){var s=new ah;return s.ownerDocument=this,s.childNodes=new ra,s},createTextNode:function(s){var e=new cm;return e.ownerDocument=this,e.appendData(s),e},createComment:function(s){var e=new dm;return e.ownerDocument=this,e.appendData(s),e},createCDATASection:function(s){var e=new hm;return e.ownerDocument=this,e.appendData(s),e},createProcessingInstruction:function(s,e){var t=new pm;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=s,t.nodeValue=t.data=e,t},createAttribute:function(s){var e=new nh;return e.ownerDocument=this,e.name=s,e.nodeName=s,e.localName=s,e.specified=!0,e},createEntityReference:function(s){var e=new fm;return e.ownerDocument=this,e.nodeName=s,e},createElementNS:function(s,e){var t=new Lo,i=e.split(":"),n=t.attributes=new ih;return t.childNodes=new ra,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=s,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,n._ownerElement=t,t},createAttributeNS:function(s,e){var t=new nh,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=s,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};on(dc,oi);function Lo(){this._nsMap={}}Lo.prototype={nodeType:Gn,hasAttribute:function(s){return this.getAttributeNode(s)!=null},getAttribute:function(s){var e=this.getAttributeNode(s);return e&&e.value||""},getAttributeNode:function(s){return this.attributes.getNamedItem(s)},setAttribute:function(s,e){var t=this.ownerDocument.createAttribute(s);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(s){var e=this.getAttributeNode(s);e&&this.removeAttributeNode(e)},appendChild:function(s){return s.nodeType===aa?this.insertBefore(s,null):GD(this,s)},setAttributeNode:function(s){return this.attributes.setNamedItem(s)},setAttributeNodeNS:function(s){return this.attributes.setNamedItemNS(s)},removeAttributeNode:function(s){return this.attributes.removeNamedItem(s.nodeName)},removeAttributeNS:function(s,e){var t=this.getAttributeNodeNS(s,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(s,e){return this.getAttributeNodeNS(s,e)!=null},getAttributeNS:function(s,e){var t=this.getAttributeNodeNS(s,e);return t&&t.value||""},setAttributeNS:function(s,e,t){var i=this.ownerDocument.createAttributeNS(s,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(s,e){return this.attributes.getNamedItemNS(s,e)},getElementsByTagName:function(s){return new Pl(this,function(e){var t=[];return lc(e,function(i){i!==e&&i.nodeType==Gn&&(s==="*"||i.tagName==s)&&t.push(i)}),t})},getElementsByTagNameNS:function(s,e){return new Pl(this,function(t){var i=[];return lc(t,function(n){n!==t&&n.nodeType===Gn&&(s==="*"||n.namespaceURI===s)&&(e==="*"||n.localName==e)&&i.push(n)}),i})}};dc.prototype.getElementsByTagName=Lo.prototype.getElementsByTagName;dc.prototype.getElementsByTagNameNS=Lo.prototype.getElementsByTagNameNS;on(Lo,oi);function nh(){}nh.prototype.nodeType=Rl;on(nh,oi);function hc(){}hc.prototype={data:"",substringData:function(s,e){return this.data.substring(s,s+e)},appendData:function(s){s=this.data+s,this.nodeValue=this.data=s,this.length=s.length},insertData:function(s,e){this.replaceData(s,0,e)},appendChild:function(s){throw new Error(as[an])},deleteData:function(s,e){this.replaceData(s,e,"")},replaceData:function(s,e,t){var i=this.data.substring(0,s),n=this.data.substring(s+e);t=i+t+n,this.nodeValue=this.data=t,this.length=t.length}};on(hc,oi);function cm(){}cm.prototype={nodeName:"#text",nodeType:th,splitText:function(s){var e=this.data,t=e.substring(s);e=e.substring(0,s),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};on(cm,hc);function dm(){}dm.prototype={nodeName:"#comment",nodeType:ub};on(dm,hc);function hm(){}hm.prototype={nodeName:"#cdata-section",nodeType:ab};on(hm,hc);function rh(){}rh.prototype.nodeType=db;on(rh,oi);function Tb(){}Tb.prototype.nodeType=$D;on(Tb,oi);function _b(){}_b.prototype.nodeType=FD;on(_b,oi);function fm(){}fm.prototype.nodeType=ob;on(fm,oi);function ah(){}ah.prototype.nodeName="#document-fragment";ah.prototype.nodeType=aa;on(ah,oi);function pm(){}pm.prototype.nodeType=lb;on(pm,oi);function bb(){}bb.prototype.serializeToString=function(s,e,t){return Eb.call(s,e,t)};oi.prototype.toString=Eb;function Eb(s,e){var t=[],i=this.nodeType==9&&this.documentElement||this,n=i.prefix,r=i.namespaceURI;if(r&&n==null){var n=i.lookupPrefix(r);if(n==null)var a=[{namespace:r,prefix:null}]}return kl(this,t,s,e,a),t.join("")}function nb(s,e,t){var i=s.prefix||"",n=s.namespaceURI;if(!n||i==="xml"&&n===oc.XML||n===oc.XMLNS)return!1;for(var r=t.length;r--;){var a=t[r];if(a.prefix===i)return a.namespace!==n}return!0}function rm(s,e,t){s.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,gb),'"')}function kl(s,e,t,i,n){if(n||(n=[]),i)if(s=i(s),s){if(typeof s=="string"){e.push(s);return}}else return;switch(s.nodeType){case Gn:var r=s.attributes,a=r.length,R=s.firstChild,o=s.tagName;t=oc.isHTML(s.namespaceURI)||t;var l=o;if(!t&&!s.prefix&&s.namespaceURI){for(var u,c=0;c<r.length;c++)if(r.item(c).name==="xmlns"){u=r.item(c).value;break}if(!u)for(var h=n.length-1;h>=0;h--){var g=n[h];if(g.prefix===""&&g.namespace===s.namespaceURI){u=g.namespace;break}}if(u!==s.namespaceURI)for(var h=n.length-1;h>=0;h--){var g=n[h];if(g.namespace===s.namespaceURI){g.prefix&&(l=g.prefix+":"+o);break}}}e.push("<",l);for(var m=0;m<a;m++){var v=r.item(m);v.prefix=="xmlns"?n.push({prefix:v.localName,namespace:v.value}):v.nodeName=="xmlns"&&n.push({prefix:"",namespace:v.value})}for(var m=0;m<a;m++){var v=r.item(m);if(nb(v,t,n)){var b=v.prefix||"",A=v.namespaceURI;rm(e,b?"xmlns:"+b:"xmlns",A),n.push({prefix:b,namespace:A})}kl(v,e,t,i,n)}if(o===l&&nb(s,t,n)){var b=s.prefix||"",A=s.namespaceURI;rm(e,b?"xmlns:"+b:"xmlns",A),n.push({prefix:b,namespace:A})}if(R||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;R;)R.data?e.push(R.data):kl(R,e,t,i,n.slice()),R=R.nextSibling;else for(;R;)kl(R,e,t,i,n.slice()),R=R.nextSibling;e.push("</",l,">")}else e.push("/>");return;case cb:case aa:for(var R=s.firstChild;R;)kl(R,e,t,i,n.slice()),R=R.nextSibling;return;case Rl:return rm(e,s.name,s.value);case th:return e.push(s.data.replace(/[<&>]/g,gb));case ab:return e.push("<![CDATA[",s.data,"]]>");case ub:return e.push("<!--",s.data,"-->");case db:var F=s.publicId,O=s.systemId;if(e.push("<!DOCTYPE ",s.name),F)e.push(" PUBLIC ",F),O&&O!="."&&e.push(" ",O),e.push(">");else if(O&&O!=".")e.push(" SYSTEM ",O,">");else{var H=s.internalSubset;H&&e.push(" [",H,"]"),e.push(">")}return;case lb:return e.push("<?",s.target," ",s.data,"?>");case ob:return e.push("&",s.nodeName,";");default:e.push("??",s.nodeName)}}function Sb(s,e,t){var i;switch(e.nodeType){case Gn:i=e.cloneNode(!1),i.ownerDocument=s;case aa:break;case Rl:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=s,i.parentNode=null,t)for(var n=e.firstChild;n;)i.appendChild(Sb(s,n,t)),n=n.nextSibling;return i}function am(s,e,t){var i=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];typeof r!="object"&&r!=i[n]&&(i[n]=r)}switch(e.childNodes&&(i.childNodes=new ra),i.ownerDocument=s,i.nodeType){case Gn:var a=e.attributes,o=i.attributes=new ih,l=a.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(am(s,a.item(u),!0));break;case Rl:t=!0}if(t)for(var c=e.firstChild;c;)i.appendChild(am(s,c,t)),c=c.nextSibling;return i}function xb(s,e,t){s[e]=t}try{if(Object.defineProperty){let s=function(e){switch(e.nodeType){case Gn:case aa:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(s(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};m3=s,Object.defineProperty(Pl.prototype,"length",{get:function(){return om(this),this.$$length}}),Object.defineProperty(oi.prototype,"textContent",{get:function(){return s(this)},set:function(e){switch(this.nodeType){case Gn:case aa:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),xb=function(e,t,i){e["$$"+t]=i}}}catch{}var m3;Ma.DocumentType=rh;Ma.DOMException=Bi;Ma.DOMImplementation=pb;Ma.Element=Lo;Ma.Node=oi;Ma.NodeList=ra;Ma.XMLSerializer=bb});var Cb=gi(fc=>{"use strict";var Ab=ac().freeze;fc.XML_ENTITIES=Ab({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});fc.HTML_ENTITIES=Ab({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});fc.entityMap=fc.HTML_ENTITIES});var Ob=gi(ym=>{var yc=ac().NAMESPACE,mm=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,wb=new RegExp("[\\-\\.0-9"+mm.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ib=new RegExp("^"+mm.source+wb.source+"*(?::"+mm.source+wb.source+"*)?$"),pc=0,Na=1,Ol=2,gc=3,Ml=4,Nl=5,mc=6,oh=7;function Fl(s,e){this.message=s,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Fl)}Fl.prototype=new Error;Fl.prototype.name=Fl.name;function kb(){}kb.prototype={parse:function(s,e,t){var i=this.domBuilder;i.startDocument(),Rb(e,e={}),qD(s,e,t,i,this.errorHandler),i.endDocument()}};function qD(s,e,t,i,n){function r(Re){if(Re>65535){Re-=65536;var We=55296+(Re>>10),Qe=56320+(Re&1023);return String.fromCharCode(We,Qe)}else return String.fromCharCode(Re)}function a(Re){var We=Re.slice(1,-1);return Object.hasOwnProperty.call(t,We)?t[We]:We.charAt(0)==="#"?r(parseInt(We.substr(1).replace("x","0x"))):(n.error("entity not found:"+Re),Re)}function o(Re){if(Re>b){var We=s.substring(b,Re).replace(/&#?\w+;/g,a);g&&l(b),i.characters(We,0,Re-b),b=Re}}function l(Re,We){for(;Re>=c&&(We=h.exec(s));)u=We.index,c=u+We[0].length,g.lineNumber++;g.columnNumber=Re-u+1}for(var u=0,c=0,h=/.*(?:\r\n?|\n)|.*$/g,g=i.locator,m=[{currentNSMap:e}],v={},b=0;;){try{var A=s.indexOf("<",b);if(A<0){if(!s.substr(b).match(/^\s*$/)){var R=i.doc,F=R.createTextNode(s.substr(b));R.appendChild(F),i.currentElement=F}return}switch(A>b&&o(A),s.charAt(A+1)){case"/":var ve=s.indexOf(">",A+3),O=s.substring(A+2,ve).replace(/[ \t\n\r]+$/g,""),H=m.pop();ve<0?(O=s.substring(A+2).replace(/[\s<].*/,""),n.error("end tag name: "+O+" is not complete:"+H.tagName),ve=A+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,""),n.error("end tag name: "+O+" maybe not complete"),ve=A+1+O.length);var W=H.localNSMap,E=H.tagName==O,X=E||H.tagName&&H.tagName.toLowerCase()==O.toLowerCase();if(X){if(i.endElement(H.uri,H.localName,O),W)for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&i.endPrefixMapping(Z);E||n.fatalError("end tag name: "+O+" is not match the current start tagName:"+H.tagName)}else m.push(H);ve++;break;case"?":g&&l(A),ve=XD(s,A,i);break;case"!":g&&l(A),ve=YD(s,A,i,n);break;default:g&&l(A);var re=new Pb,oe=m[m.length-1].currentNSMap,ve=zD(s,A,re,oe,a,n),Ce=re.length;if(!re.closed&&KD(s,ve,re.tagName,v)&&(re.closed=!0,t.nbsp||n.warning("unclosed xml attribute")),g&&Ce){for(var we=Db(g,{}),Ge=0;Ge<Ce;Ge++){var Xe=re[Ge];l(Xe.offset),Xe.locator=Db(g,{})}i.locator=we,Lb(re,i,oe)&&m.push(re),i.locator=g}else Lb(re,i,oe)&&m.push(re);yc.isHTML(re.uri)&&!re.closed?ve=WD(s,ve,re.tagName,a,i):ve++}}catch(Re){if(Re instanceof Fl)throw Re;n.error("element parse error: "+Re),ve=-1}ve>b?b=ve:o(Math.max(A,b)+1)}}function Db(s,e){return e.lineNumber=s.lineNumber,e.columnNumber=s.columnNumber,e}function zD(s,e,t,i,n,r){function a(m,v,b){t.attributeNames.hasOwnProperty(m)&&r.fatalError("Attribute "+m+" redefined"),t.addValue(m,v.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),b)}for(var o,l,u=++e,c=pc;;){var h=s.charAt(u);switch(h){case"=":if(c===Na)o=s.slice(e,u),c=gc;else if(c===Ol)c=gc;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===gc||c===Na)if(c===Na&&(r.warning('attribute value must after "="'),o=s.slice(e,u)),e=u+1,u=s.indexOf(h,e),u>0)l=s.slice(e,u),a(o,l,e-1),c=Nl;else throw new Error("attribute value no end '"+h+"' match");else if(c==Ml)l=s.slice(e,u),a(o,l,e),r.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=u+1,c=Nl;else throw new Error('attribute value must after "="');break;case"/":switch(c){case pc:t.setTagName(s.slice(e,u));case Nl:case mc:case oh:c=oh,t.closed=!0;case Ml:case Na:break;case Ol:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return r.error("unexpected end of input"),c==pc&&t.setTagName(s.slice(e,u)),u;case">":switch(c){case pc:t.setTagName(s.slice(e,u));case Nl:case mc:case oh:break;case Ml:case Na:l=s.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case Ol:c===Ol&&(l=o),c==Ml?(r.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!yc.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case gc:throw new Error("attribute value missed!!")}return u;case"\x80":h=" ";default:if(h<=" ")switch(c){case pc:t.setTagName(s.slice(e,u)),c=mc;break;case Na:o=s.slice(e,u),c=Ol;break;case Ml:var l=s.slice(e,u);r.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case Nl:c=mc;break}else switch(c){case Ol:var g=t.tagName;(!yc.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&r.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,c=Na;break;case Nl:r.warning('attribute space is required"'+o+'"!!');case mc:c=Na,e=u;break;case gc:c=Ml,e=u;break;case oh:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Lb(s,e,t){for(var i=s.tagName,n=null,h=s.length;h--;){var r=s[h],a=r.qName,o=r.value,g=a.indexOf(":");if(g>0)var l=r.prefix=a.slice(0,g),u=a.slice(g+1),c=l==="xmlns"&&u;else u=a,l=null,c=a==="xmlns"&&"";r.localName=u,c!==!1&&(n==null&&(n={},Rb(t,t={})),t[c]=n[c]=o,r.uri=yc.XMLNS,e.startPrefixMapping(c,o))}for(var h=s.length;h--;){r=s[h];var l=r.prefix;l&&(l==="xml"&&(r.uri=yc.XML),l!=="xmlns"&&(r.uri=t[l||""]))}var g=i.indexOf(":");g>0?(l=s.prefix=i.slice(0,g),u=s.localName=i.slice(g+1)):(l=null,u=s.localName=i);var m=s.uri=t[l||""];if(e.startElement(m,u,i,s),s.closed){if(e.endElement(m,u,i),n)for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&e.endPrefixMapping(l)}else return s.currentNSMap=t,s.localNSMap=n,!0}function WD(s,e,t,i,n){if(/^(?:script|textarea)$/i.test(t)){var r=s.indexOf("</"+t+">",e),a=s.substring(e+1,r);if(/[&<]/.test(a))return/^script$/i.test(t)?(n.characters(a,0,a.length),r):(a=a.replace(/&#?\w+;/g,i),n.characters(a,0,a.length),r)}return e+1}function KD(s,e,t,i){var n=i[t];return n==null&&(n=s.lastIndexOf("</"+t+">"),n<e&&(n=s.lastIndexOf("</"+t)),i[t]=n),n<e}function Rb(s,e){for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}function YD(s,e,t,i){var n=s.charAt(e+2);switch(n){case"-":if(s.charAt(e+3)==="-"){var r=s.indexOf("-->",e+4);return r>e?(t.comment(s,e+4,r-e-4),r+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(s.substr(e+3,6)=="CDATA["){var r=s.indexOf("]]>",e+9);return t.startCDATA(),t.characters(s,e+9,r-e-9),t.endCDATA(),r+3}var a=QD(s,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var h=a[o-1];return t.startDTD(l,u,c),t.endDTD(),h.index+h[0].length}}return-1}function XD(s,e,t){var i=s.indexOf("?>",e);if(i){var n=s.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var r=n[0].length;return t.processingInstruction(n[1],n[2]),i+2}else return-1}return-1}function Pb(){this.attributeNames={}}Pb.prototype={setTagName:function(s){if(!Ib.test(s))throw new Error("invalid tagName:"+s);this.tagName=s},addValue:function(s,e,t){if(!Ib.test(s))throw new Error("invalid attribute:"+s);this.attributeNames[s]=this.length,this[this.length++]={qName:s,value:e,offset:t}},length:0,getLocalName:function(s){return this[s].localName},getLocator:function(s){return this[s].locator},getQName:function(s){return this[s].qName},getURI:function(s){return this[s].uri},getValue:function(s){return this[s].value}};function QD(s,e){var t,i=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(s);t=n.exec(s);)if(i.push(t),t[1])return i}ym.XMLReader=kb;ym.ParseError=Fl});var Hb=gi(uh=>{var JD=ac(),ZD=gm(),Mb=Cb(),$b=Ob(),e2=ZD.DOMImplementation,Nb=JD.NAMESPACE,t2=$b.ParseError,i2=$b.XMLReader;function Bb(s){return s.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Ub(s){this.options=s||{locator:{}}}Ub.prototype.parseFromString=function(s,e){var t=this.options,i=new i2,n=t.domBuilder||new vc,r=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?Mb.HTML_ENTITIES:Mb.XML_ENTITIES;a&&n.setDocumentLocator(a),i.errorHandler=s2(r,n,a),i.domBuilder=t.domBuilder||n,l&&(o[""]=Nb.HTML),o.xml=o.xml||Nb.XML;var c=t.normalizeLineEndings||Bb;return s&&typeof s=="string"?i.parse(c(s),o,u):i.errorHandler.error("invalid doc source"),n.doc};function s2(s,e,t){if(!s){if(e instanceof vc)return e;s=e}var i={},n=s instanceof Function;t=t||{};function r(a){var o=s[a];!o&&n&&(o=s.length==2?function(l){s(a,l)}:s),i[a]=o&&function(l){o("[xmldom "+a+"]	"+l+vm(t))}||function(){}}return r("warning"),r("error"),r("fatalError"),i}function vc(){this.cdata=!1}function $l(s,e){e.lineNumber=s.lineNumber,e.columnNumber=s.columnNumber}vc.prototype={startDocument:function(){this.doc=new e2().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(s,e,t,i){var n=this.doc,r=n.createElementNS(s,t||e),a=i.length;lh(this,r),this.currentElement=r,this.locator&&$l(this.locator,r);for(var o=0;o<a;o++){var s=i.getURI(o),l=i.getValue(o),t=i.getQName(o),u=n.createAttributeNS(s,t);this.locator&&$l(i.getLocator(o),u),u.value=u.nodeValue=l,r.setAttributeNode(u)}},endElement:function(s,e,t){var i=this.currentElement,n=i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(s,e){},endPrefixMapping:function(s){},processingInstruction:function(s,e){var t=this.doc.createProcessingInstruction(s,e);this.locator&&$l(this.locator,t),lh(this,t)},ignorableWhitespace:function(s,e,t){},characters:function(s,e,t){if(s=Fb.apply(this,arguments),s){if(this.cdata)var i=this.doc.createCDATASection(s);else var i=this.doc.createTextNode(s);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(s)&&this.doc.appendChild(i),this.locator&&$l(this.locator,i)}},skippedEntity:function(s){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(s){(this.locator=s)&&(s.lineNumber=0)},comment:function(s,e,t){s=Fb.apply(this,arguments);var i=this.doc.createComment(s);this.locator&&$l(this.locator,i),lh(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(s,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var n=i.createDocumentType(s,e,t);this.locator&&$l(this.locator,n),lh(this,n),this.doc.doctype=n}},warning:function(s){console.warn("[xmldom warning]	"+s,vm(this.locator))},error:function(s){console.error("[xmldom error]	"+s,vm(this.locator))},fatalError:function(s){throw new t2(s,this.locator)}};function vm(s){if(s)return`
@`+(s.systemId||"")+"#[line:"+s.lineNumber+",col:"+s.columnNumber+"]"}function Fb(s,e,t){return typeof s=="string"?s.substr(e,t):s.length>=e+t||e?new java.lang.String(s,e,t)+"":s}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(s){vc.prototype[s]=function(){return null}});function lh(s,e){s.currentElement?s.currentElement.appendChild(e):s.doc.appendChild(e)}uh.__DOMHandler=vc;uh.normalizeLineEndings=Bb;uh.DOMParser=Ub});var jb=gi(ch=>{var Vb=gm();ch.DOMImplementation=Vb.DOMImplementation;ch.XMLSerializer=Vb.XMLSerializer;ch.DOMParser=Hb().DOMParser});var lE=gi((C3,oE)=>{var aE=Math.pow(2,32),Y2=function(s){var e=new DataView(s.buffer,s.byteOffset,s.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*aE+e.getUint32(4)};oE.exports={getUint64:Y2,MAX_UINT32:aE}});var dE=gi((w3,cE)=>{var uE=lE().getUint64,X2=function(s){var e=new DataView(s.buffer,s.byteOffset,s.byteLength),t={version:s[0],flags:new Uint8Array(s.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=uE(s.subarray(i)),t.firstOffset=uE(s.subarray(i+8)),i+=16),i+=2;var n=e.getUint16(i);for(i+=2;n>0;i+=12,n--)t.references.push({referenceType:(s[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(s[i+8]&128),sapType:(s[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t};cE.exports=X2});var AE=gi((Q3,xE)=>{var wm=9e4,Im,Dm,gh,Lm,bE,EE,SE;Im=function(s){return s*wm};Dm=function(s,e){return s*e};gh=function(s){return s/wm};Lm=function(s,e){return s/e};bE=function(s,e){return Im(Lm(s,e))};EE=function(s,e){return Dm(gh(s),e)};SE=function(s,e,t){return gh(t?s:s-e)};xE.exports={ONE_SECOND_IN_TS:wm,secondsToVideoTs:Im,secondsToAudioTs:Dm,videoTsToSeconds:gh,audioTsToSeconds:Lm,audioTsToVideoTs:bE,videoTsToAudioTs:EE,metadataTsToSeconds:SE}});var Ud=()=>window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),cg=(s,e,t)=>{navigator.clipboard?.write?navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([e],{type:"text/html"}),"text/plain":new Blob([s],{type:"text/plain"})})]).then(t).catch(()=>navigator.clipboard.writeText(s).then(t)):navigator.clipboard?.writeText&&navigator.clipboard.writeText(s).then(t)},gT=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"]):checked','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],mT="Tab",Hd=" ",yl="Enter",yT="ArrowUp",vT="ArrowDown",TT="ArrowLeft",_T="ArrowRight",bT="Home",ET="End",ST="mousedown",vl="keydown";var dg="mouseenter",hg="mouseleave",fg="focus",pg="blur",gg="focusout";function mw(){let s=".cmp-di-header";$(s+"__hamburger "+s+"__nav-icon").closest("button").on("click keydown",function(r){if(r.type===vl&&r.key!==yl)return;r?.preventDefault(),r?.stopPropagation(),$(this).children().toggleClass("icon-navicon icon-remove"),$(s+"--hamburger-menu").toggleClass("active");let a=$(s+"--hamburger-menu").hasClass("active");$(this).attr("aria-expanded",a?"true":"false"),a?($("html").css("overflow","initial"),$("body").addClass("show-hamburger")):$("body").removeClass("show-hamburger"),t(),$(s+"__action--for-you-container").removeClass("active"),$(s+"__for-you-dropdown-selected").removeClass("active"),a||$(s+"__for-you-dropdown-selected").closest("button").attr("aria-expanded","false")}),$(document).on("click",function(r){$(r.target).is(".cmp-di-header__hamburger .icon-remove")===!1&&($(".cmp-di-header--hamburger-menu").removeClass("active"),$(".cmp-di-header__nav-icon i").removeClass("icon-remove"),$(".cmp-di-header__nav-icon i").addClass("icon-navicon"),$("body").removeClass("show-hamburger"),$(s+"__hamburger "+s+"__nav-icon").closest("button").attr("aria-expanded","false"))}),$(s+"__for-you-dropdown-selected").closest("button").on("click",function(){let r=$(s+"__for-you-dropdown-selected").hasClass("active");$(s+"__action--for-you-container").toggleClass("active"),$(s+"__for-you-dropdown-selected").toggleClass("active"),$(s+"--hamburger-menu").removeClass("active"),$(this).attr("aria-expanded",r?"false":"true"),r?$("html").css("overflow","initial"):$("html").css("overflow","hidden"),$("body").removeClass("show-hamburger"),$(s+"__hamburger "+s+"__nav-icon").children().removeClass("icon-remove").addClass("icon-navicon")}),$(s+"__action--for-you-container--close button").on("click",function(){$(s+"__action--for-you-container").toggleClass("active"),$(s+"__for-you-dropdown-selected").toggleClass("active"),$(s+"--hamburger-menu").removeClass("active"),$(s+"__for-you-dropdown-selected").closest("button").attr("aria-expanded","false"),$(s+"__for-you-dropdown-selected").hasClass("active")?$("html").css("overflow","hidden"):$("html").css("overflow","initial"),$("body").removeClass("show-hamburger"),$(s+"__hamburger "+s+"__nav-icon").children().removeClass("icon-remove").addClass("icon-navicon")});function t(){let r=$(s+"--hamburger-menu").position();$(s+"--hamburger-menu__list-item").each((a,o)=>{let l=$(o).position();$(o).find(s+"--hamburger-menu-sub__container").height()+l.top+60>$(window).height()?$(o).find(s+"--hamburger-menu-sub__container").css({bottom:"20px",left:$(o).width()+r.left+40,top:"initial"}):$(o).find(s+"--hamburger-menu-sub__container").css({top:l.top+60,left:$(o).width()+r.left+40})})}function i(){document.querySelectorAll(`${s} a[href="#"]`).forEach(a=>{a.addEventListener("click",o=>{o.preventDefault()})})}function n(){$(s).find(".cmp-di-promo-container--for-you__column-1__row-3").closest(s+"__action--for-you-menu-container:first-of-type").addClass("no-left-border"),$(".cmp-di-header--hamburger-menu").scroll(()=>{t(),i()}),$(s+"--hamburger-menu__list-item").each(function(){let r=$(this),a=r.children("a"),o=r.find(s+"--hamburger-menu-sub__container");o.length>0&&(r.on(dg,function(){a.attr("aria-expanded","true")}),r.on(hg,function(){a.attr("aria-expanded","false")}),a.on(fg,function(){$(this).attr("aria-expanded","true")}),a.on(pg,function(){setTimeout(()=>{let l=document.activeElement;o.find(l).length>0||$(this).attr("aria-expanded","false")},10)}),o.on(gg,function(){setTimeout(()=>{let l=document.activeElement;r.find(l).length>0||r.is(l)||a.attr("aria-expanded","false")},10)}))}),$(s+"__primary-nav-link").each(function(){let r=$(this),a=r.closest(s+"__primary-nav-item");a.on(dg,function(){r.attr("aria-expanded","true")}),a.on(hg,function(){r.attr("aria-expanded","false")}),r.on(fg,function(){$(s+"__primary-nav-link").attr("aria-expanded","false"),$(this).attr("aria-expanded","true")}),r.on(pg,function(){setTimeout(()=>{let o=document.activeElement;a.find(o).length>0||r.attr("aria-expanded","false")},10)}),a.on(gg,function(o){setTimeout(()=>{let l=document.activeElement;a.find(l).length>0||a.is(l)||r.attr("aria-expanded","false")},10)})})}n()}document.addEventListener("DOMContentLoaded",mw,!1);var AT=Qi(mg());window.$=window.jQuery=AT.default;function yw(){vw()}function vw(){$(document).ready(function(){$("body").on("click",".save-preference-btn-handler.onetrust-close-btn-handler, .ot-pc-refuse-all-handler, #accept-recommended-btn-handler, #onetrust-accept-btn-handler, #onetrust-reject-all-handler, .optanon-button-wrapper.optanon-save-settings-button, .optanon-button-wrapper.optanon-allow-all-button, .optanon-allow-all.accept-cookies-button,.accept-cookies-button",function(){window.location.reload()})})}window.OptanonWrapper=yw;(function(){var s=500,e=[];$("[data-sequence]").each(function(n,r){var a=Number($(r).attr("data-sequence"));e.push(a)});var t=e.some(n=>n>6);$("[data-sequence]").each(function(n,r){if(t)$(r).attr("data-aos-duration",3e3/e.length);else{var a=Number($(r).attr("data-sequence"));$(r).attr("data-aos-duration",s*a)}});var i=$("body");i.removeAttr("data-aos-easing"),i.removeAttr("data-aos-duration"),i.removeAttr("data-aos-delay")})();var CT=()=>{window.viewport={top:window.pageYOffset,height:document.documentElement.clientHeight,bottom:window.pageYOffset+document.documentElement.clientHeight}};window.isElementFullyInViewport=s=>{let e=s.getBoundingClientRect();return e.top<=viewport.height&&e.bottom<=viewport.height&&e.bottom>=0};window.isElementInViewport=s=>{let e=s.getBoundingClientRect();return e.top<=viewport.height&&e.bottom>=0};window.getPercentageVisible=(s,e)=>{let t={offsetTop:0,offsetTopElement:!1,offsetBottom:0,offsetBottomElement:!1,...e},i=t.offsetTop+(t.offsetTopElement!==!1&&t.offsetTopElement.length>0?t.offsetTopElement.outerHeight():0),n=t.offsetBottom+(t.offsetBottomElement!==!1&&t.offsetBottomElement>0?t.offsetBottomElement.outerHeight():0),r=window.scrollY+i,a=window.innerHeight-i-n,o=r+a,u=s.getBoundingClientRect().top+window.scrollY,c=s.offsetHeight,h=u+c,m=Math.max(h,o)-Math.min(u,r)-a,v=c-m,b=parseInt(v<=0?0:v/c*100),A=b>0&&b<100,R=o>h&&r<h,F=r<u&&o>u;return{percentageVisible:b,isElementPartiallyVisibleOnBottom:A&&F&&!R,isElementPartiallyVisibleOnTop:A&&R&&!F}};CT();$(window).resize(function(){requestAnimationFrame(CT)});var Tw=(s,e)=>{let t=document.querySelectorAll(s),i=0;t.length&&t.forEach(n=>{let r=n.querySelectorAll(e);r.forEach(a=>{a.style.height="",a.getBoundingClientRect().height>i&&(i=a.getBoundingClientRect().height)}),r.forEach(a=>{a.style.height=`${i}px`}),i=0})};window.matchHeight=Tw;document.addEventListener("keydown",function(s){s.key==="Tab"&&$("body").addClass("cmp-element--focus")});document.addEventListener("click",function(s){$("body").removeClass("cmp-element--focus")});window.onload=function(){$(".cmp-di-header--hamburger-menu__list a, .link-list.cmp-di-header__for-you-link-list a").each(function(){var s=$(this).attr("href"),e=window.location.pathname;e=e.replace("/content/www",""),s&&s.includes(e)&&($(this).closest("li").addClass("green"),$(this).attr("aria-current","true"))}),$(".cmp-title__text a").each(function(){var s=$(this).attr("href"),e=window.location.pathname;e=e.replace("/content/www",""),s&&s.includes(e)&&$(this).closest("div.cmp-title").addClass("green")})};$(document).ready(function(){if($(".cmp-di-promo-divider--section").length>0&&$(window).width()>768){var s=0;$("div.cmp-di-sectional-divider__vertical-band-right-black").each(function(){var e=$(this).height();e>s&&(s=e)}),$("div.cmp-di-sectional-divider__vertical-band-right-black").height(s)}});var dU=Qi(wT());+function(s){"use strict";var e=function(n,r){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",n,r)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(n,r,a){if(this.enabled=!0,this.type=n,this.$element=s(r),this.options=this.getOptions(a),this.$viewport=this.options.viewport&&s(s.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),l=o.length;l--;){var u=o[l];if(u=="click")this.$element.on("click."+this.type,this.options.selector,s.proxy(this.toggle,this));else if(u!="manual"){var c=u=="hover"?"mouseenter":"focusin",h=u=="hover"?"mouseleave":"focusout";this.$element.on(c+"."+this.type,this.options.selector,s.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,s.proxy(this.leave,this))}}this.options.selector?this._options=s.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(n){return n=s.extend({},this.getDefaults(),this.$element.data(),n),n.delay&&typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),n},e.prototype.getDelegateOptions=function(){var n={},r=this.getDefaults();return this._options&&s.each(this._options,function(a,o){r[a]!=o&&(n[a]=o)}),n},e.prototype.enter=function(n){var r=n instanceof this.constructor?n:s(n.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(n.currentTarget,this.getDelegateOptions()),s(n.currentTarget).data("bs."+this.type,r)),n instanceof s.Event&&(r.inState[n.type=="focusin"?"focus":"hover"]=!0),r.tip().hasClass("in")||r.hoverState=="in"){r.hoverState="in";return}if(clearTimeout(r.timeout),r.hoverState="in",!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout(function(){r.hoverState=="in"&&r.show()},r.options.delay.show)},e.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1},e.prototype.leave=function(n){var r=n instanceof this.constructor?n:s(n.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(n.currentTarget,this.getDelegateOptions()),s(n.currentTarget).data("bs."+this.type,r)),n instanceof s.Event&&(r.inState[n.type=="focusout"?"focus":"hover"]=!1),!r.isInStateTrue()){if(clearTimeout(r.timeout),r.hoverState="out",!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout(function(){r.hoverState=="out"&&r.hide()},r.options.delay.hide)}},e.prototype.show=function(){var n=s.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=s.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var a=this,o=this.tip(),l=this.getUID(this.type);this.setContent(),o.attr("id",l),this.$element.attr("aria-describedby",l),this.options.animation&&o.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,h=c.test(u);h&&(u=u.replace(c,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var g=this.getPosition(),m=o[0].offsetWidth,v=o[0].offsetHeight;if(h){var b=u,A=this.getPosition(this.$viewport);u=u=="bottom"&&g.bottom+v>A.bottom?"top":u=="top"&&g.top-v<A.top?"bottom":u=="right"&&g.right+m>A.width?"left":u=="left"&&g.left-m<A.left?"right":u,o.removeClass(b).addClass(u)}var R=this.getCalculatedOffset(u,g,m,v);this.applyPlacement(R,u);var F=function(){var O=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,O=="out"&&a.leave(a)};s.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",F).emulateTransitionEnd(e.TRANSITION_DURATION):F()}},e.prototype.applyPlacement=function(n,r){var a=this.tip(),o=a[0].offsetWidth,l=a[0].offsetHeight,u=parseInt(a.css("margin-top"),10),c=parseInt(a.css("margin-left"),10);isNaN(u)&&(u=0),isNaN(c)&&(c=0),n.top+=u,n.left+=c,s.offset.setOffset(a[0],s.extend({using:function(R){a.css({top:Math.round(R.top),left:Math.round(R.left)})}},n),0),a.addClass("in");var h=a[0].offsetWidth,g=a[0].offsetHeight;r=="top"&&g!=l&&(n.top=n.top+l-g);var m=this.getViewportAdjustedDelta(r,n,h,g);m.left?n.left+=m.left:n.top+=m.top;var v=/top|bottom/.test(r),b=v?m.left*2-o+h:m.top*2-l+g,A=v?"offsetWidth":"offsetHeight";a.offset(n),this.replaceArrow(b,a[0][A],v)},e.prototype.replaceArrow=function(n,r,a){this.arrow().css(a?"left":"top",50*(1-n/r)+"%").css(a?"top":"left","")},e.prototype.setContent=function(){var n=this.tip(),r=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](r),n.removeClass("fade in top bottom left right")},e.prototype.hide=function(n){var r=this,a=s(this.$tip),o=s.Event("hide.bs."+this.type);function l(){r.hoverState!="in"&&a.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return a.removeClass("in"),s.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",l).emulateTransitionEnd(e.TRANSITION_DURATION):l(),this.hoverState=null,this},e.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(n){n=n||this.$element;var r=n[0],a=r.tagName=="BODY",o=r.getBoundingClientRect();o.width==null&&(o=s.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var l=window.SVGElement&&r instanceof window.SVGElement,u=a?{top:0,left:0}:l?null:n.offset(),c={scroll:a?document.documentElement.scrollTop||document.body.scrollTop:n.scrollTop()},h=a?{width:s(window).width(),height:s(window).height()}:null;return s.extend({},o,c,h,u)},e.prototype.getCalculatedOffset=function(n,r,a,o){return n=="bottom"?{top:r.top+r.height,left:r.left+r.width/2-a/2}:n=="top"?{top:r.top-o,left:r.left+r.width/2-a/2}:n=="left"?{top:r.top+r.height/2-o/2,left:r.left-a}:{top:r.top+r.height/2-o/2,left:r.left+r.width}},e.prototype.getViewportAdjustedDelta=function(n,r,a,o){var l={top:0,left:0};if(!this.$viewport)return l;var u=this.options.viewport&&this.options.viewport.padding||0,c=this.getPosition(this.$viewport);if(/right|left/.test(n)){var h=r.top-u-c.scroll,g=r.top+u-c.scroll+o;h<c.top?l.top=c.top-h:g>c.top+c.height&&(l.top=c.top+c.height-g)}else{var m=r.left-u,v=r.left+u+a;m<c.left?l.left=c.left-m:v>c.right&&(l.left=c.left+c.width-v)}return l},e.prototype.getTitle=function(){var n,r=this.$element,a=this.options;return n=r.attr("data-original-title")||(typeof a.title=="function"?a.title.call(r[0]):a.title),n},e.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=s(this.options.template),this.$tip.length!=1))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(n){var r=this;n&&(r=s(n.currentTarget).data("bs."+this.type),r||(r=new this.constructor(n.currentTarget,this.getDelegateOptions()),s(n.currentTarget).data("bs."+this.type,r))),n?(r.inState.click=!r.inState.click,r.isInStateTrue()?r.enter(r):r.leave(r)):r.tip().hasClass("in")?r.leave(r):r.enter(r)},e.prototype.destroy=function(){var n=this;clearTimeout(this.timeout),this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type),n.$tip&&n.$tip.detach(),n.$tip=null,n.$arrow=null,n.$viewport=null,n.$element=null})};function t(n){return this.each(function(){var r=s(this),a=r.data("bs.tooltip"),o=typeof n=="object"&&n;!a&&/destroy|hide/.test(n)||(a||r.data("bs.tooltip",a=new e(this,o)),typeof n=="string"&&a[n]())})}var i=s.fn.tooltip;s.fn.tooltip=t,s.fn.tooltip.Constructor=e,s.fn.tooltip.noConflict=function(){return s.fn.tooltip=i,this}}(jQuery);var _w=()=>{let s=[];if(s=document.querySelectorAll(`
        .cmp-pull-quote--quote-with-image > div,
        .cmp-pull-quote--quote-with-image-large > div,
        .cmp-cta__homepage-fixed > div,
        .cmp-cta__bg-img--hero .cmp-cta__gradient,
        .cmp-cta__bg-img--hero .cmp-cta__bg-img,
        .cmp-expanding-img__img-section > div,
        .cmp-container__bg-image,
        .cmp-container__bg-image > div,
        .cmp-di-promo__background,
        [data-desktop-img-path]
    `),!s.length)return;let e=(r,a)=>{if(!r||r.startsWith(":"))return null;let o=r.startsWith("/")?document.baseURI:void 0;return new URL(r,o).searchParams.get(a)},t=({matches:r,elementToHandle:a,url:o,height:l})=>{if(r){let u=a.style.backgroundImage.slice(4,-1).replace(/"/g,""),c=e(u,"wid"),h=e(o,"wid");(!c||Number(h)>Number(c))&&a.style.setProperty("background-image",`url(${encodeURI(o)})`),l&&a.style.setProperty("min-height",`${l}px`,"important")}},i=r=>{if(!r.hasAttribute("data-desktop-img-path"))return;let a=window.matchMedia("(min-width: 1024px)"),o=window.matchMedia("(min-width:768px) and (max-width:1023px)"),l=window.matchMedia("(max-width: 767px)"),u=r.getAttribute("data-desktop-img-path"),c=r.getAttribute("data-desktop-min-height"),h=r.getAttribute("data-tablet-img-path"),g=r.getAttribute("data-tablet-min-height"),m=r.getAttribute("data-mobile-img-path"),v=r.getAttribute("data-mobile-min-height");a.matches&&t({matches:a.matches,elementToHandle:r,url:u,height:c}),a.addEventListener("change",({matches:b})=>t({matches:b,elementToHandle:r,url:u,height:c})),o.matches&&t({matches:o.matches,elementToHandle:r,url:h,height:g}),o.addEventListener("change",({matches:b})=>t({matches:b,elementToHandle:r,url:h,height:g})),l.matches&&t({matches:l.matches,elementToHandle:r,url:m,height:v}),l.addEventListener("change",({matches:b})=>t({matches:b,elementToHandle:r,url:m,height:v}))};(()=>{s.forEach(i)})()};document.addEventListener("DOMContentLoaded",_w);var pU=Qi(Mg());var TU=Qi(Ng());$(document).ready(function(){var s=$(".cmp-di-promo-container--carousel .cmp-di-promo-container__content"),e=s.data("prev-label"),t=s.data("next-label"),i=s.data("slide-message"),n=s.data("single-slide-message"),r=s.data("carousel-with-nav"),a=s.data("carousel-without-nav");if(i&&s.removeAttr("data-slide-message"),n&&s.removeAttr("data-single-slide-message"),r&&s.removeAttr("data-carousel-with-nav"),a&&s.removeAttr("data-carousel-without-nav"),s.length){let c=function(){var g=s.slick("getSlick"),m=g.currentSlide+1,v=g.options.slidesToShow,b=g.slideCount,A=Math.min(m+v-1,b),R=v===1||m===A?n:i;if(R){var F=R.replace("{current}",m).replace("{start}",m).replace("{end}",A).replace("{total}",b);o.text(F)}},h=function(){var g=s.slick("getSlick"),m=g.slideCount>g.options.slidesToShow,v=m?r:a;if(v){var b=v.replace("{total}",g.slideCount);s.attr("aria-label",b)}};var o=$("<div>").attr({"aria-live":"polite","aria-atomic":"true",class:"sr-only"}).appendTo(s.parent());s.slick({accessibility:!0,slidesToShow:3,slidesToScroll:1,dots:!1,infinite:!1,arrows:!0,swipe:!1,prevArrow:e?'<a href="#" class="cmp-di-promo-container__arrow-icon nav-left" aria-label="'+e+'"><span class="icon"></span></a>':'<a href="#" class="cmp-di-promo-container__arrow-icon nav-left"><span class="icon"></span></a>',nextArrow:t?'<a href="#" class="cmp-di-promo-container__arrow-icon nav-right" aria-label="'+t+'"><span class="icon"></span></a>':'<a href="#" class="cmp-di-promo-container__arrow-icon nav-right"><span class="icon"></span></a>',responsive:[{breakpoint:769,settings:{slidesToShow:1,slidesToScroll:1}}]}),h(),setTimeout(c,500),s.on("afterChange",c)}function l(){$(".cmp-di-promo-container--carousel").each(function(c,h){var g=$(h).find(".slick-slide.slick-active");$(h).find(".slick-slide").removeClass("prev-slide next-slide"),g.length&&(g.first().prev().length&&g.first().prev().addClass("prev-slide"),g.last().next().length?($(".cmp-di-promo-container--carousel .nav-right.slick-arrow").removeClass("slick-disabled"),g.last().next().addClass("next-slide")):$(".cmp-di-promo-container--carousel .nav-right.slick-arrow").addClass("slick-disabled"))})}$(".cmp-di-promo-container--carousel .cmp-di-promo-container__arrow-icon").click(l).addClass("bookend-bound"),l(),window.onresize=function(){l(),$(".cmp-di-promo-container--carousel .cmp-di-promo-container__arrow-icon").hasClass("bookend-bound")||$(".cmp-di-promo-container--carousel .cmp-di-promo-container__arrow-icon").click(l).addClass("bookend-bound")};var u=$(".promocontainer.cmp-di-promo-container.main-promo-set-container");u.length>0&&u.parents(".content-width-di").css("max-width","100%")});function vI(){let s=".cmp-di-image",e=s+"__share-container-share";$(e).on("click",function(t){t.preventDefault(),t.stopPropagation(),$(this).closest(s).find(s+"__share-modal").addClass("active")}),$(s+"__share-modal .close").on("click",function(){$(this).closest(s).find(s+"__share-modal").removeClass("active")}),$(s+"__share-copy-link button").on("click",function(){let t=$(this).closest(s).find(s+"__share-copy-link > input")[0];t.select(),navigator.clipboard.writeText(t.value)})}document.addEventListener("DOMContentLoaded",vI,!1);function TI(){let s=".cmp-di-social-share__share-container-share",e=".cmp-di-social-share__share-container-download",t=".cmp-di-social-share__share-container-print";$(s).on("click",function(i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),$(".cmp-di-social-share__share-modal").hasClass("active")?$(".cmp-di-social-share__share-modal").removeClass("active"):$(".cmp-di-social-share__share-modal").addClass("active")}),$(t).on("click",function(i){i.preventDefault(),window.print()}),$(e).on("click",function(i){i.preventDefault()})}$(".cmp-di-share-bar__menu-link").on("click",function(){var s=encodeURIComponent(window.location.href),e=navigator.userAgent.indexOf(".NET CLR")>-1,t=e||navigator.appVersion.indexOf("MSIE")!=-1,i=$(this).attr("data-provider"),n="",r=new Date().getTime(),a=encodeURI(window.location.pathname),o=a.substring(0,a.lastIndexOf(".html"))+".deloitte-dcomsocial.";switch(t&&isTMP?n=location.protocol+siteDomain+o+i+".html?p="+s+"&isTMP="+isTMP+"&tmpPagePath="+dataLayer.page.attributes.pagename+"&id="+r:t&&!isTMP?n=location.protocol+siteDomain+o+i+".html?p="+s+"&id="+r:isTMP?n=location.protocol+siteDomain+o+i+".html?isTMP="+isTMP+"&tmpPagePath="+dataLayer.page.attributes.pagename+"&id="+r:n=o+i+".html?id="+r,i){case"pinterest":windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=280,width=600";break;case"twitter":windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=280,width=600";break;default:windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=480,width=600"}window.open(n,"Share",windowOptions)});$(".social-share-links a").on("click",function(s){s.preventDefault()});document.addEventListener("DOMContentLoaded",TI,!1);function _I(){let s=".cmp-di-share-bar__links.icon-share-alt-o",e=".cmp-di-share-bar__links .cmp-di-share-bar_links-dark .icon-download-alt",t=".cmp-di-share-bar__print-link";$(s).on("click",function(i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),$(this).closest(".cmp-di-share-bar").find(".cmp-di-share-bar__menu").toggleClass("active"),$(i.target).closest(".cmp-di-share-bar").length===0&&$(".cmp-di-share-bar__menu").removeClass("active")}),$(t).on("click",function(i){i.preventDefault(),window.print()}),$(e).on("click",function(i){i.preventDefault()})}$(document).on("click",function(s){$(s.target).is(".icon-share-alt-o")===!1&&$(".cmp-di-share-bar__menu").removeClass("active")});document.addEventListener("DOMContentLoaded",_I,!1);var xU=Qi(Ng());$(document).ready(function(){var s=$(".cmp-di-carousel--standard .cmp-di-carousel__content"),e=s.data("prev-label"),t=s.data("next-label");s.length&&s.slick({accessibility:!0,slidesToShow:1,slidesToScroll:1,infinite:!1,arrows:!0,dots:!0,prevArrow:'<a href="#" class="cmp-di-carousel__arrow-icon nav-left" aria-label='+e+'><span class="icon"></span></a>',nextArrow:'<a href="#" class="cmp-di-carousel__arrow-icon nav-right" aria-label='+t+'><span class="icon"></a>'})});function bI(){let s=".cmp-di-subscription-banner",e=".cmp-sectional-divider-hide-content";$(s+"--close").find("button").on("click",function(n){$(n.target).closest(s).toggleClass("active")});function t(n){for(var r=n.offsetTop,a=n.offsetLeft,o=n.offsetWidth,l=n.offsetHeight;n.offsetParent;)n=n.offsetParent,r+=n.offsetTop,a+=n.offsetLeft;return r<window.pageYOffset+window.innerHeight&&a<window.pageXOffset+window.innerWidth&&r+l>window.pageYOffset&&a+o>window.pageXOffset}function i(){typeof isEditMode<"u"&&isEditMode=="false"&&$(e).addClass("hide-content-default"),$(s).addClass("active"),$(window).scroll(function(){var n=$(this).scrollTop();n>$(window).height()/2&&!t(document.querySelector(".cmp-di-footer"))?$(s).addClass("show"):$(s).removeClass("show")})}i()}document.addEventListener("DOMContentLoaded",bI,!1);function EI(){let s=".cmp-di-accordion";$(".accordion-icon").on("click",function(t){t.stopPropagation(),$(this).closest(s+"__item").toggleClass("active")});function e(){$(s).find(s+"__item").each((t,i)=>{$(i).find(s+"__button").hasClass("cmp-di-accordion__button--expanded")&&$(i).addClass("active")})}e()}document.addEventListener("DOMContentLoaded",EI,!1);document.addEventListener("DOMContentLoaded",function(){$(".accordion-icon").attr("tabindex",0),$(".accordion-icon").on("keydown",function(s){if(s.key==="Enter"){let e=$(this).closest(".cmp-di-accordion__item"),t=e.find('[data-cmp-hook-accordion="panel"]'),i=e.find('[data-cmp-hook-accordion="button"]'),n=t.hasClass("cmp-di-accordion__panel--expanded");t.toggleClass("cmp-di-accordion__panel--expanded cmp-di-accordion__panel--hidden",!n),i.toggleClass("cmp-di-accordion__button--expanded",!n),e.toggleClass("active",!n)}})});var SI=()=>{let s=i=>{let n=Math.floor(i/3600),r=Math.floor(i%3600/60),a=Math.floor(i%3600%60),o=n<10?`0${n}`:`${n}`,l=r<10?`0${r}`:`${r}`,u=a<10?`0${a}`:`${a}`;return n>0?`${o}:${l}:${u}`:`${l}:${u}`},e=()=>{var i=document.getElementById("copyLinkButton"),n=document.getElementById("copyLinkField"),r=document.getElementById("copyNotification");i.addEventListener("click",function(){n.select(),document.execCommand("copy"),n.blur(),r.classList.add("show"),setTimeout(function(){r.classList.remove("show")},2e3)}),n.addEventListener("mousedown",function(a){a.preventDefault()})},t=async i=>{let n=".cmp-di-podcast__libsyn-player__",r=i.querySelector(`${n}play-btn`),a=r.querySelector(`${n}play-btn__control-text`),o=i.querySelector(`${n}seek-slider`),l=i.querySelector("audio"),u=i.querySelector(`${n}played`),c=i.querySelector(`${n}total`),h=i.querySelector(".cmp-di-podcast__image"),g="play",m=null;r.addEventListener("click",()=>{i.classList.toggle("paused"),a.textContent=a.textContent==="Play"?"Pause":"Play",g==="play"?(l.play(),requestAnimationFrame(v),r.setAttribute("aria-label","Pause Podcast"),g="pause"):(l.pause(),cancelAnimationFrame(m),r.setAttribute("aria-label","Play Podcast"),g="play");let b=r.previousElementSibling?.querySelector("source").getAttribute("src");i.querySelector(`[data-url="${b}"]`)?.click()}),o.addEventListener("input",()=>{u.textContent=s(o.value),l.paused||cancelAnimationFrame(m)}),o.addEventListener("change",()=>{l.currentTime=o.value,l.paused||requestAnimationFrame(v)}),o.addEventListener("input",b=>{i.style.setProperty("--seek-before-width",b.target.value/b.target.max*100+"%")});let v=()=>{o.value=Math.floor(l.currentTime),l.buffered.length>0&&(o.bufferValue=Math.floor(l.buffered.end(l.buffered.length-1)),i.style.setProperty("--seek-after-width",`${o.bufferValue/o.max*100}%`)),u.textContent=s(o.value),i.style.setProperty("--seek-before-width",`${o.value/o.max*100}%`),m=requestAnimationFrame(v)};l.readyState>0?(c.textContent=s(l.duration),o.max=Math.floor(l.duration)):l.addEventListener("loadedmetadata",()=>{c.textContent=s(l.duration),o.max=Math.floor(l.duration)}),e()};document.querySelectorAll(".cmp-di-podcast__container").forEach(i=>{t(i)})};document.addEventListener("DOMContentLoaded",SI);var xI=()=>{let s=document.querySelectorAll(".cmp-di-podcast-share-modal__open, .cmp-di-podcast-share-modal__close");if(!s.length)return;let e=n=>n?.target?.closest(".cmp-di-podcast-share-modal"),t=n=>{let r=e(n);r.classList.contains("modal-visible")?r.classList.remove("modal-visible"):r.classList.add("modal-visible")},i=n=>{n.addEventListener("click",t)};s.forEach(i)};document.addEventListener("DOMContentLoaded",xI);var AI=()=>{var s=encodeURIComponent(window.location.href),e=navigator.userAgent.indexOf(".NET CLR")>-1,t=e||navigator.appVersion.indexOf("MSIE")!==-1,i,n,r=function(o){var l="",u=new Date().getTime(),c=encodeURI(window.location.pathname),h=c.substring(0,c.lastIndexOf(".html"))+".deloitte-dcomsocial.";switch(t&&isTMP?l=location.protocol+siteDomain+h+o+".html?p="+s+"&isTMP="+isTMP+"&tmpPagePath="+dataLayer.page.attributes.pagename+"&id="+u+"&anchorId="+i+"&shareOption="+n:t&&!isTMP?l=location.protocol+siteDomain+h+o+".html?p="+s+"&id="+u+"&anchorId="+i+"&shareOption="+n:isTMP?l=location.protocol+siteDomain+h+o+".html?isTMP="+isTMP+"&tmpPagePath="+dataLayer.page.attributes.pagename+"&id="+u+"&anchorId="+i+"&shareOption="+n:l=h+o+".html?id="+u+"&anchorId="+i+"&shareOption="+n,o){case"pinterest":windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=280,width=600";break;case"twitter":windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=280,width=600";break;default:windowOptions="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=480,width=600"}window.open(l,"Share",windowOptions)};window.launchShare=r,Array.from(document.querySelectorAll(".cmp-di-podcast .cmp-di-podcast__socials a:not(.cmp-podcast-subscription-modal__subscription-link)")).forEach(o=>{o.addEventListener("click",l=>{l.preventDefault()})})};document.addEventListener("DOMContentLoaded",AI,!1);function CI(){let s=".cmp-di-infographic",e=s+"__share-container-share",t=".hide-show-more-button";$(e).on("click",function(r){r.preventDefault(),r.stopPropagation(),$(this).closest(s).find(s+"__share-modal").addClass("active")}),$(s+"__share-modal .close").on("click",function(){$(this).closest(s).find(s+"__share-modal").removeClass("active")}),$(s+"__share-copy-link button").on("click",function(){$(this).closest(s).find(s+"__share-copy-link > input").each(function(){this.select(),navigator.clipboard.writeText(this.value)})}),$(s+"--show-more button").on("click",function(){$(this).closest(s).toggleClass("cmp-di-infographic--show-less"),$(this).closest(s).hasClass("cmp-di-infographic--show-less")?$(this).text($(this).attr("data-show-less")):$(this).text($(this).attr("data-show-more"))});function i(){$(s).each(function(){let r=$(this);r.height()>screen.height&&!r.find(t).length&&(r.addClass("cmp-di-infographic--show-button"),r.find(".cmp-di-infographic").addClass("cmp-di-infographic--show-button"))})}function n(){i()}n()}document.addEventListener("DOMContentLoaded",CI,!1);var xl=".js-cmp-di-aside",n_=".js-cmp-di-aside__content__text",r_=".js-cmp-di-aside__control__label",a_=550,o_=new WeakMap,Fg=s=>{if(!s)return[];let e=Array.from(s.querySelectorAll(gT)),t=Array.from(s.querySelectorAll("[tabindex]"));return Array.from(new Set([...e,...t]))},Wd=(s,e)=>{!s||!Array.isArray(s)||s.forEach(t=>{!t||(e?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1"))})},wI=(s,e)=>{let t=[],i=[];return!s||!e?{visible:t,hidden:i}:(s.forEach(n=>{if(!n||typeof n.getBoundingClientRect!="function")return;(n.getBoundingClientRect().bottom-e.top<=a_?t:i).push(n)}),{visible:t,hidden:i})},l_=()=>{document.querySelectorAll(xl).forEach(function(s){let e=s.querySelector(n_);if(!e)return;let t=e.getBoundingClientRect?.();if(!t)return;let i=Fg(e),{visible:n,hidden:r}=wI(i,t);s._visibleFocusables=n,o_.set(s,r),s.classList?.contains("active")?Wd(i,!0):(Wd(n,!0),Wd(r,!1))})},t_=s=>{if(!s||s.key!==mT)return;let e=s.currentTarget,i=e.closest?.(xl)?.querySelector?.(r_),n=Fg(e).filter(o=>o&&o.getAttribute("tabindex")!=="-1");if(!n.length||!i)return;let r=n[n.length-1],a=document.activeElement;!s.shiftKey&&a===r?(s.preventDefault(),i.focus()):s.shiftKey&&a===i&&(s.preventDefault(),r.focus())},i_=s=>{if(!s)return;let e=s.closest?.(xl),t=e?.querySelector?.(n_);if(!e||!t)return;let i=e.classList?.toggle("active")??!1;s.setAttribute?.("aria-expanded",i),s.textContent!==void 0&&(s.textContent=i?s.getAttribute("data-show-less"):s.getAttribute("data-show-more")),requestAnimationFrame(()=>{if(e.offsetHeight!==void 0){if(e.offsetHeight,l_(),i&&Wd(Fg(t),!0),i){t.addEventListener(vl,t_);let r=(o_.get(e)||[])[0];r?.focus?r.focus():s.focus?.()}else t.removeEventListener(vl,t_),s.focus?.();e.classList?.add?.("cmp-di-aside--show-button")}})},s_=()=>{document.querySelectorAll(xl).forEach(function(s){let e=s.offsetHeight>a_,t=window.Granite?.author;e&&(s.classList.add("cmp-di-aside--show-button"),t&&s.classList.add("edit-mode")),l_()})},II=()=>{let s=document.querySelectorAll(xl);if(!s.length)return;let e=Array.from(s).flatMap(n=>Array.from(n.querySelectorAll("img"))),t=0,i=()=>{t++,e.length&&t===e.length&&s_()};e.length?e.forEach(function(n){n.complete?i():n.addEventListener("load",i)}):s_()},DI=()=>{document.querySelectorAll(`${xl} ${r_}`).forEach(s=>{s.addEventListener("click",e=>{e.preventDefault(),i_(e.currentTarget)}),s.addEventListener(vl,e=>{(e.key===yl||e.key===Hd||e.key==="Spacebar")&&(e.preventDefault(),i_(e.currentTarget))})})};function LI(){DI(),setTimeout(II,3e3)}document.addEventListener("DOMContentLoaded",LI,!1);var Al=Qi(Mg());var kI=()=>{let s=".cmp-text sup a, .cmp-di-endnotes--standard sup a, .cmp-di-endnotes--standard a[href^='#']",e=".cmp-di-endnotes--standard",t=".cmp-di-header",i=".optanon-alert-box-wrapper",n=".cookie-container",o=()=>$(t).length&&$(t).is(":visible"),l=()=>$(i).length&&$(i).is(":visible")||$(n).length&&$(n).is(":visible"),u=()=>l()?170:o()?$(t).outerHeight()+0:0,c=()=>{Ud()||$(s).each(function(){let O=$(this);O.on("click",function(E){E.preventDefault(),E.stopPropagation()});let H=O.attr("href"),W=$(H);if(W.length){let E=W.clone();E.find('a[href*="#endnote-sup-"]').remove();let X=E.html();h(O,{originalHTML:X});let Z=$("#js-endnotesTooltip .js-cmp-di-endnotes-tooltip__copy-btn").attr("data-endnote-reference-label");O.attr("aria-label",Z)}})},h=(O,H)=>{let W=g(H),E=new Al.Tooltip(O[0],{title:W,placement:"top",fallbackPlacements:["bottom"],trigger:"manual",html:!0,delay:{show:300,hide:500},container:"body",boundary:"viewport",sanitize:!1,customClass:"cmp-di-endnotes-custom-tooltip js-cmp-di-endnotes-custom-tooltip",offset:[218,13]}),X;O.on("mouseenter focus",function(){clearTimeout(X),E.show()}),O.on("click",function(){clearTimeout(X);let Z=$(".js-cmp-di-endnotes-custom-tooltip");(!Z.length||!Z.is(":visible"))&&(E.show(),setTimeout(()=>{Z.find(".js-cmp-di-endnotes-tooltip__text-content").focus()},10))}),O.on("mouseleave blur",function(Z){Z.type==="blur"&&Z.relatedTarget&&$(Z.relatedTarget).closest(".js-cmp-di-endnotes-custom-tooltip").length||(X=setTimeout(()=>{let re=$(".js-cmp-di-endnotes-custom-tooltip");!re.hasClass("tooltip-hovered")&&!re.find(":focus").length&&E.hide()},300))}),O.on("keydown",function(Z){if(Z.key==="Tab"&&!Z.shiftKey){let re=$(".js-cmp-di-endnotes-custom-tooltip");re.length&&re.is(":visible")&&(Z.preventDefault(),re.find(".js-cmp-di-endnotes-tooltip__text-content").focus())}}),O.on("shown.bs.tooltip",function(){let Z=$(".js-cmp-di-endnotes-custom-tooltip");Z.on("mouseenter",function(){clearTimeout(X),$(this).addClass("tooltip-hovered")}),Z.on("mouseleave",function(){$(this).removeClass("tooltip-hovered"),X=setTimeout(()=>E.hide(),200)}),Z.on("keydown",function(re){let oe=Z.find('[tabindex="0"]:visible, button:visible'),ve=oe.index($(re.target)),Ce=ve===oe.length-1,we=ve===0;(re.key==="Escape"||re.key==="Tab"&&(!re.shiftKey&&Ce||re.shiftKey&&we))&&(re.preventDefault(),E.hide(),O.focus())}),Z.on("blur",'[tabindex="0"], button',function(re){setTimeout(()=>{!Z.find(":focus").length&&!Z.hasClass("tooltip-hovered")&&E.hide()},100)}),Z.on(ST,'[tabindex="0"], button',function(re){re.preventDefault()}),m(Z)}),O.data("bs-tooltip-instance",E)},g=O=>{let H=$("#js-endnotesTooltip");if(!H.length)return O.originalHTML||O.tooltipText;let W=H.clone(),E=W.find(".js-cmp-di-endnotes-tooltip__html-content"),X=W.find(".js-cmp-di-endnotes-tooltip__copy-btn"),Z=H.find(".js-cmp-di-endnotes-tooltip__copy-btn");if(["data-copy-text","data-copied-text","data-copy-label","data-copied-label","data-fallback-content"].forEach(oe=>{let ve=Z.attr(oe);ve&&X.attr(oe,ve)}),O.originalHTML){E.html(O.originalHTML);let oe=$("<div>").html(O.originalHTML);oe.find("a[href]").each(function(){let we=$(this),Ge=we.text().trim(),Xe=we.attr("href"),Re=Ge?`${Ge} (${Xe})`:Xe;we.replaceWith(Re)});let ve=oe.text().trim(),Ce=O.originalHTML;X.attr("data-copy-content-text",ve),X.attr("data-copy-content-html",Ce),X.show()}else{let oe=O.tooltipText||X.attr("data-fallback-content");E.html(`<p class="cmp-di-endnotes-tooltip__text">${oe}</p>`),X.attr("data-copy-content-text",oe),X.attr("data-copy-content-html",`<p>${oe}</p>`),X.show()}return W.find(".js-cmp-di-endnotes-tooltip__body")[0].outerHTML},m=O=>{let H=O.find(".js-cmp-di-endnotes-tooltip__copy-btn");H.off("click.endnotes-copy keydown.endnotes-copy");let W=E=>{E.preventDefault(),E.stopPropagation(),v(H)};H.on("click.endnotes-copy",W),H.on("keydown.endnotes-copy",E=>{(E.key==="Enter"||E.key===" ")&&W(E)})},v=O=>{let H=O.attr("data-copy-content-text"),W=O.attr("data-copy-content-html");H&&W&&b(H,W,O)},b=async(O,H,W)=>{let E=()=>{let X=W.attr("data-copied-text"),Z=W.attr("data-copy-text"),re=W.attr("data-copied-label"),oe=W.attr("data-copy-label");W.addClass("copied"),W.find(".js-cmp-di-endnotes-tooltip__copy-text").text(X),W.attr("aria-label",re);let ve=W.closest(".js-cmp-di-endnotes-tooltip__body").find(".js-cmp-di-endnotes-tooltip__content");ve.addClass("copied-highlight"),setTimeout(()=>{W.removeClass("copied"),W.find(".js-cmp-di-endnotes-tooltip__copy-text").text(Z),W.attr("aria-label",oe),ve.removeClass("copied-highlight")},2e3)};try{cg(O,H,E)}catch{let Z=$("<textarea>").val(O).appendTo("body");Z[0].select(),document.execCommand("copy"),Z.remove(),E()}},A=O=>{let H=document.getElementById("modalCopyBtn");if(!H)return;let W=document.createElement("div");W.innerHTML=O,W.querySelectorAll("a[href]").forEach(oe=>{let ve=oe.textContent.trim(),Ce=oe.getAttribute("href"),we=ve?`${ve} (${Ce})`:Ce;oe.outerHTML=we});let X=W.textContent.trim(),Z=O;H.replaceWith(H.cloneNode(!0));let re=document.getElementById("modalCopyBtn");re.addEventListener("click",function(oe){oe.preventDefault(),oe.stopPropagation(),R(X,Z,re)}),re.addEventListener("keydown",function(oe){(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),oe.stopPropagation(),R(X,Z,re))})},R=async(O,H,W)=>{let E=()=>{let X=W.getAttribute("data-copied-text"),Z=W.getAttribute("data-copy-text"),re=W.getAttribute("data-copied-label"),oe=W.getAttribute("data-copy-label");W.classList.add("copied");let ve=W.querySelector(".js-cmp-di-endnotes-modal__copy-text");ve&&(ve.textContent=X),W.setAttribute("aria-label",re);let Ce=document.querySelector(".js-endnoteModalContent");Ce&&(Ce.classList.add("copy-highlighted"),setTimeout(()=>Ce.classList.remove("copy-highlighted"),1500)),setTimeout(()=>{W.classList.remove("copied"),ve&&(ve.textContent=Z),W.setAttribute("aria-label",oe)},2e3)};try{cg(O,H,E)}catch{let Z=document.createElement("textarea");Z.value=O,document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z),E()}};(()=>{if(!Ud()||typeof Al.Modal>"u")return;let O=null,H=document.getElementById("endnotesMobileModal");if(H){H.parentElement!==document.body&&document.body.appendChild(H);let W=Al.Modal.getInstance(H);W&&W.dispose(),O=new Al.Modal(H,{backdrop:!0,keyboard:!0,focus:!0});let E=Z=>{let re=window.scrollY,{body:oe,documentElement:ve}=document;oe.classList.add("modal-open"),ve.classList.add("modal-open"),Object.assign(oe.style,{overflow:"hidden",position:"fixed",top:`-${re}px`,width:"100%"}),H.setAttribute("data-scroll-y",re)},X=Z=>{let{body:re,documentElement:oe}=document;re.classList.remove("modal-open"),oe.classList.remove("modal-open"),Object.assign(re.style,{overflow:"",position:"",top:"",width:""});let ve=parseInt(H.getAttribute("data-scroll-y")||"0",10);window.scrollTo(0,ve),H.removeAttribute("data-scroll-y")};H.addEventListener("show.bs.modal",E),H.addEventListener("hidden.bs.modal",X)}else return;$(s).on("click",function(W){if(!Ud())return;W.preventDefault();let X=$(this).attr("href"),Z=$(X);if(Z.length){let re=Z.clone();re.find('a[href*="#endnote-sup-"]').remove();let oe=re.html(),ve=document.querySelector(".js-endnoteModalContent");ve&&O&&(ve.innerHTML=oe,A(oe),H.offsetHeight,O.show())}})})(),c()};document.addEventListener("DOMContentLoaded",kI);var RI=()=>{let s=Array.from(document.querySelectorAll(".cmp-di-profile-promo"));s.length&&s.forEach(e=>{let t=e.querySelector(".cmp-di-profile-promo__name a");t&&(t.addEventListener("keydown",function(i){i.key==="Enter"&&i.target.tagName==="A"&&(i.preventDefault(),i.target.click())}),t.addEventListener("click",function(i){i.preventDefault();let n=e.querySelector(".cmp-di-modal__close");n&&n.focus()}))})};document.addEventListener("DOMContentLoaded",RI);var ge=Qi(wr()),st=Qi(Kd()),V0=Qi(C_()),zm=Qi(U_());function Ci(){return Ci=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Ci.apply(null,arguments)}var wl=Qi(wr()),H_="https://example.com",TD=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=wl.default.location&&wl.default.location.href||"");var i=/^\/\//.test(e),n=!wl.default.location&&!/\/\//i.test(e);e=new wl.default.URL(e,wl.default.location||H_);var r=new URL(t,e);return n?r.href.slice(H_.length):i?r.href.slice(r.protocol.length):r.href},Il=TD;var Qd=function(){function s(){this.listeners={}}var e=s.prototype;return e.on=function(i,n){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(n)},e.off=function(i,n){if(!this.listeners[i])return!1;var r=this.listeners[i].indexOf(n);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(r,1),r>-1},e.trigger=function(i){var n=this.listeners[i];if(!!n)if(arguments.length===2)for(var r=n.length,a=0;a<r;++a)n[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=n.length,u=0;u<l;++u)n[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(n){i.push(n)})},s}();var qg=Qi(wr()),_D=function(e){return qg.default.atob?qg.default.atob(e):Buffer.from(e,"base64").toString("binary")};function rc(s){for(var e=_D(s),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}var Kg=class extends Qd{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}},bD=String.fromCharCode(9),zg=function(s){let e=/([0-9.]*)?@?([0-9.]*)?/.exec(s||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},ED=function(){let s="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+s+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},$s=function(s){let e={};if(!s)return e;let t=s.split(ED()),i=t.length,n;for(;i--;)t[i]!==""&&(n=/([^=]*)=(.*)/.exec(t[i]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},V_=s=>{let e=s.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t},Yg=class extends Qd{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,a)=>{let o=a(e);return o===e?r:r.concat([o])},[e]).forEach(r=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),t=/^#EXTM3U/.exec(r),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),t){i=Ci(zg(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(r),t){if(i={type:"tag",tagType:"map"},t[1]){let a=$s(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=zg(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),t){i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=$s(t[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=V_(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(r),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=$s(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(r),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(r),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=$s(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(r),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=$s(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=$s(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(bD)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=$s(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=zg(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=$s(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=$s(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=$s(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);let o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=$s(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(r),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=$s(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});let a=/^X-([A-Z]+-)+[A-Z]+$/;for(let o in i.attributes){if(!a.test(o))continue;let l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(r),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),t){i={type:"tag",tagType:"content-steering"},i.attributes=$s(t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),t){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=$s(t[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=V_(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(r),t){i={type:"tag",tagType:"define"},i.attributes=$s(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:n}){typeof i!="function"&&(i=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:t,segment:n}),!0})}addTagMapper({expression:e,map:t}){let i=n=>e.test(n)?t(n):n;this.tagMappers.push(i)}},SD=s=>s.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Oa=function(s){let e={};return Object.keys(s).forEach(function(t){e[SD(t)]=s[t]}),e},Wg=function(s){let{serverControl:e,targetDuration:t,partTargetDuration:i}=s;if(!e)return;let n="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(r)&&(e[r]=o,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[r]<o&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${o})`}),e[r]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)},Jd=class extends Qd{constructor(e={}){super(),this.lineStream=new Kg,this.parseStream=new Yg,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;let t=this,i=[],n={},r,a,o=!1,l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let g=0,m=0,v={};this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&r&&(n.map=r),!n.key&&a&&(n.key=a),!n.timeline&&typeof h=="number"&&(n.timeline=h),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(b){let A,R;if(t.manifest.definitions){for(let F in t.manifest.definitions)if(b.uri&&(b.uri=b.uri.replace(`{$${F}}`,t.manifest.definitions[F])),b.attributes)for(let O in b.attributes)typeof b.attributes[O]=="string"&&(b.attributes[O]=b.attributes[O].replace(`{$${F}}`,t.manifest.definitions[F]))}({tag(){({version(){b.version&&(this.manifest.version=b.version)},"allow-cache"(){this.manifest.allowCache=b.allowed,"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let F={};"length"in b&&(n.byterange=F,F.length=b.length,"offset"in b||(b.offset=g)),"offset"in b&&(n.byterange=F,F.offset=b.offset),g=F.offset+F.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),b.title&&(n.title=b.title),b.duration>0&&(n.duration=b.duration),b.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!b.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(b.attributes.METHOD==="NONE"){a=null;return}if(!b.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(b.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:b.attributes};return}if(b.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:b.attributes.URI};return}if(b.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(b.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(b.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),b.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(b.attributes.KEYID&&b.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:b.attributes.KEYFORMAT,keyId:b.attributes.KEYID.substring(2)},pssh:rc(b.attributes.URI.split(",")[1])};return}b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},typeof b.attributes.IV<"u"&&(a.iv=b.attributes.IV)},"media-sequence"(){if(!isFinite(b.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+b.number});return}this.manifest.mediaSequence=b.number},"discontinuity-sequence"(){if(!isFinite(b.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number});return}this.manifest.discontinuitySequence=b.number,h=b.number},"playlist-type"(){if(!/VOD|EVENT/.test(b.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+b.playlist});return}this.manifest.playlistType=b.playlistType},map(){r={},b.uri&&(r.uri=b.uri),b.byterange&&(r.byterange=b.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!b.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),Ci(n.attributes,b.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}let F=this.manifest.mediaGroups[b.attributes.TYPE];F[b.attributes["GROUP-ID"]]=F[b.attributes["GROUP-ID"]]||{},A=F[b.attributes["GROUP-ID"]],R={default:/yes/i.test(b.attributes.DEFAULT)},R.default?R.autoselect=!0:R.autoselect=/yes/i.test(b.attributes.AUTOSELECT),b.attributes.LANGUAGE&&(R.language=b.attributes.LANGUAGE),b.attributes.URI&&(R.uri=b.attributes.URI),b.attributes["INSTREAM-ID"]&&(R.instreamId=b.attributes["INSTREAM-ID"]),b.attributes.CHARACTERISTICS&&(R.characteristics=b.attributes.CHARACTERISTICS),b.attributes.FORCED&&(R.forced=/yes/i.test(b.attributes.FORCED)),A[b.attributes.NAME]=R},discontinuity(){h+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=b.dateTimeString,this.manifest.dateTimeObject=b.dateTimeObject),n.dateTimeString=b.dateTimeString,n.dateTimeObject=b.dateTimeObject;let{lastProgramDateTime:F}=this;this.lastProgramDateTime=new Date(b.dateTimeString).getTime(),F===null&&this.manifest.segments.reduceRight((O,H)=>(H.programDateTime=O-H.duration*1e3,H.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(b.duration)||b.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+b.duration});return}this.manifest.targetDuration=b.duration,Wg.call(this,this.manifest)},start(){if(!b.attributes||isNaN(b.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:b.attributes["TIME-OFFSET"],precise:b.attributes.PRECISE}},"cue-out"(){n.cueOut=b.data},"cue-out-cont"(){n.cueOutCont=b.data},"cue-in"(){n.cueIn=b.data},skip(){this.manifest.skip=Oa(b.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",b.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;let F=this.manifest.segments.length,O=Oa(b.attributes);n.parts=n.parts||[],n.parts.push(O),O.byterange&&(O.byterange.hasOwnProperty("offset")||(O.byterange.offset=m),m=O.byterange.offset+O.byterange.length);let H=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${H} for segment #${F}`,b.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((W,E)=>{W.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${E} lacks required attribute(s): LAST-PART`})})},"server-control"(){let F=this.manifest.serverControl=Oa(b.attributes);F.hasOwnProperty("canBlockReload")||(F.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Wg.call(this,this.manifest),F.canSkipDateranges&&!F.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let F=this.manifest.segments.length,O=Oa(b.attributes),H=O.type&&O.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(O),O.byterange&&(O.byterange.hasOwnProperty("offset")||(O.byterange.offset=H?m:0,H&&(m=O.byterange.offset+O.byterange.length)));let W=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${W} for segment #${F}`,b.attributes,["TYPE","URI"]),!!O.type)for(let E=0;E<n.preloadHints.length-1;E++){let X=n.preloadHints[E];!X.type||X.type===O.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${W} for segment #${F} has the same TYPE ${O.type} as preload hint #${E}`})}},"rendition-report"(){let F=Oa(b.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(F);let O=this.manifest.renditionReports.length-1,H=["LAST-MSN","URI"];o&&H.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${O}`,b.attributes,H)},"part-inf"(){this.manifest.partInf=Oa(b.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",b.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Wg.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Oa(b.attributes));let F=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${F}`,b.attributes,["ID","START-DATE"]);let O=this.manifest.dateRanges[F];O.endDate&&O.startDate&&new Date(O.endDate)<new Date(O.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),O.duration&&O.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),O.plannedDuration&&O.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});let H=!!O.endOnNext;if(H&&!O.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),H&&(O.duration||O.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),O.duration&&O.endDate){let E=O.startDate.getTime()+O.duration*1e3;this.manifest.dateRanges[F].endDate=new Date(E)}if(!v[O.id])v[O.id]=O;else{for(let E in v[O.id])if(!!O[E]&&JSON.stringify(v[O.id][E])!==JSON.stringify(O[E])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}let W=this.manifest.dateRanges.findIndex(E=>E.id===O.id);this.manifest.dateRanges[W]=Ci(this.manifest.dateRanges[W],O),v[O.id]=Ci(v[O.id],O),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Oa(b.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",b.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};let F=(O,H)=>{if(O in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${O}`});return}this.manifest.definitions[O]=H};if("QUERYPARAM"in b.attributes){if("NAME"in b.attributes||"IMPORT"in b.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}let O=this.params.get(b.attributes.QUERYPARAM);if(!O){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${b.attributes.QUERYPARAM}`});return}F(b.attributes.QUERYPARAM,decodeURIComponent(O));return}if("NAME"in b.attributes){if("IMPORT"in b.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in b.attributes)||typeof b.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${b.attributes.NAME}`});return}F(b.attributes.NAME,b.attributes.VALUE);return}if("IMPORT"in b.attributes){if(!this.mainDefinitions[b.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${b.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}F(b.attributes.IMPORT,this.mainDefinitions[b.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:b.attributes,uri:b.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",b.attributes,["BANDWIDTH","URI"])}}[b.tagType]||l).call(t)},uri(){n.uri=b.uri,i.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),a&&(n.key=a),n.timeline=h,r&&(n.map=r),m=0,this.lastProgramDateTime!==null&&(n.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=n.duration*1e3),n={}},comment(){},custom(){b.segment?(n.custom=n.custom||{},n.custom[b.customType]=b.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[b.customType]=b.data)}})[b.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,i){let n=[];i.forEach(function(r){t.hasOwnProperty(r)||n.push(r)}),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var wo=Qi(wr()),Io={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},xD=["video","audio","text"],j_=["Video","Audio","Text"],Xg=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,n){var r=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(n).toString(16)).slice(-2);return"avc1."+r+"00"+a})};var ar=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(n){n=n.trim();var r;xD.forEach(function(a){var o=Io[a].exec(n.toLowerCase());if(!(!o||o.length<=1)){r=a;var l=n.substring(0,o[1].length),u=n.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),r||i.push({type:n,details:"",mediaType:"unknown"})}),i},G_=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return ar(r.playlists[0].attributes.CODECS)}return null};var Qg=function(e){return e===void 0&&(e=""),Io.audio.test(e.trim().toLowerCase())},AD=function(e){return e===void 0&&(e=""),Io.text.test(e.trim().toLowerCase())},Do=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(r){return Xg(r.trim())}),i="video";t.length===1&&Qg(t[0])?i="audio":t.length===1&&AD(t[0])&&(i="application");var n="mp4";return t.every(function(r){return Io.mp4.test(r)})?n="mp4":t.every(function(r){return Io.webm.test(r)})?n="webm":t.every(function(r){return Io.ogg.test(r)})&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}},Dl=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),wo.default.MediaSource&&wo.default.MediaSource.isTypeSupported&&wo.default.MediaSource.isTypeSupported(Do(e))||t&&wo.default.ManagedMediaSource&&wo.default.ManagedMediaSource.isTypeSupported&&wo.default.ManagedMediaSource.isTypeSupported(Do(e))||!1},Zd=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<j_.length;i++){var n=j_[i];if(Io["muxer"+n].test(t))return!0}return!1})},Jg="mp4a.40.2",q_="avc1.4d400d";var CD=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,wD=/^application\/dash\+xml/i,Zg=function(e){return CD.test(e)?"hls":wD.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null};var z_=Qi(wr());var ID=function(e){return e.toString(2).length},DD=function(e){return Math.ceil(ID(e)/8)};var tm=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},LD=function(e){return tm(e)},bt=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!LD(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))};var Ts=z_.default.BigInt||Number,em=[Ts("0x1"),Ts("0x100"),Ts("0x10000"),Ts("0x1000000"),Ts("0x100000000"),Ts("0x10000000000"),Ts("0x1000000000000"),Ts("0x100000000000000"),Ts("0x10000000000000000")],e3=function(){var s=new Uint16Array([65484]),e=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"}();var im=function(e,t){var i=t===void 0?{}:t,n=i.signed,r=n===void 0?!1:n,a=i.le,o=a===void 0?!1:a;e=bt(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(g,m,v){var b=o?v:Math.abs(v+1-e.length);return g+Ts(m)*em[b]},Ts(0));if(r){var h=em[e.length]/Ts(2)-Ts(1);c=Ts(c),c>h&&(c-=h,c-=h,c-=Ts(2))}return Number(c)},W_=function(e,t){var i=t===void 0?{}:t,n=i.le,r=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Ts(e);for(var a=DD(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=r?l:Math.abs(l+1-o.length);o[u]=Number(e/em[l]&Ts(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},sm=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,bt(e));try{return decodeURIComponent(escape(t))}catch{}return t},eh=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},K_=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return bt(t[0]);var n=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),r=new Uint8Array(n),a=0;return t.forEach(function(o){o=bt(o),r.set(o,a),a+=o.byteLength}),r},ai=function(e,t,i){var n=i===void 0?{}:i,r=n.offset,a=r===void 0?0:r,o=n.mask,l=o===void 0?[]:o;e=bt(e),t=bt(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var g=l[h]?l[h]&e[a+h]:e[a+h];return c===g})};var Bs=Qi(wr());var Y_=function(e,t,i){t.forEach(function(n){for(var r in e.mediaGroups[n])for(var a in e.mediaGroups[n][r]){var o=e.mediaGroups[n][r][a];i(o,n,r,a)}})};var Qb=Qi(jb());var Gb=s=>!!s&&typeof s=="object",os=(...s)=>s.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Gb(e[i])&&Gb(t[i])?e[i]=os(e[i],t[i]):e[i]=t[i]}),e),{}),Jb=s=>Object.keys(s).map(e=>s[e]),n2=(s,e)=>{let t=[];for(let i=s;i<e;i++)t.push(i);return t},Ul=s=>s.reduce((e,t)=>e.concat(t),[]),Zb=s=>{if(!s.length)return[];let e=[];for(let t=0;t<s.length;t++)e.push(s[t]);return e},r2=(s,e)=>s.reduce((t,i,n)=>(i[e]&&t.push(n),t),[]),a2=(s,e)=>Jb(s.reduce((t,i)=>(i.forEach(n=>{t[e(n)]=n}),t),{})),Hl={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Tc=({baseUrl:s="",source:e="",range:t="",indexRange:i=""})=>{let n={uri:e,resolvedUri:Il(s||"",e)};if(t||i){let a=(t||i).split("-"),o=Bs.default.BigInt?Bs.default.BigInt(a[0]):parseInt(a[0],10),l=Bs.default.BigInt?Bs.default.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=Bs.default.BigInt(l)-Bs.default.BigInt(o)+Bs.default.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),n.byterange={length:u,offset:o}}return n},o2=s=>{let e;return typeof s.offset=="bigint"||typeof s.length=="bigint"?e=Bs.default.BigInt(s.offset)+Bs.default.BigInt(s.length)-Bs.default.BigInt(1):e=s.offset+s.length-1,`${s.offset}-${e}`},qb=s=>(s&&typeof s!="number"&&(s=parseInt(s,10)),isNaN(s)?null:s),l2={static(s){let{duration:e,timescale:t=1,sourceDuration:i,periodDuration:n}=s,r=qb(s.endNumber),a=e/t;return typeof r=="number"?{start:0,end:r}:typeof n=="number"?{start:0,end:n/a}:{start:0,end:i/a}},dynamic(s){let{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:n=1,duration:r,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=s,u=qb(s.endNumber),c=(e+t)/1e3,h=i+a,m=c+o-h,v=Math.ceil(m*n/r),b=Math.floor((c-h-l)*n/r),A=Math.floor((c-h)*n/r);return{start:Math.max(0,b),end:typeof u=="number"?u:Math.min(v,A)}}},u2=s=>e=>{let{duration:t,timescale:i=1,periodStart:n,startNumber:r=1}=s;return{number:r+e,duration:t/i,timeline:n,time:e*t}},_m=s=>{let{type:e,duration:t,timescale:i=1,periodDuration:n,sourceDuration:r}=s,{start:a,end:o}=l2[e](s),l=n2(a,o).map(u2(s));if(e==="static"){let u=l.length-1,c=typeof n=="number"?n:r;l[u].duration=c-t/i*u}return l},eE=s=>{let{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:n="",periodStart:r,presentationTime:a,number:o=0,duration:l}=s;if(!e)throw new Error(Hl.NO_BASE_URL);let u=Tc({baseUrl:e,source:t.sourceURL,range:t.range}),c=Tc({baseUrl:e,source:e,indexRange:n});if(c.map=u,l){let h=_m(s);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else i&&(c.duration=i,c.timeline=r);return c.presentationTime=a||r,c.number=o,[c]},dh=(s,e,t)=>{let i=s.sidx.map?s.sidx.map:null,n=s.sidx.duration,r=s.timeline||0,a=s.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(A=>A.referenceType!==1),c=[],h=s.endList?"static":"dynamic",g=s.sidx.timeline,m=g,v=s.mediaSequence||0,b;typeof e.firstOffset=="bigint"?b=Bs.default.BigInt(o)+e.firstOffset:b=o+e.firstOffset;for(let A=0;A<u.length;A++){let R=e.references[A],F=R.referencedSize,O=R.subsegmentDuration,H;typeof b=="bigint"?H=b+Bs.default.BigInt(F)-Bs.default.BigInt(1):H=b+F-1;let W=`${b}-${H}`,X=eE({baseUrl:t,timescale:l,timeline:r,periodStart:g,presentationTime:m,number:v,duration:O,sourceDuration:n,indexRange:W,type:h})[0];i&&(X.map=i),c.push(X),typeof b=="bigint"?b+=Bs.default.BigInt(F):b+=F,m+=O/l,v++}return s.segments=c,s},c2=["AUDIO","SUBTITLES"],d2=1/60,tE=s=>a2(s,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),h2=(s,e)=>{for(let t=0;t<s.length;t++)if(s[t].attributes.NAME===e)return s[t];return null},zb=s=>{let e=[];return Y_(s,c2,(t,i,n,r)=>{e=e.concat(t.playlists||[])}),e},Wb=({playlist:s,mediaSequence:e})=>{s.mediaSequence=e,s.segments.forEach((t,i)=>{t.number=s.mediaSequence+i})},f2=({oldPlaylists:s,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});let n=h2(s,i.attributes.NAME);if(!n||i.sidx)return;let r=i.segments[0],a=n.segments.findIndex(function(l){return Math.abs(l.presentationTime-r.presentationTime)<d2});if(a===-1){Wb({playlist:i,mediaSequence:n.mediaSequence+n.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!n.segments.length&&i.timeline>n.timeline||n.segments.length&&i.timeline>n.segments[n.segments.length-1].timeline)&&i.discontinuitySequence--;return}n.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Wb({playlist:i,mediaSequence:n.segments[a].number})})},p2=({oldManifest:s,newManifest:e})=>{let t=s.playlists.concat(zb(s)),i=e.playlists.concat(zb(e));return e.timelineStarts=tE([s.timelineStarts,e.timelineStarts]),f2({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},_c=s=>s&&s.uri+"-"+o2(s.byterange),Tm=s=>{let e=s.reduce(function(i,n){return i[n.attributes.baseUrl]||(i[n.attributes.baseUrl]=[]),i[n.attributes.baseUrl].push(n),i},{}),t=[];return Object.values(e).forEach(i=>{let n=Jb(i.reduce((r,a)=>{let o=a.attributes.id+(a.attributes.lang||"");return r[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[o].segments.push(...a.segments)),a.attributes.contentProtection&&(r[o].attributes.contentProtection=a.attributes.contentProtection)):(r[o]=a,r[o].attributes.timelineStarts=[]),r[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));t=t.concat(n)}),t.map(i=>(i.discontinuityStarts=r2(i.segments||[],"discontinuity"),i))},bm=(s,e)=>{let t=_c(s.sidx),i=t&&e[t]&&e[t].sidx;return i&&dh(s,i,s.sidx.resolvedUri),s},g2=(s,e={})=>{if(!Object.keys(e).length)return s;for(let t in s)s[t]=bm(s[t],e);return s},m2=({attributes:s,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:n,discontinuityStarts:r},a)=>{let o={attributes:{NAME:s.id,BANDWIDTH:s.bandwidth,CODECS:s.codecs,["PROGRAM-ID"]:1},uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,discontinuitySequence:n,discontinuityStarts:r,timelineStarts:s.timelineStarts,mediaSequence:i,segments:e};return s.contentProtection&&(o.contentProtection=s.contentProtection),s.serviceLocation&&(o.attributes.serviceLocation=s.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},y2=({attributes:s,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:n})=>{typeof e>"u"&&(e=[{uri:s.baseUrl,timeline:s.periodStart,resolvedUri:s.baseUrl||"",duration:s.sourceDuration,number:0}],s.duration=s.sourceDuration);let r={NAME:s.id,BANDWIDTH:s.bandwidth,["PROGRAM-ID"]:1};s.codecs&&(r.CODECS=s.codecs);let a={attributes:r,uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,timelineStarts:s.timelineStarts,discontinuityStarts:i,discontinuitySequence:n,mediaSequence:t,segments:e};return s.serviceLocation&&(a.attributes.serviceLocation=s.serviceLocation),a},v2=(s,e={},t=!1)=>{let i,n=s.reduce((r,a)=>{let o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"",u=a.attributes.label||"main";if(l&&!a.attributes.label){let h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}r[u]||(r[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});let c=bm(m2(a,t),e);return r[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),r},{});if(!i){let r=Object.keys(n)[0];n[r].default=!0}return n},T2=(s,e={})=>s.reduce((t,i)=>{let n=i.attributes.label||i.attributes.lang||"text",r=i.attributes.lang||"und";return t[n]||(t[n]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),t[n].playlists.push(bm(y2(i),e)),t},{}),_2=s=>s.reduce((e,t)=>(t&&t.forEach(i=>{let{channel:n,language:r}=i;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},i.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[r].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[r]["3D"]=i["3D"])}),e),{}),b2=({attributes:s,segments:e,sidx:t,discontinuityStarts:i})=>{let n={attributes:{NAME:s.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:s.width,height:s.height},CODECS:s.codecs,BANDWIDTH:s.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,discontinuityStarts:i,timelineStarts:s.timelineStarts,segments:e};return s.frameRate&&(n.attributes["FRAME-RATE"]=s.frameRate),s.contentProtection&&(n.contentProtection=s.contentProtection),s.serviceLocation&&(n.attributes.serviceLocation=s.serviceLocation),t&&(n.sidx=t),n},E2=({attributes:s})=>s.mimeType==="video/mp4"||s.mimeType==="video/webm"||s.contentType==="video",S2=({attributes:s})=>s.mimeType==="audio/mp4"||s.mimeType==="audio/webm"||s.contentType==="audio",x2=({attributes:s})=>s.mimeType==="text/vtt"||s.contentType==="text",A2=(s,e)=>{s.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,n)=>{i.number=n})})},Kb=s=>s?Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(i.playlists)},[]):[],C2=({dashPlaylists:s,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:n,eventStream:r})=>{if(!s.length)return{};let{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=s[0].attributes,c=Tm(s.filter(E2)).map(b2),h=Tm(s.filter(S2)),g=Tm(s.filter(x2)),m=s.map(H=>H.attributes.captionServices).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:a,playlists:g2(c,i)};u>=0&&(v.minimumUpdatePeriod=u*1e3),e&&(v.locations=e),t&&(v.contentSteering=t),o==="dynamic"&&(v.suggestedPresentationDelay=l),r&&r.length>0&&(v.eventStream=r);let b=v.playlists.length===0,A=h.length?v2(h,i,b):null,R=g.length?T2(g,i):null,F=c.concat(Kb(A),Kb(R)),O=F.map(({timelineStarts:H})=>H);return v.timelineStarts=tE(O),A2(F,v.timelineStarts),A&&(v.mediaGroups.AUDIO.audio=A),R&&(v.mediaGroups.SUBTITLES.subs=R),m.length&&(v.mediaGroups["CLOSED-CAPTIONS"].cc=_2(m)),n?p2({oldManifest:n,newManifest:v}):v},w2=(s,e,t)=>{let{NOW:i,clientOffset:n,availabilityStartTime:r,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=s,u=(i+n)/1e3,c=r+o,g=u+l-c;return Math.ceil((g*a-e)/t)},iE=(s,e)=>{let{type:t,minimumUpdatePeriod:i=0,media:n="",sourceDuration:r,timescale:a=1,startNumber:o=1,periodStart:l}=s,u=[],c=-1;for(let h=0;h<e.length;h++){let g=e[h],m=g.d,v=g.r||0,b=g.t||0;c<0&&(c=b),b&&b>c&&(c=b);let A;if(v<0){let O=h+1;O===e.length?t==="dynamic"&&i>0&&n.indexOf("$Number$")>0?A=w2(s,c,m):A=(r*a-c)/m:A=(e[O].t-c)/m}else A=v+1;let R=o+u.length+A,F=o+u.length;for(;F<R;)u.push({number:F,duration:m/a,time:c,timeline:l}),c+=m,F++}return u},I2=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,D2=s=>(e,t,i,n)=>{if(e==="$$")return"$";if(typeof s[t]>"u")return e;let r=""+s[t];return t==="RepresentationID"||(i?n=parseInt(n,10):n=1,r.length>=n)?r:`${new Array(n-r.length+1).join("0")}${r}`},Yb=(s,e)=>s.replace(I2,D2(e)),L2=(s,e)=>!s.duration&&!e?[{number:s.startNumber||1,duration:s.sourceDuration,time:0,timeline:s.periodStart}]:s.duration?_m(s):iE(s,e),k2=(s,e)=>{let t={RepresentationID:s.id,Bandwidth:s.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=s,n=Tc({baseUrl:s.baseUrl,source:Yb(i.sourceURL,t),range:i.range});return L2(s,e).map(a=>{t.Number=a.number,t.Time=a.time;let o=Yb(s.media||"",t),l=s.timescale||1,u=s.presentationTimeOffset||0,c=s.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Il(s.baseUrl||"",o),map:n,number:a.number,presentationTime:c}})},R2=(s,e)=>{let{baseUrl:t,initialization:i={}}=s,n=Tc({baseUrl:t,source:i.sourceURL,range:i.range}),r=Tc({baseUrl:t,source:e.media,range:e.mediaRange});return r.map=n,r},P2=(s,e)=>{let{duration:t,segmentUrls:i=[],periodStart:n}=s;if(!t&&!e||t&&e)throw new Error(Hl.SEGMENT_TIME_UNSPECIFIED);let r=i.map(l=>R2(s,l)),a;return t&&(a=_m(s)),e&&(a=iE(s,e)),a.map((l,u)=>{if(r[u]){let c=r[u],h=s.timescale||1,g=s.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=n+(l.time-g)/h,c}}).filter(l=>l)},O2=({attributes:s,segmentInfo:e})=>{let t,i;e.template?(i=k2,t=os(s,e.template)):e.base?(i=eE,t=os(s,e.base)):e.list&&(i=P2,t=os(s,e.list));let n={attributes:s};if(!i)return n;let r=i(t,e.segmentTimeline);if(t.duration){let{duration:a,timescale:o=1}=t;t.duration=a/o}else r.length?t.duration=r.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return n.attributes=t,n.segments=r,e.base&&t.indexRange&&(n.sidx=r[0],n.segments=[]),n},M2=s=>s.map(O2),xi=(s,e)=>Zb(s.childNodes).filter(({tagName:t})=>t===e),bc=s=>s.textContent.trim(),N2=s=>parseFloat(s.split("/").reduce((e,t)=>e/t)),Bl=s=>{let o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(s);if(!o)return 0;let[l,u,c,h,g,m]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(g||0)*60+parseFloat(m||0)},F2=s=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(s)&&(s+="Z"),Date.parse(s)),Xb={mediaPresentationDuration(s){return Bl(s)},availabilityStartTime(s){return F2(s)/1e3},minimumUpdatePeriod(s){return Bl(s)},suggestedPresentationDelay(s){return Bl(s)},type(s){return s},timeShiftBufferDepth(s){return Bl(s)},start(s){return Bl(s)},width(s){return parseInt(s,10)},height(s){return parseInt(s,10)},bandwidth(s){return parseInt(s,10)},frameRate(s){return N2(s)},startNumber(s){return parseInt(s,10)},timescale(s){return parseInt(s,10)},presentationTimeOffset(s){return parseInt(s,10)},duration(s){let e=parseInt(s,10);return isNaN(e)?Bl(s):e},d(s){return parseInt(s,10)},t(s){return parseInt(s,10)},r(s){return parseInt(s,10)},presentationTime(s){return parseInt(s,10)},DEFAULT(s){return s}},zi=s=>s&&s.attributes?Zb(s.attributes).reduce((e,t)=>{let i=Xb[t.name]||Xb.DEFAULT;return e[t.name]=i(t.value),e},{}):{},$2={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},hh=(s,e)=>e.length?Ul(s.map(function(t){return e.map(function(i){let n=bc(i),r=Il(t.baseUrl,n),a=os(zi(i),{baseUrl:r});return r!==n&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):s,Em=s=>{let e=xi(s,"SegmentTemplate")[0],t=xi(s,"SegmentList")[0],i=t&&xi(t,"SegmentURL").map(h=>os({tag:"SegmentURL"},zi(h))),n=xi(s,"SegmentBase")[0],r=t||e,a=r&&xi(r,"SegmentTimeline")[0],o=t||n||e,l=o&&xi(o,"Initialization")[0],u=e&&zi(e);u&&l?u.initialization=l&&zi(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});let c={template:u,segmentTimeline:a&&xi(a,"S").map(h=>zi(h)),list:t&&os(zi(t),{segmentUrls:i,initialization:zi(l)}),base:n&&os(zi(n),{initialization:zi(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},B2=(s,e,t)=>i=>{let n=xi(i,"BaseURL"),r=hh(e,n),a=os(s,zi(i)),o=Em(i);return r.map(l=>({segmentInfo:os(t,o),attributes:os(a,l)}))},U2=s=>s.reduce((e,t)=>{let i=zi(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());let n=$2[i.schemeIdUri];if(n){e[n]={attributes:i};let r=xi(t,"cenc:pssh")[0];if(r){let a=bc(r);e[n].pssh=a&&rc(a)}}return e},{}),H2=s=>{if(s.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof s.value!="string"?[]:s.value.split(";")).map(t=>{let i,n;return n=t,/^CC\d=/.test(t)?[i,n]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:n}});if(s.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof s.value!="string"?[]:s.value.split(";")).map(t=>{let i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){let[n,r=""]=t.split("=");i.channel=n,i.language=t,r.split(",").forEach(a=>{let[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},V2=s=>Ul(xi(s.node,"EventStream").map(e=>{let t=zi(e),i=t.schemeIdUri;return xi(e,"Event").map(n=>{let r=zi(n),a=r.presentationTime||0,o=t.timescale||1,l=r.duration||0,u=a/o+s.attributes.start;return{schemeIdUri:i,value:t.value,id:r.id,start:u,end:u+l/o,messageData:bc(n)||r.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),j2=(s,e,t)=>i=>{let n=zi(i),r=hh(e,xi(i,"BaseURL")),a=xi(i,"Role")[0],o={role:zi(a)},l=os(s,n,o),u=xi(i,"Accessibility")[0],c=H2(zi(u));c&&(l=os(l,{captionServices:c}));let h=xi(i,"Label")[0];if(h&&h.childNodes.length){let A=h.childNodes[0].nodeValue.trim();l=os(l,{label:A})}let g=U2(xi(i,"ContentProtection"));Object.keys(g).length&&(l=os(l,{contentProtection:g}));let m=Em(i),v=xi(i,"Representation"),b=os(t,m);return Ul(v.map(B2(l,r,b)))},G2=(s,e)=>(t,i)=>{let n=hh(e,xi(t.node,"BaseURL")),r=os(s,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(r.periodDuration=t.attributes.duration);let a=xi(t.node,"AdaptationSet"),o=Em(t.node);return Ul(a.map(j2(r,n,o)))},q2=(s,e)=>{if(s.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!s.length)return null;let t=os({serverURL:bc(s[0])},zi(s[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},z2=({attributes:s,priorPeriodAttributes:e,mpdType:t})=>typeof s.start=="number"?s.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,W2=(s,e={})=>{let{manifestUri:t="",NOW:i=Date.now(),clientOffset:n=0,eventHandler:r=function(){}}=e,a=xi(s,"Period");if(!a.length)throw new Error(Hl.INVALID_NUMBER_OF_PERIOD);let o=xi(s,"Location"),l=zi(s),u=hh([{baseUrl:t}],xi(s,"BaseURL")),c=xi(s,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=n,o.length&&(l.locations=o.map(bc));let h=[];return a.forEach((g,m)=>{let v=zi(g),b=h[m-1];v.start=z2({attributes:v,priorPeriodAttributes:b?b.attributes:null,mpdType:l.type}),h.push({node:g,attributes:v})}),{locations:l.locations,contentSteeringInfo:q2(c,r),representationInfo:Ul(h.map(G2(l,u))),eventStream:Ul(h.map(V2))}},sE=s=>{if(s==="")throw new Error(Hl.DASH_EMPTY_MANIFEST);let e=new Qb.DOMParser,t,i;try{t=e.parseFromString(s,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Hl.DASH_INVALID_XML);return i},K2=s=>{let e=xi(s,"UTCTiming")[0];if(!e)return null;let t=zi(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Hl.UNSUPPORTED_UTC_TIMING_SCHEME)}return t};var nE=(s,e={})=>{let t=W2(sE(s),e),i=M2(t.representationInfo);return C2({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},rE=s=>K2(sE(s));var gS=Qi(dE());var Q2=bt([73,68,51]),J2=function(e,t){t===void 0&&(t=0),e=bt(e);var i=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(i&16)>>4;return r?n+20:n+10},ko=function s(e,t){return t===void 0&&(t=0),e=bt(e),e.length-t<10||!ai(e,Q2,{offset:t})?t:(t+=J2(e,t),s(e,t))};var P3=new Uint8Array([79,112,117,115,72,101,97,100]);var fE=function(e){return typeof e=="string"?eh(e):e},sL=function(e){return Array.isArray(e)?e.map(function(t){return fE(t)}):[fE(e)]},Sm,pE=function(e){e=bt(e);for(var t=[],i=0;e.length>i;){var n=e[i],r=0,a=0;a++;var o=e[a];for(a++;o&128;)r=(o&127)<<7,o=e[a],a++;r+=o&127;for(var l=0;l<Sm.length;l++){var u=Sm[l],c=u.id,h=u.parser;if(n===c){t.push(h(e.subarray(a,a+r)));break}}i+=r+a}return t};Sm=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(t.flags&128&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.flags&64){var i=e[t.size];t.url=sm(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return t.flags&32&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=pE(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:pE(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var gE=function s(e,t,i){i===void 0&&(i=!1),t=sL(t),e=bt(e);var n=[];if(!t.length)return n;for(var r=0;r<e.length;){var a=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,o=e.subarray(r+4,r+8);if(a===0)break;var l=r+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(r+8,l);ai(o,t[0])&&(t.length===1?n.push(u):n.push.apply(n,s(u,t.slice(1),i))),r=l}return n};var Ec={EBML:bt([26,69,223,163]),DocType:bt([66,130]),Segment:bt([24,83,128,103]),SegmentInfo:bt([21,73,169,102]),Tracks:bt([22,84,174,107]),Track:bt([174]),TrackNumber:bt([215]),DefaultDuration:bt([35,227,131]),TrackEntry:bt([174]),TrackType:bt([131]),FlagDefault:bt([136]),CodecID:bt([134]),CodecPrivate:bt([99,162]),VideoTrack:bt([224]),AudioTrack:bt([225]),Cluster:bt([31,67,182,117]),Timestamp:bt([231]),TimestampScale:bt([42,215,177]),BlockGroup:bt([160]),BlockDuration:bt([155]),Block:bt([161]),SimpleBlock:bt([163])},xm=[128,64,32,16,8,4,2,1],nL=function(e){for(var t=1,i=0;i<xm.length&&!(e&xm[i]);i++)t++;return t},fh=function(e,t,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var r=nL(e[t]),a=e.subarray(t,t+r);return i&&(a=Array.prototype.slice.call(e,t,t+r),a[0]^=xm[r-1]),{length:r,value:im(a,{signed:n}),bytes:a}},mE=function s(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return s(t)}):typeof e=="number"?W_(e):e},rL=function(e){return Array.isArray(e)?e.map(function(t){return mE(t)}):[mE(e)]},aL=function s(e,t,i){if(i>=t.length)return t.length;var n=fh(t,i,!1);if(ai(e.bytes,n.bytes))return i;var r=fh(t,i+n.length);return s(e,t,i+r.length+r.value+n.length)},Am=function s(e,t){t=rL(t),e=bt(e);var i=[];if(!t.length)return i;for(var n=0;n<e.length;){var r=fh(e,n,!1),a=fh(e,n+r.length),o=n+r.length+a.length;a.value===127&&(a.value=aL(r,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);ai(t[0],r.bytes)&&(t.length===1?i.push(u):i=i.concat(s(u,t.slice(1))));var c=r.length+a.length+u.length;n+=c}return i};var oL=bt([0,0,0,1]),lL=bt([0,0,1]),uL=bt([0,0,3]),cL=function(e){for(var t=[],i=1;i<e.length-2;)ai(e.subarray(i,i+3),uL)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var n=e.length-t.length,r=new Uint8Array(n),a=0;for(i=0;i<n;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=e[a];return r},yE=function(e,t,i,n){n===void 0&&(n=1/0),e=bt(e),i=[].concat(i);for(var r=0,a,o=0;r<e.length&&(o<n||a);){var l=void 0;if(ai(e.subarray(r),oL)?l=4:ai(e.subarray(r),lL)&&(l=3),!l){r++;continue}if(o++,a)return cL(e.subarray(a,r));var u=void 0;t==="h264"?u=e[r+l]&31:t==="h265"&&(u=e[r+l]>>1&63),i.indexOf(u)!==-1&&(a=r+l),r+=l+(t==="h264"?1:2)}return e.subarray(0,0)},vE=function(e,t,i){return yE(e,"h264",t,i)},TE=function(e,t,i){return yE(e,"h265",t,i)};var Us={webm:bt([119,101,98,109]),matroska:bt([109,97,116,114,111,115,107,97]),flac:bt([102,76,97,67]),ogg:bt([79,103,103,83]),ac3:bt([11,119]),riff:bt([82,73,70,70]),avi:bt([65,86,73]),wav:bt([87,65,86,69]),"3gp":bt([102,116,121,112,51,103]),mp4:bt([102,116,121,112]),fmp4:bt([115,116,121,112]),mov:bt([102,116,121,112,113,116]),moov:bt([109,111,111,118]),moof:bt([109,111,111,102])},Vl={aac:function(e){var t=ko(e);return ai(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=ko(e);return ai(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Am(e,[Ec.EBML,Ec.DocType])[0];return ai(t,Us.webm)},mkv:function(e){var t=Am(e,[Ec.EBML,Ec.DocType])[0];return ai(t,Us.matroska)},mp4:function(e){if(Vl["3gp"](e)||Vl.mov(e))return!1;if(ai(e,Us.mp4,{offset:4})||ai(e,Us.fmp4,{offset:4})||ai(e,Us.moof,{offset:4})||ai(e,Us.moov,{offset:4}))return!0},mov:function(e){return ai(e,Us.mov,{offset:4})},"3gp":function(e){return ai(e,Us["3gp"],{offset:4})},ac3:function(e){var t=ko(e);return ai(e,Us.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=ko(e);return ai(e,Us.flac,{offset:t})},ogg:function(e){return ai(e,Us.ogg)},avi:function(e){return ai(e,Us.riff)&&ai(e,Us.avi,{offset:8})},wav:function(e){return ai(e,Us.riff)&&ai(e,Us.wav,{offset:8})},h264:function(e){return vE(e,7,3).length},h265:function(e){return TE(e,[32,33],3).length}},Cm=Object.keys(Vl).filter(function(s){return s!=="ts"&&s!=="h264"&&s!=="h265"}).concat(["ts","h264","h265"]);Cm.forEach(function(s){var e=Vl[s];Vl[s]=function(t){return e(bt(t))}});var dL=Vl,ph=function(e){e=bt(e);for(var t=0;t<Cm.length;t++){var i=Cm[t];if(dL[i](e))return i}return""},_E=function(e){return gE(e,["moof"]).length>0};var Va=Qi(AE());var Wm="8.23.4",la={},Ga=function(s,e){return la[s]=la[s]||[],e&&(la[s]=la[s].concat(e)),la[s]},hL=function(s,e){Ga(s,e)},mS=function(s,e){let t=Ga(s).indexOf(e);return t<=-1?!1:(la[s]=la[s].slice(),la[s].splice(t,1),!0)},fL=function(s,e){Ga(s,[].concat(e).map(t=>{let i=(...n)=>(mS(s,i),t(...n));return i}))},Sh={prefixed:!0},_h=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],CE=_h[0],Cc;for(let s=0;s<_h.length;s++)if(_h[s][1]in st.default){Cc=_h[s];break}if(Cc){for(let s=0;s<Cc.length;s++)Sh[CE[s]]=Cc[s];Sh.prefixed=Cc[0]!==CE[0]}var un=[],pL=(s,e,t)=>(i,n,r)=>{let a=e.levels[n],o=new RegExp(`^(${a})$`),l=s;if(i!=="log"&&r.unshift(i.toUpperCase()+":"),t&&(l=`%c${s}`,r.unshift(t)),r.unshift(l+":"),un){un.push([].concat(r));let c=un.length-1e3;un.splice(0,c>0?c:0)}if(!ge.default.console)return;let u=ge.default.console[i];!u&&i==="debug"&&(u=ge.default.console.info||ge.default.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(r)?"apply":"call"](ge.default.console,r)};function Km(s,e=":",t=""){let i="info",n;function r(...a){n("log",i,a)}return n=pL(s,r,t),r.createLogger=(a,o,l)=>{let u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${s} ${u} ${a}`;return Km(h,u,c)},r.createNewLogger=(a,o,l)=>Km(a,o,l),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=a=>{if(typeof a=="string"){if(!r.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},r.history=()=>un?[].concat(un):[],r.history.filter=a=>(un||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),r.history.clear=()=>{un&&(un.length=0)},r.history.disable=()=>{un!==null&&(un.length=0,un=null)},r.history.enable=()=>{un===null&&(un=[])},r.error=(...a)=>n("error",i,a),r.warn=(...a)=>n("warn",i,a),r.debug=(...a)=>n("debug",i,a),r}var qt=Km("VIDEOJS"),yS=qt.createLogger,gL=Object.prototype.toString,vS=function(s){return Nr(s)?Object.keys(s):[]};function Wl(s,e){vS(s).forEach(t=>e(s[t],t))}function TS(s,e,t=0){return vS(s).reduce((i,n)=>e(i,s[n],n),t)}function Nr(s){return!!s&&typeof s=="object"}function iu(s){return Nr(s)&&gL.call(s)==="[object Object]"&&s.constructor===Object}function hi(...s){let e={};return s.forEach(t=>{!t||Wl(t,(i,n)=>{if(!iu(i)){e[n]=i;return}iu(e[n])||(e[n]={}),e[n]=hi(e[n],i)})}),e}function _S(s={}){let e=[];for(let t in s)if(s.hasOwnProperty(t)){let i=s[t];e.push(i)}return e}function Af(s,e,t,i=!0){let n=a=>Object.defineProperty(s,e,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){let a=t();return n(a),a}};return i&&(r.set=n),Object.defineProperty(s,e,r)}var mL=Object.freeze({__proto__:null,each:Wl,reduce:TS,isObject:Nr,isPlain:iu,merge:hi,values:_S,defineLazyProperty:Af}),j0=!1,bS=null,lr=!1,ES,SS=!1,Kl=!1,Yl=!1,Fr=!1,G0=null,Cf=null,yL=Boolean(ge.default.cast&&ge.default.cast.framework&&ge.default.cast.framework.CastReceiverContext),xS=null,xh=!1,wf=!1,Ah=!1,If=!1,Ch=!1,wh=!1,Ih=!1,Pc=Boolean(hu()&&("ontouchstart"in ge.default||ge.default.navigator.maxTouchPoints||ge.default.DocumentTouch&&ge.default.document instanceof ge.default.DocumentTouch)),Fa=ge.default.navigator&&ge.default.navigator.userAgentData;Fa&&Fa.platform&&Fa.brands&&(lr=Fa.platform==="Android",Kl=Boolean(Fa.brands.find(s=>s.brand==="Microsoft Edge")),Yl=Boolean(Fa.brands.find(s=>s.brand==="Chromium")),Fr=!Kl&&Yl,G0=Cf=(Fa.brands.find(s=>s.brand==="Chromium")||{}).version||null,wf=Fa.platform==="Windows");if(!Yl){let s=ge.default.navigator&&ge.default.navigator.userAgent||"";j0=/iPod/i.test(s),bS=function(){let e=s.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),lr=/Android/i.test(s),ES=function(){let e=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;let t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),SS=/Firefox/i.test(s),Kl=/Edg/i.test(s),Yl=/Chrome/i.test(s)||/CriOS/i.test(s),Fr=!Kl&&Yl,G0=Cf=function(){let e=s.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),xS=function(){let e=/MSIE\s(\d+)\.\d/.exec(s),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)&&(t=11),t}(),Ch=/Tizen/i.test(s),wh=/Web0S/i.test(s),Ih=Ch||wh,xh=/Safari/i.test(s)&&!Fr&&!lr&&!Kl&&!Ih,wf=/Windows/i.test(s),Ah=/iPad/i.test(s)||xh&&Pc&&!/iPhone/i.test(s),If=/iPhone/i.test(s)&&!Ah}var Cs=If||Ah||j0,Df=(xh||Cs)&&!Fr,AS=Object.freeze({__proto__:null,get IS_IPOD(){return j0},get IOS_VERSION(){return bS},get IS_ANDROID(){return lr},get ANDROID_VERSION(){return ES},get IS_FIREFOX(){return SS},get IS_EDGE(){return Kl},get IS_CHROMIUM(){return Yl},get IS_CHROME(){return Fr},get CHROMIUM_VERSION(){return G0},get CHROME_VERSION(){return Cf},IS_CHROMECAST_RECEIVER:yL,get IE_VERSION(){return xS},get IS_SAFARI(){return xh},get IS_WINDOWS(){return wf},get IS_IPAD(){return Ah},get IS_IPHONE(){return If},get IS_TIZEN(){return Ch},get IS_WEBOS(){return wh},get IS_SMART_TV(){return Ih},TOUCH_ENABLED:Pc,IS_IOS:Cs,IS_ANY_SAFARI:Df});function wE(s){return typeof s=="string"&&Boolean(s.trim())}function vL(s){if(s.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function hu(){return st.default===ge.default.document}function fu(s){return Nr(s)&&s.nodeType===1}function CS(){try{return ge.default.parent!==ge.default.self}catch{return!0}}function wS(s){return function(e,t){if(!wE(e))return st.default[s](null);wE(t)&&(t=st.default.querySelector(t));let i=fu(t)?t:st.default;return i[s]&&i[s](e)}}function Pt(s="div",e={},t={},i){let n=st.default.createElement(s);return Object.getOwnPropertyNames(e).forEach(function(r){let a=e[r];r==="textContent"?Ya(n,a):(n[r]!==a||r==="tabIndex")&&(n[r]=a)}),Object.getOwnPropertyNames(t).forEach(function(r){n.setAttribute(r,t[r])}),i&&q0(n,i),n}function Ya(s,e){return typeof s.textContent>"u"?s.innerText=e:s.textContent=e,s}function Ym(s,e){e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s)}function Ic(s,e){return vL(e),s.classList.contains(e)}function No(s,...e){return s.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),s}function Lf(s,...e){return s?(s.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),s):(qt.warn("removeClass was called with an element that doesn't exist"),null)}function IS(s,e,t){return typeof t=="function"&&(t=t(s,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>s.classList.toggle(i,t)),s}function DS(s,e){Object.getOwnPropertyNames(e).forEach(function(t){let i=e[t];i===null||typeof i>"u"||i===!1?s.removeAttribute(t):s.setAttribute(t,i===!0?"":i)})}function Ua(s){let e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(s&&s.attributes&&s.attributes.length>0){let i=s.attributes;for(let n=i.length-1;n>=0;n--){let r=i[n].name,a=i[n].value;t.includes(r)&&(a=a!==null),e[r]=a}}return e}function LS(s,e){return s.getAttribute(e)}function su(s,e,t){s.setAttribute(e,t)}function kf(s,e){s.removeAttribute(e)}function kS(){st.default.body.focus(),st.default.onselectstart=function(){return!1}}function RS(){st.default.onselectstart=function(){return!0}}function nu(s){if(s&&s.getBoundingClientRect&&s.parentNode){let e=s.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(ru(s,"height"))),t.width||(t.width=parseFloat(ru(s,"width"))),t}}function Oc(s){if(!s||s&&!s.offsetParent)return{left:0,top:0,width:0,height:0};let e=s.offsetWidth,t=s.offsetHeight,i=0,n=0;for(;s.offsetParent&&s!==st.default[Sh.fullscreenElement];)i+=s.offsetLeft,n+=s.offsetTop,s=s.offsetParent;return{left:i,top:n,width:e,height:t}}function Rf(s,e){let t={x:0,y:0};if(Cs){let c=s;for(;c&&c.nodeName.toLowerCase()!=="html";){let h=ru(c,"transform");if(/^matrix/.test(h)){let g=h.slice(7,-1).split(/,\s/).map(Number);t.x+=g[4],t.y+=g[5]}else if(/^matrix3d/.test(h)){let g=h.slice(9,-1).split(/,\s/).map(Number);t.x+=g[12],t.y+=g[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&ge.default.WebKitCSSMatrix){let g=ge.default.getComputedStyle(c.assignedSlot.parentElement).transform,m=new ge.default.WebKitCSSMatrix(g);t.x+=m.m41,t.y+=m.m42}c=c.parentNode||c.host}}let i={},n=Oc(e.target),r=Oc(s),a=r.width,o=r.height,l=e.offsetY-(r.top-n.top),u=e.offsetX-(r.left-n.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-r.left,l=e.changedTouches[0].pageY+r.top,Cs&&(u-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function PS(s){return Nr(s)&&s.nodeType===3}function Pf(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function OS(s){return typeof s=="function"&&(s=s()),(Array.isArray(s)?s:[s]).map(e=>{if(typeof e=="function"&&(e=e()),fu(e)||PS(e))return e;if(typeof e=="string"&&/\S/.test(e))return st.default.createTextNode(e)}).filter(e=>e)}function q0(s,e){return OS(e).forEach(t=>s.appendChild(t)),s}function MS(s,e){return q0(Pf(s),e)}function Mc(s){return s.button===void 0&&s.buttons===void 0||s.button===0&&s.buttons===void 0||s.type==="mouseup"&&s.button===0&&s.buttons===0||s.type==="mousedown"&&s.button===0&&s.buttons===0?!0:!(s.button!==0||s.buttons!==1)}var qa=wS("querySelector"),NS=wS("querySelectorAll");function ru(s,e){if(!s||!e)return"";if(typeof ge.default.getComputedStyle=="function"){let t;try{t=ge.default.getComputedStyle(s)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function FS(s){[...st.default.styleSheets].forEach(e=>{try{let t=[...e.cssRules].map(n=>n.cssText).join(""),i=st.default.createElement("style");i.textContent=t,s.document.head.appendChild(i)}catch{let i=st.default.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,s.document.head.appendChild(i)}})}var $S=Object.freeze({__proto__:null,isReal:hu,isEl:fu,isInFrame:CS,createEl:Pt,textContent:Ya,prependTo:Ym,hasClass:Ic,addClass:No,removeClass:Lf,toggleClass:IS,setAttributes:DS,getAttributes:Ua,getAttribute:LS,setAttribute:su,removeAttribute:kf,blockTextSelection:kS,unblockTextSelection:RS,getBoundingClientRect:nu,findPosition:Oc,getPointerPosition:Rf,isTextNode:PS,emptyEl:Pf,normalizeContent:OS,appendContent:q0,insertContent:MS,isSingleLeftClick:Mc,$:qa,$$:NS,computedStyle:ru,copyStyleSheetsToWindow:FS}),BS=!1,Xm,TL=function(){if(Xm.options.autoSetup===!1)return;let s=Array.prototype.slice.call(st.default.getElementsByTagName("video")),e=Array.prototype.slice.call(st.default.getElementsByTagName("audio")),t=Array.prototype.slice.call(st.default.getElementsByTagName("video-js")),i=s.concat(e,t);if(i&&i.length>0)for(let n=0,r=i.length;n<r;n++){let a=i[n];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&Xm(a);else{Qm(1);break}}else BS||Qm(1)};function Qm(s,e){!hu()||(e&&(Xm=e),ge.default.setTimeout(TL,s))}function Jm(){BS=!0,ge.default.removeEventListener("load",Jm)}hu()&&(st.default.readyState==="complete"?Jm():ge.default.addEventListener("load",Jm));var US=function(s){let e=st.default.createElement("style");return e.className=s,e},HS=function(s,e){s.styleSheet?s.styleSheet.cssText=e:s.textContent=e},Vs=new WeakMap,_L=3,bL=_L;function Wn(){return bL++}function IE(s,e){if(!Vs.has(s))return;let t=Vs.get(s);t.handlers[e].length===0&&(delete t.handlers[e],s.removeEventListener?s.removeEventListener(e,t.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Vs.delete(s)}function z0(s,e,t,i){t.forEach(function(n){s(e,n,i)})}function Of(s){if(s.fixed_)return s;function e(){return!0}function t(){return!1}if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){let i=s||ge.default.event;s={};let n=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(let r in i)n.includes(r)||r==="returnValue"&&i.preventDefault||(s[r]=i[r]);if(s.target||(s.target=s.srcElement||st.default),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){i.preventDefault&&i.preventDefault(),s.returnValue=!1,i.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),s.cancelBubble=!0,i.cancelBubble=!0,s.isPropagationStopped=e},s.isPropagationStopped=t,s.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),s.isImmediatePropagationStopped=e,s.stopPropagation()},s.isImmediatePropagationStopped=t,s.clientX!==null&&s.clientX!==void 0){let r=st.default.documentElement,a=st.default.body;s.pageX=s.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}s.which=s.charCode||s.keyCode,s.button!==null&&s.button!==void 0&&(s.button=s.button&1?0:s.button&4?1:s.button&2?2:0)}return s.fixed_=!0,s}var mh,EL=function(){if(typeof mh!="boolean"){mh=!1;try{let s=Object.defineProperty({},"passive",{get(){mh=!0}});ge.default.addEventListener("test",null,s),ge.default.removeEventListener("test",null,s)}catch{}}return mh},SL=["touchstart","touchmove"];function wn(s,e,t){if(Array.isArray(e))return z0(wn,s,e,t);Vs.has(s)||Vs.set(s,{});let i=Vs.get(s);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=Wn()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(n,r){if(i.disabled)return;n=Of(n);let a=i.handlers[n.type];if(a){let o=a.slice(0);for(let l=0,u=o.length;l<u&&!n.isImmediatePropagationStopped();l++)try{o[l].call(s,n,r)}catch(c){qt.error(c)}}}),i.handlers[e].length===1)if(s.addEventListener){let n=!1;EL()&&SL.indexOf(e)>-1&&(n={passive:!0}),s.addEventListener(e,i.dispatcher,n)}else s.attachEvent&&s.attachEvent("on"+e,i.dispatcher)}function ws(s,e,t){if(!Vs.has(s))return;let i=Vs.get(s);if(!i.handlers)return;if(Array.isArray(e))return z0(ws,s,e,t);let n=function(a,o){i.handlers[o]=[],IE(a,o)};if(e===void 0){for(let a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&n(s,a);return}let r=i.handlers[e];if(!!r){if(!t){n(s,e);return}if(t.guid)for(let a=0;a<r.length;a++)r[a].guid===t.guid&&r.splice(a--,1);IE(s,e)}}function pu(s,e,t){let i=Vs.has(s)?Vs.get(s):{},n=s.parentNode||s.ownerDocument;if(typeof e=="string"?e={type:e,target:s}:e.target||(e.target=s),e=Of(e),i.dispatcher&&i.dispatcher.call(s,e,t),n&&!e.isPropagationStopped()&&e.bubbles===!0)pu.call(null,n,e,t);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){Vs.has(e.target)||Vs.set(e.target,{});let r=Vs.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function Mf(s,e,t){if(Array.isArray(e))return z0(Mf,s,e,t);let i=function(){ws(s,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Wn(),wn(s,e,i)}function W0(s,e,t){let i=function(){ws(s,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Wn(),wn(s,e,i)}var xL=Object.freeze({__proto__:null,fixEvent:Of,on:wn,off:ws,trigger:pu,one:Mf,any:W0}),Kn=30,Ti=function(s,e,t){e.guid||(e.guid=Wn());let i=e.bind(s);return i.guid=t?t+"_"+e.guid:e.guid,i},$r=function(s,e){let t=ge.default.performance.now();return function(...n){let r=ge.default.performance.now();r-t>=e&&(s(...n),t=r)}},VS=function(s,e,t,i=ge.default){let n,r=()=>{i.clearTimeout(n),n=null},a=function(){let o=this,l=arguments,u=function(){n=null,u=null,t||s.apply(o,l)};!n&&t&&s.apply(o,l),i.clearTimeout(n),n=i.setTimeout(u,e)};return a.cancel=r,a},AL=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Kn,bind_:Ti,throttle:$r,debounce:VS}),Sc,js=class{on(e,t){let i=this.addEventListener;this.addEventListener=()=>{},wn(this,e,t),this.addEventListener=i}off(e,t){ws(this,e,t)}one(e,t){let i=this.addEventListener;this.addEventListener=()=>{},Mf(this,e,t),this.addEventListener=i}any(e,t){let i=this.addEventListener;this.addEventListener=()=>{},W0(this,e,t),this.addEventListener=i}trigger(e){let t=e.type||e;typeof e=="string"&&(e={type:t}),e=Of(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),pu(this,e)}queueTrigger(e){Sc||(Sc=new Map);let t=e.type||e,i=Sc.get(this);i||(i=new Map,Sc.set(this,i));let n=i.get(t);i.delete(t),ge.default.clearTimeout(n);let r=ge.default.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,Sc.delete(this)),this.trigger(e)},0);i.set(t,r)}};js.prototype.allowedEvents_={};js.prototype.addEventListener=js.prototype.on;js.prototype.removeEventListener=js.prototype.off;js.prototype.dispatchEvent=js.prototype.trigger;var Nf=s=>typeof s.name=="function"?s.name():typeof s.name=="string"?s.name:s.name_?s.name_:s.constructor&&s.constructor.name?s.constructor.name:typeof s,ca=s=>s instanceof js||!!s.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof s[e]=="function"),CL=(s,e)=>{ca(s)?e():(s.eventedCallbacks||(s.eventedCallbacks=[]),s.eventedCallbacks.push(e))},Zm=s=>typeof s=="string"&&/\S/.test(s)||Array.isArray(s)&&!!s.length,Dh=(s,e,t)=>{if(!s||!s.nodeName&&!ca(s))throw new Error(`Invalid target for ${Nf(e)}#${t}; must be a DOM node or evented object.`)},jS=(s,e,t)=>{if(!Zm(s))throw new Error(`Invalid event type for ${Nf(e)}#${t}; must be a non-empty string or array.`)},GS=(s,e,t)=>{if(typeof s!="function")throw new Error(`Invalid listener for ${Nf(e)}#${t}; must be a function.`)},km=(s,e,t)=>{let i=e.length<3||e[0]===s||e[0]===s.eventBusEl_,n,r,a;return i?(n=s.eventBusEl_,e.length>=3&&e.shift(),[r,a]=e):(n=e[0],r=e[1],a=e[2]),Dh(n,s,t),jS(r,s,t),GS(a,s,t),a=Ti(s,a),{isTargetingSelf:i,target:n,type:r,listener:a}},Ro=(s,e,t,i)=>{Dh(s,s,e),s.nodeName?xL[e](s,t,i):s[e](t,i)},wL={on(...s){let{isTargetingSelf:e,target:t,type:i,listener:n}=km(this,s,"on");if(Ro(t,"on",i,n),!e){let r=()=>this.off(t,i,n);r.guid=n.guid;let a=()=>this.off("dispose",r);a.guid=n.guid,Ro(this,"on","dispose",r),Ro(t,"on","dispose",a)}},one(...s){let{isTargetingSelf:e,target:t,type:i,listener:n}=km(this,s,"one");if(e)Ro(t,"one",i,n);else{let r=(...a)=>{this.off(t,i,r),n.apply(null,a)};r.guid=n.guid,Ro(t,"one",i,r)}},any(...s){let{isTargetingSelf:e,target:t,type:i,listener:n}=km(this,s,"any");if(e)Ro(t,"any",i,n);else{let r=(...a)=>{this.off(t,i,r),n.apply(null,a)};r.guid=n.guid,Ro(t,"any",i,r)}},off(s,e,t){if(!s||Zm(s))ws(this.eventBusEl_,s,e);else{let i=s,n=e;Dh(i,this,"off"),jS(n,this,"off"),GS(t,this,"off"),t=Ti(this,t),this.off("dispose",t),i.nodeName?(ws(i,n,t),ws(i,"dispose",t)):ca(i)&&(i.off(n,t),i.off("dispose",t))}},trigger(s,e){Dh(this.eventBusEl_,this,"trigger");let t=s&&typeof s!="string"?s.type:s;if(!Zm(t))throw new Error(`Invalid event type for ${Nf(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return pu(this.eventBusEl_,s,e)}};function K0(s,e={}){let{eventBusKey:t}=e;if(t){if(!s[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);s.eventBusEl_=s[t]}else s.eventBusEl_=Pt("span",{className:"vjs-event-bus"});return Object.assign(s,wL),s.eventedCallbacks&&s.eventedCallbacks.forEach(i=>{i()}),s.on("dispose",()=>{s.off(),[s,s.el_,s.eventBusEl_].forEach(function(i){i&&Vs.has(i)&&Vs.delete(i)}),ge.default.setTimeout(()=>{s.eventBusEl_=null},0)}),s}var IL={state:{},setState(s){typeof s=="function"&&(s=s());let e;return Wl(s,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&ca(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function qS(s,e){return Object.assign(s,IL),s.state=Object.assign({},s.state,e),typeof s.handleStateChanged=="function"&&ca(s)&&s.on("statechanged",s.handleStateChanged),s}var Dc=function(s){return typeof s!="string"?s:s.replace(/./,e=>e.toLowerCase())},Oi=function(s){return typeof s!="string"?s:s.replace(/./,e=>e.toUpperCase())},zS=function(s,e){return Oi(s)===Oi(e)},DL=Object.freeze({__proto__:null,toLowerCase:Dc,toTitleCase:Oi,titleCaseEquals:zS}),Ne=class{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=hi({},this.options_),t=this.options_=hi(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){let n=e&&e.id&&e.id()||"no_player";this.id_=`${n}_component_${Wn()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),t.evented!==!1&&(K0(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),qS(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=hi(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return Pt(e,t,i)}localize(e,t,i=e){let n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],o=n&&n.split("-")[0],l=r&&r[o],u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){let g=t[h-1],m=g;return typeof g>"u"&&(m=c),m})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(!!e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,n)=>i.concat(n),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;let i="http://www.w3.org/2000/svg",n=Pt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=st.default.createElementNS(i,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");let a=st.default.createElementNS(i,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),n.appendChild(r),this.iconIsSet_?t.replaceChild(n,t.querySelector(".vjs-icon-placeholder")):t.appendChild(n),this.iconIsSet_=!0,n}addChild(e,t={},i=this.children_.length){let n,r;if(typeof e=="string"){r=Oi(e);let a=t.componentClass||r;t.name=r;let o=Ne.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;n=new o(this.player_||this,t)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),r=r||n.name&&Oi(n.name()),r&&(this.childNameIndex_[r]=n,this.childNameIndex_[Dc(r)]=n),typeof n.el=="function"&&n.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:fu(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(n.el(),a)}return n}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Oi(e.name())]=null,this.childNameIndex_[Dc(e.name())]=null;let i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){let e=this.options_.children;if(e){let t=this.options_,i=a=>{let o=a.name,l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;let u=this.addChild(o,l);u&&(this[o]=u)},n,r=Ne.getComponent("Tech");Array.isArray(e)?n=e:n=Object.keys(e),n.concat(Object.keys(this.options_).filter(function(a){return!n.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{let o=Ne.getComponent(a.opts.componentClass||Oi(a.name));return o&&!r.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(!!e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){let e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return qa(e,t||this.contentEl())}$$(e,t){return NS(e,t||this.contentEl())}hasClass(e){return Ic(this.el_,e)}addClass(...e){No(this.el_,...e)}removeClass(...e){Lf(this.el_,...e)}toggleClass(e,t){IS(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return LS(this.el_,e)}setAttribute(e,t){su(this.el_,e,t)}removeAttribute(e){kf(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;let n=this.el_.style[e],r=n.indexOf("px");return parseInt(r!==-1?n.slice(0,r):this.el_["offset"+Oi(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=ru(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){let i=`offset${Oi(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){let e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null,i=10,n=200,r;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=ge.default.performance.now(),r=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)r=!1;else if(t){let l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>i&&(r=!1)}});let a=function(){r=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,r===!0&&ge.default.performance.now()-e<n&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;let e=Ti(this.player(),this.player().reportUserActivity),t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});let i=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=Ti(this,e),this.clearTimersOnDispose_(),i=ge.default.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),ge.default.clearTimeout(e)),e}setInterval(e,t){e=Ti(this,e),this.clearTimersOnDispose_();let i=ge.default.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),ge.default.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Ti(this,e),t=ge.default.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=Ti(this,t);let i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){!this.namedRafs_.has(e)||(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),ge.default.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,n)=>this[t](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return Boolean(this.el_.disabled)}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(r){let a=ge.default.getComputedStyle(r,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function i(r){return!(!t(r.parentElement)||!t(r)||r.style.opacity==="0"||ge.default.getComputedStyle(r).height==="0px"||ge.default.getComputedStyle(r).width==="0px")}function n(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;let a={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(a.x<0||a.x>(st.default.documentElement.clientWidth||ge.default.innerWidth)||a.y<0||a.y>(st.default.documentElement.clientHeight||ge.default.innerHeight))return!1;let o=st.default.elementFromPoint(a.x,a.y);for(;o;){if(o===r)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(n(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);let i=Ne.getComponent("Tech"),n=i&&i.isTech(t),r=Ne===t||Ne.prototype.isPrototypeOf(t.prototype);if(n||!r){let o;throw n?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Oi(e),Ne.components_||(Ne.components_={});let a=Ne.getComponent("Player");if(e==="Player"&&a&&a.players){let o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return Ne.components_[e]=t,Ne.components_[Dc(e)]=t,t}static getComponent(e){if(!(!e||!Ne.components_))return Ne.components_[e]}};Ne.registerComponent("Component",Ne);function LL(s,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${s}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function DE(s,e,t,i){return LL(s,i,t.length-1),t[i][e]}function Rm(s){let e;return s===void 0||s.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:s.length,start:DE.bind(null,"start",0,s),end:DE.bind(null,"end",1,s)},ge.default.Symbol&&ge.default.Symbol.iterator&&(e[ge.default.Symbol.iterator]=()=>(s||[]).values()),e}function or(s,e){return Array.isArray(s)?Rm(s):s===void 0||e===void 0?Rm():Rm([[s,e]])}var WS=function(s,e){s=s<0?0:s;let t=Math.floor(s%60),i=Math.floor(s/60%60),n=Math.floor(s/3600),r=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(s)||s===1/0)&&(n=i=t="-"),n=n>0||a>0?n+":":"",i=((n||r>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,n+i+t},Y0=WS;function KS(s){Y0=s}function YS(){Y0=WS}function Bo(s,e=s){return Y0(s,e)}var kL=Object.freeze({__proto__:null,createTimeRanges:or,createTimeRange:or,setFormatTime:KS,resetFormatTime:YS,formatTime:Bo});function XS(s,e){let t=0,i,n;if(!e)return 0;(!s||!s.length)&&(s=or(0,0));for(let r=0;r<s.length;r++)i=s.start(r),n=s.end(r),n>e&&(n=e),t+=n-i;return t/e}function Ii(s){if(s instanceof Ii)return s;typeof s=="number"?this.code=s:typeof s=="string"?this.message=s:Nr(s)&&(typeof s.code=="number"&&(this.code=s.code),Object.assign(this,s)),this.message||(this.message=Ii.defaultMessages[this.code]||"")}Ii.prototype.code=0;Ii.prototype.message="";Ii.prototype.status=null;Ii.prototype.metadata=null;Ii.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ii.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Ii.MEDIA_ERR_CUSTOM=0;Ii.prototype.MEDIA_ERR_CUSTOM=0;Ii.MEDIA_ERR_ABORTED=1;Ii.prototype.MEDIA_ERR_ABORTED=1;Ii.MEDIA_ERR_NETWORK=2;Ii.prototype.MEDIA_ERR_NETWORK=2;Ii.MEDIA_ERR_DECODE=3;Ii.prototype.MEDIA_ERR_DECODE=3;Ii.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ii.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ii.MEDIA_ERR_ENCRYPTED=5;Ii.prototype.MEDIA_ERR_ENCRYPTED=5;function Lc(s){return s!=null&&typeof s.then=="function"}function Rr(s){Lc(s)&&s.then(null,e=>{})}var e0=function(s){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,n)=>(s[i]&&(t[i]=s[i]),t),{cues:s.cues&&Array.prototype.map.call(s.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},RL=function(s){let e=s.$$("track"),t=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){let r=e0(n.track);return n.src&&(r.src=n.src),r}).concat(Array.prototype.filter.call(s.textTracks(),function(n){return t.indexOf(n)===-1}).map(e0))},PL=function(s,e){return s.forEach(function(t){let i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(n=>i.addCue(n))}),e.textTracks()},t0={textTracksToJson:RL,jsonToTextTracks:PL,trackToJson:e0},Pm="vjs-modal-dialog",za=class extends Ne{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Pt("div",{className:`${Pm}-content`},{role:"document"}),this.descEl_=Pt("p",{className:`${Pm}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Ya(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Pm} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}let e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;let e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){let t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){let n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){let t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),MS(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);let r=this.getChild("closeButton");r&&i.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Pf(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){let e=st.default.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;let t=this.focusableEls_(),i=this.el_.querySelector(":focus"),n;for(let r=0;r<t.length;r++)if(i===t[r]){n=r;break}st.default.activeElement===this.el_&&(n=0),e.shiftKey&&n===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&n===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){let e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof ge.default.HTMLAnchorElement||t instanceof ge.default.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof ge.default.HTMLInputElement||t instanceof ge.default.HTMLSelectElement||t instanceof ge.default.HTMLTextAreaElement||t instanceof ge.default.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof ge.default.HTMLIFrameElement||t instanceof ge.default.HTMLObjectElement||t instanceof ge.default.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}};za.prototype.options_={pauseOnOpen:!0,temporary:!0};Ne.registerComponent("ModalDialog",za);var ha=class extends js{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){let t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},ca(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,n=this.length;i<n;i++){let r=this[i];if(r.id===e){t=r;break}}return t}};ha.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(let s in ha.prototype.allowedEvents_)ha.prototype["on"+s]=null;var Om=function(s,e){for(let t=0;t<s.length;t++)!Object.keys(s[t]).length||e.id===s[t].id||(s[t].enabled=!1)},Lh=class extends ha{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Om(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Om(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Om(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},Mm=function(s,e){for(let t=0;t<s.length;t++)!Object.keys(s[t]).length||e.id===s[t].id||(s[t].selected=!1)},kh=class extends ha{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Mm(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Mm(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Mm(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},Nc=class extends ha{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}},i0=class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){let t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},au=class{constructor(e){au.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){let t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;let r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)}getCueById(e){let t=null;for(let i=0,n=this.length;i<n;i++){let r=this[i];if(r.id===e){t=r;break}}return t}},OL={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ML={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},NL={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},LE={disabled:"disabled",hidden:"hidden",showing:"showing"},Fc=class extends js{constructor(e={}){super();let t={id:e.id||"vjs_track_"+Wn(),kind:e.kind||"",language:e.language||""},i=e.label||"";for(let n in t)Object.defineProperty(this,n,{get(){return t[n]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(n){n!==i&&(i=n,this.trigger("labelchange"))}})}},X0=function(s){return new URL(s,st.default.baseURI)},QS=function(s){return new URL(s,st.default.baseURI).href},Q0=function(s){if(typeof s=="string"){let t=s.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return t?t[1].toLowerCase():""}return""},Ff=function(s,e=ge.default.location){return X0(s).origin!==e.origin},FL=Object.freeze({__proto__:null,parseUrl:X0,getAbsoluteURL:QS,getFileExtension:Q0,isCrossOrigin:Ff}),kE=function(s,e){let t=new ge.default.WebVTT.Parser(ge.default,ge.default.vttjs,ge.default.WebVTT.StringDecoder()),i=[];t.oncue=function(n){e.addCue(n)},t.onparsingerror=function(n){i.push(n)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(s),i.length>0&&(ge.default.console&&ge.default.console.groupCollapsed&&ge.default.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(n=>qt.error(n)),ge.default.console&&ge.default.console.groupEnd&&ge.default.console.groupEnd()),t.flush()},RE=function(s,e){let t={uri:s},i=Ff(s);i&&(t.cors=i);let n=e.tech_.crossOrigin()==="use-credentials";n&&(t.withCredentials=n),(0,V0.default)(t,Ti(this,function(r,a,o){if(r)return qt.error(r,a);e.loaded_=!0,typeof ge.default.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){qt.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return kE(o,e)}):kE(o,e)}))},Uo=class extends Fc{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");let t=hi(e,{kind:NL[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=LE[t.mode]||"disabled",n=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;let r=new au(this.cues_),a=new au(this.activeCues_),o=!1;this.timeupdateHandler=Ti(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});let l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return i},set(u){!LE[u]||i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&RE(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;let u=this.tech_.currentTime(),c=[];for(let h=0,g=this.cues.length;h<g;h++){let m=this.cues[h];m.startTime<=u&&m.endTime>=u&&c.push(m)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&RE(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new ge.default.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(let n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}let i=this.tech_.textTracks();for(let n=0;n<i.length;n++)i[n]!==this&&i[n].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return t0.trackToJson(this)}removeCue(e){let t=this.cues_.length;for(;t--;){let i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}};Uo.prototype.allowedEvents_={cuechange:"cuechange"};var Rh=class extends Fc{constructor(e={}){let t=hi(e,{kind:ML[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(n){typeof n!="boolean"||n===i||(i=n,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}},Ph=class extends Fc{constructor(e={}){let t=hi(e,{kind:OL[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(n){typeof n!="boolean"||n===i||(i=n,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}},ur=class extends js{constructor(e={}){super();let t,i=new Uo(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=ur.NONE,i.addEventListener("loadeddata",()=>{t=ur.LOADED,this.trigger({type:"load",target:this})})}};ur.prototype.allowedEvents_={load:"load"};ur.NONE=0;ur.LOADING=1;ur.LOADED=2;ur.ERROR=3;var zn={audio:{ListClass:Lh,TrackClass:Rh,capitalName:"Audio"},video:{ListClass:kh,TrackClass:Ph,capitalName:"Video"},text:{ListClass:Nc,TrackClass:Uo,capitalName:"Text"}};Object.keys(zn).forEach(function(s){zn[s].getterName=`${s}Tracks`,zn[s].privateName=`${s}Tracks_`});var ou={remoteText:{ListClass:Nc,TrackClass:Uo,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:i0,TrackClass:ur,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Hs=Object.assign({},zn,ou);ou.names=Object.keys(ou);zn.names=Object.keys(zn);Hs.names=[].concat(ou.names).concat(zn.names);function $L(s,e,t,i,n={}){let r=s.textTracks();n.kind=e,t&&(n.label=t),i&&(n.language=i),n.tech=s;let a=new Hs.text.TrackClass(n);return r.addTrack(a),a}var Ht=class extends Ne{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Hs.names.forEach(i=>{let n=Hs[i];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Hs.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ti(this,function(){let t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return or(0,0)}bufferedPercent(){return XS(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(zn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{let i=this[`${t}Tracks`]()||[],n=i.length;for(;n--;){let r=i[n];t==="text"&&this.removeRemoteTextTrack(r),i.removeTrack(r)}})}cleanupAutoTextTracks(){let e=this.autoRemoteTextTracks_||[],t=e.length;for(;t--;){let i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Ii(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?or(0,0):or()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){zn.names.forEach(e=>{let t=zn[e],i=()=>{this.trigger(`${e}trackchange`)},n=this[t.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.on("dispose",()=>{n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!ge.default.WebVTT)if(st.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&iu(zm.default)&&Object.keys(zm.default).length>0){this.trigger("vttjsloaded");return}let e=st.default.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),ge.default.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),n=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",n),this.addWebVttScript_();let r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let o=0;o<e.length;o++){let l=e[o];l.removeEventListener("cuechange",r),l.mode==="showing"&&l.addEventListener("cuechange",r)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",n),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",r)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return $L(this,e,t,i)}createRemoteTextTrack(e){let t=hi(e,{tech:this});return new ou.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){let i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){let t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){let t=Wn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Ht.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ht||e instanceof Ht||e===Ht}static registerTech(e,t){if(Ht.techs_||(Ht.techs_={}),!Ht.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Ht.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ht.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Oi(e),Ht.techs_[e]=t,Ht.techs_[Dc(e)]=t,e!=="Tech"&&Ht.defaultTechOrder_.push(e),t}static getTech(e){if(!!e){if(Ht.techs_&&Ht.techs_[e])return Ht.techs_[e];if(e=Oi(e),ge.default&&ge.default.videojs&&ge.default.videojs[e])return qt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),ge.default.videojs[e]}}};Hs.names.forEach(function(s){let e=Hs[s];Ht.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ht.prototype.featuresVolumeControl=!0;Ht.prototype.featuresMuteControl=!0;Ht.prototype.featuresFullscreenResize=!1;Ht.prototype.featuresPlaybackRate=!1;Ht.prototype.featuresProgressEvents=!1;Ht.prototype.featuresSourceset=!1;Ht.prototype.featuresTimeupdateEvents=!1;Ht.prototype.featuresNativeTextTracks=!1;Ht.prototype.featuresVideoFrameCallback=!1;Ht.withSourceHandlers=function(s){s.registerSourceHandler=function(t,i){let n=s.sourceHandlers;n||(n=s.sourceHandlers=[]),i===void 0&&(i=n.length),n.splice(i,0,t)},s.canPlayType=function(t){let i=s.sourceHandlers||[],n;for(let r=0;r<i.length;r++)if(n=i[r].canPlayType(t),n)return n;return""},s.selectSourceHandler=function(t,i){let n=s.sourceHandlers||[],r;for(let a=0;a<n.length;a++)if(r=n[a].canHandleSource(t,i),r)return n[a];return null},s.canPlaySource=function(t,i){let n=s.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){let i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(t){let i=s.selectSourceHandler(t,this.options_);i||(s.nativeSourceHandler?i=s.nativeSourceHandler:qt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==s.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Ne.registerComponent("Tech",Ht);Ht.registerTech("Tech",Ht);Ht.defaultTechOrder_=[];var Fo={},Oh={},Mh={};function BL(s,e){Fo[s]=Fo[s]||[],Fo[s].push(e)}function UL(s,e,t){s.setTimeout(()=>Po(e,Fo[e.type],t,s),1)}function HL(s,e){s.forEach(t=>t.setTech&&t.setTech(e))}function VL(s,e,t){return s.reduceRight(J0(t),e[t]())}function jL(s,e,t,i){return e[t](s.reduce(J0(t),i))}function PE(s,e,t,i=null){let n="call"+Oi(t),r=s.reduce(J0(n),i),a=r===Mh,o=a?null:e[t](r);return zL(s,t,o,a),o}var GL={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},qL={setCurrentTime:1,setMuted:1,setVolume:1},OE={play:1,pause:1};function J0(s){return(e,t)=>e===Mh?Mh:t[s]?t[s](e):e}function zL(s,e,t,i){for(let n=s.length-1;n>=0;n--){let r=s[n];r[e]&&r[e](i,t)}}function WL(s){Oh.hasOwnProperty(s.id())&&delete Oh[s.id()]}function KL(s,e){let t=Oh[s.id()],i=null;if(t==null)return i=e(s),Oh[s.id()]=[[e,i]],i;for(let n=0;n<t.length;n++){let[r,a]=t[n];r===e&&(i=a)}return i===null&&(i=e(s),t.push([e,i])),i}function Po(s={},e=[],t,i,n=[],r=!1){let[a,...o]=e;if(typeof a=="string")Po(s,Fo[a],t,i,n,r);else if(a){let l=KL(i,a);if(!l.setSource)return n.push(l),Po(s,o,t,i,n,r);l.setSource(Object.assign({},s),function(u,c){if(u)return Po(s,o,t,i,n,r);n.push(l),Po(c,s.type===c.type?o:Fo[c.type],t,i,n,r)})}else o.length?Po(s,o,t,i,n,r):r?t(s,n):Po(s,Fo["*"],t,i,n,!0)}var YL={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Nh=function(s=""){let e=Q0(s);return YL[e.toLowerCase()]||""},XL=(s,e)=>{if(!e)return"";if(s.cache_.source.src===e&&s.cache_.source.type)return s.cache_.source.type;let t=s.cache_.sources.filter(n=>n.src===e);if(t.length)return t[0].type;let i=s.$$("source");for(let n=0;n<i.length;n++){let r=i[n];if(r.type&&r.src&&r.src===e)return r.type}return Nh(e)},JS=function(s){if(Array.isArray(s)){let e=[];s.forEach(function(t){t=JS(t),Array.isArray(t)?e=e.concat(t):Nr(t)&&e.push(t)}),s=e}else typeof s=="string"&&s.trim()?s=[ME({src:s})]:Nr(s)&&typeof s.src=="string"&&s.src&&s.src.trim()?s=[ME(s)]:s=[];return s};function ME(s){if(!s.type){let e=Nh(s.src);e&&(s.type=e)}return s}var QL=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`,NE=Ch?10009:wh?461:8,jl={codes:{play:415,pause:19,ff:417,rw:412,back:NE},names:{415:"play",19:"pause",417:"ff",412:"rw",[NE]:"back"},isEventKey(s,e){return e=e.toLowerCase(),!!(this.names[s.keyCode]&&this.names[s.keyCode]===e)},getEventName(s){if(this.names[s.keyCode])return this.names[s.keyCode];if(this.codes[s.code]){let e=this.codes[s.code];return this.names[e]}return null}},FE=5,s0=class extends js{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){let t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();let i=t.key.substring(5).toLowerCase();this.move(i)}else if(jl.isEventKey(t,"play")||jl.isEventKey(t,"pause")||jl.isEventKey(t,"ff")||jl.isEventKey(t,"rw")){t.preventDefault();let i=jl.getEventName(t);this.performMediaAction_(i)}else jl.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+FE);break;case"rw":this.userSeek_(this.player_.currentTime()-FE);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){let t=e.relatedTarget,i=null,n=this.getCurrentComponent(e.target);t&&(i=Boolean(t.closest(".video-js")),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!t)&&(n&&n.name()==="CloseButton"?this.refocusComponent():(this.pause(),n&&n.el()&&(this.lastFocusedComponent_=n)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){let e=this.player_,t=[];function i(n){for(let r of n)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&t.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&i(r.children_)}return e.children_.forEach(n=>{if(n.hasOwnProperty("el_"))if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el())){t.push(n);return}else n.hasOwnProperty("children_")&&n.children_.length>0?i(n.children_):n.hasOwnProperty("items")&&n.items.length>0?i(n.items):this.findSuitableDOMChild(n)&&t.push(n);if(n.name_==="ErrorDisplay"&&n.opened_){let r=n.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{let u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let n=0;n<i.children.length;n++){let r=i.children[n],a=t(r);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();let t=e||document.activeElement;if(this.focusableComponents.length){for(let i of this.focusableComponents)if(i.el()===t)return i}}add(e){let t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){let t=this.getCurrentComponent();if(!t)return;let i=t.getPositions(),n=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(i.center,n,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,i){let n=1/0,r=null;for(let a of t){let o=a.getPositions().center,l=this.calculateDistance_(e,o,i);l<n&&(n=l,r=a)}return r}isInDirection_(e,t,i){switch(i){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,i){let n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),a;switch(i){case"right":case"left":a=n+r*100;break;case"up":a=r*2+n*.5;break;case"down":a=r*5+n;break;default:a=n+r}return a}searchForTrackSelect_(){let e=this;for(let t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}},n0=class extends Ne{constructor(e,t,i){let n=hi({createEl:!1},t);if(super(e,n,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let r=0,a=t.playerOptions.techOrder;r<a.length;r++){let o=Oi(a[r]),l=Ht.getTech(o);if(o||(l=Ne.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}};Ne.registerComponent("MediaLoader",n0);var lu=class extends Ne{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&qt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;let n=Pt(e,t,i);return this.player_.options_.experimentalSvgIcons||n.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Pt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";let i=this.localize(e);this.controlText_=e,Ya(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};Ne.registerComponent("ClickableComponent",lu);var $c=class extends lu{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Pt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){let t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Pt("picture",{className:"vjs-poster",tabIndex:-1},{},Pt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){!this.player_.controls()||(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Rr(this.player_.play()):this.player_.pause())}};$c.prototype.crossorigin=$c.prototype.crossOrigin;Ne.registerComponent("PosterImage",$c);var qn="#222",$E="#ccc",JL={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Nm(s,e){let t;if(s.length===4)t=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else if(s.length===7)t=s.slice(1);else throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function Lr(s,e,t){try{s.style[e]=t}catch{return}}function BE(s){return s?`${s}px`:""}var r0=class extends Ne{constructor(e,t,i){super(e,t,i);let n=a=>this.updateDisplay(a),r=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("useractive",n),e.on("userinactive",n),e.on("texttrackchange",n),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(Ti(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);let a=ge.default.screen.orientation||ge.default,o=ge.default.screen.orientation?"change":"orientationchange";a.addEventListener(o,r),e.on("dispose",()=>a.removeEventListener(o,r));let l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){let e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,n,r,a;for(let o=0;o<t.length;o++){let l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,n=null,r=null):l.default&&(l.kind==="descriptions"&&!n?n=l:l.kind in e&&!r&&(r=l))}a?a.mode="showing":r?r.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof ge.default.WebVTT=="function"&&ge.default.WebVTT.processCues(ge.default,[],this.el_)}updateDisplay(){let e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){let a=[];for(let o=0;o<e.length;++o){let l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,n=null,r=e.length;for(;r--;){let a=e[r];a.mode==="showing"&&(a.kind==="descriptions"?i=a:n=a)}if(n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!ge.default.CSS.supports("inset","10px")){let a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",Lr(a,"position","relative"),Lr(a,"height",u-l+"px"),Lr(a,"top","unset"),Ih?Lr(a,"bottom",u+"px"):Lr(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){let h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!ge.default.CSS.supports("inset-inline: 10px"))return;let e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,n=this.player_.videoWidth()/this.player_.videoHeight(),r=0,a=0;Math.abs(i-n)>.1&&(i>n?r=Math.round((e-t*n)/2):a=Math.round((t-e/n)/2)),Lr(this.el_,"insetInline",BE(r)),Lr(this.el_,"insetBlock",BE(a))}updateDisplayState(e){let t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;for(;n--;){let r=i[n];if(!r)continue;let a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Lr(a.firstChild,"color",Nm(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Lr(a.firstChild,"backgroundColor",Nm(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Lr(a,"backgroundColor",Nm(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${qn}, 2px 2px 4px ${qn}, 2px 2px 5px ${qn}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${qn}, 2px 2px ${qn}, 3px 3px ${qn}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${$E}, 0 1px ${$E}, -1px -1px ${qn}, 0 -1px ${qn}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${qn}, 0 0 4px ${qn}, 0 0 4px ${qn}, 0 0 4px ${qn}`)),t.fontPercent&&t.fontPercent!==1){let o=ge.default.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=JL[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof ge.default.WebVTT!="function"||e.every(i=>!i.activeCues))return;let t=[];for(let i=0;i<e.length;++i){let n=e[i];for(let r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r])}ge.default.WebVTT.processCues(ge.default,t,this.el_);for(let i=0;i<e.length;++i){let n=e[i];for(let r=0;r<n.activeCues.length;++r){let a=n.activeCues[r].displayState;No(a,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:i)),n.language&&su(a,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}};Ne.registerComponent("TextTrackDisplay",r0);var a0=class extends Ne{createEl(){let e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=Pt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};Ne.registerComponent("LoadingSpinner",a0);var cs=class extends lu{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);let n=Pt(e,t,i);return this.player_.options_.experimentalSvgIcons||n.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,t={}){let i=this.constructor.name;return qt.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),Ne.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}};Ne.registerComponent("Button",cs);var Fh=class extends cs{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){let t=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){Rr(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}let i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}let r=()=>n.focus();Lc(t)?t.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}};Fh.prototype.controlText_="Play Video";Ne.registerComponent("BigPlayButton",Fh);var o0=class extends cs{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};Ne.registerComponent("CloseButton",o0);var $h=class extends cs{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Rr(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}};$h.prototype.controlText_="Play";Ne.registerComponent("PlayToggle",$h);var Wa=class extends Ne{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){let e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=Pt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xA0`},{role:"presentation"});return t.appendChild(i),this.contentEl_=Pt("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Bo(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,qt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=st.default.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}};Wa.prototype.labelText_="Time";Wa.prototype.controlText_="Time";Ne.registerComponent("TimeDisplay",Wa);var Bc=class extends Wa{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?t=e.target.pendingSeekTime():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}};Bc.prototype.labelText_="Current Time";Bc.prototype.controlText_="Current Time";Ne.registerComponent("CurrentTimeDisplay",Bc);var Uc=class extends Wa{constructor(e,t){super(e,t);let i=n=>this.updateContent(n);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){let t=this.player_.duration();this.updateTextNode_(t)}};Uc.prototype.labelText_="Duration";Uc.prototype.controlText_="Duration";Ne.registerComponent("DurationDisplay",Uc);var l0=class extends Ne{createEl(){let e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}};Ne.registerComponent("TimeDivider",l0);var Hc=class extends Wa{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){let e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Pt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}};Hc.prototype.labelText_="Remaining Time";Hc.prototype.controlText_="Remaining Time";Ne.registerComponent("RemainingTimeDisplay",Hc);var u0=class extends Ne{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){let e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Pt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Pt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xA0`})),this.contentEl_.appendChild(st.default.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}};Ne.registerComponent("LiveDisplay",u0);var Bh=class extends cs{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){let e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Pt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};Bh.prototype.controlText_="Seek to live, currently playing live";Ne.registerComponent("SeekToLive",Bh);function id(s,e,t){return s=Number(s),Math.min(t,Math.max(e,isNaN(s)?e:s))}var ZL=Object.freeze({__proto__:null,clamp:id}),Vc=class extends Ne{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;let e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){let t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Fr&&e.preventDefault(),kS(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){let t=this.bar.el_.ownerDocument;RS(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;let e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{let t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(id(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){let t=Rf(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){let t=this.options_.playerOptions.spatialNavigation,i=t&&t.enabled,n=t&&t.horizontalSeek;i?n&&e.key==="ArrowLeft"||!n&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):n&&e.key==="ArrowRight"||!n&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};Ne.registerComponent("Slider",Vc);var Fm=(s,e)=>id(s/e*100,0,100).toFixed(2)+"%",c0=class extends Ne{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){let e=super.createEl("div",{className:"vjs-load-progress"}),t=Pt("span",{className:"vjs-control-text"}),i=Pt("span",{textContent:this.localize("Loaded")}),n=st.default.createTextNode(": ");return this.percentageEl_=Pt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{let t=this.player_.liveTracker,i=this.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_,o=Fm(r,n);this.percent_!==o&&(this.el_.style.width=o,Ya(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){let u=i.start(l),c=i.end(l),h=a[l];h||(h=this.el_.appendChild(Pt()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=Fm(u,r),h.style.width=Fm(c-u,r))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}};Ne.registerComponent("LoadProgressBar",c0);var d0=class extends Ne{constructor(e,t){super(e,t),this.update=$r(Ti(this,this.update),Kn)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){let n=Oc(this.el_),r=nu(this.player_.el()),a=e.width*t;if(!r||!n)return;let o=e.left-r.left+a,l=e.width-a+(r.right-e.right);l||(l=e.width-a,o=a);let u=n.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>n.width&&(u=n.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){Ya(this.el_,e)}updateTime(e,t,i,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r,a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){let o=this.player_.liveTracker.liveWindow(),l=o-t*o;r=(l<1?"":"-")+Bo(l,o)}else r=Bo(i,a);this.update(e,t,r),n&&n()})}};Ne.registerComponent("TimeTooltip",d0);var jc=class extends Ne{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=$r(Ti(this,this.update),Kn)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,i){let n=this.getChild("timeTooltip");if(!n)return;let r=i&&i.target&&typeof i.target.pendingSeekTime=="function"?i.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}};jc.prototype.options_={children:[]};!Cs&&!lr&&jc.prototype.options_.children.push("timeTooltip");Ne.registerComponent("PlayProgressBar",jc);var Uh=class extends Ne{constructor(e,t){super(e,t),this.update=$r(Ti(this,this.update),Kn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){let i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}};Uh.prototype.options_={children:["timeTooltip"]};Ne.registerComponent("MouseTimeDisplay",Uh);var uu=class extends Vc{constructor(e,t){t=hi(uu.prototype.options_,t),t.children=[...t.children];let i=e.options_.disableSeekWhileScrubbingOnMobile&&(Cs||lr)||e.options_.disableSeekWhileScrubbingOnSTV;(!Cs&&!lr||i)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Ti(this,this.update),this.update=$r(this.update_,Kn),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in st.default&&"visibilityState"in st.default&&this.on(st.default,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){st.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Kn))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(st.default.visibilityState==="hidden")return;let t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{let i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker,r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Bo(i,r),Bo(r,r)],"{1} of {2}")),this.currentTime_=i,this.duration_=r),this.bar&&this.bar.update(nu(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){let t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();let e=this.getCurrentTime_(),t,i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){!Mc(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Mc(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i,n=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())i=n*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(n>=.99){r.seekToLiveEdge();return}let a=r.seekableStart(),o=r.liveCurrentTime();if(i=a+n*r.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(i):this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();let e=this.getChild("mouseTimeDisplay");!e||e.show()}disable(){super.disable();let e=this.getChild("mouseTimeDisplay");!e||e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Rr(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();let t=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){let t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();let i=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in st.default&&"visibilityState"in st.default&&this.off(st.default,"visibilitychange",this.toggleVisibility_),super.dispose()}};uu.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};Ne.registerComponent("SeekBar",uu);var Hh=class extends Ne{constructor(e,t){super(e,t),this.handleMouseMove=$r(Ti(this,this.handleMouseMove),Kn),this.throttledHandleMouseSeek=$r(Ti(this,this.handleMouseSeek),Kn),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){let t=this.getChild("seekBar");if(!t)return;let i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(!i&&!n)return;let r=t.el(),a=Oc(r),o=Rf(r,e).x;o=id(o,0,1),n&&n.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){let t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){let e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Rr(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){let e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){let t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){let t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}};Hh.prototype.options_={children:["seekBar"]};Ne.registerComponent("ProgressControl",Hh);var Vh=class extends cs{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){st.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in ge.default?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof st.default.exitPictureInPicture=="function"&&super.show()}};Vh.prototype.controlText_="Picture-in-Picture";Ne.registerComponent("PictureInPictureToggle",Vh);var jh=class extends cs{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),st.default[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};jh.prototype.controlText_="Fullscreen";Ne.registerComponent("FullscreenToggle",jh);var ek=function(s,e){e.tech_&&!e.tech_.featuresVolumeControl&&s.addClass("vjs-hidden"),s.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")})},h0=class extends Ne{createEl(){let e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}};Ne.registerComponent("VolumeLevel",h0);var f0=class extends Ne{constructor(e,t){super(e,t),this.update=$r(Ti(this,this.update),Kn)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,n){if(!i){let r=nu(this.el_),a=nu(this.player_.el()),o=e.width*t;if(!a||!r)return;let l=e.left-a.left+o,u=e.width-o+(a.right-e.right),c=r.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>r.width&&(c=r.width),this.el_.style.right=`-${c}px`}this.write(`${n}%`)}write(e){Ya(this.el_,e)}updateVolume(e,t,i,n,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,n.toFixed(0)),r&&r()})}};Ne.registerComponent("VolumeLevelTooltip",f0);var Gh=class extends Ne{constructor(e,t){super(e,t),this.update=$r(Ti(this,this.update),Kn)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){let n=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,n,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}};Gh.prototype.options_={children:["volumeLevelTooltip"]};Ne.registerComponent("MouseVolumeLevelDisplay",Gh);var cu=class extends Vc{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){!Mc(e)||super.handleMouseDown(e)}handleMouseMove(e){let t=this.getChild("mouseVolumeLevelDisplay");if(t){let i=this.el(),n=nu(i),r=this.vertical(),a=Rf(i,e);a=r?a.y:a.x,a=id(a,0,1),t.update(n,a,r)}!Mc(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){let t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){let e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}};cu.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Cs&&!lr&&cu.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");cu.prototype.playerEvent="volumechange";Ne.registerComponent("VolumeBar",cu);var qh=class extends Ne{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||iu(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),ek(this,e),this.throttledHandleMouseMove=$r(Ti(this,this.handleMouseMove),Kn),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){let t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){let t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}};qh.prototype.options_={children:["volumeBar"]};Ne.registerComponent("VolumeControl",qh);var tk=function(s,e){e.tech_&&!e.tech_.featuresMuteControl&&s.addClass("vjs-hidden"),s.on(e,"loadstart",function(){e.tech_.featuresMuteControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")})},zh=class extends cs{constructor(e,t){super(e,t),tk(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){let t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){let n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){let e=this.player_.volume(),t=3;this.setIcon("volume-high"),Cs&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Lf(this.el_,[0,1,2,3].reduce((i,n)=>i+`${n?" ":""}vjs-vol-${n}`,"")),No(this.el_,`vjs-vol-${t}`)}updateControlText_(){let t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}};zh.prototype.controlText_="Mute";Ne.registerComponent("MuteToggle",zh);var Wh=class extends Ne{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||iu(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),wn(st.default,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),ws(st.default,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}};Wh.prototype.options_={children:["muteToggle","volumeControl"]};Ne.registerComponent("VolumePanel",Wh);var Kh=class extends cs{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){let e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;let t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()?i.seekableEnd():this.player_.duration(),r;t+this.skipTime<=n?r=t+this.skipTime:r=n,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}};Kh.prototype.controlText_="Skip Forward";Ne.registerComponent("SkipForward",Kh);var Yh=class extends cs{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){let e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){let t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()&&i.seekableStart(),r;n&&t-this.skipTime<=n?r=n:t>=this.skipTime?r=t-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}};Yh.prototype.controlText_="Skip Backward";Ne.registerComponent("SkipBackward",Yh);var Xh=class extends Ne{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof Ne&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Ne&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){let t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){let e=this.options_.contentElType||"ul";this.contentEl_=Pt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");let t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),wn(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){let t=e.relatedTarget||st.default.activeElement;if(!this.children().some(i=>i.el()===t)){let i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();let t=this.children();if(!Array.isArray(t))return;let i=t.filter(n=>n.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){let t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}};Ne.registerComponent("Menu",Xh);var Gc=class extends Ne{constructor(e,t={}){super(e,t),this.menuButton_=new cs(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");let i=cs.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;let n=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),wn(st.default,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){let e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){let e=new Xh(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){let t=Pt("li",{className:"vjs-menu-title",textContent:Oi(this.options_.title),tabIndex:-1}),i=new Ne(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";let t=cs.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),ws(st.default,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Cs&&CS())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};Ne.registerComponent("MenuButton",Gc);var qc=class extends Gc{constructor(e,t){let i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;let n=Ti(this,this.update);i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)})}};Ne.registerComponent("TrackButton",qc);var Ho=class extends lu{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;let n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),r=Pt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?n.appendChild(r):n.replaceChild(r,n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};Ne.registerComponent("MenuItem",Ho);var Vo=class extends Ho{constructor(e,t){let i=t.track,n=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);let r=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],r),n.addEventListener("change",r),n.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),n.removeEventListener("change",r),n.removeEventListener("selectedlanguagechange",a)}),n.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof ge.default.Event!="object")try{o=new ge.default.Event("change")}catch{}o||(o=st.default.createEvent("Event"),o.initEvent("change",!0,!0)),n.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){let t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let n=0;n<i.length;n++){let r=i[n];this.kinds.indexOf(r.kind)!==-1&&(r===t?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){let t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){let t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};Ne.registerComponent("TextTrackMenuItem",Vo);var Qh=class extends Vo{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){let t=this.player().textTracks(),i=!0;for(let n=0,r=t.length;n<r;n++){let a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){let t=this.player().textTracks(),i=!0;for(let n=0,r=t.length;n<r;n++){let a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};Ne.registerComponent("OffTextTrackMenuItem",Qh);var Ka=class extends qc{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Vo){let i;this.label_&&(i=`${this.label_} off`),e.push(new Qh(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;let n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<n.length;r++){let a=n[r];if(this.kinds_.indexOf(a.kind)>-1){let o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}};Ne.registerComponent("TextTrackButton",Ka);var Jh=class extends Ho{constructor(e,t){let i=t.track,n=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=r&&r<n.endTime,super(e,t),this.track=i,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};Ne.registerComponent("ChaptersTrackMenuItem",Jh);var zc=class extends Ka{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;let t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){let t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";let t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){let e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){let i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Oi(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){let e=[];if(!this.track_)return e;let t=this.track_.cues;if(!t)return e;for(let i=0,n=t.length;i<n;i++){let r=t[i],a=new Jh(this.player_,{track:this.track_,cue:r});e.push(a)}return e}};zc.prototype.kind_="chapters";zc.prototype.controlText_="Chapters";Ne.registerComponent("ChaptersButton",zc);var Wc=class extends Ka{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");let n=e.textTracks(),r=Ti(this,this.handleTracksChange);n.addEventListener("change",r),this.on("dispose",function(){n.removeEventListener("change",r)})}handleTracksChange(e){let t=this.player().textTracks(),i=!1;for(let n=0,r=t.length;n<r;n++){let a=t[n];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};Wc.prototype.kind_="descriptions";Wc.prototype.controlText_="Descriptions";Ne.registerComponent("DescriptionsButton",Wc);var Kc=class extends Ka{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};Kc.prototype.kind_="subtitles";Kc.prototype.controlText_="Subtitles";Ne.registerComponent("SubtitlesButton",Kc);var Yc=class extends Vo{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};Ne.registerComponent("CaptionSettingsMenuItem",Yc);var Xc=class extends Ka{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Yc(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}};Xc.prototype.kind_="captions";Xc.prototype.controlText_="Captions";Ne.registerComponent("CaptionsButton",Xc);var Zh=class extends Vo{createEl(e,t,i){let n=super.createEl(e,t,i),r=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",n):r.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Pt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}};Ne.registerComponent("SubsCapsMenuItem",Zh);var Qc=class extends Ka{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Oi(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Yc(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Zh),e}};Qc.prototype.kinds_=["captions","subtitles"];Qc.prototype.controlText_="Subtitles";Ne.registerComponent("SubsCapsButton",Qc);var ef=class extends Ho{constructor(e,t){let i=t.track,n=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);let r=(...a)=>{this.handleTracksChange.apply(this,a)};n.addEventListener("change",r),this.on("dispose",()=>{n.removeEventListener("change",r)})}createEl(e,t,i){let n=super.createEl(e,t,i),r=n.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Pt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Pt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){let t=this.player_.audioTracks();for(let i=0;i<t.length;i++){let n=t[i];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}};Ne.registerComponent("AudioTrackMenuItem",ef);var tf=class extends qc{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;let t=this.player_.audioTracks();for(let i=0;i<t.length;i++){let n=t[i];e.push(new ef(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}};tf.prototype.controlText_="Audio Track";Ne.registerComponent("AudioTrackButton",tf);var Jc=class extends Ho{constructor(e,t){let i=t.rate,n=parseFloat(i,10);t.label=i,t.selected=n===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=n,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}};Jc.prototype.contentElType="button";Ne.registerComponent("PlaybackRateMenuItem",Jc);var sf=class extends Gc{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){let e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Pt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){let e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new Jc(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){let e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};sf.prototype.controlText_="Playback Rate";Ne.registerComponent("PlaybackRateMenuButton",sf);var nf=class extends Ne{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}};Ne.registerComponent("Spacer",nf);var p0=class extends nf{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xA0"})}};Ne.registerComponent("CustomControlSpacer",p0);var rf=class extends Ne{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};rf.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Ne.registerComponent("ControlBar",rf);var af=class extends za{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){let e=this.player().error();return e?this.localize(e.message):""}};af.prototype.options_=Object.assign({},za.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Ne.registerComponent("ErrorDisplay",af);var of=class extends Ne{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Pt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{let i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Wn()}`)+"-"+t[1].replace(/\W+/g,""),n=Pt("option",{id:i,value:this.localize(t[0]),textContent:this.localize(t[1])});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),n}))}};Ne.registerComponent("TextTrackSelect",of);var da=class extends Ne{constructor(e,t={}){super(e,t);let i=Pt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);let n=this.options_.selects;for(let r of n){let a=this.options_.selectConfigs[r],o=a.className,l=a.id.replace("%s",this.options_.id_),u=null,c=`vjs_select_${Wn()}`;if(this.options_.type==="colors"){u=Pt("span",{className:o});let g=Pt("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});g.setAttribute("for",c),u.appendChild(g)}let h=new of(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return Pt("fieldset",{className:this.options_.className})}};Ne.registerComponent("TextTrackFieldset",da);var lf=class extends Ne{constructor(e,t={}){super(e,t);let i=this.options_.textTrackComponentid,n=new da(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);let r=new da(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);let a=new da(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Pt("div",{className:"vjs-track-settings-colors"})}};Ne.registerComponent("TextTrackSettingsColors",lf);var uf=class extends Ne{constructor(e,t={}){super(e,t);let i=this.options_.textTrackComponentid,n=new da(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);let r=new da(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);let a=new da(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Pt("div",{className:"vjs-track-settings-font"})}};Ne.registerComponent("TextTrackSettingsFont",uf);var cf=class extends Ne{constructor(e,t={}){super(e,t);let i=new cs(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);let n=this.localize("Done"),r=new cs(e,{controlText:n,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=n,this.addChild(r)}createEl(){return Pt("div",{className:"vjs-track-settings-controls"})}};Ne.registerComponent("TrackSettingsControls",cf);var $m="vjs-text-track-settings",UE=["#000","Black"],HE=["#00F","Blue"],VE=["#0FF","Cyan"],jE=["#0F0","Green"],GE=["#F0F","Magenta"],qE=["#F00","Red"],zE=["#FFF","White"],WE=["#FF0","Yellow"],Bm=["1","Opaque"],Um=["0.5","Semi-Transparent"],KE=["0","Transparent"],Ha={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[UE,zE,qE,jE,HE,WE,GE,VE],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Bm,Um,KE],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[zE,UE,qE,jE,HE,WE,GE,VE],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:s=>s==="1.00"?null:Number(s)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Bm,Um],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[KE,Um,Bm],className:"vjs-window-opacity vjs-opacity"}};Ha.windowColor.options=Ha.backgroundColor.options;function ZS(s,e){if(e&&(s=e(s)),s&&s!=="none")return s}function ik(s,e){let t=s.options[s.options.selectedIndex].value;return ZS(t,e)}function sk(s,e,t){if(!!e){for(let i=0;i<s.options.length;i++)if(ZS(s.options[i].value,t)===e){s.selectedIndex=i;break}}}var g0=class extends za{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Pt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){let t=new lf(e,{textTrackComponentid:this.id_,selectConfigs:Ha,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);let i=new uf(e,{textTrackComponentid:this.id_,selectConfigs:Ha,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);let n=new cf(e);this.addChild(n)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Wl(Ha,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return TS(Ha,(e,t,i)=>{let n=ik(this.$(t.selector),t.parser);return n!==void 0&&(e[i]=n),e},{})}setValues(e){Wl(Ha,(t,i)=>{sk(this.$(t.selector),e[i],t.parser)})}setDefaults(){Wl(Ha,e=>{let t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(ge.default.localStorage.getItem($m))}catch(t){qt.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;let e=this.getValues();try{Object.keys(e).length?ge.default.localStorage.setItem($m,JSON.stringify(e)):ge.default.localStorage.removeItem($m)}catch(t){qt.warn(t)}}updateDisplay(){let e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}};Ne.registerComponent("TextTrackSettings",g0);var m0=class extends Ne{constructor(e,t){let i=t.ResizeObserver||ge.default.ResizeObserver;t.ResizeObserver===null&&(i=!1);let n=hi({createEl:!i,reportTouchActivity:!1},t);super(e,n),this.ResizeObserver=t.ResizeObserver||ge.default.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=VS(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;let r=this.debouncedHandler_,a=this.unloadListener_=function(){ws(this,"resize",r),ws(this,"unload",a),a=null};wn(this.el_.contentWindow,"unload",a),wn(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};Ne.registerComponent("ResizeManager",m0);var nk={trackingThreshold:20,liveTolerance:15},y0=class extends Ne{constructor(e,t){let i=hi(nk,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){let e=this.player_.seekable();if(!e||!e.length)return;let t=Number(ge.default.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;let n=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Kn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){let e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){let e=this.player_.seekable(),t=[],i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){let e=this.player_.seekable(),t=[],i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){let e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){let e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};Ne.registerComponent("LiveTracker",y0);var v0=class extends Ne{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Pt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Wn()}`}),description:Pt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Wn()}`})},Pt("div",{className:"vjs-title-bar"},{},_S(this.els))}updateDom_(){let e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{let r=this.state[n],a=this.els[n],o=i[n];Pf(a),r&&Ya(a,r),t&&(t.removeAttribute(o),r&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){let e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}};Ne.registerComponent("TitleBar",v0);var rk={initialDisplay:4e3,position:[],takeFocus:!1},T0=class extends cs{constructor(e,t){t=hi(rk,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){let e=Pt("button",{},{type:"button",class:this.buildCSSClass()},Pt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}};Ne.registerComponent("TransientButton",T0);var _0=s=>{let e=s.el();if(e.hasAttribute("src"))return s.triggerSourceset(e.src),!0;let t=s.$$("source"),i=[],n="";if(!t.length)return!1;for(let r=0;r<t.length;r++){let a=t[r].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(n=i[0]),s.triggerSourceset(n),!0):!1},ak=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(s){let e=st.default.createElement(this.nodeName.toLowerCase());e.innerHTML=s;let t=st.default.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",ge.default.Element.prototype.appendChild.call(this,t),this.innerHTML}}),ex=(s,e)=>{let t={};for(let i=0;i<s.length&&(t=Object.getOwnPropertyDescriptor(s[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},ok=s=>ex([s.el(),ge.default.HTMLMediaElement.prototype,ge.default.Element.prototype,ak],"innerHTML"),YE=function(s){let e=s.el();if(e.resetSourceWatch_)return;let t={},i=ok(s),n=r=>(...a)=>{let o=r.apply(e,a);return _0(s),o};["append","appendChild","insertAdjacentHTML"].forEach(r=>{!e[r]||(t[r]=e[r],e[r]=n(t[r]))}),Object.defineProperty(e,"innerHTML",hi(i,{set:n(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(r=>{e[r]=t[r]}),Object.defineProperty(e,"innerHTML",i)},s.one("sourceset",e.resetSourceWatch_)},lk=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?QS(ge.default.Element.prototype.getAttribute.call(this,"src")):""},set(s){return ge.default.Element.prototype.setAttribute.call(this,"src",s),s}}),uk=s=>ex([s.el(),ge.default.HTMLMediaElement.prototype,lk],"src"),ck=function(s){if(!s.featuresSourceset)return;let e=s.el();if(e.resetSourceset_)return;let t=uk(s),i=e.setAttribute,n=e.load;Object.defineProperty(e,"src",hi(t,{set:r=>{let a=t.set.call(e,r);return s.triggerSourceset(e.src),a}})),e.setAttribute=(r,a)=>{let o=i.call(e,r,a);return/src/i.test(r)&&s.triggerSourceset(e.src),o},e.load=()=>{let r=n.call(e);return _0(s)||(s.triggerSourceset(""),YE(s)),r},e.currentSrc?s.triggerSourceset(e.currentSrc):_0(s)||YE(s),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=n,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}},pt=class extends Ht{constructor(e,t){super(e,t);let i=e.source,n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){let r=this.el_.childNodes,a=r.length,o=[];for(;a--;){let l=r[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!n&&!this.el_.hasAttribute("crossorigin")&&Ff(l.src)&&(n=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&qt.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Pc||If)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),pt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){ck(this)}restoreMetadataTracksInIOSNativePlayer_(){let e=this.textTracks(),t,i=()=>{t=[];for(let r=0;r<e.length;r++){let a=e[r];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));let n=()=>{for(let r=0;r<t.length;r++){let a=t[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",n)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;let i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(n=>{this.el()[`${i}Tracks`].removeEventListener(n,this[`${i}TracksListeners_`][n])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){let t=zn[e],i=this.el()[t.getterName],n=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;let r={change:o=>{let l={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(l),e==="text"&&this[ou.remoteText.getterName]().trigger(l)},addtrack(o){n.addTrack(o.track)},removetrack(o){n.removeTrack(o.track)}},a=function(){let o=[];for(let l=0;l<n.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===n[l]){u=!0;break}u||o.push(n[l])}for(;o.length;)n.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach(o=>{let l=r[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){zn.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){let i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),pt.disposeMediaElement(e),e=i}else{e=st.default.createElement("video");let i=this.options_.tag&&Ua(this.options_.tag),n=hi({},i);(!Pc||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,DS(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&su(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);let t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){let n=t[i],r=this.options_[n];typeof r<"u"&&(r?su(e,n,n):kf(e,n),e[n]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1,n=function(){i=!0};this.on("loadstart",n);let r=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),i||this.trigger("loadstart")});return}let t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Df?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){qt(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&lr&&Fr&&this.el_.currentTime===0){let e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;let e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){let e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Rr(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return qt.error("Invalid source URL."),!1;let i={src:e};t&&(i.type=t);let n=Pt("source",{},i);return this.el_.appendChild(n),!0}removeSourceElement(e){if(!e)return qt.error("Source URL is required to remove the source element."),!1;let t=this.el_.querySelectorAll("source");for(let i of t)if(i.src===e)return this.el_.removeChild(i),!0;return qt.warn(`No matching source element found with src: ${e}`),!1}reset(){pt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);let t=st.default.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){let i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){let t=this.$$("track"),i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();let e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),ge.default.performance&&(e.creationTime=ge.default.performance.now()),e}};Af(pt,"TEST_VID",function(){if(!hu())return;let s=st.default.createElement("video"),e=st.default.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",s.appendChild(e),s});pt.isSupported=function(){try{pt.TEST_VID.volume=.5}catch{return!1}return!!(pt.TEST_VID&&pt.TEST_VID.canPlayType)};pt.canPlayType=function(s){return pt.TEST_VID.canPlayType(s)};pt.canPlaySource=function(s,e){return pt.canPlayType(s.type)};pt.canControlVolume=function(){try{let s=pt.TEST_VID.volume;pt.TEST_VID.volume=s/2+.1;let e=s!==pt.TEST_VID.volume;return e&&Cs?(ge.default.setTimeout(()=>{pt&&pt.prototype&&(pt.prototype.featuresVolumeControl=s!==pt.TEST_VID.volume)}),!1):e}catch{return!1}};pt.canMuteVolume=function(){try{let s=pt.TEST_VID.muted;return pt.TEST_VID.muted=!s,pt.TEST_VID.muted?su(pt.TEST_VID,"muted","muted"):kf(pt.TEST_VID,"muted","muted"),s!==pt.TEST_VID.muted}catch{return!1}};pt.canControlPlaybackRate=function(){if(lr&&Fr&&Cf<58)return!1;try{let s=pt.TEST_VID.playbackRate;return pt.TEST_VID.playbackRate=s/2+.1,s!==pt.TEST_VID.playbackRate}catch{return!1}};pt.canOverrideAttributes=function(){try{let s=()=>{};Object.defineProperty(st.default.createElement("video"),"src",{get:s,set:s}),Object.defineProperty(st.default.createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(st.default.createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(st.default.createElement("audio"),"innerHTML",{get:s,set:s})}catch{return!1}return!0};pt.supportsNativeTextTracks=function(){return Df||Cs&&Fr};pt.supportsNativeVideoTracks=function(){return!!(pt.TEST_VID&&pt.TEST_VID.videoTracks)};pt.supportsNativeAudioTracks=function(){return!!(pt.TEST_VID&&pt.TEST_VID.audioTracks)};pt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([s,e]){Af(pt.prototype,s,()=>pt[e](),!0)});pt.prototype.featuresVolumeControl=pt.canControlVolume();pt.prototype.movingMediaElementInDOM=!Cs;pt.prototype.featuresFullscreenResize=!0;pt.prototype.featuresProgressEvents=!0;pt.prototype.featuresTimeupdateEvents=!0;pt.prototype.featuresVideoFrameCallback=!!(pt.TEST_VID&&pt.TEST_VID.requestVideoFrameCallback);pt.disposeMediaElement=function(s){if(!!s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch{}}()}};pt.resetMediaElement=function(s){if(!s)return;let e=s.querySelectorAll("source"),t=e.length;for(;t--;)s.removeChild(e[t]);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){pt.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){pt.prototype["set"+Oi(s)]=function(e){this.el_[s]=e,e?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){pt.prototype[s]=function(){return this.el_[s]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){pt.prototype["set"+Oi(s)]=function(e){this.el_[s]=e}});["pause","load","play"].forEach(function(s){pt.prototype[s]=function(){return this.el_[s]()}});Ht.withSourceHandlers(pt);pt.nativeSourceHandler={};pt.nativeSourceHandler.canPlayType=function(s){try{return pt.TEST_VID.canPlayType(s)}catch{return""}};pt.nativeSourceHandler.canHandleSource=function(s,e){if(s.type)return pt.nativeSourceHandler.canPlayType(s.type);if(s.src){let t=Q0(s.src);return pt.nativeSourceHandler.canPlayType(`video/${t}`)}return""};pt.nativeSourceHandler.handleSource=function(s,e,t){e.setSrc(s.src)};pt.nativeSourceHandler.dispose=function(){};pt.registerSourceHandler(pt.nativeSourceHandler);Ht.registerTech("Html5",pt);var tx=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Hm={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},b0=["tiny","xsmall","small","medium","large","xlarge","huge"],bh={};b0.forEach(s=>{let e=s.charAt(0)==="x"?`x-${s.substring(1)}`:s;bh[s]=`vjs-layout-${e}`});var dk={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ei=class extends Ne{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${Wn()}`,t=Object.assign(ei.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){let a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=yS(this.id_),this.fsApi_=Sh,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Ua(e),this.language(this.options_.language),t.languages){let a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=ei.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),K0(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(wn(st.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);let n=hi(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){let o=new ge.default.DOMParser().parseFromString(QL,"image/svg+xml");if(o.querySelector("parsererror"))qt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{let u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new s0(this),this.addClass("vjs-spatial-navigation-enabled")),Pc&&this.addClass("vjs-touch-enabled"),Cs||this.addClass("vjs-workinghover"),ei.players[this.id_]=this;let r=Wm.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),ws(st.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ws(st.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),ei.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),WL(this),Hs.names.forEach(e=>{let t=Hs[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),n=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:n||(t=this.el_=super.createEl("div"));let r=Ua(e);if(n){for(t=this.el_=e,e=this.tag=st.default.createElement("video");t.children.length;)e.appendChild(t.firstChild);Ic(t,"video-js")||No(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",Fr&&wf&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(l){n&&l==="class"||t.setAttribute(l,r[l]),n&&e.setAttribute(l,r[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");let a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>AS[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),ge.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=US("vjs-styles-dimensions");let l=qa(".vjs-styles-defaults"),u=qa("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);let o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){let u=o.item(l);No(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),Ym(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){qt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){let i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}let n=parseFloat(t);if(isNaN(n)){qt.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=n,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,ca(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),CL(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(ge.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){let o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,i,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";let r=i.split(":"),a=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),HS(this.styleEl_,`
      .${n} {
        width: ${e}px;
        height: ${t}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();let i=Oi(e),n=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Ht.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);let a={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Hs.names.forEach(l=>{let u=Hs[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);let o=Ht.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(Ti(this,this.handleTechReady_),!0),t0.jsonToTextTracks(this.textTracksJson_||[],this.tech_),tx.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Oi(l)}_`](u))}),Object.keys(Hm).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Hm[l]}_`].bind(this),event:u});return}this[`handleTech${Hm[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&Ym(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Hs.names.forEach(e=>{let t=Hs[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=t0.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&qt.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Wm}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;let t=()=>{let n=this.muted();this.muted(!0);let r=()=>{this.muted(n)};this.playTerminatedQueue_.push(r);let a=this.play();if(!!Lc(a))return a.catch(o=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})},i;if(e==="any"&&!this.muted()?(i=this.play(),Lc(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!Lc(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=XL(this,t)),this.cache_.source=hi({},e,{src:t,type:i});let n=this.cache_.sources.filter(l=>l.src&&l.src===t),r=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){let u=Ua(a[l]);r.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=r=>this.updateSourceCaches_(r),i=this.currentSource().src,n=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)&&(t=()=>{}),t(n),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;let a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Rr(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!st.default.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){let t=e.target.player;if(t&&t!==this)return;let i=this.el(),n=st.default[this.fsApi_.fullscreenElement]===i;!n&&i.matches&&(n=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){let e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in qL)return jL(this.middleware_,this.tech_,e,t);if(e in OE)return PE(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw qt(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in GL)return VL(this.middleware_,this.tech_,e);if(e in OE)return PE(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(qt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(qt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(qt(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Rr){this.playCallbacks_.push(e);let t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),i=Boolean(Df||Cs);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}let n=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){let e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){let t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||or(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=or(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=or(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return XS(this.buffered(),this.duration())}bufferedEnd(){let e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){let t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();let t=this;return new Promise((i,n)=>{function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){r(),i()}function o(u,c){r(),n(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);let l=t.requestFullscreenHelper_(e);l&&(l.then(r,r),l.then(i,n))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){let i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let e=this;return new Promise((t,i)=>{function n(){e.off("fullscreenerror",a),e.off("fullscreenchange",r)}function r(){n(),t()}function a(l,u){n(),i(u)}e.one("fullscreenchange",r),e.one("fullscreenerror",a);let o=e.exitFullscreenHelper_();o&&(o.then(n,n),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){let e=st.default[this.fsApi_.exitFullscreen]();return e&&Rr(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=st.default.documentElement.style.overflow,wn(st.default,"keydown",this.boundFullWindowOnEscKey_),st.default.documentElement.style.overflow="hidden",No(st.default.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,ws(st.default,"keydown",this.boundFullWindowOnEscKey_),st.default.documentElement.style.overflow=this.docOrigOverflow,Lf(st.default.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&ge.default.documentPictureInPicture){let e=st.default.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Pt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),ge.default.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(FS(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",i=>{let n=i.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in st.default&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(ge.default.documentPictureInPicture&&ge.default.documentPictureInPicture.window)return ge.default.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in st.default)return st.default.exitPictureInPicture()}handleKeyDown(e){let{userActions:t}=this.options_;!t||!t.hotkeys||(n=>{let r=n.tagName.toLowerCase();if(n.isContentEditable)return!0;let a=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?a.indexOf(n.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){let t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>e.key.toLowerCase()==="f",muteKey:n=a=>e.key.toLowerCase()==="m",playPauseKey:r=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();let a=Ne.getComponent("FullscreenToggle");st.default[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else n.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ne.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ne.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,n=this.options_.techOrder;i<n.length;i++){let r=n[i],a=Ht.getTech(r);if(a||(a=Ne.getComponent(r)),!a){qt.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){let t=this.options_.techOrder.map(o=>[o,Ht.getTech(o)]).filter(([o,l])=>l?l.isSupported():(qt.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(h=>l.some(g=>{if(c=u(h,g),c)return!0})),c},n,r=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?n=i(e,t,r(a)):n=i(t,e,a),n||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let i=JS(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),UL(this,i[0],(n,r)=>{if(this.middleware_=r,t||(this.cache_.sources=i),this.updateSourceCaches_(n),this.src_(n)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}HL(r,this.tech_)}),i.length>1){let n=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},r=()=>{this.off("error",n)};this.one("error",n),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){let t=this.selectSource([e]);return t?zS(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{let e=this.play();Rr(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),ca(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);let{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:r}=i||{};e&&e.updateContent(),t&&t.updateContent(),n&&n.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){let e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){let e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Ga("beforeerror").forEach(t=>{let i=t(this,e);if(!(Nr(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){let t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ii(e),this.addClass("vjs-error"),qt.error(`(CODE:${this.error_.code} ${Ii.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Ga("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i,n=Ti(this,this.reportUserActivity),r=function(h){(h.screenX!==t||h.screenY!==i)&&(t=h.screenX,i=h.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(h){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);let l=this.getChild("controlBar");l&&!Cs&&!lr&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let u,c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);let h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){let e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");let e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(n=>{n!==t&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){let t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ca(this)&&this.trigger("languagechange"))}languages(){return hi(ei.prototype.options_.languages,this.languages_)}toJSON(){let e=hi(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let n=t[i];n=hi(n),n.player=void 0,e.tracks[i]=n}return e}createModal(e,t){t=t||{},t.content=e||"";let i=new za(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;let e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<b0.length;i++){let n=b0[i],r=this.breakpoints_[n];if(t<=r){if(e===n)return;e&&this.removeClass(bh[e]),this.addClass(bh[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){let e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},dk,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=Boolean(e);let t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return bh[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;let i=this.crossOrigin();this.reset(),this.cache_.media=hi(e);let{artist:n,artwork:r,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Nh(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||n||""}),this.ready(t)}getMedia(){if(!this.cache_.media){let e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),n={src:t,textTracks:i};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:Nh(n.poster)}]),n}return hi(this.cache_.media)}static getTagSettings(e){let t={sources:[],tracks:[]},i=Ua(e),n=i["data-setup"];if(Ic(e,"vjs-fill")&&(i.fill=!0),Ic(e,"vjs-fluid")&&(i.fluid=!0),n!==null)try{Object.assign(i,JSON.parse(n||"{}"))}catch(r){qt.error("data-setup",r)}if(Object.assign(t,i),e.hasChildNodes()){let r=e.childNodes;for(let a=0,o=r.length;a<o;a++){let l=r[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(Ua(l)):u==="track"&&t.tracks.push(Ua(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(t=>typeof t=="number")||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}};ei.prototype.videoTracks=()=>{};ei.prototype.audioTracks=()=>{};ei.prototype.textTracks=()=>{};ei.prototype.remoteTextTracks=()=>{};ei.prototype.remoteTextTrackEls=()=>{};Hs.names.forEach(function(s){let e=Hs[s];ei.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});ei.prototype.crossorigin=ei.prototype.crossOrigin;ei.players={};var xc=ge.default.navigator;ei.prototype.options_={techOrder:Ht.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:xc&&(xc.languages&&xc.languages[0]||xc.userLanguage||xc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};tx.forEach(function(s){ei.prototype[`handleTech${Oi(s)}_`]=function(){return this.trigger(s)}});Ne.registerComponent("Player",ei);var df="plugin",Xl="activePlugins_",ql={},hf=s=>ql.hasOwnProperty(s),Eh=s=>hf(s)?ql[s]:void 0,ix=(s,e)=>{s[Xl]=s[Xl]||{},s[Xl][e]=!0},ff=(s,e,t)=>{let i=(t?"before":"")+"pluginsetup";s.trigger(i,e),s.trigger(i+":"+e.name,e)},hk=function(s,e){let t=function(){ff(this,{name:s,plugin:e,instance:null},!0);let i=e.apply(this,arguments);return ix(this,s),ff(this,{name:s,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},XE=(s,e)=>(e.prototype.name=s,function(...t){ff(this,{name:s,plugin:e,instance:null},!0);let i=new e(this,...t);return this[s]=()=>i,ff(this,i.getEventHash()),i}),Is=class{constructor(e){if(this.constructor===Is)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),K0(this),delete this.trigger,qS(this,this.constructor.defaultState),ix(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return pu(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){let{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Xl][e]=!1,this.player=this.state=null,t[e]=XE(e,ql[e])}static isBasic(e){let t=typeof e=="string"?Eh(e):e;return typeof t=="function"&&!Is.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(hf(e))qt.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(ei.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return ql[e]=t,e!==df&&(Is.isBasic(t)?ei.prototype[e]=hk(e,t):ei.prototype[e]=XE(e,t)),t}static deregisterPlugin(e){if(e===df)throw new Error("Cannot de-register base plugin.");hf(e)&&(delete ql[e],delete ei.prototype[e])}static getPlugins(e=Object.keys(ql)){let t;return e.forEach(i=>{let n=Eh(i);n&&(t=t||{},t[i]=n)}),t}static getPluginVersion(e){let t=Eh(e);return t&&t.VERSION||""}};Is.getPlugin=Eh;Is.BASE_PLUGIN_NAME=df;Is.registerPlugin(df,Is);ei.prototype.usingPlugin=function(s){return!!this[Xl]&&this[Xl][s]===!0};ei.prototype.hasPlugin=function(s){return!!hf(s)};function fk(s,e){let t=!1;return function(...i){return t||qt.warn(s),t=!0,e.apply(this,i)}}function cr(s,e,t,i){return fk(`${e} is deprecated and will be removed in ${s}.0; please use ${t} instead.`,i)}var pk={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"},sx=s=>s.indexOf("#")===0?s.slice(1):s;function be(s,e,t){let i=be.getPlayer(s);if(i)return e&&qt.warn(`Player "${s}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;let n=typeof s=="string"?qa("#"+sx(s)):s;if(!fu(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");let a=("getRootNode"in n?n.getRootNode()instanceof ge.default.ShadowRoot:!1)?n.getRootNode():n.ownerDocument.body;(!n.ownerDocument.defaultView||!a.contains(n))&&qt.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),Ga("beforesetup").forEach(l=>{let u=l(n,hi(e));if(!Nr(u)||Array.isArray(u)){qt.error("please return an object in beforesetup hooks");return}e=hi(e,u)});let o=Ne.getComponent("Player");return i=new o(n,e,t),Ga("setup").forEach(l=>l(i)),i}be.hooks_=la;be.hooks=Ga;be.hook=hL;be.hookOnce=fL;be.removeHook=mS;if(ge.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&hu()){let s=qa(".vjs-styles-defaults");if(!s){s=US("vjs-styles-defaults");let e=qa("head");e&&e.insertBefore(s,e.firstChild),HS(s,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Qm(1,be);be.VERSION=Wm;be.options=ei.prototype.options_;be.getPlayers=()=>ei.players;be.getPlayer=s=>{let e=ei.players,t;if(typeof s=="string"){let i=sx(s),n=e[i];if(n)return n;t=qa("#"+i)}else t=s;if(fu(t)){let{player:i,playerId:n}=t;if(i||e[n])return i||e[n]}};be.getAllPlayers=()=>Object.keys(ei.players).map(s=>ei.players[s]).filter(Boolean);be.players=ei.players;be.getComponent=Ne.getComponent;be.registerComponent=(s,e)=>(Ht.isTech(e)&&qt.warn(`The ${s} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Ne.registerComponent.call(Ne,s,e));be.getTech=Ht.getTech;be.registerTech=Ht.registerTech;be.use=BL;Object.defineProperty(be,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(be.middleware,"TERMINATOR",{value:Mh,writeable:!1,enumerable:!0});be.browser=AS;be.obj=mL;be.mergeOptions=cr(9,"videojs.mergeOptions","videojs.obj.merge",hi);be.defineLazyProperty=cr(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Af);be.bind=cr(9,"videojs.bind","native Function.prototype.bind",Ti);be.registerPlugin=Is.registerPlugin;be.deregisterPlugin=Is.deregisterPlugin;be.plugin=(s,e)=>(qt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Is.registerPlugin(s,e));be.getPlugins=Is.getPlugins;be.getPlugin=Is.getPlugin;be.getPluginVersion=Is.getPluginVersion;be.addLanguage=function(s,e){return s=(""+s).toLowerCase(),be.options.languages=hi(be.options.languages,{[s]:e}),be.options.languages[s]};be.log=qt;be.createLogger=yS;be.time=kL;be.createTimeRange=cr(9,"videojs.createTimeRange","videojs.time.createTimeRanges",or);be.createTimeRanges=cr(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",or);be.formatTime=cr(9,"videojs.formatTime","videojs.time.formatTime",Bo);be.setFormatTime=cr(9,"videojs.setFormatTime","videojs.time.setFormatTime",KS);be.resetFormatTime=cr(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",YS);be.parseUrl=cr(9,"videojs.parseUrl","videojs.url.parseUrl",X0);be.isCrossOrigin=cr(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Ff);be.EventTarget=js;be.any=W0;be.on=wn;be.one=Mf;be.off=ws;be.trigger=pu;be.xhr=V0.default;be.TrackList=ha;be.TextTrack=Uo;be.TextTrackList=Nc;be.AudioTrack=Rh;be.AudioTrackList=Lh;be.VideoTrack=Ph;be.VideoTrackList=kh;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(s=>{be[s]=function(){return qt.warn(`videojs.${s}() is deprecated; use videojs.dom.${s}() instead`),$S[s].apply(null,arguments)}});be.computedStyle=cr(9,"videojs.computedStyle","videojs.dom.computedStyle",ru);be.dom=$S;be.fn=AL;be.num=ZL;be.str=DL;be.url=FL;be.Error=pk;var E0=class{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}},du=class extends be.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;let i=this.levels_.length;return t=new E0(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){let n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}};du.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(let s in du.prototype.allowedEvents_)du.prototype["on"+s]=null;var nx="4.1.0",gk=function(s,e){let t=s.qualityLevels,i=new du,n=function(){i.dispose(),s.qualityLevels=t,s.off("dispose",n)};return s.on("dispose",n),s.qualityLevels=()=>i,s.qualityLevels.VERSION=nx,i},rx=function(s){return gk(this,be.obj.merge({},s))};be.registerPlugin("qualityLevels",rx);rx.VERSION=nx;var cn=Il,pf=(s,e)=>e&&e.responseURL&&s!==e.responseURL?e.responseURL:s,Yn=s=>be.log.debug?be.log.debug.bind(be,"VHS:",`${s} >`):function(){};function si(...s){let e=be.obj||be;return(e.merge||e.mergeOptions).apply(e,s)}function us(...s){let e=be.time||be;return(e.createTimeRanges||e.createTimeRanges).apply(e,s)}function mk(s){if(s.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<s.length;t++){let i=s.start(t),n=s.end(t);e+=`${i} --> ${n}. Duration (${n-i})
`}return e}var Pr=1/30,Or=Pr*3,ax=function(s,e){let t=[],i;if(s&&s.length)for(i=0;i<s.length;i++)e(s.start(i),s.end(i))&&t.push([s.start(i),s.end(i)]);return us(t)},zl=function(s,e){return ax(s,function(t,i){return t-Or<=e&&i+Or>=e})},yh=function(s,e){return ax(s,function(t){return t-Pr>=e})},yk=function(s){if(s.length<2)return us();let e=[];for(let t=1;t<s.length;t++){let i=s.end(t-1),n=s.start(t);e.push([i,n])}return us(e)},vk=function(s,e){let t=null,i=null,n=0,r=[],a=[];if(!s||!s.length||!e||!e.length)return us();let o=s.length;for(;o--;)r.push({time:s.start(o),type:"start"}),r.push({time:s.end(o),type:"end"});for(o=e.length;o--;)r.push({time:e.start(o),type:"start"}),r.push({time:e.end(o),type:"end"});for(r.sort(function(l,u){return l.time-u.time}),o=0;o<r.length;o++)r[o].type==="start"?(n++,n===2&&(t=r[o].time)):r[o].type==="end"&&(n--,n===1&&(i=r[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return us(a)},ox=s=>{let e=[];if(!s||!s.length)return"";for(let t=0;t<s.length;t++)e.push(s.start(t)+" => "+s.end(t));return e.join(", ")},Tk=function(s,e,t=1){return((s.length?s.end(s.length-1):0)-e)/t},Mo=s=>{let e=[];for(let t=0;t<s.length;t++)e.push({start:s.start(t),end:s.end(t)});return e},_k=function(s,e){if(s===e)return!1;if(!s&&e||!e&&s||s.length!==e.length)return!0;for(let t=0;t<s.length;t++)if(s.start(t)!==e.start(t)||s.end(t)!==e.end(t))return!0;return!1},Vm=function(s){if(!(!s||!s.length||!s.end))return s.end(s.length-1)},Z0=function(s,e){let t=0;if(!s||!s.length)return t;for(let i=0;i<s.length;i++){let n=s.start(i),r=s.end(i);if(!(e>r)){if(e>n&&e<=r){t+=r-e;continue}t+=r-n}}return t},ey=(s,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=s.partTargetDuration)}),t},S0=s=>(s.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(n,r){e.push({duration:n.duration,segmentIndex:i,partIndex:r,part:n,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),lx=s=>{let e=s.segments&&s.segments.length&&s.segments[s.segments.length-1];return e&&e.parts||[]},ux=({preloadSegment:s})=>{if(!s)return;let{parts:e,preloadHints:t}=s,i=(t||[]).reduce((n,r)=>n+(r.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},cx=(s,e)=>{if(e.endList)return 0;if(s&&s.suggestedPresentationDelay)return s.suggestedPresentationDelay;let t=lx(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},bk=function(s,e){let t=0,i=e-s.mediaSequence,n=s.segments[i];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;i--;){if(n=s.segments[i],typeof n.end<"u")return{result:t+n.end,precise:!0};if(t+=ey(s,n),typeof n.start<"u")return{result:t+n.start,precise:!0}}return{result:t,precise:!1}},Ek=function(s,e){let t=0,i,n=e-s.mediaSequence;for(;n<s.segments.length;n++){if(i=s.segments[n],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=ey(s,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},dx=function(s,e,t){if(typeof e>"u"&&(e=s.mediaSequence+s.segments.length),e<s.mediaSequence)return 0;let i=bk(s,e);if(i.precise)return i.result;let n=Ek(s,e);return n.precise?n.result:i.result+t},hx=function(s,e,t){if(!s)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(s.totalDuration)return s.totalDuration;if(!s.endList)return ge.default.Infinity}return dx(s,e,t)},kc=function({defaultDuration:s,durationList:e,startIndex:t,endIndex:i}){let n=0;if(t>i&&([t,i]=[i,t]),t<0){for(let r=t;r<Math.min(0,i);r++)n+=s;t=0}for(let r=t;r<i;r++)n+=e[r].duration;return n},fx=function(s,e,t,i){if(!s||!s.segments)return null;if(s.endList)return hx(s);if(e===null)return null;e=e||0;let n=dx(s,s.mediaSequence+s.segments.length,e);return t&&(i=typeof i=="number"?i:cx(null,s),n-=i),Math.max(0,n)},Sk=function(s,e,t){let n=e||0,r=fx(s,e,!0,t);return r===null?us():(r<n&&(r=n),us(n,r))},xk=function({playlist:s,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:n,exactManifestTimings:r}){let a=e-n,o=S0(s),l=0;for(let u=0;u<o.length;u++){let c=o[u];if(t===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){let c=o[u];if(a+=c.duration,r){if(a<0)continue}else if(a+Pr<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n-kc({defaultDuration:s.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=s.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){let c=o[u];a-=c.duration;let h=c.duration>Pr,g=a===0,m=h&&a+Pr>=0;if(!((g||m)&&u!==o.length-1)){if(r){if(a>0)continue}else if(a-Pr>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n+kc({defaultDuration:s.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},px=function(s){return s.excludeUntil&&s.excludeUntil>Date.now()},ty=function(s){return s.excludeUntil&&s.excludeUntil===1/0},$f=function(s){let e=px(s);return!s.disabled&&!e},Ak=function(s){return s.disabled},Ck=function(s){for(let e=0;e<s.segments.length;e++)if(s.segments[e].key)return!0;return!1},gx=function(s,e){return e.attributes&&e.attributes[s]},wk=function(s,e,t,i=0){return gx("BANDWIDTH",t)?(s*t.attributes.BANDWIDTH-i*8)/e:NaN},x0=(s,e)=>{if(s.playlists.length===1)return!0;let t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return s.playlists.filter(i=>$f(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},iy=(s,e)=>!s&&!e||!s&&e||s&&!e?!1:!!(s===e||s.id&&e.id&&s.id===e.id||s.resolvedUri&&e.resolvedUri&&s.resolvedUri===e.resolvedUri||s.uri&&e.uri&&s.uri===e.uri),QE=function(s,e){let t=s&&s.mediaGroups&&s.mediaGroups.AUDIO||{},i=!1;for(let n in t){for(let r in t[n])if(i=e(t[n][r]),i)break;if(i)break}return!!i},sd=s=>{if(!s||!s.playlists||!s.playlists.length)return QE(s,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<s.playlists.length;e++){let t=s.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(r=>Qg(r))||QE(s,r=>iy(t,r))))return!1}return!0},dn={liveEdgeDelay:cx,duration:hx,seekable:Sk,getMediaInfoForTime:xk,isEnabled:$f,isDisabled:Ak,isExcluded:px,isIncompatible:ty,playlistEnd:fx,isAes:Ck,hasAttribute:gx,estimateSegmentRequestTime:wk,isLowestEnabledRendition:x0,isAudioOnly:sd,playlistMatch:iy,segmentDurationWithParts:ey},{log:mx}=be,Ql=(s,e)=>`${s}-${e}`,yx=(s,e,t)=>`placeholder-uri-${s}-${e}-${t}`,Ik=({onwarn:s,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:n=[],llhls:r})=>{let a=new Jd;s&&a.on("warn",s),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),n.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();let o=a.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),s&&s({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}let l=lx(o);if(l.length&&!o.partTargetDuration){let u=l.reduce((c,h)=>Math.max(c,h.duration),0);s&&(s({message:`manifest has no partTargetDuration defaulting to ${u}`}),mx.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},gu=(s,e)=>{!s.mediaGroups||["AUDIO","SUBTITLES"].forEach(t=>{if(!!s.mediaGroups[t])for(let i in s.mediaGroups[t])for(let n in s.mediaGroups[t][i]){let r=s.mediaGroups[t][i][n];e(r,t,i,n)}})},vx=({playlist:s,uri:e,id:t})=>{s.id=t,s.playlistErrors_=0,e&&(s.uri=e),s.attributes=s.attributes||{}},Dk=s=>{let e=s.playlists.length;for(;e--;){let t=s.playlists[e];vx({playlist:t,id:Ql(e,t.uri)}),t.resolvedUri=cn(s.uri,t.uri),s.playlists[t.id]=t,s.playlists[t.uri]=t,t.attributes.BANDWIDTH||mx.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Lk=s=>{gu(s,e=>{e.uri&&(e.resolvedUri=cn(s.uri,e.uri))})},kk=(s,e)=>{let t=Ql(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ge.default.location.href,resolvedUri:ge.default.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},Tx=(s,e,t=yx)=>{s.uri=e;for(let n=0;n<s.playlists.length;n++)if(!s.playlists[n].uri){let r=`placeholder-uri-${n}`;s.playlists[n].uri=r}let i=sd(s);gu(s,(n,r,a,o)=>{if(!n.playlists||!n.playlists.length){if(i&&r==="AUDIO"&&!n.uri)for(let l=0;l<s.playlists.length;l++){let u=s.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}n.playlists=[Ci({},n)]}n.playlists.forEach(function(l,u){let c=t(r,a,o,l),h=Ql(u,c);l.uri?l.resolvedUri=l.resolvedUri||cn(s.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},s.playlists[l.id]=l,s.playlists[l.uri]=l})}),Dk(s),Lk(s)},gf=class{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;let[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;let[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((n,r)=>(n.set(r.id,r),n),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];let e={},t=[];this.pendingDateRanges_.forEach((i,n)=>{if(!this.processedDateRanges_.has(n)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){let r=e[i.class].push(i);i.classListIndex=r-1}else e[i.class]=[i],i.classListIndex=0});for(let i of t){let n=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&n[i.classListIndex+1]?i.endTime=n[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,n)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}},_x=22,$o=({requestType:s,request:e,error:t,parseFailure:i})=>{let n=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:s},o=n&&!r||i;if(t&&r)a.error=Ci({},t),a.errorType=be.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=be.Error.NetworkRequestAborted;else if(e.timedout)a.errorType=be.Error.NetworkRequestTimeout;else if(o){let l=i?be.Error.NetworkBodyParserFailed:be.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},Rk=Yn("CodecUtils"),bx=function(s){let e=s.attributes||{};if(e.CODECS)return ar(e.CODECS)},Ex=(s,e)=>{let t=e.attributes||{};return s&&s.mediaGroups&&s.mediaGroups.AUDIO&&t.AUDIO&&s.mediaGroups.AUDIO[t.AUDIO]},Pk=(s,e)=>{if(!Ex(s,e))return!0;let t=e.attributes||{},i=s.mediaGroups.AUDIO[t.AUDIO];for(let n in i)if(!i[n].uri&&!i[n].playlists)return!0;return!1},Zc=function(s){let e={};return s.forEach(({mediaType:t,type:i,details:n})=>{e[t]=e[t]||[],e[t].push(Xg(`${i}${n}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Rk(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},JE=function(s){let e=0;return s.audio&&e++,s.video&&e++,e},Rc=function(s,e){let t=e.attributes||{},i=Zc(bx(e)||[]);if(Ex(s,e)&&!i.audio&&!Pk(s,e)){let n=Zc(G_(s,t.AUDIO)||[]);n.audio&&(i.audio=n.audio)}return i},{EventTarget:Ok}=be,Mk=(s,e)=>{if(e.endList||!e.serverControl)return s;let t={};if(e.serverControl.canBlockReload){let{preloadSegment:i}=e,n=e.mediaSequence+e.segments.length;if(i){let r=i.parts||[],a=ux(e)-1;a>-1&&a!==r.length-1&&(t._HLS_part=a),(a>-1||r.length)&&n--}t._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){let i=new ge.default.URL(s);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){!t.hasOwnProperty(n)||i.searchParams.set(n,t[n])}),s=i.toString()}return s},Nk=(s,e)=>{if(!s)return e;let t=si(s,e);if(s.preloadHints&&!e.preloadHints&&delete t.preloadHints,s.parts&&!e.parts)delete t.parts;else if(s.parts&&e.parts)for(let i=0;i<e.parts.length;i++)s.parts&&s.parts[i]&&(t.parts[i]=si(s.parts[i],e.parts[i]));return!s.skipped&&e.skipped&&(t.skipped=!1),s.preload&&!e.preload&&(t.preload=!1),t},Fk=(s,e,t)=>{let i=s.slice(),n=e.slice();t=t||0;let r=[],a;for(let o=0;o<n.length;o++){let l=i[o+t],u=n[o];l?(a=l.map||a,r.push(Nk(l,u))):(a&&!u.map&&(u.map=a),r.push(u))}return r},Sx=(s,e)=>{!s.resolvedUri&&s.uri&&(s.resolvedUri=cn(e,s.uri)),s.key&&!s.key.resolvedUri&&(s.key.resolvedUri=cn(e,s.key.uri)),s.map&&!s.map.resolvedUri&&(s.map.resolvedUri=cn(e,s.map.uri)),s.map&&s.map.key&&!s.map.key.resolvedUri&&(s.map.key.resolvedUri=cn(e,s.map.key.uri)),s.parts&&s.parts.length&&s.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=cn(e,t.uri))}),s.preloadHints&&s.preloadHints.length&&s.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=cn(e,t.uri))})},xx=function(s){let e=s.segments||[],t=s.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=s.targetDuration,t.preload=!0,e.push(t)}return e},Ax=(s,e)=>s===e||s.segments&&e.segments&&s.segments.length===e.segments.length&&s.endList===e.endList&&s.mediaSequence===e.mediaSequence&&s.preloadSegment===e.preloadSegment,A0=(s,e,t=Ax)=>{let i=si(s,{}),n=i.playlists[e.id];if(!n||t(n,e))return null;e.segments=xx(e);let r=si(n,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}r.segments=Fk(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}r.segments.forEach(a=>{Sx(a,r.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=r);return i.playlists[e.id]=r,i.playlists[e.uri]=r,gu(s,(a,o,l,u)=>{if(!!a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=r)}),i},C0=(s,e)=>{let t=s.segments||[],i=t[t.length-1],n=i&&i.parts&&i.parts[i.parts.length-1],r=n&&n.duration||i&&i.duration;return e&&r?r*1e3:(s.partTargetDuration||s.targetDuration||10)*500},ZE=(s,e,t)=>{if(!s)return;let i=[];return s.forEach(n=>{if(!n.attributes)return;let{BANDWIDTH:r,RESOLUTION:a,CODECS:o}=n.attributes;i.push({id:n.id,bandwidth:r,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:i}},ja=class extends Ok{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Yn("PlaylistLoader");let{withCredentials:n=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=n,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;let r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new gf,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){let e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);let t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;let e=this.media(),t=cn(this.main.uri,e.uri);this.llhls&&(t=Mk(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,n)=>{if(!!this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){let{uri:n,id:r}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:$o({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{let i=Ik({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!i.playlists||!i.playlists.length||this.excludeAudioOnlyVariants(i.playlists),i}catch(i){this.error=i,this.error.metadata={errorType:be.Error.StreamingHlsPlaylistParserError,error:i}}}excludeAudioOnlyVariants(e){let t=i=>{let n=i.attributes||{},{width:r,height:a}=n.RESOLUTION||{};if(r&&a)return!0;let o=bx(i)||[],l=Zc(o);return Boolean(l.video)};e.some(t)&&e.forEach(i=>{t(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";let r={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:r});let a=t||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),vx({playlist:a,uri:i,id:n});let o=A0(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(C0(this.media(),!!o)),r.parsedPlaylist=ZE(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),ge.default.clearTimeout(this.mediaUpdateTimeout),ge.default.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new gf,this.off()}stopRequest(){if(this.request){let e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(ge.default.clearTimeout(this.finalRenditionTimeout),t){let o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ge.default.setTimeout(this.media.bind(this,e,!1),o);return}let i=this.state,n=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(C0(e,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;let a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(!!this.request){if(e.lastRequest=Date.now(),e.resolvedUri=pf(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);let t=this.media();if(e){let i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ge.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=ge.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=ge.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}let e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:$o({requestType:i.requestType,request:i,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=pf(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});let n=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=ZE(n.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,Tx(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=xx(i),i.segments.forEach(n=>{Sx(n,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}let t=this.srcUri()||ge.default.location.href;this.main=kk(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){let i=this.main,n=e.ID,r=i.playlists.length;for(;r--;){let a=i.playlists[r];if(a.attributes["PATHWAY-ID"]===n){let o=a.resolvedUri,l=a.id;if(t){let u=this.createCloneURI_(a.resolvedUri,e),c=Ql(n,u),h=this.createCloneAttributes_(n,a.attributes),g=this.createClonePlaylist_(a,c,e,h);i.playlists[r]=g,i.playlists[c]=g,i.playlists[u]=g}else i.playlists.splice(r,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){let i=this.main,n=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!i.mediaGroups[r]||!i.mediaGroups[r][n])){for(let a in i.mediaGroups[r])if(a===n){for(let o in i.mediaGroups[r][a])i.mediaGroups[r][a][o].playlists.forEach((u,c)=>{let h=i.playlists[u.id],g=h.id,m=h.resolvedUri;delete i.playlists[g],delete i.playlists[m]});delete i.mediaGroups[r][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){let i=this.main,n=i.playlists.length,r=this.createCloneURI_(t.resolvedUri,e),a=Ql(e.ID,r),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);i.playlists[n]=l,i.playlists[a]=l,i.playlists[r]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){let t=e.ID,i=e["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!n.mediaGroups[r]||n.mediaGroups[r][t]))for(let a in n.mediaGroups[r]){if(a===i)n.mediaGroups[r][t]={};else continue;for(let o in n.mediaGroups[r][a]){let l=n.mediaGroups[r][a][o];n.mediaGroups[r][t][o]=Ci({},l);let u=n.mediaGroups[r][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,g)=>{let m=n.playlists[h.id],v=yx(r,t,o),b=Ql(t,v);if(m&&!n.playlists[b]){let A=this.createClonePlaylist_(m,b,e),R=A.resolvedUri;n.playlists[b]=A,n.playlists[R]=A}u.playlists[g]=this.createClonePlaylist_(h,b,e)})}}})}createClonePlaylist_(e,t,i,n){let r=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:r,uri:r,id:t};return e.segments&&(a.segments=[]),n&&(a.attributes=n),si(e,a)}createCloneURI_(e,t){let i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;let n=t["URI-REPLACEMENT"].PARAMS;for(let r of Object.keys(n))i.searchParams.set(r,n[r]);return i.href}createCloneAttributes_(e,t){let i={["PATHWAY-ID"]:e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{t[n]&&(i[n]=e)}),i}getKeyIdSet(e){let t=new Set;if(!e||!e.contentProtection)return t;for(let i in e.contentProtection)if(e.contentProtection[i]&&e.contentProtection[i].attributes&&e.contentProtection[i].attributes.keyId){let n=e.contentProtection[i].attributes.keyId;t.add(n.toLowerCase())}return t}},w0=function(s,e,t,i){let n=s.responseType==="arraybuffer"?s.response:s.responseText;!e&&n&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=n.byteLength||n.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),t.headers&&(s.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(s.timedout=!0),!e&&!s.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(s&&(n||s.responseText)))),i(e,s)},$k=(s,e)=>{if(!s||!s.size)return;let t=e;return s.forEach(i=>{t=i(t)}),t},Bk=(s,e,t,i)=>{!s||!s.size||s.forEach(n=>{n(e,t,i)})},Cx=function(){let s=function e(t,i){t=si({timeout:45e3},t);let n=e.beforeRequest||be.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||be.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||be.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(be.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(n));let o=be.Vhs.xhr.original===!0?be.xhr:be.Vhs.xhr,l=$k(r,t);r.delete(n);let u=o(l||t,function(h,g){return Bk(a,u,h,g),w0(u,h,g,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return s.original=!0,s},Uk=function(s){let e,t=s.offset;return typeof s.offset=="bigint"||typeof s.length=="bigint"?e=ge.default.BigInt(s.offset)+ge.default.BigInt(s.length)-ge.default.BigInt(1):e=s.offset+s.length-1,"bytes="+t+"-"+e},I0=function(s){let e={};return s.byterange&&(e.Range=Uk(s.byterange)),e},Hk=function(s,e){return s.start(e)+"-"+s.end(e)},Vk=function(s,e){let t=s.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},jk=function(s){return s>=32&&s<126?String.fromCharCode(s):"."},wx=function(s){let e={};return Object.keys(s).forEach(t=>{let i=s[t];tm(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},mf=function(s){let e=s.byterange||{length:1/0,offset:0};return[e.length,e.offset,s.resolvedUri].join(",")},Ix=function(s){return s.resolvedUri},Dx=s=>{let e=Array.prototype.slice.call(s),t=16,i="",n,r;for(let a=0;a<e.length/t;a++)n=e.slice(a*t,a*t+t).map(Vk).join(""),r=e.slice(a*t,a*t+t).map(jk).join(""),i+=n+" "+r+`
`;return i},Gk=({bytes:s})=>Dx(s),qk=s=>{let e="",t;for(t=0;t<s.length;t++)e+=Hk(s,t)+" ";return e},zk=Object.freeze({__proto__:null,createTransferableMessage:wx,initSegmentId:mf,segmentKeyId:Ix,hexDump:Dx,tagDump:Gk,textRanges:qk}),Lx=.25,Wk=(s,e)=>{if(!e.dateTimeObject)return null;let t=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+t,r=s-n;return new Date(e.dateTimeObject.getTime()+r*1e3)},Kk=s=>s.transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds,Yk=(s,e)=>{let t;try{t=new Date(s)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];let u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}let n=e.segments[e.segments.length-1],r=n.dateTimeObject,a=n.videoTimingInfo?Kk(n.videoTimingInfo):n.duration+n.duration*Lx,o=new Date(r.getTime()+a*1e3);return t>o?null:(t>new Date(r)&&(i=n),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:dn.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},Xk=(s,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let r=0;r<e.segments.length&&(i=e.segments[r],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(s<=t));r++);let n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<s)return null;if(s>t){if(s>t+n.duration*Lx)return null;i=n}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Qk=(s,e)=>{let t,i;try{t=new Date(s),i=new Date(e)}catch{}let n=t.getTime();return(i.getTime()-n)/1e3},Jk=s=>{if(!s.segments||s.segments.length===0)return!1;for(let e=0;e<s.segments.length;e++)if(!s.segments[e].dateTimeObject)return!1;return!0},Zk=({playlist:s,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!s||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});let i=Xk(e,s);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});let n={mediaSeconds:e},r=Wk(e,i.segment);return r&&(n.programDateTime=r.toISOString()),t(null,n)},kx=({programTime:s,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:n=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof s>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!Jk(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});let o=Yk(s,e);if(!o)return a({message:`${s} was not found in the stream`});let l=o.segment,u=Qk(l.dateTimeObject,s);if(o.type==="estimate"){if(t===0)return a({message:`${s} is not buffered yet. Try again`});i(o.estimatedStart+u),r.one("seeked",()=>{kx({programTime:s,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:n,tech:r,callback:a})});return}let c=l.start+u,h=()=>a(null,r.currentTime());r.one("seeked",h),n&&r.pause(),i(c)},jm=(s,e)=>{if(s.readyState===4)return e()},eR=(s,e,t,i)=>{let n=[],r,a=!1,o=function(h,g,m,v){return g.abort(),a=!0,t(h,g,m,v)},l=function(h,g){if(a)return;if(h)return h.metadata=$o({requestType:i,request:g,error:h}),o(h,g,"",n);let m=g.responseText.substring(n&&n.byteLength||0,g.responseText.length);if(n=K_(n,eh(m,!0)),r=r||ko(n),n.length<10||r&&n.length<r+2)return jm(g,()=>o(h,g,"",n));let v=ph(n);return v==="ts"&&n.length<188?jm(g,()=>o(h,g,"",n)):!v&&n.length<376?jm(g,()=>o(h,g,"",n)):o(null,g,v,n)},c=e({uri:s,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:g,loaded:m}){return w0(h,null,{statusCode:h.status},l)})}},function(h,g){return w0(c,h,g,l)});return c},{EventTarget:tR}=be,eS=function(s,e){if(!Ax(s,e)||s.sidx&&e.sidx&&(s.sidx.offset!==e.sidx.offset||s.sidx.length!==e.sidx.length))return!1;if(!s.sidx&&e.sidx||s.sidx&&!e.sidx||s.segments&&!e.segments||!s.segments&&e.segments)return!1;if(!s.segments&&!e.segments)return!0;for(let t=0;t<s.segments.length;t++){let i=s.segments[t],n=e.segments[t];if(i.uri!==n.uri)return!1;if(!i.byterange&&!n.byterange)continue;let r=i.byterange,a=n.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},iR=(s,e,t,i)=>{let n=i.attributes.NAME||t;return`placeholder-uri-${s}-${e}-${n}`},sR=({mainXml:s,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:n})=>{let r=nE(s,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:n});return Tx(r,e,iR),r},nR=(s,e)=>{gu(s,(t,i,n,r)=>{(!e.mediaGroups[i][n]||!(r in e.mediaGroups[i][n]))&&delete s.mediaGroups[i][n][r]})},rR=(s,e,t)=>{let i=!0,n=si(s,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){let a=e.playlists[r];if(a.sidx){let l=_c(a.sidx);t&&t[l]&&t[l].sidx&&dh(a,t[l].sidx,a.sidx.resolvedUri)}let o=A0(n,a,eS);o&&(n=o,i=!1)}return gu(e,(r,a,o,l)=>{if(r.playlists&&r.playlists.length){let u=r.playlists[0].id,c=A0(n,r.playlists[0],eS);c&&(n=c,l in n.mediaGroups[a][o]||(n.mediaGroups[a][o][l]=r),n.mediaGroups[a][o][l].playlists[0]=n.playlists[u],i=!1)}}),nR(n,e),e.minimumUpdatePeriod!==s.minimumUpdatePeriod&&(i=!1),i?null:n},aR=(s,e)=>(Boolean(!s.map&&!e.map)||Boolean(s.map&&e.map&&s.map.byterange.offset===e.map.byterange.offset&&s.map.byterange.length===e.map.byterange.length))&&s.uri===e.uri&&s.byterange.offset===e.byterange.offset&&s.byterange.length===e.byterange.length,tS=(s,e)=>{let t={};for(let i in s){let r=s[i].sidx;if(r){let a=_c(r);if(!e[a])break;let o=e[a].sidxInfo;aR(o,r)&&(t[a]=e[a])}}return t},oR=(s,e)=>{let i=tS(s.playlists,e);return gu(s,(n,r,a,o)=>{if(n.playlists&&n.playlists.length){let l=n.playlists;i=si(i,tS(l,e))}}),i},ed=class extends tR{constructor(e,t,i={},n){super(),this.isPaused_=!0,this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);let{withCredentials:r=!1}=i;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Yn("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){let n=e.sidx&&_c(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){ge.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=ge.default.setTimeout(()=>i(!1),0);return}let r=pf(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;let c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u,g;try{g=(0,gS.default)(bt(u.response).subarray(8))}catch(m){m.metadata=$o({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(m,u,t);return}return c[n]={sidxInfo:e.sidx,sidx:g},dh(e,g,e.sidx.resolvedUri),i(!0)},o="dash-sidx";this.request=eR(r,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){let v=c||"unknown";return a({status:u.status,message:`Unsupported ${v} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}let{offset:g,length:m}=e.sidx.byterange;if(h.length>=m+g)return a(l,{response:h.subarray(g,g+m),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:I0({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ge.default.clearTimeout(this.minimumUpdatePeriodTimeout_),ge.default.clearTimeout(this.mediaRequest_),ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){let e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);let t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}let i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!i||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,ge.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(ge.default.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,ge.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;let t=this.media();if(e){let i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ge.default.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){ge.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=ge.default.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){let t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,n)=>{if(i){let{requestType:a}=n;i.metadata=$o({requestType:a,request:n,error:i})}if(this.requestErrored_(i,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});let r=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=pf(this.mainPlaylistLoader_.srcUrl,n),r){this.handleMain_(),this.syncClientServerClock_(()=>e(n,r));return}return e(n,r)})}syncClientServerClock_(e){let t=rE(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:cn(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,n)=>{if(!this.request)return;if(i){let{requestType:a}=n;return this.error.metadata=$o({requestType:a,request:n,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;t.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(n.responseHeaders.date):r=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){ge.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;let e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let i;try{i=sR({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:be.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(i=rR(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;let n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){let{duration:r,endList:a}=i,o=[];i.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});let l={duration:r,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return Boolean(i)}updateMinimumUpdatePeriodTimeout_(){let e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(ge.default.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){let t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=ge.default.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{!t||(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=oR(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();let t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let n=()=>{this.media().endList||(this.mediaUpdateTimeout=ge.default.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},C0(this.media(),Boolean(i))))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){let t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){let t=new Set;for(let i in e.contentProtection){let n=e.contentProtection[i].attributes["cenc:default_KID"];n&&t.add(n.replace(/-/g,"").toLowerCase())}return t}}},ls={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},lR=s=>{let e=new Uint8Array(new ArrayBuffer(s.length));for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);return e.buffer},Rx=function(s){return s.on=s.addEventListener,s.off=s.removeEventListener,s},uR=function(s){try{return URL.createObjectURL(new Blob([s],{type:"application/javascript"}))}catch{let t=new BlobBuilder;return t.append(s),URL.createObjectURL(t.getBlob())}},Px=function(s){return function(){let e=uR(s),t=Rx(new Worker(e));t.objURL=e;let i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},Ox=function(s){return`var browserWorkerPolyFill = ${Rx.toString()};
browserWorkerPolyFill(self);
`+s},Mx=function(s){return s.toString().replace(/^function.+?{/,"").slice(0,-1)},cR=Ox(Mx(function(){var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(y,_){f[y]||(f[y]=[]),f[y]=f[y].concat(_)},this.off=function(y,_){var S;return f[y]?(S=f[y].indexOf(_),f[y]=f[y].slice(),f[y].splice(S,1),S>-1):!1},this.trigger=function(y){var _,S,L,N;if(_=f[y],!!_)if(arguments.length===2)for(L=_.length,S=0;S<L;++S)_[S].call(this,arguments[1]);else{for(N=[],S=arguments.length,S=1;S<arguments.length;++S)N.push(arguments[S]);for(L=_.length,S=0;S<L;++S)_[S].apply(this,N)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(y){f.push(y)}),this.on("done",function(y){f.flush(y)}),this.on("partialdone",function(y){f.partialFlush(y)}),this.on("endedtimeline",function(y){f.endTimeline(y)}),this.on("reset",function(y){f.reset(y)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,i=Math.pow(2,32),n=function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_;return y.getBigUint64?(_=y.getBigUint64(0),_<Number.MAX_SAFE_INTEGER?Number(_):_):y.getUint32(0)*i+y.getUint32(4)},r={getUint64:n,MAX_UINT32:i},a=r.MAX_UINT32,o,l,u,c,h,g,m,v,b,A,R,F,O,H,W,E,X,Z,re,oe,ve,Ce,we,Ge,Xe,Re,We,Qe,rt,gt,et,Ye,St,wt,xt,At;(function(){var f;if(we={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in we)we.hasOwnProperty(f)&&(we[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);Ge=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Re=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Xe=new Uint8Array([0,0,0,1]),We=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Qe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),rt={video:We,audio:Qe},Ye=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),et=new Uint8Array([0,0,0,0,0,0,0,0]),St=new Uint8Array([0,0,0,0,0,0,0,0]),wt=St,xt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),At=St,gt=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(f){var y=[],_=0,S,L,N;for(S=1;S<arguments.length;S++)y.push(arguments[S]);for(S=y.length;S--;)_+=y[S].byteLength;for(L=new Uint8Array(_+8),N=new DataView(L.buffer,L.byteOffset,L.byteLength),N.setUint32(0,L.byteLength),L.set(f,4),S=0,_=8;S<y.length;S++)L.set(y[S],_),_+=y[S].byteLength;return L},l=function(){return o(we.dinf,o(we.dref,Ye))},u=function(f){return o(we.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return o(we.ftyp,Ge,Xe,Ge,Re)},E=function(f){return o(we.hdlr,rt[f])},h=function(f){return o(we.mdat,f)},W=function(f){var y=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(y[12]=f.samplerate>>>24&255,y[13]=f.samplerate>>>16&255,y[14]=f.samplerate>>>8&255,y[15]=f.samplerate&255),o(we.mdhd,y)},H=function(f){return o(we.mdia,W(f),E(f.type),m(f))},g=function(f){return o(we.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},m=function(f){return o(we.minf,f.type==="video"?o(we.vmhd,gt):o(we.smhd,et),l(),Z(f))},v=function(f,y){for(var _=[],S=y.length;S--;)_[S]=oe(y[S]);return o.apply(null,[we.moof,g(f)].concat(_))},b=function(f){for(var y=f.length,_=[];y--;)_[y]=F(f[y]);return o.apply(null,[we.moov,R(4294967295)].concat(_).concat(A(f)))},A=function(f){for(var y=f.length,_=[];y--;)_[y]=ve(f[y]);return o.apply(null,[we.mvex].concat(_))},R=function(f){var y=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(we.mvhd,y)},X=function(f){var y=f.samples||[],_=new Uint8Array(4+y.length),S,L;for(L=0;L<y.length;L++)S=y[L].flags,_[L+4]=S.dependsOn<<4|S.isDependedOn<<2|S.hasRedundancy;return o(we.sdtp,_)},Z=function(f){return o(we.stbl,re(f),o(we.stts,At),o(we.stsc,wt),o(we.stsz,xt),o(we.stco,St))},function(){var f,y;re=function(_){return o(we.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),_.type==="video"?f(_):y(_))},f=function(_){var S=_.sps||[],L=_.pps||[],N=[],te=[],ie,ae;for(ie=0;ie<S.length;ie++)N.push((S[ie].byteLength&65280)>>>8),N.push(S[ie].byteLength&255),N=N.concat(Array.prototype.slice.call(S[ie]));for(ie=0;ie<L.length;ie++)te.push((L[ie].byteLength&65280)>>>8),te.push(L[ie].byteLength&255),te=te.concat(Array.prototype.slice.call(L[ie]));if(ae=[we.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(_.width&65280)>>8,_.width&255,(_.height&65280)>>8,_.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(we.avcC,new Uint8Array([1,_.profileIdc,_.profileCompatibility,_.levelIdc,255].concat([S.length],N,[L.length],te))),o(we.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],_.sarRatio){var ce=_.sarRatio[0],Te=_.sarRatio[1];ae.push(o(we.pasp,new Uint8Array([(ce&4278190080)>>24,(ce&16711680)>>16,(ce&65280)>>8,ce&255,(Te&4278190080)>>24,(Te&16711680)>>16,(Te&65280)>>8,Te&255])))}return o.apply(null,ae)},y=function(_){return o(we.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(_.channelcount&65280)>>8,_.channelcount&255,(_.samplesize&65280)>>8,_.samplesize&255,0,0,0,0,(_.samplerate&65280)>>8,_.samplerate&255,0,0]),u(_))}}(),O=function(f){var y=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return o(we.tkhd,y)},oe=function(f){var y,_,S,L,N,te,ie;return y=o(we.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),te=Math.floor(f.baseMediaDecodeTime/a),ie=Math.floor(f.baseMediaDecodeTime%a),_=o(we.tfdt,new Uint8Array([1,0,0,0,te>>>24&255,te>>>16&255,te>>>8&255,te&255,ie>>>24&255,ie>>>16&255,ie>>>8&255,ie&255])),N=32+20+8+16+8+8,f.type==="audio"?(S=Ce(f,N),o(we.traf,y,_,S)):(L=X(f),S=Ce(f,L.length+N),o(we.traf,y,_,S,L))},F=function(f){return f.duration=f.duration||4294967295,o(we.trak,O(f),H(f))},ve=function(f){var y=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(y[y.length-1]=0),o(we.trex,y)},function(){var f,y,_;_=function(S,L){var N=0,te=0,ie=0,ae=0;return S.length&&(S[0].duration!==void 0&&(N=1),S[0].size!==void 0&&(te=2),S[0].flags!==void 0&&(ie=4),S[0].compositionTimeOffset!==void 0&&(ae=8)),[0,0,N|te|ie|ae,1,(S.length&4278190080)>>>24,(S.length&16711680)>>>16,(S.length&65280)>>>8,S.length&255,(L&4278190080)>>>24,(L&16711680)>>>16,(L&65280)>>>8,L&255]},y=function(S,L){var N,te,ie,ae,ce,Te;for(ae=S.samples||[],L+=8+12+16*ae.length,ie=_(ae,L),te=new Uint8Array(ie.length+ae.length*16),te.set(ie),N=ie.length,Te=0;Te<ae.length;Te++)ce=ae[Te],te[N++]=(ce.duration&4278190080)>>>24,te[N++]=(ce.duration&16711680)>>>16,te[N++]=(ce.duration&65280)>>>8,te[N++]=ce.duration&255,te[N++]=(ce.size&4278190080)>>>24,te[N++]=(ce.size&16711680)>>>16,te[N++]=(ce.size&65280)>>>8,te[N++]=ce.size&255,te[N++]=ce.flags.isLeading<<2|ce.flags.dependsOn,te[N++]=ce.flags.isDependedOn<<6|ce.flags.hasRedundancy<<4|ce.flags.paddingValue<<1|ce.flags.isNonSyncSample,te[N++]=ce.flags.degradationPriority&240<<8,te[N++]=ce.flags.degradationPriority&15,te[N++]=(ce.compositionTimeOffset&4278190080)>>>24,te[N++]=(ce.compositionTimeOffset&16711680)>>>16,te[N++]=(ce.compositionTimeOffset&65280)>>>8,te[N++]=ce.compositionTimeOffset&255;return o(we.trun,te)},f=function(S,L){var N,te,ie,ae,ce,Te;for(ae=S.samples||[],L+=8+12+8*ae.length,ie=_(ae,L),N=new Uint8Array(ie.length+ae.length*8),N.set(ie),te=ie.length,Te=0;Te<ae.length;Te++)ce=ae[Te],N[te++]=(ce.duration&4278190080)>>>24,N[te++]=(ce.duration&16711680)>>>16,N[te++]=(ce.duration&65280)>>>8,N[te++]=ce.duration&255,N[te++]=(ce.size&4278190080)>>>24,N[te++]=(ce.size&16711680)>>>16,N[te++]=(ce.size&65280)>>>8,N[te++]=ce.size&255;return o(we.trun,N)},Ce=function(S,L){return S.type==="audio"?f(S,L):y(S,L)}}();var ni={ftyp:c,mdat:h,moof:v,moov:b,initSegment:function(f){var y=c(),_=b(f),S;return S=new Uint8Array(y.byteLength+_.byteLength),S.set(y),S.set(_,y.byteLength),S}},Xt=function(f){var y,_,S=[],L=[];for(L.byteLength=0,L.nalCount=0,L.duration=0,S.byteLength=0,y=0;y<f.length;y++)_=f[y],_.nalUnitType==="access_unit_delimiter_rbsp"?(S.length&&(S.duration=_.dts-S.dts,L.byteLength+=S.byteLength,L.nalCount+=S.length,L.duration+=S.duration,L.push(S)),S=[_],S.byteLength=_.data.byteLength,S.pts=_.pts,S.dts=_.dts):(_.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(S.keyFrame=!0),S.duration=_.dts-S.dts,S.byteLength+=_.data.byteLength,S.push(_));return L.length&&(!S.duration||S.duration<=0)&&(S.duration=L[L.length-1].duration),L.byteLength+=S.byteLength,L.nalCount+=S.length,L.duration+=S.duration,L.push(S),L},Fe=function(f){var y,_,S=[],L=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=f[0].pts,S.dts=f[0].dts,L.byteLength=0,L.nalCount=0,L.duration=0,L.pts=f[0].pts,L.dts=f[0].dts,y=0;y<f.length;y++)_=f[y],_.keyFrame?(S.length&&(L.push(S),L.byteLength+=S.byteLength,L.nalCount+=S.nalCount,L.duration+=S.duration),S=[_],S.nalCount=_.length,S.byteLength=_.byteLength,S.pts=_.pts,S.dts=_.dts,S.duration=_.duration):(S.duration+=_.duration,S.nalCount+=_.length,S.byteLength+=_.byteLength,S.push(_));return L.length&&S.duration<=0&&(S.duration=L[L.length-1].duration),L.byteLength+=S.byteLength,L.nalCount+=S.nalCount,L.duration+=S.duration,L.push(S),L},ki=function(f){var y;return!f[0][0].keyFrame&&f.length>1&&(y=f.shift(),f.byteLength-=y.byteLength,f.nalCount-=y.nalCount,f[0][0].dts=y.dts,f[0][0].pts=y.pts,f[0][0].duration+=y.duration),f},_i=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ri=function(f,y){var _=_i();return _.dataOffset=y,_.compositionTimeOffset=f.pts-f.dts,_.duration=f.duration,_.size=4*f.length,_.size+=f.byteLength,f.keyFrame&&(_.flags.dependsOn=2,_.flags.isNonSyncSample=0),_},pi=function(f,y){var _,S,L,N,te,ie=y||0,ae=[];for(_=0;_<f.length;_++)for(N=f[_],S=0;S<N.length;S++)te=N[S],L=Ri(te,ie),ie+=L.size,ae.push(L);return ae},Ui=function(f){var y,_,S,L,N,te,ie=0,ae=f.byteLength,ce=f.nalCount,Te=ae+4*ce,Oe=new Uint8Array(Te),ut=new DataView(Oe.buffer);for(y=0;y<f.length;y++)for(L=f[y],_=0;_<L.length;_++)for(N=L[_],S=0;S<N.length;S++)te=N[S],ut.setUint32(ie,te.data.byteLength),ie+=4,Oe.set(te.data,ie),ie+=te.data.byteLength;return Oe},fs=function(f,y){var _,S=y||0,L=[];return _=Ri(f,S),L.push(_),L},Lt=function(f){var y,_,S=0,L=f.byteLength,N=f.length,te=L+4*N,ie=new Uint8Array(te),ae=new DataView(ie.buffer);for(y=0;y<f.length;y++)_=f[y],ae.setUint32(S,_.data.byteLength),S+=4,ie.set(_.data,S),S+=_.data.byteLength;return ie},d={groupNalsIntoFrames:Xt,groupFramesIntoGops:Fe,extendFirstKeyFrame:ki,generateSampleTable:pi,concatenateNalData:Ui,generateSampleTableForFrame:fs,concatenateNalDataForFrame:Lt},x=[33,16,5,32,164,27],C=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],I=function(f){for(var y=[];f--;)y.push(0);return y},M=function(f){return Object.keys(f).reduce(function(y,_){return y[_]=new Uint8Array(f[_].reduce(function(S,L){return S.concat(L)},[])),y},{})},P,Y=function(){if(!P){var f={96e3:[x,[227,64],I(154),[56]],88200:[x,[231],I(170),[56]],64e3:[x,[248,192],I(240),[56]],48e3:[x,[255,192],I(268),[55,148,128],I(54),[112]],44100:[x,[255,192],I(268),[55,163,128],I(84),[112]],32e3:[x,[255,192],I(268),[55,234],I(226),[112]],24e3:[x,[255,192],I(268),[55,255,128],I(268),[111,112],I(126),[224]],16e3:[x,[255,192],I(268),[55,255,128],I(268),[111,255],I(269),[223,108],I(195),[1,192]],12e3:[C,I(268),[3,127,248],I(268),[6,255,240],I(268),[13,255,224],I(268),[27,253,128],I(259),[56]],11025:[C,I(268),[3,127,248],I(268),[6,255,240],I(268),[13,255,224],I(268),[27,255,192],I(268),[55,175,128],I(108),[112]],8e3:[C,I(268),[3,121,16],I(47),[7]]};P=M(f)}return P},j=9e4,G,J,q,z,ee,se,le;G=function(f){return f*j},J=function(f,y){return f*y},q=function(f){return f/j},z=function(f,y){return f/y},ee=function(f,y){return G(z(f,y))},se=function(f,y){return J(q(f),y)},le=function(f,y,_){return q(_?f:f-y)};var de={ONE_SECOND_IN_TS:j,secondsToVideoTs:G,secondsToAudioTs:J,videoTsToSeconds:q,audioTsToSeconds:z,audioTsToVideoTs:ee,videoTsToAudioTs:se,metadataTsToSeconds:le},ke=Y,me=de,De=function(f){var y,_,S=0;for(y=0;y<f.length;y++)_=f[y],S+=_.data.byteLength;return S},Se=function(f,y,_,S){var L,N=0,te=0,ie=0,ae=0,ce,Te,Oe;if(!!y.length&&(L=me.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),N=Math.ceil(me.ONE_SECOND_IN_TS/(f.samplerate/1024)),_&&S&&(te=L-Math.max(_,S),ie=Math.floor(te/N),ae=ie*N),!(ie<1||ae>me.ONE_SECOND_IN_TS/2))){for(ce=ke()[f.samplerate],ce||(ce=y[0].data),Te=0;Te<ie;Te++)Oe=y[0],y.splice(0,0,{data:ce,dts:Oe.dts-N,pts:Oe.pts-N});return f.baseMediaDecodeTime-=Math.floor(me.videoTsToAudioTs(ae,f.samplerate)),ae}},Ke=function(f,y,_){return y.minSegmentDts>=_?f:(y.minSegmentDts=1/0,f.filter(function(S){return S.dts>=_?(y.minSegmentDts=Math.min(y.minSegmentDts,S.dts),y.minSegmentPts=y.minSegmentDts,!0):!1}))},nt=function(f){var y,_,S=[];for(y=0;y<f.length;y++)_=f[y],S.push({size:_.data.byteLength,duration:1024});return S},qe=function(f){var y,_,S=0,L=new Uint8Array(De(f));for(y=0;y<f.length;y++)_=f[y],L.set(_.data,S),S+=_.data.byteLength;return L},Je={prefixWithSilence:Se,trimAdtsFramesByEarliestDts:Ke,generateSampleTable:nt,concatenateFrameData:qe},it=de.ONE_SECOND_IN_TS,ze=function(f,y){typeof y.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=y.pts),f.minSegmentPts===void 0?f.minSegmentPts=y.pts:f.minSegmentPts=Math.min(f.minSegmentPts,y.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=y.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,y.pts)),typeof y.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=y.dts),f.minSegmentDts===void 0?f.minSegmentDts=y.dts:f.minSegmentDts=Math.min(f.minSegmentDts,y.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=y.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,y.dts))},$e=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Pe=function(f,y){var _,S,L=f.minSegmentDts;return y||(L-=f.timelineStartInfo.dts),_=f.timelineStartInfo.baseMediaDecodeTime,_+=L,_=Math.max(0,_),f.type==="audio"&&(S=f.samplerate/it,_*=S,_=Math.floor(_)),_},tt={clearDtsInfo:$e,calculateTrackBaseMediaDecodeTime:Pe,collectDtsInfo:ze},_t=4,at=128,Ct=function(f){for(var y=0,_={payloadType:-1,payloadSize:0},S=0,L=0;y<f.byteLength&&f[y]!==at;){for(;f[y]===255;)S+=255,y++;for(S+=f[y++];f[y]===255;)L+=255,y++;if(L+=f[y++],!_.payload&&S===_t){var N=String.fromCharCode(f[y+3],f[y+4],f[y+5],f[y+6]);if(N==="GA94"){_.payloadType=S,_.payloadSize=L,_.payload=f.subarray(y,y+L);break}else _.payload=void 0}y+=L,S=0,L=0}return _},Tt=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},Bt=function(f,y){var _=[],S,L,N,te;if(!(y[0]&64))return _;for(L=y[0]&31,S=0;S<L;S++)N=S*3,te={type:y[N+2]&3,pts:f},y[N+2]&4&&(te.ccData=y[N+3]<<8|y[N+4],_.push(te));return _},Wt=function(f){for(var y=f.byteLength,_=[],S=1,L,N;S<y-2;)f[S]===0&&f[S+1]===0&&f[S+2]===3?(_.push(S+2),S+=2):S++;if(_.length===0)return f;L=y-_.length,N=new Uint8Array(L);var te=0;for(S=0;S<L;te++,S++)te===_[0]&&(te++,_.shift()),N[S]=f[te];return N},Ai={parseSei:Ct,parseUserData:Tt,parseCaptionPackets:Bt,discardEmulationPreventionBytes:Wt,USER_DATA_REGISTERED_ITU_T_T35:_t},Hi=t,Ds=Ai,vi=function(f){f=f||{},vi.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Jt(0,0),new Jt(0,1),new Jt(1,0),new Jt(1,1)],this.parse708captions_&&(this.cc708Stream_=new Qt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(y){y.on("data",this.trigger.bind(this,"data")),y.on("partialdone",this.trigger.bind(this,"partialdone")),y.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};vi.prototype=new Hi,vi.prototype.push=function(f){var y,_,S;if(f.nalUnitType==="sei_rbsp"&&(y=Ds.parseSei(f.escapedRBSP),!!y.payload&&y.payloadType===Ds.USER_DATA_REGISTERED_ITU_T_T35&&(_=Ds.parseUserData(y),!!_))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}S=Ds.parseCaptionPackets(f.pts,_),this.captionPackets_=this.captionPackets_.concat(S),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},vi.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(y){return f==="flush"?y.flush():y.partialFlush()},this)},vi.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(y,_){y.presortIndex=_}),this.captionPackets_.sort(function(y,_){return y.pts===_.pts?y.presortIndex-_.presortIndex:y.pts-_.pts}),this.captionPackets_.forEach(function(y){y.type<2?this.dispatchCea608Packet(y):this.dispatchCea708Packet(y)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},vi.prototype.flush=function(){return this.flushStream("flush")},vi.prototype.partialFlush=function(){return this.flushStream("partialFlush")},vi.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},vi.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},vi.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},vi.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},vi.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},vi.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var Ls={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Vi=function(f){var y=Ls[f]||f;return f&4096&&f===y?"":String.fromCharCode(y)},es=function(f){return 32<=f&&f<=127||160<=f&&f<=255},Ni=function(f){this.windowNum=f,this.reset()};Ni.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ni.prototype.getText=function(){return this.rows.join(`
`)},Ni.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ni.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ni.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ni.prototype.addText=function(f){this.rows[this.rowIdx]+=f},Ni.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var ks=function(f,y,_){this.serviceNum=f,this.text="",this.currentWindow=new Ni(-1),this.windows=[],this.stream=_,typeof y=="string"&&this.createTextDecoder(y)};ks.prototype.init=function(f,y){this.startPts=f;for(var _=0;_<8;_++)this.windows[_]=new Ni(_),typeof y=="function"&&(this.windows[_].beforeRowOverflow=y)},ks.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},ks.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(y){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+y})}};var Qt=function(f){f=f||{},Qt.prototype.init.call(this);var y=this,_=f.captionServices||{},S={},L;Object.keys(_).forEach(N=>{L=_[N],/^SERVICE/.test(N)&&(S[N]=L.encoding)}),this.serviceEncodings=S,this.current708Packet=null,this.services={},this.push=function(N){N.type===3?(y.new708Packet(),y.add708Bytes(N)):(y.current708Packet===null&&y.new708Packet(),y.add708Bytes(N))}};Qt.prototype=new Hi,Qt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Qt.prototype.add708Bytes=function(f){var y=f.ccData,_=y>>>8,S=y&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(S)},Qt.prototype.push708Packet=function(){var f=this.current708Packet,y=f.data,_=null,S=null,L=0,N=y[L++];for(f.seq=N>>6,f.sizeCode=N&63;L<y.length;L++)N=y[L++],_=N>>5,S=N&31,_===7&&S>0&&(N=y[L++],_=N),this.pushServiceBlock(_,L,S),S>0&&(L+=S-1)},Qt.prototype.pushServiceBlock=function(f,y,_){var S,L=y,N=this.current708Packet.data,te=this.services[f];for(te||(te=this.initService(f,L));L<y+_&&L<N.length;L++)S=N[L],es(S)?L=this.handleText(L,te):S===24?L=this.multiByteCharacter(L,te):S===16?L=this.extendedCommands(L,te):128<=S&&S<=135?L=this.setCurrentWindow(L,te):152<=S&&S<=159?L=this.defineWindow(L,te):S===136?L=this.clearWindows(L,te):S===140?L=this.deleteWindows(L,te):S===137?L=this.displayWindows(L,te):S===138?L=this.hideWindows(L,te):S===139?L=this.toggleWindows(L,te):S===151?L=this.setWindowAttributes(L,te):S===144?L=this.setPenAttributes(L,te):S===145?L=this.setPenColor(L,te):S===146?L=this.setPenLocation(L,te):S===143?te=this.reset(L,te):S===8?te.currentWindow.backspace():S===12?te.currentWindow.clearText():S===13?te.currentWindow.pendingNewLine=!0:S===14?te.currentWindow.clearText():S===141&&L++},Qt.prototype.extendedCommands=function(f,y){var _=this.current708Packet.data,S=_[++f];return es(S)&&(f=this.handleText(f,y,{isExtended:!0})),f},Qt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},Qt.prototype.initService=function(f,y){var S="SERVICE"+f,_=this,S,L;return S in this.serviceEncodings&&(L=this.serviceEncodings[S]),this.services[f]=new ks(f,L,_),this.services[f].init(this.getPts(y),function(N){_.flushDisplayed(N,_.services[f])}),this.services[f]},Qt.prototype.handleText=function(f,y,_){var S=_&&_.isExtended,L=_&&_.isMultiByte,N=this.current708Packet.data,te=S?4096:0,ie=N[f],ae=N[f+1],ce=y.currentWindow,Te,Oe;function ut(He){return He.map(Dt=>("0"+(Dt&255).toString(16)).slice(-2)).join("")}if(L?(Oe=[ie,ae],f++):Oe=[ie],y.textDecoder_&&!S)Te=y.textDecoder_.decode(new Uint8Array(Oe));else if(L){let He=ut(Oe);Te=String.fromCharCode(parseInt(He,16))}else Te=Vi(te|ie);return ce.pendingNewLine&&!ce.isEmpty()&&ce.newLine(this.getPts(f)),ce.pendingNewLine=!1,ce.addText(Te),f},Qt.prototype.multiByteCharacter=function(f,y){var _=this.current708Packet.data,S=_[f+1],L=_[f+2];return es(S)&&es(L)&&(f=this.handleText(++f,y,{isMultiByte:!0})),f},Qt.prototype.setCurrentWindow=function(f,y){var _=this.current708Packet.data,S=_[f],L=S&7;return y.setCurrentWindow(L),f},Qt.prototype.defineWindow=function(f,y){var _=this.current708Packet.data,S=_[f],L=S&7;y.setCurrentWindow(L);var N=y.currentWindow;return S=_[++f],N.visible=(S&32)>>5,N.rowLock=(S&16)>>4,N.columnLock=(S&8)>>3,N.priority=S&7,S=_[++f],N.relativePositioning=(S&128)>>7,N.anchorVertical=S&127,S=_[++f],N.anchorHorizontal=S,S=_[++f],N.anchorPoint=(S&240)>>4,N.rowCount=S&15,S=_[++f],N.columnCount=S&63,S=_[++f],N.windowStyle=(S&56)>>3,N.penStyle=S&7,N.virtualRowCount=N.rowCount+1,f},Qt.prototype.setWindowAttributes=function(f,y){var _=this.current708Packet.data,S=_[f],L=y.currentWindow.winAttr;return S=_[++f],L.fillOpacity=(S&192)>>6,L.fillRed=(S&48)>>4,L.fillGreen=(S&12)>>2,L.fillBlue=S&3,S=_[++f],L.borderType=(S&192)>>6,L.borderRed=(S&48)>>4,L.borderGreen=(S&12)>>2,L.borderBlue=S&3,S=_[++f],L.borderType+=(S&128)>>5,L.wordWrap=(S&64)>>6,L.printDirection=(S&48)>>4,L.scrollDirection=(S&12)>>2,L.justify=S&3,S=_[++f],L.effectSpeed=(S&240)>>4,L.effectDirection=(S&12)>>2,L.displayEffect=S&3,f},Qt.prototype.flushDisplayed=function(f,y){for(var _=[],S=0;S<8;S++)y.windows[S].visible&&!y.windows[S].isEmpty()&&_.push(y.windows[S].getText());y.endPts=f,y.text=_.join(`

`),this.pushCaption(y),y.startPts=f},Qt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},Qt.prototype.displayWindows=function(f,y){var _=this.current708Packet.data,S=_[++f],L=this.getPts(f);this.flushDisplayed(L,y);for(var N=0;N<8;N++)S&1<<N&&(y.windows[N].visible=1);return f},Qt.prototype.hideWindows=function(f,y){var _=this.current708Packet.data,S=_[++f],L=this.getPts(f);this.flushDisplayed(L,y);for(var N=0;N<8;N++)S&1<<N&&(y.windows[N].visible=0);return f},Qt.prototype.toggleWindows=function(f,y){var _=this.current708Packet.data,S=_[++f],L=this.getPts(f);this.flushDisplayed(L,y);for(var N=0;N<8;N++)S&1<<N&&(y.windows[N].visible^=1);return f},Qt.prototype.clearWindows=function(f,y){var _=this.current708Packet.data,S=_[++f],L=this.getPts(f);this.flushDisplayed(L,y);for(var N=0;N<8;N++)S&1<<N&&y.windows[N].clearText();return f},Qt.prototype.deleteWindows=function(f,y){var _=this.current708Packet.data,S=_[++f],L=this.getPts(f);this.flushDisplayed(L,y);for(var N=0;N<8;N++)S&1<<N&&y.windows[N].reset();return f},Qt.prototype.setPenAttributes=function(f,y){var _=this.current708Packet.data,S=_[f],L=y.currentWindow.penAttr;return S=_[++f],L.textTag=(S&240)>>4,L.offset=(S&12)>>2,L.penSize=S&3,S=_[++f],L.italics=(S&128)>>7,L.underline=(S&64)>>6,L.edgeType=(S&56)>>3,L.fontStyle=S&7,f},Qt.prototype.setPenColor=function(f,y){var _=this.current708Packet.data,S=_[f],L=y.currentWindow.penColor;return S=_[++f],L.fgOpacity=(S&192)>>6,L.fgRed=(S&48)>>4,L.fgGreen=(S&12)>>2,L.fgBlue=S&3,S=_[++f],L.bgOpacity=(S&192)>>6,L.bgRed=(S&48)>>4,L.bgGreen=(S&12)>>2,L.bgBlue=S&3,S=_[++f],L.edgeRed=(S&48)>>4,L.edgeGreen=(S&12)>>2,L.edgeBlue=S&3,f},Qt.prototype.setPenLocation=function(f,y){var _=this.current708Packet.data,S=_[f],L=y.currentWindow.penLoc;return y.currentWindow.pendingNewLine=!0,S=_[++f],L.row=S&15,S=_[++f],L.column=S&63,f},Qt.prototype.reset=function(f,y){var _=this.getPts(f);return this.flushDisplayed(_,y),this.initService(y.serviceNum,f)};var ps={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ks=function(f){return f===null?"":(f=ps[f]||f,String.fromCharCode(f))},Ys=14,Zn=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ts=function(){for(var f=[],y=Ys+1;y--;)f.push({text:"",indent:0,offset:0});return f},Jt=function(f,y){Jt.prototype.init.call(this),this.field_=f||0,this.dataChannel_=y||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(_){var S,L,N,te,ie;if(S=_.ccData&32639,S===this.lastControlCode_){this.lastControlCode_=null;return}if((S&61440)===4096?this.lastControlCode_=S:S!==this.PADDING_&&(this.lastControlCode_=null),N=S>>>8,te=S&255,S!==this.PADDING_)if(S===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(S===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(_.pts),this.flushDisplayed(_.pts),L=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=L,this.startPts_=_.pts;else if(S===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(_.pts);else if(S===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(_.pts);else if(S===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(_.pts);else if(S===this.CARRIAGE_RETURN_)this.clearFormatting(_.pts),this.flushDisplayed(_.pts),this.shiftRowsUp_(),this.startPts_=_.pts;else if(S===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(S===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(_.pts),this.displayed_=ts();else if(S===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ts();else if(S===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(_.pts),this.displayed_=ts()),this.mode_="paintOn",this.startPts_=_.pts;else if(this.isSpecialCharacter(N,te))N=(N&3)<<8,ie=Ks(N|te),this[this.mode_](_.pts,ie),this.column_++;else if(this.isExtCharacter(N,te))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),N=(N&3)<<8,ie=Ks(N|te),this[this.mode_](_.pts,ie),this.column_++;else if(this.isMidRowCode(N,te))this.clearFormatting(_.pts),this[this.mode_](_.pts," "),this.column_++,(te&14)===14&&this.addFormatting(_.pts,["i"]),(te&1)===1&&this.addFormatting(_.pts,["u"]);else if(this.isOffsetControlCode(N,te)){let ce=te&3;this.nonDisplayed_[this.row_].offset=ce,this.column_+=ce}else if(this.isPAC(N,te)){var ae=Zn.indexOf(S&7968);if(this.mode_==="rollUp"&&(ae-this.rollUpRows_+1<0&&(ae=this.rollUpRows_-1),this.setRollUp(_.pts,ae)),ae!==this.row_&&ae>=0&&ae<=14&&(this.clearFormatting(_.pts),this.row_=ae),te&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(_.pts,["u"]),(S&16)===16){let ce=(S&14)>>1;this.column_=ce*4,this.nonDisplayed_[this.row_].indent+=ce}this.isColorPAC(te)&&(te&14)===14&&this.addFormatting(_.pts,["i"])}else this.isNormalChar(N)&&(te===0&&(te=null),ie=Ks(N),ie+=Ks(te),this[this.mode_](_.pts,ie),this.column_+=ie.length)}};Jt.prototype=new Hi,Jt.prototype.flushDisplayed=function(f){let y=S=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+S+"."})},_=[];this.displayed_.forEach((S,L)=>{if(S&&S.text&&S.text.length){try{S.text=S.text.trim()}catch{y(L)}S.text.length&&_.push({text:S.text,line:L+1,position:10+Math.min(70,S.indent*10)+S.offset*2.5})}else S==null&&y(L)}),_.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:_,stream:this.name_})},Jt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ts(),this.nonDisplayed_=ts(),this.lastControlCode_=null,this.column_=0,this.row_=Ys,this.rollUpRows_=2,this.formatting_=[]},Jt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Jt.prototype.isSpecialCharacter=function(f,y){return f===this.EXT_&&y>=48&&y<=63},Jt.prototype.isExtCharacter=function(f,y){return(f===this.EXT_+1||f===this.EXT_+2)&&y>=32&&y<=63},Jt.prototype.isMidRowCode=function(f,y){return f===this.EXT_&&y>=32&&y<=47},Jt.prototype.isOffsetControlCode=function(f,y){return f===this.OFFSET_&&y>=33&&y<=35},Jt.prototype.isPAC=function(f,y){return f>=this.BASE_&&f<this.BASE_+8&&y>=64&&y<=127},Jt.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},Jt.prototype.isNormalChar=function(f){return f>=32&&f<=127},Jt.prototype.setRollUp=function(f,y){if(this.mode_!=="rollUp"&&(this.row_=Ys,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=ts(),this.displayed_=ts()),y!==void 0&&y!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[y-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]={text:"",indent:0,offset:0};y===void 0&&(y=this.row_),this.topRow_=y-this.rollUpRows_+1},Jt.prototype.addFormatting=function(f,y){this.formatting_=this.formatting_.concat(y);var _=y.reduce(function(S,L){return S+"<"+L+">"},"");this[this.mode_](f,_)},Jt.prototype.clearFormatting=function(f){if(!!this.formatting_.length){var y=this.formatting_.reverse().reduce(function(_,S){return _+"</"+S+">"},"");this.formatting_=[],this[this.mode_](f,y)}},Jt.prototype.popOn=function(f,y){var _=this.nonDisplayed_[this.row_].text;_+=y,this.nonDisplayed_[this.row_].text=_},Jt.prototype.rollUp=function(f,y){var _=this.displayed_[this.row_].text;_+=y,this.displayed_[this.row_].text=_},Jt.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<Ys+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Jt.prototype.paintOn=function(f,y){var _=this.displayed_[this.row_].text;_+=y,this.displayed_[this.row_].text=_};var Xo={CaptionStream:vi,Cea608Stream:Jt,Cea708Stream:Qt},gn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},zr=t,Qo=8589934592,Jo=4294967296,so="shared",no=function(f,y){var _=1;for(f>y&&(_=-1);Math.abs(y-f)>Jo;)f+=_*Qo;return f},Wr=function(f){var y,_;Wr.prototype.init.call(this),this.type_=f||so,this.push=function(S){if(S.type==="metadata"){this.trigger("data",S);return}this.type_!==so&&S.type!==this.type_||(_===void 0&&(_=S.dts),S.dts=no(S.dts,_),S.pts=no(S.pts,_),y=S.dts,this.trigger("data",S))},this.flush=function(){_=y,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,y=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Wr.prototype=new zr;var ro={TimestampRolloverStream:Wr,handleRollover:no},Zo=(f,y,_)=>{if(!f)return-1;for(var S=_;S<f.length;S++)if(f[S]===y)return S;return-1},el={typedArrayIndexOf:Zo},Kr=el.typedArrayIndexOf,gr={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},ao=function(f,y,_){var S,L="";for(S=y;S<_;S++)L+="%"+("00"+f[S].toString(16)).slice(-2);return L},Pi=function(f,y,_){return decodeURIComponent(ao(f,y,_))},Xs=function(f,y,_){return unescape(ao(f,y,_))},Rn=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Yr={APIC:function(f){var y=1,_,S,L="-->";f.data[0]===gr.Utf8&&(_=Kr(f.data,0,y),!(_<0)&&(f.mimeType=Xs(f.data,y,_),y=_+1,f.pictureType=f.data[y],y++,S=Kr(f.data,0,y),!(S<0)&&(f.description=Pi(f.data,y,S),y=S+1,f.mimeType===L?f.url=Xs(f.data,y,f.data.length):f.pictureData=f.data.subarray(y,f.data.length))))},"T*":function(f){f.data[0]===gr.Utf8&&(f.value=Pi(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var y;f.data[0]===gr.Utf8&&(y=Kr(f.data,0,1),y!==-1&&(f.description=Pi(f.data,1,y),f.value=Pi(f.data,y+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=Xs(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var y;f.data[0]===gr.Utf8&&(y=Kr(f.data,0,1),y!==-1&&(f.description=Pi(f.data,1,y),f.url=Xs(f.data,y+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var y;for(y=0;y<f.data.length;y++)if(f.data[y]===0){f.owner=Xs(f.data,0,y);break}f.privateData=f.data.subarray(y+1),f.data=f.privateData}},mr=function(f){var y,_,S=10,L=0,N=[];if(!(f.length<10||f[0]!=="I".charCodeAt(0)||f[1]!=="D".charCodeAt(0)||f[2]!=="3".charCodeAt(0))){L=Rn(f.subarray(6,10)),L+=10;var te=f[5]&64;te&&(S+=4,S+=Rn(f.subarray(10,14)),L-=Rn(f.subarray(16,20)));do{if(y=Rn(f.subarray(S+4,S+8)),y<1)break;_=String.fromCharCode(f[S],f[S+1],f[S+2],f[S+3]);var ie={id:_,data:f.subarray(S+10,S+y+10)};ie.key=ie.id,Yr[ie.id]?Yr[ie.id](ie):ie.id[0]==="T"?Yr["T*"](ie):ie.id[0]==="W"&&Yr["W*"](ie),N.push(ie),S+=10,S+=y}while(S<L);return N}},ya={parseId3Frames:mr,parseSyncSafeInteger:Rn,frameParsers:Yr},Du=t,Pn=gn,mn=ya,va;va=function(f){var y={descriptor:f&&f.descriptor},_=0,S=[],L=0,N;if(va.prototype.init.call(this),this.dispatchType=Pn.METADATA_STREAM_TYPE.toString(16),y.descriptor)for(N=0;N<y.descriptor.length;N++)this.dispatchType+=("00"+y.descriptor[N].toString(16)).slice(-2);this.push=function(te){var ie,ae,ce,Te,Oe,ut;if(te.type==="timed-metadata"){if(te.dataAlignmentIndicator&&(L=0,S.length=0),S.length===0&&(te.data.length<10||te.data[0]!=="I".charCodeAt(0)||te.data[1]!=="D".charCodeAt(0)||te.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(S.push(te),L+=te.data.byteLength,S.length===1&&(_=mn.parseSyncSafeInteger(te.data.subarray(6,10)),_+=10),!(L<_)){for(ie={data:new Uint8Array(_),frames:[],pts:S[0].pts,dts:S[0].dts},Oe=0;Oe<_;)ie.data.set(S[0].data.subarray(0,_-Oe),Oe),Oe+=S[0].data.byteLength,L-=S[0].data.byteLength,S.shift();ae=10,ie.data[5]&64&&(ae+=4,ae+=mn.parseSyncSafeInteger(ie.data.subarray(10,14)),_-=mn.parseSyncSafeInteger(ie.data.subarray(16,20)));do{if(ce=mn.parseSyncSafeInteger(ie.data.subarray(ae+4,ae+8)),ce<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(ut=String.fromCharCode(ie.data[ae],ie.data[ae+1],ie.data[ae+2],ie.data[ae+3]),Te={id:ut,data:ie.data.subarray(ae+10,ae+ce+10)},Te.key=Te.id,mn.frameParsers[Te.id]?mn.frameParsers[Te.id](Te):Te.id[0]==="T"?mn.frameParsers["T*"](Te):Te.id[0]==="W"&&mn.frameParsers["W*"](Te),Te.owner==="com.apple.streaming.transportStreamTimestamp"){var He=Te.data,Dt=(He[3]&1)<<30|He[4]<<22|He[5]<<14|He[6]<<6|He[7]>>>2;Dt*=4,Dt+=He[7]&3,Te.timeStamp=Dt,ie.pts===void 0&&ie.dts===void 0&&(ie.pts=Te.timeStamp,ie.dts=Te.timeStamp),this.trigger("timestamp",Te)}ie.frames.push(Te),ae+=10,ae+=ce}while(ae<_);this.trigger("data",ie)}}}},va.prototype=new Du;var Lu=va,gs=t,Ta=Xo,Ki=gn,oo=ro.TimestampRolloverStream,yn,is,Qs,On=188,lo=71;yn=function(){var f=new Uint8Array(On),y=0;yn.prototype.init.call(this),this.push=function(_){var S=0,L=On,N;for(y?(N=new Uint8Array(_.byteLength+y),N.set(f.subarray(0,y)),N.set(_,y),y=0):N=_;L<N.byteLength;){if(N[S]===lo&&N[L]===lo){this.trigger("data",N.subarray(S,L)),S+=On,L+=On;continue}S++,L++}S<N.byteLength&&(f.set(N.subarray(S),0),y=N.byteLength-S)},this.flush=function(){y===On&&f[0]===lo&&(this.trigger("data",f),y=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){y=0,this.trigger("reset")}},yn.prototype=new gs,is=function(){var f,y,_,S;is.prototype.init.call(this),S=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(L,N){var te=0;N.payloadUnitStartIndicator&&(te+=L[te]+1),N.type==="pat"?y(L.subarray(te),N):_(L.subarray(te),N)},y=function(L,N){N.section_number=L[7],N.last_section_number=L[8],S.pmtPid=(L[10]&31)<<8|L[11],N.pmtPid=S.pmtPid},_=function(L,N){var te,ie,ae,ce;if(!!(L[5]&1)){for(S.programMapTable={video:null,audio:null,"timed-metadata":{}},te=(L[1]&15)<<8|L[2],ie=3+te-4,ae=(L[10]&15)<<8|L[11],ce=12+ae;ce<ie;){var Te=L[ce],Oe=(L[ce+1]&31)<<8|L[ce+2];Te===Ki.H264_STREAM_TYPE&&S.programMapTable.video===null?S.programMapTable.video=Oe:Te===Ki.ADTS_STREAM_TYPE&&S.programMapTable.audio===null?S.programMapTable.audio=Oe:Te===Ki.METADATA_STREAM_TYPE&&(S.programMapTable["timed-metadata"][Oe]=Te),ce+=((L[ce+3]&15)<<8|L[ce+4])+5}N.programMapTable=S.programMapTable}},this.push=function(L){var N={},te=4;if(N.payloadUnitStartIndicator=!!(L[1]&64),N.pid=L[1]&31,N.pid<<=8,N.pid|=L[2],(L[3]&48)>>>4>1&&(te+=L[te]+1),N.pid===0)N.type="pat",f(L.subarray(te),N),this.trigger("data",N);else if(N.pid===this.pmtPid)for(N.type="pmt",f(L.subarray(te),N),this.trigger("data",N);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([L,te,N]):this.processPes_(L,te,N)},this.processPes_=function(L,N,te){te.pid===this.programMapTable.video?te.streamType=Ki.H264_STREAM_TYPE:te.pid===this.programMapTable.audio?te.streamType=Ki.ADTS_STREAM_TYPE:te.streamType=this.programMapTable["timed-metadata"][te.pid],te.type="pes",te.data=L.subarray(N),this.trigger("data",te)}},is.prototype=new gs,is.STREAM_TYPES={h264:27,adts:15},Qs=function(){var f=this,y=!1,_={data:[],size:0},S={data:[],size:0},L={data:[],size:0},N,te=function(ae,ce){var Te;let Oe=ae[0]<<16|ae[1]<<8|ae[2];ce.data=new Uint8Array,Oe===1&&(ce.packetLength=6+(ae[4]<<8|ae[5]),ce.dataAlignmentIndicator=(ae[6]&4)!==0,Te=ae[7],Te&192&&(ce.pts=(ae[9]&14)<<27|(ae[10]&255)<<20|(ae[11]&254)<<12|(ae[12]&255)<<5|(ae[13]&254)>>>3,ce.pts*=4,ce.pts+=(ae[13]&6)>>>1,ce.dts=ce.pts,Te&64&&(ce.dts=(ae[14]&14)<<27|(ae[15]&255)<<20|(ae[16]&254)<<12|(ae[17]&255)<<5|(ae[18]&254)>>>3,ce.dts*=4,ce.dts+=(ae[18]&6)>>>1)),ce.data=ae.subarray(9+ae[8]))},ie=function(ae,ce,Te){var Oe=new Uint8Array(ae.size),ut={type:ce},He=0,Dt=0,Ot=!1,qi;if(!(!ae.data.length||ae.size<9)){for(ut.trackId=ae.data[0].pid,He=0;He<ae.data.length;He++)qi=ae.data[He],Oe.set(qi.data,Dt),Dt+=qi.data.byteLength;te(Oe,ut),Ot=ce==="video"||ut.packetLength<=ae.size,(Te||Ot)&&(ae.size=0,ae.data.length=0),Ot&&f.trigger("data",ut)}};Qs.prototype.init.call(this),this.push=function(ae){({pat:function(){},pes:function(){var ce,Te;switch(ae.streamType){case Ki.H264_STREAM_TYPE:ce=_,Te="video";break;case Ki.ADTS_STREAM_TYPE:ce=S,Te="audio";break;case Ki.METADATA_STREAM_TYPE:ce=L,Te="timed-metadata";break;default:return}ae.payloadUnitStartIndicator&&ie(ce,Te,!0),ce.data.push(ae),ce.size+=ae.data.byteLength},pmt:function(){var ce={type:"metadata",tracks:[]};N=ae.programMapTable,N.video!==null&&ce.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),N.audio!==null&&ce.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),y=!0,f.trigger("data",ce)}})[ae.type]()},this.reset=function(){_.size=0,_.data.length=0,S.size=0,S.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ie(_,"video"),ie(S,"audio"),ie(L,"timed-metadata")},this.flush=function(){if(!y&&N){var ae={type:"metadata",tracks:[]};N.video!==null&&ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),N.audio!==null&&ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),f.trigger("data",ae)}y=!1,this.flushStreams_(),this.trigger("done")}},Qs.prototype=new gs;var yr={PAT_PID:0,MP2T_PACKET_LENGTH:On,TransportPacketStream:yn,TransportParseStream:is,ElementaryStream:Qs,TimestampRolloverStream:oo,CaptionStream:Ta.CaptionStream,Cea608Stream:Ta.Cea608Stream,Cea708Stream:Ta.Cea708Stream,MetadataStream:Lu};for(var _a in Ki)Ki.hasOwnProperty(_a)&&(yr[_a]=Ki[_a]);var uo=yr,ba=t,tl=de.ONE_SECOND_IN_TS,Ea,Mn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ea=function(f){var y,_=0;Ea.prototype.init.call(this),this.skipWarn_=function(S,L){this.trigger("log",{level:"warn",message:`adts skiping bytes ${S} to ${L} in frame ${_} outside syncword`})},this.push=function(S){var L=0,N,te,ie,ae,ce;if(f||(_=0),S.type==="audio"){y&&y.length?(ie=y,y=new Uint8Array(ie.byteLength+S.data.byteLength),y.set(ie),y.set(S.data,ie.byteLength)):y=S.data;for(var Te;L+7<y.length;){if(y[L]!==255||(y[L+1]&246)!==240){typeof Te!="number"&&(Te=L),L++;continue}if(typeof Te=="number"&&(this.skipWarn_(Te,L),Te=null),te=(~y[L+1]&1)*2,N=(y[L+3]&3)<<11|y[L+4]<<3|(y[L+5]&224)>>5,ae=((y[L+6]&3)+1)*1024,ce=ae*tl/Mn[(y[L+2]&60)>>>2],y.byteLength-L<N)break;this.trigger("data",{pts:S.pts+_*ce,dts:S.dts+_*ce,sampleCount:ae,audioobjecttype:(y[L+2]>>>6&3)+1,channelcount:(y[L+2]&1)<<2|(y[L+3]&192)>>>6,samplerate:Mn[(y[L+2]&60)>>>2],samplingfrequencyindex:(y[L+2]&60)>>>2,samplesize:16,data:y.subarray(L+7+te,L+N)}),_++,L+=N}typeof Te=="number"&&(this.skipWarn_(Te,L),Te=null),y=y.subarray(L)}},this.flush=function(){_=0,this.trigger("done")},this.reset=function(){y=void 0,this.trigger("reset")},this.endTimeline=function(){y=void 0,this.trigger("endedtimeline")}},Ea.prototype=new ba;var il=Ea,ku;ku=function(f){var y=f.byteLength,_=0,S=0;this.length=function(){return 8*y},this.bitsAvailable=function(){return 8*y+S},this.loadWord=function(){var L=f.byteLength-y,N=new Uint8Array(4),te=Math.min(4,y);if(te===0)throw new Error("no bytes available");N.set(f.subarray(L,L+te)),_=new DataView(N.buffer).getUint32(0),S=te*8,y-=te},this.skipBits=function(L){var N;S>L?(_<<=L,S-=L):(L-=S,N=Math.floor(L/8),L-=N*8,y-=N,this.loadWord(),_<<=L,S-=L)},this.readBits=function(L){var N=Math.min(S,L),te=_>>>32-N;return S-=N,S>0?_<<=N:y>0&&this.loadWord(),N=L-N,N>0?te<<N|this.readBits(N):te},this.skipLeadingZeros=function(){var L;for(L=0;L<S;++L)if((_&2147483648>>>L)!==0)return _<<=L,S-=L,L;return this.loadWord(),L+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var L=this.skipLeadingZeros();return this.readBits(L+1)-1},this.readExpGolomb=function(){var L=this.readUnsignedExpGolomb();return 1&L?1+L>>>1:-1*(L>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var vn=ku,Sa=t,Ru=vn,Xr,Qr,co;Qr=function(){var f=0,y,_;Qr.prototype.init.call(this),this.push=function(S){var L;_?(L=new Uint8Array(_.byteLength+S.data.byteLength),L.set(_),L.set(S.data,_.byteLength),_=L):_=S.data;for(var N=_.byteLength;f<N-3;f++)if(_[f+2]===1){y=f+5;break}for(;y<N;)switch(_[y]){case 0:if(_[y-1]!==0){y+=2;break}else if(_[y-2]!==0){y++;break}f+3!==y-2&&this.trigger("data",_.subarray(f+3,y-2));do y++;while(_[y]!==1&&y<N);f=y-2,y+=3;break;case 1:if(_[y-1]!==0||_[y-2]!==0){y+=3;break}this.trigger("data",_.subarray(f+3,y-2)),f=y-2,y+=3;break;default:y+=3;break}_=_.subarray(f),y-=f,f=0},this.reset=function(){_=null,f=0,this.trigger("reset")},this.flush=function(){_&&_.byteLength>3&&this.trigger("data",_.subarray(f+3)),_=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Qr.prototype=new Sa,co={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Xr=function(){var f=new Qr,y,_,S,L,N,te,ie;Xr.prototype.init.call(this),y=this,this.push=function(ae){ae.type==="video"&&(_=ae.trackId,S=ae.pts,L=ae.dts,f.push(ae))},f.on("data",function(ae){var ce={trackId:_,pts:S,dts:L,data:ae,nalUnitTypeCode:ae[0]&31};switch(ce.nalUnitTypeCode){case 5:ce.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ce.nalUnitType="sei_rbsp",ce.escapedRBSP=N(ae.subarray(1));break;case 7:ce.nalUnitType="seq_parameter_set_rbsp",ce.escapedRBSP=N(ae.subarray(1)),ce.config=te(ce.escapedRBSP);break;case 8:ce.nalUnitType="pic_parameter_set_rbsp";break;case 9:ce.nalUnitType="access_unit_delimiter_rbsp";break}y.trigger("data",ce)}),f.on("done",function(){y.trigger("done")}),f.on("partialdone",function(){y.trigger("partialdone")}),f.on("reset",function(){y.trigger("reset")}),f.on("endedtimeline",function(){y.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},ie=function(ae,ce){var Te=8,Oe=8,ut,He;for(ut=0;ut<ae;ut++)Oe!==0&&(He=ce.readExpGolomb(),Oe=(Te+He+256)%256),Te=Oe===0?Te:Oe},N=function(ae){for(var ce=ae.byteLength,Te=[],Oe=1,ut,He;Oe<ce-2;)ae[Oe]===0&&ae[Oe+1]===0&&ae[Oe+2]===3?(Te.push(Oe+2),Oe+=2):Oe++;if(Te.length===0)return ae;ut=ce-Te.length,He=new Uint8Array(ut);var Dt=0;for(Oe=0;Oe<ut;Dt++,Oe++)Dt===Te[0]&&(Dt++,Te.shift()),He[Oe]=ae[Dt];return He},te=function(ae){var ce=0,Te=0,Oe=0,ut=0,He,Dt,Ot,qi,Ss,Sr,La,ta,ka,En,bo,ri=[1,1],Eo,tn;if(He=new Ru(ae),Dt=He.readUnsignedByte(),qi=He.readUnsignedByte(),Ot=He.readUnsignedByte(),He.skipUnsignedExpGolomb(),co[Dt]&&(Ss=He.readUnsignedExpGolomb(),Ss===3&&He.skipBits(1),He.skipUnsignedExpGolomb(),He.skipUnsignedExpGolomb(),He.skipBits(1),He.readBoolean()))for(bo=Ss!==3?8:12,tn=0;tn<bo;tn++)He.readBoolean()&&(tn<6?ie(16,He):ie(64,He));if(He.skipUnsignedExpGolomb(),Sr=He.readUnsignedExpGolomb(),Sr===0)He.readUnsignedExpGolomb();else if(Sr===1)for(He.skipBits(1),He.skipExpGolomb(),He.skipExpGolomb(),La=He.readUnsignedExpGolomb(),tn=0;tn<La;tn++)He.skipExpGolomb();if(He.skipUnsignedExpGolomb(),He.skipBits(1),ta=He.readUnsignedExpGolomb(),ka=He.readUnsignedExpGolomb(),En=He.readBits(1),En===0&&He.skipBits(1),He.skipBits(1),He.readBoolean()&&(ce=He.readUnsignedExpGolomb(),Te=He.readUnsignedExpGolomb(),Oe=He.readUnsignedExpGolomb(),ut=He.readUnsignedExpGolomb()),He.readBoolean()&&He.readBoolean()){switch(Eo=He.readUnsignedByte(),Eo){case 1:ri=[1,1];break;case 2:ri=[12,11];break;case 3:ri=[10,11];break;case 4:ri=[16,11];break;case 5:ri=[40,33];break;case 6:ri=[24,11];break;case 7:ri=[20,11];break;case 8:ri=[32,11];break;case 9:ri=[80,33];break;case 10:ri=[18,11];break;case 11:ri=[15,11];break;case 12:ri=[64,33];break;case 13:ri=[160,99];break;case 14:ri=[4,3];break;case 15:ri=[3,2];break;case 16:ri=[2,1];break;case 255:{ri=[He.readUnsignedByte()<<8|He.readUnsignedByte(),He.readUnsignedByte()<<8|He.readUnsignedByte()];break}}ri&&ri[0]/ri[1]}return{profileIdc:Dt,levelIdc:Ot,profileCompatibility:qi,width:(ta+1)*16-ce*2-Te*2,height:(2-En)*(ka+1)*16-Oe*2-ut*2,sarRatio:ri}}},Xr.prototype=new Sa;var Pu={H264Stream:Xr,NalByteStream:Qr},Ou=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ho=function(f,y){var _=f[y+6]<<21|f[y+7]<<14|f[y+8]<<7|f[y+9],S=f[y+5],L=(S&16)>>4;return _=_>=0?_:0,L?_+20:_+10},xa=function(f,y){return f.length-y<10||f[y]!=="I".charCodeAt(0)||f[y+1]!=="D".charCodeAt(0)||f[y+2]!=="3".charCodeAt(0)?y:(y+=ho(f,y),xa(f,y))},sl=function(f){var y=xa(f,0);return f.length>=y+2&&(f[y]&255)===255&&(f[y+1]&240)===240&&(f[y+1]&22)===16},Jr=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},fo=function(f,y,_){var S,L="";for(S=y;S<_;S++)L+="%"+("00"+f[S].toString(16)).slice(-2);return L},nl=function(f,y,_){return unescape(fo(f,y,_))},Nn=function(f,y){var _=(f[y+5]&224)>>5,S=f[y+4]<<3,L=f[y+3]&3<<11;return L|S|_},Mu=function(f,y){return f[y]==="I".charCodeAt(0)&&f[y+1]==="D".charCodeAt(0)&&f[y+2]==="3".charCodeAt(0)?"timed-metadata":f[y]&!0&&(f[y+1]&240)===240?"audio":null},Nu=function(f){for(var y=0;y+5<f.length;){if(f[y]!==255||(f[y+1]&246)!==240){y++;continue}return Ou[(f[y+2]&60)>>>2]}return null},Fu=function(f){var y,_,S,L;y=10,f[5]&64&&(y+=4,y+=Jr(f.subarray(10,14)));do{if(_=Jr(f.subarray(y+4,y+8)),_<1)return null;if(L=String.fromCharCode(f[y],f[y+1],f[y+2],f[y+3]),L==="PRIV"){S=f.subarray(y+10,y+_+10);for(var N=0;N<S.byteLength;N++)if(S[N]===0){var te=nl(S,0,N);if(te==="com.apple.streaming.transportStreamTimestamp"){var ie=S.subarray(N+1),ae=(ie[3]&1)<<30|ie[4]<<22|ie[5]<<14|ie[6]<<6|ie[7]>>>2;return ae*=4,ae+=ie[7]&3,ae}break}}y+=10,y+=_}while(y<f.byteLength);return null},er={isLikelyAacData:sl,parseId3TagSize:ho,parseAdtsSize:Nn,parseType:Mu,parseSampleRate:Nu,parseAacTimestamp:Fu},rl=t,Js=er,Aa;Aa=function(){var f=new Uint8Array,y=0;Aa.prototype.init.call(this),this.setTimestamp=function(_){y=_},this.push=function(_){var S=0,L=0,N,te,ie,ae;for(f.length?(ae=f.length,f=new Uint8Array(_.byteLength+ae),f.set(f.subarray(0,ae)),f.set(_,ae)):f=_;f.length-L>=3;){if(f[L]==="I".charCodeAt(0)&&f[L+1]==="D".charCodeAt(0)&&f[L+2]==="3".charCodeAt(0)){if(f.length-L<10||(S=Js.parseId3TagSize(f,L),L+S>f.length))break;te={type:"timed-metadata",data:f.subarray(L,L+S)},this.trigger("data",te),L+=S;continue}else if((f[L]&255)===255&&(f[L+1]&240)===240){if(f.length-L<7||(S=Js.parseAdtsSize(f,L),L+S>f.length))break;ie={type:"audio",data:f.subarray(L,L+S),pts:y,dts:y},this.trigger("data",ie),L+=S;continue}L++}N=f.length-L,N>0?f=f.subarray(L):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},Aa.prototype=new rl;var Ca=Aa,$u=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],p=$u,T=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],D=T,k=t,U=ni,V=d,Q=Je,he=tt,ue=uo,_e=de,Me=il,Ue=Pu.H264Stream,xe=Ca,Ze=er.isLikelyAacData,Rt=de.ONE_SECOND_IN_TS,Vt=p,Mt=D,bi,ci,ss,ji,jt=function(f,y){y.stream=f,this.trigger("log",y)},Rs=function(f,y){for(var _=Object.keys(y),S=0;S<_.length;S++){var L=_[S];L==="headOfPipeline"||!y[L].on||y[L].on("log",jt.bind(f,L))}},Kt=function(f,y){var _;if(f.length!==y.length)return!1;for(_=0;_<f.length;_++)if(f[_]!==y[_])return!1;return!0},di=function(f,y,_,S,L,N){var te=_-y,ie=S-y,ae=L-_;return{start:{dts:f,pts:f+te},end:{dts:f+ie,pts:f+ae},prependedContentDuration:N,baseMediaDecodeTime:f}};ci=function(f,y){var _=[],S,L=0,N=0,te=1/0;y=y||{},S=y.firstSequenceNumber||0,ci.prototype.init.call(this),this.push=function(ie){he.collectDtsInfo(f,ie),f&&Vt.forEach(function(ae){f[ae]=ie[ae]}),_.push(ie)},this.setEarliestDts=function(ie){L=ie},this.setVideoBaseMediaDecodeTime=function(ie){te=ie},this.setAudioAppendStart=function(ie){N=ie},this.flush=function(){var ie,ae,ce,Te,Oe,ut,He;if(_.length===0){this.trigger("done","AudioSegmentStream");return}ie=Q.trimAdtsFramesByEarliestDts(_,f,L),f.baseMediaDecodeTime=he.calculateTrackBaseMediaDecodeTime(f,y.keepOriginalTimestamps),He=Q.prefixWithSilence(f,ie,N,te),f.samples=Q.generateSampleTable(ie),ce=U.mdat(Q.concatenateFrameData(ie)),_=[],ae=U.moof(S,[f]),Te=new Uint8Array(ae.byteLength+ce.byteLength),S++,Te.set(ae),Te.set(ce,ae.byteLength),he.clearDtsInfo(f),Oe=Math.ceil(Rt*1024/f.samplerate),ie.length&&(ut=ie.length*Oe,this.trigger("segmentTimingInfo",di(_e.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),ie[0].dts,ie[0].pts,ie[0].dts+ut,ie[0].pts+ut,He||0)),this.trigger("timingInfo",{start:ie[0].pts,end:ie[0].pts+ut})),this.trigger("data",{track:f,boxes:Te}),this.trigger("done","AudioSegmentStream")},this.reset=function(){he.clearDtsInfo(f),_=[],this.trigger("reset")}},ci.prototype=new k,bi=function(f,y){var _,S=[],L=[],N,te;y=y||{},_=y.firstSequenceNumber||0,bi.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(ie){he.collectDtsInfo(f,ie),ie.nalUnitType==="seq_parameter_set_rbsp"&&!N&&(N=ie.config,f.sps=[ie.data],Mt.forEach(function(ae){f[ae]=N[ae]},this)),ie.nalUnitType==="pic_parameter_set_rbsp"&&!te&&(te=ie.data,f.pps=[ie.data]),S.push(ie)},this.flush=function(){for(var ie,ae,ce,Te,Oe,ut,He=0,Dt,Ot;S.length&&S[0].nalUnitType!=="access_unit_delimiter_rbsp";)S.shift();if(S.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(ie=V.groupNalsIntoFrames(S),ce=V.groupFramesIntoGops(ie),ce[0][0].keyFrame||(ae=this.getGopForFusion_(S[0],f),ae?(He=ae.duration,ce.unshift(ae),ce.byteLength+=ae.byteLength,ce.nalCount+=ae.nalCount,ce.pts=ae.pts,ce.dts=ae.dts,ce.duration+=ae.duration):ce=V.extendFirstKeyFrame(ce)),L.length){var qi;if(y.alignGopsAtEnd?qi=this.alignGopsAtEnd_(ce):qi=this.alignGopsAtStart_(ce),!qi){this.gopCache_.unshift({gop:ce.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),S=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}he.clearDtsInfo(f),ce=qi}he.collectDtsInfo(f,ce),f.samples=V.generateSampleTable(ce),Oe=U.mdat(V.concatenateNalData(ce)),f.baseMediaDecodeTime=he.calculateTrackBaseMediaDecodeTime(f,y.keepOriginalTimestamps),this.trigger("processedGopsInfo",ce.map(function(Ss){return{pts:Ss.pts,dts:Ss.dts,byteLength:Ss.byteLength}})),Dt=ce[0],Ot=ce[ce.length-1],this.trigger("segmentTimingInfo",di(f.baseMediaDecodeTime,Dt.dts,Dt.pts,Ot.dts+Ot.duration,Ot.pts+Ot.duration,He)),this.trigger("timingInfo",{start:ce[0].pts,end:ce[ce.length-1].pts+ce[ce.length-1].duration}),this.gopCache_.unshift({gop:ce.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),S=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),Te=U.moof(_,[f]),ut=new Uint8Array(Te.byteLength+Oe.byteLength),_++,ut.set(Te),ut.set(Oe,Te.byteLength),this.trigger("data",{track:f,boxes:ut}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),S=[],this.gopCache_.length=0,L.length=0,this.trigger("reset")},this.resetStream_=function(){he.clearDtsInfo(f),N=void 0,te=void 0},this.getGopForFusion_=function(ie){var ae=45e3,ce=1e4,Te=1/0,Oe,ut,He,Dt,Ot;for(Ot=0;Ot<this.gopCache_.length;Ot++)Dt=this.gopCache_[Ot],He=Dt.gop,!(!(f.pps&&Kt(f.pps[0],Dt.pps[0]))||!(f.sps&&Kt(f.sps[0],Dt.sps[0])))&&(He.dts<f.timelineStartInfo.dts||(Oe=ie.dts-He.dts-He.duration,Oe>=-ce&&Oe<=ae&&(!ut||Te>Oe)&&(ut=Dt,Te=Oe)));return ut?ut.gop:null},this.alignGopsAtStart_=function(ie){var ae,ce,Te,Oe,ut,He,Dt,Ot;for(ut=ie.byteLength,He=ie.nalCount,Dt=ie.duration,ae=ce=0;ae<L.length&&ce<ie.length&&(Te=L[ae],Oe=ie[ce],Te.pts!==Oe.pts);){if(Oe.pts>Te.pts){ae++;continue}ce++,ut-=Oe.byteLength,He-=Oe.nalCount,Dt-=Oe.duration}return ce===0?ie:ce===ie.length?null:(Ot=ie.slice(ce),Ot.byteLength=ut,Ot.duration=Dt,Ot.nalCount=He,Ot.pts=Ot[0].pts,Ot.dts=Ot[0].dts,Ot)},this.alignGopsAtEnd_=function(ie){var ae,ce,Te,Oe,ut,He;for(ae=L.length-1,ce=ie.length-1,ut=null,He=!1;ae>=0&&ce>=0;){if(Te=L[ae],Oe=ie[ce],Te.pts===Oe.pts){He=!0;break}if(Te.pts>Oe.pts){ae--;continue}ae===L.length-1&&(ut=ce),ce--}if(!He&&ut===null)return null;var Dt;if(He?Dt=ce:Dt=ut,Dt===0)return ie;var Ot=ie.slice(Dt),qi=Ot.reduce(function(Ss,Sr){return Ss.byteLength+=Sr.byteLength,Ss.duration+=Sr.duration,Ss.nalCount+=Sr.nalCount,Ss},{byteLength:0,duration:0,nalCount:0});return Ot.byteLength=qi.byteLength,Ot.duration=qi.duration,Ot.nalCount=qi.nalCount,Ot.pts=Ot[0].pts,Ot.dts=Ot[0].dts,Ot},this.alignGopsWith=function(ie){L=ie}},bi.prototype=new k,ji=function(f,y){this.numberOfTracks=0,this.metadataStream=y,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ji.prototype.init.call(this),this.push=function(_){if(_.content||_.text)return this.pendingCaptions.push(_);if(_.frames)return this.pendingMetadata.push(_);this.pendingTracks.push(_.track),this.pendingBytes+=_.boxes.byteLength,_.track.type==="video"&&(this.videoTrack=_.track,this.pendingBoxes.push(_.boxes)),_.track.type==="audio"&&(this.audioTrack=_.track,this.pendingBoxes.unshift(_.boxes))}},ji.prototype=new k,ji.prototype.flush=function(f){var y=0,_={captions:[],captionStreams:{},metadata:[],info:{}},S,L,N,te=0,ie;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(te=this.videoTrack.timelineStartInfo.pts,Mt.forEach(function(ae){_.info[ae]=this.videoTrack[ae]},this)):this.audioTrack&&(te=this.audioTrack.timelineStartInfo.pts,Vt.forEach(function(ae){_.info[ae]=this.audioTrack[ae]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?_.type=this.pendingTracks[0].type:_.type="combined",this.emittedTracks+=this.pendingTracks.length,N=U.initSegment(this.pendingTracks),_.initSegment=new Uint8Array(N.byteLength),_.initSegment.set(N),_.data=new Uint8Array(this.pendingBytes),ie=0;ie<this.pendingBoxes.length;ie++)_.data.set(this.pendingBoxes[ie],y),y+=this.pendingBoxes[ie].byteLength;for(ie=0;ie<this.pendingCaptions.length;ie++)S=this.pendingCaptions[ie],S.startTime=_e.metadataTsToSeconds(S.startPts,te,this.keepOriginalTimestamps),S.endTime=_e.metadataTsToSeconds(S.endPts,te,this.keepOriginalTimestamps),_.captionStreams[S.stream]=!0,_.captions.push(S);for(ie=0;ie<this.pendingMetadata.length;ie++)L=this.pendingMetadata[ie],L.cueTime=_e.metadataTsToSeconds(L.pts,te,this.keepOriginalTimestamps),_.metadata.push(L);for(_.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",_),ie=0;ie<_.captions.length;ie++)S=_.captions[ie],this.trigger("caption",S);for(ie=0;ie<_.metadata.length;ie++)L=_.metadata[ie],this.trigger("id3Frame",L)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ji.prototype.setRemux=function(f){this.remuxTracks=f},ss=function(f){var y=this,_=!0,S,L;ss.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="aac",N.metadataStream=new ue.MetadataStream,N.aacStream=new xe,N.audioTimestampRolloverStream=new ue.TimestampRolloverStream("audio"),N.timedMetadataTimestampRolloverStream=new ue.TimestampRolloverStream("timed-metadata"),N.adtsStream=new Me,N.coalesceStream=new ji(f,N.metadataStream),N.headOfPipeline=N.aacStream,N.aacStream.pipe(N.audioTimestampRolloverStream).pipe(N.adtsStream),N.aacStream.pipe(N.timedMetadataTimestampRolloverStream).pipe(N.metadataStream).pipe(N.coalesceStream),N.metadataStream.on("timestamp",function(te){N.aacStream.setTimestamp(te.timeStamp)}),N.aacStream.on("data",function(te){te.type!=="timed-metadata"&&te.type!=="audio"||N.audioSegmentStream||(L=L||{timelineStartInfo:{baseMediaDecodeTime:y.baseMediaDecodeTime},codec:"adts",type:"audio"},N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new ci(L,f),N.audioSegmentStream.on("log",y.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",y.trigger.bind(y,"audioTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream),y.trigger("trackinfo",{hasAudio:!!L,hasVideo:!!S}))}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),Rs(this,N)},this.setupTsPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="ts",N.metadataStream=new ue.MetadataStream,N.packetStream=new ue.TransportPacketStream,N.parseStream=new ue.TransportParseStream,N.elementaryStream=new ue.ElementaryStream,N.timestampRolloverStream=new ue.TimestampRolloverStream,N.adtsStream=new Me,N.h264Stream=new Ue,N.captionStream=new ue.CaptionStream(f),N.coalesceStream=new ji(f,N.metadataStream),N.headOfPipeline=N.packetStream,N.packetStream.pipe(N.parseStream).pipe(N.elementaryStream).pipe(N.timestampRolloverStream),N.timestampRolloverStream.pipe(N.h264Stream),N.timestampRolloverStream.pipe(N.adtsStream),N.timestampRolloverStream.pipe(N.metadataStream).pipe(N.coalesceStream),N.h264Stream.pipe(N.captionStream).pipe(N.coalesceStream),N.elementaryStream.on("data",function(te){var ie;if(te.type==="metadata"){for(ie=te.tracks.length;ie--;)!S&&te.tracks[ie].type==="video"?(S=te.tracks[ie],S.timelineStartInfo.baseMediaDecodeTime=y.baseMediaDecodeTime):!L&&te.tracks[ie].type==="audio"&&(L=te.tracks[ie],L.timelineStartInfo.baseMediaDecodeTime=y.baseMediaDecodeTime);S&&!N.videoSegmentStream&&(N.coalesceStream.numberOfTracks++,N.videoSegmentStream=new bi(S,f),N.videoSegmentStream.on("log",y.getLogTrigger_("videoSegmentStream")),N.videoSegmentStream.on("timelineStartInfo",function(ae){L&&!f.keepOriginalTimestamps&&(L.timelineStartInfo=ae,N.audioSegmentStream.setEarliestDts(ae.dts-y.baseMediaDecodeTime))}),N.videoSegmentStream.on("processedGopsInfo",y.trigger.bind(y,"gopInfo")),N.videoSegmentStream.on("segmentTimingInfo",y.trigger.bind(y,"videoSegmentTimingInfo")),N.videoSegmentStream.on("baseMediaDecodeTime",function(ae){L&&N.audioSegmentStream.setVideoBaseMediaDecodeTime(ae)}),N.videoSegmentStream.on("timingInfo",y.trigger.bind(y,"videoTimingInfo")),N.h264Stream.pipe(N.videoSegmentStream).pipe(N.coalesceStream)),L&&!N.audioSegmentStream&&(N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new ci(L,f),N.audioSegmentStream.on("log",y.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",y.trigger.bind(y,"audioTimingInfo")),N.audioSegmentStream.on("segmentTimingInfo",y.trigger.bind(y,"audioSegmentTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream)),y.trigger("trackinfo",{hasAudio:!!L,hasVideo:!!S})}}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("id3Frame",function(te){te.dispatchType=N.metadataStream.dispatchType,y.trigger("id3Frame",te)}),N.coalesceStream.on("caption",this.trigger.bind(this,"caption")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),Rs(this,N)},this.setBaseMediaDecodeTime=function(N){var te=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=N),L&&(L.timelineStartInfo.dts=void 0,L.timelineStartInfo.pts=void 0,he.clearDtsInfo(L),te.audioTimestampRolloverStream&&te.audioTimestampRolloverStream.discontinuity()),S&&(te.videoSegmentStream&&(te.videoSegmentStream.gopCache_=[]),S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,he.clearDtsInfo(S),te.captionStream.reset()),te.timestampRolloverStream&&te.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(N){L&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(N)},this.setRemux=function(N){var te=this.transmuxPipeline_;f.remux=N,te&&te.coalesceStream&&te.coalesceStream.setRemux(N)},this.alignGopsWith=function(N){S&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(N)},this.getLogTrigger_=function(N){var te=this;return function(ie){ie.stream=N,te.trigger("log",ie)}},this.push=function(N){if(_){var te=Ze(N);te&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!te&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),_=!1}this.transmuxPipeline_.headOfPipeline.push(N)},this.flush=function(){_=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ss.prototype=new k;var Zr={Transmuxer:ss,VideoSegmentStream:bi,AudioSegmentStream:ci,AUDIO_PROPERTIES:Vt,VIDEO_PROPERTIES:Mt,generateSegmentTimingInfo:di},po=function(f){return f>>>0},Ps=function(f){return("00"+f.toString(16)).slice(-2)},Fn={toUnsigned:po,toHexString:Ps},Zs=function(f){var y="";return y+=String.fromCharCode(f[0]),y+=String.fromCharCode(f[1]),y+=String.fromCharCode(f[2]),y+=String.fromCharCode(f[3]),y},Os=Zs,Tn=Fn.toUnsigned,ms=Os,tr=function(f,y){var _=[],S,L,N,te,ie;if(!y.length)return null;for(S=0;S<f.byteLength;)L=Tn(f[S]<<24|f[S+1]<<16|f[S+2]<<8|f[S+3]),N=ms(f.subarray(S+4,S+8)),te=L>1?S+L:f.byteLength,N===y[0]&&(y.length===1?_.push(f.subarray(S+8,te)):(ie=tr(f.subarray(S+8,te),y.slice(1)),ie.length&&(_=_.concat(ie)))),S=te;return _},ys=tr,Ms=Fn.toUnsigned,Bu=r.getUint64,xd=function(f){var y={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return y.version===1?y.baseMediaDecodeTime=Bu(f.subarray(4)):y.baseMediaDecodeTime=Ms(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),y},ns=xd,Zt=function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:y.getUint32(4)},S=_.flags[2]&1,L=_.flags[2]&2,N=_.flags[2]&8,te=_.flags[2]&16,ie=_.flags[2]&32,ae=_.flags[0]&65536,ce=_.flags[0]&131072,Te;return Te=8,S&&(Te+=4,_.baseDataOffset=y.getUint32(12),Te+=4),L&&(_.sampleDescriptionIndex=y.getUint32(Te),Te+=4),N&&(_.defaultSampleDuration=y.getUint32(Te),Te+=4),te&&(_.defaultSampleSize=y.getUint32(Te),Te+=4),ie&&(_.defaultSampleFlags=y.getUint32(Te)),ae&&(_.durationIsEmpty=!0),!S&&ce&&(_.baseDataOffsetIsMoof=!0),_},vr=Zt,bs=r.getUint64,Tr=function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:f[0],flags:new Uint8Array(f.subarray(1,4)),references:[],referenceId:y.getUint32(4),timescale:y.getUint32(8)},S=12;_.version===0?(_.earliestPresentationTime=y.getUint32(S),_.firstOffset=y.getUint32(S+4),S+=8):(_.earliestPresentationTime=bs(f.subarray(S)),_.firstOffset=bs(f.subarray(S+8)),S+=16),S+=2;var L=y.getUint16(S);for(S+=2;L>0;S+=12,L--)_.references.push({referenceType:(f[S]&128)>>>7,referencedSize:y.getUint32(S)&2147483647,subsegmentDuration:y.getUint32(S+4),startsWithSap:!!(f[S+8]&128),sapType:(f[S+8]&112)>>>4,sapDeltaTime:y.getUint32(S+8)&268435455});return _},al=Tr,ol=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},ll=ol,$n=ll,go=function(f){var y={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},_=new DataView(f.buffer,f.byteOffset,f.byteLength),S=y.flags[2]&1,L=y.flags[2]&4,N=y.flags[1]&1,te=y.flags[1]&2,ie=y.flags[1]&4,ae=y.flags[1]&8,ce=_.getUint32(4),Te=8,Oe;for(S&&(y.dataOffset=_.getInt32(Te),Te+=4),L&&ce&&(Oe={flags:$n(f.subarray(Te,Te+4))},Te+=4,N&&(Oe.duration=_.getUint32(Te),Te+=4),te&&(Oe.size=_.getUint32(Te),Te+=4),ae&&(y.version===1?Oe.compositionTimeOffset=_.getInt32(Te):Oe.compositionTimeOffset=_.getUint32(Te),Te+=4),y.samples.push(Oe),ce--);ce--;)Oe={},N&&(Oe.duration=_.getUint32(Te),Te+=4),te&&(Oe.size=_.getUint32(Te),Te+=4),ie&&(Oe.flags=$n(f.subarray(Te,Te+4)),Te+=4),ae&&(y.version===1?Oe.compositionTimeOffset=_.getInt32(Te):Oe.compositionTimeOffset=_.getUint32(Te),Te+=4),y.samples.push(Oe);return y},_n=go,ul=r,_r=ul.getUint64,Si,br,Yi=function(f){return new Date(f*1e3-20828448e5)},ir=Os,wa=ys,mo=function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=[],S,L;for(S=0;S+4<f.length;S+=L){if(L=y.getUint32(S),S+=4,L<=0){_.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(f[S]&31){case 1:_.push("slice_layer_without_partitioning_rbsp");break;case 5:_.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:_.push("sei_rbsp");break;case 7:_.push("seq_parameter_set_rbsp");break;case 8:_.push("pic_parameter_set_rbsp");break;case 9:_.push("access_unit_delimiter_rbsp");break;default:_.push("UNKNOWN NAL - "+f[S]&31);break}}return _},en={avc1:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength);return{dataReferenceIndex:y.getUint16(6),width:y.getUint16(24),height:y.getUint16(26),horizresolution:y.getUint16(28)+y.getUint16(30)/16,vertresolution:y.getUint16(32)+y.getUint16(34)/16,frameCount:y.getUint16(40),depth:y.getUint16(74),config:Si(f.subarray(78,f.byteLength))}},avcC:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={configurationVersion:f[0],avcProfileIndication:f[1],profileCompatibility:f[2],avcLevelIndication:f[3],lengthSizeMinusOne:f[4]&3,sps:[],pps:[]},S=f[5]&31,L,N,te,ie;for(te=6,ie=0;ie<S;ie++)N=y.getUint16(te),te+=2,_.sps.push(new Uint8Array(f.subarray(te,te+N))),te+=N;for(L=f[te],te++,ie=0;ie<L;ie++)N=y.getUint16(te),te+=2,_.pps.push(new Uint8Array(f.subarray(te,te+N))),te+=N;return _},btrt:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength);return{bufferSizeDB:y.getUint32(0),maxBitrate:y.getUint32(4),avgBitrate:y.getUint32(8)}},edts:function(y){return{boxes:Si(y)}},elst:function(y){var _=new DataView(y.buffer,y.byteOffset,y.byteLength),S={version:_.getUint8(0),flags:new Uint8Array(y.subarray(1,4)),edits:[]},L=_.getUint32(4),N;for(N=8;L;L--)S.version===0?(S.edits.push({segmentDuration:_.getUint32(N),mediaTime:_.getInt32(N+4),mediaRate:_.getUint16(N+8)+_.getUint16(N+10)/(256*256)}),N+=12):(S.edits.push({segmentDuration:_r(y.subarray(N)),mediaTime:_r(y.subarray(N+8)),mediaRate:_.getUint16(N+16)+_.getUint16(N+18)/(256*256)}),N+=20);return S},esds:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),esId:f[6]<<8|f[7],streamPriority:f[8]&31,decoderConfig:{objectProfileIndication:f[11],streamType:f[12]>>>2&63,bufferSize:f[13]<<16|f[14]<<8|f[15],maxBitrate:f[16]<<24|f[17]<<16|f[18]<<8|f[19],avgBitrate:f[20]<<24|f[21]<<16|f[22]<<8|f[23],decoderConfigDescriptor:{tag:f[24],length:f[25],audioObjectType:f[26]>>>3&31,samplingFrequencyIndex:(f[26]&7)<<1|f[27]>>>7&1,channelConfiguration:f[27]>>>3&15}}}},ftyp:function(f){for(var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={majorBrand:ir(f.subarray(0,4)),minorVersion:y.getUint32(4),compatibleBrands:[]},S=8;S<f.byteLength;)_.compatibleBrands.push(ir(f.subarray(S,S+4))),S+=4;return _},dinf:function(f){return{boxes:Si(f)}},dref:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),dataReferences:Si(f.subarray(8))}},hdlr:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),handlerType:ir(f.subarray(8,12)),name:""},S=8;for(S=24;S<f.byteLength;S++){if(f[S]===0){S++;break}_.name+=String.fromCharCode(f[S])}return _.name=decodeURIComponent(escape(_.name)),_},mdat:function(f){return{byteLength:f.byteLength,nals:mo(f)}},mdhd:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=4,S,L={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),language:""};return L.version===1?(_+=4,L.creationTime=Yi(y.getUint32(_)),_+=8,L.modificationTime=Yi(y.getUint32(_)),_+=4,L.timescale=y.getUint32(_),_+=8,L.duration=y.getUint32(_)):(L.creationTime=Yi(y.getUint32(_)),_+=4,L.modificationTime=Yi(y.getUint32(_)),_+=4,L.timescale=y.getUint32(_),_+=4,L.duration=y.getUint32(_)),_+=4,S=y.getUint16(_),L.language+=String.fromCharCode((S>>10)+96),L.language+=String.fromCharCode(((S&992)>>5)+96),L.language+=String.fromCharCode((S&31)+96),L},mdia:function(f){return{boxes:Si(f)}},mfhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sequenceNumber:f[4]<<24|f[5]<<16|f[6]<<8|f[7]}},minf:function(f){return{boxes:Si(f)}},mp4a:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={dataReferenceIndex:y.getUint16(6),channelcount:y.getUint16(16),samplesize:y.getUint16(18),samplerate:y.getUint16(24)+y.getUint16(26)/65536};return f.byteLength>28&&(_.streamDescriptor=Si(f.subarray(28))[0]),_},moof:function(f){return{boxes:Si(f)}},moov:function(f){return{boxes:Si(f)}},mvex:function(f){return{boxes:Si(f)}},mvhd:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=4,S={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};return S.version===1?(_+=4,S.creationTime=Yi(y.getUint32(_)),_+=8,S.modificationTime=Yi(y.getUint32(_)),_+=4,S.timescale=y.getUint32(_),_+=8,S.duration=y.getUint32(_)):(S.creationTime=Yi(y.getUint32(_)),_+=4,S.modificationTime=Yi(y.getUint32(_)),_+=4,S.timescale=y.getUint32(_),_+=4,S.duration=y.getUint32(_)),_+=4,S.rate=y.getUint16(_)+y.getUint16(_+2)/16,_+=4,S.volume=y.getUint8(_)+y.getUint8(_+1)/8,_+=2,_+=2,_+=2*4,S.matrix=new Uint32Array(f.subarray(_,_+9*4)),_+=9*4,_+=6*4,S.nextTrackId=y.getUint32(_),S},pdin:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),rate:y.getUint32(4),initialDelay:y.getUint32(8)}},sdtp:function(f){var y={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},_;for(_=4;_<f.byteLength;_++)y.samples.push({dependsOn:(f[_]&48)>>4,isDependedOn:(f[_]&12)>>2,hasRedundancy:f[_]&3});return y},sidx:al,smhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),balance:f[4]+f[5]/256}},stbl:function(f){return{boxes:Si(f)}},ctts:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),compositionOffsets:[]},S=y.getUint32(4),L;for(L=8;S;L+=8,S--)_.compositionOffsets.push({sampleCount:y.getUint32(L),sampleOffset:y[_.version===0?"getUint32":"getInt32"](L+4)});return _},stss:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),syncSamples:[]},S=y.getUint32(4),L;for(L=8;S;L+=4,S--)_.syncSamples.push(y.getUint32(L));return _},stco:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:f[0],flags:new Uint8Array(f.subarray(1,4)),chunkOffsets:[]},S=y.getUint32(4),L;for(L=8;S;L+=4,S--)_.chunkOffsets.push(y.getUint32(L));return _},stsc:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=y.getUint32(4),S={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleToChunks:[]},L;for(L=8;_;L+=12,_--)S.sampleToChunks.push({firstChunk:y.getUint32(L),samplesPerChunk:y.getUint32(L+4),sampleDescriptionIndex:y.getUint32(L+8)});return S},stsd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleDescriptions:Si(f.subarray(8))}},stsz:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleSize:y.getUint32(4),entries:[]},S;for(S=12;S<f.byteLength;S+=4)_.entries.push(y.getUint32(S));return _},stts:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={version:f[0],flags:new Uint8Array(f.subarray(1,4)),timeToSamples:[]},S=y.getUint32(4),L;for(L=8;S;L+=8,S--)_.timeToSamples.push({sampleCount:y.getUint32(L),sampleDelta:y.getUint32(L+4)});return _},styp:function(f){return en.ftyp(f)},tfdt:ns,tfhd:vr,tkhd:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_=4,S={version:y.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};return S.version===1?(_+=4,S.creationTime=Yi(y.getUint32(_)),_+=8,S.modificationTime=Yi(y.getUint32(_)),_+=4,S.trackId=y.getUint32(_),_+=4,_+=8,S.duration=y.getUint32(_)):(S.creationTime=Yi(y.getUint32(_)),_+=4,S.modificationTime=Yi(y.getUint32(_)),_+=4,S.trackId=y.getUint32(_),_+=4,_+=4,S.duration=y.getUint32(_)),_+=4,_+=2*4,S.layer=y.getUint16(_),_+=2,S.alternateGroup=y.getUint16(_),_+=2,S.volume=y.getUint8(_)+y.getUint8(_+1)/8,_+=2,_+=2,S.matrix=new Uint32Array(f.subarray(_,_+9*4)),_+=9*4,S.width=y.getUint16(_)+y.getUint16(_+2)/65536,_+=4,S.height=y.getUint16(_)+y.getUint16(_+2)/65536,S},traf:function(f){return{boxes:Si(f)}},trak:function(f){return{boxes:Si(f)}},trex:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:y.getUint32(4),defaultSampleDescriptionIndex:y.getUint32(8),defaultSampleDuration:y.getUint32(12),defaultSampleSize:y.getUint32(16),sampleDependsOn:f[20]&3,sampleIsDependedOn:(f[21]&192)>>6,sampleHasRedundancy:(f[21]&48)>>4,samplePaddingValue:(f[21]&14)>>1,sampleIsDifferenceSample:!!(f[21]&1),sampleDegradationPriority:y.getUint16(22)}},trun:_n,"url ":function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4))}},vmhd:function(f){var y=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),graphicsmode:y.getUint16(4),opcolor:new Uint16Array([y.getUint16(6),y.getUint16(8),y.getUint16(10)])}}};Si=function(f){for(var y=0,_=[],S,L,N,te,ie,ae=new ArrayBuffer(f.length),ce=new Uint8Array(ae),Te=0;Te<f.length;++Te)ce[Te]=f[Te];for(S=new DataView(ae);y<f.byteLength;)L=S.getUint32(y),N=ir(f.subarray(y+4,y+8)),te=L>1?y+L:f.byteLength,ie=(en[N]||function(Oe){return{data:Oe}})(f.subarray(y+8,te)),ie.size=L,ie.type=N,_.push(ie),y=te;return _},br=function(f,y){var _;return y=y||0,_=new Array(y*2+1).join(" "),f.map(function(S,L){return _+S.type+`
`+Object.keys(S).filter(function(N){return N!=="type"&&N!=="boxes"}).map(function(N){var te=_+"  "+N+": ",ie=S[N];if(ie instanceof Uint8Array||ie instanceof Uint32Array){var ae=Array.prototype.slice.call(new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength)).map(function(ce){return" "+("00"+ce.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return ae?ae.length===1?te+"<"+ae.join("").slice(1)+">":te+`<
`+ae.map(function(ce){return _+"  "+ce}).join(`
`)+`
`+_+"  >":te+"<>"}return te+JSON.stringify(ie,null,2).split(`
`).map(function(ce,Te){return Te===0?ce:_+"  "+ce}).join(`
`)}).join(`
`)+(S.boxes?`
`+br(S.boxes,y+1):"")}).join(`
`)};var cl={inspect:Si,textify:br,parseType:ir,findBox:wa,parseTraf:en.traf,parseTfdt:en.tfdt,parseHdlr:en.hdlr,parseTfhd:en.tfhd,parseTrun:en.trun,parseSidx:en.sidx},yo=function(f){for(var y=0,_=String.fromCharCode(f[y]),S="";_!=="\0";)S+=_,y++,_=String.fromCharCode(f[y]);return S+=_,S},dl={uint8ToCString:yo},ne=dl.uint8ToCString,ye=r.getUint64,Ie=function(f){var y=4,_=f[0],S,L,N,te,ie,ae,ce,Te;if(_===0){S=ne(f.subarray(y)),y+=S.length,L=ne(f.subarray(y)),y+=L.length;var Oe=new DataView(f.buffer);N=Oe.getUint32(y),y+=4,ie=Oe.getUint32(y),y+=4,ae=Oe.getUint32(y),y+=4,ce=Oe.getUint32(y),y+=4}else if(_===1){var Oe=new DataView(f.buffer);N=Oe.getUint32(y),y+=4,te=ye(f.subarray(y)),y+=8,ae=Oe.getUint32(y),y+=4,ce=Oe.getUint32(y),y+=4,S=ne(f.subarray(y)),y+=S.length,L=ne(f.subarray(y)),y+=L.length}Te=new Uint8Array(f.subarray(y,f.byteLength));var ut={scheme_id_uri:S,value:L,timescale:N||1,presentation_time:te,presentation_time_delta:ie,event_duration:ae,id:ce,message_data:Te};return Be(_,ut)?ut:void 0},Le=function(f,y,_,S){return f||f===0?f/y:S+_/y},Be=function(f,y){var _=y.scheme_id_uri!=="\0",S=f===0&&ot(y.presentation_time_delta)&&_,L=f===1&&ot(y.presentation_time)&&_;return!(f>1)&&S||L},ot=function(f){return f!==void 0||f!==null},ht={parseEmsgBox:Ie,scaleTime:Le},yt;typeof window<"u"?yt=window:typeof s<"u"?yt=s:typeof self<"u"?yt=self:yt={};var dt=yt,Ut=Fn.toUnsigned,kt=Fn.toHexString,mt=ys,$t=Os,It=ht,ti=vr,Xi=_n,Fi=ns,Es=r.getUint64,Ns,sr,Gi,Ad,Cd,bn,$p,hl=dt,Bp=ya.parseId3Frames;Ns=function(f){var y={},_=mt(f,["moov","trak"]);return _.reduce(function(S,L){var N,te,ie,ae,ce;return N=mt(L,["tkhd"])[0],!N||(te=N[0],ie=te===0?12:20,ae=Ut(N[ie]<<24|N[ie+1]<<16|N[ie+2]<<8|N[ie+3]),ce=mt(L,["mdia","mdhd"])[0],!ce)?null:(te=ce[0],ie=te===0?12:20,S[ae]=Ut(ce[ie]<<24|ce[ie+1]<<16|ce[ie+2]<<8|ce[ie+3]),S)},y)},sr=function(f,y){var _;_=mt(y,["moof","traf"]);var S=_.reduce(function(L,N){var te=mt(N,["tfhd"])[0],ie=Ut(te[4]<<24|te[5]<<16|te[6]<<8|te[7]),ae=f[ie]||9e4,ce=mt(N,["tfdt"])[0],Te=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),Oe;ce[0]===1?Oe=Es(ce.subarray(4,12)):Oe=Te.getUint32(4);let ut;return typeof Oe=="bigint"?ut=Oe/hl.BigInt(ae):typeof Oe=="number"&&!isNaN(Oe)&&(ut=Oe/ae),ut<Number.MAX_SAFE_INTEGER&&(ut=Number(ut)),ut<L&&(L=ut),L},1/0);return typeof S=="bigint"||isFinite(S)?S:0},Gi=function(f,y){var _=mt(y,["moof","traf"]),S=0,L=0,N;if(_&&_.length){var te=mt(_[0],["tfhd"])[0],ie=mt(_[0],["trun"])[0],ae=mt(_[0],["tfdt"])[0];if(te){var ce=ti(te);N=ce.trackId}if(ae){var Te=Fi(ae);S=Te.baseMediaDecodeTime}if(ie){var Oe=Xi(ie);Oe.samples&&Oe.samples.length&&(L=Oe.samples[0].compositionTimeOffset||0)}}var ut=f[N]||9e4;typeof S=="bigint"&&(L=hl.BigInt(L),ut=hl.BigInt(ut));var He=(S+L)/ut;return typeof He=="bigint"&&He<Number.MAX_SAFE_INTEGER&&(He=Number(He)),He},Ad=function(f){var y=mt(f,["moov","trak"]),_=[];return y.forEach(function(S){var L=mt(S,["mdia","hdlr"]),N=mt(S,["tkhd"]);L.forEach(function(te,ie){var ae=$t(te.subarray(8,12)),ce=N[ie],Te,Oe,ut;ae==="vide"&&(Te=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),Oe=Te.getUint8(0),ut=Oe===0?Te.getUint32(12):Te.getUint32(20),_.push(ut))})}),_},bn=function(f){var y=f[0],_=y===0?12:20;return Ut(f[_]<<24|f[_+1]<<16|f[_+2]<<8|f[_+3])},Cd=function(f){var y=mt(f,["moov","trak"]),_=[];return y.forEach(function(S){var L={},N=mt(S,["tkhd"])[0],te,ie;N&&(te=new DataView(N.buffer,N.byteOffset,N.byteLength),ie=te.getUint8(0),L.id=ie===0?te.getUint32(12):te.getUint32(20));var ae=mt(S,["mdia","hdlr"])[0];if(ae){var ce=$t(ae.subarray(8,12));ce==="vide"?L.type="video":ce==="soun"?L.type="audio":L.type=ce}var Te=mt(S,["mdia","minf","stbl","stsd"])[0];if(Te){var Oe=Te.subarray(8);L.codec=$t(Oe.subarray(4,8));var ut=mt(Oe,[L.codec])[0],He,Dt;ut&&(/^[asm]vc[1-9]$/i.test(L.codec)?(He=ut.subarray(78),Dt=$t(He.subarray(4,8)),Dt==="avcC"&&He.length>11?(L.codec+=".",L.codec+=kt(He[9]),L.codec+=kt(He[10]),L.codec+=kt(He[11])):L.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(L.codec)?(He=ut.subarray(28),Dt=$t(He.subarray(4,8)),Dt==="esds"&&He.length>20&&He[19]!==0?(L.codec+="."+kt(He[19]),L.codec+="."+kt(He[20]>>>2&63).replace(/^0/,"")):L.codec="mp4a.40.2"):L.codec=L.codec.toLowerCase())}var Ot=mt(S,["mdia","mdhd"])[0];Ot&&(L.timescale=bn(Ot)),_.push(L)}),_},$p=function(f,y=0){var _=mt(f,["emsg"]);return _.map(S=>{var L=It.parseEmsgBox(new Uint8Array(S)),N=Bp(L.message_data);return{cueTime:It.scaleTime(L.presentation_time,L.timescale,L.presentation_time_delta,y),duration:It.scaleTime(L.event_duration,L.timescale),frames:N}})};var vo={findBox:mt,parseType:$t,timescale:Ns,startTime:sr,compositionStartTime:Gi,videoTrackIds:Ad,tracks:Cd,getTimescaleFromMediaHeader:bn,getEmsgID3:$p};let{parseTrun:Up}=cl,{findBox:wd}=vo;var Id=dt,Hp=function(f){var y=wd(f,["moof","traf"]),_=wd(f,["mdat"]),S=[];return _.forEach(function(L,N){var te=y[N];S.push({mdat:L,traf:te})}),S},Vp=function(f,y,_){var S=y,L=_.defaultSampleDuration||0,N=_.defaultSampleSize||0,te=_.trackId,ie=[];return f.forEach(function(ae){var ce=Up(ae),Te=ce.samples;Te.forEach(function(Oe){Oe.duration===void 0&&(Oe.duration=L),Oe.size===void 0&&(Oe.size=N),Oe.trackId=te,Oe.dts=S,Oe.compositionTimeOffset===void 0&&(Oe.compositionTimeOffset=0),typeof S=="bigint"?(Oe.pts=S+Id.BigInt(Oe.compositionTimeOffset),S+=Id.BigInt(Oe.duration)):(Oe.pts=S+Oe.compositionTimeOffset,S+=Oe.duration)}),ie=ie.concat(Te)}),ie},Dd={getMdatTrafPairs:Hp,parseSamples:Vp},jp=Ai.discardEmulationPreventionBytes,Gp=Xo.CaptionStream,Uu=ys,Hu=ns,qp=vr,{getMdatTrafPairs:fl,parseSamples:zp}=Dd,Ld=function(f,y){for(var _=f,S=0;S<y.length;S++){var L=y[S];if(_<L.size)return L;_-=L.size}return null},kd=function(f,y,_){var S=new DataView(f.buffer,f.byteOffset,f.byteLength),L={logs:[],seiNals:[]},N,te,ie,ae;for(te=0;te+4<f.length;te+=ie)if(ie=S.getUint32(te),te+=4,!(ie<=0))switch(f[te]&31){case 6:var ce=f.subarray(te+1,te+1+ie),Te=Ld(te,y);if(N={nalUnitType:"sei_rbsp",size:ie,data:ce,escapedRBSP:jp(ce),trackId:_},Te)N.pts=Te.pts,N.dts=Te.dts,ae=Te;else if(ae)N.pts=ae.pts,N.dts=ae.dts;else{L.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+te+" for trackId "+_+". See mux.js#223."});break}L.seiNals.push(N);break}return L},To=function(f,y){var _={},S=fl(f);return S.forEach(function(L){var N=L.mdat,te=L.traf,ie=Uu(te,["tfhd"]),ae=qp(ie[0]),ce=ae.trackId,Te=Uu(te,["tfdt"]),Oe=Te.length>0?Hu(Te[0]).baseMediaDecodeTime:0,ut=Uu(te,["trun"]),He,Dt;y===ce&&ut.length>0&&(He=zp(ut,Oe,ae),Dt=kd(N,He,ce),_[ce]||(_[ce]={seiNals:[],logs:[]}),_[ce].seiNals=_[ce].seiNals.concat(Dt.seiNals),_[ce].logs=_[ce].logs.concat(Dt.logs))}),_},Vu=function(f,y,_){var S;if(y===null)return null;S=To(f,y);var L=S[y]||{};return{seiNals:L.seiNals,logs:L.logs,timescale:_}},ju=function(){var f=!1,y,_,S,L,N,te;this.isInitialized=function(){return f},this.init=function(ie){y=new Gp,f=!0,te=ie?ie.isPartial:!1,y.on("data",function(ae){ae.startTime=ae.startPts/L,ae.endTime=ae.endPts/L,N.captions.push(ae),N.captionStreams[ae.stream]=!0}),y.on("log",function(ae){N.logs.push(ae)})},this.isNewInit=function(ie,ae){return ie&&ie.length===0||ae&&typeof ae=="object"&&Object.keys(ae).length===0?!1:S!==ie[0]||L!==ae[S]},this.parse=function(ie,ae,ce){var Te;if(this.isInitialized()){if(!ae||!ce)return null;if(this.isNewInit(ae,ce))S=ae[0],L=ce[S];else if(S===null||!L)return _.push(ie),null}else return null;for(;_.length>0;){var Oe=_.shift();this.parse(Oe,ae,ce)}return Te=Vu(ie,S,L),Te&&Te.logs&&(N.logs=N.logs.concat(Te.logs)),Te===null||!Te.seiNals?N.logs.length?{logs:N.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Te.seiNals),this.flushStream(),N)},this.pushNals=function(ie){if(!this.isInitialized()||!ie||ie.length===0)return null;ie.forEach(function(ae){y.push(ae)})},this.flushStream=function(){if(!this.isInitialized())return null;te?y.partialFlush():y.flush()},this.clearParsedCaptions=function(){N.captions=[],N.captionStreams={},N.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;y.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){_=[],S=null,L=null,N?this.clearParsedCaptions():N={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Wp=ju;let{parseTfdt:Kp}=cl,Er=ys,{getTimescaleFromMediaHeader:Yp}=vo,{parseSamples:Xp,getMdatTrafPairs:Qp}=Dd;var Rd=function(){let f=9e4;this.init=function(y){let _=Er(y,["moov","trak","mdia","mdhd"])[0];_&&(f=Yp(_))},this.parseSegment=function(y){let _=[],S=Qp(y),L=0;return S.forEach(function(N){let te=N.mdat,ie=N.traf,ae=Er(ie,["tfdt"])[0],ce=Er(ie,["tfhd"])[0],Te=Er(ie,["trun"]);if(ae&&(L=Kp(ae).baseMediaDecodeTime),Te.length&&ce){let Oe=Xp(Te,L,ce),ut=0;Oe.forEach(function(He){let Dt="utf-8",Ot=new TextDecoder(Dt),qi=te.slice(ut,ut+He.size);if(Er(qi,["vtte"])[0]){ut+=He.size;return}Er(qi,["vttc"]).forEach(function(La){let ta=Er(La,["payl"])[0],ka=Er(La,["sttg"])[0],En=He.pts/f,bo=(He.pts+He.duration)/f,ri,Eo;if(ta)try{ri=Ot.decode(ta)}catch(tn){console.error(tn)}if(ka)try{Eo=Ot.decode(ka)}catch(tn){console.error(tn)}He.duration&&ri&&_.push({cueText:ri,start:En,end:bo,settings:Eo})}),ut+=He.size})}}),_}},Gu=gn,Pd=function(f){var y=f[1]&31;return y<<=8,y|=f[2],y},pl=function(f){return!!(f[1]&64)},gl=function(f){var y=0;return(f[3]&48)>>>4>1&&(y+=f[4]+1),y},Jp=function(f,y){var _=Pd(f);return _===0?"pat":_===y?"pmt":y?"pes":null},Zp=function(f){var y=pl(f),_=4+gl(f);return y&&(_+=f[_]+1),(f[_+10]&31)<<8|f[_+11]},ea=function(f){var y={},_=pl(f),S=4+gl(f);if(_&&(S+=f[S]+1),!!(f[S+5]&1)){var L,N,te;L=(f[S+1]&15)<<8|f[S+2],N=3+L-4,te=(f[S+10]&15)<<8|f[S+11];for(var ie=12+te;ie<N;){var ae=S+ie;y[(f[ae+1]&31)<<8|f[ae+2]]=f[ae],ie+=((f[ae+3]&15)<<8|f[ae+4])+5}return y}},eg=function(f,y){var _=Pd(f),S=y[_];switch(S){case Gu.H264_STREAM_TYPE:return"video";case Gu.ADTS_STREAM_TYPE:return"audio";case Gu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},tg=function(f){var y=pl(f);if(!y)return null;var _=4+gl(f);if(_>=f.byteLength)return null;var S=null,L;return L=f[_+7],L&192&&(S={},S.pts=(f[_+9]&14)<<27|(f[_+10]&255)<<20|(f[_+11]&254)<<12|(f[_+12]&255)<<5|(f[_+13]&254)>>>3,S.pts*=4,S.pts+=(f[_+13]&6)>>>1,S.dts=S.pts,L&64&&(S.dts=(f[_+14]&14)<<27|(f[_+15]&255)<<20|(f[_+16]&254)<<12|(f[_+17]&255)<<5|(f[_+18]&254)>>>3,S.dts*=4,S.dts+=(f[_+18]&6)>>>1)),S},qu=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ig=function(f){for(var y=4+gl(f),_=f.subarray(y),S=0,L=0,N=!1,te;L<_.byteLength-3;L++)if(_[L+2]===1){S=L+5;break}for(;S<_.byteLength;)switch(_[S]){case 0:if(_[S-1]!==0){S+=2;break}else if(_[S-2]!==0){S++;break}L+3!==S-2&&(te=qu(_[L+3]&31),te==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0));do S++;while(_[S]!==1&&S<_.length);L=S-2,S+=3;break;case 1:if(_[S-1]!==0||_[S-2]!==0){S+=3;break}te=qu(_[L+3]&31),te==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0),L=S-2,S+=3;break;default:S+=3;break}return _=_.subarray(L),S-=L,L=0,_&&_.byteLength>3&&(te=qu(_[L+3]&31),te==="slice_layer_without_partitioning_rbsp_idr"&&(N=!0)),N},sg={parseType:Jp,parsePat:Zp,parsePmt:ea,parsePayloadUnitStartIndicator:pl,parsePesType:eg,parsePesTime:tg,videoPacketContainsKeyFrame:ig},_o=gn,Ia=ro.handleRollover,ii={};ii.ts=sg,ii.aac=er;var nr=de.ONE_SECOND_IN_TS,vs=188,Bn=71,Od=function(f,y){for(var _=0,S=vs,L,N;S<f.byteLength;){if(f[_]===Bn&&f[S]===Bn){switch(L=f.subarray(_,S),N=ii.ts.parseType(L,y.pid),N){case"pat":y.pid=ii.ts.parsePat(L);break;case"pmt":var te=ii.ts.parsePmt(L);y.table=y.table||{},Object.keys(te).forEach(function(ie){y.table[ie]=te[ie]});break}_+=vs,S+=vs;continue}_++,S++}},Md=function(f,y,_){for(var S=0,L=vs,N,te,ie,ae,ce,Te=!1;L<=f.byteLength;){if(f[S]===Bn&&(f[L]===Bn||L===f.byteLength)){switch(N=f.subarray(S,L),te=ii.ts.parseType(N,y.pid),te){case"pes":ie=ii.ts.parsePesType(N,y.table),ae=ii.ts.parsePayloadUnitStartIndicator(N),ie==="audio"&&ae&&(ce=ii.ts.parsePesTime(N),ce&&(ce.type="audio",_.audio.push(ce),Te=!0));break}if(Te)break;S+=vs,L+=vs;continue}S++,L++}for(L=f.byteLength,S=L-vs,Te=!1;S>=0;){if(f[S]===Bn&&(f[L]===Bn||L===f.byteLength)){switch(N=f.subarray(S,L),te=ii.ts.parseType(N,y.pid),te){case"pes":ie=ii.ts.parsePesType(N,y.table),ae=ii.ts.parsePayloadUnitStartIndicator(N),ie==="audio"&&ae&&(ce=ii.ts.parsePesTime(N),ce&&(ce.type="audio",_.audio.push(ce),Te=!0));break}if(Te)break;S-=vs,L-=vs;continue}S--,L--}},ng=function(f,y,_){for(var S=0,L=vs,N,te,ie,ae,ce,Te,Oe,ut,He=!1,Dt={data:[],size:0};L<f.byteLength;){if(f[S]===Bn&&f[L]===Bn){switch(N=f.subarray(S,L),te=ii.ts.parseType(N,y.pid),te){case"pes":if(ie=ii.ts.parsePesType(N,y.table),ae=ii.ts.parsePayloadUnitStartIndicator(N),ie==="video"&&(ae&&!He&&(ce=ii.ts.parsePesTime(N),ce&&(ce.type="video",_.video.push(ce),He=!0)),!_.firstKeyFrame)){if(ae&&Dt.size!==0){for(Te=new Uint8Array(Dt.size),Oe=0;Dt.data.length;)ut=Dt.data.shift(),Te.set(ut,Oe),Oe+=ut.byteLength;if(ii.ts.videoPacketContainsKeyFrame(Te)){var Ot=ii.ts.parsePesTime(Te);Ot?(_.firstKeyFrame=Ot,_.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Dt.size=0}Dt.data.push(N),Dt.size+=N.byteLength}break}if(He&&_.firstKeyFrame)break;S+=vs,L+=vs;continue}S++,L++}for(L=f.byteLength,S=L-vs,He=!1;S>=0;){if(f[S]===Bn&&f[L]===Bn){switch(N=f.subarray(S,L),te=ii.ts.parseType(N,y.pid),te){case"pes":ie=ii.ts.parsePesType(N,y.table),ae=ii.ts.parsePayloadUnitStartIndicator(N),ie==="video"&&ae&&(ce=ii.ts.parsePesTime(N),ce&&(ce.type="video",_.video.push(ce),He=!0));break}if(He)break;S-=vs,L-=vs;continue}S--,L--}},Da=function(f,y){if(f.audio&&f.audio.length){var _=y;(typeof _>"u"||isNaN(_))&&(_=f.audio[0].dts),f.audio.forEach(function(N){N.dts=Ia(N.dts,_),N.pts=Ia(N.pts,_),N.dtsTime=N.dts/nr,N.ptsTime=N.pts/nr})}if(f.video&&f.video.length){var S=y;if((typeof S>"u"||isNaN(S))&&(S=f.video[0].dts),f.video.forEach(function(N){N.dts=Ia(N.dts,S),N.pts=Ia(N.pts,S),N.dtsTime=N.dts/nr,N.ptsTime=N.pts/nr}),f.firstKeyFrame){var L=f.firstKeyFrame;L.dts=Ia(L.dts,S),L.pts=Ia(L.pts,S),L.dtsTime=L.dts/nr,L.ptsTime=L.pts/nr}}},rg=function(f){for(var y=!1,_=0,S=null,L=null,N=0,te=0,ie;f.length-te>=3;){var ae=ii.aac.parseType(f,te);switch(ae){case"timed-metadata":if(f.length-te<10){y=!0;break}if(N=ii.aac.parseId3TagSize(f,te),N>f.length){y=!0;break}L===null&&(ie=f.subarray(te,te+N),L=ii.aac.parseAacTimestamp(ie)),te+=N;break;case"audio":if(f.length-te<7){y=!0;break}if(N=ii.aac.parseAdtsSize(f,te),N>f.length){y=!0;break}S===null&&(ie=f.subarray(te,te+N),S=ii.aac.parseSampleRate(ie)),_++,te+=N;break;default:te++;break}if(y)return null}if(S===null||L===null)return null;var ce=nr/S,Te={audio:[{type:"audio",dts:L,pts:L},{type:"audio",dts:L+_*1024*ce,pts:L+_*1024*ce}]};return Te},zu=function(f){var y={pid:null,table:null},_={};Od(f,y);for(var S in y.table)if(y.table.hasOwnProperty(S)){var L=y.table[S];switch(L){case _o.H264_STREAM_TYPE:_.video=[],ng(f,y,_),_.video.length===0&&delete _.video;break;case _o.ADTS_STREAM_TYPE:_.audio=[],Md(f,y,_),_.audio.length===0&&delete _.audio;break}}return _},ag=function(f,y){var _=ii.aac.isLikelyAacData(f),S;return _?S=rg(f):S=zu(f),!S||!S.audio&&!S.video?null:(Da(S,y),S)},Nd={inspect:ag,parseAudioPes_:Md};let dT=function(f,y){y.on("data",function(_){let S=_.initSegment;_.initSegment={data:S.buffer,byteOffset:S.byteOffset,byteLength:S.byteLength};let L=_.data;_.data=L.buffer,f.postMessage({action:"data",segment:_,byteOffset:L.byteOffset,byteLength:L.byteLength},[_.data])}),y.on("done",function(_){f.postMessage({action:"done"})}),y.on("gopInfo",function(_){f.postMessage({action:"gopInfo",gopInfo:_})}),y.on("videoSegmentTimingInfo",function(_){let S={start:{decode:de.videoTsToSeconds(_.start.dts),presentation:de.videoTsToSeconds(_.start.pts)},end:{decode:de.videoTsToSeconds(_.end.dts),presentation:de.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:de.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(S.prependedContentDuration=de.videoTsToSeconds(_.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:S})}),y.on("audioSegmentTimingInfo",function(_){let S={start:{decode:de.videoTsToSeconds(_.start.dts),presentation:de.videoTsToSeconds(_.start.pts)},end:{decode:de.videoTsToSeconds(_.end.dts),presentation:de.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:de.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(S.prependedContentDuration=de.videoTsToSeconds(_.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:S})}),y.on("id3Frame",function(_){f.postMessage({action:"id3Frame",id3Frame:_})}),y.on("caption",function(_){f.postMessage({action:"caption",caption:_})}),y.on("trackinfo",function(_){f.postMessage({action:"trackinfo",trackInfo:_})}),y.on("audioTimingInfo",function(_){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:de.videoTsToSeconds(_.start),end:de.videoTsToSeconds(_.end)}})}),y.on("videoTimingInfo",function(_){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:de.videoTsToSeconds(_.start),end:de.videoTsToSeconds(_.end)}})}),y.on("log",function(_){f.postMessage({action:"log",log:_})})};class og{constructor(y,_){this.options=_||{},this.self=y,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Zr.Transmuxer(this.options),dT(this.self,this.transmuxer)}pushMp4Captions(y){this.captionParser||(this.captionParser=new Wp,this.captionParser.init());let _=new Uint8Array(y.data,y.byteOffset,y.byteLength),S=this.captionParser.parse(_,y.trackIds,y.timescales);this.self.postMessage({action:"mp4Captions",captions:S&&S.captions||[],logs:S&&S.logs||[],data:_.buffer},[_.buffer])}initMp4WebVttParser(y){this.webVttParser||(this.webVttParser=new Rd);let _=new Uint8Array(y.data,y.byteOffset,y.byteLength);this.webVttParser.init(_)}getMp4WebVttText(y){this.webVttParser||(this.webVttParser=new Rd);let _=new Uint8Array(y.data,y.byteOffset,y.byteLength),S=this.webVttParser.parseSegment(_);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:S||[],data:_.buffer},[_.buffer])}probeMp4StartTime({timescales:y,data:_}){let S=vo.startTime(y,_);this.self.postMessage({action:"probeMp4StartTime",startTime:S,data:_},[_.buffer])}probeMp4Tracks({data:y}){let _=vo.tracks(y);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:y},[y.buffer])}probeEmsgID3({data:y,offset:_}){let S=vo.getEmsgID3(y,_);this.self.postMessage({action:"probeEmsgID3",id3Frames:S,emsgData:y},[y.buffer])}probeTs({data:y,baseStartTime:_}){let S=typeof _=="number"&&!isNaN(_)?_*de.ONE_SECOND_IN_TS:void 0,L=Nd.inspect(y,S),N=null;L&&(N={hasVideo:L.video&&L.video.length===2||!1,hasAudio:L.audio&&L.audio.length===2||!1},N.hasVideo&&(N.videoStart=L.video[0].ptsTime),N.hasAudio&&(N.audioStart=L.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:N,data:y},[y.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(y){let _=new Uint8Array(y.data,y.byteOffset,y.byteLength);this.transmuxer.push(_)}reset(){this.transmuxer.reset()}setTimestampOffset(y){let _=y.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(de.secondsToVideoTs(_)))}setAudioAppendStart(y){this.transmuxer.setAudioAppendStart(Math.ceil(de.secondsToVideoTs(y.appendStart)))}setRemux(y){this.transmuxer.setRemux(y.remux)}flush(y){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(y){this.transmuxer.alignGopsWith(y.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new og(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new og(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}})),dR=Px(cR),hR=(s,e,t)=>{let{type:i,initSegment:n,captions:r,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=s.data.segment;e.buffer.push({captions:r,captionStreams:a,metadata:o});let c=s.data.segment.boxes||{data:s.data.segment.data},h={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},fR=({transmuxedData:s,callback:e})=>{s.buffer=[],e(s)},pR=(s,e)=>{e.gopInfo=s.data.gopInfo},Nx=s=>{let{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:n,remux:r,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:g,onCaptions:m,onDone:v,onEndedTimeline:b,onTransmuxerLog:A,isEndOfTimeline:R,segment:F,triggerSegmentEventFn:O}=s,H={buffer:[]},W=R,E=Z=>{e.currentTransmux===s&&(Z.data.action==="data"&&hR(Z,H,a),Z.data.action==="trackinfo"&&o(Z.data.trackInfo),Z.data.action==="gopInfo"&&pR(Z,H),Z.data.action==="audioTimingInfo"&&l(Z.data.audioTimingInfo),Z.data.action==="videoTimingInfo"&&u(Z.data.videoTimingInfo),Z.data.action==="videoSegmentTimingInfo"&&c(Z.data.videoSegmentTimingInfo),Z.data.action==="audioSegmentTimingInfo"&&h(Z.data.audioSegmentTimingInfo),Z.data.action==="id3Frame"&&g([Z.data.id3Frame],Z.data.id3Frame.dispatchType),Z.data.action==="caption"&&m(Z.data.caption),Z.data.action==="endedtimeline"&&(W=!1,b()),Z.data.action==="log"&&A(Z.data.log),Z.data.type==="transmuxed"&&(W||(e.onmessage=null,fR({transmuxedData:H,callback:v}),Fx(e))))},X=()=>{let Z={message:"Received an error message from the transmuxer worker",metadata:{errorType:be.Error.StreamingFailedToTransmuxSegment,segmentInfo:Oo({segment:F})}};v(null,Z)};if(e.onmessage=E,e.onerror=X,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),t.byteLength){let Z=t instanceof ArrayBuffer?t:t.buffer,re=t instanceof ArrayBuffer?0:t.byteOffset;O({type:"segmenttransmuxingstart",segment:F}),e.postMessage({action:"push",data:Z,byteOffset:re,byteLength:t.byteLength},[Z])}R&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},Fx=s=>{s.currentTransmux=null,s.transmuxQueue.length&&(s.currentTransmux=s.transmuxQueue.shift(),typeof s.currentTransmux=="function"?s.currentTransmux():Nx(s.currentTransmux))},iS=(s,e)=>{s.postMessage({action:e}),Fx(s)},$x=(s,e)=>{if(!e.currentTransmux){e.currentTransmux=s,iS(e,s);return}e.transmuxQueue.push(iS.bind(null,e,s))},gR=s=>{$x("reset",s)},mR=s=>{$x("endTimeline",s)},Bx=s=>{if(!s.transmuxer.currentTransmux){s.transmuxer.currentTransmux=s,Nx(s);return}s.transmuxer.transmuxQueue.push(s)},yR=s=>{let e=new dR;e.currentTransmux=null,e.transmuxQueue=[];let t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:s}),e},Gm={reset:gR,endTimeline:mR,transmux:Bx,createTransmuxer:yR},Jl=function(s){let e=s.transmuxer,t=s.endAction||s.action,i=s.callback,n=Ci({},s,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===t&&(e.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,s.byteOffset||0,s.byteLength||a.data.data.byteLength),s.data&&(s.data=a.data.data)),i(a.data))};if(e.addEventListener("message",r),s.data){let a=s.data instanceof ArrayBuffer;n.byteOffset=a?0:s.data.byteOffset,n.byteLength=s.data.byteLength;let o=[a?s.data:s.data.buffer];e.postMessage(n,o)}else e.postMessage(n)},Mr={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Ux="wvtt",D0=s=>{s.forEach(e=>{e.abort()})},vR=s=>({bandwidth:s.bandwidth,bytesReceived:s.bytesReceived||0,roundTripTime:s.roundTripTime||0}),TR=s=>{let e=s.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=s.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},sy=(s,e)=>{let{requestType:t}=e,i=$o({requestType:t,request:e,error:s});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Mr.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Mr.ABORTED,xhr:e,metadata:i}:s?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Mr.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Mr.FAILURE,xhr:e,metadata:i}:null},sS=(s,e,t,i)=>(n,r)=>{let a=r.response,o=sy(n,r);if(o)return t(o,s);if(a.byteLength!==16)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Mr.FAILURE,xhr:r},s);let l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;let c={uri:r.uri};return i({type:"segmentkeyloadcomplete",segment:s,keyInfo:c}),t(null,s)},_R=(s,e)=>{e===Ux&&s.transmuxer.postMessage({action:"initMp4WebVttParser",data:s.map.bytes})},bR=(s,e,t)=>{e===Ux&&Jl({action:"getMp4WebVttText",data:s.bytes,transmuxer:s.transmuxer,callback:({data:i,mp4VttCues:n})=>{s.bytes=i,t(null,s,{mp4VttCues:n})}})},Hx=(s,e)=>{let t=ph(s.map.bytes);if(t!=="mp4"){let i=s.map.resolvedUri||s.map.uri,n=t||"unknown";return e({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${i}`,code:Mr.FAILURE,metadata:{mediaType:n}})}Jl({action:"probeMp4Tracks",data:s.map.bytes,transmuxer:s.transmuxer,callback:({tracks:i,data:n})=>(s.map.bytes=n,i.forEach(function(r){s.map.tracks=s.map.tracks||{},!s.map.tracks[r.type]&&(s.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(s.map.timescales=s.map.timescales||{},s.map.timescales[r.id]=r.timescale),r.type==="text"&&_R(s,r.codec))}),e(null))})},ER=({segment:s,finishProcessingFn:e,triggerSegmentEventFn:t})=>(i,n)=>{let r=sy(i,n);if(r)return e(r,s);let a=new Uint8Array(n.response);if(t({type:"segmentloaded",segment:s}),s.map.key)return s.map.encryptedBytes=a,e(null,s);s.map.bytes=a,Hx(s,function(o){if(o)return o.xhr=n,o.status=n.status,e(o,s);e(null,s)})},SR=({segment:s,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:i})=>(n,r)=>{let a=sy(n,r);if(a)return e(a,s);i({type:"segmentloaded",segment:s});let o=t==="arraybuffer"||!r.responseText?r.response:lR(r.responseText.substring(s.lastReachedChar||0));return s.stats=vR(r),s.key?s.encryptedBytes=new Uint8Array(o):s.bytes=new Uint8Array(o),e(null,s)},xR=({segment:s,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})=>{let v=s.map&&s.map.tracks||{},b=Boolean(v.audio&&v.video),A=i.bind(null,s,"audio","start"),R=i.bind(null,s,"audio","end"),F=i.bind(null,s,"video","start"),O=i.bind(null,s,"video","end"),H=()=>Bx({bytes:e,transmuxer:s.transmuxer,audioAppendStart:s.audioAppendStart,gopsToAlignWith:s.gopsToAlignWith,remux:b,onData:W=>{W.type=W.type==="combined"?"video":W.type,c(s,W)},onTrackInfo:W=>{t&&(b&&(W.isMuxed=!0),t(s,W))},onAudioTimingInfo:W=>{A&&typeof W.start<"u"&&(A(W.start),A=null),R&&typeof W.end<"u"&&R(W.end)},onVideoTimingInfo:W=>{F&&typeof W.start<"u"&&(F(W.start),F=null),O&&typeof W.end<"u"&&O(W.end)},onVideoSegmentTimingInfo:W=>{let E={pts:{start:W.start.presentation,end:W.end.presentation},dts:{start:W.start.decode,end:W.end.decode}};m({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:E}),n(W)},onAudioSegmentTimingInfo:W=>{let E={pts:{start:W.start.pts,end:W.end.pts},dts:{start:W.start.dts,end:W.end.dts}};m({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:E}),r(W)},onId3:(W,E)=>{a(s,W,E)},onCaptions:W=>{o(s,[W])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:g,onDone:(W,E)=>{!h||(W.type=W.type==="combined"?"video":W.type,m({type:"segmenttransmuxingcomplete",segment:s}),h(E,s,W))},segment:s,triggerSegmentEventFn:m});Jl({action:"probeTs",transmuxer:s.transmuxer,data:e,baseStartTime:s.baseStartTime,callback:W=>{s.bytes=e=W.data;let E=W.result;E&&(t(s,{hasAudio:E.hasAudio,hasVideo:E.hasVideo,isMuxed:b}),t=null),H()}})},Vx=({segment:s,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})=>{let v=new Uint8Array(e);if(_E(v)){s.isFmp4=!0;let{tracks:b}=s.map;if(b.text&&(!b.audio||!b.video)){c(s,{data:v,type:"text"}),bR(s,b.text.codec,h);return}let R={isFmp4:!0,hasVideo:!!b.video,hasAudio:!!b.audio};b.audio&&b.audio.codec&&b.audio.codec!=="enca"&&(R.audioCodec=b.audio.codec),b.video&&b.video.codec&&b.video.codec!=="encv"&&(R.videoCodec=b.video.codec),b.video&&b.audio&&(R.isMuxed=!0),t(s,R);let F=(O,H)=>{c(s,{data:v,type:R.hasAudio&&!R.isMuxed?"audio":"video"}),H&&H.length&&a(s,H),O&&O.length&&o(s,O),h(null,s,{})};Jl({action:"probeMp4StartTime",timescales:s.map.timescales,data:v,transmuxer:s.transmuxer,callback:({data:O,startTime:H})=>{e=O.buffer,s.bytes=v=O,R.hasAudio&&!R.isMuxed&&i(s,"audio","start",H),R.hasVideo&&i(s,"video","start",H),Jl({action:"probeEmsgID3",data:v,transmuxer:s.transmuxer,offset:H,callback:({emsgData:W,id3Frames:E})=>{if(e=W.buffer,s.bytes=v=W,!b.video||!W.byteLength||!s.transmuxer){F(void 0,E);return}Jl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:s.transmuxer,data:v,timescales:s.map.timescales,trackIds:[b.video.id],callback:X=>{e=X.data.buffer,s.bytes=v=X.data,X.logs.forEach(function(Z){g(si(Z,{stream:"mp4CaptionParser"}))}),F(X.captions,E)}})}})}});return}if(!s.transmuxer){h(null,s,{});return}if(typeof s.container>"u"&&(s.container=ph(v)),s.container!=="ts"&&s.container!=="aac"){t(s,{hasAudio:!1,hasVideo:!1}),h(null,s,{});return}xR({segment:s,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})},jx=function({id:s,key:e,encryptedBytes:t,decryptionWorker:i,segment:n,doneFn:r},a){let o=u=>{if(u.data.source===s){i.removeEventListener("message",o);let c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{let u="An error occurred in the decryption worker",c=Oo({segment:n}),h={message:u,metadata:{error:new Error(u),errorType:be.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};r(h,n)},i.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(wx({source:s,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},AR=({decryptionWorker:s,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})=>{m({type:"segmentdecryptionstart"}),jx({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:s,segment:e,doneFn:h},v=>{e.bytes=v,m({type:"segmentdecryptioncomplete",segment:e}),Vx({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})})},CR=({activeXhrs:s,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})=>{let v=0,b=!1;return(A,R)=>{if(!b){if(A)return b=!0,D0(s),h(A,R);if(v+=1,v===s.length){let F=function(){if(R.encryptedBytes)return AR({decryptionWorker:e,segment:R,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m});Vx({segment:R,bytes:R.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:g,triggerSegmentEventFn:m})};if(R.endOfAllRequests=Date.now(),R.map&&R.map.encryptedBytes&&!R.map.bytes)return m({type:"segmentdecryptionstart",segment:R}),jx({decryptionWorker:e,id:R.requestId+"-init",encryptedBytes:R.map.encryptedBytes,key:R.map.key,segment:R,doneFn:h},O=>{R.map.bytes=O,m({type:"segmentdecryptioncomplete",segment:R}),Hx(R,H=>{if(H)return D0(s),h(H,R);F()})});F()}}}},wR=({loadendState:s,abortFn:e})=>t=>{t.target.aborted&&e&&!s.calledAbortFn&&(e(),s.calledAbortFn=!0)},IR=({segment:s,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return s.stats=si(s.stats,TR(h)),!s.stats.firstBytesReceivedAt&&s.stats.bytesReceived&&(s.stats.firstBytesReceivedAt=Date.now()),e(h,s)},DR=({xhr:s,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:n,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:g,endedTimelineFn:m,dataFn:v,doneFn:b,onTransmuxerLog:A,triggerSegmentEventFn:R})=>{let F=[],O=CR({activeXhrs:F,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:g,endedTimelineFn:m,dataFn:v,doneFn:b,onTransmuxerLog:A,triggerSegmentEventFn:R});if(i.key&&!i.key.bytes){let Z=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&Z.push(i.map.key);let re=si(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),oe=sS(i,Z,O,R),ve={uri:i.key.resolvedUri};R({type:"segmentkeyloadstart",segment:i,keyInfo:ve});let Ce=s(re,oe);F.push(Ce)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){let Ce=si(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),we=sS(i,[i.map.key],O,R),Ge={uri:i.map.key.resolvedUri};R({type:"segmentkeyloadstart",segment:i,keyInfo:Ge});let Xe=s(Ce,we);F.push(Xe)}let re=si(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:I0(i.map),requestType:"segment-media-initialization"}),oe=ER({segment:i,finishProcessingFn:O,triggerSegmentEventFn:R});R({type:"segmentloadstart",segment:i});let ve=s(re,oe);F.push(ve)}let H=si(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:I0(i),requestType:"segment"}),W=SR({segment:i,finishProcessingFn:O,responseType:H.responseType,triggerSegmentEventFn:R});R({type:"segmentloadstart",segment:i});let E=s(H,W);E.addEventListener("progress",IR({segment:i,progressFn:r,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:g,endedTimelineFn:m,dataFn:v})),F.push(E);let X={};return F.forEach(Z=>{Z.addEventListener("loadend",wR({loadendState:X,abortFn:n}))}),()=>D0(F)},vh=Yn("PlaylistSelector"),nS=function(s){if(!s||!s.playlist)return;let e=s.playlist;return JSON.stringify({id:e.id,bandwidth:s.bandwidth,width:s.width,height:s.height,codecs:e.attributes&&e.attributes.CODECS||""})},Zl=function(s,e){if(!s)return"";let t=ge.default.getComputedStyle(s);return t?t[e]:""},eu=function(s,e){let t=s.slice();s.sort(function(i,n){let r=e(i,n);return r===0?t.indexOf(i)-t.indexOf(n):r})},ny=function(s,e){let t,i;return s.attributes.BANDWIDTH&&(t=s.attributes.BANDWIDTH),t=t||ge.default.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||ge.default.Number.MAX_VALUE,t-i},LR=function(s,e){let t,i;return s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width&&(t=s.attributes.RESOLUTION.width),t=t||ge.default.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||ge.default.Number.MAX_VALUE,t===i&&s.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?s.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i},Gx=function(s){let{main:e,bandwidth:t,playerWidth:i,playerHeight:n,playerObjectFit:r,limitRenditionByPlayerDimensions:a,playlistController:o}=s;if(!e)return;let l={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:a},u=e.playlists;dn.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(X=>{let Z,re=X.attributes&&X.attributes.RESOLUTION&&X.attributes.RESOLUTION.width,oe=X.attributes&&X.attributes.RESOLUTION&&X.attributes.RESOLUTION.height;return Z=X.attributes&&X.attributes.BANDWIDTH,Z=Z||ge.default.Number.MAX_VALUE,{bandwidth:Z,width:re,height:oe,playlist:X}});eu(c,(X,Z)=>X.bandwidth-Z.bandwidth),c=c.filter(X=>!dn.isIncompatible(X.playlist));let h=c.filter(X=>dn.isEnabled(X.playlist));h.length||(h=c.filter(X=>!dn.isDisabled(X.playlist)));let g=h.filter(X=>X.bandwidth*ls.BANDWIDTH_VARIANCE<t),m=g[g.length-1],v=g.filter(X=>X.bandwidth===m.bandwidth)[0];if(a===!1){let X=v||h[0]||c[0];if(X&&X.playlist){let Z="sortedPlaylistReps";return v&&(Z="bandwidthBestRep"),h[0]&&(Z="enabledPlaylistReps"),vh(`choosing ${nS(X)} using ${Z} with options`,l),X.playlist}return vh("could not choose a playlist with options",l),null}let b=g.filter(X=>X.width&&X.height);eu(b,(X,Z)=>X.width-Z.width);let A=b.filter(X=>X.width===i&&X.height===n);m=A[A.length-1];let R=A.filter(X=>X.bandwidth===m.bandwidth)[0],F,O,H;R||(F=b.filter(X=>r==="cover"?X.width>i&&X.height>n:X.width>i||X.height>n),O=F.filter(X=>X.width===F[0].width&&X.height===F[0].height),m=O[O.length-1],H=O.filter(X=>X.bandwidth===m.bandwidth)[0]);let W;if(o.leastPixelDiffSelector){let X=b.map(Z=>(Z.pixelDiff=Math.abs(Z.width-i)+Math.abs(Z.height-n),Z));eu(X,(Z,re)=>Z.pixelDiff===re.pixelDiff?re.bandwidth-Z.bandwidth:Z.pixelDiff-re.pixelDiff),W=X[0]}let E=W||H||R||v||h[0]||c[0];if(E&&E.playlist){let X="sortedPlaylistReps";return W?X="leastPixelDiffRep":H?X="resolutionPlusOneRep":R?X="resolutionBestRep":v?X="bandwidthBestRep":h[0]&&(X="enabledPlaylistReps"),vh(`choosing ${nS(E)} using ${X} with options`,l),E.playlist}return vh("could not choose a playlist with options",l),null},rS=function(){let s=this.useDevicePixelRatio&&ge.default.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),Gx({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(Zl(this.tech_.el(),"width"),10)*s,playerHeight:parseInt(Zl(this.tech_.el(),"height"),10)*s,playerObjectFit:this.usePlayerObjectFit?Zl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},kR=function(s){let e=-1,t=-1;if(s<0||s>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&ge.default.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=s*this.systemBandwidth+(1-s)*e,t=this.systemBandwidth),Gx({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(Zl(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(Zl(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?Zl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},RR=function(s){let{main:e,currentTime:t,bandwidth:i,duration:n,segmentDuration:r,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=s,u=e.playlists.filter(v=>!dn.isIncompatible(v)),c=u.filter(dn.isEnabled);c.length||(c=u.filter(v=>!dn.isDisabled(v)));let g=c.filter(dn.hasAttribute.bind(null,"BANDWIDTH")).map(v=>{let A=l.getSyncPoint(v,n,o,t)?1:2,F=dn.estimateSegmentRequestTime(r,i,v)*A-a;return{playlist:v,rebufferingImpact:F}}),m=g.filter(v=>v.rebufferingImpact<=0);return eu(m,(v,b)=>ny(b.playlist,v.playlist)),m.length?m[0]:(eu(g,(v,b)=>v.rebufferingImpact-b.rebufferingImpact),g[0]||null)},PR=function(){let s=this.playlists.main.playlists.filter(dn.isEnabled);return eu(s,(t,i)=>ny(t,i)),s.filter(t=>!!Rc(this.playlists.main,t).video)[0]||null},OR=s=>{let e=0,t;return s.bytes&&(t=new Uint8Array(s.bytes),s.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t};function qx(s){try{return new URL(s).pathname.split("/").slice(-2).join("/")}catch{return""}}var MR=function(s,e,t){if(!s[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);let n=e.textTracks().getTrackById(i);if(n)s[t]=n;else{let r=e.options_.vhs&&e.options_.vhs.captionServices||{},a=t,o=t,l=!1,u=r[i];u&&(a=u.label,o=u.language,l=u.default),s[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},NR=function({inbandTextTracks:s,captionArray:e,timestampOffset:t}){if(!e)return;let i=ge.default.WebKitDataCue||ge.default.VTTCue;e.forEach(n=>{let r=n.stream;n.content?n.content.forEach(a=>{let o=new i(n.startTime+t,n.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",s[r].addCue(o)}):s[r].addCue(new i(n.startTime+t,n.endTime+t,n.text))})},FR=function(s){Object.defineProperties(s.frame,{id:{get(){return be.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),s.value.key}},value:{get(){return be.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),s.value.data}},privateData:{get(){return be.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),s.value.data}}})},$R=({inbandTextTracks:s,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;let n=ge.default.WebKitDataCue||ge.default.VTTCue,r=s.metadataTrack_;if(!r||(e.forEach(c=>{let h=c.cueTime+t;typeof h!="number"||ge.default.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(g=>{let m=new n(h,h,g.value||g.url||g.data||"");m.frame=g,m.value=g,FR(m),r.addCue(m)})}),!r.cues||!r.cues.length))return;let a=r.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);let l=o.reduce((c,h)=>{let g=c[h.startTime]||[];return g.push(h),c[h.startTime]=g,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{let g=l[c],m=isFinite(i)?i:c,v=Number(u[h+1])||m;g.forEach(b=>{b.endTime=v})})},BR={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},UR=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),HR=({inbandTextTracks:s,dateRanges:e})=>{let t=s.metadataTrack_;if(!t)return;let i=ge.default.WebKitDataCue||ge.default.VTTCue;e.forEach(n=>{for(let r of Object.keys(n)){if(UR.has(r))continue;let a=new i(n.startTime,n.endTime,"");a.id=n.id,a.type="com.apple.quicktime.HLS",a.value={key:BR[r],data:n[r]},(r==="scte35Out"||r==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}n.processDateRange()})},aS=(s,e,t)=>{s.metadataTrack_||(s.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,be.browser.IS_ANY_SAFARI||(s.metadataTrack_.inBandMetadataTrackDispatchType=e))},wc=function(s,e,t){let i,n;if(!!t&&!!t.cues)for(i=t.cues.length;i--;)n=t.cues[i],n.startTime>=s&&n.endTime<=e&&t.removeCue(n)},VR=function(s){let e=s.cues;if(!e)return;let t={};for(let i=e.length-1;i>=0;i--){let n=e[i],r=`${n.startTime}-${n.endTime}-${n.text}`;t[r]?s.removeCue(n):t[r]=n}},jR=(s,e,t)=>{if(typeof e>"u"||e===null||!s.length)return[];let i=Math.ceil((e-t+3)*Va.ONE_SECOND_IN_TS),n;for(n=0;n<s.length&&!(s[n].pts>i);n++);return s.slice(n)},GR=(s,e,t)=>{if(!e.length)return s;if(t)return e.slice();let i=e[0].pts,n=0;for(n;n<s.length&&!(s[n].pts>=i);n++);return s.slice(0,n).concat(e)},qR=(s,e,t,i)=>{let n=Math.ceil((e-i)*Va.ONE_SECOND_IN_TS),r=Math.ceil((t-i)*Va.ONE_SECOND_IN_TS),a=s.slice(),o=s.length;for(;o--&&!(s[o].pts<=r););if(o===-1)return a;let l=o+1;for(;l--&&!(s[l].pts<=n););return l=Math.max(l,0),a.splice(l,o-l+1),a},zR=function(s,e){if(!s&&!e||!s&&e||s&&!e)return!1;if(s===e)return!0;let t=Object.keys(s).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n];if(r!==i[n]||s[r]!==e[r])return!1}return!0},WR=function(s,e,t){e=e||[];let i=[],n=0;for(let r=0;r<e.length;r++){let a=e[r];if(s===a.timeline&&(i.push(r),n+=a.duration,n>t))return r}return i.length===0?0:i[i.length-1]},Ac=1,KR=500,oS=s=>typeof s=="number"&&isFinite(s),Th=1/60,YR=(s,e,t)=>s!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,XR=(s,e,t)=>{let i=e-ls.BACK_BUFFER_LENGTH;s.length&&(i=Math.max(i,s.start(0)));let n=e-t;return Math.min(n,i)},Gl=s=>{let{startOfSegment:e,duration:t,segment:i,part:n,playlist:{mediaSequence:r,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=s,h=o.length-1,g="mediaIndex/partIndex increment";s.getMediaInfoForTime?g=`getMediaInfoForTime (${s.getMediaInfoForTime})`:s.isSyncRequest&&(g="getSyncSegmentCandidate (isSyncRequest)"),s.independent&&(g+=` with independent ${s.independent}`);let m=typeof u=="number",v=s.segment.uri?"segment":"pre-segment",b=m?ux({preloadSegment:i})-1:0;return`${v} [${r+l}/${r+h}]`+(m?` part [${u}/${b}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(m?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${g}] playlist [${a}]`},lS=s=>`${s}TimingInfo`,QR=({segmentTimeline:s,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:n})=>!n&&s===e?null:s<e?t:i.length?i.end(i.length-1):t,L0=({timelineChangeController:s,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:n})=>{if(e===t)return!1;if(i==="audio"){let r=s.lastTimelineChange({type:"main"});return!r||r.to!==t}if(i==="main"&&n){let r=s.pendingTimelineChange({type:"audio"});return!(r&&r.to===t)}return!1},JR=s=>{if(!s)return!1;let e=s.pendingTimelineChange({type:"audio"}),t=s.pendingTimelineChange({type:"main"}),i=e&&t,n=i&&e.to!==t.to;return!!(i&&e.from!==-1&&t.from!==-1&&n)},ZR=s=>{let e=s.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=s.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},$a=s=>{let e=s.pendingSegment_;if(!e)return;if(L0({timelineChangeController:s.timelineChangeController_,currentTimeline:s.currentTimeline_,segmentTimeline:e.timeline,loaderType:s.loaderType_,audioDisabled:s.audioDisabled_})&&JR(s.timelineChangeController_)){if(ZR(s)){s.timelineChangeController_.trigger("audioTimelineBehind");return}s.timelineChangeController_.trigger("fixBadTimelineChange")}},eP=s=>{let e=0;return["video","audio"].forEach(function(t){let i=s[`${t}TimingInfo`];if(!i)return;let{start:n,end:r}=i,a;typeof n=="bigint"||typeof r=="bigint"?a=ge.default.BigInt(r)-ge.default.BigInt(n):typeof n=="number"&&typeof r=="number"&&(a=r-n),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},uS=({segmentDuration:s,maxDuration:e})=>s?Math.round(s)>e+Pr:!1,tP=(s,e)=>{if(e!=="hls")return null;let t=eP({audioTimingInfo:s.audioTimingInfo,videoTimingInfo:s.videoTimingInfo});if(!t)return null;let i=s.playlist.targetDuration,n=uS({segmentDuration:t,maxDuration:i*2}),r=uS({segmentDuration:t,maxDuration:i}),a=`Segment with index ${s.mediaIndex} from playlist ${s.playlist.id} has a duration of ${t} when the reported duration is ${s.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||r?{severity:n?"warn":"info",message:a}:null},Oo=({type:s,segment:e})=>{if(!e)return;let t=Boolean(e.key||e.map&&e.map.ke),i=Boolean(e.map&&!e.map.bytes),n=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:s||e.type,uri:e.resolvedUri||e.uri,start:n,duration:e.duration,isEncrypted:t,isMediaInitialization:i}},td=class extends be.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Yn(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():$a(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Ci({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():$a(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Ci({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():$a(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():$a(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Gm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ge.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ge.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Gm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){let e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return us();if(this.loaderType_==="main"){let{hasAudio:t,hasVideo:i,isMuxed:n}=e;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;let i=mf(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,t=!1){if(!e)return null;let i=Ix(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});let r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;let i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Vm(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}let a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{let o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){let l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(ge.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Gm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;let e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},n=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1,a=()=>{r--,r===0&&i()};(n||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,t,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=qR(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a));for(let o in this.inbandTextTracks_)wc(e,t,this.inbandTextTracks_[o]);wc(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&ge.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ge.default.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&ge.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ge.default.setTimeout(this.monitorBufferTick_.bind(this),KR)}fillBuffer_(){if(this.sourceUpdater_.updating())return;let e=this.chooseNextRequest_();if(!e)return;let t={segmentInfo:Oo({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;let n=typeof e=="number"&&t.segments[e],r=e+1===t.segments.length,a=!n||!n.parts||i+1===n.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){let e=this.buffered_(),t=Vm(e)||0,i=Z0(e,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);let o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=WR(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){let g=a[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=g.end?g.end:t,g.parts&&g.parts[m+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=m+1):o.mediaIndex=this.mediaIndex+1}else{let g,m,v,b=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${b}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){let A=this.getSyncInfoFromMediaSequenceSync_(b);if(!A){let R="No sync info found while using media sequence sync";return this.error({message:R,metadata:{errorType:be.Error.StreamingFailedToSelectNextSegment,error:new Error(R)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${A.start} --> ${A.end})`),g=A.segmentIndex,m=A.partIndex,v=A.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");let A=dn.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:b,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});g=A.segmentIndex,m=A.partIndex,v=A.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${b}`:`currentTime ${b}`,o.mediaIndex=g,o.startOfSegment=v,o.partIndex=m,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}let l=a[o.mediaIndex],u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);let c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){let g=a[o.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=g.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");let h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;let t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);let i=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!i)return null;if(!i.isAppended)return i;let n=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(e){let{independent:t,playlist:i,mediaIndex:n,startOfSegment:r,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[n],h=typeof o=="number"&&c.parts[o],g={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:h?o:null,isSyncRequest:a,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},m=typeof l<"u"?l:this.isPendingTimestampOffset_;g.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:m});let v=Vm(this.sourceUpdater_.audioBuffered());return typeof v=="number"&&(g.audioAppendStart=v-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(g.gopsToAlignWith=jR(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),g}timestampOffsetForSegment_(e){return QR(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;let t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=dn.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=Tk(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;let o=RR({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;let u=r-a-o.rebufferingImpact,c=.5;a<=Pr&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*ls.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Gl(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){let{hasAudio:i,hasVideo:n}=t,r={segmentInfo:Oo({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},zR(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():$a(this))))}handleTimingInfo_(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;let r=this.pendingSegment_,a=lS(t);r[a]=r[a]||{},r[a][i]=n,this.logger_(`timinginfo: ${t} - ${i} - ${n}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():$a(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}let n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(a=>{r[a.stream]=r[a.stream]||{startTime:1/0,captions:[],endTime:0};let o=r[a.stream];o.startTime=Math.min(o.startTime,a.startTime+n),o.endTime=Math.max(o.endTime,a.endTime+n),o.captions.push(a)}),Object.keys(r).forEach(a=>{let{startTime:o,endTime:l,captions:u}=r[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),MR(c,this.vhs_.tech_,a),wc(o,l,c[a]),NR({captionArray:u,inbandTextTracks:c,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){let e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){let e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;let e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!L0({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;let e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;let{hasAudio:i,hasVideo:n,isMuxed:r}=t;return!(n&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||L0({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){$a(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}let i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[lS(t.type)].start;else{let n=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&n&&n.hasVideo,a;r&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});let n=this.chooseNextRequest_();if(n.mediaIndex!==i.mediaIndex||n.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:n}){if(i){let r=mf(i);if(this.activeInitSegmentId_===r)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=r}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},n){let r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Mo(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Mo(a).join(", "));let o=r.length?r.start(0):0,l=r.length?r.end(r.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Ac&&c-u<=Ac){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${Mo(r).join(", ")}, video buffer: ${Mo(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));let g=this.currentTime_()-Ac;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${g}`),this.remove(0,g,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Ac}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=ge.default.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Ac*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},n){if(!!n){if(n.code===_x){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:be.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:n,bytes:r}){if(!r){let o=[n],l=n.byteLength;i&&(o.unshift(i),l+=i.byteLength),r=OR({bytes:l,segments:o})}let a={segmentInfo:Oo({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;let n=this.pendingSegment_.segment,r=`${e}TimingInfo`;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){let{type:i,data:n}=t;if(!n||!n.byteLength||i==="audio"&&this.audioDisabled_)return;let r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){$a(this),this.loadQueue_.push(()=>{let t=Ci({},e,{forceTimestampOffset:!0});Ci(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));let t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||n&&r;this.logger_(`Requesting
${qx(e.uri)}
${Gl(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=DR({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Gl(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{let m={segmentInfo:Oo({segment:l})};u&&(m.keyInfo=u),c&&(m.trackInfo=c),h&&(m.timingInfo=h),this.trigger({type:o,metadata:m})}})}trimBackBuffer_(e){let t=XR(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){let t=e.segment,i=e.part,n=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:n,isMediaInitialization:r},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){let l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Th){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Th}`);return}let i={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Mr.ABORTED)return;if(this.pause(),e.code===Mr.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}let n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=GR(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){let t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;let u=t.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==n+r?n:o.start}waitForAppendsToComplete_(e){let t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}let{hasAudio:i,hasVideo:n,isMuxed:r}=t,a=this.loaderType_==="main"&&n,o=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){let t=YR(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};let t=this.getMediaInfo_(),n=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!n||(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){let l={segmentInfo:Oo({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}let e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});let t=tP(e,this.sourceType_);if(t&&(t.severity==="warn"?be.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Gl(e)}`);return}this.logger_(`Appended ${Gl(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");let i=e.segment,n=e.part,r=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(r||a){this.logger_(`bad ${r?"segment":"part"} ${Gl(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Th){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Th}`);return}let t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;let t=e.segment,i=t.start,n=t.end;if(!oS(i)||!oS(n))return;wc(i,n,this.segmentMetadataTrack_);let r=ge.default.WebKitDataCue||ge.default.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},o=JSON.stringify(a),l=new r(i,n,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function ua(){}var zx=function(s){return typeof s!="string"?s:s.replace(/./,e=>e.toUpperCase())},iP=["video","audio"],k0=(s,e)=>{let t=e[`${s}Buffer`];return t&&t.updating||e.queuePending[s]},sP=(s,e)=>{for(let t=0;t<e.length;t++){let i=e[t];if(i.type==="mediaSource")return null;if(i.type===s)return t}return null},tu=(s,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),tu("audio",e),tu("video",e));return}if(s!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||k0(s,e))){if(i.type!==s){if(t=sP(s,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[s]=i,i.action(s,e),!i.doneFn){e.queuePending[s]=null,tu(s,e);return}}},Wx=(s,e)=>{let t=e[`${s}Buffer`],i=zx(s);!t||(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[s]=null,e[`${s}Buffer`]=null)},kr=(s,e)=>s&&e&&Array.prototype.indexOf.call(s.sourceBuffers,e)!==-1,An={appendBuffer:(s,e,t)=>(i,n)=>{let r=n[`${i}Buffer`];if(!!kr(n.mediaSource,r)){n.logger_(`Appending segment ${e.mediaIndex}'s ${s.length} bytes to ${i}Buffer`);try{r.appendBuffer(s)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===_x?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),n.queuePending[i]=null,t(a)}}},remove:(s,e)=>(t,i)=>{let n=i[`${t}Buffer`];if(!!kr(i.mediaSource,n)){i.logger_(`Removing ${s} to ${e} from ${t}Buffer`);try{n.remove(s,e)}catch{i.logger_(`Remove ${s} to ${e} from ${t}Buffer failed`)}}},timestampOffset:s=>(e,t)=>{let i=t[`${e}Buffer`];!kr(t.mediaSource,i)||(t.logger_(`Setting ${e}timestampOffset to ${s}`),i.timestampOffset=s)},callback:s=>(e,t)=>{s()},endOfStream:s=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${s||""})`);try{e.mediaSource.endOfStream(s)}catch(t){be.log.warn("Failed to call media source endOfStream",t)}}},duration:s=>e=>{e.logger_(`Setting mediaSource duration to ${s}`);try{e.mediaSource.duration=s}catch(t){be.log.warn("Failed to set media source duration",t)}},abort:()=>(s,e)=>{if(e.mediaSource.readyState!=="open")return;let t=e[`${s}Buffer`];if(!!kr(e.mediaSource,t)){e.logger_(`calling abort on ${s}Buffer`);try{t.abort()}catch(i){be.log.warn(`Failed to abort on ${s}Buffer`,i)}}},addSourceBuffer:(s,e)=>t=>{let i=zx(s),n=Do(e);t.logger_(`Adding ${s}Buffer with codec ${e} to mediaSource`);let r=t.mediaSource.addSourceBuffer(n);r.addEventListener("updateend",t[`on${i}UpdateEnd_`]),r.addEventListener("error",t[`on${i}Error_`]),t.codecs[s]=e,t[`${s}Buffer`]=r},removeSourceBuffer:s=>e=>{let t=e[`${s}Buffer`];if(Wx(s,e),!!kr(e.mediaSource,t)){e.logger_(`Removing ${s}Buffer with codec ${e.codecs[s]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){be.log.warn(`Failed to removeSourceBuffer ${s}Buffer`,i)}}},changeType:s=>(e,t)=>{let i=t[`${e}Buffer`],n=Do(s);if(!kr(t.mediaSource,i))return;let r=s.substring(0,s.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===r)return;let l={codecsChangeInfo:{from:a,to:s}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${s}`);try{i.changeType(n),t.codecs[e]=s}catch(u){l.errorType=be.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),be.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Cn=({type:s,sourceUpdater:e,action:t,doneFn:i,name:n})=>{e.queue.push({type:s,action:t,doneFn:i,name:n}),tu(s,e)},cS=(s,e)=>t=>{let i=e[`${s}Buffered`](),n=mk(i);if(e.logger_(`received "updateend" event for ${s} Source Buffer: `,n),e.queuePending[s]){let r=e.queuePending[s].doneFn;e.queuePending[s]=null,r&&r(e[`${s}Error_`])}tu(s,e)},yf=class extends be.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>tu("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Yn("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=cS("video",this),this.onAudioUpdateEnd_=cS("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Cn({type:"mediaSource",sourceUpdater:this,action:An.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Cn({type:e,sourceUpdater:this,action:An.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){be.log.error("removeSourceBuffer is not supported!");return}Cn({type:"mediaSource",sourceUpdater:this,action:An.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!be.browser.IS_FIREFOX&&ge.default.MediaSource&&ge.default.MediaSource.prototype&&typeof ge.default.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return ge.default.SourceBuffer&&ge.default.SourceBuffer.prototype&&typeof ge.default.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){be.log.error("changeType is not supported!");return}Cn({type:e,sourceUpdater:this,action:An.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{let i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){let{segmentInfo:i,type:n,bytes:r}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${r.length} until video append`);return}let a=t;if(Cn({type:n,sourceUpdater:this,action:An.appendBuffer(r,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;let o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return kr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:us()}videoBuffered(){return kr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:us()}buffered(){let e=kr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=kr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():vk(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=ua){Cn({type:"mediaSource",sourceUpdater:this,action:An.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=ua){typeof e!="string"&&(e=void 0),Cn({type:"mediaSource",sourceUpdater:this,action:An.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=ua){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Cn({type:"audio",sourceUpdater:this,action:An.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=ua){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Cn({type:"video",sourceUpdater:this,action:An.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(k0("audio",this)||k0("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Cn({type:"audio",sourceUpdater:this,action:An.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Cn({type:"video",sourceUpdater:this,action:An.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){!this.audioBuffer||Cn({type:"audio",sourceUpdater:this,action:An.callback(e),name:"callback"})}videoQueueCallback(e){!this.videoBuffer||Cn({type:"video",sourceUpdater:this,action:An.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),iP.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>Wx(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}},dS=s=>decodeURIComponent(escape(String.fromCharCode.apply(null,s))),nP=s=>{let e=new Uint8Array(s);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},hS=new Uint8Array(`

`.split("").map(s=>s.charCodeAt(0))),R0=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},P0=class extends td{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return us();let e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return us([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;let i=mf(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){let r=hS.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(hS,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){wc(e,t,this.subtitlesTrack_)}fillBuffer_(){let e=this.chooseNextRequest_();if(!!e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){let t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Mr.TIMEOUT&&this.handleTimeout_(),e.code===Mr.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}let n=this.pendingSegment_,r=i.mp4VttCues&&i.mp4VttCues.length;r&&(n.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(n.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");let a=n.segment;if(a.map&&(a.map.bytes=t.map.bytes),n.bytes=t.bytes,typeof ge.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(n)}catch(o){this.stopForError({message:o.message,metadata:{errorType:be.Error.StreamingVttParserError,error:o}});return}if(r||this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,n.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new ge.default.VTTCue(o.startTime,o.endTime,o.text):o)}),VR(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){let i=e&&e.type==="vtt",n=t&&t.type==="text";i&&n&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){let t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{let n=i.start+t,r=i.end+t,a=new ge.default.VTTCue(n,r,i.cueText);i.settings&&i.settings.split(" ").forEach(o=>{let l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let t,i=!1;if(typeof ge.default.WebVTT!="function")throw new R0;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof ge.default.TextDecoder=="function"?t=new ge.default.TextDecoder("utf8"):(t=ge.default.WebVTT.StringDecoder(),i=!0);let n=new ge.default.WebVTT.Parser(ge.default,ge.default.vttjs,t);if(n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=a=>{e.timestampmap=a},n.onparsingerror=a=>{be.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=dS(a)),n.parse(a)}let r=e.bytes;i&&(r=dS(r)),n.parse(r),n.flush()}updateTimeMapping_(e,t,i){let n=e.segment;if(!t)return;if(!e.cues.length){n.empty=!0;return}let{MPEGTS:r,LOCAL:a}=e.timestampmap,l=r/Va.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{let c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!i.syncInfo){let u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-n.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*Va.ONE_SECOND_IN_TS,n=t*Va.ONE_SECOND_IN_TS,r;for(n<i?r=-8589934592:r=8589934592;Math.abs(i-n)>4294967296;)i+=r;return i/Va.ONE_SECOND_IN_TS}},rP=function(s,e){let t=s.cues;for(let i=0;i<t.length;i++){let n=t[i];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},aP=function(s,e,t=0){if(!s.segments)return;let i=t,n;for(let r=0;r<s.segments.length;r++){let a=s.segments[r];if(n||(n=rP(e,i+a.duration/2)),n){if("cueIn"in a){n.endTime=i,n.adEndTime=i,i+=a.duration,n=null;continue}if(i<n.endTime){i+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new ge.default.VTTCue(i,i+a.duration,a.cueOut),n.adStartTime=i,n.adEndTime=i+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){let[o,l]=a.cueOutCont.split("/").map(parseFloat);n=new ge.default.VTTCue(i,i+a.duration,""),n.adStartTime=i-o,n.adEndTime=n.adStartTime+l,e.addCue(n)}i+=a.duration}},vf=class{constructor({start:e,end:t,segmentIndex:i,partIndex:n=null,appended:r=!1}){this.start_=e,this.end_=t,this.segmentIndex_=i,this.partIndex_=n,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}},O0=class{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}},Tf=class{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){let{mediaSequence:i,segments:n}=e;if(this.isReliable_=this.isReliablePlaylist_(i,n),!!this.isReliable_)return this.updateStorage_(n,i,this.calculateBaseTime_(i,n,t))}getSyncInfoForTime(e){for(let{segmentSyncInfo:t,partsSyncInfo:i}of this.storage_.values())if(i.length){for(let n of i)if(n.isInRange(e))return n}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,i){let n=new Map,r=`
`,a=i,o=t;this.start_=a,e.forEach((l,u)=>{let c=this.storage_.get(o),h=a,g=h+l.duration,m=Boolean(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),v=new vf({start:h,end:g,appended:m,segmentIndex:u});l.syncInfo=v;let b=a,A=(l.parts||[]).map((R,F)=>{let O=b,H=b+R.duration,W=Boolean(c&&c.partsSyncInfo&&c.partsSyncInfo[F]&&c.partsSyncInfo[F].isAppended),E=new vf({start:O,end:H,appended:W,segmentIndex:u,partIndex:F});return b=H,r+=`Media Sequence: ${o}.${F} | Range: ${O} --> ${H} | Appended: ${W}
`,R.syncInfo=E,E});n.set(o,new O0(v,A)),r+=`${qx(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${g} | Appended: ${m}
`,o++,a=g}),this.end_=a,this.storage_=n,this.diagnostics_=r}calculateBaseTime_(e,t,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;let n=Math.min(...this.storage_.keys());if(e<n){let r=n-e,a=this.storage_.get(n).segmentSyncInfo.start;for(let o=0;o<r;o++){let l=t[o];a-=l.duration}return a}return i}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}},_f=class extends Tf{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,i){if(!this.storage_.size){let n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,i)}},oP=86400,qm=[{name:"VOD",run:(s,e,t,i,n)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(s,e,t,i,n,r)=>{let a=s.getMediaSequenceSync(r);if(!a||!a.isReliable)return null;let o=a.getSyncInfoForTime(n);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(s,e,t,i,n)=>{if(!Object.keys(s.timelineToDatetimeMappings).length)return null;let r=null,a=null,o=S0(e);n=n||0;for(let l=0;l<o.length;l++){let u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,g=s.timelineToDatetimeMappings[h.timeline];if(!g||!h.dateTimeObject)continue;let v=h.dateTimeObject.getTime()/1e3+g;if(h.parts&&typeof c.partIndex=="number")for(let A=0;A<c.partIndex;A++)v+=h.parts[A].duration;let b=Math.abs(n-v);if(a!==null&&(b===0||a<b))break;a=b,r={time:v,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return r}},{name:"Segment",run:(s,e,t,i,n)=>{let r=null,a=null;n=n||0;let o=S0(e);for(let l=0;l<o.length;l++){let u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,g=c.part&&c.part.start||h&&h.start;if(h.timeline===i&&typeof g<"u"){let m=Math.abs(n-g);if(a!==null&&a<m)break;(!r||a===null||a>=m)&&(a=m,r={time:g,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return r}},{name:"Discontinuity",run:(s,e,t,i,n)=>{let r=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){let l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=s.discontinuities[u];if(c){let h=Math.abs(n-c.time);if(a!==null&&a<h)break;(!r||a===null||a>=h)&&(a=h,r={time:c.time,segmentIndex:l,partIndex:null})}}}return r}},{name:"Playlist",run:(s,e,t,i,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}],M0=class extends be.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};let t=new Tf,i=new _f(t),n=new _f(t);this.mediaSequenceStorage_={main:t,audio:i,vtt:n},this.logger_=Yn("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,i,n,r){if(t!==1/0)return qm.find(({name:l})=>l==="VOD").run(this,e,t);let a=this.runStrategies_(e,t,i,n,r);if(!a.length)return null;for(let o of a){let{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;let g=e.segments[c],m=h,v=m+g.duration;if(this.logger_(`Strategy: ${u}. Current time: ${n}. selected segment: ${c}. Time: [${m} -> ${v}]}`),n>=m&&n<v)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:n})}getExpiredTime(e,t){if(!e||!e.segments)return null;let i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;let n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+kc({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,n,r){let a=[];for(let o=0;o<qm.length;o++){let l=qm[o],u=l.run(this,e,t,i,n,r);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let a=1;a<e.length;a++){let o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){let i=t.mediaSequence-e.mediaSequence;if(i>oP){be.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let n=i-1;n>=0;n--){let r=e.segments[n];if(r&&typeof r.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){let t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){let i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),n=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));let r=n.dateTimeObject;n.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[n.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){let n=e.segment,r=e.part,a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return r&&(r.start=o,r.end=l),(!n.start||o<n.start)&&(n.start=o),n.end=l,!0}saveDiscontinuitySyncInfo_(e){let t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let n=0;n<t.discontinuityStarts.length;n++){let r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=r-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-kc({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):u=i.end+kc({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},N0=class extends be.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){if(typeof t=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e];let n={timelineChangeInfo:{from:t,to:i}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}},lP=Ox(Mx(function(){var s=function(){function b(){this.listeners={}}var A=b.prototype;return A.on=function(F,O){this.listeners[F]||(this.listeners[F]=[]),this.listeners[F].push(O)},A.off=function(F,O){if(!this.listeners[F])return!1;var H=this.listeners[F].indexOf(O);return this.listeners[F]=this.listeners[F].slice(0),this.listeners[F].splice(H,1),H>-1},A.trigger=function(F){var O=this.listeners[F];if(!!O)if(arguments.length===2)for(var H=O.length,W=0;W<H;++W)O[W].call(this,arguments[1]);else for(var E=Array.prototype.slice.call(arguments,1),X=O.length,Z=0;Z<X;++Z)O[Z].apply(this,E)},A.dispose=function(){this.listeners={}},A.pipe=function(F){this.on("data",function(O){F.push(O)})},b}();function e(b){return b.subarray(0,b.byteLength-b[b.byteLength-1])}let t=function(){let b=[[[],[],[],[],[]],[[],[],[],[],[]]],A=b[0],R=b[1],F=A[4],O=R[4],H,W,E,X=[],Z=[],re,oe,ve,Ce,we,Ge;for(H=0;H<256;H++)Z[(X[H]=H<<1^(H>>7)*283)^H]=H;for(W=E=0;!F[W];W^=re||1,E=Z[E]||1)for(Ce=E^E<<1^E<<2^E<<3^E<<4,Ce=Ce>>8^Ce&255^99,F[W]=Ce,O[Ce]=W,ve=X[oe=X[re=X[W]]],Ge=ve*16843009^oe*65537^re*257^W*16843008,we=X[Ce]*257^Ce*16843008,H=0;H<4;H++)A[H][W]=we=we<<24^we>>>8,R[H][Ce]=Ge=Ge<<24^Ge>>>8;for(H=0;H<5;H++)A[H]=A[H].slice(0),R[H]=R[H].slice(0);return b},i=null;class n{constructor(A){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let R,F,O,H=this._tables[0][4],W=this._tables[1],E=A.length,X=1;if(E!==4&&E!==6&&E!==8)throw new Error("Invalid aes key size");let Z=A.slice(0),re=[];for(this._key=[Z,re],R=E;R<4*E+28;R++)O=Z[R-1],(R%E===0||E===8&&R%E===4)&&(O=H[O>>>24]<<24^H[O>>16&255]<<16^H[O>>8&255]<<8^H[O&255],R%E===0&&(O=O<<8^O>>>24^X<<24,X=X<<1^(X>>7)*283)),Z[R]=Z[R-E]^O;for(F=0;R;F++,R--)O=Z[F&3?R:R-4],R<=4||F<4?re[F]=O:re[F]=W[0][H[O>>>24]]^W[1][H[O>>16&255]]^W[2][H[O>>8&255]]^W[3][H[O&255]]}decrypt(A,R,F,O,H,W){let E=this._key[1],X=A^E[0],Z=O^E[1],re=F^E[2],oe=R^E[3],ve,Ce,we,Ge=E.length/4-2,Xe,Re=4,We=this._tables[1],Qe=We[0],rt=We[1],gt=We[2],et=We[3],Ye=We[4];for(Xe=0;Xe<Ge;Xe++)ve=Qe[X>>>24]^rt[Z>>16&255]^gt[re>>8&255]^et[oe&255]^E[Re],Ce=Qe[Z>>>24]^rt[re>>16&255]^gt[oe>>8&255]^et[X&255]^E[Re+1],we=Qe[re>>>24]^rt[oe>>16&255]^gt[X>>8&255]^et[Z&255]^E[Re+2],oe=Qe[oe>>>24]^rt[X>>16&255]^gt[Z>>8&255]^et[re&255]^E[Re+3],Re+=4,X=ve,Z=Ce,re=we;for(Xe=0;Xe<4;Xe++)H[(3&-Xe)+W]=Ye[X>>>24]<<24^Ye[Z>>16&255]<<16^Ye[re>>8&255]<<8^Ye[oe&255]^E[Re++],ve=X,X=Z,Z=re,re=oe,oe=ve}}class r extends s{constructor(){super(s),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(A){this.jobs.push(A),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}let a=function(b){return b<<24|(b&65280)<<8|(b&16711680)>>8|b>>>24},o=function(b,A,R){let F=new Int32Array(b.buffer,b.byteOffset,b.byteLength>>2),O=new n(Array.prototype.slice.call(A)),H=new Uint8Array(b.byteLength),W=new Int32Array(H.buffer),E,X,Z,re,oe,ve,Ce,we,Ge;for(E=R[0],X=R[1],Z=R[2],re=R[3],Ge=0;Ge<F.length;Ge+=4)oe=a(F[Ge]),ve=a(F[Ge+1]),Ce=a(F[Ge+2]),we=a(F[Ge+3]),O.decrypt(oe,ve,Ce,we,W,Ge),W[Ge]=a(W[Ge]^E),W[Ge+1]=a(W[Ge+1]^X),W[Ge+2]=a(W[Ge+2]^Z),W[Ge+3]=a(W[Ge+3]^re),E=oe,X=ve,Z=Ce,re=we;return H};class l{constructor(A,R,F,O){let H=l.STEP,W=new Int32Array(A.buffer),E=new Uint8Array(A.byteLength),X=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(W.subarray(X,X+H),R,F,E)),X=H;X<W.length;X+=H)F=new Uint32Array([a(W[X-4]),a(W[X-3]),a(W[X-2]),a(W[X-1])]),this.asyncStream_.push(this.decryptChunk_(W.subarray(X,X+H),R,F,E));this.asyncStream_.push(function(){O(null,e(E))})}static get STEP(){return 32e3}decryptChunk_(A,R,F,O){return function(){let H=o(A,R,F);O.set(H,A.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,g=function(A){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(A):A&&A.buffer instanceof ArrayBuffer},m=h.BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),function(){var b=new Uint16Array([65484]),A=new Uint8Array(b.buffer,b.byteOffset,b.byteLength);return A[0]===255?"big":A[0]===204?"little":"unknown"}();let v=function(b){let A={};return Object.keys(b).forEach(R=>{let F=b[R];g(F)?A[R]={bytes:F.buffer,byteOffset:F.byteOffset,byteLength:F.byteLength}:A[R]=F}),A};self.onmessage=function(b){let A=b.data,R=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength),F=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),O=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new l(R,F,O,function(H,W){self.postMessage(v({source:A.source,decrypted:W}),[W.buffer])})}})),uP=Px(lP),cP=s=>{let e=s.default?"main":"alternative";return s.characteristics&&s.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Kx=(s,e)=>{s.abort(),s.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},F0=(s,e)=>{e.activePlaylistLoader=s,s.load()},dP=(s,e)=>()=>{let{segmentLoaders:{[s]:t,main:i},mediaTypes:{[s]:n}}=e,r=n.activeTrack(),a=n.getActiveGroup(),o=n.activePlaylistLoader,l=n.lastGroup_;if(!(a&&l&&a.id===l.id)&&(n.lastGroup_=a,n.lastTrack_=r,Kx(t,n),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),F0(a.playlistLoader,n)}},hP=(s,e)=>()=>{let{segmentLoaders:{[s]:t},mediaTypes:{[s]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},fP=(s,e)=>()=>{let{mainPlaylistLoader:t,segmentLoaders:{[s]:i,main:n},mediaTypes:{[s]:r}}=e,a=r.activeTrack(),o=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if(!(u&&a&&u.id===a.id)&&(r.lastGroup_=o,r.lastTrack_=a,Kx(i,r),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;let c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;r.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),n.resetEverything(),c.fastQualityChange_(h);return}if(s==="AUDIO"){if(!o.playlistLoader){n.setAudio(!0),n.resetEverything();return}i.setAudio(!0),n.setAudio(!1)}if(l===o.playlistLoader){F0(o.playlistLoader,r);return}i.track&&i.track(a),i.resetEverything(),F0(o.playlistLoader,r)}},bf={AUDIO:(s,e)=>()=>{let{mediaTypes:{[s]:t},excludePlaylist:i}=e,n=t.activeTrack(),r=t.activeGroup(),a=(r.filter(l=>l.default)[0]||r[0]).id,o=t.tracks[a];if(n===o){i({error:{message:"Problem encountered loading the default audio track."}});return}be.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(let l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(s,e)=>()=>{let{mediaTypes:{[s]:t}}=e;be.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");let i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},fS={AUDIO:(s,e,t)=>{if(!e)return;let{tech:i,requestOptions:n,segmentLoaders:{[s]:r}}=t;e.on("loadedmetadata",()=>{let a=e.media();r.playlist(a,n),(!i.paused()||a.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),n),i.paused()||r.load()}),e.on("error",bf[s](s,t))},SUBTITLES:(s,e,t)=>{let{tech:i,requestOptions:n,segmentLoaders:{[s]:r},mediaTypes:{[s]:a}}=t;e.on("loadedmetadata",()=>{let o=e.media();r.playlist(o,n),r.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),n),i.paused()||r.load()}),e.on("error",bf[s](s,t))}},pP={AUDIO:(s,e)=>{let{vhs:t,sourceType:i,segmentLoaders:{[s]:n},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[s]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=sd(c.main);(!a[s]||Object.keys(a[s]).length===0)&&(a[s]={main:{default:{default:!0}}},h&&(a[s].main.default.playlists=c.main.playlists));for(let g in a[s]){o[g]||(o[g]=[]);for(let m in a[s][g]){let v=a[s][g][m],b;if(h?(u(`AUDIO group '${g}' label '${m}' is a main playlist`),v.isMainPlaylist=!0,b=null):i==="vhs-json"&&v.playlists?b=new ja(v.playlists[0],t,r):v.resolvedUri?b=new ja(v.resolvedUri,t,r):v.playlists&&i==="dash"?b=new ed(v.playlists[0],t,r,c):b=null,v=si({id:m,playlistLoader:b},v),fS[s](s,v.playlistLoader,e),o[g].push(v),typeof l[m]>"u"){let A=new be.AudioTrack({id:m,kind:cP(v),enabled:!1,language:v.language,default:v.default,label:m});l[m]=A}}}n.on("error",bf[s](s,e))},SUBTITLES:(s,e)=>{let{tech:t,vhs:i,sourceType:n,segmentLoaders:{[s]:r},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[s]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(let h in o[s]){l[h]||(l[h]=[]);for(let g in o[s][h]){if(!i.options_.useForcedSubtitles&&o[s][h][g].forced)continue;let m=o[s][h][g],v;if(n==="hls")v=new ja(m.resolvedUri,i,a);else if(n==="dash"){if(!m.playlists.filter(A=>A.excludeUntil!==1/0).length)return;v=new ed(m.playlists[0],i,a,c)}else n==="vhs-json"&&(v=new ja(m.playlists?m.playlists[0]:m.resolvedUri,i,a));if(m=si({id:g,playlistLoader:v},m),fS[s](s,m.playlistLoader,e),l[h].push(m),typeof u[g]>"u"){let b=t.addRemoteTextTrack({id:g,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:g},!1).track;u[g]=b}}}r.on("error",bf[s](s,e))},"CLOSED-CAPTIONS":(s,e)=>{let{tech:t,main:{mediaGroups:i},mediaTypes:{[s]:{groups:n,tracks:r}}}=e;for(let a in i[s]){n[a]||(n[a]=[]);for(let o in i[s][a]){let l=i[s][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;let u=t.options_.vhs&&t.options_.vhs.captionServices||{},c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=si(c,u[c.instreamId])),c.default===void 0&&delete c.default,n[a].push(si({id:o},l)),typeof r[o]>"u"){let h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;r[o]=h}}}}},Yx=(s,e)=>{for(let t=0;t<s.length;t++)if(iy(e,s[t])||s[t].playlists&&Yx(s[t].playlists,e))return!0;return!1},gP=(s,e)=>t=>{let{mainPlaylistLoader:i,mediaTypes:{[s]:{groups:n}}}=e,r=i.media();if(!r)return null;let a=null;r.attributes[s]&&(a=n[r.attributes[s]]);let o=Object.keys(n);if(!a)if(s==="AUDIO"&&o.length>1&&sd(e.main))for(let l=0;l<o.length;l++){let u=n[o[l]];if(Yx(u,r)){a=u;break}}else n.main?a=n.main:o.length===1&&(a=n[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},mP={AUDIO:(s,e)=>()=>{let{mediaTypes:{[s]:{tracks:t}}}=e;for(let i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(s,e)=>()=>{let{mediaTypes:{[s]:{tracks:t}}}=e;for(let i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},yP=(s,{mediaTypes:e})=>()=>{let t=e[s].activeTrack();return t?e[s].activeGroup(t):null},vP=s=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{pP[u](u,s)});let{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:n,segmentLoaders:{["AUDIO"]:r,main:a}}=s;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=gP(u,s),e[u].activeTrack=mP[u](u,s),e[u].onGroupChanged=dP(u,s),e[u].onGroupChanging=hP(u,s),e[u].onTrackChanged=fP(u,s),e[u].getActiveGroup=yP(u,s)});let o=e.AUDIO.activeGroup();if(o){let u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),r.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});let l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(let u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},TP=()=>{let s={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{s[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ua,activeTrack:ua,getActiveGroup:ua,onGroupChanged:ua,onTrackChanged:ua,lastTrack_:null,logger_:Yn(`MediaGroups[${e}]`)}}),s},Ef=class{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=cn(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}},$0=class extends be.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new Ef,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Yn("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";let i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=cn(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){let t=this.steeringManifest.reloadUri;if(!t)return;let i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}let n={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(r,a)=>{if(r){if(a.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(a.status===429){let u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:n});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){let c={errorType:be.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);let l={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){let t=new ge.default.URL(e),i=new ge.default.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){let t=JSON.parse(ge.default.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){let t=new ge.default.URL(e),i=this.getPathway(),n=this.getBandwidth_();if(i){let r=`_${this.manifestType_}_pathway`;t.searchParams.set(r,i)}if(n){let r=`_${this.manifestType_}_throughput`;t.searchParams.set(r,n)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());let i=(n=>{for(let r of n)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;let t=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){let n=this.setProxyServerUrl_(e);if(!t(n))return n}let i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){let t=e*1e3;this.ttlTimeout_=ge.default.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){ge.default.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new Ef}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(cn(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}},_P=(s,e)=>{let t=null;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{s.apply(null,i)},e)}},bP=10,Ba,EP=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],SP=function(s){return this.audioSegmentLoader_[s]+this.mainSegmentLoader_[s]},xP=function({currentPlaylist:s,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:a,bufferBasedABR:o,log:l}){if(!i)return be.log.warn("We received no playlist to switch to. Please check your stream."),!1;let u=`allowing switch ${s&&s.id||"null"} -> ${i.id}`;if(!s)return l(`${u} as current playlist is not set`),!0;if(i.id===s.id)return!1;let c=Boolean(zl(e,t).length);if(!s.endList)return!c&&typeof s.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);let h=Z0(e,t),g=o?ls.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ls.MAX_BUFFER_LOW_WATER_LINE;if(a<g)return l(`${u} as duration < max low water line (${a} < ${g})`),!0;let m=i.attributes.BANDWIDTH,v=s.attributes.BANDWIDTH;if(m<v&&(!o||h<r)){let b=`${u} as next bandwidth < current bandwidth (${m} < ${v})`;return o&&(b+=` and forwardBuffer < bufferHighWaterLine (${h} < ${r})`),l(b),!0}if((!o||m>v)&&h>=n){let b=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${n})`;return o&&(b+=` and next bandwidth > current bandwidth (${m} > ${v})`),l(b),!0}return l(`not ${u} as no switching criteria met`),!1},B0=class extends be.EventTarget{constructor(e){super(),this.fastQualityChange_=_P(this.fastQualityChange_.bind(this),100);let{src:t,withCredentials:i,tech:n,bandwidth:r,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:g,leastPixelDiffSelector:m,captionServices:v,experimentalUseMMS:b}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:A}=e;(A===null||typeof A>"u")&&(A=1/0),Ba=a,this.bufferBasedABR=Boolean(g),this.leastPixelDiffSelector=Boolean(m),this.withCredentials=i,this.tech_=n,this.vhs_=n.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=A,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:A,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=TP(),b&&ge.default.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new ge.default.ManagedMediaSource,this.usingManagedMediaSource_=!0,be.log("Using ManagedMediaSource")):ge.default.MediaSource&&(this.mediaSource=new ge.default.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=us(),this.hasPlayed_=!1,this.syncController_=new M0(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new uP,this.sourceUpdater_=new yf(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new N0,this.keyStatusMap_=new Map;let R={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:v,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new ed(t,this.vhs_,si(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new ja(t,this.vhs_,si(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new td(si(R,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new td(si(R,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new P0(si(R,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((H,W)=>{function E(){n.off("vttjserror",X),H()}function X(){n.off("vttjsloaded",E),W()}n.one("vttjsloaded",E),n.one("vttjserror",X),n.addWebVttScript_()})}),e);let F=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new $0(this.vhs_.xhr,F),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),EP.forEach(H=>{this[H+"_"]=SP.bind(this,H)}),this.logger_=Yn("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;let O=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(O,()=>{let H=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-H,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){let e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){let t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){let n=this.media(),r=n&&(n.id||n.uri),a=e&&(e.id||e.uri);if(r&&r!==a){this.logger_(`switch media ${r} -> ${a} from ${t}`);let o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{let t=this.mediaTypes_[e],i=t?t.activeGroup():null,n=this.contentSteeringController_.getPathway();if(i&&n){let a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===n);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=ge.default.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ge.default.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){let e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;let i=e.mediaGroups.AUDIO,n=Object.keys(i),r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{let o=i.main||n.length&&i[n[0]];for(let l in o)if(o[l].default){r={label:l};break}}if(!r)return t;let a=[];for(let o in i)if(i[o][r.label]){let l=i[o][r.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){let c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{let t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;x0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),vP({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{let t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{let t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;x0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{let t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Ci({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){let i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(let a in i.AUDIO)for(let o in i.AUDIO[a])i.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Ba.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){let t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),a=this.tech_.buffered();return xP({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{let i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{let i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;let n=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(n)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:bP}))});let e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();let i=this.getCodecsOrExclude_();!i||this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,n=>{this.player_.trigger(Ci({},n))}),this.audioSegmentLoader_.on(i,n=>{this.player_.trigger(Ci({},n))}),this.subtitleSegmentLoader_.on(i,n=>{this.player_.trigger(Ci({},n))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();let e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){let e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){let t=this.seekable();if(!t.length)return!1;let i=t.end(0),n=i;if(e.start){let r=e.start.timeOffset;r<0?n=Math.max(i+r,t.start(0)):n=Math.min(i,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){let e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;let e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;let t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){let t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;let i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;let n=Ba.Playlist.playlistEnd(e,i),r=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-r<=Or;let o=a.end(a.length-1);return o-r<=Or&&n-o<=Or}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;let n=this.mainPlaylistLoader_.main.playlists,r=n.filter($f),a=r.length===1&&r[0]===e;if(n.length===1&&i!==1/0)return be.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){let v=this.pathwayAttribute_(e),b=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(v),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(v)},b);return}let m=!1;n.forEach(v=>{if(v===e)return;let b=v.excludeUntil;typeof b<"u"&&b!==1/0&&(m=!0,delete v.excludeUntil)}),m&&(be.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});let l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}let u=t.internal?this.logger_:be.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);let h=l.targetDuration/2*1e3||5*1e3,g=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||g)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){let i=[],n=e==="all";(n||e==="main")&&i.push(this.mainPlaylistLoader_);let r=[];(n||e==="audio")&&r.push("AUDIO"),(n||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{let o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{let o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){let t=zl(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;let e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Ba.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){let i=e.media();if(!i)return null;let n=this.syncController_.getMediaSequenceSync(t);if(n&&n.isReliable){let o=n.start,l=n.end;if(!isFinite(o)||!isFinite(l))return null;let u=Ba.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),c=Math.max(o,l-u);return us([[o,c]])}let r=this.syncController_.getExpiredTime(i,this.duration());if(r===null)return null;let a=Ba.Playlist.seekable(i,r,Ba.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return a.length?a:null}computeFinalSeekable_(e,t){if(!t)return e;let i=e.start(0),n=e.end(0),r=t.start(0),a=t.end(0);return r>n||i>a?e:us([[Math.max(i,r),Math.min(n,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;let e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;let i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${ox(this.seekable_)}]`);let n={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:n}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){let n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}let t=this.tech_.buffered(),i=Ba.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{let t=this.mediaTypes_[e].groups;for(let i in t)t[i].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){let e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){let e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;let i=Rc(this.main(),t),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=i.video||e.main.videoCodec||q_),e.main.isMuxed&&(n.video+=`,${i.audio||e.main.audioCodec||Jg}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(n.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||Jg,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}let a=(u,c)=>u?Dl(c,this.usingManagedMediaSource_):Zd(c),o={},l;if(["video","audio"].forEach(function(u){if(n.hasOwnProperty(u)&&!a(e[u].isFmp4,n[u])){let c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(n[u]),u==="audio"&&(l=c)}}),r&&l&&t.attributes.AUDIO){let u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${n.audio}"`)}if(Object.keys(o).length){let u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let u=[];if(["video","audio"].forEach(c=>{let h=(ar(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,g=(ar(n[c]||"")[0]||{}).type;h&&g&&h.toLowerCase()!==g.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${n[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;let e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);let t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){let e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{let n=e[i];if(t.indexOf(n.id)!==-1)return;t.push(n.id);let r=Rc(this.main,n),a=[];r.audio&&!Zd(r.audio)&&!Dl(r.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${r.audio}`),r.video&&!Zd(r.video)&&!Dl(r.video,this.usingManagedMediaSource_)&&a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){let t=[],i=this.main().playlists,n=Zc(ar(e)),r=JE(n),a=n.video&&ar(n.video)[0]||null,o=n.audio&&ar(n.audio)[0]||null;Object.keys(i).forEach(l=>{let u=i[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);let c=[],h=Rc(this.mainPlaylistLoader_.main,u),g=JE(h);if(!(!h.audio&&!h.video)){if(g!==r&&c.push(`codec count "${g}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){let m=h.video&&ar(h.video)[0]||null,v=h.audio&&ar(h.audio)[0]||null;m&&a&&m.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${m.type}" !== "${a.type}"`),v&&o&&v.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${v.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0,i=this.seekable();i.length&&(t=i.start(0)),aP(e,this.cueTagsTrack_,t)}goalBufferLength(){let e=this.tech_.currentTime(),t=ls.GOAL_BUFFER_LENGTH,i=ls.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,ls.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}bufferLowWaterLine(){let e=this.tech_.currentTime(),t=ls.BUFFER_LOW_WATER_LINE,i=ls.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,ls.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,ls.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?r:n)}bufferHighWaterLine(){return ls.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){aS(this.inbandTextTracks_,"com.apple.streaming",this.tech_),HR({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){let n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();aS(this.inbandTextTracks_,e,this.tech_),$R({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){let e=this.main();if(!!e.contentSteering){for(let t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Ci({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{let t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{let r=this.contentSteeringController_.getAvailablePathways(),a=[];for(let o of t.playlists){let l=o.attributes.serviceLocation;if(l&&(a.push(l),!r.has(l)))return!0}return!!(!a.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){let e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();let i=this.main().playlists,n=new Set,r=!1;Object.keys(i).forEach(a=>{let o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);let h=!o.excludeUntil&&o.excludeUntil!==1/0;!(!n.has(o.id)&&u&&h)||(n.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{let o=this.mediaTypes_[a];if(o.activePlaylistLoader){let l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){let t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(!!(i&&i.size||n&&n.size)){for(let[a,o]of i.entries())n.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(let[a,o]of n.entries()){let l=i.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;let i=e["URI-REPLACEMENT"].PARAMS,n=t["URI-REPLACEMENT"].PARAMS;for(let r in i)if(i[r]!==n[r])return!1;for(let r in n)if(i[r]!==n[r])return!1;return!0}changeSegmentPathway_(){let e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0,t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{let n=this.mainPlaylistLoader_.getKeyIdSet(i);!n||!n.size||n.forEach(r=>{let a="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,l=i.lastExcludeReason_===t&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${r} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{let n=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,r=i.excludeUntil===1/0&&i.lastExcludeReason_===t;n&&r&&(delete i.excludeUntil,be.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){let r=(typeof e=="string"?e:nP(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}},AP=(s,e,t)=>i=>{let n=s.main.playlists[e],r=ty(n),a=$f(n);if(typeof i>"u")return a;i?delete n.disabled:n.disabled=!0;let o={renditionInfo:{id:e,bandwidth:n.attributes.BANDWIDTH,resolution:n.attributes.RESOLUTION,codecs:n.attributes.CODECS},cause:"fast-quality"};return i!==a&&!r&&(i?(t(n),s.trigger({type:"renditionenabled",metadata:o})):s.trigger({type:"renditiondisabled",metadata:o})),i},U0=class{constructor(e,t,i){let{playlistController_:n}=e,r=n.fastQualityChange_.bind(n);if(t.attributes){let a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Rc(n.main(),t),this.playlist=t,this.id=i,this.enabled=AP(e.playlists,t.id,r)}},CP=function(s){s.representations=()=>{let e=s.playlistController_.main(),t=sd(e)?s.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!ty(i)).map((i,n)=>new U0(s,i,i.id)):[]}},pS=["seeking","seeked","pause","playing","error"],H0=class extends be.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Yn("PlaybackWatcher"),this.logger_("initialize");let t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});let u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(pS,r),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(pS,r),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&ge.default.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ge.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ge.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){let t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){let t=this.playlistController_,i=t[`${e}SegmentLoader_`],n=i.buffered_(),r=_k(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,r){let a={bufferedRanges:n};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:Mo(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;let e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Or>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(us([this.lastRecordedTime,e]));let i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;let t=this.seekable(),i=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow),r;if(n&&(r=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){let v=t.start(0);r=v+(v===t.end(0)?0:Or)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${ox(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;let a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Pr)*2,g=[l,u];for(let v=0;v<g.length;v++){if(!g[v])continue;if(Z0(g[v],i)<h)return!1}let m=yh(o,i);return m.length===0?!1:(r=m.start(0)+Or,this.logger_(`Buffered region starts (${m.start(0)})  just beyond seek point (${i}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;let e=this.tech_.currentTime(),t=this.tech_.buffered(),i=zl(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){let e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){let o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}let i=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;let a=yh(n,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,n=!1){if(!e.length)return!1;let r=e.end(e.length-1)+Or,a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||n)&&(r=e.end(e.length-1)+i.targetDuration*3),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let n;if(e.length&&t.length){let r=zl(e,i-3),a=zl(e,i),o=zl(t,i);o.length&&!a.length&&r.length&&(n={start:r.end(0),end:o.end(0)})}else yh(e,i).length||(n=this.gapFromVideoUnderflow_(e,i));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){let t=this.tech_.buffered(),i=this.tech_.currentTime(),n=yh(t,i);if(this.resetTimeUpdate_(),n.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Pr);let r={gapInfo:{from:i,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){let i=yk(e);for(let n=0;n<i.length;n++){let r=i.start(n),a=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}},wP={errorInterval:30,getSource(s){let t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return s(t)}},Xx=function(s,e){let t=0,i=0,n=si(wP,e);s.ready(()=>{s.trigger({type:"usage",name:"vhs-error-reload-initialized"})});let r=function(){i&&s.currentTime(i)},a=function(c){c!=null&&(i=s.duration()!==1/0&&s.currentTime()||0,s.one("loadedmetadata",r),s.src(c),s.trigger({type:"usage",name:"vhs-error-reload"}),s.play())},o=function(){if(Date.now()-t<n.errorInterval*1e3){s.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){be.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),n.getSource.call(s,a)},l=function(){s.off("loadedmetadata",r),s.off("error",o),s.off("dispose",l)},u=function(c){l(),Xx(s,c)};s.on("error",o),s.on("dispose",l),s.reloadSourceOnError=u},IP=function(s){Xx(this,s)},Qx="3.17.2",DP="7.1.0",LP="1.3.1",kP="7.2.0",RP="4.0.2",wi={PlaylistLoader:ja,Playlist:dn,utils:zk,STANDARD_PLAYLIST_SELECTOR:rS,INITIAL_PLAYLIST_SELECTOR:PR,lastBandwidthSelector:rS,movingAverageBandwidthSelector:kR,comparePlaylistBandwidth:ny,comparePlaylistResolution:LR,xhr:Cx()};Object.keys(ls).forEach(s=>{Object.defineProperty(wi,s,{get(){return be.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),ls[s]},set(e){if(be.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){be.log.warn(`value of Vhs.${s} must be greater than or equal to 0`);return}ls[s]=e}})});var Jx="videojs-vhs",Zx=function(s,e){let t=e.media(),i=-1;for(let n=0;n<s.length;n++)if(s[n].id===t.id){i=n;break}s.selectedIndex_=i,s.trigger({selectedIndex:i,type:"change"})},PP=function(s,e){e.representations().forEach(t=>{s.addQualityLevel(t)}),Zx(s,e.playlists)};wi.canPlaySource=function(){return be.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var OP=(s,e,t)=>{if(!s)return s;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=Zc(ar(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);let n=Do(i.video),r=Do(i.audio),a={};for(let o in s)a[o]={},r&&(a[o].audioContentType=r),n&&(a[o].videoContentType=n),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof s[o]=="string"&&(a[o].url=s[o]);return si(s,a)},MP=(s,e)=>s.reduce((t,i)=>{if(!i.contentProtection)return t;let n=e.reduce((r,a)=>{let o=i.contentProtection[a];return o&&o.pssh&&(r[a]={pssh:o.pssh}),r},{});return Object.keys(n).length&&t.push(n),t},[]),NP=({player:s,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!s.eme.initializeMediaKeys)return Promise.resolve();let n=t?i.concat([t]):i,r=MP(n,Object.keys(e)),a=[],o=[];return r.forEach(l=>{o.push(new Promise((u,c)=>{s.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{s.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},FP=({player:s,sourceKeySystems:e,media:t,audioMedia:i})=>{let n=OP(e,t,i);return n?(s.currentSource().keySystems=n,n&&!s.eme?(be.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},e1=()=>{if(!ge.default.localStorage)return null;let s=ge.default.localStorage.getItem(Jx);if(!s)return null;try{return JSON.parse(s)}catch{return null}},$P=s=>{if(!ge.default.localStorage)return!1;let e=e1();e=e?si(e,s):s;try{ge.default.localStorage.setItem(Jx,JSON.stringify(e))}catch{return!1}return e},BP=s=>s.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(s.substring(s.indexOf(",")+1)):s,t1=(s,e)=>{s._requestCallbackSet||(s._requestCallbackSet=new Set),s._requestCallbackSet.add(e)},i1=(s,e)=>{s._responseCallbackSet||(s._responseCallbackSet=new Set),s._responseCallbackSet.add(e)},s1=(s,e)=>{!s._requestCallbackSet||(s._requestCallbackSet.delete(e),s._requestCallbackSet.size||delete s._requestCallbackSet)},n1=(s,e)=>{!s._responseCallbackSet||(s._responseCallbackSet.delete(e),s._responseCallbackSet.size||delete s._responseCallbackSet)};wi.supportsNativeHls=function(){if(!st.default||!st.default.createElement)return!1;let s=st.default.createElement("video");return be.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(s.canPlayType(t))}):!1}();wi.supportsNativeDash=function(){return!st.default||!st.default.createElement||!be.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(st.default.createElement("video").canPlayType("application/dash+xml"))}();wi.supportsTypeNatively=s=>s==="hls"?wi.supportsNativeHls:s==="dash"?wi.supportsNativeDash:!1;wi.isSupported=function(){return be.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};wi.xhr.onRequest=function(s){t1(wi.xhr,s)};wi.xhr.onResponse=function(s){i1(wi.xhr,s)};wi.xhr.offRequest=function(s){s1(wi.xhr,s)};wi.xhr.offResponse=function(s){n1(wi.xhr,s)};var UP=be.getComponent("Component"),Sf=class extends UP{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=Yn("VhsHandler"),t.options_&&t.options_.playerId){let n=be.getPlayer(t.options_.playerId);this.player_=n}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(st.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{let r=st.default.fullscreenElement||st.default.webkitFullscreenElement||st.default.mozFullScreenElement||st.default.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=si(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){let i=e1();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=ls.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ls.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;let t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=BP(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=wi,this.options_.sourceType=Zg(t),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new B0(this.options_);let i=si({liveRangeSafeTimeDelta:Or},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new H0(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{let r=be.players[this.tech_.options_.playerId],a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),r.error(a)});let n=this.options_.bufferBasedABR?wi.movingAverageBandwidthSelector(.55):wi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=wi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth,a=ge.default.navigator.connection||ge.default.navigator.mozConnection||ge.default.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){let l=a.downlink*1e3*1e3;l>=o&&r>=o?r=Math.max(r,l):r=l}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let r=1/(this.bandwidth||1),a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(r+a))},set(){be.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Mo(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Mo(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&$P({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{CP(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ge.default.URL.createObjectURL(this.playlistController_.mediaSource),(be.browser.IS_ANY_SAFARI||be.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){let e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),NP({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){let e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=FP({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){let e=be.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{PP(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Zx(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Qx,"mux.js":DP,"mpd-parser":LP,"m3u8-parser":kP,"aes-decrypter":RP}}version(){return this.constructor.version()}canChangeType(){return yf.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&ge.default.URL.revokeObjectURL&&(ge.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return Zk({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,n=2){return kx({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{t1(this.xhr,e)},this.xhr.onResponse=e=>{i1(this.xhr,e)},this.xhr.offRequest=e=>{s1(this.xhr,e)},this.xhr.offResponse=e=>{n1(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){let e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,n=>{this.player_.trigger(Ci({},n))})}),t.forEach(i=>{this.playbackWatcher_.on(i,n=>{this.player_.trigger(Ci({},n))})})}},xf={name:"videojs-http-streaming",VERSION:Qx,canHandleSource(s,e={}){let t=si(be.options,e);return!t.vhs.experimentalUseMMS&&!Dl("avc1.4d400d,mp4a.40.2",!1)?!1:xf.canPlayType(s.type,t)},handleSource(s,e,t={}){let i=si(be.options,t);return e.vhs=new Sf(s,e,i),e.vhs.xhr=Cx(),e.vhs.setupXhrHooks_(),e.vhs.src(s.src,s.type),e.vhs},canPlayType(s,e){let t=Zg(s);if(!t)return"";let i=xf.getOverrideNative(e);return!wi.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(s={}){let{vhs:e={}}=s,t=!(be.browser.IS_ANY_SAFARI||be.browser.IS_IOS),{overrideNative:i=t}=e;return i}},HP=()=>Dl("avc1.4d400d,mp4a.40.2",!0);HP()&&be.getTech("Html5").registerSourceHandler(xf,0);be.VhsHandler=Sf;be.VhsSourceHandler=xf;be.Vhs=wi;be.use||be.registerComponent("Vhs",wi);be.options.vhs=be.options.vhs||{};(!be.getPlugin||!be.getPlugin("reloadSourceOnError"))&&be.registerPlugin("reloadSourceOnError",IP);var VP=()=>{let s=document.querySelectorAll(".cmp-di-dm-video"),e="";s.forEach((i,n)=>{let r=i.querySelector("video");r&&(e=r.getAttribute("id"),e||(e=`di-dm-video_${n}`,r.setAttribute("id",e)),be(e,{}))}),(()=>{document.querySelectorAll(".cmp-di-dm-video").forEach((n,r)=>{let a=n.querySelector(".cmp-video__container-video"),o=a?.dataset?.dmsingleplayertitle,l=a?.dataset?.dmsingleplayerdesc,u=n.querySelector(".cmp-video-dm");if(u&&(o||l)){let c=document.createElement("div");c.classList.add("vjs-dock-text");let h=document.createElement("div");h.classList.add("vjs-dock-title");let g=document.createElement("div");g.classList.add("vjs-dock-description"),h.textContent=o,g.textContent=l,c.appendChild(h),c.appendChild(g),u.appendChild(c)}})})()};document.addEventListener("DOMContentLoaded",VP);function jP(){$(".cmp-di-nameplate-img")&&$(".cmp-di-nameplate-img").siblings(".cmp-di-title cmp-di-title__article")&&$(".cmp-di-nameplate-img").attr("style","margin-top:12px")}document.addEventListener("DOMContentLoaded",jP);function GP(){var s=document.querySelectorAll(".cmp-embed-component__btn-details"),e=[].slice.call(s),t=document.querySelectorAll(".cmp-embed-component__btn-text"),i=document.querySelectorAll(".cmp-embed-component__icons"),n=document.querySelectorAll(".cmp-embed-component__details");e.forEach(function(r,a){var o=!1;r.addEventListener("click",function(){o=!o,o?(r.setAttribute("aria-expanded","true"),t[a].innerHTML="Less details"):(r.setAttribute("aria-expanded","false"),t[a].innerHTML="More details"),i[a].classList.toggle("icon-minus"),n[a].classList.toggle("cmp-embed-component__details-open")}),r.addEventListener("keydown",function(l){var u=!1;l.keyCode==="Enter"&&(i[a].classList.toggle("icon-minus"),n[a].classList.toggle("cmp-embed-component__details-open"),u=!u,u?(r.setAttribute("aria-expanded","true"),t[a].innerHTML="Less details"):(r.setAttribute("aria-expanded","false"),t[a].innerHTML="More details")),l.keyCode===27&&(i[a].classList.remove("icon-minus"),n[a].classList.remove("cmp-embed-component__details-open"))})})}document.addEventListener("DOMContentLoaded",GP);(function(){let s=document.querySelectorAll(".cmp-embed-component__details"),e=document.querySelectorAll(".cmp-embed-component__btn-text"),t=document.querySelectorAll(".icon-plus"),i=document.querySelectorAll(".cmp-embed-component__details");s.forEach(function(n,r){n.addEventListener("click",function(){i[r].classList.contains("cmp-embed-component__details")?(n.setAttribute("aria-expanded","true"),e[r].innerHTML="Less details",t[r].classList.remove("icon-plus"),t[r].classList.add("icon-minus"),i[r].classList.remove("cmp-embed-component__details"),i[r].classList.add("cmp-embed-component__details-open")):(n.setAttribute("aria-expanded","false"),e[r].innerHTML="More details",t[r].classList.remove("icon-minus"),t[r].classList.add("icon-plus"),i[r].classList.remove("cmp-embed-component__details-open"),i[r].classList.add("cmp-embed-component__details"))})})})();(function(s,e,t,i){var n="InfogramEmbeds",r=s.getElementsByTagName("script")[0];if(window[n]&&window[n].initialized)window[n].process&&window[n].process();else if(!s.getElementById(t)){var a=s.createElement("script");a.async=1,a.id=t,a.src="https://e.infogram.com/js/dist/embed-loader-min.js",r.parentNode.insertBefore(a,r)}})(document,0,"infogram-async");var ft=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},qP=Number.isSafeInteger||function(s){return typeof s=="number"&&Math.abs(s)<=zP},zP=Number.MAX_SAFE_INTEGER||9007199254740991,Et=function(s){return s.NETWORK_ERROR="networkError",s.MEDIA_ERROR="mediaError",s.KEY_SYSTEM_ERROR="keySystemError",s.MUX_ERROR="muxError",s.OTHER_ERROR="otherError",s}({}),Ae=function(s){return s.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",s.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",s.KEY_SYSTEM_NO_SESSION="keySystemNoSession",s.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",s.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",s.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",s.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",s.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",s.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",s.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",s.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",s.MANIFEST_LOAD_ERROR="manifestLoadError",s.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",s.MANIFEST_PARSING_ERROR="manifestParsingError",s.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",s.LEVEL_EMPTY_ERROR="levelEmptyError",s.LEVEL_LOAD_ERROR="levelLoadError",s.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",s.LEVEL_PARSING_ERROR="levelParsingError",s.LEVEL_SWITCH_ERROR="levelSwitchError",s.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",s.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",s.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",s.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",s.FRAG_LOAD_ERROR="fragLoadError",s.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",s.FRAG_DECRYPT_ERROR="fragDecryptError",s.FRAG_PARSING_ERROR="fragParsingError",s.FRAG_GAP="fragGap",s.REMUX_ALLOC_ERROR="remuxAllocError",s.KEY_LOAD_ERROR="keyLoadError",s.KEY_LOAD_TIMEOUT="keyLoadTimeOut",s.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",s.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",s.BUFFER_APPEND_ERROR="bufferAppendError",s.BUFFER_APPENDING_ERROR="bufferAppendingError",s.BUFFER_STALLED_ERROR="bufferStalledError",s.BUFFER_FULL_ERROR="bufferFullError",s.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",s.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",s.ASSET_LIST_LOAD_ERROR="assetListLoadError",s.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",s.ASSET_LIST_PARSING_ERROR="assetListParsingError",s.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",s.INTERNAL_EXCEPTION="internalException",s.INTERNAL_ABORTED="aborted",s.ATTACH_MEDIA_ERROR="attachMediaError",s.UNKNOWN="unknown",s}({}),B=function(s){return s.MEDIA_ATTACHING="hlsMediaAttaching",s.MEDIA_ATTACHED="hlsMediaAttached",s.MEDIA_DETACHING="hlsMediaDetaching",s.MEDIA_DETACHED="hlsMediaDetached",s.MEDIA_ENDED="hlsMediaEnded",s.STALL_RESOLVED="hlsStallResolved",s.BUFFER_RESET="hlsBufferReset",s.BUFFER_CODECS="hlsBufferCodecs",s.BUFFER_CREATED="hlsBufferCreated",s.BUFFER_APPENDING="hlsBufferAppending",s.BUFFER_APPENDED="hlsBufferAppended",s.BUFFER_EOS="hlsBufferEos",s.BUFFERED_TO_END="hlsBufferedToEnd",s.BUFFER_FLUSHING="hlsBufferFlushing",s.BUFFER_FLUSHED="hlsBufferFlushed",s.MANIFEST_LOADING="hlsManifestLoading",s.MANIFEST_LOADED="hlsManifestLoaded",s.MANIFEST_PARSED="hlsManifestParsed",s.LEVEL_SWITCHING="hlsLevelSwitching",s.LEVEL_SWITCHED="hlsLevelSwitched",s.LEVEL_LOADING="hlsLevelLoading",s.LEVEL_LOADED="hlsLevelLoaded",s.LEVEL_UPDATED="hlsLevelUpdated",s.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",s.LEVELS_UPDATED="hlsLevelsUpdated",s.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",s.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",s.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",s.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",s.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",s.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",s.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",s.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",s.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",s.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",s.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",s.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",s.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",s.CUES_PARSED="hlsCuesParsed",s.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",s.INIT_PTS_FOUND="hlsInitPtsFound",s.FRAG_LOADING="hlsFragLoading",s.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",s.FRAG_LOADED="hlsFragLoaded",s.FRAG_DECRYPTED="hlsFragDecrypted",s.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",s.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",s.FRAG_PARSING_METADATA="hlsFragParsingMetadata",s.FRAG_PARSED="hlsFragParsed",s.FRAG_BUFFERED="hlsFragBuffered",s.FRAG_CHANGED="hlsFragChanged",s.FPS_DROP="hlsFpsDrop",s.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",s.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",s.ERROR="hlsError",s.DESTROYING="hlsDestroying",s.KEY_LOADING="hlsKeyLoading",s.KEY_LOADED="hlsKeyLoaded",s.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",s.BACK_BUFFER_REACHED="hlsBackBufferReached",s.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",s.ASSET_LIST_LOADING="hlsAssetListLoading",s.ASSET_LIST_LOADED="hlsAssetListLoaded",s.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",s.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",s.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",s.INTERSTITIAL_STARTED="hlsInterstitialStarted",s.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",s.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",s.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",s.INTERSTITIAL_ENDED="hlsInterstitialEnded",s.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",s.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",s.EVENT_CUE_ENTER="hlsEventCueEnter",s}({}),Yt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},vt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},Ja=class{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){let i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){let e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}},wy=class{constructor(e,t,i,n=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ja(e),this.fast_=new Ja(t),this.defaultTTFB_=n,this.ttfb_=new Ja(e)}update(e,t){let{slow_:i,fast_:n,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new Ja(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new Ja(t,n.getEstimate(),n.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new Ja(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);let i=8*t,n=e/1e3,r=i/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){let t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}};function WP(s,e,t){return(e=YP(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function fi(){return fi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},fi.apply(null,arguments)}function r1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function li(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r1(Object(t),!0).forEach(function(i){WP(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):r1(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function KP(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function YP(s){var e=KP(s,"string");return typeof e=="symbol"?e:e+""}var pn=class{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;let i=`[${e}]:`;this.trace=Za,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}},Za=function(){},XP={trace:Za,debug:Za,log:Za,warn:Za,info:Za,error:Za};function Iy(){return fi({},XP)}function QP(s,e){let t=self.console[s];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${s}] >`):Za}function a1(s,e,t){return e[s]?e[s].bind(e):QP(s,t)}var Dy=Iy();function JP(s,e,t){let i=Iy();if(typeof console=="object"&&s===!0||typeof s=="object"){let n=["debug","log","info","warn","error"];n.forEach(r=>{i[r]=a1(r,s,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.13`)}catch{return Iy()}n.forEach(r=>{Dy[r]=a1(r,s)})}else fi(Dy,i);return i}var ui=Dy;function to(s=!0){return typeof self>"u"?void 0:(s||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function ZP(s){return typeof self<"u"&&s===self.ManagedMediaSource}function yA(s,e){let t=Object.keys(s),i=Object.keys(e),n=t.length,r=i.length;return!n||!r||n===r&&!t.some(a=>i.indexOf(a)===-1)}function kn(s,e=!1){if(typeof TextDecoder<"u"){let u=new TextDecoder("utf-8").decode(s);if(e){let c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}let t=s.length,i,n,r,a="",o=0;for(;o<t;){if(i=s[o++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:n=s[o++],a+=String.fromCharCode((i&31)<<6|n&63);break;case 14:n=s[o++],r=s[o++],a+=String.fromCharCode((i&15)<<12|(n&63)<<6|(r&63)<<0);break}}return a}function qs(s){let e="";for(let t=0;t<s.length;t++){let i=s[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}function vA(s){return Uint8Array.from(s.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function eO(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ry={exports:{}},o1;function tO(){return o1||(o1=1,function(s,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var g=o.parseURL(u);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return c.alwaysNormalize?(g.path=o.normalizePath(g.path),o.buildURLFromParts(g)):u;var m=o.parseURL(l);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var v=n.exec(m.path);m.netLoc=v[1],m.path=v[2]}m.netLoc&&!m.path&&(m.path="/");var b={scheme:m.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(b.netLoc=m.netLoc,g.path[0]!=="/"))if(!g.path)b.path=m.path,g.params||(b.params=m.params,g.query||(b.query=m.query));else{var A=m.path,R=A.substring(0,A.lastIndexOf("/")+1)+g.path;b.path=o.normalizePath(R)}return b.path===null&&(b.path=c.alwaysNormalize?o.normalizePath(g.path):g.path),o.buildURLFromParts(b)},parseURL:function(l){var u=i.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};s.exports=o})()}(ry)),ry.exports}var Gv=tO(),cd=class{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},mi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"},op=class{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,iO(this,"stats")}setByteRange(e,t){let i=e.split("@",2),n;i.length===1?n=t?.byteRangeEndOffset||0:n=parseInt(i[1]),this._byteRange=[n,parseInt(i[0])+n]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[mi.AUDIO]:null,[mi.VIDEO]:null,[mi.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new cd),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Gv.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){let{elementaryStreams:e}=this;e[mi.AUDIO]=null,e[mi.VIDEO]=null,e[mi.AUDIOVIDEO]=null}};function Wi(s){return s.sn!=="initSegment"}var ad=class extends op{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){let e=this.stats.total;if(e)return e}if(this.byteRange.length){let e=this.byteRange[0],t=this.byteRange[1];if(ft(e)&&ft(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;let{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){let i=Object.keys(t);if(i.length===1){let n=this._decryptdata=t[i[0]]||null;n&&(this._decryptdata=n.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;let e=ft(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;let i=Object.keys(this.levelkeys),n=i.length;if(n>1||n===1&&(t=this.levelkeys[i[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!ft(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Wi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){let t=this.levelkeys;if(t){var i;let n=t[e];n&&!((i=this._decryptdata)!=null&&i.keyId)&&(this._decryptdata=n.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,n,r,a=!1){let{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,n),l.endDTS=Math.max(l.endDTS,r)}},Ly=class extends op{constructor(e,t,i,n,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;let a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){let{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function TA(s,e){let t=Object.getPrototypeOf(s);if(t){let i=Object.getOwnPropertyDescriptor(t,e);return i||TA(t,e)}}function iO(s,e){let t=TA(s,e);t&&(t.enumerable=!0,Object.defineProperty(s,e,t))}var l1=Math.pow(2,32)-1,sO=[].push,_A={video:1,audio:2,id3:3,text:4};function Ji(s){return String.fromCharCode.apply(null,s)}function bA(s,e){let t=s[e]<<8|s[e+1];return t<0?65536+t:t}function Nt(s,e){let t=EA(s,e);return t<0?4294967296+t:t}function u1(s,e){let t=Nt(s,e);return t*=Math.pow(2,32),t+=Nt(s,e+4),t}function EA(s,e){return s[e]<<24|s[e+1]<<16|s[e+2]<<8|s[e+3]}function nO(s){let e=s.byteLength;for(let t=0;t<e;){let i=Nt(s,t);if(i>8&&s[t+4]===109&&s[t+5]===111&&s[t+6]===111&&s[t+7]===102)return!0;t=i>1?t+i:e}return!1}function zt(s,e){let t=[];if(!e.length)return t;let i=s.byteLength;for(let n=0;n<i;){let r=Nt(s,n),a=Ji(s.subarray(n+4,n+8)),o=r>1?n+r:i;if(a===e[0])if(e.length===1)t.push(s.subarray(n+8,o));else{let l=zt(s.subarray(n+8,o),e.slice(1));l.length&&sO.apply(t,l)}n=o}return t}function rO(s){let e=[],t=s[0],i=8,n=Nt(s,i);i+=4;let r=0,a=0;t===0?(r=Nt(s,i),a=Nt(s,i+4),i+=8):(r=u1(s,i),a=u1(s,i+8),i+=16),i+=2;let o=s.length+a,l=bA(s,i);i+=2;for(let u=0;u<l;u++){let c=i,h=Nt(s,c);c+=4;let g=h&2147483647;if((h&2147483648)>>>31===1)return ui.warn("SIDX has hierarchical references (not supported)"),null;let v=Nt(s,c);c+=4,e.push({referenceSize:g,subsegmentDuration:v,info:{duration:v/n,start:o,end:o+g-1}}),o+=g,c+=4,i=c}return{earliestPresentationTime:r,timescale:n,version:t,referencesCount:l,references:e}}function SA(s){let e=[],t=zt(s,["moov","trak"]);for(let n=0;n<t.length;n++){let r=t[n],a=zt(r,["tkhd"])[0];if(a){let o=a[0],l=Nt(a,o===0?12:20),u=zt(r,["mdia","mdhd"])[0];if(u){o=u[0];let c=Nt(u,o===0?12:20),h=zt(r,["mdia","hdlr"])[0];if(h){let g=Ji(h.subarray(8,12)),m={soun:mi.AUDIO,vide:mi.VIDEO}[g],v=zt(r,["mdia","minf","stbl","stsd"])[0],b=aO(v);m?(e[l]={timescale:c,type:m,stsd:b},e[m]=li({timescale:c,id:l},b)):e[l]={timescale:c,type:g,stsd:b}}}}}return zt(s,["moov","mvex","trex"]).forEach(n=>{let r=Nt(n,4),a=e[r];a&&(a.default={duration:Nt(n,12),flags:Nt(n,20)})}),e}function aO(s){let e=s.subarray(8),t=e.subarray(8+78),i=Ji(e.subarray(4,8)),n=i,r,a=i==="enca"||i==="encv";if(a){let u=zt(e,[i])[0].subarray(i==="enca"?28:78);zt(u,["sinf"]).forEach(h=>{let g=zt(h,["schm"])[0];if(g){let m=Ji(g.subarray(4,8));if(m==="cbcs"||m==="cenc"){let v=zt(h,["frma"])[0];v&&(n=Ji(v))}}})}let o=n;switch(n){case"avc1":case"avc2":case"avc3":case"avc4":{let l=zt(t,["avcC"])[0];l&&l.length>3&&(n+="."+Uf(l[1])+Uf(l[2])+Uf(l[3]),r=Bf(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{let l=zt(e,[i])[0],u=zt(l.subarray(28),["esds"])[0];if(u&&u.length>7){let c=4;if(u[c++]!==3)break;c=ay(u,c),c+=2;let h=u[c++];if(h&128&&(c+=2),h&64&&(c+=u[c++]),u[c++]!==4)break;c=ay(u,c);let g=u[c++];if(g===64)n+="."+Uf(g);else break;if(c+=12,u[c++]!==5)break;c=ay(u,c);let m=u[c++],v=(m&248)>>3;v===31&&(v+=1+((m&7)<<3)+((u[c]&224)>>5)),n+="."+v}break}case"hvc1":case"hev1":{let l=zt(t,["hvcC"])[0];if(l&&l.length>12){let u=l[1],c=["","A","B","C"][u>>6],h=u&31,g=Nt(l,2),m=(u&32)>>5?"H":"L",v=l[12],b=l.subarray(6,12);n+="."+c+h,n+="."+oO(g).toString(16).toUpperCase(),n+="."+m+v;let A="";for(let R=b.length;R--;){let F=b[R];(F||A)&&(A="."+F.toString(16).toUpperCase()+A)}n+=A}r=Bf(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{n=Bf(n,t)||n;break}case"vp09":{let l=zt(t,["vpcC"])[0];if(l&&l.length>6){let u=l[4],c=l[5],h=l[6]>>4&15;n+="."+Hr(u)+"."+Hr(c)+"."+Hr(h)}break}case"av01":{let l=zt(t,["av1C"])[0];if(l&&l.length>2){let u=l[1]>>>5,c=l[1]&31,h=l[2]>>>7?"H":"M",g=(l[2]&64)>>6,m=(l[2]&32)>>5,v=u===2&&g?m?12:10:g?10:8,b=(l[2]&16)>>4,A=(l[2]&8)>>3,R=(l[2]&4)>>2,F=l[2]&3,O=1,H=1,W=1,E=0;n+="."+u+"."+Hr(c)+h+"."+Hr(v)+"."+b+"."+A+R+F+"."+Hr(O)+"."+Hr(H)+"."+Hr(W)+"."+E,r=Bf("dav1",t)}break}}return{codec:n,encrypted:a,supplemental:r}}function Bf(s,e){let t=zt(e,["dvvC"]),i=t.length?t[0]:zt(e,["dvcC"])[0];if(i){let n=i[2]>>1&127,r=i[2]<<5&32|i[3]>>3&31;return s+"."+Hr(n)+"."+Hr(r)}}function oO(s){let e=0;for(let t=0;t<32;t++)e|=(s>>t&1)<<32-1-t;return e>>>0}function ay(s,e){let t=e+5;for(;s[e++]&128&&e<t;);return e}function Uf(s){return("0"+s.toString(16).toUpperCase()).slice(-2)}function Hr(s){return(s<10?"0":"")+s}function lO(s,e){if(!s||!e)return;let t=e.keyId;t&&e.isCommonEncryption&&xA(s,(i,n)=>{let r=i.subarray(8,24);r.some(a=>a!==0)||(ui.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${qs(r)} -> ${qs(t)}`),i.set(t,8))})}function uO(s){let e=[];return xA(s,t=>e.push(t.subarray(8,24))),e}function xA(s,e){zt(s,["moov","trak"]).forEach(i=>{let n=zt(i,["mdia","minf","stbl","stsd"])[0];if(!n)return;let r=n.subarray(8),a=zt(r,["enca"]),o=a.length>0;o||(a=zt(r,["encv"])),a.forEach(l=>{let u=o?l.subarray(28):l.subarray(78);zt(u,["sinf"]).forEach(h=>{let g=AA(h);g&&e(g,o)})})})}function AA(s){let e=zt(s,["schm"])[0];if(e){let t=Ji(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){let i=zt(s,["schi","tenc"])[0];if(i)return i}}}function cO(s,e,t){let i={},n=zt(s,["moof","traf"]);for(let r=0;r<n.length;r++){let a=n[r],o=zt(a,["tfhd"])[0],l=Nt(o,4),u=e[l];if(!u)continue;i[l]||(i[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});let c=i[l],h=zt(a,["tfdt"])[0];if(h){let O=h[0],H=Nt(h,4);O===1&&(H===l1?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(H*=l1+1,H+=Nt(h,8))),ft(H)&&(!ft(c.start)||H<c.start)&&(c.start=H)}let g=u.default,m=Nt(o,0)|g?.flags,v=g?.duration||0;m&8&&(m&2?v=Nt(o,12):v=Nt(o,8));let b=zt(a,["trun"]),A=c.start||0,R=0,F=v;for(let O=0;O<b.length;O++){let H=b[O],W=Nt(H,4),E=c.sampleCount;c.sampleCount+=W;let X=H[3]&1,Z=H[3]&4,re=H[2]&1,oe=H[2]&2,ve=H[2]&4,Ce=H[2]&8,we=8,Ge=W;for(X&&(we+=4),Z&&W&&(!(H[we+1]&1)&&c.keyFrameIndex===void 0&&(c.keyFrameIndex=E),we+=4,re?(F=Nt(H,we),we+=4):F=v,oe&&(we+=4),Ce&&(we+=4),A+=F,R+=F,Ge--);Ge--;)re?(F=Nt(H,we),we+=4):F=v,oe&&(we+=4),ve&&(H[we+1]&1||c.keyFrameIndex===void 0&&(c.keyFrameIndex=c.sampleCount-(Ge+1),c.keyFrameStart=A),we+=4),Ce&&(we+=4),A+=F,R+=F;!R&&v&&(R+=v*W)}c.duration+=R}if(!Object.keys(i).some(r=>i[r].duration)){let r=1/0,a=0,o=zt(s,["sidx"]);for(let l=0;l<o.length;l++){let u=rO(o[l]);if(u!=null&&u.references){r=Math.min(r,u.earliestPresentationTime/u.timescale);let c=u.references.reduce((h,g)=>h+g.info.duration||0,0);a=Math.max(a,c+u.earliestPresentationTime/u.timescale)}}a&&ft(a)&&Object.keys(i).forEach(l=>{i[l].duration||(i[l].duration=a*i[l].timescale-i[l].start)})}return i}function dO(s){let e={valid:null,remainder:null},t=zt(s,["moof"]);if(t.length<2)return e.remainder=s,e;let i=t[t.length-1];return e.valid=s.slice(0,i.byteOffset-8),e.remainder=s.slice(i.byteOffset-8),e}function Qn(s,e){let t=new Uint8Array(s.length+e.length);return t.set(s),t.set(e,s.length),t}function c1(s,e){let t=[],i=e.samples,n=e.timescale,r=e.id,a=!1;return zt(i,["moof"]).map(l=>{let u=l.byteOffset-8;zt(l,["traf"]).map(h=>{let g=zt(h,["tfdt"]).map(m=>{let v=m[0],b=Nt(m,4);return v===1&&(b*=Math.pow(2,32),b+=Nt(m,8)),b/n})[0];return g!==void 0&&(s=g),zt(h,["tfhd"]).map(m=>{let v=Nt(m,4),b=Nt(m,0)&16777215,A=(b&1)!==0,R=(b&2)!==0,F=(b&8)!==0,O=0,H=(b&16)!==0,W=0,E=(b&32)!==0,X=8;v===r&&(A&&(X+=8),R&&(X+=4),F&&(O=Nt(m,X),X+=4),H&&(W=Nt(m,X),X+=4),E&&(X+=4),e.type==="video"&&(a=Rp(e.codec)),zt(h,["trun"]).map(Z=>{let re=Z[0],oe=Nt(Z,0)&16777215,ve=(oe&1)!==0,Ce=0,we=(oe&4)!==0,Ge=(oe&256)!==0,Xe=0,Re=(oe&512)!==0,We=0,Qe=(oe&1024)!==0,rt=(oe&2048)!==0,gt=0,et=Nt(Z,4),Ye=8;ve&&(Ce=Nt(Z,Ye),Ye+=4),we&&(Ye+=4);let St=Ce+u;for(let wt=0;wt<et;wt++){if(Ge?(Xe=Nt(Z,Ye),Ye+=4):Xe=O,Re?(We=Nt(Z,Ye),Ye+=4):We=W,Qe&&(Ye+=4),rt&&(re===0?gt=Nt(Z,Ye):gt=EA(Z,Ye),Ye+=4),e.type===mi.VIDEO){let xt=0;for(;xt<We;){let At=Nt(i,St);if(St+=4,hO(a,i[St])){let ni=i.subarray(St,St+At);qv(ni,a?2:1,s+gt/n,t)}St+=At,xt+=At+4}}s+=Xe/n}}))})})}),t}function Rp(s){if(!s)return!1;let e=s.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function hO(s,e){if(s){let t=e>>1&63;return t===39||t===40}else return(e&31)===6}function qv(s,e,t,i){let n=CA(s),r=0;r+=e;let a=0,o=0,l=0;for(;r<n.length;){a=0;do{if(r>=n.length)break;l=n[r++],a+=l}while(l===255);o=0;do{if(r>=n.length)break;l=n[r++],o+=l}while(l===255);let u=n.length-r,c=r;if(o<u)r+=o;else if(o>u){ui.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(a===4){if(n[c++]===181){let g=bA(n,c);if(c+=2,g===49){let m=Nt(n,c);if(c+=4,m===1195456820){let v=n[c++];if(v===3){let b=n[c++],A=31&b,R=64&b,F=R?2+A*3:0,O=new Uint8Array(F);if(R){O[0]=b;for(let H=1;H<F;H++)O[H]=n[c++]}i.push({type:v,payloadType:a,pts:t,bytes:O})}}}}}else if(a===5&&o>16){let h=[];for(let v=0;v<16;v++){let b=n[c++].toString(16);h.push(b.length==1?"0"+b:b),(v===3||v===5||v===7||v===9)&&h.push("-")}let g=o-16,m=new Uint8Array(g);for(let v=0;v<g;v++)m[v]=n[c++];i.push({payloadType:a,pts:t,uuid:h.join(""),userData:kn(m),userDataBytes:m})}}}function CA(s){let e=s.byteLength,t=[],i=1;for(;i<e-2;)s[i]===0&&s[i+1]===0&&s[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return s;let n=e-t.length,r=new Uint8Array(n),a=0;for(i=0;i<n;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=s[a];return r}function fO(s){let e=s[0],t="",i="",n=0,r=0,a=0,o=0,l=0,u=0;if(e===0){for(;Ji(s.subarray(u,u+1))!=="\0";)t+=Ji(s.subarray(u,u+1)),u+=1;for(t+=Ji(s.subarray(u,u+1)),u+=1;Ji(s.subarray(u,u+1))!=="\0";)i+=Ji(s.subarray(u,u+1)),u+=1;i+=Ji(s.subarray(u,u+1)),u+=1,n=Nt(s,12),r=Nt(s,16),o=Nt(s,20),l=Nt(s,24),u=28}else if(e===1){u+=4,n=Nt(s,u),u+=4;let h=Nt(s,u);u+=4;let g=Nt(s,u);for(u+=4,a=2**32*h+g,qP(a)||(a=Number.MAX_SAFE_INTEGER,ui.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Nt(s,u),u+=4,l=Nt(s,u),u+=4;Ji(s.subarray(u,u+1))!=="\0";)t+=Ji(s.subarray(u,u+1)),u+=1;for(t+=Ji(s.subarray(u,u+1)),u+=1;Ji(s.subarray(u,u+1))!=="\0";)i+=Ji(s.subarray(u,u+1)),u+=1;i+=Ji(s.subarray(u,u+1)),u+=1}let c=s.subarray(u,s.byteLength);return{schemeIdUri:t,value:i,timeScale:n,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:l,payload:c}}function pO(s,...e){let t=e.length,i=8,n=t;for(;n--;)i+=e[n].byteLength;let r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(s,4),n=0,i=8;n<t;n++)r.set(e[n],i),i+=e[n].byteLength;return r}function gO(s,e,t){if(s.byteLength!==16)throw new RangeError("Invalid system id");let i,n;i=0,n=new Uint8Array;let r;i>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;let a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),pO([112,115,115,104],new Uint8Array([i,0,0,0]),s,r,n,a,t)}function mO(s){let e=[];if(s instanceof ArrayBuffer){let t=s.byteLength,i=0;for(;i+32<t;){let n=new DataView(s,i),r=yO(n);e.push(r),i+=r.size}}return e}function yO(s){let e=s.getUint32(0),t=s.byteOffset,i=s.byteLength;if(i<e)return{offset:t,size:i};if(s.getUint32(4)!==1886614376)return{offset:t,size:e};let r=s.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:t,size:e};let a=s.buffer,o=qs(new Uint8Array(a,t+12,16)),l=null,u=null,c=0;if(r===0)c=28;else{let g=s.getUint32(28);if(!g||i<32+g*16)return{offset:t,size:e};l=[];for(let m=0;m<g;m++)l.push(new Uint8Array(a,t+32+m*16,16));c=32+g*16}if(!c)return{offset:t,size:e};let h=s.getUint32(c);return e-32<h?{offset:t,size:e}:(u=new Uint8Array(a,t+c+4,h),{version:r,systemId:o,kids:l,data:u,offset:t,size:e})}var wA=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Cu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function zv(s,e){let t=Cu[e];return!!t&&!!t[s.slice(0,4)]}function dd(s,e,t=!0){return!s.split(",").some(i=>!Wv(i,e,t))}function Wv(s,e,t=!0){var i;let n=to(t);return(i=n?.isTypeSupported(hd(s,e)))!=null?i:!1}function hd(s,e){return`${e}/mp4;codecs=${s}`}function d1(s){if(s){let e=s.substring(0,4);return Cu.video[e]}return 2}function lp(s){let e=wA();return s.split(",").reduce((t,i)=>{let r=e&&Rp(i)?9:Cu.video[i];return r?(r*2+t)/(t?3:2):(Cu.audio[i]+t)/(t?2:1)},0)}var oy={};function vO(s,e=!0){if(oy[s])return oy[s];let t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[s];for(let n=0;n<t.length;n++){var i;if(Wv(t[n],"audio",e))return oy[s]=t[n],t[n];if(t[n]==="mp3"&&(i=to(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return s}var TO=/flac|opus|mp4a\.40\.34/i;function up(s,e=!0){return s.replace(TO,t=>vO(t.toLowerCase(),e))}function _O(s,e){let t=[];if(s){let i=s.split(",");for(let n=0;n<i.length;n++)zv(i[n],"video")||t.push(i[n])}return e&&t.push(e),t.join(",")}function ep(s,e){if(s&&(s.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(s)!==-1)&&(h1(s,"audio")||h1(s,"video")))return s;if(e){let t=e.split(",");if(t.length>1){if(s){for(let i=t.length;i--;)if(t[i].substring(0,4)===s.substring(0,4))return t[i]}return t[0]}}return e||s}function h1(s,e){return zv(s,e)&&Wv(s,e)}function bO(s){let e=s.split(",");for(let t=0;t<e.length;t++){let i=e[t].split(".");i.length>2&&i[0]==="avc1"&&(e[t]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function EO(s){if(s.startsWith("av01.")){let e=s.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return s}function f1(s){let e=to(s)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function ky(s){return s.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}var SO={supported:!0,powerEfficient:!0,smooth:!0},xO={supported:!1,smooth:!1,powerEfficient:!1},IA={supported:!0,configurations:[],decodingInfoResults:[SO]};function DA(s,e){return{supported:!1,configurations:e,decodingInfoResults:[xO],error:s}}function AO(s,e,t,i,n,r){let a=s.videoCodec,o=s.audioCodec?s.audioGroups:null,l=r?.audioCodec,u=r?.channels,c=u?parseInt(u):l?1/0:2,h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((g,m)=>{if(m){let v=e.groups[m];if(!v)throw new Error(`Audio track group ${m} not found`);Object.keys(v.channels).forEach(b=>{g[b]=(g[b]||0)+v.channels[b]})}return g},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(g=>Rp(g))||s.width>1920&&s.height>1088||s.height>1920&&s.width>1088||s.frameRate>Math.max(i,30)||s.videoRange!=="SDR"&&s.videoRange!==t||s.bitrate>Math.max(n,8e6))||!!h&&ft(c)&&Object.keys(h).some(g=>parseInt(g)>c)}function LA(s,e,t,i={}){let n=s.videoCodec;if(!n&&!s.audioCodec||!t)return Promise.resolve(IA);let r=[],a=CO(s),o=a.length,l=wO(s,e,o>0),u=l.length;for(let c=o||1*u||1;c--;){let h={type:"media-source"};if(o&&(h.video=a[c%o]),u){h.audio=l[c%u];let g=h.audio.bitrate;h.video&&g&&(h.video.bitrate-=g)}r.push(h)}if(n){let c=navigator.userAgent;if(n.split(",").some(h=>Rp(h))&&wA())return Promise.resolve(DA(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${c})`),r))}return Promise.all(r.map(c=>{let h=DO(c);return i[h]||(i[h]=t.decodingInfo(c))})).then(c=>({supported:!c.some(h=>!h.supported),configurations:r,decodingInfoResults:c})).catch(c=>({supported:!1,configurations:r,decodingInfoResults:[],error:c}))}function CO(s){var e;let t=(e=s.videoCodec)==null?void 0:e.split(","),i=kA(s),n=s.width||640,r=s.height||480,a=s.frameRate||30,o=s.videoRange.toLowerCase();return t?t.map(l=>{let u={contentType:hd(EO(l),"video"),width:n,height:r,bitrate:i,framerate:a};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function wO(s,e,t){var i;let n=(i=s.audioCodec)==null?void 0:i.split(","),r=kA(s);return n&&s.audioGroups?s.audioGroups.reduce((a,o)=>{var l;let u=o?(l=e.groups[o])==null?void 0:l.tracks:null;return u?u.reduce((c,h)=>{if(h.groupId===o){let g=parseFloat(h.channels||"");n.forEach(m=>{let v={contentType:hd(m,"audio"),bitrate:t?IO(m,r):r};g&&(v.channels=""+g),c.push(v)})}return c},a):a},[]):[]}function IO(s,e){if(e<=1)return 1;let t=128e3;return s==="ec-3"?t=768e3:s==="ac-3"&&(t=64e4),Math.min(e/2,t)}function kA(s){return Math.ceil(Math.max(s.bitrate*.9,s.averageBitrate)/1e3)*1e3||1}function DO(s){let e="",{audio:t,video:i}=s;if(i){let n=ky(i.contentType);e+=`${n}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(t){let n=ky(t.contentType);e+=`${i?"_":""}${n}_c${t.channels}`}return e}var Ry=["NONE","TYPE-0","TYPE-1",null];function LO(s){return Ry.indexOf(s)>-1}var cp=["SDR","PQ","HLG"];function kO(s){return!!s&&cp.indexOf(s)>-1}var tp={No:"",Yes:"YES",v2:"v2"};function p1(s){let{canSkipUntil:e,canSkipDateRanges:t,age:i}=s,n=i<e/2;return e&&n?t?tp.v2:tp.Yes:tp.No}var dp=class{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){let t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}},Ko=class{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;let i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return g1(this._audioGroups,e)}hasSubtitleGroup(e){return g1(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(!!t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}};function g1(s,e){return!e||!s?!1:s.indexOf(e)!==-1}function RO(){if(typeof matchMedia=="function"){let s=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(s.media!==e.media)return s.matches===!0}return!1}function PO(s,e){let t=!1,i=[];if(s&&(t=s!=="SDR",i=[s]),e){i=e.allowedVideoRanges||cp.slice(0);let n=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:n&&RO(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}var OO=s=>{let e=new WeakSet;return(t,i)=>{if(s&&(i=s(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},yi=(s,e)=>JSON.stringify(s,OO(e));function MO(s,e,t,i,n){let r=Object.keys(s),a=i?.channels,o=i?.audioCodec,l=n?.videoCodec,u=a&&parseInt(a)===2,c=!1,h=!1,g=1/0,m=1/0,v=1/0,b=1/0,A=0,R=[],{preferHDR:F,allowedVideoRanges:O}=PO(e,n);for(let Z=r.length;Z--;){let re=s[r[Z]];c||(c=re.channels[2]>0),g=Math.min(g,re.minHeight),m=Math.min(m,re.minFramerate),v=Math.min(v,re.minBitrate),O.filter(ve=>re.videoRanges[ve]>0).length>0&&(h=!0)}g=ft(g)?g:0,m=ft(m)?m:0;let H=Math.max(1080,g),W=Math.max(30,m);v=ft(v)?v:t,t=Math.max(v,t),h||(e=void 0);let E=r.length>1;return{codecSet:r.reduce((Z,re)=>{let oe=s[re];if(re===Z)return Z;if(R=h?O.filter(ve=>oe.videoRanges[ve]>0):[],E){if(oe.minBitrate>t)return Br(re,`min bitrate of ${oe.minBitrate} > current estimate of ${t}`),Z;if(!oe.hasDefaultAudio)return Br(re,"no renditions with default or auto-select sound found"),Z;if(o&&re.indexOf(o.substring(0,4))%5!==0)return Br(re,`audio codec preference "${o}" not found`),Z;if(a&&!u){if(!oe.channels[a])return Br(re,`no renditions with ${a} channel sound found (channels options: ${Object.keys(oe.channels)})`),Z}else if((!o||u)&&c&&oe.channels[2]===0)return Br(re,"no renditions with stereo sound found"),Z;if(oe.minHeight>H)return Br(re,`min resolution of ${oe.minHeight} > maximum of ${H}`),Z;if(oe.minFramerate>W)return Br(re,`min framerate of ${oe.minFramerate} > maximum of ${W}`),Z;if(!R.some(ve=>oe.videoRanges[ve]>0))return Br(re,`no variants with VIDEO-RANGE of ${yi(R)} found`),Z;if(l&&re.indexOf(l.substring(0,4))%5!==0)return Br(re,`video codec preference "${l}" not found`),Z;if(oe.maxScore<A)return Br(re,`max score of ${oe.maxScore} < selected max of ${A}`),Z}return Z&&(lp(re)>=lp(Z)||oe.fragmentError>s[Z].fragmentError)?Z:(b=oe.minIndex,A=oe.maxScore,re)},void 0),videoRanges:R,preferHDR:F,minFramerate:m,minBitrate:v,minIndex:b}}function Br(s,e){ui.log(`[abr] start candidates with "${s}" ignored because ${e}`)}function RA(s){return s.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);let n=t.channels||"2";return i.channels[n]=(i.channels[n]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function NO(s,e,t,i){return s.slice(t,i+1).reduce((n,r,a)=>{if(!r.codecSet)return n;let o=r.audioGroups,l=n[r.codecSet];l||(n[r.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,r.bitrate);let u=Math.min(r.height,r.width);return l.minHeight=Math.min(l.minHeight,u),l.minFramerate=Math.min(l.minFramerate,r.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,r.score),l.fragmentError+=r.fragmentError,l.videoRanges[r.videoRange]=(l.videoRanges[r.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;let h=e.groups[c];!h||(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(g=>{l.channels[g]=(l.channels[g]||0)+h.channels[g]}))}),n},{})}function m1(s){if(!s)return s;let{lang:e,assocLang:t,characteristics:i,channels:n,audioCodec:r}=s;return{lang:e,assocLang:t,characteristics:i,channels:n,audioCodec:r}}function Gr(s,e,t){if("attrs"in s){let i=e.indexOf(s);if(i!==-1)return i}for(let i=0;i<e.length;i++){let n=e[i];if(zo(s,n,t))return i}return-1}function zo(s,e,t){let{groupId:i,name:n,lang:r,assocLang:a,default:o}=s,l=s.forced;return(i===void 0||e.groupId===i)&&(n===void 0||e.name===n)&&(r===void 0||FO(r,e.lang))&&(r===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in s)||$O(s.characteristics||"",e.characteristics))&&(t===void 0||t(s,e))}function FO(s,e="--"){return s.length===e.length?s===e:s.startsWith(e)||e.startsWith(s)}function $O(s,e=""){let t=s.split(","),i=e.split(",");return t.length===i.length&&!t.some(n=>i.indexOf(n)===-1)}function qo(s,e){let{audioCodec:t,channels:i}=s;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function BO(s,e,t,i,n){let r=e[i],o=e.reduce((g,m,v)=>{let b=m.uri;return(g[b]||(g[b]=[])).push(v),g},{})[r.uri];o.length>1&&(i=Math.max.apply(Math,o));let l=r.videoRange,u=r.frameRate,c=r.codecSet.substring(0,4),h=y1(e,i,g=>{if(g.videoRange!==l||g.frameRate!==u||g.codecSet.substring(0,4)!==c)return!1;let m=g.audioGroups,v=t.filter(b=>!m||m.indexOf(b.groupId)!==-1);return Gr(s,v,n)>-1});return h>-1?h:y1(e,i,g=>{let m=g.audioGroups,v=t.filter(b=>!m||m.indexOf(b.groupId)!==-1);return Gr(s,v,n)>-1})}function y1(s,e,t){for(let i=e;i>-1;i--)if(t(s[i]))return i;for(let i=e+1;i<s.length;i++)if(t(s[i]))return i;return-1}function hp(s,e){var t;return!!s&&s!==((t=e.loadLevelObj)==null?void 0:t.uri)}var Py=class extends pn{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;let{fragCurrent:n,partCurrent:r,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!n||!l)return;let u=performance.now(),c=r?r.stats:n.stats,h=r?r.duration:n.duration,g=u-c.loading.start,m=a.minAutoLevel,v=n.level,b=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||v<=m){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;let A=b>-1&&b!==v,R=!!t||A;if(!R&&(l.paused||!l.playbackRate||!l.readyState))return;let F=a.mainForwardBufferInfo;if(!R&&F===null)return;let O=this.bwEstimator.getEstimateTTFB(),H=Math.abs(l.playbackRate);if(g<=Math.max(O,1e3*(h/(H*2))))return;let W=F?F.len/H:0,E=c.loading.first?c.loading.first-c.loading.start:-1,X=c.loaded&&E>-1,Z=this.getBwEstimate(),re=a.levels,oe=re[v],ve=Math.max(c.loaded,Math.round(h*(n.bitrate||oe.averageBitrate)/8)),Ce=X?g-E:g;Ce<1&&X&&(Ce=Math.min(g,c.loaded*8/Z));let we=X?c.loaded*1e3/Ce:0,Ge=O/1e3,Xe=we?(ve-c.loaded)/we:ve*8/Z+Ge;if(Xe<=W)return;let Re=we?we*8:Z,We=((i=t?.details||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,Qe=this.hls.config.abrBandWidthUpFactor,rt=Number.POSITIVE_INFINITY,gt;for(gt=v-1;gt>m;gt--){let wt=re[gt].maxBitrate,xt=!re[gt].details||We;if(rt=this.getTimeToLoadFrag(Ge,Re,h*wt,xt),rt<Math.min(W,h+Ge))break}if(rt>=Xe||rt>h*10)return;X?this.bwEstimator.sample(g-Math.min(O,E),c.loaded):this.bwEstimator.sampleTTFB(g);let et=re[gt].maxBitrate;this.getBwEstimate()*Qe>et&&this.resetEstimator(et);let Ye=this.findBestLevel(et,m,gt,0,W,1,1);Ye>-1&&(gt=Ye),this.warn(`Fragment ${n.sn}${r?" part "+r.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${n.duration.toFixed(3)}
      Time to underbuffer: ${W.toFixed(3)} s
      Estimated load time for current fragment: ${Xe.toFixed(3)} s
      Estimated load time for down switch fragment: ${rt.toFixed(3)} s
      TTFB estimate: ${E|0} ms
      Current BW estimate: ${ft(Z)?Z|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${gt} @ ${et|0} bps`),a.nextLoadLevel=a.nextAutoLevel=gt,this.clearTimer();let St=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===gt&&gt>0){let wt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${gt>0?"and switching down":""}
      Fragment duration: ${n.duration.toFixed(3)} s
      Time to underbuffer: ${wt.toFixed(3)} s`),n.abortRequests(),this.fragCurrent=this.partCurrent=null,gt>m){let xt=this.findBestLevel(this.hls.levels[m].bitrate,m,gt,0,wt,1,1);xt===-1&&(xt=m),this.hls.nextLoadLevel=this.hls.nextAutoLevel=xt,this.resetEstimator(this.hls.levels[xt].bitrate)}}};A||Xe>rt*2?St():this.timer=self.setInterval(St,rt*1e3),a.trigger(B.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){let e=this.hls.config;return new wy(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){let{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;!e||(e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(B.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){let i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var n;this.fragCurrent=i,this.partCurrent=(n=t.part)!=null?n:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Ae.BUFFER_ADD_CODEC_ERROR:case Ae.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Ae.FRAG_LOAD_TIMEOUT:{let i=t.frag,{fragCurrent:n,partCurrent:r}=this;if(i&&n&&i.sn===n.sn&&i.level===n.level){let a=performance.now(),o=r?r.stats:i.stats,l=a-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){let h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(h,u),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,i,n){let r=e+i/t,a=n?e+this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,t){let i=this.hls.config,{loading:n}=t.stats,r=n.end-n.first;ft(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){let n=i?i.stats:t.stats;if(t.type===vt.MAIN&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){let r=i?i.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+n.loaded,l=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){let r={stats:n,frag:t,part:i,id:t.type};this.onFragBuffered(B.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){let{frag:i,part:n}=t,r=n!=null&&n.stats.loaded?n.stats:i.stats;if(r.aborted||this.ignoreFragment(i))return;let a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==vt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){let{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,n,1,1);if(r>-1)return r;let a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){let e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;let r=i&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){let a=this.hls.levels;if(a.length>Math.max(e,r)&&a[e].loadError<=a[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){let{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;let{maxAutoLevel:n,config:r,minAutoLevel:a}=i,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay(),c=r.abrBandWidthFactor,h=r.abrBandWidthUpFactor;if(u){let A=this.findBestLevel(l,a,n,u,0,c,h);if(A>=0)return this.rebufferNotice=-1,A}let g=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!u){let A=this.bitrateTestDelay;A&&(g=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-A,this.info(`bitrate test took ${Math.round(1e3*A)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),c=h=1)}let m=this.findBestLevel(l,a,n,u,g,c,h);if(this.rebufferNotice!==m&&(this.rebufferNotice=m,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`)),m>-1)return m;let v=i.levels[a],b=i.loadLevelObj;return b&&v?.bitrate<b.bitrate?a:i.loadLevel}getStarvationDelay(){let e=this.hls,t=e.media;if(!t)return 1/0;let i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,n,r,a,o){var l;let u=n+r,c=this.lastLoadedFragLevel,h=c===-1?this.hls.firstLevel:c,{fragCurrent:g,partCurrent:m}=this,{levels:v,allAudioTracks:b,loadLevel:A,config:R}=this.hls;if(v.length===1)return 0;let F=v[h],O=!!((l=this.hls.latestLevelDetails)!=null&&l.live),H=A===-1||c===-1,W,E="SDR",X=F?.frameRate||0,{audioPreference:Z,videoPreference:re}=R,oe=this.audioTracksByGroup||(this.audioTracksByGroup=RA(b)),ve=-1;if(H){if(this.firstSelection!==-1)return this.firstSelection;let Re=this.codecTiers||(this.codecTiers=NO(v,oe,t,i)),We=MO(Re,E,e,Z,re),{codecSet:Qe,videoRanges:rt,minFramerate:gt,minBitrate:et,minIndex:Ye,preferHDR:St}=We;ve=Ye,W=Qe,E=St?rt[rt.length-1]:rt[0],X=gt,e=Math.max(e,et),this.log(`picked start tier ${yi(We)}`)}else W=F?.codecSet,E=F?.videoRange;let Ce=m?m.duration:g?g.duration:0,we=this.bwEstimator.getEstimateTTFB()/1e3,Ge=[];for(let Re=i;Re>=t;Re--){var Xe;let We=v[Re],Qe=Re>h;if(!We)continue;if(R.useMediaCapabilities&&!We.supportedResult&&!We.supportedPromise){let xt=navigator.mediaCapabilities;typeof xt?.decodingInfo=="function"&&AO(We,oe,E,X,e,Z)?(We.supportedPromise=LA(We,oe,xt,this.supportedCache),We.supportedPromise.then(At=>{if(!this.hls)return;We.supportedResult=At;let ni=this.hls.levels,Xt=ni.indexOf(We);At.error?this.warn(`MediaCapabilities decodingInfo error: "${At.error}" for level ${Xt} ${yi(At)}`):At.supported?At.decodingInfoResults.some(Fe=>Fe.smooth===!1||Fe.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Xt} not smooth or powerEfficient: ${yi(At)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Xt} ${yi(At)}`),Xt>-1&&ni.length>1&&(this.log(`Removing unsupported level ${Xt}`),this.hls.removeLevel(Xt),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(At=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${At}`)})):We.supportedResult=IA}if((W&&We.codecSet!==W||E&&We.videoRange!==E||Qe&&X>We.frameRate||!Qe&&X>0&&X<We.frameRate||(Xe=We.supportedResult)!=null&&(Xe=Xe.decodingInfoResults)!=null&&Xe.some(xt=>xt.smooth===!1))&&(!H||Re!==ve)){Ge.push(Re);continue}let rt=We.details,gt=(m?rt?.partTarget:rt?.averagetargetduration)||Ce,et;Qe?et=o*e:et=a*e;let Ye=Ce&&n>=Ce*2&&r===0?We.averageBitrate:We.maxBitrate,St=this.getTimeToLoadFrag(we,et,Ye*gt,rt===void 0);if(et>=Ye&&(Re===c||We.loadError===0&&We.fragmentError===0)&&(St<=we||!ft(St)||O&&!this.bitrateTestDelay||St<u)){let xt=this.forcedAutoLevel;return Re!==A&&(xt===-1||xt!==A)&&(Ge.length&&this.trace(`Skipped level(s) ${Ge.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${v[Ge[0]].codecs}" ${v[Ge[0]].videoRange}; not compatible with "${W}" ${E}`),this.info(`switch candidate:${h}->${Re} adjustedbw(${Math.round(et)})-bitrate=${Math.round(et-Ye)} ttfb:${we.toFixed(1)} avgDuration:${gt.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${St.toFixed(1)} firstSelection:${H} codecSet:${We.codecSet} videoRange:${We.videoRange} hls.loadLevel:${A}`)),H&&(this.firstSelection=Re),Re}}return-1}set nextAutoLevel(e){let t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){let{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}},PA={search:function(s,e){let t=0,i=s.length-1,n=null,r=null;for(;t<=i;){n=(t+i)/2|0,r=s[n];let a=e(r);if(a>0)t=n+1;else if(a<0)i=n-1;else return r}return null}};function UO(s,e,t){if(e===null||!Array.isArray(s)||!s.length||!ft(e))return null;let i=s[0].programDateTime;if(e<(i||0))return null;let n=s[s.length-1].endProgramDateTime;if(e>=(n||0))return null;for(let r=0;r<s.length;++r){let a=s[r];if(VO(e,t,a))return a}return null}function Yo(s,e,t=0,i=0,n=.005){let r=null;if(s){r=e[1+s.sn-e[0].sn]||null;let o=s.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),r&&s.level!==r.level&&r.end<=s.end&&(r=e[2+s.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(r=e[0]);if(r&&((!s||s.level===r.level)&&v1(t,i,r)===0||HO(r,s,Math.min(n,i))))return r;let a=PA.search(e,v1.bind(null,t,i));return a&&(a!==s||!r)?a:r}function HO(s,e,t){if(e&&e.start===0&&e.level<s.level&&(e.endPTS||0)>0){let i=e.tagList.reduce((n,r)=>(r[0]==="INF"&&(n+=parseFloat(r[1])),n),t);return s.start<=i}return!1}function v1(s=0,e=0,t){if(t.start<=s&&t.start+t.duration>s)return 0;let i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=s?1:t.start-i>s&&t.start?-1:0}function VO(s,e,t){let i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>s}function OA(s,e,t){if(s&&s.startCC<=e&&s.endCC>=e){let i=s.fragments,{fragmentHint:n}=s;n&&(i=i.concat(n));let r;return PA.search(i,a=>a.cc<e?1:a.cc>e?-1:(r=a,a.end<=t?1:a.start>t?-1:0)),r||null}return null}function fp(s){switch(s.details){case Ae.FRAG_LOAD_TIMEOUT:case Ae.KEY_LOAD_TIMEOUT:case Ae.LEVEL_LOAD_TIMEOUT:case Ae.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function MA(s){return s.details.startsWith("key")}function NA(s){return MA(s)&&!!s.frag&&!s.frag.decryptdata}function T1(s,e){let t=fp(e);return s.default[`${t?"timeout":"error"}Retry`]}function Kv(s,e){let t=s.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*s.retryDelayMs,s.maxRetryDelayMs)}function _1(s){return li(li({},s),{errorRetry:null,timeoutRetry:null})}function pp(s,e,t,i){if(!s)return!1;let n=i?.code,r=e<s.maxNumRetry&&(jO(n)||!!t);return s.shouldRetry?s.shouldRetry(s,e,t,i,r):r}function jO(s){return Oy(s)||!!s&&(s<400||s>499)}function Oy(s){return s===0&&navigator.onLine===!1}var hs={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},In={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4,SwitchToSDR:8},My=class extends pn{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){let e=this.hls;e.on(B.ERROR,this.onError,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){let e=this.hls;!e||(e.off(B.ERROR,this.onError,this),e.off(B.ERROR,this.onErrorOut,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===vt.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;let t=this.hls,i=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||i===-1?t.loadLevel:i}variantHasKey(e,t){if(e){var i;if((i=e.details)!=null&&i.hasKey(t))return!0;let n=e.audioGroups;if(n)return this.hls.allAudioTracks.filter(a=>n.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;let n=this.hls,r=t.context;switch(t.details){case Ae.FRAG_LOAD_ERROR:case Ae.FRAG_LOAD_TIMEOUT:case Ae.KEY_LOAD_ERROR:case Ae.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Ae.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=Eu();return}case Ae.FRAG_GAP:case Ae.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=hs.SendAlternateToPenaltyBox;return}case Ae.LEVEL_EMPTY_ERROR:case Ae.LEVEL_PARSING_ERROR:{var a;let l=t.parent===vt.MAIN?t.level:n.loadLevel;t.details===Ae.LEVEL_EMPTY_ERROR&&!!((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l))}return;case Ae.LEVEL_LOAD_ERROR:case Ae.LEVEL_LOAD_TIMEOUT:typeof r?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level));return;case Ae.AUDIO_TRACK_LOAD_ERROR:case Ae.AUDIO_TRACK_LOAD_TIMEOUT:case Ae.SUBTITLE_LOAD_ERROR:case Ae.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){let l=n.loadLevelObj;if(l&&(r.type===Yt.AUDIO_TRACK&&l.hasAudioGroup(r.groupId)||r.type===Yt.SUBTITLE_TRACK&&l.hasSubtitleGroup(r.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=hs.SendAlternateToPenaltyBox,t.errorAction.flags=In.MoveAllAlternatesMatchingHost;return}}return;case Ae.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:hs.SendAlternateToPenaltyBox,flags:In.MoveAllAlternatesMatchingHDCP};return;case Ae.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Ae.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Ae.KEY_SYSTEM_NO_SESSION:t.errorAction={action:hs.SendAlternateToPenaltyBox,flags:In.MoveAllAlternatesMatchingKey};return;case Ae.BUFFER_ADD_CODEC_ERROR:case Ae.REMUX_ALLOC_ERROR:case Ae.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:n.loadLevel)}return;case Ae.INTERNAL_EXCEPTION:case Ae.BUFFER_APPENDING_ERROR:case Ae.BUFFER_FULL_ERROR:case Ae.LEVEL_SWITCH_ERROR:case Ae.BUFFER_STALLED_ERROR:case Ae.BUFFER_SEEK_OVER_HOLE:case Ae.BUFFER_NUDGE_ON_STALL:t.errorAction=Eu();return}t.type===Et.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Eu())}getPlaylistRetryOrSwitchAction(e,t){let i=this.hls,n=T1(i.config.playlistLoadPolicy,e),r=this.playlistError++;if(pp(n,r,fp(e),e.response))return{action:hs.RetryRequest,flags:In.None,retryConfig:n,retryCount:r};let o=this.getLevelSwitchAction(e,t);return n&&(o.retryConfig=n,o.retryCount=r),o}getFragRetryOrSwitchAction(e){let t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:a}=t.config,o=T1(MA(e)?a:r,e),l=t.levels.reduce((c,h)=>c+h.fragmentError,0);if(n&&(e.details!==Ae.FRAG_GAP&&n.fragmentError++,!NA(e)&&pp(o,l,fp(e),e.response)))return{action:hs.RetryRequest,flags:In.None,retryConfig:o,retryCount:l};let u=this.getLevelSwitchAction(e,i);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,t){let i=this.hls;t==null&&(t=i.loadLevel);let n=this.hls.levels[t];if(n){var r,a;let u=e.details;n.loadError++,u===Ae.BUFFER_APPEND_ERROR&&n.fragmentError++;let c=-1,{levels:h,loadLevel:g,minAutoLevel:m,maxAutoLevel:v}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);let b=(r=e.frag)==null?void 0:r.type,R=(b===vt.AUDIO&&u===Ae.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===Ae.BUFFER_ADD_CODEC_ERROR||u===Ae.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:E})=>n.audioCodec!==E),O=e.sourceBufferName==="video"&&(u===Ae.BUFFER_ADD_CODEC_ERROR||u===Ae.BUFFER_APPEND_ERROR)&&h.some(({codecSet:E,audioCodec:X})=>n.codecSet!==E&&n.audioCodec===X),{type:H,groupId:W}=(a=e.context)!=null?a:{};for(let E=h.length;E--;){let X=(E+g)%h.length;if(X!==g&&X>=m&&X<=v&&h[X].loadError===0){var o,l;let Z=h[X];if(u===Ae.FRAG_GAP&&b===vt.MAIN&&e.frag){let re=h[X].details;if(re){let oe=Yo(e.frag,re.fragments,e.frag.start);if(oe!=null&&oe.gap)continue}}else{if(H===Yt.AUDIO_TRACK&&Z.hasAudioGroup(W)||H===Yt.SUBTITLE_TRACK&&Z.hasSubtitleGroup(W))continue;if(b===vt.AUDIO&&(o=n.audioGroups)!=null&&o.some(re=>Z.hasAudioGroup(re))||b===vt.SUBTITLE&&(l=n.subtitleGroups)!=null&&l.some(re=>Z.hasSubtitleGroup(re))||R&&n.audioCodec===Z.audioCodec||O&&n.codecSet===Z.codecSet||!R&&n.codecSet!==Z.codecSet)continue}c=X;break}}if(c>-1&&i.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:hs.SendAlternateToPenaltyBox,flags:In.None,nextAutoLevel:c}}return{action:hs.SendAlternateToPenaltyBox,flags:In.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case hs.DoNothing:break;case hs.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Ae.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break;case hs.RetryRequest:break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){let t=this.hls,i=e.errorAction;if(!i)return;let{flags:n}=i,r=i.nextAutoLevel;switch(n){case In.None:this.switchLevel(e,r);break;case In.MoveAllAlternatesMatchingHDCP:{let l=this.getVariantLevelIndex(e.frag),u=t.levels[l],c=u?.attrs["HDCP-LEVEL"];if(i.hdcpLevel=c,c==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(c){t.maxHdcpLevel=Ry[Ry.indexOf(c)-1],i.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case In.MoveAllAlternatesMatchingKey:{let l=e.decryptdata;if(l){let u=this.hls.levels,c=u.length;for(let g=c;g--;)if(this.variantHasKey(u[g],l)){var a,o;this.log(`Banned key found in level ${g} (${u[g].bitrate}bps) or audio group "${(a=u[g].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${qs(l.keyId||[])}`),u[g].fragmentError++,u[g].loadError++,this.log(`Removing level ${g} with key error (${e.error})`),this.hls.removeLevel(g)}let h=e.frag;if(this.hls.levels.length<c)i.resolved=!0;else if(h&&h.type!==vt.MAIN){let g=h.decryptdata;g&&!l.matches(g)&&(i.resolved=!0)}}break}}i.resolved||this.switchLevel(e,r)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Ae.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){let i=ky(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r][`${e.sourceBufferName}Codec`]===i&&(this.log(`Removing level ${r} for ${e.details} ("${i}" not supported)`),this.hls.removeLevel(r))}}};function Eu(s){let e={action:hs.DoNothing,flags:In.None};return s&&(e.resolved=!0),e}var Zi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Ny=class{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){let{hls:e}=this;e&&(e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){let{hls:e}=this;e&&(e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){let i=this.activePartLists[t];if(i)for(let n=i.length;n--;){let r=i[n];if(!r)break;if(r.start<=e&&e<=r.end&&r.loaded)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){let{fragments:n}=this,r=Object.keys(n);for(let a=r.length;a--;){let o=n[r[a]];if(o?.body.type===t&&(!i||o.buffered)){let l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,i,n,r){this.timeRanges&&(this.timeRanges[e]=t);let a=n?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{let l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||r)){l.body.type===i&&this.removeFragment(l.body);return}let u=l.range[e];if(!!u){if(u.time.length===0){this.removeFragment(l.body);return}u.time.some(c=>{let h=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return h&&this.removeFragment(l.body),h})}})}detectPartialFragments(e){let t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;let i=e.frag,n=mu(i),r=this.fragments[n];if(!r||r.buffered&&i.gap)return;let a=!i.relurl;Object.keys(t).forEach(o=>{let l=i.elementaryStreams[o];if(!l)return;let u=t[o],c=a||l.partial===!0;r.range[o]=this.getBufferedTimes(i,e.part,c,u)}),r.loaded=null,Object.keys(r.range).length?(r.buffered=!0,(r.body.endList=i.endList||r.body.endList)&&(this.endListFragments[r.body.type]=r),Hf(r)||this.removeParts(i.sn-1,i.type)):this.removeFragment(r.body)}removeParts(e,t){let i=this.activePartLists[t];!i||(this.activePartLists[t]=b1(i,n=>n.fragment.sn>=e))}fragBuffered(e,t){let i=mu(e),n=this.fragments[i];!n&&t&&(n=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)}getBufferedTimes(e,t,i,n){let r={time:[],partial:i},a=e.start,o=e.end,l=e.minEndPTS||o,u=e.maxStartPTS||a;for(let c=0;c<n.length;c++){let h=n.start(c)-this.bufferPadding,g=n.end(c)+this.bufferPadding;if(u>=h&&l<=g){r.time.push({startPTS:Math.max(a,n.start(c)),endPTS:Math.min(o,n.end(c))});break}else if(a<g&&o>h){let m=Math.max(a,n.start(c)),v=Math.min(o,n.end(c));v>m&&(r.partial=!0,r.time.push({startPTS:m,endPTS:v}))}else if(o<=h)break}return r}getPartialFragment(e){let t=null,i,n,r,a=0,{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(u=>{let c=l[u];!c||Hf(c)&&(n=c.body.start-o,r=c.body.end+o,e>=n&&e<=r&&(i=Math.min(e-n,r-e),a<=i&&(t=c.body,a=i)))}),t}isEndListAppended(e){let t=this.endListFragments[e];return t!==void 0&&(t.buffered||Hf(t))}getState(e){let t=mu(e),i=this.fragments[t];return i?i.buffered?Hf(i)?Zi.PARTIAL:Zi.OK:Zi.APPENDING:Zi.NOT_LOADED}isTimeBuffered(e,t,i){let n,r;for(let a=0;a<i.length;a++){if(n=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,e>=n&&t<=r)return!0;if(t<=n)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;let i=t.frag,n=t.part?null:t,r=mu(i);this.fragments[r]={body:i,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){let{frag:i,part:n,timeRanges:r,type:a}=t;if(i.sn==="initSegment")return;let o=i.type;if(n){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(n)}this.timeRanges=r;let l=r[a];this.detectEvictedFragments(a,l,o,n)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){let t=mu(e);return!!this.fragments[t]}hasFragments(e){let{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let n=i.length;n--;){let r=t[i[n]];if(r?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,n,r){n&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{let o=this.fragments[a];if(!o)return;let l=o.body;l.type!==i||n&&!l.gap||l.start<t&&l.end>e&&(o.buffered||r)&&this.removeFragment(l)})}removeFragment(e){let t=mu(e);e.clearElementaryStreamInfo();let i=this.activePartLists[e.type];if(i){let n=e.sn;this.activePartLists[e.type]=b1(i,r=>r.fragment.sn!==n)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;let t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(i=>i.clearElementaryStreamInfo())}};function Hf(s){var e,t,i;return s.buffered&&!!(s.body.gap||(e=s.range.video)!=null&&e.partial||(t=s.range.audio)!=null&&t.partial||(i=s.range.audiovideo)!=null&&i.partial)}function mu(s){return`${s.type}_${s.level}_${s.sn}`}function b1(s,e){return s.filter(t=>{let i=e(t);return i||t.clearElementaryStreamInfo(),i})}var io={cbc:0,ctr:1},Fy=class{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case io.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case io.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}};function GO(s){let e=s.byteLength,t=e&&new DataView(s.buffer).getUint8(e-1);return t?s.slice(0,e-t):s}var $y=class{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){let t=new DataView(e),i=new Uint32Array(4);for(let n=0;n<4;n++)i[n]=t.getUint32(n*4);return i}initTable(){let e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],o=i[3],l=this.invSubMix,u=l[0],c=l[1],h=l[2],g=l[3],m=new Uint32Array(256),v=0,b=0,A=0;for(A=0;A<256;A++)A<128?m[A]=A<<1:m[A]=A<<1^283;for(A=0;A<256;A++){let R=b^b<<1^b<<2^b<<3^b<<4;R=R>>>8^R&255^99,e[v]=R,t[R]=v;let F=m[v],O=m[F],H=m[O],W=m[R]*257^R*16843008;n[v]=W<<24|W>>>8,r[v]=W<<16|W>>>16,a[v]=W<<8|W>>>24,o[v]=W,W=H*16843009^O*65537^F*257^v*16843008,u[R]=W<<24|W>>>8,c[R]=W<<16|W>>>16,h[R]=W<<8|W>>>24,g[R]=W,v?(v=F^m[m[m[H^F]]],b^=m[m[b]]):v=b=1}}expandKey(e){let t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;for(;n<t.length&&i;)i=t[n]===this.key[n],n++;if(i)return;this.key=t;let r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);let a=this.ksRows=(r+6+1)*4,o,l,u=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),h=this.sBox,g=this.rcon,m=this.invSubMix,v=m[0],b=m[1],A=m[2],R=m[3],F,O;for(o=0;o<a;o++){if(o<r){F=u[o]=t[o];continue}O=F,o%r===0?(O=O<<8|O>>>24,O=h[O>>>24]<<24|h[O>>>16&255]<<16|h[O>>>8&255]<<8|h[O&255],O^=g[o/r|0]<<24):r>6&&o%r===4&&(O=h[O>>>24]<<24|h[O>>>16&255]<<16|h[O>>>8&255]<<8|h[O&255]),u[o]=F=(u[o-r]^O)>>>0}for(l=0;l<a;l++)o=a-l,l&3?O=u[o]:O=u[o-4],l<4||o<=4?c[l]=O:c[l]=v[h[O>>>24]]^b[h[O>>>16&255]]^A[h[O>>>8&255]]^R[h[O&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){let n=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],u=o[1],c=o[2],h=o[3],g=this.uint8ArrayToUint32Array_(i),m=g[0],v=g[1],b=g[2],A=g[3],R=new Int32Array(e),F=new Int32Array(R.length),O,H,W,E,X,Z,re,oe,ve,Ce,we,Ge,Xe,Re,We=this.networkToHostOrderSwap;for(;t<R.length;){for(ve=We(R[t]),Ce=We(R[t+1]),we=We(R[t+2]),Ge=We(R[t+3]),X=ve^r[0],Z=Ge^r[1],re=we^r[2],oe=Ce^r[3],Xe=4,Re=1;Re<n;Re++)O=l[X>>>24]^u[Z>>16&255]^c[re>>8&255]^h[oe&255]^r[Xe],H=l[Z>>>24]^u[re>>16&255]^c[oe>>8&255]^h[X&255]^r[Xe+1],W=l[re>>>24]^u[oe>>16&255]^c[X>>8&255]^h[Z&255]^r[Xe+2],E=l[oe>>>24]^u[X>>16&255]^c[Z>>8&255]^h[re&255]^r[Xe+3],X=O,Z=H,re=W,oe=E,Xe=Xe+4;O=a[X>>>24]<<24^a[Z>>16&255]<<16^a[re>>8&255]<<8^a[oe&255]^r[Xe],H=a[Z>>>24]<<24^a[re>>16&255]<<16^a[oe>>8&255]<<8^a[X&255]^r[Xe+1],W=a[re>>>24]<<24^a[oe>>16&255]<<16^a[X>>8&255]<<8^a[Z&255]^r[Xe+2],E=a[oe>>>24]<<24^a[X>>16&255]<<16^a[Z>>8&255]<<8^a[re&255]^r[Xe+3],F[t]=We(O^m),F[t+1]=We(E^v),F[t+2]=We(W^b),F[t+3]=We(H^A),m=ve,v=Ce,b=we,A=Ge,t=t+4}return F.buffer}},By=class{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){let e=qO(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}};function qO(s){switch(s){case io.cbc:return"AES-CBC";case io.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${s}`)}}var zO=16,fd=class{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{let i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){let{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;let i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?GO(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,n){return this.useSoftware?new Promise((r,a)=>{let o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,n);let l=this.flush();l?r(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,n)}softwareDecrypt(e,t,i,n){let{currentIV:r,currentResult:a,remainderData:o}=this;if(n!==io.cbc||t.byteLength!==16)return ui.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Qn(o,e),this.remainderData=null);let l=this.getValidChunk(e);if(!l.length)return null;r&&(i=r);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new $y),u.expandKey(t);let c=a;return this.currentResult=u.decrypt(l.buffer,0,i),this.currentIV=l.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,i,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,n));this.key=t,this.fastAesKey=new By(this.subtle,t,n)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Fy(this.subtle,new Uint8Array(i),n).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(ui.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,i,n)))}onWebCryptoError(e,t,i,n){let r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,n);let a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e,i=e.length-e.length%zO;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){!this.logEnabled||(ui.log(`[decrypter]: ${e}`),this.logEnabled=!1)}},E1=Math.pow(2,17),Uy=class{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){let i=e.url;if(!i)return Promise.reject(new fr({type:Et.NETWORK_ERROR,details:Ae.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();let n=this.config,r=n.fLoader,a=n.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){l(x1(e));return}else e.gap=!1;let u=this.loader=r?new r(n):new a(n),c=S1(e);e.loader=u;let h=_1(n.fragLoadPolicy.default),g={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:E1};e.stats=u.stats;let m={onSuccess:(v,b,A,R)=>{this.resetLoader(e,u);let F=v.data;A.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(F.slice(0,16)),F=F.slice(16)),o({frag:e,part:null,payload:F,networkDetails:R})},onError:(v,b,A,R)=>{this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:li({url:i,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:A,stats:R}))},onAbort:(v,b,A)=>{this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:A,stats:v}))},onTimeout:(v,b,A)=>{this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:A,stats:v}))}};t&&(m.onProgress=(v,b,A,R)=>t({frag:e,part:null,payload:A,networkDetails:R})),u.load(c,g,m)})}loadPart(e,t,i){this.abort();let n=this.config,r=n.fLoader,a=n.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(x1(e,t));return}let u=this.loader=r?new r(n):new a(n),c=S1(e,t);e.loader=u;let h=_1(n.fragLoadPolicy.default),g={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:E1};t.stats=u.stats,u.load(c,g,{onSuccess:(m,v,b,A)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,t);let R={frag:e,part:t,payload:m.data,networkDetails:A};i(R),o(R)},onError:(m,v,b,A)=>{this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:li({url:c.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:b,stats:A}))},onAbort:(m,v,b)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:m}))},onTimeout:(m,v,b)=>{this.resetLoader(e,u),l(new fr({type:Et.NETWORK_ERROR,details:Ae.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:b,stats:m}))}})})}updateStatsFromPart(e,t){let i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){let l=Math.round(e.duration/t.duration),u=Math.min(Math.round(i.loaded/r),l),h=(l-u)*Math.round(i.loaded/u);i.total=i.loaded+h}else i.total=Math.max(i.loaded,i.total);let a=i.loading,o=n.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}};function S1(s,e=null){let t=e||s,i={frag:s,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},n=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(ft(n)&&ft(r)){var a;let o=n,l=r;if(s.sn==="initSegment"&&WO((a=s.decryptdata)==null?void 0:a.method)){let u=r-n;u%16&&(l=r+(16-u%16)),n!==0&&(i.resetIV=!0,o=n-16)}i.rangeStart=o,i.rangeEnd=l}return i}function x1(s,e){let t=new Error(`GAP ${s.gap?"tag":"attribute"} found`),i={type:Et.MEDIA_ERROR,details:Ae.FRAG_GAP,fatal:!1,frag:s,error:t,networkDetails:null};return e&&(i.part=e),(e||s).stats.aborted=!0,new fr(i)}function WO(s){return s==="AES-128"||s==="AES-256"}var fr=class extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}},gp=class extends pn{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}},pd=class{constructor(e,t,i,n=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Vf(),this.buffering={audio:Vf(),video:Vf(),audiovideo:Vf()},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=a}};function Vf(){return{start:0,executeStart:0,executeEnd:0,end:0}}var A1={length:0,start:()=>0,end:()=>0},Ft=class{static isBuffered(e,t){if(e){let i=Ft.getBuffered(e);for(let n=i.length;n--;)if(t>=i.start(n)&&t<=i.end(n))return!0}return!1}static bufferedRanges(e){if(e){let t=Ft.getBuffered(e);return Ft.timeRangesToArray(t)}return[]}static timeRangesToArray(e){let t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){let n=Ft.bufferedRanges(e);if(n.length)return Ft.bufferedInfo(n,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((c,h)=>c.start-h.start||h.end-c.end);let n=-1,r=[];if(i)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(n=c);let h=r.length;if(h){let g=r[h-1].end;e[c].start-g<i?e[c].end>g&&(r[h-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let a=0,o,l=t,u=t;for(let c=0;c<r.length;c++){let h=r[c].start,g=r[c].end;if(n===-1&&t>=h&&t<=g&&(n=c),t+i>=h&&t<g)l=h,u=g,a=u-t;else if(t+i<h){o=h;break}}return{len:a,start:l||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:n}}static getBuffered(e){try{return e.buffered||A1}catch(t){return ui.log("failed to get media.buffered",t),A1}}},FA=/\{\$([a-zA-Z0-9-_]+)\}/g;function C1(s){return FA.test(s)}function Hy(s,e){if(s.variableList!==null||s.hasVariableRefs){let t=s.variableList;return e.replace(FA,i=>{let n=i.substring(2,i.length-1),r=t?.[n];return r===void 0?(s.playlistParsingError||(s.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${n}"`)),i):r})}return e}function w1(s,e,t){let i=s.variableList;i||(s.variableList=i={});let n,r;if("QUERYPARAM"in e){n=e.QUERYPARAM;try{let a=new self.URL(t).searchParams;if(a.has(n))r=a.get(n);else throw new Error(`"${n}" does not match any query parameter in URI: "${t}"`)}catch(a){s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else n=e.NAME,r=e.VALUE;n in i?s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${n}"`)):i[n]=r||""}function KO(s,e,t){let i=e.IMPORT;if(t&&i in t){let n=s.variableList;n||(s.variableList=n={}),n[i]=t[i]}else s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}var YO=/^(\d+)x(\d+)$/,I1=/(.+?)=(".*?"|.*?)(?:,|$)/g,Ei=class{constructor(e,t){typeof e=="string"&&(e=Ei.parseAttrList(e,t)),fi(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){let t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;let i=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(n*2,n*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){let t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){let i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){let i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((n,r)=>(n[r.toLowerCase()]=!0,n),t)}bool(e){return this[e]==="YES"}decimalResolution(e){let t=YO.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i,n={},r='"';for(I1.lastIndex=0;(i=I1.exec(e))!==null;){let a=i[1].trim(),o=i[2],l=o.indexOf(r)===0&&o.lastIndexOf(r)===o.length-1,u=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(t&&(l||u))o=Hy(t,o);else if(!u&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ui.warn(`${e}: attribute ${a} is missing quotes`)}n[a]=o}return n}},XO="com.apple.hls.interstitial";function QO(s){return s!=="ID"&&s!=="CLASS"&&s!=="CUE"&&s!=="START-DATE"&&s!=="DURATION"&&s!=="END-DATE"&&s!=="END-ON-NEXT"}function JO(s){return s==="SCTE35-OUT"||s==="SCTE35-IN"||s==="SCTE35-CMD"}var mp=class{constructor(e,t,i=0){var n;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(n=t?.tagOrder)!=null?n:i,t){let r=t.attr;for(let a in r)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==r[a]){ui.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=fi(new Ei({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){let r=t?.endDate||new Date(this.attr["END-DATE"]);ft(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){let e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){let{tagAnchor:e}=this;return e===null||e.programDateTime===null?(ui.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){let e=this._endDate||this._dateAtEnd;if(e)return e;let t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){let e=this.attr.decimalFloatingPoint("DURATION");if(ft(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===XO}get isValid(){return!!this.id&&!this._badValueForSameId&&ft(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}},ZO=10,Vy=class{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}let t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let i=t.decryptdata;return i||(t.setKeyFormat(e.keyFormat),i=t.decryptdata),!!i&&e.matches(i)})}get hasProgramDateTime(){return this.fragments.length?ft(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||ZO}get drift(){let e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){let e=this.partList;if(e){let t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){let e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}};function yp(s,e){return s.length===e.length?!s.some((t,i)=>t!==e[i]):!1}function D1(s,e){return!s&&!e?!0:!s||!e?!1:yp(s,e)}function Su(s){return s==="AES-128"||s==="AES-256"||s==="AES-256-CTR"}function Yv(s){switch(s){case"AES-128":case"AES-256":return io.cbc;case"AES-256-CTR":return io.ctr;default:throw new Error(`invalid full segment method ${s}`)}}function Xv(s){return Uint8Array.from(atob(s),e=>e.charCodeAt(0))}function jy(s){return Uint8Array.from(unescape(encodeURIComponent(s)),e=>e.charCodeAt(0))}function eM(s){let e=jy(s).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function $A(s){let e=function(i,n,r){let a=i[n];i[n]=i[r],i[r]=a};e(s,0,3),e(s,1,2),e(s,4,5),e(s,6,7)}function BA(s){let e=s.split(":"),t=null;if(e[0]==="data"&&e.length===2){let i=e[1].split(";"),n=i[i.length-1].split(",");if(n.length===2){let r=n[0]==="base64",a=n[1];r?(i.splice(-1,1),t=Xv(a)):t=eM(a)}}return t}var vp=typeof self<"u"?self:void 0,Di={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},_s={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function ip(s){switch(s){case _s.FAIRPLAY:return Di.FAIRPLAY;case _s.PLAYREADY:return Di.PLAYREADY;case _s.WIDEVINE:return Di.WIDEVINE;case _s.CLEARKEY:return Di.CLEARKEY}}function ly(s){switch(s){case Di.FAIRPLAY:return _s.FAIRPLAY;case Di.PLAYREADY:return _s.PLAYREADY;case Di.WIDEVINE:return _s.WIDEVINE;case Di.CLEARKEY:return _s.CLEARKEY}}function rd(s){let{drmSystems:e,widevineLicenseUrl:t}=s,i=e?[Di.FAIRPLAY,Di.WIDEVINE,Di.PLAYREADY,Di.CLEARKEY].filter(n=>!!e[n]):[];return!i[Di.WIDEVINE]&&t&&i.push(Di.WIDEVINE),i}var UA=function(s){return vp!=null&&(s=vp.navigator)!=null&&s.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function tM(s,e,t,i){let n;switch(s){case Di.FAIRPLAY:n=["cenc","sinf"];break;case Di.WIDEVINE:case Di.PLAYREADY:n=["cenc"];break;case Di.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${s}`)}return iM(n,e,t,i)}function iM(s,e,t,i){return[{initDataTypes:s,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs=${r}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:`video/mp4; codecs=${r}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function sM(s){var e;return!!s&&(s.sessionType==="persistent-license"||!!((e=s.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function HA(s){let e=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(a){let o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){let l=Xv(o).subarray(0,16);return $A(l),l}}return null}var jf={},ma=class{static clearKeyUriToKeyIdMap(){jf={}}static setKeyIdForUri(e,t){jf[e]=t}constructor(e,t,i,n=[1],r=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Su(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(vA(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&yp(e.keyFormatVersions,this.keyFormatVersions)&&D1(e.iv,this.iv)&&D1(e.keyId,this.keyId)}isSupported(){if(this.method){if(Su(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case _s.FAIRPLAY:case _s.WIDEVINE:case _s.PLAYREADY:case _s.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Su(this.method)){let r=this.iv;return r||(typeof e!="number"&&(ui.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),r=rM(e)),new ma(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.keyId){let r=jf[this.uri];if(r&&!yp(this.keyId,r)&&ma.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}let i=BA(this.uri);if(i)switch(this.keyFormat){case _s.WIDEVINE:if(this.pssh=i,!this.keyId){let r=mO(i.buffer);if(r.length){var n;let a=r[0];this.keyId=(n=a.kids)!=null&&n.length?a.kids[0]:null}}this.keyId||(this.keyId=L1(t));break;case _s.PLAYREADY:{let r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=gO(r,null,i),this.keyId=HA(i);break}default:{let r=i.subarray(0,16);if(r.length!==16){let a=new Uint8Array(16);a.set(r,16-r.length),r=a}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r;r=nM(t),r||(r=L1(t),r||(r=jf[this.uri])),r&&(this.keyId=r,ma.setKeyIdForUri(this.uri,r))}return this}};function nM(s){let e=s?.[_s.WIDEVINE];return e?e.keyId:null}function L1(s){let e=s?.[_s.PLAYREADY];if(e){let t=BA(e.uri);if(t)return HA(t)}return null}function rM(s){let e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=s>>8*(15-t)&255;return e}var k1=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,R1=/#EXT-X-MEDIA:(.*)/g,aM=/^#EXT(?:INF|-X-TARGETDURATION):/m,uy=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),oM=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Xn=class{static findGroup(e,t){for(let i=0;i<e.length;i++){let n=e[i];if(n.id===t)return n}}static resolve(e,t){return Gv.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return aM.test(e)}static parseMasterPlaylist(e,t){let i=C1(e),n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];if(k1.lastIndex=0,!e.startsWith("#EXTM3U"))return n.playlistParsingError=new Error("no EXTM3U delimiter"),n;let a;for(;(a=k1.exec(e))!=null;)if(a[1]){var o;let u=new Ei(a[1],n),c=Hy(n,a[2]),h={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:Xn.resolve(c,t)},g=u.decimalResolution("RESOLUTION");g&&(h.width=g.width,h.height=g.height),M1(u.CODECS,h);let m=u["SUPPLEMENTAL-CODECS"];m&&(h.supplemental={},M1(m,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||r.push(h),n.levels.push(h)}else if(a[3]){let u=a[3],c=a[4];switch(u){case"SESSION-DATA":{let h=new Ei(c,n),g=h["DATA-ID"];g&&(n.sessionData===null&&(n.sessionData={}),n.sessionData[g]=h);break}case"SESSION-KEY":{let h=P1(c,t,n);h.encrypted&&h.isSupported()?(n.sessionKeys===null&&(n.sessionKeys=[]),n.sessionKeys.push(h)):ui.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{let h=new Ei(c,n);w1(n,h,t)}break}case"CONTENT-STEERING":{let h=new Ei(c,n);n.contentSteering={uri:Xn.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{n.startTimeOffset=O1(c);break}}}let l=r.length>0&&r.length<n.levels.length;return n.levels=l?r:n.levels,n.levels.length===0&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,i){let n,r={},a=i.levels,o={AUDIO:a.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:a.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]},l=0;for(R1.lastIndex=0;(n=R1.exec(e))!==null;){let u=new Ei(n[1],i),c=u.TYPE;if(c){let h=o[c],g=r[c]||[];r[c]=g;let m=u.LANGUAGE,v=u["ASSOC-LANGUAGE"],b=u.CHANNELS,A=u.CHARACTERISTICS,R=u["INSTREAM-ID"],F={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||m||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:m,url:u.URI?Xn.resolve(u.URI,t):""};if(v&&(F.assocLang=v),b&&(F.channels=b),A&&(F.characteristics=A),R&&(F.instreamId=R),h!=null&&h.length){let O=Xn.findGroup(h,F.groupId)||h[0];N1(F,O,"audioCodec"),N1(F,O,"textCodec")}g.push(F)}}return r}static parseLevelPlaylist(e,t,i,n,r,a){var o;let l={url:t},u=new Vy(t),c=u.fragments,h=[],g=null,m=0,v=0,b=0,A=0,R=0,F=null,O=new ad(n,l),H,W,E,X=-1,Z=!1,re=null,oe;if(uy.lastIndex=0,u.m3u8=e,u.hasVariableRefs=C1(e),((o=uy.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(H=uy.exec(e))!==null;){Z&&(Z=!1,O=new ad(n,l),O.playlistOffset=b,O.setStart(b),O.sn=m,O.cc=A,R&&(O.bitrate=R),O.level=i,g&&(O.initSegment=g,g.rawProgramDateTime&&(O.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),re&&(O.setByteRange(re),re=null)));let Ge=H[1];if(Ge){O.duration=parseFloat(Ge);let Xe=(" "+H[2]).slice(1);O.title=Xe||null,O.tagList.push(Xe?["INF",Ge,Xe]:["INF",Ge])}else if(H[3]){if(ft(O.duration)){O.playlistOffset=b,O.setStart(b),E&&$1(O,E,u),O.sn=m,O.level=i,O.cc=A,c.push(O);let Xe=(" "+H[3]).slice(1);O.relurl=Hy(u,Xe),Gy(O,F,h),F=O,b+=O.duration,m++,v=0,Z=!0}}else{if(H=H[0].match(oM),!H){ui.warn("No matches on slow regex match for level playlist!");continue}for(W=1;W<H.length&&H[W]===void 0;W++);let Xe=(" "+H[W]).slice(1),Re=(" "+H[W+1]).slice(1),We=H[W+2]?(" "+H[W+2]).slice(1):null;switch(Xe){case"BYTERANGE":F?O.setByteRange(Re,F):O.setByteRange(Re);break;case"PROGRAM-DATE-TIME":O.rawProgramDateTime=Re,O.tagList.push(["PROGRAM-DATE-TIME",Re]),X===-1&&(X=c.length);break;case"PLAYLIST-TYPE":u.type&&fa(u,Xe,H),u.type=Re.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?fa(u,Xe,H):c.length>0&&B1(u,Xe,H),m=u.startSN=parseInt(Re);break;case"SKIP":{u.skippedSegments&&fa(u,Xe,H);let Qe=new Ei(Re,u),rt=Qe.decimalInteger("SKIPPED-SEGMENTS");if(ft(rt)){u.skippedSegments+=rt;for(let et=rt;et--;)c.push(null);m+=rt}let gt=Qe.enumeratedString("RECENTLY-REMOVED-DATERANGES");gt&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(gt.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&fa(u,Xe,H),u.targetduration=Math.max(parseInt(Re),1);break;case"VERSION":u.version!==null&&fa(u,Xe,H),u.version=parseInt(Re);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||fa(u,Xe,H),u.live=!1;break;case"#":(Re||We)&&O.tagList.push(We?[Re,We]:[Re]);break;case"DISCONTINUITY":A++,O.tagList.push(["DIS"]);break;case"GAP":O.gap=!0,O.tagList.push([Xe]);break;case"BITRATE":O.tagList.push([Xe,Re]),R=parseInt(Re)*1e3,ft(R)?O.bitrate=R:R=0;break;case"DATERANGE":{let Qe=new Ei(Re,u),rt=new mp(Qe,u.dateRanges[Qe.ID],u.dateRangeTagCount);u.dateRangeTagCount++,rt.isValid||u.skippedSegments?u.dateRanges[rt.id]=rt:ui.warn(`Ignoring invalid DATERANGE tag: "${Re}"`),O.tagList.push(["EXT-X-DATERANGE",Re]);break}case"DEFINE":{{let Qe=new Ei(Re,u);"IMPORT"in Qe?KO(u,Qe,a):w1(u,Qe,t)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?fa(u,Xe,H):c.length>0&&B1(u,Xe,H),u.startCC=A=parseInt(Re);break;case"KEY":{let Qe=P1(Re,t,u);if(Qe.isSupported()){if(Qe.method==="NONE"){E=void 0;break}E||(E={});let rt=E[Qe.keyFormat];rt!=null&&rt.matches(Qe)||(rt&&(E=fi({},E)),E[Qe.keyFormat]=Qe)}else ui.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${Re}"`);break}case"START":u.startTimeOffset=O1(Re);break;case"MAP":{let Qe=new Ei(Re,u);if(O.duration){let rt=new ad(n,l);F1(rt,Qe,i,E),g=rt,O.initSegment=g,g.rawProgramDateTime&&!O.rawProgramDateTime&&(O.rawProgramDateTime=g.rawProgramDateTime)}else{let rt=O.byteRangeEndOffset;if(rt){let gt=O.byteRangeStartOffset;re=`${rt-gt}@${gt}`}else re=null;F1(O,Qe,i,E),g=O,Z=!0}g.cc=A;break}case"SERVER-CONTROL":{oe&&fa(u,Xe,H),oe=new Ei(Re),u.canBlockReload=oe.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=oe.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&oe.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=oe.optionalFloat("PART-HOLD-BACK",0),u.holdBack=oe.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&fa(u,Xe,H);let Qe=new Ei(Re);u.partTarget=Qe.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Qe=u.partList;Qe||(Qe=u.partList=[]);let rt=v>0?Qe[Qe.length-1]:void 0,gt=v++,et=new Ei(Re,u),Ye=new Ly(et,O,l,gt,rt);Qe.push(Ye),O.duration+=Ye.duration;break}case"PRELOAD-HINT":{let Qe=new Ei(Re,u);u.preloadHint=Qe;break}case"RENDITION-REPORT":{let Qe=new Ei(Re,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(Qe);break}default:ui.warn(`line parsed but not handled: ${H}`);break}}}F&&!F.relurl?(c.pop(),b-=F.duration,u.partList&&(u.fragmentHint=F)):u.partList&&(Gy(O,F,h),O.cc=A,u.fragmentHint=O,E&&$1(O,E,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));let ve=c.length,Ce=c[0],we=c[ve-1];if(b+=u.skippedSegments*u.targetduration,b>0&&ve&&we){u.averagetargetduration=b/ve;let Ge=we.sn;u.endSN=Ge!=="initSegment"?Ge:0,u.live||(we.endList=!0),X>0&&(uM(c,X),Ce&&h.unshift(Ce))}return u.fragmentHint&&(b+=u.fragmentHint.duration),u.totalduration=b,h.length&&u.dateRangeTagCount&&Ce&&VA(h,u),u.endCC=A,u}};function VA(s,e){let t=s.length;if(!t)if(e.hasProgramDateTime){let o=e.fragments[e.fragments.length-1];s.push(o),t++}else return;let i=s[t-1],n=e.live?1/0:e.totalduration,r=Object.keys(e.dateRanges);for(let o=r.length;o--;){let l=e.dateRanges[r[o]],u=l.startDate.getTime();l.tagAnchor=i.ref;for(let c=t;c--;){var a;if(((a=s[c])==null?void 0:a.sn)<e.startSN)break;let h=lM(e,u,s,c,n);if(h!==-1){l.tagAnchor=e.fragments[h].ref;break}}}}function lM(s,e,t,i,n){let r=t[i];if(r){let o=r.programDateTime;if(e>=o||i===0){var a;let l=(((a=t[i+1])==null?void 0:a.start)||n)-r.start;if(e<=o+l*1e3){let u=t[i].sn-s.startSN;if(u<0)return-1;let c=s.fragments;if(c.length>t.length){let g=(t[i+1]||c[c.length-1]).sn-s.startSN;for(let m=g;m>u;m--){let v=c[m].programDateTime;if(e>=v&&e<v+c[m].duration*1e3)return m}}return u}}}return-1}function P1(s,e,t){var i,n;let r=new Ei(s,t),a=(i=r.METHOD)!=null?i:"",o=r.URI,l=r.hexadecimalInteger("IV"),u=r.KEYFORMATVERSIONS,c=(n=r.KEYFORMAT)!=null?n:"identity";o&&r.IV&&!l&&ui.error(`Invalid IV: ${r.IV}`);let h=o?Xn.resolve(o,e):"",g=(u||"1").split("/").map(Number).filter(Number.isFinite);return new ma(a,h,c,g,l,r.KEYID)}function O1(s){let t=new Ei(s).decimalFloatingPoint("TIME-OFFSET");return ft(t)?t:null}function M1(s,e){let t=(s||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{let n=t.filter(r=>zv(r,i));n.length&&(e[`${i}Codec`]=n.map(r=>r.split("/")[0]).join(","),t=t.filter(r=>n.indexOf(r)===-1))}),e.unknownCodecs=t}function N1(s,e,t){let i=e[t];i&&(s[t]=i)}function uM(s,e){let t=s[e];for(let i=e;i--;){let n=s[i];if(!n)return;n.programDateTime=t.programDateTime-n.duration*1e3,t=n}}function Gy(s,e,t){s.rawProgramDateTime?t.push(s):e!=null&&e.programDateTime&&(s.programDateTime=e.endProgramDateTime)}function F1(s,e,t,i){s.relurl=e.URI,e.BYTERANGE&&s.setByteRange(e.BYTERANGE),s.level=t,s.sn="initSegment",i&&(s.levelkeys=i),s.initSegment=null}function $1(s,e,t){s.levelkeys=e;let{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(n=>e[n].isCommonEncryption)&&i.push(s)}function fa(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function B1(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function cy(s,e){let t=e.startPTS;if(ft(t)){let i=0,n;e.sn>s.sn?(i=t-s.start,n=s):(i=s.start-t,n=e),n.duration!==i&&n.setDuration(i)}else e.sn>s.sn?s.cc===e.cc&&s.minEndPTS?e.setStart(s.start+(s.minEndPTS-s.start)):e.setStart(s.start+s.duration):e.setStart(Math.max(s.start-e.duration,0))}function jA(s,e,t,i,n,r,a){i-t<=0&&(a.warn("Fragment should have a positive duration",e),i=t+e.duration,r=n+e.duration);let l=t,u=i,c=e.startPTS,h=e.endPTS;if(ft(c)){let R=Math.abs(c-t);s&&R>s.totalduration?a.warn(`media timestamps and playlist times differ by ${R}s for level ${e.level} ${s.url}`):ft(e.deltaPTS)?e.deltaPTS=Math.max(R,e.deltaPTS):e.deltaPTS=R,l=Math.max(t,c),t=Math.min(t,c),n=e.startDTS!==void 0?Math.min(n,e.startDTS):n,u=Math.min(i,h),i=Math.max(i,h),r=e.endDTS!==void 0?Math.max(r,e.endDTS):r}let g=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=l,e.startDTS=n,e.endPTS=i,e.minEndPTS=u,e.endDTS=r;let m=e.sn;if(!s||m<s.startSN||m>s.endSN)return 0;let v,b=m-s.startSN,A=s.fragments;for(A[b]=e,v=b;v>0;v--)cy(A[v],A[v-1]);for(v=b;v<A.length-1;v++)cy(A[v],A[v+1]);return s.fragmentHint&&cy(A[A.length-1],s.fragmentHint),s.PTSKnown=s.alignedSliding=!0,g}function cM(s,e,t){if(s===e)return;let i=null,n=s.fragments;for(let c=n.length-1;c>=0;c--){let h=n[c].initSegment;if(h){i=h;break}}s.fragmentHint&&delete s.fragmentHint.endPTS;let r;fM(s,e,(c,h,g,m)=>{if((!e.startCC||e.skippedSegments)&&h.cc!==c.cc){let v=c.cc-h.cc;for(let b=g;b<m.length;b++)m[b].cc+=v;e.endCC=m[m.length-1].cc}ft(c.startPTS)&&ft(c.endPTS)&&(h.setStart(h.startPTS=c.startPTS),h.startDTS=c.startDTS,h.maxStartPTS=c.maxStartPTS,h.endPTS=c.endPTS,h.endDTS=c.endDTS,h.minEndPTS=c.minEndPTS,h.setDuration(c.endPTS-c.startPTS),h.duration&&(r=h),e.PTSKnown=e.alignedSliding=!0),c.hasStreams&&(h.elementaryStreams=c.elementaryStreams),h.loader=c.loader,c.hasStats&&(h.stats=c.stats),c.initSegment&&(h.initSegment=c.initSegment,i=c.initSegment)});let a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(i&&o.forEach(c=>{var h;c&&(!c.initSegment||c.initSegment.relurl===((h=i)==null?void 0:h.relurl))&&(c.initSegment=i)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(c=>!c),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=dM(s.dateRanges,e,t));let c=s.fragments.filter(h=>h.rawProgramDateTime);if(s.hasProgramDateTime&&!e.hasProgramDateTime)for(let h=1;h<o.length;h++)o[h].programDateTime===null&&Gy(o[h],o[h-1],c);VA(c,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var l;let c=zA(s,e.startSN-1);e.startCC=(l=c?.cc)!=null?l:a[0].cc}hM(s.partList,e.partList,(c,h)=>{h.elementaryStreams=c.elementaryStreams,h.stats=c.stats}),r?jA(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS,t):GA(s,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=s.driftStartTime,e.driftStart=s.driftStart;let u=e.advancedDateTime;if(e.advanced&&u){let c=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=c),e.driftEndTime=u,e.driftEnd=c}else e.driftEndTime=s.driftEndTime,e.driftEnd=s.driftEnd,e.advancedDateTime=s.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=s.requestScheduled)}function dM(s,e,t){let{dateRanges:i,recentlyRemovedDateranges:n}=e,r=fi({},s);n&&n.forEach(l=>{delete r[l]});let o=Object.keys(r).length;return o?(Object.keys(i).forEach(l=>{let u=r[l],c=new mp(i[l].attr,u);c.isValid?(r[l]=c,u||(c.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${yi(i[l].attr)}"`)}),r):i}function hM(s,e,t){if(s&&e){let i=0;for(let n=0,r=s.length;n<=r;n++){let a=s[n],o=e[n+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):i--}}}function fM(s,e,t){let i=e.skippedSegments,n=Math.max(s.startSN,e.startSN)-e.startSN,r=(s.fragmentHint?1:0)+(i?e.endSN:Math.min(s.endSN,e.endSN))-e.startSN,a=e.startSN-s.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=s.fragmentHint?s.fragments.concat(s.fragmentHint):s.fragments;for(let u=n;u<=r;u++){let c=l[a+u],h=o[u];if(i&&!h&&c&&(h=e.fragments[u]=c),c&&h){t(c,h,u,o);let g=c.relurl,m=h.relurl;if(g&&pM(g,m)){e.playlistParsingError=U1(`media sequence mismatch ${h.sn}:`,s,e,c,h);return}else if(c.cc!==h.cc){e.playlistParsingError=U1(`discontinuity sequence mismatch (${c.cc}!=${h.cc})`,s,e,c,h);return}}}}function U1(s,e,t,i,n){return new Error(`${s} ${n.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function GA(s,e,t=!0){let i=e.startSN+e.skippedSegments-s.startSN,n=s.fragments,r=i>=0,a=0;if(r&&i<n.length)a=n[i].start;else if(r&&e.startSN===s.endSN+1)a=s.fragmentEnd;else if(r&&t)a=s.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=s.fragmentStart;else return;qy(e,a)}function qy(s,e){if(e){let t=s.fragments;for(let i=s.skippedSegments;i<t.length;i++)t[i].addStart(e);s.fragmentHint&&s.fragmentHint.addStart(e)}}function qA(s,e=1/0){let t=1e3*s.targetduration;if(s.updated){let i=s.fragments,n=4;if(i.length&&t*n>e){let r=i[i.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function zA(s,e,t){if(!s)return null;let i=s.fragments[e-s.startSN];return i||(i=s.fragmentHint,i&&i.sn===e)?i:e<s.startSN&&t&&t.sn===e?t:null}function H1(s,e,t){return s?WA(s.partList,e,t):null}function WA(s,e,t){if(s)for(let i=s.length;i--;){let n=s[i];if(n.index===t&&n.fragment.sn===e)return n}return null}function KA(s){s.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(n=>{n.level=t,n.initSegment&&(n.initSegment.level=t)})})}function pM(s,e){return s!==e&&e?V1(s)!==V1(e):!1}function V1(s){return s.replace(/\?[^?]*$/,"")}function od(s,e){for(let i=0,n=s.length;i<n;i++){var t;if(((t=s[i])==null?void 0:t.cc)===e)return s[i]}return null}function gM(s,e){return!!(s&&e.startCC<s.endCC&&e.endCC>s.startCC)}function j1(s,e){let t=s.start+e;s.startPTS=t,s.setStart(t),s.endPTS=t+s.duration}function YA(s,e){let t=e.fragments;for(let i=0,n=t.length;i<n;i++)j1(t[i],s);e.fragmentHint&&j1(e.fragmentHint,s),e.alignedSliding=!0}function mM(s,e){!s||(XA(e,s),e.alignedSliding||Tp(e,s),!e.alignedSliding&&!e.skippedSegments&&GA(s,e,!1))}function XA(s,e){if(!gM(e,s))return;let t=Math.min(e.endCC,s.endCC),i=od(e.fragments,t),n=od(s.fragments,t);if(!i||!n)return;ui.log(`Aligning playlist at start of dicontinuity sequence ${t}`);let r=i.start-n.start;YA(r,s)}function Tp(s,e){if(!s.hasProgramDateTime||!e.hasProgramDateTime)return;let t=s.fragments,i=e.fragments;if(!t.length||!i.length)return;let n,r,a=Math.min(e.endCC,s.endCC);e.startCC<a&&s.startCC<a&&(n=od(i,a),r=od(t,a)),(!n||!r)&&(n=i[Math.floor(i.length/2)],r=od(t,n.cc)||t[Math.floor(t.length/2)]);let o=n.programDateTime,l=r.programDateTime;if(!o||!l)return;let u=(l-o)/1e3-(r.start-n.start);YA(u,s)}function zs(s,e,t){fn(s,e,t),s.addEventListener(e,t)}function fn(s,e,t){s.removeEventListener(e,t)}var yM={toString:function(s){let e="",t=s.length;for(let i=0;i<t;i++)e+=`[${s.start(i).toFixed(3)}-${s.end(i).toFixed(3)}]`;return e}},je={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},gd=class extends gp{constructor(e,t,i,n,r){super(n,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=je.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{let{config:a,fragCurrent:o,media:l,mediaBuffer:u,state:c}=this,h=l?l.currentTime:0,g=Ft.bufferInfo(u||l,h,a.maxBufferHole),m=!g.len;if(this.log(`Media seeking to ${ft(h)?h.toFixed(3):h}, state: ${c}, ${m?"out of":"in"} buffer`),this.state===je.ENDED)this.resetLoadingState();else if(o){let v=a.maxFragLookUpTolerance,b=o.start-v,A=o.start+o.duration+v;if(m||A<g.start||b>g.end){let R=h>A;(h<b||R)&&(R&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);let v=this.lastCurrentTime;if(h>v&&(this.lastCurrentTime=h),!this.loadingParts){let b=Math.max(g.end,h),A=this.shouldLoadParts(this.getLevelDetails(),b);A&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${b.toFixed(2)}`),this.loadingParts=A)}}this.hls.hasEnoughToStart||(this.log(`Setting ${m?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,m&&(this.startPosition=h)),m&&this.state===je.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new Uy(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new fd(e.config)}registerListeners(){let{hls:e}=this;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===je.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);let e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=je.STOPPED}get startPositionValue(){let{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;let i=e.end||0,n=this.config.timelineOffset||0;if(i<=n)return!1;let r=e.buffered;this.config.maxBufferHole&&r&&r.length>1&&(e=Ft.bufferedInfo(r,e.start,0));let a=e.nextStart;if(a&&a>n&&a<t.edge||this.media.currentTime<e.start)return!1;let l=t.partList;if(l!=null&&l.length){let c=l[l.length-1];return Ft.isBuffered(this.media,c.start+c.duration/2)}let u=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){let e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){let i=this.media=this.mediaBuffer=t.media;zs(i,"seeking",this.onMediaSeeking),zs(i,"ended",this.onMediaEnded);let n=this.config;this.levels&&n.autoStartLoad&&this.state===je.STOPPED&&this.startLoad(n.startPosition)}onMediaDetaching(e,t){let i=!!t.transferMedia,n=this.media;if(n!==null){if(n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),fn(n,"seeking",this.onMediaSeeking),fn(n,"ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=je.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){let n=r=>{let a=r.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${r.part?" part: "+r.part.index:""} of ${this.fragInfo(a,!1,r.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,i,n).then(r=>{if(!r)return;let a=this.state,o=r.frag;if(this.fragContextChanged(o)){(a===je.FRAG_LOADING||!this.fragCurrent&&a===je.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=je.IDLE);return}"payload"in r&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(B.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===je.STOPPED||this.state===je.ERROR||(this.warn(`Frag error: ${r?.message||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;let{fragmentTracker:i}=this;if(i.getState(e)===Zi.APPENDING){let r=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,r),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===Zi.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){let t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){let t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;let n={startOffset:e,endOffset:t,type:i};this.hls.trigger(B.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{let n=i?.frag;if(!n||this.fragContextChanged(n)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{let{hls:n}=this,{frag:r,payload:a}=i,o=r.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&Su(o.method)){let l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,Yv(o.method)).catch(u=>{throw n.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:r}),u}).then(u=>{let c=self.performance.now();return n.trigger(B.FRAG_DECRYPTED,{frag:r,payload:u,stats:{tstart:l,tdecrypt:c}}),i.payload=u,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===je.STOPPED||this.state===je.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){let{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");let i=e.frag.stats;this.state!==je.STOPPED&&(this.state=je.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var i,n;let r=e.tracks;if(r&&!t.encrypted&&((i=r.audio)!=null&&i.encrypted||(n=r.video)!=null&&n.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){let a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(B.ERROR,{type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){let{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){let i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?yM.toString(Ft.getBuffered(i)):"(detached)"})`),Wi(e)){var n;if(e.type!==vt.SUBTITLE){let a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=je.IDLE;return}}let r=(n=this.levels)==null?void 0:n[e.level];r!=null&&r.fragmentError&&(this.log(`Resetting level fragment error count of ${r.fragmentError} on frag buffered`),r.fragmentError=0)}this.state=je.IDLE}_handleFragmentLoadComplete(e){let{transmuxer:t}=this;if(!t)return;let{frag:i,part:n,partsLoaded:r}=e,a=!r||r.length===0||r.some(l=>!l),o=new pd(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,n){var r;this.fragCurrent=e;let a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=je.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(B.KEY_LOADED,g),this.state===je.KEY_LOADING&&(this.state=je.IDLE),g}),this.hls.trigger(B.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));let l=this.fragPrevious;if(Wi(e)&&(!l||e.sn!==l.sn)){let g=this.shouldLoadParts(t.details,e.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${l?.sn}->${e.sn}`),this.loadingParts=g)}if(i=Math.max(e.start,i||0),this.loadingParts&&Wi(e)){let g=a.partList;if(g&&n){i>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);let m=this.getNextPart(g,e,i);if(m>-1){let v=g[m];e=this.fragCurrent=v.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${v.index} (${m}/${g.length-1}) of ${this.fragInfo(e,!1,v)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=v.start+v.duration,this.state=je.FRAG_LOADING;let b;return o?b=o.then(A=>!A||this.fragContextChanged(A.frag)?null:this.doFragPartsLoad(e,v,t,n)).catch(A=>this.handleFragLoadError(A)):b=this.doFragPartsLoad(e,v,t,n).catch(A=>this.handleFragLoadError(A)),this.hls.trigger(B.FRAG_LOADING,{frag:e,part:v,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):b}else if(!e.url||this.loadedEndOfParts(g,i))return Promise.resolve(null)}}if(Wi(e)&&this.loadingParts){var u;this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(u=a.partList)==null?void 0:u.filter(g=>g.loaded).map(g=>`[${g.start}-${g.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(i.toFixed(3))}`),ft(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=je.FRAG_LOADING;let c=this.config.progressive,h;return c&&o?h=o.then(g=>!g||this.fragContextChanged(g.frag)?null:this.fragmentLoader.load(e,n)).catch(g=>this.handleFragLoadError(g)):h=Promise.all([this.fragmentLoader.load(e,c?n:void 0),o]).then(([g])=>(!c&&n&&n(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(B.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(e,t,i,n){return new Promise((r,a)=>{var o;let l=[],u=(o=i.details)==null?void 0:o.partList,c=h=>{this.fragmentLoader.loadPart(e,h,n).then(g=>{l[h.index]=g;let m=g.part;this.hls.trigger(B.FRAG_LOADED,g);let v=H1(i.details,e.sn,h.index+1)||WA(u,e.sn,h.index+1);if(v)c(v);else return r({frag:e,part:m,partsLoaded:l})}).catch(a)};c(t)})}handleFragLoadError(e){if("data"in e){let t=e.data;t.frag&&t.details===Ae.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Et.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(B.ERROR,t)}else this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){let t=this.getCurrentContext(e);if(!t||this.state!==je.PARSING){!this.fragCurrent&&this.state!==je.STOPPED&&this.state!==je.ERROR&&(this.state=je.IDLE);return}let{frag:i,part:n,level:r}=t,a=self.performance.now();i.stats.parsing.end=a,n&&(n.stats.parsing.end=a);let o=this.getLevelDetails(),u=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(i,n,r,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var i;let r=e.partList[0];if(r.fragment.type===vt.SUBTITLE)return!1;let a=r.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=a){var n;if((this.hls.hasEnoughToStart?((n=this.media)==null?void 0:n.currentTime)||this.lastCurrentTime:this.getLoadPosition())>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){let{levels:t,fragCurrent:i}=this,{level:n,sn:r,part:a}=e;if(!(t!=null&&t[n]))return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${n}. The current chunk will not be buffered.`),null;let o=t[n],l=o.details,u=a>-1?H1(l,r,a):null,c=u?u.fragment:zA(l,r,i);return c?(i&&i!==c&&(c.stats=i.stats),{frag:c,part:u,level:o}):null}bufferFragmentData(e,t,i,n,r){if(this.state!==je.PARSING)return;let{data1:a,data2:o}=e,l=a;if(o&&(l=Qn(a,o)),!l.length)return;let u=this.initPTS[t.cc],c=u?-u.baseTime/u.timescale:void 0,h={type:e.type,frag:t,part:i,chunkMeta:n,offset:c,parent:t.type,data:l};if(this.hls.trigger(B.BUFFER_APPENDING,h),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){let t=this.media;if(!t)return;if(!Ft.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}let i=t.currentTime,n=Ft.bufferInfo(t,i,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),o=Math.max(Math.min(e.start-a,n.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;let n=this.getLoadPosition();if(!ft(n))return null;let a=this.lastCurrentTime>n||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,n,t,a)}getFwdBufferInfoAtPos(e,t,i,n){let r=Ft.bufferInfo(e,t,n);if(r.len===0&&r.nextStart!==void 0){let a=this.fragmentTracker.getBufferedFrag(t,i);if(a&&(r.nextStart<=a.end||a.gap)){let o=Math.max(Math.min(r.nextStart,a.end)-t,n);return Ft.bufferInfo(e,t,o)}}return r}getMaxBufferLength(e){let{config:t}=this,i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){let i=this.config,n=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-t*3,i.maxMaxBufferLength/2,n);return r>=n?(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,t=vt.MAIN){let i=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){let i=t.fragments,n=i.length;if(!n)return null;let{config:r}=this,a=i[0].start,o=r.lowLatencyMode&&!!t.partList,l=null;if(t.live){let h=r.initialLiveManifestSize;if(n<h)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${h})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);let g=this.hls.startPosition,m=this.hls.liveSyncPosition,v=l?(g!==-1&&g>=a?g:m)||l.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${g} liveSyncPosition: ${m} frag.start: ${(u=l)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=a&&(l=i[0]);if(!l){let h=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,h,t)}let c=this.filterReplacedPrimary(l,t);if(!c&&l){let h=l.sn-t.startSN;c=this.filterReplacedPrimary(i[h+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){let i=this.fragmentTracker.getState(e);return(i===Zi.OK||i===Zi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,n,r){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&i.nextStart)){let o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,n,0);if(o!==null&&i.len+o.len>=r){let l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${n}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(G1(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(G1(this.config)&&e.type!==vt.SUBTITLE){let i=this.hls.interstitialsManager,n=i?.bufferingItem;if(n){let a=n.event;if(a){if(a.appendInPlace||Math.abs(e.start-n.start)>1||n.start===0)return null}else if(e.end<=n.start&&t?.live===!1||e.start>n.end&&n.nextEvent&&(n.nextEvent.appendInPlace||e.start-n.end>1))return null}let r=i?.playerQueue;if(r)for(let a=r.length;a--;){let o=r[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let n=-1,r=!1,a=!0;for(let o=0,l=e.length;o<l;o++){let u=e[o];if(a=a&&!u.independent,n>-1&&i<u.start)break;let c=u.loaded;c?n=-1:(r||(u.independent||a)&&u.fragment===t)&&(u.fragment!==t&&this.warn(`Need buffer at ${i} but next unloaded part starts at ${u.start}`),n=o),r=c}return n}loadedEndOfParts(e,t){let i;for(let n=e.length;n--;){if(i=e[n],!i.loaded)return!1;if(t>i.start)return!0}return!1}getInitialLiveFragment(e){let t=e.fragments,i=this.fragPrevious,n=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),n=UO(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){let r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){let a=t[r-e.startSN];i.cc===a.cc&&(n=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${n.sn}`))}n||(n=OA(e,i.cc,i.end),n&&this.log(`Live playlist, switching playlist, load frag with same CC: ${n.sn}`))}}else{let r=this.hls.liveSyncPosition;r!==null&&(n=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n}getFragmentAtPosition(e,t,i){let{config:n}=this,{fragPrevious:r}=this,{fragments:a,endSN:o}=i,{fragmentHint:l}=i,{maxFragLookUpTolerance:u}=n,c=i.partList,h=!!(this.loadingParts&&c!=null&&c.length&&l);h&&!this.bitrateTest&&c[c.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let g;if(e<t){var m;let b=e<this.lastCurrentTime||e>t-u||(m=this.media)!=null&&m.paused||!this.startFragRequested?0:u;g=Yo(r,a,e,b)}else g=a[a.length-1];if(g){let v=g.sn-i.startSN,b=this.fragmentTracker.getState(g);if((b===Zi.OK||b===Zi.PARTIAL&&g.gap)&&(r=g),r&&g.sn===r.sn&&(!h||c[0].fragment.sn>g.sn||!i.live)&&g.level===r.level){let R=a[v+1];g.sn<o&&this.fragmentTracker.getState(R)!==Zi.OK?g=R:g=null}}return g}alignPlaylists(e,t,i){let n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;let r=e.fragmentStart,a=!t,o=e.alignedSliding&&ft(r);if(a||!o&&!r){mM(i,e);let l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${n}`),l}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);let n=this.timelineOffset;if(i===-1){let r=this.startTimeOffset!==null,a=r?this.startTimeOffset:e.startTimeOffset;a!==null&&ft(a)?(i=t+a,a<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${a} found in ${r?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+n}this.nextLoadPosition=i+n}getLoadPosition(){var e;let{media:t}=this,i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Wi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==je.FRAG_LOADING_WAITING_RETRY)&&(this.state=je.IDLE)}onFragmentOrKeyLoadError(e,t){var i;if(t.chunkMeta&&!t.frag){let R=this.getCurrentContext(t.chunkMeta);R&&(t.frag=R.frag)}let n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var r;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}let a=t.details===Ae.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);let o=t.errorAction;if(!o){this.state=je.ERROR;return}let{action:l,flags:u,retryCount:c=0,retryConfig:h}=o,g=!!h,m=g&&l===hs.RetryRequest,v=g&&!o.resolved&&u===In.MoveAllAlternatesMatchingHost,b=(i=this.hls.latestLevelDetails)==null?void 0:i.live;if(!m&&v&&Wi(n)&&!n.endList&&b&&!NA(t))this.resetFragmentErrors(e),this.treatAsGap(n),o.resolved=!0;else if((m||v)&&c<h.maxNumRetry){var A;let R=Oy((A=t.response)==null?void 0:A.code),F=Kv(h,c);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+F,this.state=je.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,R){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${c+1}/${h.maxNumRetry} in ${F}ms`)}else if(h)if(this.resetFragmentErrors(e),c<h.maxNumRetry)!a&&l!==hs.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${c})`);return}else l===hs.SendAlternateToPenaltyBox?this.state=je.WAITING_LEVEL:this.state=je.ERROR;this.tickImmediate()}checkRetryDate(){let e=self.performance.now(),t=this.retryDate,i=t===1/0;(!t||e>=t||i&&!Oy(0))&&(i&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=je.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===je.PARSING||this.state===je.PARSED){let t=e.frag,i=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,i),r=n&&n.len>.5;r&&this.reduceMaxBufferLength(n.len,t?.duration||10);let a=!r;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===vt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==je.STOPPED&&(this.state=je.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;let n=Ft.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===je.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==je.STOPPED&&(this.state=je.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;let e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,n){let r=i.details;if(!r){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{let c=e.elementaryStreams[u];if(c){let h=c.endPTS-c.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${h})`),l||!1;let g=n?0:jA(r,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS,this);return this.hls.trigger(B.LEVEL_PTS_UPDATED,{details:r,level:i,drift:g,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)){var o;if(i.fragmentError===0&&this.treatAsGap(e,i),((o=this.transmuxer)==null?void 0:o.error)===null){let l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=je.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(B.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===vt.MAIN?"level":"track"}fragInfo(e,t=!0,i){var n,r;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((n=t&&!i?e.startPTS:(i||e).start)!=null?n:NaN).toFixed(3)}-${((r=t&&!i?e.endPTS:(i||e).end)!=null?r:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){let t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}};function G1(s){return!!s.interstitialsController&&s.enableInterstitialPlayback!==!1}var _p=class{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){let{chunks:e,dataLength:t}=this,i;if(e.length)e.length===1?i=e[0]:i=vM(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}};function vM(s,e){let t=new Uint8Array(e),i=0;for(let n=0;n<s.length;n++){let r=s[n];t.set(r,i),i+=r.length}return t}var dy={exports:{}},q1;function TM(){return q1||(q1=1,function(s){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function r(l,u,c,h,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new n(c,h||l,g),v=t?t+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],m]:l._events[v].push(m):(l._events[v]=m,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)e.call(c,h)&&u.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=t?t+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,m=h.length,v=new Array(m);g<m;g++)v[g]=h[g].fn;return v},o.prototype.listenerCount=function(u){var c=t?t+u:u,h=this._events[c];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,c,h,g,m,v){var b=t?t+u:u;if(!this._events[b])return!1;var A=this._events[b],R=arguments.length,F,O;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),R){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,c),!0;case 3:return A.fn.call(A.context,c,h),!0;case 4:return A.fn.call(A.context,c,h,g),!0;case 5:return A.fn.call(A.context,c,h,g,m),!0;case 6:return A.fn.call(A.context,c,h,g,m,v),!0}for(O=1,F=new Array(R-1);O<R;O++)F[O-1]=arguments[O];A.fn.apply(A.context,F)}else{var H=A.length,W;for(O=0;O<H;O++)switch(A[O].once&&this.removeListener(u,A[O].fn,void 0,!0),R){case 1:A[O].fn.call(A[O].context);break;case 2:A[O].fn.call(A[O].context,c);break;case 3:A[O].fn.call(A[O].context,c,h);break;case 4:A[O].fn.call(A[O].context,c,h,g);break;default:if(!F)for(W=1,F=new Array(R-1);W<R;W++)F[W-1]=arguments[W];A[O].fn.apply(A[O].context,F)}}return!0},o.prototype.on=function(u,c,h){return r(this,u,c,h,!1)},o.prototype.once=function(u,c,h){return r(this,u,c,h,!0)},o.prototype.removeListener=function(u,c,h,g){var m=t?t+u:u;if(!this._events[m])return this;if(!c)return a(this,m),this;var v=this._events[m];if(v.fn)v.fn===c&&(!g||v.once)&&(!h||v.context===h)&&a(this,m);else{for(var b=0,A=[],R=v.length;b<R;b++)(v[b].fn!==c||g&&!v[b].once||h&&v[b].context!==h)&&A.push(v[b]);A.length?this._events[m]=A.length===1?A[0]:A:a(this,m)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,s.exports=o}(dy)),dy.exports}var _M=TM(),Qv=eO(_M),md="1.6.13",wu={};function bM(){return typeof __HLS_WORKER_BUNDLE__=="function"}function EM(){let s=wu[md];if(s)return s.clientCount++,s;let e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),n={worker:new self.Worker(t),objectURL:t,clientCount:1};return wu[md]=n,n}function SM(s){let e=wu[s];if(e)return e.clientCount++,e;let t=new self.URL(s,self.location.href).href,n={worker:new self.Worker(t),scriptURL:t,clientCount:1};return wu[s]=n,n}function xM(s){let e=wu[s||md];if(e&&e.clientCount--===1){let{worker:i,objectURL:n}=e;delete wu[s||md],n&&self.URL.revokeObjectURL(n),i.terminate()}}function QA(s,e){return e+10<=s.length&&s[e]===51&&s[e+1]===68&&s[e+2]===73&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function Jv(s,e){return e+10<=s.length&&s[e]===73&&s[e+1]===68&&s[e+2]===51&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function Pp(s,e){let t=0;return t=(s[e]&127)<<21,t|=(s[e+1]&127)<<14,t|=(s[e+2]&127)<<7,t|=s[e+3]&127,t}function yd(s,e){let t=e,i=0;for(;Jv(s,e);){i+=10;let n=Pp(s,e+6);i+=n,QA(s,e+10)&&(i+=10),e+=i}if(i>0)return s.subarray(t,t+i)}function AM(s,e,t,i){let n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=e[t+2],a=r>>2&15;if(a>12){let m=new Error(`invalid ADTS sampling index:${a}`);s.emit(B.ERROR,B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_PARSING_ERROR,fatal:!0,error:m,reason:m.message});return}let o=(r>>6&3)+1,l=e[t+3]>>6&3|(r&1)<<2,u="mp4a.40."+o,c=n[a],h=a;(o===5||o===29)&&(h-=3);let g=[o<<3|(h&14)>>1,(h&1)<<7|l<<3];return ui.log(`manifest codec:${i}, parsed codec:${u}, channels:${l}, rate:${c} (ADTS object type:${o} sampling index:${a})`),{config:g,samplerate:c,channelCount:l,codec:u,parsedCodec:u,manifestCodec:i}}function JA(s,e){return s[e]===255&&(s[e+1]&246)===240}function ZA(s,e){return s[e+1]&1?7:9}function Zv(s,e){return(s[e+3]&3)<<11|s[e+4]<<3|(s[e+5]&224)>>>5}function CM(s,e){return e+5<s.length}function bp(s,e){return e+1<s.length&&JA(s,e)}function wM(s,e){return CM(s,e)&&JA(s,e)&&Zv(s,e)<=s.length-e}function IM(s,e){if(bp(s,e)){let t=ZA(s,e);if(e+t>=s.length)return!1;let i=Zv(s,e);if(i<=t)return!1;let n=e+i;return n===s.length||bp(s,n)}return!1}function eC(s,e,t,i,n){if(!s.samplerate){let r=AM(e,t,i,n);if(!r)return;fi(s,r)}}function tC(s){return 1024*9e4/s}function DM(s,e){let t=ZA(s,e);if(e+t<=s.length){let i=Zv(s,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function iC(s,e,t,i,n){let r=tC(s.samplerate),a=i+n*r,o=DM(e,t),l;if(o){let{frameLength:h,headerLength:g}=o,m=g+h,v=Math.max(0,t+m-e.length);v?(l=new Uint8Array(m-g),l.set(e.subarray(t+g,e.length),0)):l=e.subarray(t+g,t+m);let b={unit:l,pts:a};return v||s.samples.push(b),{sample:b,length:m,missing:v}}let u=e.length-t;return l=new Uint8Array(u),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:u,missing:-1}}function LM(s,e){return Jv(s,e)&&Pp(s,e+6)+10<=s.length-e}function kM(s){return s instanceof ArrayBuffer?s:s.byteOffset==0&&s.byteLength==s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}function hy(s,e=0,t=1/0){return RM(s,e,t,Uint8Array)}function RM(s,e,t,i){let n=PM(s),r=1;"BYTES_PER_ELEMENT"in i&&(r=i.BYTES_PER_ELEMENT);let a=OM(s)?s.byteOffset:0,o=(a+s.byteLength)/r,l=(a+e)/r,u=Math.floor(Math.max(0,Math.min(l,o))),c=Math.floor(Math.min(u+Math.max(t,0),o));return new i(n,u,c-u)}function PM(s){return s instanceof ArrayBuffer?s:s.buffer}function OM(s){return s&&s.buffer instanceof ArrayBuffer&&s.byteLength!==void 0&&s.byteOffset!==void 0}function MM(s){let e={key:s.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(s.size<2)return;if(s.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}let i=s.data.subarray(1).indexOf(0);if(i===-1)return;let n=kn(hy(s.data,1,i)),r=s.data[2+i],a=s.data.subarray(3+i).indexOf(0);if(a===-1)return;let o=kn(hy(s.data,3+i,a)),l;return n==="-->"?l=kn(hy(s.data,4+i+a)):l=kM(s.data.subarray(4+i+a)),e.mimeType=n,e.pictureType=r,e.description=o,e.data=l,e}function NM(s){if(s.size<2)return;let e=kn(s.data,!0),t=new Uint8Array(s.data.subarray(e.length+1));return{key:s.type,info:e,data:t.buffer}}function FM(s){if(s.size<2)return;if(s.type==="TXXX"){let t=1,i=kn(s.data.subarray(t),!0);t+=i.length+1;let n=kn(s.data.subarray(t));return{key:s.type,info:i,data:n}}let e=kn(s.data.subarray(1));return{key:s.type,info:"",data:e}}function $M(s){if(s.type==="WXXX"){if(s.size<2)return;let t=1,i=kn(s.data.subarray(t),!0);t+=i.length+1;let n=kn(s.data.subarray(t));return{key:s.type,info:i,data:n}}let e=kn(s.data);return{key:s.type,info:"",data:e}}function BM(s){return s.type==="PRIV"?NM(s):s.type[0]==="W"?$M(s):s.type==="APIC"?MM(s):FM(s)}function UM(s){let e=String.fromCharCode(s[0],s[1],s[2],s[3]),t=Pp(s,4),i=10;return{type:e,size:t,data:s.subarray(i,i+t)}}var Gf=10,HM=10;function sC(s){let e=0,t=[];for(;Jv(s,e);){let i=Pp(s,e+6);s[e+5]>>6&1&&(e+=Gf),e+=Gf;let n=e+i;for(;e+HM<n;){let r=UM(s.subarray(e)),a=BM(r);a&&t.push(a),e+=r.size+Gf}QA(s,e)&&(e+=Gf)}return t}function nC(s){return s&&s.key==="PRIV"&&s.info==="com.apple.streaming.transportStreamTimestamp"}function VM(s){if(s.data.byteLength===8){let e=new Uint8Array(s.data),t=e[3]&1,i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function eT(s){let e=sC(s);for(let t=0;t<e.length;t++){let i=e[t];if(nC(i))return VM(i)}}var Ln=function(s){return s.audioId3="org.id3",s.dateRange="com.apple.quicktime.HLS",s.emsg="https://aomedia.org/emsg/ID3",s.misbklv="urn:misb:KLV:bin:1910.1",s}({});function Vr(s="",e=9e4){return{type:s,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}var vd=class{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Qn(this.cachedData,e),this.cachedData=null);let i=yd(e,0),n=i?i.length:0,r,a=this._audioTrack,o=this._id3Track,l=i?eT(i):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&ft(l))&&(this.basePTS=jM(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ln.audioId3,duration:Number.POSITIVE_INFINITY});n<u;){if(this.canParse(e,n)){let c=this.appendFrame(a,e,n);c?(this.frameIndex++,this.lastPTS=c.sample.pts,n+=c.length,r=n):n=u}else LM(e,n)?(i=yd(e,n),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ln.audioId3,duration:Number.POSITIVE_INFINITY}),n+=i.length,r=n):n++;if(n===u&&r!==u){let c=e.slice(r);this.cachedData?this.cachedData=Qn(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:Vr(),id3Track:o,textTrack:Vr()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){let t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Vr(),id3Track:this._id3Track,textTrack:Vr()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}},jM=(s,e,t)=>{if(ft(s))return s*90;let i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i},qf=null,GM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],qM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],zM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],WM=[0,1,1,4];function rC(s,e,t,i,n){if(t+24>e.length)return;let r=aC(e,t);if(r&&t+r.frameLength<=e.length){let a=r.samplesPerFrame*9e4/r.sampleRate,o=i+n*a,l={unit:e.subarray(t,t+r.frameLength),pts:o,dts:o};return s.config=[],s.channelCount=r.channelCount,s.samplerate=r.sampleRate,s.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function aC(s,e){let t=s[e+1]>>3&3,i=s[e+1]>>1&3,n=s[e+2]>>4&15,r=s[e+2]>>2&3;if(t!==1&&n!==0&&n!==15&&r!==3){let a=s[e+2]>>1&1,o=s[e+3]>>6,l=t===3?3-i:i===3?3:4,u=GM[l*14+n-1]*1e3,h=qM[(t===3?0:t===2?1:2)*3+r],g=o===3?1:2,m=zM[t][i],v=WM[i],b=m*8*v,A=Math.floor(m*u/h+a)*v;if(qf===null){let O=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);qf=O?parseInt(O[1]):0}return!!qf&&qf<=87&&i===2&&u>=224e3&&o===0&&(s[e+3]=s[e+3]|128),{sampleRate:h,channelCount:g,frameLength:A,samplesPerFrame:b}}}function tT(s,e){return s[e]===255&&(s[e+1]&224)===224&&(s[e+1]&6)!==0}function oC(s,e){return e+1<s.length&&tT(s,e)}function KM(s,e){return tT(s,e)&&4<=s.length-e}function lC(s,e){if(e+1<s.length&&tT(s,e)){let i=aC(s,e),n=4;i!=null&&i.frameLength&&(n=i.frameLength);let r=e+n;return r===s.length||oC(s,r)}return!1}var zy=class extends vd{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;let i=yd(e,0),n=i?.length||0;if(lC(e,n))return!1;for(let r=e.length;n<r;n++)if(IM(e,n))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return wM(e,t)}appendFrame(e,t,i){eC(e,this.observer,t,i,e.manifestCodec);let n=iC(e,t,i,this.basePTS,this.frameIndex);if(n&&n.missing===0)return n}},uC=(s,e)=>{let t=0,i=5;e+=i;let n=new Uint32Array(1),r=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=s[e];let o=Math.min(i,8),l=8-o;r[0]=4278190080>>>24+l<<l,n[0]=(a[0]&r[0])>>l,t=t?t<<o|n[0]:n[0],e+=1,i-=o}return t},Wy=class extends vd{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){let n=cC(e,t,i,this.basePTS,this.frameIndex);if(n!==-1)return{sample:e.samples[e.samples.length-1],length:n,missing:0}}static probe(e){if(!e)return!1;let t=yd(e,0);if(!t)return!1;let i=t.length;return e[i]===11&&e[i+1]===119&&eT(t)!==void 0&&uC(e,i)<16}};function cC(s,e,t,i,n){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;let r=e[t+4]>>6;if(r>=3)return-1;let o=[48e3,44100,32e3][r],l=e[t+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(t+c>e.length)return-1;let h=e[t+6]>>5,g=0;h===2?g+=2:(h&1&&h!==1&&(g+=2),h&4&&(g+=2));let m=(e[t+6]<<8|e[t+7])>>12-g&1,b=[2,1,2,3,3,4,4,5][h]+m,A=e[t+5]>>3,R=e[t+5]&7,F=new Uint8Array([r<<6|A<<1|R>>2,(R&3)<<6|h<<3|m<<2|l>>4,l<<4&224]),O=1536/o*9e4,H=i+n*O,W=e.subarray(t,t+c);return s.config=F,s.channelCount=b,s.samplerate=o,s.samples.push({unit:W,pts:H}),c}var Ky=class extends vd{resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=yd(e,0),i=t?.length||0;if(t&&e[i]===11&&e[i+1]===119&&eT(t)!==void 0&&uC(e,i)<=16)return!1;for(let n=e.length;i<n;i++)if(lC(e,i))return ui.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return KM(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return rC(e,t,i,this.basePTS,this.frameIndex)}},YM=/\/emsg[-/]ID3/i,Yy=class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,n){let r=this.videoTrack=Vr("video",1),a=this.audioTrack=Vr("audio",1),o=this.txtTrack=Vr("text",1);if(this.id3Track=Vr("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;let l=SA(e);if(l.video){let{id:u,timescale:c,codec:h,supplemental:g}=l.video;r.id=u,r.timescale=o.timescale=c,r.codec=h,r.supplemental=g}if(l.audio){let{id:u,timescale:c,codec:h}=l.audio;a.id=u,a.timescale=c,a.codec=h}o.id=_A.text,r.sampleDuration=0,r.duration=a.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return nO(e)}demux(e,t){this.timeOffset=t;let i=e,n=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Qn(this.remainderData,e));let o=dO(i);this.remainderData=o.remainder,n.samples=o.valid||new Uint8Array}else n.samples=i;let a=this.extractID3Track(n,t);return r.samples=c1(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){let e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;let n=this.extractID3Track(t,this.timeOffset);return i.samples=c1(e,t),{videoTrack:t,audioTrack:Vr(),id3Track:n,textTrack:Vr()}}extractID3Track(e,t){let i=this.id3Track;if(e.samples.length){let n=zt(e.samples,["emsg"]);n&&n.forEach(r=>{let a=fO(r);if(YM.test(a.schemeIdUri)){let o=z1(a,t),l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);let u=a.payload;i.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:Ln.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){let o=z1(a,t);i.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Ln.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}};function z1(s,e){return ft(s.presentationTime)?s.presentationTime/s.timeScale:e+s.presentationTimeDelta/s.timeScale}var Xy=class{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new fd(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,io.cbc)}decryptAacSample(e,t,i){let n=e[t].unit;if(n.length<=16)return;let r=n.subarray(16,n.length-n.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(o=>{let l=new Uint8Array(o);n.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}).catch(i)}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){let t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t),n=0;for(let r=32;r<e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i}getAvcDecryptedUnit(e,t){let i=new Uint8Array(t),n=0;for(let r=32;r<e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e}decryptAvcSample(e,t,i,n,r){let a=CA(r.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,n)}).catch(n)}decryptAvcSamples(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){n();return}let r=e[t].units;for(;!(i>=r.length);i++){let a=r[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,i,n,a),!this.decrypter.isSync()))return}}}},Ep=class{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,n;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){let r=i.units;n=r[r.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){let i=t.samples,n=i.length;if(n){let r=i[n-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){let n=t.byteLength,r=e.naluState||0,a=r,o=[],l=0,u,c,h,g=-1,m=0;for(r===-1&&(g=0,m=this.getNALuType(t,0),r=0,l=1);l<n;){if(u=t[l++],!r){r=u?0:1;continue}if(r===1){r=u?0:2;continue}if(!u)r=3;else if(u===1){if(c=l-r-1,g>=0){let v={data:t.subarray(g,c),type:m};o.push(v)}else{let v=this.getLastNalUnit(e.samples);v&&(a&&l<=4-a&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-a)),c>0&&(v.data=Qn(v.data,t.subarray(0,c)),v.state=0))}l<n?(h=this.getNALuType(t,l),g=l,m=h,r=0):r=-1}else r=0}if(g>=0&&r>=0){let v={data:t.subarray(g,n),type:m,state:r};o.push(v)}if(o.length===0){let v=this.getLastNalUnit(e.samples);v&&(v.data=Qn(v.data,t))}return e.naluState=r,o}},Wo=class{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){let e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;if(e>32&&ui.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){let e=this.skipLZ();return this.readBits(e+1)-1}readEG(){let e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}},Qy=class extends Ep{parsePES(e,t,i,n){let r=this.parseNALu(e,i.data,n),a=this.VideoSample,o,l=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(u=>{var c,h;switch(u.type){case 1:{let b=!1;o=!0;let A=u.data;if(l&&A.length>4){let R=this.readSliceType(A);(R===2||R===4||R===7||R===9)&&(b=!0)}if(b){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=b;break}case 5:o=!0,(c=a)!=null&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,qv(u.data,1,i.pts,t.samples);break}case 7:{var m,v;o=!0,l=!0;let b=u.data,A=this.readSPS(b);if(!e.sps||e.width!==A.width||e.height!==A.height||((m=e.pixelRatio)==null?void 0:m[0])!==A.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==A.pixelRatio[1]){e.width=A.width,e.height=A.height,e.pixelRatio=A.pixelRatio,e.sps=[b];let R=b.subarray(1,4),F="avc1.";for(let O=0;O<3;O++){let H=R[O].toString(16);H.length<2&&(H="0"+H),F+=H}e.codec=F}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(h=a)!=null&&h.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(u)}),n&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){let t=new Wo(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,n=8,r;for(let a=0;a<e;a++)n!==0&&(r=t.readEG(),n=(i+r+256)%256),i=n===0?i:n}readSPS(e){let t=new Wo(e),i=0,n=0,r=0,a=0,o,l,u,c=t.readUByte.bind(t),h=t.readBits.bind(t),g=t.readUEG.bind(t),m=t.readBoolean.bind(t),v=t.skipBits.bind(t),b=t.skipEG.bind(t),A=t.skipUEG.bind(t),R=this.skipScalingList.bind(this);c();let F=c();if(h(5),v(3),c(),A(),F===100||F===110||F===122||F===244||F===44||F===83||F===86||F===118||F===128){let Z=g();if(Z===3&&v(1),A(),A(),v(1),m())for(l=Z!==3?8:12,u=0;u<l;u++)m()&&(u<6?R(16,t):R(64,t))}A();let O=g();if(O===0)g();else if(O===1)for(v(1),b(),b(),o=g(),u=0;u<o;u++)b();A(),v(1);let H=g(),W=g(),E=h(1);E===0&&v(1),v(1),m()&&(i=g(),n=g(),r=g(),a=g());let X=[1,1];if(m()&&m())switch(c()){case 1:X=[1,1];break;case 2:X=[12,11];break;case 3:X=[10,11];break;case 4:X=[16,11];break;case 5:X=[40,33];break;case 6:X=[24,11];break;case 7:X=[20,11];break;case 8:X=[32,11];break;case 9:X=[80,33];break;case 10:X=[18,11];break;case 11:X=[15,11];break;case 12:X=[64,33];break;case 13:X=[160,99];break;case 14:X=[4,3];break;case 15:X=[3,2];break;case 16:X=[2,1];break;case 255:{X=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((H+1)*16-i*2-n*2),height:(2-E)*(W+1)*16-(E?2:4)*(r+a),pixelRatio:X}}},Jy=class extends Ep{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,n){let r=this.parseNALu(e,i.data,n),a=this.VideoSample,o,l=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(u=>{var c,h;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(c=a)!=null&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,qv(u.data,2,i.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=fi(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){let m=this.readSPS(u.data);e.width=m.width,e.height=m.height,e.pixelRatio=m.pixelRatio,e.codec=m.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(let v in m.params)e.params[v]=m.params[v]}this.pushParameterSet(e.sps,u.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];let m=this.readPPS(u.data);for(let v in m)e.params[v]=m[v]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=a)!=null&&h.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:o=!1;break}a&&o&&a.units.push(u)}),n&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){let t=new Uint8Array(e.byteLength),i=0;for(let n=0;n<e.byteLength;n++)n>=2&&e[n]===3&&e[n-1]===0&&e[n-2]===0||(t[i]=e[n],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){let t=new Wo(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);let i=t.readBits(3),n=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:n}}readSPS(e){let t=new Wo(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);let i=t.readBits(3);t.readBoolean();let n=t.readBits(2),r=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),l=t.readUByte(),u=t.readUByte(),c=t.readUByte(),h=t.readUByte(),g=t.readUByte(),m=t.readUByte(),v=t.readUByte(),b=t.readUByte(),A=t.readUByte(),R=t.readUByte(),F=[],O=[];for(let Lt=0;Lt<i;Lt++)F.push(t.readBoolean()),O.push(t.readBoolean());if(i>0)for(let Lt=i;Lt<8;Lt++)t.readBits(2);for(let Lt=0;Lt<i;Lt++)F[Lt]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),O[Lt]&&t.readUByte();t.readUEG();let H=t.readUEG();H==3&&t.skipBits(1);let W=t.readUEG(),E=t.readUEG(),X=t.readBoolean(),Z=0,re=0,oe=0,ve=0;X&&(Z+=t.readUEG(),re+=t.readUEG(),oe+=t.readUEG(),ve+=t.readUEG());let Ce=t.readUEG(),we=t.readUEG(),Ge=t.readUEG(),Xe=t.readBoolean();for(let Lt=Xe?0:i;Lt<=i;Lt++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let d=0;d<4;d++)for(let x=0;x<(d===3?2:6);x++)if(!t.readBoolean())t.readUEG();else{let I=Math.min(64,1<<4+(d<<1));d>1&&t.readEG();for(let M=0;M<I;M++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());let Qe=t.readUEG(),rt=0;for(let Lt=0;Lt<Qe;Lt++){let d=!1;if(Lt!==0&&(d=t.readBoolean()),d){Lt===Qe&&t.readUEG(),t.readBoolean(),t.readUEG();let x=0;for(let C=0;C<=rt;C++){let I=t.readBoolean(),M=!1;I||(M=t.readBoolean()),(I||M)&&x++}rt=x}else{let x=t.readUEG(),C=t.readUEG();rt=x+C;for(let I=0;I<x;I++)t.readUEG(),t.readBoolean();for(let I=0;I<C;I++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){let Lt=t.readUEG();for(let d=0;d<Lt;d++){for(let x=0;x<Ge+4;x++)t.readBits(1);t.readBits(1)}}let et=0,Ye=1,St=1,wt=!0,xt=1,At=0;t.readBoolean(),t.readBoolean();let ni=!1;if(t.readBoolean()){if(t.readBoolean()){let P=t.readUByte(),Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],j=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];P>0&&P<16?(Ye=Y[P-1],St=j[P-1]):P===255&&(Ye=t.readBits(16),St=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ni=t.readBoolean(),ni&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(xt=t.readBits(32),At=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){let j=t.readBoolean(),G=t.readBoolean(),J=!1;(j||G)&&(J=t.readBoolean(),J&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),J&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let q=0;q<=i;q++){wt=t.readBoolean();let z=wt||t.readBoolean(),ee=!1;z?t.readEG():ee=t.readBoolean();let se=ee?1:t.readUEG()+1;if(j)for(let le=0;le<se;le++)t.readUEG(),t.readUEG(),J&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(G)for(let le=0;le<se;le++)t.readUEG(),t.readUEG(),J&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),et=t.readUEG())}let Fe=W,ki=E;if(X){let Lt=1,d=1;H===1?Lt=d=2:H==2&&(Lt=2),Fe=W-Lt*re-Lt*Z,ki=E-d*ve-d*oe}let _i=n?["A","B","C"][n]:"",Ri=o<<24|l<<16|u<<8|c,pi=0;for(let Lt=0;Lt<32;Lt++)pi=(pi|(Ri>>Lt&1)<<31-Lt)>>>0;let Ui=pi.toString(16);return a===1&&Ui==="2"&&(Ui="6"),{codecString:`hvc1.${_i}${a}.${Ui}.${r?"H":"L"}${R}.B0`,params:{general_tier_flag:r,general_profile_idc:a,general_profile_space:n,general_profile_compatibility_flags:[o,l,u,c],general_constraint_indicator_flags:[h,g,m,v,b,A],general_level_idc:R,bit_depth:Ce+8,bit_depth_luma_minus8:Ce,bit_depth_chroma_minus8:we,min_spatial_segmentation_idc:et,chroma_format_idc:H,frame_rate:{fixed:wt,fps:At/xt}},width:Fe,height:ki,pixelRatio:[Ye,St]}}readPPS(e){let t=new Wo(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);let n=t.readBoolean(),r=t.readBoolean(),a=1;return r&&n?a=0:r?a=3:n&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}},ds=188,jr=class{constructor(e,t,i,n){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=n,this.videoParser=null}static probe(e,t){let i=jr.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){let t=e.length,i=Math.min(ds*5,t-ds)+1,n=0;for(;n<i;){let r=!1,a=-1,o=0;for(let l=n;l<t;l+=ds)if(e[l]===71&&(t-l===ds||e[l+ds]===71)){if(o++,a===-1&&(a=l,a!==0&&(i=Math.min(a+ds*99,e.length-ds)+1)),r||(r=Zy(e,l)===0),r&&o>1&&(a===0&&o>2||l+ds>i))return a}else{if(o)return-1;break}n++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:_A[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=jr.createTrack("video"),this._videoTrack.duration=n,this._audioTrack=jr.createTrack("audio",n),this._id3Track=jr.createTrack("id3"),this._txtTrack=jr.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){let{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,n=!1){i||(this.sampleAes=null);let r,a=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,c=a.pid,h=a.pesData,g=o.pid,m=l.pid,v=o.pesData,b=l.pesData,A=null,R=this.pmtParsed,F=this._pmtId,O=e.length;if(this.remainderData&&(e=Qn(this.remainderData,e),O=e.length,this.remainderData=null),O<ds&&!n)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};let H=Math.max(0,jr.syncOffset(e));O-=(O-H)%ds,O<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,O,e.buffer.byteLength-O));let W=0;for(let X=H;X<O;X+=ds)if(e[X]===71){let Z=!!(e[X+1]&64),re=Zy(e,X),oe=(e[X+3]&48)>>4,ve;if(oe>1){if(ve=X+5+e[X+4],ve===X+ds)continue}else ve=X+4;switch(re){case c:Z&&(h&&(r=yu(h,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,u,r,!1)),h={data:[],size:0}),h&&(h.data.push(e.subarray(ve,X+ds)),h.size+=X+ds-ve);break;case g:if(Z){if(v&&(r=yu(v,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(ve,X+ds)),v.size+=X+ds-ve);break;case m:Z&&(b&&(r=yu(b,this.logger))&&this.parseID3PES(l,r),b={data:[],size:0}),b&&(b.data.push(e.subarray(ve,X+ds)),b.size+=X+ds-ve);break;case 0:Z&&(ve+=e[ve]+1),F=this._pmtId=XM(e,ve);break;case F:{Z&&(ve+=e[ve]+1);let Ce=QM(e,ve,this.typeSupported,i,this.observer,this.logger);c=Ce.videoPid,c>0&&(a.pid=c,a.segmentCodec=Ce.segmentVideoCodec),g=Ce.audioPid,g>0&&(o.pid=g,o.segmentCodec=Ce.segmentAudioCodec),m=Ce.id3Pid,m>0&&(l.pid=m),A!==null&&!R&&(this.logger.warn(`MPEG-TS PMT found at ${X} after unknown PID '${A}'. Backtracking to sync byte @${H} to parse all TS packets.`),A=null,X=H-188),R=this.pmtParsed=!0;break}case 17:case 8191:break;default:A=re;break}}else W++;W>0&&ev(this.observer,new Error(`Found ${W} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=h,o.pesData=v,l.pesData=b;let E={audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};return n&&this.extractRemainingSamples(E),E}flush(){let{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){let{audioTrack:t,videoTrack:i,id3Track:n,textTrack:r}=e,a=i.pesData,o=t.pesData,l=n.pesData,u;if(a&&(u=yu(a,this.logger))?(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(i,r,u,!0),i.pesData=null)):i.pesData=a,o&&(u=yu(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,u);break;case"mp3":this.parseMPEGPES(t,u);break;case"ac3":this.parseAC3PES(t,u);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(u=yu(l,this.logger))?(this.parseID3PES(n,u),n.pesData=null):n.pesData=l}demuxSampleAes(e,t,i){let n=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new Xy(this.observer,this.config,t);return this.decrypt(n,r)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Qy:e==="hevc"&&(this.videoParser=new Jy))}decrypt(e,t){return new Promise(i=>{let{audioTrack:n,videoTrack:r}=e;n.samples&&n.segmentCodec==="aac"?t.decryptAacSamples(n.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0,n=this.aacOverFlow,r=t.data;if(n){this.aacOverFlow=null;let h=n.missing,g=n.sample.unit.byteLength;if(h===-1)r=Qn(n.sample.unit,r);else{let m=g-h;n.sample.unit.set(r.subarray(0,h),m),e.samples.push(n.sample),i=n.missing}}let a,o;for(a=i,o=r.length;a<o-1&&!bp(r,a);a++);if(a!==i){let h,g=a<o-1;if(g?h=`AAC PES did not start with ADTS header,offset:${a}`:h="No ADTS header found in AAC PES",ev(this.observer,new Error(h),g,this.logger),!g)return}eC(e,this.observer,r,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(n){let h=tC(e.samplerate);l=n.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;a<o;)if(c=iC(e,r,a,l,u),a+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;a<o-1&&!bp(r,a);a++);}parseMPEGPES(e,t){let i=t.data,n=i.length,r=0,a=0,o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<n;)if(oC(i,a)){let l=rC(e,i,a,o,r);if(l)a+=l.length,r++;else break}else a++}parseAC3PES(e,t){{let i=t.data,n=t.pts;if(n===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}let r=i.length,a=0,o=0,l;for(;o<r&&(l=cC(e,i,o,n,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}let i=fi({},t,{type:this._videoTrack?Ln.emsg:Ln.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}};function Zy(s,e){return((s[e+1]&31)<<8)+s[e+2]}function XM(s,e){return(s[e+10]&31)<<8|s[e+11]}function QM(s,e,t,i,n,r){let a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(s[e+1]&15)<<8|s[e+2],l=e+3+o-4,u=(s[e+10]&15)<<8|s[e+11];for(e+=12+u;e<l;){let c=Zy(s,e),h=(s[e+3]&15)<<8|s[e+4];switch(s[e]){case 207:if(!i){fy("ADTS AAC",r);break}case 15:a.audioPid===-1&&(a.audioPid=c);break;case 21:a.id3Pid===-1&&(a.id3Pid=c);break;case 219:if(!i){fy("H.264",r);break}case 27:a.videoPid===-1&&(a.videoPid=c);break;case 3:case 4:!t.mpeg&&!t.mp3?r.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=c,a.segmentAudioCodec="mp3");break;case 193:if(!i){fy("AC-3",r);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=c,a.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&h>0){let g=e+5,m=h;for(;m>2;){switch(s[g]){case 106:t.ac3!==!0?r.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=c,a.segmentAudioCodec="ac3");break}let b=s[g+1]+2;g+=b,m-=b}}break;case 194:case 135:return ev(n,new Error("Unsupported EC-3 in M2TS found"),void 0,r),a;case 36:a.videoPid===-1&&(a.videoPid=c,a.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"));break}e+=h+5}return a}function ev(s,e,t,i){i.warn(`parsing error: ${e.message}`),s.emit(B.ERROR,B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function fy(s,e){e.log(`${s} with AES-128-CBC encryption found in unencrypted stream`)}function yu(s,e){let t=0,i,n,r,a,o,l=s.data;if(!s||s.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Qn(l[0],l[1]),l.splice(1,1);if(i=l[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(n=(i[4]<<8)+i[5],n&&n>s.size-6)return null;let c=i[7];c&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,c&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),r=i[8];let h=r+9;if(s.size<=h)return null;s.size-=h;let g=new Uint8Array(s.size);for(let m=0,v=l.length;m<v;m++){i=l[m];let b=i.byteLength;if(h)if(h>b){h-=b;continue}else i=i.subarray(h),b-=h,h=0;g.set(i,t),t+=b}return n&&(n-=r+3),{data:g,pts:a,dts:o,len:n}}return null}var tv=class{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}},Xa=Math.pow(2,32)-1,Ee=class{static init(){Ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ee.types)Ee.types.hasOwnProperty(e)&&(Ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);let t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ee.HDLR_TYPES={video:t,audio:i};let n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);Ee.STTS=Ee.STSC=Ee.STCO=r,Ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);let a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Ee.FTYP=Ee.box(Ee.types.ftyp,a,l,a,o),Ee.DINF=Ee.box(Ee.types.dinf,Ee.box(Ee.types.dref,n))}static box(e,...t){let i=8,n=t.length,r=n;for(;n--;)i+=t[n].byteLength;let a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),n=0,i=8;n<r;n++)a.set(t[n],i),i+=t[n].byteLength;return a}static hdlr(e){return Ee.box(Ee.types.hdlr,Ee.HDLR_TYPES[e])}static mdat(e){return Ee.box(Ee.types.mdat,e)}static mdhd(e,t){t*=e;let i=Math.floor(t/(Xa+1)),n=Math.floor(t%(Xa+1));return Ee.box(Ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,n>>24,n>>16&255,n>>8&255,n&255,85,196,0,0]))}static mdia(e){return Ee.box(Ee.types.mdia,Ee.mdhd(e.timescale||0,e.duration||0),Ee.hdlr(e.type),Ee.minf(e))}static mfhd(e){return Ee.box(Ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ee.box(Ee.types.minf,Ee.box(Ee.types.smhd,Ee.SMHD),Ee.DINF,Ee.stbl(e)):Ee.box(Ee.types.minf,Ee.box(Ee.types.vmhd,Ee.VMHD),Ee.DINF,Ee.stbl(e))}static moof(e,t,i){return Ee.box(Ee.types.moof,Ee.mfhd(e),Ee.traf(i,t))}static moov(e){let t=e.length,i=[];for(;t--;)i[t]=Ee.trak(e[t]);return Ee.box.apply(null,[Ee.types.moov,Ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(Ee.mvex(e)))}static mvex(e){let t=e.length,i=[];for(;t--;)i[t]=Ee.trex(e[t]);return Ee.box.apply(null,[Ee.types.mvex,...i])}static mvhd(e,t){t*=e;let i=Math.floor(t/(Xa+1)),n=Math.floor(t%(Xa+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,n>>24,n>>16&255,n>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ee.box(Ee.types.mvhd,r)}static sdtp(e){let t=e.samples||[],i=new Uint8Array(4+t.length),n,r;for(n=0;n<t.length;n++)r=t[n].flags,i[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return Ee.box(Ee.types.sdtp,i)}static stbl(e){return Ee.box(Ee.types.stbl,Ee.stsd(e),Ee.box(Ee.types.stts,Ee.STTS),Ee.box(Ee.types.stsc,Ee.STSC),Ee.box(Ee.types.stsz,Ee.STSZ),Ee.box(Ee.types.stco,Ee.STCO))}static avc1(e){let t=[],i=[],n,r,a;for(n=0;n<e.sps.length;n++)r=e.sps[n],a=r.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)r=e.pps[n],a=r.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(r));let o=Ee.box(Ee.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),l=e.width,u=e.height,c=e.pixelRatio[0],h=e.pixelRatio[1];return Ee.box(Ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){let t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){let t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ee.box(Ee.types.mp4a,Ee.audioStsd(e),Ee.box(Ee.types.esds,Ee.esds(e)))}static mp3(e){return Ee.box(Ee.types[".mp3"],Ee.audioStsd(e))}static ac3(e){return Ee.box(Ee.types["ac-3"],Ee.audioStsd(e),Ee.box(Ee.types.dac3,e.config))}static stsd(e){let{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp4a(e));if(t==="ac3"&&e.config)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ee.box(Ee.types.stsd,Ee.STSD,Ee.avc1(e));if(t==="hevc"&&e.vps)return Ee.box(Ee.types.stsd,Ee.STSD,Ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){let t=e.id,i=(e.duration||0)*(e.timescale||0),n=e.width||0,r=e.height||0,a=Math.floor(i/(Xa+1)),o=Math.floor(i%(Xa+1));return Ee.box(Ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,n&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){let i=Ee.sdtp(e),n=e.id,r=Math.floor(t/(Xa+1)),a=Math.floor(t%(Xa+1));return Ee.box(Ee.types.traf,Ee.box(Ee.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255])),Ee.box(Ee.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),Ee.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,Ee.box(Ee.types.trak,Ee.tkhd(e),Ee.mdia(e))}static trex(e){let t=e.id;return Ee.box(Ee.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){let i=e.samples||[],n=i.length,r=12+16*n,a=new Uint8Array(r),o,l,u,c,h,g;for(t+=8+r,a.set([e.type==="video"?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,n&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<n;o++)l=i[o],u=l.duration,c=l.size,h=l.flags,g=l.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&240<<8,h.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*o);return Ee.box(Ee.types.trun,a)}static initSegment(e){Ee.types||Ee.init();let t=Ee.moov(e);return Qn(Ee.FTYP,t)}static hvc1(e){let t=e.params,i=[e.vps,e.sps,e.pps],n=4,r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),n-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]),a=r.length;for(let v=0;v<i.length;v+=1){a+=3;for(let b=0;b<i[v].length;b+=1)a+=2+i[v][b].length}let o=new Uint8Array(a);o.set(r,0),a=r.length;let l=i.length-1;for(let v=0;v<i.length;v+=1){o.set(new Uint8Array([32+v|(v===l?128:0),0,i[v].length]),a),a+=3;for(let b=0;b<i[v].length;b+=1)o.set(new Uint8Array([i[v][b].length>>8,i[v][b].length&255]),a),a+=2,o.set(i[v][b],a),a+=i[v][b].length}let u=Ee.box(Ee.types.hvcC,o),c=e.width,h=e.height,g=e.pixelRatio[0],m=e.pixelRatio[1];return Ee.box(Ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,Ee.box(Ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ee.box(Ee.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,m>>24,m>>16&255,m>>8&255,m&255])))}};Ee.types=void 0;Ee.HDLR_TYPES=void 0;Ee.STTS=void 0;Ee.STSC=void 0;Ee.STCO=void 0;Ee.STSZ=void 0;Ee.VMHD=void 0;Ee.SMHD=void 0;Ee.STSD=void 0;Ee.FTYP=void 0;Ee.DINF=void 0;var dC=9e4;function iT(s,e,t=1,i=!1){let n=s*e*t;return i?Math.round(n):n}function JM(s,e,t=1,i=!1){return iT(s,e,1/t,i)}function nd(s,e=!1){return iT(s,1e3,1/dC,e)}function ZM(s,e=1){return iT(s,dC,1/e)}function W1(s){let{baseTime:e,timescale:t,trackId:i}=s;return`${e/t} (${e}/${t}) trackId: ${i}`}var eN=10*1e3,tN=1024,iN=1152,sN=1536,vu=null,py=null;function K1(s,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:s?2:1,isNonSync:s?0:1}}}var xu=class extends pn{constructor(e,t,i,n){if(super("mp4-remuxer",n),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,vu===null){let a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);vu=a?parseInt(a[1]):0}if(py===null){let r=navigator.userAgent.match(/Safari\/(\d+)/i);py=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){let t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&W1(t)} > ${e&&W1(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1,i=e[0].pts,n=e.reduce((r,a)=>{let o=a.pts,l=o-r;return l<-4294967296&&(t=!0,o=Dn(o,i),l=o-r),l>0?r:o},i);return t&&this.debug("PTS rollover detected"),n}remux(e,t,i,n,r,a,o,l){let u,c,h,g,m,v,b=r,A=r,R=e.pid>-1,F=t.pid>-1,O=t.samples.length,H=e.samples.length>0,W=o&&O>0||O>1;if((!R||H)&&(!F||W)||this.ISGenerated||o){if(this.ISGenerated){var X,Z,re,oe;let Ge=this.videoTrackConfig;(Ge&&(t.width!==Ge.width||t.height!==Ge.height||((X=t.pixelRatio)==null?void 0:X[0])!==((Z=Ge.pixelRatio)==null?void 0:Z[0])||((re=t.pixelRatio)==null?void 0:re[1])!==((oe=Ge.pixelRatio)==null?void 0:oe[1]))||!Ge&&W||this.nextAudioTs===null&&H)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,t,r,a));let ve=this.isVideoContiguous,Ce=-1,we;if(W&&(Ce=nN(t.samples),!ve&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,Ce>0){this.warn(`Dropped ${Ce} out of ${O} video samples due to a missing keyframe`);let Ge=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Ce),t.dropped+=Ce,A+=(t.samples[0].pts-Ge)/t.inputTimeScale,we=A}else Ce===-1&&(this.warn(`No keyframe found out of ${O} video samples`),v=!1);if(this.ISGenerated){if(H&&W){let Ge=this.getVideoStartPts(t.samples),Re=(Dn(e.samples[0].pts,Ge)-Ge)/t.inputTimeScale;b+=Math.max(0,Re),A+=Math.max(0,-Re)}if(H){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,t,r,a)),c=this.remuxAudio(e,b,this.isAudioContiguous,a,F||W||l===vt.AUDIO?A:void 0),W){let Ge=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,t,r,a)),u=this.remuxVideo(t,A,ve,Ge)}}else W&&(u=this.remuxVideo(t,A,ve,0));u&&(u.firstKeyFrame=Ce,u.independent=Ce!==-1,u.firstKeyFramePTS=we)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(m=hC(i,r,this._initPTS,this._initDTS)),n.samples.length&&(g=fC(n,r,this._initPTS))),{audio:c,video:u,initSegment:h,independent:v,text:g,id3:m}}computeInitPts(e,t,i,n){let r=Math.round(i*t),a=Dn(e,r);if(a<r+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(r-a)/t} ${n}`);a<r+t;)a+=8589934592;return a-r}generateIS(e,t,i,n){let r=e.samples,a=t.samples,o=this.typeSupported,l={},u=this._initPTS,c=!u||n,h="audio/mp4",g,m,v,b=-1;if(c&&(g=m=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ee.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(b=e.id,v=e.inputTimeScale,!u||v!==u.timescale?g=m=this.computeInitPts(r[0].pts,v,i,"audio"):c=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ee.initSegment([t]),metadata:{width:t.width,height:t.height}},c)if(b=t.id,v=t.inputTimeScale,!u||v!==u.timescale){let A=this.getVideoStartPts(a),R=Dn(a[0].dts,A),F=this.computeInitPts(R,v,i,"video"),O=this.computeInitPts(A,v,i,"video");m=Math.min(m,F),g=Math.min(g,O)}else c=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(u&&this.warn(`Timestamps at playlist time: ${n?"":"~"}${i} ${g/v} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${g/v} (${g}/${v}) trackId: ${b}`),this._initPTS={baseTime:g,timescale:v,trackId:b},this._initDTS={baseTime:m,timescale:v,trackId:b}):g=v=void 0,{tracks:l,initPTS:g,timescale:v,trackId:b}}remuxVideo(e,t,i,n){let r=e.inputTimeScale,a=e.samples,o=[],l=a.length,u=this._initPTS,c=u.baseTime*r/u.timescale,h=this.nextVideoTs,g=8,m=this.videoSampleDuration,v,b,A=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,F=!1;if(!i||h===null){let et=c+t*r,Ye=a[0].pts-Dn(a[0].dts,a[0].pts);vu&&h!==null&&Math.abs(et-Ye-(h+c))<15e3?i=!0:h=et-Ye-c}let O=h+c;for(let et=0;et<l;et++){let Ye=a[et];Ye.pts=Dn(Ye.pts,O),Ye.dts=Dn(Ye.dts,O),Ye.dts<a[et>0?et-1:et].dts&&(F=!0)}F&&a.sort(function(et,Ye){let St=et.dts-Ye.dts,wt=et.pts-Ye.pts;return St||wt}),v=a[0].dts,b=a[a.length-1].dts;let H=b-v,W=H?Math.round(H/(l-1)):m||e.inputTimeScale/30;if(i){let et=v-O,Ye=et>W,St=et<-1;if((Ye||St)&&(Ye?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${nd(et,!0)} ms (${et}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${nd(-et,!0)} ms (${et}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!St||O>=a[0].pts||vu)){v=O;let wt=a[0].pts-et;if(Ye)a[0].dts=v,a[0].pts=wt;else{let xt=!0;for(let At=0;At<a.length&&!(a[At].dts>wt&&xt);At++){let ni=a[At].pts;if(a[At].dts-=et,a[At].pts-=et,At<a.length-1){let Xt=a[At+1].pts,Fe=a[At].pts,ki=Xt<=Fe,_i=Xt<=ni;xt=ki==_i}}}this.log(`Video: Initial PTS/DTS adjusted: ${nd(wt,!0)}/${nd(v,!0)}, delta: ${nd(et,!0)} ms`)}}v=Math.max(0,v);let E=0,X=0,Z=v;for(let et=0;et<l;et++){let Ye=a[et],St=Ye.units,wt=St.length,xt=0;for(let At=0;At<wt;At++)xt+=St[At].data.length;X+=xt,E+=wt,Ye.length=xt,Ye.dts<Z?(Ye.dts=Z,Z+=W/4|0||1):Z=Ye.dts,A=Math.min(Ye.pts,A),R=Math.max(Ye.pts,R)}b=a[l-1].dts;let re=X+4*E+8,oe;try{oe=new Uint8Array(re)}catch(et){this.observer.emit(B.ERROR,B.ERROR,{type:Et.MUX_ERROR,details:Ae.REMUX_ALLOC_ERROR,fatal:!1,error:et,bytes:re,reason:`fail allocating video mdat ${re}`});return}let ve=new DataView(oe.buffer);ve.setUint32(0,re),oe.set(Ee.types.mdat,4);let Ce=!1,we=Number.POSITIVE_INFINITY,Ge=Number.POSITIVE_INFINITY,Xe=Number.NEGATIVE_INFINITY,Re=Number.NEGATIVE_INFINITY;for(let et=0;et<l;et++){let Ye=a[et],St=Ye.units,wt=0;for(let ni=0,Xt=St.length;ni<Xt;ni++){let Fe=St[ni],ki=Fe.data,_i=Fe.data.byteLength;ve.setUint32(g,_i),g+=4,oe.set(ki,g),g+=_i,wt+=4+_i}let xt;if(et<l-1)m=a[et+1].dts-Ye.dts,xt=a[et+1].pts-Ye.pts;else{let ni=this.config,Xt=et>0?Ye.dts-a[et-1].dts:W;if(xt=et>0?Ye.pts-a[et-1].pts:W,ni.stretchShortVideoTrack&&this.nextAudioTs!==null){let Fe=Math.floor(ni.maxBufferHole*r),ki=(n?A+n*r:this.nextAudioTs+c)-Ye.pts;ki>Fe?(m=ki-Xt,m<0?m=Xt:Ce=!0,this.log(`It is approximately ${ki/90} ms to the next segment; using duration ${m/90} ms for the last video frame.`)):m=Xt}else m=Xt}let At=Math.round(Ye.pts-Ye.dts);we=Math.min(we,m),Xe=Math.max(Xe,m),Ge=Math.min(Ge,xt),Re=Math.max(Re,xt),o.push(K1(Ye.key,m,wt,At))}if(o.length){if(vu){if(vu<70){let et=o[0].flags;et.dependsOn=2,et.isNonSync=0}}else if(py&&Re-Ge<Xe-we&&W/Xe<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let et=v;for(let Ye=0,St=o.length;Ye<St;Ye++){let wt=et+o[Ye].duration,xt=et+o[Ye].cts;if(Ye<St-1){let At=wt+o[Ye+1].cts;o[Ye].duration=At-xt}else o[Ye].duration=Ye?o[Ye-1].duration:W;o[Ye].cts=0,et=wt}}}m=Ce||!m?W:m;let We=b+m;this.nextVideoTs=h=We-c,this.videoSampleDuration=m,this.isVideoContiguous=!0;let Qe=Ee.moof(e.sequenceNumber++,v,fi(e,{samples:o})),rt="video",gt={data1:Qe,data2:oe,startPTS:(A-c)/r,endPTS:(R+m-c)/r,startDTS:(v-c)/r,endDTS:h/r,type:rt,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,gt}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return iN;case"ac3":return sN;default:return tN}}remuxAudio(e,t,i,n,r){let a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.getSamplesPerFrame(e),c=u*l,h=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],v=r!==void 0,b=e.samples,A=g?0:8,R=this.nextAudioTs||-1,F=h.baseTime*a/h.timescale,O=F+t*a;if(this.isAudioContiguous=i=i||b.length&&R>0&&(n&&Math.abs(O-(R+F))<9e3||Math.abs(Dn(b[0].pts,O)-(R+F))<20*c),b.forEach(function(Re){Re.pts=Dn(Re.pts,O)}),!i||R<0){let Re=b.length;if(b=b.filter(We=>We.pts>=0),Re!==b.length&&this.warn(`Removed ${b.length-Re} of ${Re} samples (initPTS ${F} / ${a})`),!b.length)return;r===0?R=0:n&&!v?R=Math.max(0,O-F):R=b[0].pts-F}if(e.segmentCodec==="aac"){let Re=this.config.maxAudioFramesDrift;for(let We=0,Qe=R+F;We<b.length;We++){let rt=b[We],gt=rt.pts,et=gt-Qe,Ye=Math.abs(1e3*et/a);if(et<=-Re*c&&v)We===0&&(this.warn(`Audio frame @ ${(gt/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*et/a)} ms.`),this.nextAudioTs=R=gt-F,Qe=gt);else if(et>=Re*c&&Ye<eN&&v){let St=Math.round(et/c);for(Qe=gt-St*c;Qe<0&&St&&c;)St--,Qe+=c;We===0&&(this.nextAudioTs=R=Qe-F),this.warn(`Injecting ${St} audio frames @ ${((Qe-F)/a).toFixed(3)}s due to ${Math.round(1e3*et/a)} ms gap.`);for(let wt=0;wt<St;wt++){let xt=tv.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);xt||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),xt=rt.unit.subarray()),b.splice(We,0,{unit:xt,pts:Qe}),Qe+=c,We++}}rt.pts=Qe,Qe+=c}}let H=null,W=null,E,X=0,Z=b.length;for(;Z--;)X+=b[Z].unit.byteLength;for(let Re=0,We=b.length;Re<We;Re++){let Qe=b[Re],rt=Qe.unit,gt=Qe.pts;if(W!==null){let Ye=m[Re-1];Ye.duration=Math.round((gt-W)/l)}else if(i&&e.segmentCodec==="aac"&&(gt=R+F),H=gt,X>0){X+=A;try{E=new Uint8Array(X)}catch(Ye){this.observer.emit(B.ERROR,B.ERROR,{type:Et.MUX_ERROR,details:Ae.REMUX_ALLOC_ERROR,fatal:!1,error:Ye,bytes:X,reason:`fail allocating audio mdat ${X}`});return}g||(new DataView(E.buffer).setUint32(0,X),E.set(Ee.types.mdat,4))}else return;E.set(rt,A);let et=rt.byteLength;A+=et,m.push(K1(!0,u,et,0)),W=gt}let re=m.length;if(!re)return;let oe=m[m.length-1];R=W-F,this.nextAudioTs=R+l*oe.duration;let ve=g?new Uint8Array(0):Ee.moof(e.sequenceNumber++,H/l,fi({},e,{samples:m}));e.samples=[];let Ce=(H-F)/a,we=R/a,Xe={data1:ve,data2:E,startPTS:Ce,endPTS:we,startDTS:Ce,endDTS:we,type:"audio",hasAudio:!0,hasVideo:!1,nb:re};return this.isAudioContiguous=!0,Xe}};function Dn(s,e){let t;if(e===null)return s;for(e<s?t=-8589934592:t=8589934592;Math.abs(s-e)>4294967296;)s+=t;return s}function nN(s){for(let e=0;e<s.length;e++)if(s[e].key)return e;return-1}function hC(s,e,t,i){let n=s.samples.length;if(!n)return;let r=s.inputTimeScale;for(let o=0;o<n;o++){let l=s.samples[o];l.pts=Dn(l.pts-t.baseTime*r/t.timescale,e*r)/r,l.dts=Dn(l.dts-i.baseTime*r/i.timescale,e*r)/r}let a=s.samples;return s.samples=[],{samples:a}}function fC(s,e,t){let i=s.samples.length;if(!i)return;let n=s.inputTimeScale;for(let a=0;a<i;a++){let o=s.samples[a];o.pts=Dn(o.pts-t.baseTime*n/t.timescale,e*n)/n}s.samples.sort((a,o)=>a.pts-o.pts);let r=s.samples;return s.samples=[],{samples:r}}var iv=class extends pn{constructor(e,t,i,n){super("passthrough-remuxer",n),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;let t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,n){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e,n),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:i,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}let{audio:r,video:a}=this.initData=SA(e);if(t)lO(e,t);else{let l=r||a;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}r&&(i=Y1(r,mi.AUDIO,this)),a&&(n=Y1(a,mi.VIDEO,this));let o={};r&&a?o.audiovideo={container:"video/mp4",codec:i+","+n,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:r?o.audio={container:"audio/mp4",codec:i,encrypted:r.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:n,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,i,n,r,a){var o,l;let{initPTS:u,lastEndTime:c}=this,h={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};ft(c)||(c=this.lastEndTime=r||0);let g=t.samples;if(!g.length)return h;let m={initPTS:void 0,timescale:void 0,trackId:void 0},v=this.initData;if((o=v)!=null&&o.length||(this.generateInitSegment(g),v=this.initData),!((l=v)!=null&&l.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);let b=cO(g,v,this),A=v.audio?b[v.audio.id]:null,R=v.video?b[v.video.id]:null,F=zf(R,1/0),O=zf(A,1/0),H=zf(R,0,!0),W=zf(A,0,!0),E=r,X=0,Z=A&&(!R||!u&&O<F||u&&u.trackId===v.audio.id),re=Z?A:R;if(re){let Qe=re.timescale,rt=re.start-r*Qe,gt=Z?v.audio.id:v.video.id;E=re.start/Qe,X=Z?W-O:H-F,(a||!u)&&(rN(u,E,r,X)||Qe!==u.timescale)&&(u&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${r} ${rt/Qe} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${E-r} (${rt}/${Qe}) trackId: ${gt}`),u=null,m.initPTS=rt,m.timescale=Qe,m.trackId=gt)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${r}`);u?(m.initPTS=u.baseTime,m.timescale=u.timescale,m.trackId=u.trackId):((!m.timescale||m.trackId===void 0||m.initPTS===void 0)&&(this.warn("Could not set initPTS"),m.initPTS=E,m.timescale=1,m.trackId=-1),this.initPTS=u={baseTime:m.initPTS,timescale:m.timescale,trackId:m.trackId});let oe=E-u.baseTime/u.timescale,ve=oe+X;X>0?this.lastEndTime=ve:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());let Ce=!!v.audio,we=!!v.video,Ge="";Ce&&(Ge+="audio"),we&&(Ge+="video");let Xe=(v.audio?v.audio.encrypted:!1)||(v.video?v.video.encrypted:!1),Re={data1:g,startPTS:oe,startDTS:oe,endPTS:ve,endDTS:ve,type:Ge,hasAudio:Ce,hasVideo:we,nb:1,dropped:0,encrypted:Xe};h.audio=Ce&&!we?Re:void 0,h.video=we?Re:void 0;let We=R?.sampleCount;if(We){let Qe=R.keyFrameIndex,rt=Qe!==-1;Re.nb=We,Re.dropped=Qe===0||this.isVideoContiguous?0:rt?Qe:We,Re.independent=rt,Re.firstKeyFrame=Qe,rt&&R.keyFrameStart&&(Re.firstKeyFramePTS=(R.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(h.independent=rt),this.isVideoContiguous||(this.isVideoContiguous=rt),Re.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Qe}/${We} dropped: ${Re.dropped} start: ${Re.firstKeyFramePTS||"NA"}`)}return h.initSegment=m,h.id3=hC(i,r,u,u),n.samples.length&&(h.text=fC(n,r,u)),h}};function zf(s,e,t=!1){return s?.start!==void 0?(s.start+(t?s.duration:0))/s.timescale:e}function rN(s,e,t,i){if(s===null)return!0;let n=Math.max(i,1),r=e-s.baseTime/s.timescale;return Math.abs(r-t)>n}function Y1(s,e,t){let i=s.codec;return i&&i.length>4?i:e===mi.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?up(i,!1):(t.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(t.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}var ga;try{ga=self.performance.now.bind(self.performance)}catch{ga=Date.now}var sp=[{demux:Yy,remux:iv},{demux:jr,remux:xu},{demux:zy,remux:xu},{demux:Ky,remux:xu}];sp.splice(2,0,{demux:Wy,remux:xu});var Sp=class{constructor(e,t,i,n,r,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=r,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,n){let r=i.transmuxing;r.executeStart=ga();let a=new Uint8Array(e),{currentTransmuxState:o,transmuxConfig:l}=this;n&&(this.currentTransmuxState=n);let{contiguous:u,discontinuity:c,trackSwitch:h,accurateTimeOffset:g,timeOffset:m,initSegmentChange:v}=n||o,{audioCodec:b,videoCodec:A,defaultInitPts:R,duration:F,initSegmentData:O}=l,H=aN(a,t);if(H&&Su(H.method)){let Z=this.getDecrypter(),re=Yv(H.method);if(Z.isSync()){let oe=Z.softwareDecrypt(a,H.key.buffer,H.iv.buffer,re);if(i.part>-1){let Ce=Z.flush();oe=Ce&&Ce.buffer}if(!oe)return r.executeEnd=ga(),gy(i);a=new Uint8Array(oe)}else return this.asyncResult=!0,this.decryptionPromise=Z.webCryptoDecrypt(a,H.key.buffer,H.iv.buffer,re).then(oe=>{let ve=this.push(oe,null,i);return this.decryptionPromise=null,ve}),this.decryptionPromise}let W=this.needsProbing(c,h);if(W){let Z=this.configureTransmuxer(a);if(Z)return this.logger.warn(`[transmuxer] ${Z.message}`),this.observer.emit(B.ERROR,B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_PARSING_ERROR,fatal:!1,error:Z,reason:Z.message}),r.executeEnd=ga(),gy(i)}(c||h||v||W)&&this.resetInitSegment(O,b,A,F,t),(c||v||W)&&this.resetInitialTimestamp(R),u||this.resetContiguity();let E=this.transmux(a,H,m,g,i);this.asyncResult=Td(E);let X=this.currentTransmuxState;return X.contiguous=!0,X.discontinuity=!1,X.trackSwitch=!1,r.executeEnd=ga(),E}flush(e){let t=e.transmuxing;t.executeStart=ga();let{decrypter:i,currentTransmuxState:n,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));let a=[],{timeOffset:o}=n;if(i){let h=i.flush();h&&a.push(this.push(h.buffer,null,e))}let{demuxer:l,remuxer:u}=this;if(!l||!u){t.executeEnd=ga();let h=[gy(e)];return this.asyncResult?Promise.resolve(h):h}let c=l.flush(o);return Td(c)?(this.asyncResult=!0,c.then(h=>(this.flushRemux(a,h,e),a))):(this.flushRemux(a,c,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,i){let{audioTrack:n,videoTrack:r,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===vt.MAIN?"level":"track"} ${i.level}`);let c=this.remuxer.remux(n,r,a,o,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:i}),i.transmuxing.executeEnd=ga()}resetInitialTimestamp(e){let{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){let{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,n,r){let{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,i,n),o.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,n,r){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,i,n,r):a=this.transmuxUnencrypted(e,i,n,r),a}transmuxUnencrypted(e,t,i,n){let{audioTrack:r,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,o,l,t,i,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,i,n,r){return this.demuxer.demuxSampleAes(e,t,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,n,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){let{config:t,observer:i,typeSupported:n}=this,r;for(let h=0,g=sp.length;h<g;h++){var a;if((a=sp[h].demux)!=null&&a.probe(e,this.logger)){r=sp[h];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");let o=this.demuxer,l=this.remuxer,u=r.remux,c=r.demux;(!l||!(l instanceof u))&&(this.remuxer=new u(i,t,n,this.logger)),(!o||!(o instanceof c))&&(this.demuxer=new c(i,t,n,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new fd(this.config)),e}};function aN(s,e){let t=null;return s.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}var gy=s=>({remuxResult:{},chunkMeta:s});function Td(s){return"then"in s&&s.then instanceof Function}var sv=class{constructor(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r||null}},nv=class{constructor(e,t,i,n,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=a}},X1=0,xp=class{constructor(e,t,i,n){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=X1++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{let u=l.data,c=this.hls;if(!(!c||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var h;let g=(h=this.workerContext)==null?void 0:h.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{c.logger[u.data.logType]&&c.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,c.trigger(u.event,u.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;let u=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};let r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;let a=(l,u)=>{u=u||{},u.frag=this.frag||void 0,l===B.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(l,u)};this.observer=new Qv,this.observer.on(B.FRAG_DECRYPTED,a),this.observer.on(B.ERROR,a);let o=f1(r.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){let l=this.hls.logger;if(r.workerPath||bM()){try{r.workerPath?(l.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=SM(r.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=EM());let{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:yi(r)})}catch(c){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new Sp(this.observer,o,r,"",t,e.logger)}return}}this.transmuxer=new Sp(this.observer,o,r,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){let e=this.instanceNo;this.instanceNo=X1++;let t=this.hls.config,i=f1(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:yi(t)})}}terminateWorker(){if(this.workerContext){let{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),xM(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{let t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}let e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,n,r,a,o,l,u,c){var h,g;u.transmuxing.start=self.performance.now();let{instanceNo:m,transmuxer:v}=this,b=a?a.start:r.start,A=r.decryptdata,R=this.frag,F=!(R&&r.cc===R.cc),O=!(R&&u.level===R.level),H=R?u.sn-R.sn:-1,W=this.part?u.part-this.part.index:-1,E=H===0&&u.id>1&&u.id===R?.stats.chunkCount,X=!O&&(H===1||H===0&&(W===1||E&&W<=0)),Z=self.performance.now();(O||H||r.stats.parsing.start===0)&&(r.stats.parsing.start=Z),a&&(W||!X)&&(a.stats.parsing.start=Z);let re=!(R&&((h=r.initSegment)==null?void 0:h.url)===((g=R.initSegment)==null?void 0:g.url)),oe=new nv(F,X,l,O,b,re);if(!X||F||re){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===vt.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${F}
        trackSwitch: ${O}
        contiguous: ${X}
        accurateTimeOffset: ${l}
        timeOffset: ${b}
        initSegmentChange: ${re}`);let ve=new sv(i,n,t,o,c);this.configureTransmuxer(ve)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:m,cmd:"demux",data:e,decryptdata:A,chunkMeta:u,state:oe},e instanceof ArrayBuffer?[e]:[]);else if(v){let ve=v.push(e,A,u,oe);Td(ve)?ve.then(Ce=>{this.handleTransmuxComplete(Ce)}).catch(Ce=>{this.transmuxerError(Ce,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(ve)}}flush(e){e.transmuxing.start=self.performance.now();let{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){let n=i.flush(e);Td(n)?n.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(n,e)}}transmuxerError(e,t,i){!this.hls||(this.error=e,this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){let{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}},Q1=100,rv=class extends gd{constructor(e,t,i){super(e,t,i,"audio-stream-controller",vt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();let{hls:e}=this;e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(B.BUFFER_RESET,this.onBufferReset,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){let{hls:e}=this;!e||(super.unregisterListeners(),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(B.BUFFER_RESET,this.onBufferReset,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:r,trackId:a}){if(i===vt.MAIN){let o=t.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:n,timescale:r,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${n/r} (${n}/${r}) trackId: ${a}`),this.mainAnchor=t,this.state===je.WAITING_INIT_PTS){let u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==o)&&this.syncWithAnchor(t,u?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(t,l)):this.state===je.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;let n=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(t&&n?.cc===t.cc)return;let r=(n||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),l=OA(a,r,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===je.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=je.STOPPED;return}let i=this.lastCurrentTime;this.stopLoad(),this.setInterval(Q1),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=je.IDLE):this.state=je.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case je.IDLE:this.doTickIdle();break;case je.WAITING_TRACK:{let{levels:e,trackId:t}=this,i=e?.[t],n=i?.details;if(n&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(n))break;this.state=je.WAITING_INIT_PTS}break}case je.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case je.WAITING_INIT_PTS:{let e=this.waitingData;if(e){let{frag:t,part:i,cache:n,complete:r}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=je.FRAG_LOADING;let o=n.flush().buffer,l={frag:t,part:i,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),r&&super._handleFragmentLoadComplete(l)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=je.IDLE}}this.onTickEnd()}resetLoadingState(){let e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){let{media:e}=this;!(e!=null&&e.readyState)||(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;let{hls:t,levels:i,media:n,trackId:r}=this,a=t.config;if(!this.buffering||!n&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(i!=null&&i[r]))return;let o=i[r],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=je.WAITING_TRACK,this.startFragRequested=!1;return}let u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,mi.AUDIO,vt.AUDIO));let c=this.getFwdBufferInfo(u,vt.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,l)){t.trigger(B.BUFFER_EOS,{type:"audio"}),this.state=je.ENDED;return}let h=c.len,g=t.maxBufferLength,m=l.fragments,v=m[0].start,b=this.getLoadPosition(),A=this.flushing?b:c.end;if(this.switchingTrack&&n){let O=b;l.PTSKnown&&O<v&&(c.end>v||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=v+.05)}if(h>=g&&!this.switchingTrack&&A<m[m.length-1].start)return;let R=this.getNextFragment(A,l);if(R&&this.isLoopLoading(R,A)&&(R=this.getNextFragmentLoopLoading(R,l,c,vt.MAIN,g)),!R){this.bufferFlushed=!0;return}let F=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&F&&Wi(R)&&!R.endList&&(!l.live||!this.loadingParts&&A<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(F)===Zi.OK&&(this.mainFragLoading=F=null),F&&Wi(F))){if(R.start>F.end){let H=this.fragmentTracker.getFragAtPos(A,vt.MAIN);H&&H.end>F.end&&(F=H,this.mainFragLoading={frag:H,targetBufferTime:null})}if(R.start>F.end)return}this.loadFragment(R,o,A)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Ko(i))}onAudioTrackSwitching(e,t){let i=!!t.url;this.trackId=t.id;let{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==je.STOPPED&&(this.setInterval(Q1),this.state=je.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;let i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(B.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;let{levels:n}=this,{details:r,id:a,groupId:o,track:l}=t;if(!n){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}let u=this.mainDetails;if(!u||r.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=t,this.state!==je.STOPPED&&(this.state=je.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);let c=n[a],h=0;if(r.live||(i=c.details)!=null&&i.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;if(c.details){var g;h=this.alignPlaylists(r,c.details,(g=this.levelLastLoaded)==null?void 0:g.details)}r.alignedSliding||(XA(r,u),r.alignedSliding||Tp(r,u),h=r.fragmentStart)}c.details=r,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(u,h),this.hls.trigger(B.AUDIO_TRACK_UPDATED,{details:r,id:a,groupId:t.groupId}),this.state===je.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=je.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;let i=e.frag,{part:n,payload:r}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}let u=l[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}let c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}let h=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2",g=this.transmuxer;g||(g=this.transmuxer=new xp(this.hls,vt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));let m=this.initPTS[i.cc],v=(t=i.initSegment)==null?void 0:t.data;if(m!==void 0){let A=n?n.index:-1,R=A!==-1,F=new pd(i.level,i.sn,i.stats.chunkCount,r.byteLength,A,R);g.push(r,v,h,"",i,n,c.totalduration,!1,F,m)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);let{cache:b}=this.waitingData=this.waitingData||{frag:i,part:n,cache:new _p,complete:!1};b.push(new Uint8Array(r)),this.state!==je.STOPPED&&(this.state=je.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;let i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===vt.MAIN&&Wi(t.frag)&&(this.mainFragLoading=t,this.state===je.IDLE&&this.tick())}onFragBuffered(e,t){let{frag:i,part:n}=t;if(i.type!==vt.AUDIO){!this.audioOnly&&i.type===vt.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Wi(i)){this.fragPrevious=i;let r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(B.AUDIO_TRACK_SWITCHED,li({},r)))}this.fragBufferedComplete(i,n),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=je.ERROR;return}switch(t.details){case Ae.FRAG_GAP:case Ae.FRAG_PARSING_ERROR:case Ae.FRAG_DECRYPT_ERROR:case Ae.FRAG_LOAD_ERROR:case Ae.FRAG_LOAD_TIMEOUT:case Ae.KEY_LOAD_ERROR:case Ae.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(vt.AUDIO,t);break;case Ae.AUDIO_TRACK_LOAD_ERROR:case Ae.AUDIO_TRACK_LOAD_TIMEOUT:case Ae.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===je.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Yt.AUDIO_TRACK&&(this.state=je.IDLE);break;case Ae.BUFFER_ADD_CODEC_ERROR:case Ae.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case Ae.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Ae.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==mi.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==mi.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===je.ENDED&&(this.state=je.IDLE);let i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,vt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;let i="audio",{hls:n}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}let{frag:l,part:u,level:c}=o,{details:h}=c,{audio:g,text:m,id3:v,initSegment:b}=r;if(this.fragContextChanged(l)||!h){this.fragmentTracker.removeFragment(l);return}if(this.state=je.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){let A=l.initSegment||l;if(this.unhandledEncryptionError(b,l))return;this._bufferInitSegment(c,b.tracks,A,a),n.trigger(B.FRAG_PARSING_INIT_SEGMENT,{frag:A,id:i,tracks:b.tracks})}if(g){let{startPTS:A,endPTS:R,startDTS:F,endDTS:O}=g;u&&(u.elementaryStreams[mi.AUDIO]={startPTS:A,endPTS:R,startDTS:F,endDTS:O}),l.setElementaryStreamInfo(mi.AUDIO,A,R,F,O),this.bufferFragmentData(g,l,u,a)}if(v!=null&&(t=v.samples)!=null&&t.length){let A=fi({id:i,frag:l,details:h},v);n.trigger(B.FRAG_PARSING_METADATA,A)}if(m){let A=fi({id:i,frag:l,details:h},m);n.trigger(B.FRAG_PARSING_USERDATA,A)}}_bufferInitSegment(e,t,i,n){if(this.state!==je.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;let r=t.audio;r.id=vt.AUDIO;let a=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${a}/${r.codec}]`),a&&a.split(",").length===1&&(r.levelCodec=a),this.hls.trigger(B.BUFFER_CODECS,t);let o=r.initSegment;if(o!=null&&o.byteLength){let l={type:"audio",frag:i,part:null,chunkMeta:n,parent:i.type,data:o};this.hls.trigger(B.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,i){let n=this.fragmentTracker.getState(e);if(this.switchingTrack||n===Zi.NOT_LOADED||n===Zi.PARTIAL){var r;if(!Wi(e))this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=je.WAITING_INIT_PTS;let a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&Tp(t.details,a)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){let{name:t,lang:i,assocLang:n,characteristics:r,audioCodec:a,channels:o}=this.bufferedTrack;zo({name:t,lang:i,assocLang:n,characteristics:r,audioCodec:a,channels:o},e,qo)||(hp(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){let{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(B.AUDIO_TRACK_SWITCHED,li({},e))}},_d=class extends pn{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){let n=t?.renditionReports;if(n){let r=-1;for(let a=0;a<n.length;a++){let o=n[a],l;try{l=new self.URL(o.URI,t.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),l=o.URI||""}if(l===e){r=a;break}else l===e.substring(0,l.length)&&(r=a)}if(r!==-1){let a=n[r],o=parseInt(a["LAST-MSN"])||t.lastPartSn,l=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){let c=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&c>t.partTarget&&(l+=1)}let u=i&&p1(i);return new dp(o,l>=0?l:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){let{details:n,stats:r}=t,a=self.performance.now(),o=r.loading.first?Math.max(0,a-r.loading.first):0;n.advancedDateTime=Date.now()-o;let l=this.hls.config.timelineOffset;if(l!==n.appliedTimelineOffset){let c=Math.max(l||0,0);n.appliedTimelineOffset=c,n.fragments.forEach(h=>{h.setStart(h.playlistOffset+c)})}if(n.live||i!=null&&i.live){let c="levelInfo"in t?t.levelInfo:t.track;if(n.reloaded(i),i&&n.fragments.length>0){cM(i,n,this);let F=n.playlistParsingError;if(F){this.warn(F);let O=this.hls;if(!O.config.ignorePlaylistParsingErrors){var u;let{networkDetails:H}=t;O.trigger(B.ERROR,{type:Et.NETWORK_ERROR,details:Ae.LEVEL_PARSING_ERROR,fatal:!1,url:n.url,error:F,reason:F.message,level:t.level||void 0,parent:(u=n.fragments[0])==null?void 0:u.type,networkDetails:H,stats:r});return}n.playlistParsingError=null}}n.requestScheduled===-1&&(n.requestScheduled=r.loading.start);let h=this.hls.mainForwardBufferInfo,g=h?h.end-h.len:0,m=(n.edge-g)*1e3,v=qA(n,m);if(n.requestScheduled+v<a?n.requestScheduled=a:n.requestScheduled+=v,this.log(`live playlist ${e} ${n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED"}`),!this.canLoad||!n.live)return;let b,A,R;if(n.canBlockReload&&n.endSN&&n.advanced){let F=this.hls.config.lowLatencyMode,O=n.lastPartSn,H=n.endSN,W=n.lastPartIndex,E=W!==-1,X=O===H;E?X?(A=H+1,R=F?0:W):(A=O,R=F?W+1:n.maxPartIndex):A=H+1;let Z=n.age,re=Z+n.ageHeader,oe=Math.min(re-n.partTarget,n.targetduration*1.5);if(oe>0){if(re>n.targetduration*3)this.log(`Playlist last advanced ${Z.toFixed(2)}s ago. Omitting segment and part directives.`),A=void 0,R=void 0;else if(i!=null&&i.tuneInGoal&&re-n.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${oe} with playlist age: ${n.age}`),oe=0;else{let ve=Math.floor(oe/n.targetduration);if(A+=ve,R!==void 0){let Ce=Math.round(oe%n.targetduration/n.partTarget);R+=Ce}this.log(`CDN Tune-in age: ${n.ageHeader}s last advanced ${Z.toFixed(2)}s goal: ${oe} skip sn ${ve} to part ${R}`)}n.tuneInGoal=oe}if(b=this.getDeliveryDirectives(n,t.deliveryDirectives,A,R),F||!X){n.requestScheduled=a,this.loadingPlaylist(c,b);return}}else(n.canBlockReload||n.canSkipUntil)&&(b=this.getDeliveryDirectives(n,t.deliveryDirectives,A,R));b&&A!==void 0&&n.canBlockReload&&(n.requestScheduled=r.loading.first+Math.max(v-o*2,v/2)),this.scheduleLoading(c,b,n)}else this.clearTimer()}scheduleLoading(e,t,i){let n=i||e.details;if(!n){this.loadingPlaylist(e,t);return}let r=self.performance.now(),a=n.requestScheduled;if(r>=a){this.loadingPlaylist(e,t);return}let o=a-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,i,n){let r=p1(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=tp.No),new dp(i,n,r)}checkRetry(e){let t=e.details,i=fp(e),n=e.errorAction,{action:r,retryCount:a=0,retryConfig:o}=n||{},l=!!n&&!!o&&(r===hs.RetryRequest||!n.resolved&&r===hs.SendAlternateToPenaltyBox);if(l){var u;if(a>=o.maxNumRetry)return!1;if(i&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{let c=Kv(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${c}ms`)}e.levelRetry=!0,n.resolved=!0}return l}};function pC(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!bd(s[t].attrs,e[t].attrs))return!1;return!0}function bd(s,e,t){let i=s["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>s[n]!==e[n])}function av(s,e){return e.label.toLowerCase()===s.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(s.lang||"").toLowerCase())}var ov=class extends _d{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){let{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(B.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){let{id:i,groupId:n,details:r}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==n){this.warn(`Audio track with id:${i} and group:${n} not found in active group ${a?.groupId}`);return}let o=a.details;a.details=t.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${n} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){let t=this.hls.levels[e];if(!t)return;let i=t.audioGroups||null,n=this.groupIds,r=this.currentTrack;if(!i||n?.length!==i?.length||i!=null&&i.some(o=>n?.indexOf(o)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;let o=this.tracks.filter(g=>!i||i.indexOf(g.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(g=>g.default)&&(this.selectDefaultTrack=!1),o.forEach((g,m)=>{g.id=m});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;let l=this.hls.config.audioPreference;if(!r&&l){let g=Gr(l,o,qo);if(g>-1)r=o[g];else{let m=Gr(l,this.tracks);r=this.tracks[m]}}let u=this.findTrackId(r);u===-1&&r&&(u=this.findTrackId(null));let c={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i?.join(",")}`),this.hls.trigger(B.AUDIO_TRACKS_UPDATED,c);let h=this.trackId;if(u!==-1&&h===-1)this.setAudioTrack(u);else if(o.length&&h===-1){var a;let g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(g.message),this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}}onError(e,t){t.fatal||!t.context||t.context.type===Yt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){let t=this.hls;if(t.config.audioPreference=e,e){let i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){let n=this.currentTrack;if(n&&zo(e,n,qo))return n;let r=Gr(e,this.tracksInGroup,qo);if(r>-1){let a=this.tracksInGroup[r];return this.setAudioTrack(r),a}else if(n){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);let o=BO(e,t.levels,i,a,qo);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){let a=Gr(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){let t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;let i=this.currentTrack,n=t[e],r=n.details&&!n.details.live;if(e===this.trackId&&n===i&&r||(this.log(`Switching to audio-track ${e} "${n.name}" lang:${n.lang} group:${n.groupId} channels:${n.channels}`),this.trackId=e,this.currentTrack=n,this.hls.trigger(B.AUDIO_TRACK_SWITCHING,li({},n)),r))return;let a=this.switchParams(n.url,i?.details,n.details);this.loadPlaylist(a)}findTrackId(e){let t=this.tracksInGroup;for(let i=0;i<t.length;i++){let n=t[i];if(!(this.selectDefaultTrack&&!n.default)&&(!e||zo(e,n,qo)))return i}if(e){let{name:i,lang:n,assocLang:r,characteristics:a,audioCodec:o,channels:l}=e;for(let u=0;u<t.length;u++){let c=t[u];if(zo({name:i,lang:n,assocLang:r,characteristics:a,audioCodec:o,channels:l},c,qo))return u}for(let u=0;u<t.length;u++){let c=t[u];if(bd(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<t.length;u++){let c=t[u];if(bd(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();let t=this.currentTrack;!this.shouldLoadPlaylist(t)||hp(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);let i=e.id,n=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${n}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(B.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:n,deliveryDirectives:t||null,track:e})}},lv=class{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;let n=this.queues[t];n.push(e),n.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{let i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){let i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;let i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;let t=this.queues[e];if(t.length){let n=t[0];try{n.execute()}catch(r){var i;if(n.onError(r),this.queues===null||this.tracks===null)return;let a=(i=this.tracks[e])==null?void 0:i.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){let{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;let i=(t=this.tracks)==null?void 0:t[e],n=i?.buffer;return n?`SourceBuffer${n.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}},J1=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,gC="HlsJsTrackRemovedError",uv=class extends Error{constructor(e){super(e),this.name=gC}},cv=class extends pn{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var n;!this.hls||((n=this.mediaSource)==null?void 0:n.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{!this.hls||this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{let{media:n,mediaSource:r}=this;i&&this.log("Media source opened"),!(!n||!r)&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(B.MEDIA_ATTACHED,{media:n,mediaSource:r}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{let{mediaSrc:i,_objectUrl:n}=this;i!==n&&this.error(`Media element src was set while attaching MediaSource (${n} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=ZP(to(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){let{hls:e}=this;e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.BUFFER_RESET,this.onBufferReset,this),e.on(B.BUFFER_APPENDING,this.onBufferAppending,this),e.on(B.BUFFER_CODECS,this.onBufferCodecs,this),e.on(B.BUFFER_EOS,this.onBufferEos,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.FRAG_PARSED,this.onFragParsed,this),e.on(B.FRAG_CHANGED,this.onFragChanged,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.BUFFER_RESET,this.onBufferReset,this),e.off(B.BUFFER_APPENDING,this.onBufferAppending,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.BUFFER_EOS,this.onBufferEos,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.FRAG_PARSED,this.onFragParsed,this),e.off(B.FRAG_CHANGED,this.onFragChanged,this),e.off(B.ERROR,this.onError,this)}transferMedia(){let{media:e,mediaSource:t}=this;if(!e)return null;let i={};if(this.operationQueue){let r=this.isUpdating();r||this.operationQueue.removeBlockers();let a=this.isQueued();(r||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${r?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}let n=this.transferData;return!this.sourceBufferCount&&n&&n.mediaSource===t?fi(i,n.tracks):this.sourceBuffers.forEach(r=>{let[a]=r;a&&(i[a]=fi({},this.tracks[a]),this.removeBuffer(a)),r[0]=r[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){let e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsTotal=n,this.log(`${n} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&n&&this.bufferCreated()}onMediaAttaching(e,t){let i=this.media=t.media;this.transferData=this.overrides=void 0;let n=to(this.appendSource);if(n){let r=!!t.mediaSource;(r||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);let a=this.mediaSource=t.mediaSource||new n;if(this.assignMediaSource(a),r)this._objectUrl=i.src,this.attachTransferred();else{let o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");let l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&a instanceof l,Z1(i),oN(i,o),i.load()}catch{i.src=o}else i.src=o}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){let e=this.media,t=this.transferData;if(!t||!e)return;let i=this.tracks,n=t.tracks,r=n?Object.keys(n):null,a=r?r.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(n&&r&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${yi(i,(l,u)=>l==="initSegment"?void 0:u)};
transfer tracks: ${yi(n,(l,u)=>l==="initSegment"?void 0:u)}}`),!yA(n,i)){t.mediaSource=null,t.tracks=void 0;let l=e.currentTime,u=this.details,c=Math.max(l,u?.fragments[0].start||0);if(c-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${c}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(n)}"->"${Object.keys(i)}") start time: ${c} currentTime: ${l}`),this.onMediaDetaching(B.MEDIA_DETACHING,{}),this.onMediaAttaching(B.MEDIA_ATTACHING,t),e.currentTime=c;return}this.transferData=void 0,r.forEach(l=>{let u=l,c=n[u];if(c){let h=c.buffer;if(h){let g=this.fragmentTracker,m=c.id;if(g.hasFragments(m)||g.hasParts(m)){let A=Ft.getBuffered(h);g.detectEvictedFragments(u,A,m,null,!0)}let v=my(u),b=[u,h];this.sourceBuffers[v]=b,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,c)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;let t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){let i=!!t.transferMedia;this.transferData=this.overrides=void 0;let{media:n,mediaSource:r,_objectUrl:a}=this;if(r){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){let o=r.readyState==="open";try{let l=r.sourceBuffers;for(let u=l.length;u--;)o&&l[u].abort(),r.removeSourceBuffer(l[u]);o&&r.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}n&&(n.removeEventListener("emptied",this._onMediaEmptied),i||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(n.removeAttribute("src"),this.appendSource&&Z1(n),n.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(B.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;let i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var n;(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(r){this.warn(`onBufferReset ${e}`,r)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[my(e)]=[null,null];let t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new lv(this.tracks)}onBufferCodecs(e,t){var i;let n=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);let a="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),o=!a&&this.sourceBufferCount&&this.media&&r.some(l=>!n[l]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${r}" SourceBuffers`);return}r.forEach(l=>{var u,c;let h=t[l],{id:g,codec:m,levelCodec:v,container:b,metadata:A,supplemental:R}=h,F=n[l],O=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[l],H=O!=null&&O.buffer?O:F,W=H?.pendingCodec||H?.codec,E=H?.levelCodec;F||(F=n[l]={buffer:void 0,listeners:[],codec:m,supplemental:R,container:b,levelCodec:v,metadata:A,id:g});let X=ep(W,E),Z=X?.replace(J1,"$1"),re=ep(m,v),oe=(c=re)==null?void 0:c.replace(J1,"$1");re&&X&&Z!==oe&&(l.slice(0,5)==="audio"&&(re=up(re,this.appendSource)),this.log(`switching codec ${W} to ${re}`),re!==(F.pendingCodec||F.codec)&&(F.pendingCodec=re),F.container=b,this.appendChangeType(l,b,re))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((i=t.audio)==null?void 0:i.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{let i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){let n=`${t};codecs=${i}`,r={label:`change-type=${n}`,execute:()=>{let a=this.tracks[e];if(a){let o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${n}`),o.changeType(n),a.codec=i,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;let i=e.start,n=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,vt.MAIN))==null?void 0:t.gap)===!0)return;let a={label:"block-audio",execute:()=>{var o;let l=this.tracks.video;(this.lastVideoAppendEnd>n||l!=null&&l.buffer&&Ft.isBuffered(l.buffer,n)||((o=this.fragmentTracker.getAppendedFrag(n,vt.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){let{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){let{tracks:i}=this,{data:n,type:r,parent:a,frag:o,part:l,chunkMeta:u,offset:c}=t,h=u.buffering[r],{sn:g,cc:m}=o,v=self.performance.now();h.start=v;let b=o.stats.buffering,A=l?l.stats.buffering:null;b.start===0&&(b.start=v),A&&A.start===0&&(A.start=v);let R=i.audio,F=!1;r==="audio"&&R?.container==="audio/mpeg"&&(F=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);let O=i.video,H=O?.buffer;if(H&&g!=="initSegment"){let X=l||o,Z=this.blockedAudioAppend;if(r==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(O.ending||O.ended)){let oe=X.start+X.duration*.05,ve=H.buffered,Ce=this.currentOp("video");!ve.length&&!Ce?this.blockAudio(X):!Ce&&!Ft.isBuffered(H,oe)&&this.lastVideoAppendEnd<oe&&this.blockAudio(X)}else if(r==="video"){let re=X.end;if(Z){let oe=Z.frag.start;(re>oe||re<this.lastVideoAppendEnd||Ft.isBuffered(H,oe))&&this.unblockAudio()}this.lastVideoAppendEnd=re}}let W=(l||o).start,E={label:`append-${r}`,execute:()=>{var X;h.executeStart=self.performance.now();let Z=(X=this.tracks[r])==null?void 0:X.buffer;Z&&(F?this.updateTimestampOffset(Z,W,.1,r,g,m):c!==void 0&&ft(c)&&this.updateTimestampOffset(Z,c,1e-6,r,g,m)),this.appendExecutor(n,r)},onStart:()=>{},onComplete:()=>{let X=self.performance.now();h.executeEnd=h.end=X,b.first===0&&(b.first=X),A&&A.first===0&&(A.first=X);let Z={};this.sourceBuffers.forEach(([re,oe])=>{re&&(Z[re]=Ft.getBuffered(oe))}),this.appendErrors[r]=0,r==="audio"||r==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(B.BUFFER_APPENDED,{type:r,frag:o,part:l,chunkMeta:u,parent:o.type,timeRanges:Z})},onError:X=>{var Z;let re={type:Et.MEDIA_ERROR,parent:o.type,details:Ae.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:o,part:l,chunkMeta:u,error:X,err:X,fatal:!1},oe=(Z=this.media)==null?void 0:Z.error;if(X.code===DOMException.QUOTA_EXCEEDED_ERR||X.name=="QuotaExceededError"||"quota"in X)re.details=Ae.BUFFER_FULL_ERROR;else if(X.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!oe)re.errorAction=Eu(!0);else if(X.name===gC&&this.sourceBufferCount===0)re.errorAction=Eu(!0);else{let ve=++this.appendErrors[r];this.warn(`Failed ${ve}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${oe||"no media error"})`),(ve>=this.hls.config.appendErrorMaxRetry||!!oe)&&(re.fatal=!0)}this.hls.trigger(B.ERROR,re)}};this.log(`queuing "${r}" append sn: ${g}${l?" p: "+l.index:""} of ${o.type===vt.MAIN?"level":"track"} ${o.level} cc: ${m}`),this.append(E,r,this.isPending(this.tracks[r]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(B.BUFFER_FLUSHED,{type:e})},onError:n=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,n)}}}onBufferFlushing(e,t){let{type:i,startOffset:n,endOffset:r}=t;i?this.append(this.getFlushOp(i,n,r),i):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,n,r),a)})}onFragParsed(e,t){let{frag:i,part:n}=t,r=[],a=n?n.elementaryStreams:i.elementaryStreams;a[mi.AUDIOVIDEO]?r.push("audiovideo"):(a[mi.AUDIO]&&r.push("audio"),a[mi.VIDEO]&&r.push("video"));let o=()=>{let l=self.performance.now();i.stats.buffering.end=l,n&&(n.stats.buffering.end=l);let u=n?n.stats:i.stats;this.hls.trigger(B.FRAG_BUFFERED,{frag:i,part:n,stats:u,id:i.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,r).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){let t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([a])=>{if(a){let o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});let n=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?n?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();let{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(B.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(B.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){let t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){!t.fragments.length||(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{let e=this.getDurationAndRange();!e||this.updateMediaSource(e)})}onError(e,t){if(t.details===Ae.BUFFER_APPEND_ERROR&&t.frag){var i;let n=(i=t.errorAction)==null?void 0:i.nextAutoLevel;ft(n)&&n!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){let{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;let n=e.config,r=i.currentTime,a=t.levelTargetDuration,o=t.live&&n.liveBackBufferLength!==null?n.liveBackBufferLength:n.backBufferLength;if(ft(o)&&o>=0){let u=Math.max(o,a),c=Math.floor(r/a)*a-u;this.flushBackBuffer(r,a,c)}let l=n.frontBufferFlushThreshold;if(ft(l)&&l>0){let u=Math.max(n.maxBufferLength,l),c=Math.max(u,a),h=Math.floor(r/a)*a+c;this.flushFrontBuffer(r,a,h)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([n,r])=>{if(r){let o=Ft.getBuffered(r);if(o.length>0&&i>o.start(0)){var a;this.hls.trigger(B.BACK_BUFFER_REACHED,{bufferEnd:i});let l=this.tracks[n];if((a=this.details)!=null&&a.live)this.hls.trigger(B.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l!=null&&l.ended){this.log(`Cannot flush ${n} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:n})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([n,r])=>{if(r){let a=Ft.getBuffered(r),o=a.length;if(o<2)return;let l=a.start(o-1),u=a.end(o-1);if(i>l||e>=l&&e<=u)return;this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:n})}})}getDurationAndRange(){var e;let{details:t,mediaSource:i}=this;if(!t||!this.media||i?.readyState!=="open")return null;let n=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&!!i.setLiveSeekableRange){let u=Math.max(0,t.fragmentStart),c=Math.max(u,n);return{duration:1/0,start:u,end:c}}return{duration:1/0}}let r=(e=this.overrides)==null?void 0:e.duration;if(r)return ft(r)?{duration:r}:null;let a=this.media.duration,o=ft(i.duration)?i.duration:0;return n>o&&n>a||!ft(a)?{duration:n}:null}updateMediaSource({duration:e,start:t,end:i}){let n=this.mediaSource;!this.media||!n||n.readyState!=="open"||(n.duration!==e&&(ft(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),n.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${n.duration}. Setting seekable range to ${t}-${i}.`),n.setLiveSeekableRange(t,i)))}get tracksReady(){let e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){let{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${yi(i)}`),this.tracksReady){var n;let r=(n=this.transferData)==null?void 0:n.tracks;r&&Object.keys(r).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){let e={};this.sourceBuffers.forEach(([t,i])=>{if(t){let n=this.tracks[t];e[t]={buffer:i,container:n.container,codec:n.codec,supplemental:n.supplemental,levelCodec:n.levelCodec,id:n.id,metadata:n.metadata}}}),this.hls.trigger(B.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{let e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){let{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(let r in e){let a=r,o=e[a];if(this.isPending(o)){let l=this.getTrackCodec(o,a),u=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${u})${this.currentOp(a)?" Queued":""} ${yi(o)}`);try{let c=i.addSourceBuffer(u),h=my(a),g=[a,c];t[h]=g,o.buffer=c}catch(c){var n;this.error(`error while trying to add sourceBuffer: ${c.message}`),this.shiftAndExecuteNext(a),(n=this.operationQueue)==null||n.removeBlockers(),delete this.tracks[a],this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:a,mimeType:u,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){let i=e.supplemental,n=e.codec;i&&(t==="video"||t==="audiovideo")&&dd(i,"video")&&(n=_O(n,i));let r=ep(n,e.levelCodec);return r?t.slice(0,5)==="audio"?up(r,this.appendSource):r:""}trackSourceBuffer(e,t){let i=t.buffer;if(!i)return;let n=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:n,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(r,a)=>{let o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(B.BUFFER_FLUSHED,{type:r})})}get mediaSrc(){var e,t;let i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i?.src}onSBUpdateStart(e){let t=this.currentOp(e);!t||t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}let i=this.currentOp(e);!i||(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;let n=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${n}`,t),this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});let r=this.currentOp(e);r&&r.onError(n)}updateTimestampOffset(e,t,i,n,r,a){let o=t-e.timestampOffset;Math.abs(o)>=i&&(this.log(`Updating ${n} SourceBuffer timestampOffset to ${t} (sn: ${r} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,i){let{media:n,mediaSource:r}=this,a=this.tracks[e],o=a?.buffer;if(!n||!r||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}let l=ft(n.duration)?n.duration:1/0,u=ft(r.duration)?r.duration:1/0,c=Math.max(0,t),h=Math.min(i,l,u);h>c&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${c},${h}] from the ${e} SourceBuffer`),o.remove(c,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){let i=this.tracks[t],n=i?.buffer;if(!n)throw new uv(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,n.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);let{operationQueue:i}=this,n=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(n).then(a=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;let n=(i=this.tracks[t])==null?void 0:i.buffer;!n||n.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){let n=this.tracks[e];if(!n)return;let r=n.buffer;if(!r)return;let a=i.bind(this,e);n.listeners.push({event:t,listener:a}),r.addEventListener(t,a)}removeBufferListeners(e){let t=this.tracks[e];if(!t)return;let i=t.buffer;!i||(t.listeners.forEach(n=>{i.removeEventListener(n.event,n.listener)}),t.listeners.length=0)}};function Z1(s){let e=s.querySelectorAll("source");[].slice.call(e).forEach(t=>{s.removeChild(t)})}function oN(s,e){let t=self.document.createElement("source");t.type="video/mp4",t.src=e,s.appendChild(t)}function my(s){return s==="audio"?1:0}var Ed=class{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){let{hls:e}=this;e.on(B.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.BUFFER_CODECS,this.onBufferCodecs,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){let{hls:e}=this;e.off(B.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){let i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){let i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&ft(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}let e=this.hls.levels;if(e.length){let t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){let t=this.hls.levels;if(!t.length)return-1;let i=t.filter((n,r)=>this.isLevelAllowed(n)&&r<=e);return this.clientRect=null,Ed.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;let e=this.media,t={width:0,height:0};if(e){let i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;let n=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0,r=e.length-1,a=Math.max(t,i);for(let o=0;o<e.length;o+=1){let l=e[o];if((l.width>=a||l.height>=a)&&n(l,e[o+1])){r=o;break}}return r}},lN={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},hn=lN,uN={HLS:"h"},cN=uN,Jn=class{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof Jn?i:new Jn(i))),this.value=e,this.params=t}},dN="Dict";function hN(s){return Array.isArray(s)?JSON.stringify(s):s instanceof Map?"Map{}":s instanceof Set?"Set{}":typeof s=="object"?JSON.stringify(s):String(s)}function fN(s,e,t,i){return new Error(`failed to ${s} "${hN(e)}" as ${t}`,{cause:i})}function qr(s,e,t){return fN("serialize",s,e,t)}var Ap=class{constructor(e){this.description=e}},eA="Bare Item",pN="Boolean";function gN(s){if(typeof s!="boolean")throw qr(s,pN);return s?"?1":"?0"}function mN(s){return btoa(String.fromCharCode(...s))}var yN="Byte Sequence";function vN(s){if(ArrayBuffer.isView(s)===!1)throw qr(s,yN);return`:${mN(s)}:`}var TN="Integer";function _N(s){return s<-999999999999999||999999999999999<s}function mC(s){if(_N(s))throw qr(s,TN);return s.toString()}function bN(s){return`@${mC(s.getTime()/1e3)}`}function yC(s,e){if(s<0)return-yC(-s,e);let t=Math.pow(10,e);if(Math.abs(s*t%1-.5)<Number.EPSILON){let n=Math.floor(s*t);return(n%2===0?n:n+1)/t}else return Math.round(s*t)/t}var EN="Decimal";function SN(s){let e=yC(s,3);if(Math.floor(Math.abs(e)).toString().length>12)throw qr(s,EN);let t=e.toString();return t.includes(".")?t:`${t}.0`}var xN="String",AN=/[\x00-\x1f\x7f]+/;function CN(s){if(AN.test(s))throw qr(s,xN);return`"${s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function wN(s){return s.description||s.toString().slice(7,-1)}var IN="Token";function tA(s){let e=wN(s);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw qr(e,IN);return e}function dv(s){switch(typeof s){case"number":if(!ft(s))throw qr(s,eA);return Number.isInteger(s)?mC(s):SN(s);case"string":return CN(s);case"symbol":return tA(s);case"boolean":return gN(s);case"object":if(s instanceof Date)return bN(s);if(s instanceof Uint8Array)return vN(s);if(s instanceof Ap)return tA(s);default:throw qr(s,eA)}}var DN="Key";function hv(s){if(/^[a-z*][a-z0-9\-_.*]*$/.test(s)===!1)throw qr(s,DN);return s}function sT(s){return s==null?"":Object.entries(s).map(([e,t])=>t===!0?`;${hv(e)}`:`;${hv(e)}=${dv(t)}`).join("")}function vC(s){return s instanceof Jn?`${dv(s.value)}${sT(s.params)}`:dv(s)}function LN(s){return`(${s.value.map(vC).join(" ")})${sT(s.params)}`}function kN(s,e={whitespace:!0}){if(typeof s!="object"||s==null)throw qr(s,dN);let t=s instanceof Map?s.entries():Object.entries(s),i=e?.whitespace?" ":"";return Array.from(t).map(([n,r])=>{r instanceof Jn||(r=new Jn(r));let a=hv(n);return r.value===!0?a+=sT(r.params):(a+="=",Array.isArray(r.value)?a+=LN(r):a+=vC(r)),a}).join(`,${i}`)}function TC(s,e){return kN(s,e)}var Ur="CMCD-Object",Mi="CMCD-Request",jo="CMCD-Session",Qa="CMCD-Status",RN={br:Ur,ab:Ur,d:Ur,ot:Ur,tb:Ur,tpb:Ur,lb:Ur,tab:Ur,lab:Ur,url:Ur,pb:Mi,bl:Mi,tbl:Mi,dl:Mi,ltc:Mi,mtp:Mi,nor:Mi,nrr:Mi,rc:Mi,sn:Mi,sta:Mi,su:Mi,ttfb:Mi,ttfbb:Mi,ttlb:Mi,cmsdd:Mi,cmsds:Mi,smrt:Mi,df:Mi,cs:Mi,ts:Mi,cid:jo,pr:jo,sf:jo,sid:jo,st:jo,v:jo,msd:jo,bs:Qa,bsd:Qa,cdn:Qa,rtp:Qa,bg:Qa,pt:Qa,ec:Qa,e:Qa},PN={REQUEST:Mi};function ON(s){return Object.keys(s).reduce((e,t)=>{var i;return(i=s[t])===null||i===void 0||i.forEach(n=>e[n]=t),e},{})}function MN(s,e){let t={};if(!s)return t;let i=Object.keys(s),n=e?ON(e):{};return i.reduce((r,a)=>{var o;let l=RN[a]||n[a]||PN.REQUEST,u=(o=r[l])!==null&&o!==void 0?o:r[l]={};return u[a]=s[a],r},t)}function NN(s){return["ot","sf","st","e","sta"].includes(s)}function FN(s){return typeof s=="number"?ft(s):s!=null&&s!==""&&s!==!1}var _C="event";function $N(s,e){let t=new URL(s),i=new URL(e);if(t.origin!==i.origin)return s;let n=t.pathname.split("/").slice(1),r=i.pathname.split("/").slice(1,-1);for(;n[0]===r[0];)n.shift(),r.shift();for(;r.length;)r.shift(),n.unshift("..");return n.join("/")+t.search+t.hash}var np=s=>Math.round(s),fv=(s,e)=>Array.isArray(s)?s.map(t=>fv(t,e)):s instanceof Jn&&typeof s.value=="string"?new Jn(fv(s.value,e),s.params):(e.baseUrl&&(s=$N(s,e.baseUrl)),e.version===1?encodeURIComponent(s):s),Wf=s=>np(s/100)*100,BN=(s,e)=>{let t=s;return e.version>=2&&(s instanceof Jn&&typeof s.value=="string"?t=new Jn([s]):typeof s=="string"&&(t=[s])),fv(t,e)},UN={br:np,d:np,bl:Wf,dl:Wf,mtp:Wf,nor:BN,rtp:Wf,tb:np},bC="request",EC="response",nT=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],HN=["e"],VN=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Op(s){return VN.test(s)}function jN(s){return nT.includes(s)||HN.includes(s)||Op(s)}var SC=["d","dl","nor","ot","rtp","su"];function GN(s){return nT.includes(s)||SC.includes(s)||Op(s)}var qN=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function zN(s){return nT.includes(s)||SC.includes(s)||qN.includes(s)||Op(s)}var WN=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function KN(s){return WN.includes(s)||Op(s)}var YN={[EC]:zN,[_C]:jN,[bC]:GN};function xC(s,e={}){let t={};if(s==null||typeof s!="object")return t;let i=e.version||s.v||1,n=e.reportingMode||bC,r=i===1?KN:YN[n],a=Object.keys(s).filter(r),o=e.filter;typeof o=="function"&&(a=a.filter(o));let l=n===EC||n===_C;l&&!a.includes("ts")&&a.push("ts"),i>1&&!a.includes("v")&&a.push("v");let u=fi({},UN,e.formatters),c={version:i,reportingMode:n,baseUrl:e.baseUrl};return a.sort().forEach(h=>{let g=s[h],m=u[h];if(typeof m=="function"&&(g=m(g,c)),h==="v"){if(i===1)return;g=i}h=="pr"&&g===1||(l&&h==="ts"&&!ft(g)&&(g=Date.now()),FN(g)&&(NN(h)&&typeof g=="string"&&(g=new Ap(g)),t[h]=g))}),t}function XN(s,e={}){let t={};if(!s)return t;let i=xC(s,e),n=MN(i,e?.customHeaderMap);return Object.entries(n).reduce((r,[a,o])=>{let l=TC(o,{whitespace:!1});return l&&(r[a]=l),r},t)}function QN(s,e,t){return fi(s,XN(e,t))}var JN="CMCD";function ZN(s,e={}){return s?TC(xC(s,e),{whitespace:!1}):""}function eF(s,e={}){if(!s)return"";let t=ZN(s,e);return encodeURIComponent(t)}function tF(s,e={}){if(!s)return"";let t=eF(s,e);return`${JN}=${t}`}var iA=/CMCD=[^&#]+/;function iF(s,e,t){let i=tF(e,t);if(!i)return s;if(iA.test(s))return s.replace(iA,i);let n=s.includes("?")?"&":"?";return`${s}${n}${i}`}var pv=class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=n=>{try{this.apply(n,{ot:hn.MANIFEST,su:!this.initialized})}catch(r){this.hls.logger.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=n=>{try{let{frag:r,part:a}=n,o=this.hls.levels[r.level],l=this.getObjectType(r),u={d:(a||r).duration*1e3,ot:l};(l===hn.VIDEO||l===hn.AUDIO||l==hn.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(l)/1e3,u.bl=this.getBufferLength(l));let c=a?this.getNextPart(a):this.getNextFrag(r);c!=null&&c.url&&c.url!==r.url&&(u.nor=c.url),this.apply(n,u)}catch(r){this.hls.logger.warn("Could not generate segment CMCD data.",r)}},this.hls=e;let t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){let e=this.hls;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHED,this.onMediaDetached,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){let e=this.hls;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHED,this.onMediaDetached,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,n;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(n=t.tracks.video)==null?void 0:n.buffer}createData(){var e;return{v:1,sf:cN.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){fi(t,this.createData());let i=t.ot===hn.INIT||t.ot===hn.VIDEO||t.ot===hn.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);let{includeKeys:n}=this;n&&(t=Object.keys(t).reduce((a,o)=>(n.includes(o)&&(a[o]=t[o]),a),{}));let r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),QN(e.headers,t,r)):e.url=iF(e.url,t,r)}getNextFrag(e){var t;let i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){let n=e.sn-i.startSN;return i.fragments[n+1]}}getNextPart(e){var t;let{index:i,fragment:n}=e,r=(t=this.hls.levels[n.level])==null||(t=t.details)==null?void 0:t.partList;if(r){let{sn:a}=n;for(let o=r.length-1;o>=0;o--){let l=r[o];if(l.index===i&&l.fragment.sn===a)return r[o+1]}}}getObjectType(e){let{type:t}=e;if(t==="subtitle")return hn.TIMED_TEXT;if(e.sn==="initSegment")return hn.INIT;if(t==="audio")return hn.AUDIO;if(t==="main")return this.hls.audioTracks.length?hn.VIDEO:hn.MUXED}getTopBandwidth(e){let t=0,i,n=this.hls;if(e===hn.AUDIO)i=n.audioTracks;else{let r=n.maxAutoLevel,a=r>-1?r+1:n.levels.length;i=n.levels.slice(0,a)}return i.forEach(r=>{r.bitrate>t&&(t=r.bitrate)}),t>0?t:NaN}getBufferLength(e){let t=this.media,i=e===hn.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:Ft.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){let{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}createFragmentLoader(){let{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}},sF=3e5,gv=class extends pn{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){let e=this.hls;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let e=this.hls;!e||(e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){let e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){let t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){let{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){let{errorAction:i}=t;if(i?.action===hs.SendAlternateToPenaltyBox&&i.flags===In.MoveAllAlternatesMatchingHost){let n=this.levels,r=this._pathwayPriority,a=this.pathwayId;if(t.context){let{groupId:o,pathwayId:l,type:u}=t.context;o&&n?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&n&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==a),t.details===Ae.BUFFER_APPEND_ERROR&&!t.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${n&&n.length} priorities: ${yi(r)} penalized: ${yi(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){let i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t,i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach(r=>{n-i[r]>sF&&delete i[r]});for(let r=0;r<e.length;r++){let a=e[r];if(a in i)continue;if(a===this.pathwayId)return;let o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,KA(t),this.hls.trigger(B.LEVELS_UPDATED,{levels:t});let u=this.hls.levels[o];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,i){let n=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<n.length;r++)if(t===Yt.AUDIO_TRACK&&n[r].hasAudioGroup(e)||t===Yt.SUBTITLE_TRACK&&n[r].hasSubtitleGroup(e))return n[r].pathwayId;return i}clonePathways(e){let t=this.levels;if(!t)return;let i={},n={};e.forEach(r=>{let{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=r;if(t.some(c=>c.pathwayId===a))return;let u=this.getLevelsForPathway(o).map(c=>{let h=new Ei(c.attrs);h["PATHWAY-ID"]=a;let g=h.AUDIO&&`${h.AUDIO}_clone_${a}`,m=h.SUBTITLES&&`${h.SUBTITLES}_clone_${a}`;g&&(i[h.AUDIO]=g,h.AUDIO=g),m&&(n[h.SUBTITLES]=m,h.SUBTITLES=m);let v=AC(c.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),b=new Ko({attrs:h,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:v,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let A=1;A<c.audioGroups.length;A++)b.addGroupId("audio",`${c.audioGroups[A]}_clone_${a}`);if(c.subtitleGroups)for(let A=1;A<c.subtitleGroups.length;A++)b.addGroupId("text",`${c.subtitleGroups[A]}_clone_${a}`);return b});t.push(...u),sA(this.audioTracks,i,l,a),sA(this.subtitleTracks,n,l,a)})}loadSteeringManifest(e){let t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let n;try{n=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(n.protocol!=="data:"){let c=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+c)}let r={responseType:"json",url:n.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(c,h,g,m)=>{this.log(`Loaded steering manifest: "${n}"`);let v=c.data;if(v?.VERSION!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;let{"RELOAD-URI":b,"PATHWAY-CLONES":A,"PATHWAY-PRIORITY":R}=v;if(b)try{this.uri=new self.URL(b,n).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||g.url),A&&this.clonePathways(A);let F={steeringManifest:v,url:n.toString()};this.hls.trigger(B.STEERING_MANIFEST_LOADED,F),R&&this.updatePathwayPriority(R)},onError:(c,h,g,m)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${h.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let v=this.timeToLoad*1e3;if(c.code===429){let b=this.loader;if(typeof b?.getResponseHeader=="function"){let A=b.getResponseHeader("Retry-After");A&&(v=parseFloat(A)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,v)},onTimeout:(c,h,g)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${n}`),this.loader.load(r,l,u)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;let n=(i=this.hls)==null?void 0:i.media;if(n&&!n.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}};function sA(s,e,t,i){!s||Object.keys(e).forEach(n=>{let r=s.filter(a=>a.groupId===n).map(a=>{let o=fi({},a);return o.details=void 0,o.attrs=new Ei(o.attrs),o.url=o.attrs.URI=AC(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[n],o.attrs["PATHWAY-ID"]=i,o});s.push(...r)})}function AC(s,e,t,i){let{HOST:n,PARAMS:r,[t]:a}=i,o;e&&(o=a?.[e],o&&(s=o));let l=new self.URL(s);return n&&!o&&(l.host=n),r&&Object.keys(r).sort().forEach(u=>{u&&l.searchParams.set(u,r[u])}),l.href}var eo=class extends pn{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=eo.CDMCleanupPromise?[eo.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{let{initDataType:i,initData:n}=t,r=`"${t.type}" event: init data type: "${i}"`;if(this.debug(r),n!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=rd(this.config));let o=a.map(ly).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{let o=ip(a);if(i!=="sinf"||o!==Di.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}let l;try{let m=Ji(new Uint8Array(n)),v=Xv(JSON.parse(m).sinf),b=AA(v);if(!b)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(b.subarray(8,24))}catch(m){this.warn(`${r} Failed to parse sinf: ${m}`);return}let u=qs(l),{keyIdToKeySessionPromise:c,mediaKeySessions:h}=this,g=c[u];for(let m=0;m<h.length;m++){let v=h[m],b=v.decryptdata;if(!b.keyId)continue;let A=qs(b.keyId);if(yp(l,b.keyId)||b.uri.replace(/-/g,"").indexOf(u)!==-1){if(g=c[A],!g)continue;if(b.pssh)break;delete c[A],b.pssh=new Uint8Array(n),b.keyId=l,g=c[u]=g.then(()=>this.generateRequestWithPreferredKeySession(v,i,n,"encrypted-event-key-match")),g.catch(R=>this.handleError(R));break}}g||this.handleError(new Error(`Key ID ${u} not encountered in playlist. Key-system sessions ${h.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();let e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(B.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(B.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(B.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(B.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(B.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(B.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){let{drmSystems:t,widevineLicenseUrl:i}=this.config,n=t?.[e];if(n)return n.licenseUrl;if(e===Di.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){let t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){let{drmSystems:t}=this.config,i=t?.[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){let t=this.hls.levels,i=(a,o,l)=>!!a&&l.indexOf(a)===o,n=t.map(a=>a.audioCodec).filter(i),r=t.map(a=>a.videoCodec).filter(i);return n.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,o)=>{let l=u=>{let c=u.shift();this.getMediaKeysPromise(c,n,r).then(h=>a({keySystem:c,mediaKeys:h})).catch(h=>{u.length?l(u):h instanceof Gs?o(h):o(new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};l(e)})}requestMediaKeySystemAccess(e,t){let{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let n=`Configured requestMediaKeySystemAccess is not a function ${i}`;return UA===null&&self.location.protocol==="http:"&&(n=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(n))}return i(e,t)}getMediaKeysPromise(e,t,i){var n;let r=tM(e,t,i,this.config.drmSystemOptions||{}),a=this.keySystemAccessPromises[e],o=(n=a)==null?void 0:n.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${yi(r)}`),o=this.requestMediaKeySystemAccess(e,r);let l=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),o.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);let c=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);let h=l.mediaKeys=u.createMediaKeys().then(g=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,c.then(m=>m?this.setMediaKeysServerCertificate(g,e,m):g)));return h.catch(g=>{this.error(`Failed to create media-keys for "${e}"}: ${g}`)}),h})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${qs(e.keyId||[])} keyUri: ${e.uri}`);let n=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){let t=e.decryptdata;if(t.pssh){let i=this.createMediaKeySessionContext(e),n=Kf(t),r="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(i,r,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){let i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyId ${qs(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>ly(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:i})=>this.attemptSetMediaKeys(t,i))}selectKeySystem(e){return new Promise((t,i)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:n})=>{let r=ly(n);r?t(r):i(new Error(`Unable to find format for key-system "${n}"`))}).catch(i)})}selectKeySystemFormat(e){let t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){let t=rd(this.config),i=e.map(ip).filter(n=>!!n&&t.indexOf(n)!==-1);return this.selectKeySystem(i)}getKeyStatus(e){let{mediaKeySessions:t}=this;for(let i=0;i<t.length;i++){let n=nF(e,t[i]);if(n)return n}}loadKey(e){let t=e.keyInfo.decryptdata,i=Kf(t),n=this.bannedKeyIds[i];if(n||this.getKeyStatus(t)==="internal-error"){let o=nA(n||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}let r=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let a=this.keyIdToKeySessionPromise[i];if(!a){let o=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(l,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:u,decryptdata:t}))))).then(l=>{let u="cenc",c=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,u,c,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[i]=o,o}return a.catch(o=>{if(o instanceof Gs){let l=li({},o.data);this.getKeyStatus(t)==="internal-error"&&(l.decryptdata=t);let u=new Gs(l,o.message);this.handleError(u,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(!!this.hls)if(e instanceof Gs){t&&(e.data.frag=t);let i=e.data.decryptdata;this.error(`${e.message}${i?` (${qs(i.keyId||[])})`:""}`),this.hls.trigger(B.ERROR,e.data)}else this.error(e.message),this.hls.trigger(B.ERROR,{type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){let t=Kf(e),i=this.keyIdToKeySessionPromise[t];if(!i){let n=ip(e.keyFormat),r=n?[n]:rd(this.config);return this.attemptKeySystemAccess(r)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=rd(this.config)),e.length===0)throw new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${yi({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();let i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);let n=Promise.all(i).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(n),n.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>i.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,i,n){var r;let a=(r=this.config.drmSystems)==null||(r=r[e.keySystem])==null?void 0:r.generateRequest;if(a)try{let v=a.call(this.hls,t,i,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");t=v.initDataType,i=v.initData?v.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(v){if(this.warn(v.message),this.hls&&this.hls.config.debug)throw v}if(i===null)return this.log(`Skipping key-session request for "${n}" (no initData)`),Promise.resolve(e);let o=Kf(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${n}" keyId: ${o} URI: ${l} (init data type: ${t} length: ${i.byteLength})`);let u=new Qv,c=e._onmessage=v=>{let b=e.mediaKeysSession;if(!b){u.emit("error",new Error("invalid state"));return}let{messageType:A,message:R}=v;this.log(`"${A}" message event for session "${b.sessionId}" message size: ${R.byteLength}`),A==="license-request"||A==="license-renewal"?this.renewLicense(e,R).catch(F=>{u.eventNames().length?u.emit("error",F):this.handleError(F)}):A==="license-release"?e.keySystem===Di.FAIRPLAY&&this.updateKeySession(e,jy("acknowledged")).then(()=>this.removeSession(e)).catch(F=>this.handleError(F)):this.warn(`unhandled media key message type "${A}"`)},h=(v,b)=>{b.keyStatus=v;let A;v.startsWith("usable")?u.emit("resolved"):v==="internal-error"||v==="output-restricted"||v==="output-downscaled"?A=nA(v,b.decryptdata):v==="expired"?A=new Error(`key expired (keyId: ${o})`):v==="released"?A=new Error("key released"):v==="status-pending"||this.warn(`unhandled key status change "${v}" (keyId: ${o})`),A&&(u.eventNames().length?u.emit("error",A):this.handleError(A))},g=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}let A=this.getKeyStatuses(e);if(!Object.keys(A).some(H=>A[H]!=="status-pending"))return;if(A[o]==="expired"){this.log(`Expired key ${yi(A)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let F=A[o];if(F)h(F,e);else{var O;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(O=e.keyStatusTimeouts)[o]||(O[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;let W=this.getKeyStatus(e.decryptdata);if(W&&W!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${W} from other session.`),h(W,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after ${1e3}ms`),F="internal-error",h(F,e)},1e3)),this.log(`No status for keyId ${o} (${yi(A)}).`)}};zs(e.mediaKeysSession,"message",c),zs(e.mediaKeysSession,"keystatuseschange",g);let m=new Promise((v,b)=>{u.on("error",b),u.on("resolved",v)});return e.mediaKeysSession.generateRequest(t,i).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(v=>{throw new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_NO_SESSION,error:v,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>m).catch(v=>(u.removeAllListeners(),this.removeSession(e).then(()=>{throw v}))).then(()=>(u.removeAllListeners(),e))}getKeyStatuses(e){let t={};return e.mediaKeysSession.keyStatuses.forEach((i,n)=>{if(typeof n=="string"&&typeof i=="object"){let o=n;n=i,i=o}let r="buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n);e.keySystem===Di.PLAYREADY&&r.length===16&&$A(r);let a=qs(r);i==="internal-error"&&(this.bannedKeyIds[a]=i),this.log(`key status change "${i}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=i}),t}fetchServerCertificate(e){let t=this.config,i=t.loader,n=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{let l={responseType:"arraybuffer",url:r},u=t.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(g,m,v,b)=>{a(g.data)},onError:(g,m,v,b)=>{o(new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:li({url:l.url,data:void 0},g)},`"${e}" certificate request failed (${r}). Status: ${g.code} (${g.text})`))},onTimeout:(g,m,v)=>{o(new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(g,m,v)=>{o(new Error("aborted"))}};n.load(l,c,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((n,r)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i.byteLength}) on "${t}"`),n(e)}).catch(a=>{r(new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(n=>{throw new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:n,fatal:!1},n.message)}))}unpackPlayReadyKeyMessage(e,t){let i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;let n=new DOMParser().parseFromString(i,"application/xml"),r=n.querySelectorAll("HttpHeader");if(r.length>0){let c;for(let h=0,g=r.length;h<g;h++){var a,o;c=r[h];let m=(a=c.querySelector("name"))==null?void 0:a.textContent,v=(o=c.querySelector("value"))==null?void 0:o.textContent;m&&v&&e.setRequestHeader(m,v)}}let l=n.querySelector("Challenge"),u=l?.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return jy(atob(u))}setupLicenseXHR(e,t,i,n){let r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,n)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",t,!0),r.call(this.hls,e,t,i,n)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||n})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){let i=this.config.keyLoadPolicy.default;return new Promise((n,r)=>{let a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);let o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);let u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,o,a,e)}catch(c){this.error(c)}n(l)}else{let l=i.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)r(new Gs({type:Et.KEY_SYSTEM_ERROR,details:Ae.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{let c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,t).then(n,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==Di.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)}).catch(r)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;let i=t.media;this.media=i,zs(i,"encrypted",this.onMediaEncrypted),zs(i,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){let e=this.media;e&&(fn(e,"encrypted",this.onMediaEncrypted),fn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;let t=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,ma.clearKeyUriToKeyIdMap();let n=i.length;eo.CDMCleanupPromise=Promise.all(i.map(r=>this.removeSession(r)).concat((t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(r=>{this.log(`Could not clear media keys: ${r}`),this.hls&&this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${r}`)})}))||Promise.resolve())).catch(r=>{this.log(`Could not close sessions and clear media keys: ${r}`),this.hls&&this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${r}`)})}).then(()=>{n&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){let i=t.reduce((n,r)=>(n.indexOf(r.keyFormat)===-1&&n.push(r.keyFormat),n),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){let{mediaKeysSession:t,licenseXhr:i,decryptdata:n}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${qs(n?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;let r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);let{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(u=>self.clearTimeout(a[u]));let{drmSystemOptions:o}=this.config;return(sM(o)?new Promise((u,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(u).catch(c)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>t.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}return Promise.resolve()}};eo.CDMCleanupPromise=void 0;function Kf(s){if(!s)throw new Error("Could not read keyId of undefined decryptdata");if(s.keyId===null)throw new Error("keyId is null");return qs(s.keyId)}function nF(s,e){if(s.keyId&&e.mediaKeysSession.keyStatuses.has(s.keyId))return e.mediaKeysSession.keyStatuses.get(s.keyId);if(s.matches(e.decryptdata))return e.keyStatus}var Gs=class extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}};function nA(s,e){let t=s==="output-restricted",i=t?Ae.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Ae.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Gs({type:Et.KEY_SYSTEM_ERROR,details:i,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${s}"`)}var mv=class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(B.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(B.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){let i=this.hls.config;if(i.capLevelOnFPSDrop){let n=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=n,n&&typeof n.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){let n=performance.now();if(t){if(this.lastTime){let r=n-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/r,u=this.hls;if(u.trigger(B.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*o){let c=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(B.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){let e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){let t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}};function CC(s,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=s,e.dispatchEvent(t)}function wC(s,e){let t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues&&!s.cues.getCueById(e.id))try{if(s.addCue(e),!s.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){ui.debug(`[texttrack-utils]: ${i}`);try{let n=new self.TextTrackCue(e.startTime,e.endTime,e.text);n.id=e.id,s.addCue(n)}catch(n){ui.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${n}`)}}t==="disabled"&&(s.mode=t)}function _u(s,e){let t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues)for(let i=s.cues.length;i--;)e&&s.cues[i].removeEventListener("enter",e),s.removeCue(s.cues[i]);t==="disabled"&&(s.mode=t)}function yv(s,e,t,i){let n=s.mode;if(n==="disabled"&&(s.mode="hidden"),s.cues&&s.cues.length>0){let r=aF(s.cues,e,t);for(let a=0;a<r.length;a++)(!i||i(r[a]))&&s.removeCue(r[a])}n==="disabled"&&(s.mode=n)}function rF(s,e){if(e<=s[0].startTime)return 0;let t=s.length-1;if(e>s[t].endTime)return-1;let i=0,n=t,r;for(;i<=n;)if(r=Math.floor((n+i)/2),e<s[r].startTime)n=r-1;else if(e>s[r].startTime&&i<t)i=r+1;else return r;return s[i].startTime-e<e-s[n].startTime?i:n}function aF(s,e,t){let i=[],n=rF(s,e);if(n>-1)for(let r=n,a=s.length;r<a;r++){let o=s[r];if(o.startTime>=e&&o.endTime<=t)i.push(o);else if(o.startTime>t)return i}return i}function rp(s){let e=[];for(let t=0;t<s.length;t++){let i=s[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(s[t])}return e}var vv=class extends _d{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null,i=rp(this.media.textTracks);for(let r=0;r<i.length;r++)if(i[r].mode==="hidden")t=i[r];else if(i[r].mode==="showing"){t=i[r];break}let n=this.findTrackForTextTrack(t);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){let{hls:e}=this;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){let{hls:e}=this;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(B.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){let i=this.media;if(!i)return;let n=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,n)return;rp(i.textTracks).forEach(a=>{_u(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){let{id:i,groupId:n,details:r}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==n){this.warn(`Subtitle track with id:${i} and group:${n} not found in active group ${a?.groupId}`);return}let o=a.details;a.details=t.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${n} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){let t=this.hls.levels[e];if(!t)return;let i=t.subtitleGroups||null,n=this.groupIds,r=this.currentTrack;if(!i||n?.length!==i?.length||i!=null&&i.some(a=>n?.indexOf(a)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;let a=this.tracks.filter(c=>!i||i.indexOf(c.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(c=>c.default)&&(this.selectDefaultTrack=!1),a.forEach((c,h)=>{c.id=h});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;let o=this.hls.config.subtitlePreference;if(!r&&o){this.selectDefaultTrack=!1;let c=Gr(o,a);if(c>-1)r=a[c];else{let h=Gr(o,this.tracks);r=this.tracks[h]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));let u={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i?.join(",")}" group-id`),this.hls.trigger(B.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){let t=this.tracksInGroup,i=this.selectDefaultTrack;for(let n=0;n<t.length;n++){let r=t[n];if(!(i&&!r.default||!i&&!e)&&(!e||zo(r,e)))return n}if(e){for(let n=0;n<t.length;n++){let r=t[n];if(bd(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){let r=t[n];if(bd(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){let t=this.tracksInGroup;for(let i=0;i<t.length;i++){let n=t[i];if(av(n,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Yt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;let t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){let i=this.currentTrack;if(i&&zo(e,i))return i;let n=Gr(e,this.tracksInGroup);if(n>-1){let r=this.tracksInGroup[n];return this.setSubtitleTrack(n),r}else{if(i)return null;{let r=Gr(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);let i=e.id,n=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${n}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(B.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:n,deliveryDirectives:t||null,track:e})}toggleTrackModes(){let{media:e}=this;if(!e)return;let t=rp(e.textTracks),i=this.currentTrack,n;if(i&&(n=t.filter(r=>av(i,r))[0],n||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==n&&(r.mode="disabled")}),n){let r=this.subtitleDisplay?"showing":"hidden";n.mode!==r&&(n.mode=r)}}setSubtitleTrack(e){let t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!ft(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;let i=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),!n){this.hls.trigger(B.SUBTITLE_TRACK_SWITCH,{id:e});return}let r=!!n.details&&!n.details.live;if(e===this.trackId&&n===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(n?` "${n.name}" lang:${n.lang} group:${n.groupId}`:""));let{id:a,groupId:o="",name:l,type:u,url:c}=n;this.hls.trigger(B.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:c});let h=this.switchParams(n.url,i?.details,n.details);this.loadPlaylist(h)}};function oF(){try{return crypto.randomUUID()}catch{try{let e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?r:r&3|8).toString(16)})}}}function ld(s){let e=5381,t=s.length;for(;t;)e=e*33^s.charCodeAt(--t);return(e>>>0).toString()}var Au=.025,Cp=function(s){return s[s.Point=0]="Point",s[s.Range=1]="Range",s}({});function lF(s,e,t){return`${s.identifier}-${t+1}-${ld(e)}`}var Tv=class{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;let i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){let e=this.dateRange.startTime;if(this.snapOptions.out){let t=this.dateRange.tagAnchor;if(t)return yy(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;let e=this.dateRange.tagAnchor;if(e){let t=this.dateRange.startTime,i=yy(t,e);return t-i<.1}return!1}get resumptionOffset(){let e=this.resumeOffset,t=ft(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){let e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){let t=this.resumeAnchor;if(t)return yy(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Au))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){let e=this.playoutLimit,t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Cp.Range:Cp.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return uF(this)}};function yy(s,e){return s-e.start<e.duration/2&&!(Math.abs(s-(e.start+e.duration))<Au)?e.start:e.start+e.duration}function IC(s,e,t){let i=new self.URL(s,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function vy(s,e){for(;(t=s.assetList[++e])!=null&&t.error;)var t;return e}function uF(s){return`["${s.identifier}" ${s.cue.pre?"<pre>":s.cue.post?"<post>":""}${s.timelineStart.toFixed(2)}-${s.resumeTime.toFixed(2)}]`}function Tu(s){let e=s.timelineStart,t=s.duration||0;return`["${s.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}var _v=class{constructor(e,t,i,n){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(B.PLAYOUT_LIMIT_REACHED,{})};let r=this.hls=new e(t);this.interstitial=i,this.assetItem=n;let a=()=>{this.hasDetails=!0};r.once(B.LEVEL_LOADED,a),r.once(B.AUDIO_TRACK_LOADED,a),r.once(B.SUBTITLE_TRACK_LOADED,a),r.on(B.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&r.on(B.BUFFER_APPENDED,()=>{let c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,r.trigger(B.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){let e=this.hls;if(!!e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=IC(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;let i=Math.min(this._bufferedEosTime||1/0,this.duration),n=this.timelineOffset,r=Ft.bufferInfo(e,n,0);return this.getAssetTime(r.end)>=i-.02}reachedPlayout(e){let i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){let e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;let t=Ft.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){let e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){let e=this.assetItem.duration;if(!e)return 0;let t=this.interstitial.playoutLimit;if(t){let i=t-this.startOffset;if(i>0&&i<e)return i}return e}get remaining(){let e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){let t=this.timelineOffset;if(e!==t){let i=e-t;if(Math.abs(i)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){let t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){let e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){let e=this.hls;if(e&&this.hasDetails){e.stopLoad();let t=i=>delete i.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){var n;(n=this.hls)==null||n.on(e,t)}once(e,t,i){var n;(n=this.hls)==null||n.once(e,t)}off(e,t,i){var n;(n=this.hls)==null||n.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Tu(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}},rA=.033,bv=class extends pn{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,n)=>e<=n.startOffset&&t>n.startOffset?(delete n.error,i+1):i,0):0}get duration(){let e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);let n=this.items;if(n)for(n[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(r=n[i])!=null&&r.event;){var r;i--}return i}findItemIndexAtTime(e,t){let i=this.items;if(i)for(let n=0;n<i.length;n++){let r=i[n];if(t&&t!=="primary"&&(r=r[t]),e===r.start||e>r.start&&e<r.end)return n}return-1}findJumpRestrictedIndex(e,t){let i=this.items;if(i)for(let n=e;n<=t&&i[n];n++){let r=i[n].event;if(r!=null&&r.restrictions.jump&&!r.appendInPlace)return n}return-1}findEventIndex(e){let t=this.items;if(t)for(let n=t.length;n--;){var i;if(((i=t[n].event)==null?void 0:i.identifier)===e)return n}return-1}findAssetIndex(e,t){let i=e.assetList,n=i.length;if(n>1)for(let r=0;r<n;r++){let a=i[r];if(!a.error){let o=a.timelineStart;if(t===o||t>o&&(t<o+(a.duration||0)||r===n-1))return r}}return 0}get assetIdAtEnd(){var e;let t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){let i=t.assetList,n=i[i.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){let i=e.main.details,{dateRanges:n}=i,r=this.events,a=this.parseDateRanges(n,{url:i.url},t),o=Object.keys(n),l=r?r.filter(u=>!o.includes(u.identifier)):[];a.length&&a.sort((u,c)=>{let h=u.cue.pre,g=u.cue.post,m=c.cue.pre,v=c.cue.post;if(h&&!m)return-1;if(m&&!h||g&&!v)return 1;if(v&&!g)return-1;if(!h&&!m&&!g&&!v){let b=u.startTime,A=c.startTime;if(b!==A)return b-A}return u.dateRange.tagOrder-c.dateRange.tagOrder}),this.events=a,l.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,l)}updateSchedule(e,t=[],i=!1){let n=this.events||[];if(n.length||t.length||this.length<2){let r=this.items,a=this.parseSchedule(n,e);(i||t.length||r?.length!==a.length||a.some((l,u)=>Math.abs(l.playout.start-r[u].playout.start)>.005||Math.abs(l.playout.end-r[u].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,r))}}parseDateRanges(e,t,i){let n=[],r=Object.keys(e);for(let a=0;a<r.length;a++){let o=r[a],l=e[o];if(l.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(l):(u=new Tv(l,t),this.eventMap[o]=u,i===!1&&(u.appendInPlace=i)),n.push(u)}}return n}parseSchedule(e,t){let i=[],n=t.main.details,r=n.live?1/0:n.edge,a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,u=0;if(e.forEach((c,h)=>{let g=c.cue.pre,m=c.cue.post,v=e[h-1]||null,b=c.appendInPlace,A=m?r:c.startOffset,R=c.duration,F=c.timelineOccupancy===Cp.Range?R:0,O=c.resumptionOffset,H=v?.startTime===A,W=A+c.cumulativeDuration,E=b?W+R:A+O;if(g||!m&&A<=0){let Z=u;u+=F,c.timelineStart=W;let re=a;a+=R,i.push({event:c,start:W,end:E,playout:{start:re,end:a},integrated:{start:Z,end:u}})}else if(A<=r){if(!H){let oe=A-l;if(oe>rA){let ve=l,Ce=u;u+=oe;let we=a;a+=oe;let Ge={previousEvent:e[h-1]||null,nextEvent:c,start:ve,end:ve+oe,playout:{start:we,end:a},integrated:{start:Ce,end:u}};i.push(Ge)}else oe>0&&v&&(v.cumulativeDuration+=oe,i[i.length-1].end=A)}m&&(E=W),c.timelineStart=W;let Z=u;u+=F;let re=a;a+=R,i.push({event:c,start:W,end:E,playout:{start:re,end:a},integrated:{start:Z,end:u}})}else return;let X=c.resumeTime;m||X>r?l=r:l=X}),l<r){var o;let c=l,h=u,g=r-l;u+=g;let m=a;a+=g,i.push({previousEvent:((o=i[i.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:c+g,playout:{start:m,end:a},integrated:{start:h,end:u}})}this.setDurations(r,a,u)}else i.push({previousEvent:null,nextEvent:null,start:0,end:r,playout:{start:0,end:r},integrated:{start:0,end:r}}),this.setDurations(r,r,r);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){let i=t.main.details,n=i.live?1/0:i.edge,r=0,a=-1;e.forEach((o,l)=>{let u=o.cue.pre,c=o.cue.post,h=u?0:c?n:o.startTime;this.updateAssetDurations(o),a===h?o.cumulativeDuration=r:(r=0,a=h),!c&&o.snapOptions.in&&(o.resumeAnchor=Yo(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<rA&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));let m=ft(o.resumeOffset)?o.resumeOffset:o.duration;r+=m})}primaryCanResumeInPlaceAt(e,t){let i=e.resumeTime,n=e.startTime+e.resumptionOffset;return Math.abs(i-n)>Au?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${n}`),!1):!Object.keys(t).some(a=>{let o=t[a].details,l=o.edge;if(i>=l)return this.log(`"${e.identifier}" resumption ${i} past ${a} playlist end ${l}`),!1;let u=Yo(null,o.fragments,i);if(!u)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;let c=a==="audio"?.175:0;return Math.abs(u.start-i)<Au+c||Math.abs(u.end-i)<Au+c?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${a} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;let t=e.timelineStart,i=0,n=!1,r=!1;for(let a=0;a<e.assetList.length;a++){let o=e.assetList[a],l=t+i;o.startOffset=i,o.timelineStart=l,n||(n=o.duration===null),r||(r=!!o.error);let u=o.error?0:o.duration||0;i+=u}n&&!r?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}};function dr(s){return`[${s.event?'"'+s.event.identifier+'"':"primary"}: ${s.start.toFixed(2)}-${s.end.toFixed(2)}]`}var Ev=class{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){let i=e.assetListUrl,n;try{n=IC(i,this.hls.sessionId,e.baseUrl)}catch(g){let m=this.assignAssetListError(e,Ae.ASSET_LIST_LOAD_ERROR,g,i);this.hls.trigger(B.ERROR,m);return}t&&n.protocol!=="data:"&&n.searchParams.set("_HLS_start_offset",""+t);let r=this.hls.config,a=r.loader,o=new a(r),l={responseType:"json",url:n.href},u=r.interstitialAssetListLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(g,m,v,b)=>{let A=g.data,R=A?.ASSETS;if(!Array.isArray(R)){let F=this.assignAssetListError(e,Ae.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,m,b);this.hls.trigger(B.ERROR,F);return}e.assetListResponse=A,this.hls.trigger(B.ASSET_LIST_LOADED,{event:e,assetListResponse:A,networkDetails:b})},onError:(g,m,v,b)=>{let A=this.assignAssetListError(e,Ae.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${g.code} ${g.text} (${m.url})`),m.url,b,v);this.hls.trigger(B.ERROR,A)},onTimeout:(g,m,v)=>{let b=this.assignAssetListError(e,Ae.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${m.url})`),m.url,g,v);this.hls.trigger(B.ERROR,b)}};return o.load(l,c,h),this.hls.trigger(B.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,i,n,r,a){return e.error=i,{type:Et.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:n,error:i,networkDetails:a,stats:r}}};function aA(s){s?.play().catch(()=>{})}function Yf(s,e){return`[${s}] Advancing timeline position to ${e}`}var Sv=class extends pn{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{let i=this.currentTime;if(i===void 0||this.playbackDisabled||!this.schedule)return;let n=i-this.timelinePos;if(Math.abs(n)<1/7056e5)return;let a=n<=-.01;this.timelinePos=i,this.bufferedPos=i;let o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(i,i-n)&&this.updateSchedule(!0),this.checkBuffer(),a&&i<o.start||i>=o.end){var l;let m=this.findItemIndex(o),v=this.schedule.findItemIndexAtTime(i);if(v===-1&&(v=m+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${i} (resolving from ${m} to ${v})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a&&v>m){let b=this.schedule.findJumpRestrictedIndex(m+1,v);if(b>m){this.setSchedulePosition(b);return}}this.setSchedulePosition(v);return}let u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){let m=o.event.assetList[0];m&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,m))}return}let c=u.timelineStart,h=u.duration||0;if(a&&i<c||i>=c+h){var g;(g=o.event)!=null&&g.appendInPlace&&(this.clearInterstitial(o.event,o),this.flushFrontBuffer(i)),this.setScheduleToAssetAtTime(i,u)}},this.onTimeupdate=()=>{let i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;let n=this.playingItem;if(!n||this.playingLastItem)return;if(i>=n.end){this.timelinePos=n.end;let o=this.findItemIndex(n);this.setSchedulePosition(o+1)}let r=this.playingAsset;if(!r)return;let a=r.timelineStart+(r.duration||0);i>=a&&this.setScheduleToAssetAtTime(i,r)},this.onScheduleUpdate=(i,n)=>{let r=this.schedule;if(!r)return;let a=this.playingItem,o=r.events||[],l=r.items||[],u=r.durations,c=i.map(b=>b.identifier),h=!!(o.length||c.length);(h||n)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(b=>dr(b))} pos: ${this.timelinePos}`),c.length&&this.log(`Removed events ${c}`);let g=null,m=null;a&&(g=this.updateItem(a,this.timelinePos),this.itemsMatch(a,g)?this.playingItem=g:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);let v=this.bufferingItem;if(v&&(m=this.updateItem(v,this.bufferedPos),this.itemsMatch(v,m)?this.bufferingItem=m:v.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(v.event,null))),i.forEach(b=>{b.assetList.forEach(A=>{this.clearAssetPlayer(A.identifier,null)})}),this.playerQueue.forEach(b=>{if(b.interstitial.appendInPlace){let A=b.assetItem.timelineStart,R=b.timelineOffset-A;if(R)try{b.timelineOffset=A}catch(F){Math.abs(R)>Au&&this.warn(`${F} ("${b.assetId}" ${b.timelineOffset}->${A})`)}}}),h||n){if(this.hls.trigger(B.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:u,removedIds:c}),this.isInterstitial(a)&&c.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(g,a),v&&m!==g&&this.trimInPlace(m,v),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Ev(e),this.schedule=new bv(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){let e=this.hls;e&&(e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(B.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(B.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(B.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(B.MEDIA_ENDED,this.onMediaEnded,this),e.on(B.ERROR,this.onError,this),e.on(B.DESTROYING,this.onDestroying,this))}unregisterListeners(){let e=this.hls;e&&(e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(B.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(B.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(B.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(B.MEDIA_ENDED,this.onMediaEnded,this),e.off(B.ERROR,this.onError,this),e.off(B.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){let e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){fn(e,"play",this.onPlay),fn(e,"pause",this.onPause),fn(e,"seeking",this.onSeeking),fn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){let i=this.media=t.media;zs(i,"seeking",this.onSeeking),zs(i,"timeupdate",this.onTimeupdate),zs(i,"play",this.onPlay),zs(i,"pause",this.onPause)}onMediaAttached(e,t){let i=this.effectivePlayingItem,n=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!n){this.clearScheduleState();let r=this.findItemIndex(i);this.setSchedulePosition(r)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){let i=!!t.transferMedia,n=this.media;if(this.media=null,!i&&(n&&this.removeMediaListeners(n),this.detachedData)){let r=this.getBufferingPlayer();r&&(this.log(`Removing schedule state for detachedData and ${r}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,r.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;let e=this,t=()=>e.bufferingItem||e.waitingItem,i=h=>h&&e.getAssetPlayer(h.identifier),n=(h,g,m,v,b)=>{if(h){let A=h[g].start,R=h.event;if(R){if(g==="playout"||R.timelineOccupancy!==Cp.Point){let F=i(m);F?.interstitial===R&&(A+=F.assetItem.startOffset+F[b])}}else{let F=v==="bufferedPos"?a():e[v];A+=F-h.start}return A}return 0},r=(h,g)=>{var m;if(h!==0&&g!=="primary"&&(m=e.schedule)!=null&&m.length){var v;let b=e.schedule.findItemIndexAtTime(h),A=(v=e.schedule.items)==null?void 0:v[b];if(A){let R=A[g].start-A.start;return h+R}}return h},a=()=>{let h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var g,m;return(g=e.primaryDetails)!=null&&g.live?e.primaryDetails.edge:((m=e.schedule)==null?void 0:m.durations[h])||0},l=(h,g)=>{var m,v;let b=e.effectivePlayingItem;if(b!=null&&(m=b.event)!=null&&m.restrictions.skip||!e.schedule)return;e.log(`seek to ${h} "${g}"`);let A=e.effectivePlayingItem,R=e.schedule.findItemIndexAtTime(h,g),F=(v=e.schedule.items)==null?void 0:v[R],O=e.getBufferingPlayer(),H=O?.interstitial,W=H?.appendInPlace,E=A&&e.itemsMatch(A,F);if(A&&(W||E)){let X=i(e.playingAsset),Z=X?.media||e.primaryMedia;if(Z){let re=g==="primary"?Z.currentTime:n(A,g,e.playingAsset,"timelinePos","currentTime"),oe=h-re,ve=(W?re:Z.currentTime)+oe;if(ve>=0&&(!X||W||ve<=X.duration)){Z.currentTime=ve;return}}}if(F){let X=h;if(g!=="primary"){let re=F[g].start,oe=h-re;X=F.start+oe}let Z=!e.isInterstitial(F);if((!e.isInterstitial(A)||A.event.appendInPlace)&&(Z||F.event.appendInPlace)){let re=e.media||(W?O?.media:null);re&&(re.currentTime=X)}else if(A){let re=e.findItemIndex(A);if(R>re){let ve=e.schedule.findJumpRestrictedIndex(re+1,R);if(ve>re){e.setSchedulePosition(ve);return}}let oe=0;if(Z)e.timelinePos=X,e.checkBuffer();else{let ve=F.event.assetList,Ce=h-(F[g]||F).start;for(let we=ve.length;we--;){let Ge=ve[we];if(Ge.duration&&Ce>=Ge.startOffset&&Ce<Ge.startOffset+Ge.duration){oe=we;break}}}e.setSchedulePosition(R,oe)}}},u=()=>{let h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;let g=t();return e.isInterstitial(g)?g:null},c={get bufferedEnd(){let h=t(),g=e.bufferingItem;if(g&&g===h){var m;return n(g,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-g.playout.start||((m=e.bufferingAsset)==null?void 0:m.startOffset)||0}return 0},get currentTime(){let h=u(),g=e.effectivePlayingItem;return g&&g===h?n(g,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-g.playout.start:0},set currentTime(h){let g=u(),m=e.effectivePlayingItem;m&&m===g&&l(h+m.playout.start,"playout")},get duration(){let h=u();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;let g=(h=u())==null?void 0:h.event.assetList;return g?g.map(m=>e.getAssetPlayer(m.identifier)):[]},get playingIndex(){var h;let g=(h=u())==null?void 0:h.event;return g&&e.effectivePlayingAsset?g.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};return this.manager={get events(){var h;return((h=e.schedule)==null||(h=h.events)==null?void 0:h.slice(0))||[]},get schedule(){var h;return((h=e.schedule)==null||(h=h.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return u()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){let h=t();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){let h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return a()},get currentTime(){let h=e.timelinePos;return h>0?h:0},set currentTime(h){l(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return n(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return n(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){l(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return r(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{let h=e.effectivePlayingItem,g=h?.event;if(g&&!g.restrictions.skip){let m=e.findItemIndex(h);if(g.appendInPlace){let v=h.playout.start+h.event.duration;l(v+.001,"playout")}else e.advanceAfterAssetEnded(g,m,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;let t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;let i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let n=this.media;!n&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(n=this.primaryMedia);let r=(t=n)==null?void 0:t.currentTime;if(!(r===void 0||!ft(r)))return r}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){let i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){let i=e.interstitial.appendInPlace,n=e.media;if(i&&n===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&n){this.detachedData={media:n};return}let r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${yi(r)}`),this.detachedData=r}else t&&n&&(this.shouldPlay||(this.shouldPlay=!n.paused))}transferMediaTo(e,t){var i,n;if(e.media===t)return;let r=null,a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,u=(i=this.detachedData)==null?void 0:i.mediaSource,c;if(a.media)l&&(r=a.transferMedia(),this.detachedData=r),c="Primary";else if(u){let v=this.getBufferingPlayer();v?(r=v.transferMedia(),c=`${v}`):c="detached MediaSource"}else c="detached media";if(!r){if(u)r=this.detachedData,this.log(`using detachedData: MediaSource ${yi(r)}`);else if(!this.detachedData||a.media===t){let v=this.playerQueue;v.length>1&&v.forEach(b=>{if(o&&b.interstitial.appendInPlace!==l){let A=b.interstitial;this.clearInterstitial(b.interstitial,null),A.appendInPlace=!1,A.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${A}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}let h=r&&"mediaSource"in r&&((n=r.mediaSource)==null?void 0:n.readyState)!=="closed",g=h&&r?r:t;this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${c} (media.currentTime: ${t.currentTime})`);let m=this.schedule;if(g===r&&m){let v=o&&e.assetId===m.assetIdAtEnd;g.overrides={duration:m.duration,endOfStream:!o||v,cueRemoval:!o}}e.attachMedia(g)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){let e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);let i=this.timelinePos,n=this.effectivePlayingItem;if(i===-1){let r=this.hls.startPosition;if(this.log(Yf("checkStart",r)),this.timelinePos=r,t.length&&t[0].cue.pre){let a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(r>=0||!this.primaryLive){let a=this.timelinePos=r>0?r:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(n&&!this.playingItem){let r=e.findItemIndex(n);this.setSchedulePosition(r)}}advanceAssetBuffering(e,t){let i=e.event,n=i.findAssetIndex(t),r=vy(i,n);if(!i.isAssetPastPlayoutLimit(r))this.bufferedToEvent(e,r);else if(this.schedule){var a;let o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,i){let n=vy(e,i);if(e.isAssetPastPlayoutLimit(n)){if(this.schedule){let r=this.schedule.items;if(r){let a=t+1,o=r.length;if(a>=o){this.setSchedulePosition(-1);return}let l=e.resumeTime;this.timelinePos<l&&(this.log(Yf("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){let r=e.assetList[n];r&&this.advanceInPlace(r.timelineStart)}this.setSchedulePosition(t,n)}}setScheduleToAssetAtTime(e,t){let i=this.schedule;if(!i)return;let n=t.parentIdentifier,r=i.getEvent(n);if(r){let a=i.findEventIndex(n),o=i.findAssetIndex(r,e);this.advanceAfterAssetEnded(r,a,o-1)}}setSchedulePosition(e,t){var i;let n=(i=this.schedule)==null?void 0:i.items;if(!n||this.playbackDisabled)return;let r=e>=0?n[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${r&&dr(r)}) pos: ${this.timelinePos}`);let a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){let c=a.event,h=this.playingAsset,g=h?.identifier,m=g?this.getAssetPlayer(g):null;if(m&&g&&(!this.eventItemsMatch(a,r)||t!==void 0&&g!==c.assetList[t].identifier)){var l;let v=c.findAssetIndex(h);if(this.log(`INTERSTITIAL_ASSET_ENDED ${v+1}/${c.assetList.length} ${Tu(h)}`),this.endedAsset=h,this.playingAsset=null,this.hls.trigger(B.INTERSTITIAL_ASSET_ENDED,{asset:h,assetListIndex:v,event:c,schedule:n.slice(0),scheduleIndex:e,player:m}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(c,this.findItemIndex(this.playingItem),v);return}this.retreiveMediaSource(g,r),m.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&m.detachMedia()}if(!this.eventItemsMatch(a,r)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${dr(a)}`),c.hasPlayed=!0,this.hls.trigger(B.INTERSTITIAL_ENDED,{event:c,schedule:n.slice(0),scheduleIndex:e}),c.cue.once)){var u;this.updateSchedule();let v=(u=this.schedule)==null?void 0:u.items;if(r&&v){let b=this.findItemIndex(r);this.advanceSchedule(b,v,t,a,o)}return}}this.advanceSchedule(e,n,t,a,o)}advanceSchedule(e,t,i,n,r){let a=this.schedule;if(!a)return;let o=t[e]||null,l=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(c=>{let h=c.interstitial,g=a.findEventIndex(h.identifier);(g<e||g>e+1)&&this.clearInterstitial(h,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);let c=o.event;if(i===void 0){i=a.findAssetIndex(c,this.timelinePos);let v=vy(c,i-1);if(c.isAssetPastPlayoutLimit(v)||c.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(c,e,i);return}i=v}let h=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let g=this.preloadAssets(c,i);if(this.eventItemsMatch(o,h||n)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${dr(o)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(B.INTERSTITIAL_STARTED,{event:c,schedule:t.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;let m=c.assetList[i];if(!m){this.advanceAfterAssetEnded(c,e,i||0);return}if(g||(g=this.getAssetPlayer(m.identifier)),g===null||g.destroyed){let v=c.assetList.length;this.warn(`asset ${i+1}/${v} player destroyed ${c}`),g=this.createAssetPlayer(c,m,i),g.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(m))return;this.startAssetPlayer(g,i,t,e,l),this.shouldPlay&&aA(g.media)}else o?(this.resumePrimary(o,e,n),this.shouldPlay&&aA(this.hls.media)):r&&this.isInterstitial(n)&&(this.endedItem=null,this.playingItem=n,n.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var n,r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${dr(e)}`),!((n=this.detachedData)!=null&&n.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(Yf("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!i)return;let a=(r=this.schedule)==null?void 0:r.items;!a||(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${dr(e)}`),this.hls.trigger(B.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){let i=e.start;if(this.primaryLive){let n=this.primaryDetails;if(t===0)return this.hls.startPosition;if(n&&(i<n.fragmentStart||i>n.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){let t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:Ft.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;let n=this.primaryMedia;if(!n)return;let r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,n),i&&this.startLoadingPrimaryAt(e,i)),i||(this.log(Yf("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;let n=this.hls;!n.loadingEnabled||!n.media||Math.abs((((i=n.mainForwardBufferInfo)==null?void 0:i.start)||n.media.currentTime)-e)>.5?n.startLoad(e,t):n.bufferingEnabled||n.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(B.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(B.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;let i=this.hls.levels[t.level];if(!i.details)return;let n=li(li({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=n,this.schedule.parseInterstitialDateRanges(n,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){let i=this.hls.audioTracks[t.id],n=this.mediaSelection;if(!n){this.altSelection=li(li({},this.altSelection),{},{audio:i});return}let r=li(li({},n),{},{audio:i});this.mediaSelection=r}onSubtitleTrackUpdated(e,t){let i=this.hls.subtitleTracks[t.id],n=this.mediaSelection;if(!n){this.altSelection=li(li({},this.altSelection),{},{subtitles:i});return}let r=li(li({},n),{},{subtitles:i});this.mediaSelection=r}onAudioTrackSwitching(e,t){let i=m1(t);this.playerQueue.forEach(({hls:n})=>n&&(n.setAudioOption(t)||n.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){let i=m1(t);this.playerQueue.forEach(({hls:n})=>n&&(n.setSubtitleOption(t)||t.id!==-1&&n.setSubtitleOption(i)))}onBufferCodecs(e,t){let i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){let i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){let n=this.timelinePos;this.bufferedPos=n,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;let t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let n=0;n<t.length;n++){let r=t[n];if(r.cue.post){var i;let a=this.schedule.findEventIndex(r.identifier),o=(i=this.schedule.items)==null?void 0:i[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){let t=this.playingItem;if(!this.playingLastItem&&t){let i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){var i;let n=(i=this.schedule)==null?void 0:i.items;if(e&&n){let r=this.findItemIndex(e,t);return n[r]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((r,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(r.identifier,null)});let i=e.end+.25,n=Ft.bufferInfo(this.primaryMedia,i,0);if(n.end>i||(n.nextStart||0)>i){this.log(`trim buffered interstitial ${dr(e)} (was ${dr(t)})`);let r=!0;this.attachPrimary(i,null,r),this.flushFrontBuffer(i)}}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;let i=this.mediaSelection;!i||(t=this.schedule)==null||t.updateSchedule(i,[],e)}checkBuffer(e){var t;let i=(t=this.schedule)==null?void 0:t.items;if(!i)return;let n=Ft.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=n.len<1),this.updateBufferedPos(n.end,i,e)}updateBufferedPos(e,t,i){let n=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e||!n)return;if(t.length===1&&this.itemsMatch(t[0],r)){this.bufferedPos=e;return}let a=this.playingItem,o=this.findItemIndex(a),l=n.findItemIndexAtTime(e);if(this.bufferedPos<e){var u;let c=this.findItemIndex(r),h=Math.min(c+1,t.length-1),g=t[h];if((l===-1&&r&&e>=r.end||(u=g.event)!=null&&u.appendInPlace&&e+.01>=g.start)&&(l=h),this.isInterstitial(r)){let m=r.event;if(h-o>1&&m.appendInPlace===!1||m.assetList.length===0&&m.assetListLoader)return}if(this.bufferedPos=e,l>c&&l>o)this.bufferedToItem(g);else{let m=this.primaryDetails;this.primaryLive&&m&&e>m.edge-m.targetduration&&g.start<m.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(g)&&this.preloadAssets(g.event,0)}}else i&&a&&!this.itemsMatch(a,r)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(n=>{let r=this.getAssetPlayer(n.identifier);return!(r!=null&&r.bufferedInPlaceToEnd(t))})}setBufferingItem(e){let t=this.bufferingItem,i=this.schedule;if(!this.itemsMatch(e,t)&&i){let{items:n,events:r}=i;if(!n||!r)return t;let a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));let l=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${dr(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){let u=i.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((c,h)=>{let g=this.getAssetPlayer(c.identifier);g&&(h===u&&g.loadSource(),g.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering());this.hls.trigger(B.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:n.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){let i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;let n=this.detachedData;n?n.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){let t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){let i=e.event,n=i.assetList.length===0&&!i.assetListLoader,r=i.cue.once;if(n||!r){let a=this.preloadAssets(i,t);if(a!=null&&a.interstitial.appendInPlace){let o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,t){let i=e.assetUrl,n=e.assetList.length,r=n===0&&!e.assetListLoader,a=e.cue.once;if(r){let l=e.timelineStart;if(e.appendInPlace){var o;let g=this.playingItem;!this.isInterstitial(g)&&(g==null||(o=g.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let u,c=0;if(!this.playingItem&&this.primaryLive&&(c=this.hls.startPosition,c===-1&&(c=this.hls.liveSyncPosition||0)),c&&!(e.cue.pre||e.cue.post)){let g=c-l;g>0&&(u=Math.round(g*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:n} ${e}${u?` live-start: ${c} start-offset: ${u}`:""}`),i)return this.createAsset(e,0,0,l,e.duration,i);let h=this.assetListLoader.loadAssetList(e,u);h&&(e.assetListLoader=h)}else if(!a&&n){for(let u=t;u<n;u++){let c=e.assetList[u],h=this.getAssetPlayerQueueIndex(c.identifier);(h===-1||this.playerQueue[h].destroyed)&&!c.error&&this.createAssetPlayer(e,c,u)}let l=e.assetList[t];if(l){let u=this.getAssetPlayer(l.identifier);return u&&u.loadSource(),u}}return null}flushFrontBuffer(e){let t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(n=>{this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:n})})}getAssetPlayerQueueIndex(e){let t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){let t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){let{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,n,r,a){let o={parentIdentifier:e.identifier,identifier:lF(e,a,t),duration:r,startOffset:i,timelineStart:n,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){let n=this.hls,r=n.userConfig,a=r.videoPreference,o=n.loadLevelObj||n.levels[n.currentLevel];(a||o)&&(a=fi({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));let l=n.audioTracks[n.audioTrack],u=n.subtitleTracks[n.subtitleTrack],c=0;if(this.primaryLive||e.appendInPlace){let H=this.timelinePos-t.timelineStart;if(H>1){let W=t.duration;W&&H<W&&(c=H)}}let h=t.identifier,g=li(li({},r),{},{maxMaxBufferLength:Math.min(180,n.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:n.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:n.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||r.audioPreference,subtitlePreference:u||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));let m=g.cmcd;m!=null&&m.sessionId&&m.contentId&&(g.cmcd=fi({},m,{contentId:ld(t.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);let v=new _v(this.HlsPlayerClass,g,e,t);this.playerQueue.push(v),e.assetList[i]=t;let b=!0,A=H=>{if(H.live){var W;let Z=new Error(`Interstitials MUST be VOD assets ${e}`),re={fatal:!0,type:Et.OTHER_ERROR,details:Ae.INTERSTITIAL_ASSET_ITEM_ERROR,error:Z},oe=((W=this.schedule)==null?void 0:W.findEventIndex(e.identifier))||-1;this.handleAssetItemError(re,e,oe,i,Z.message);return}let E=H.edge-H.fragmentStart,X=t.duration;(b||X===null||E>X)&&(b=!1,this.log(`Interstitial asset "${h}" duration change ${X} > ${E}`),t.duration=E,this.updateSchedule())};v.on(B.LEVEL_UPDATED,(H,{details:W})=>A(W)),v.on(B.LEVEL_PTS_UPDATED,(H,{details:W})=>A(W)),v.on(B.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());let R=(H,W)=>{let E=this.getAssetPlayer(h);if(E&&W.tracks){E.off(B.BUFFER_CODECS,R),E.tracks=W.tracks;let X=this.primaryMedia;this.bufferingAsset===E.assetItem&&X&&!E.media&&this.bufferAssetPlayer(E,X)}};v.on(B.BUFFER_CODECS,R);let F=()=>{var H;let W=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${W}`),!W||!this.schedule)return;let E=this.schedule.findEventIndex(e.identifier),X=(H=this.schedule.items)==null?void 0:H[E];this.isInterstitial(X)&&this.advanceAssetBuffering(X,t)};v.on(B.BUFFERED_TO_END,F);let O=H=>()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;this.shouldPlay=!0;let E=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,E,H)};return v.once(B.MEDIA_ENDED,O(i)),v.once(B.PLAYOUT_LIMIT_REACHED,O(1/0)),v.on(B.ERROR,(H,W)=>{if(!this.schedule)return;let E=this.getAssetPlayer(h);if(W.details===Ae.BUFFER_STALLED_ERROR){if(E!=null&&E.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(W,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${W.error} ${e}`)}),v.on(B.DESTROYING,()=>{if(!this.getAssetPlayer(h)||!this.schedule)return;let W=new Error(`Asset player destroyed unexpectedly ${h}`),E={fatal:!0,type:Et.OTHER_ERROR,details:Ae.INTERSTITIAL_ASSET_ITEM_ERROR,error:W};this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),i,W.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Tu(t)}`),this.hls.trigger(B.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:v}),v}clearInterstitial(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)}),e.reset()}resetAssetPlayer(e){let t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);let i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){let i=this.getAssetPlayerQueueIndex(e);if(i!==-1){let n=this.playerQueue[i];this.log(`clear ${n} toSegment: ${t&&dr(t)}`),this.transferMediaFromPlayer(n,t),this.playerQueue.splice(i,1),n.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,n,r){let{interstitial:a,assetItem:o,assetId:l}=e,u=a.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!c||c.identifier!==l)&&(c&&(this.clearAssetPlayer(c.identifier,i[n]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${u} ${Tu(o)}`),this.hls.trigger(B.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:i.slice(0),scheduleIndex:n,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,t){var i,n;if(!this.schedule)return;let{interstitial:r,assetItem:a}=e,o=this.schedule.findEventIndex(r.identifier),l=(i=this.schedule.items)==null?void 0:i[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=a;let u=this.getBufferingPlayer();if(u===e)return;let c=r.appendInPlace;if(c&&u?.interstitial.appendInPlace===!1)return;let h=u?.tracks||((n=this.detachedData)==null?void 0:n.tracks)||this.requiredTracks;if(c&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(h&&!yA(h,e.tracks)){let g=new Error(`Asset ${Tu(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),m={fatal:!0,type:Et.OTHER_ERROR,details:Ae.INTERSTITIAL_ASSET_ITEM_ERROR,error:g},v=r.findAssetIndex(a);this.handleAssetItemError(m,r,o,v,g.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){let t=this.schedule,i=this.primaryMedia;if(!t||!i)return;let n=i.currentTime,r=t.findAssetIndex(e,n),a=e.assetList[r];if(a){let o=this.getAssetPlayer(a.identifier);if(o){let l=o.currentTime||n-a.timelineStart,u=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+u} in ${o} ${e} (media.currentTime: ${n})`),l&&(u/i.playbackRate<.5||o.bufferedInPlaceToEnd(i))&&o.hls){let c=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,c,r)}}}}advanceInPlace(e){let t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,i,n,r){if(e.details===Ae.BUFFER_STALLED_ERROR)return;let a=t.assetList[n]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&Tu(a)} ${e.error}`),!this.schedule)return;let o=a?.identifier||"",l=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[l]||null,c=this.schedule.items,h=fi({},e,{fatal:!1,errorAction:Eu(!0),asset:a,assetListIndex:n,event:t,schedule:c,scheduleIndex:i,player:u});if(this.hls.trigger(B.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;let g=this.playingAsset,m=this.bufferingAsset,v=new Error(r);if(a&&(this.clearAssetPlayer(o,null),a.error=v),!t.assetList.some(b=>!b.error))t.error=v;else for(let b=n;b<t.assetList.length;b++)this.resetAssetPlayer(t.assetList[b].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):g&&g.identifier===o?this.advanceAfterAssetEnded(t,i,n):m&&m.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,m)}primaryFallback(e){let t=e.timelineStart,i=this.effectivePlayingItem;if(i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${dr(i)} error: ${e.error}`);let n=this.timelinePos;n===-1&&(n=this.hls.startPosition);let r=this.updateItem(i,n);if(this.itemsMatch(i,r)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;let a=this.schedule.findItemIndexAtTime(n);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var i,n;let r=t.event,a=r.identifier,o=t.assetListResponse.ASSETS;if(!((i=this.schedule)!=null&&i.hasEvent(a)))return;let l=r.timelineStart,u=r.duration,c=0;o.forEach((b,A)=>{let R=parseFloat(b.DURATION);this.createAsset(r,A,c,l+c,R,b.URI),c+=R}),r.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${u}) ${r}`);let h=this.waitingItem,g=h?.event.identifier===a;this.updateSchedule();let m=(n=this.bufferingItem)==null?void 0:n.event;if(g){var v;let b=this.schedule.findEventIndex(a),A=(v=this.schedule.items)==null?void 0:v[b];if(A){if(!this.playingItem&&this.timelinePos>A.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==b){r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),this.updateSchedule(!0),this.primaryFallback(r);return}this.setBufferingItem(A)}this.setSchedulePosition(b)}else if(m?.identifier===a){let b=r.assetList[0];if(b){let A=this.getAssetPlayer(b.identifier);if(m.appendInPlace){let R=this.primaryMedia;A&&R&&this.bufferAssetPlayer(A,R)}else A&&A.loadSource()}}}onError(e,t){if(!!this.schedule)switch(t.details){case Ae.ASSET_LIST_PARSING_ERROR:case Ae.ASSET_LIST_LOAD_ERROR:case Ae.ASSET_LIST_LOAD_TIMEOUT:{let i=t.interstitial;i&&(this.updateSchedule(!0),this.primaryFallback(i));break}case Ae.BUFFER_STALLED_ERROR:{let i=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&i.event.appendInPlace){this.handleInPlaceStall(i.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}},oA=500,xv=class extends gd{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",vt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();let{hls:e}=this;e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(B.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();let{hls:e}=this;e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(B.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=je.IDLE,this.setInterval(oA),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){let{frag:i,success:n}=t;if(this.fragContextChanged(i)||(Wi(i)&&(this.fragPrevious=i),this.state=je.IDLE),!n)return;let r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a,o=i.start;for(let u=0;u<r.length;u++)if(o>=r[u].start&&o<=r[u].end){a=r[u];break}let l=i.start+i.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){let{startOffset:i,endOffset:n}=t;if(i===0&&n!==Number.POSITIVE_INFINITY){let r=n-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=r){a.shift();continue}else if(a[o].start<r)a[o].start=r;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,r,vt.SUBTITLE)}}onError(e,t){let i=t.frag;i?.type===vt.SUBTITLE&&(t.details===Ae.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==je.STOPPED&&(this.state=je.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&pC(this.levels,t)){this.levels=t.map(i=>new Ko(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{let n=new Ko(i);return this.tracksBuffered[n.id]=[],n}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,vt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}let n=this.levels[this.currentTrackId];n!=null&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.state!==je.STOPPED&&this.setInterval(oA)}onSubtitleTrackLoaded(e,t){var i;let{currentTrackId:n,levels:r}=this,{details:a,id:o}=t;if(!r){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}let l=r[o];if(o>=r.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||(i=l.details)!=null&&i.live){if(a.deltaUpdateFailed)return;let h=this.mainDetails;if(!h){this.startFragRequested=!1;return}let g=h.fragments[0];if(!l.details)a.hasProgramDateTime&&h.hasProgramDateTime?(Tp(a,h),u=a.fragmentStart):g&&(u=g.start,qy(a,u));else{var c;u=this.alignPlaylists(a,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&g&&(u=g.start,qy(a,u))}h&&!this.startFragRequested&&this.setStartPosition(h,u)}l.details=a,this.levelLastLoaded=l,o===n&&(this.hls.trigger(B.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===je.IDLE&&(Yo(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){let{frag:t,payload:i}=e,n=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&n!=null&&n.key&&n.iv&&Su(n.method)){let a=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer,Yv(n.method)).catch(o=>{throw r.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{let l=performance.now();r.trigger(B.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=je.IDLE})}}doTick(){if(!this.media){this.state=je.IDLE;return}if(this.state===je.IDLE){let{currentTrackId:e,levels:t}=this,i=t?.[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;let{config:n}=this,r=this.getLoadPosition(),a=Ft.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,n.maxBufferHole),{end:o,len:l}=a,u=i.details,c=this.hls.maxBufferLength+u.levelTargetDuration;if(l>c)return;let h=u.fragments,g=h.length,m=u.edge,v=null,b=this.fragPrevious;if(o<m){let F=n.maxFragLookUpTolerance,O=o>m-F?0:F;v=Yo(b,h,Math.max(h[0].start,o),O),!v&&b&&b.start<h[0].start&&(v=h[0])}else v=h[g-1];if(v=this.filterReplacedPrimary(v,i.details),!v)return;let A=v.sn-u.startSN,R=h[A-1];if(R&&R.cc===v.cc&&this.fragmentTracker.getState(R)===Zi.NOT_LOADED&&(v=R),this.fragmentTracker.getState(v)===Zi.NOT_LOADED){let F=this.mapToInitFragWhenRequired(v);F&&this.loadFragment(F,i,o)}}}loadFragment(e,t,i){Wi(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Av(this.tracksBuffered[this.currentTrackId]||[])}},Av=class{constructor(e){this.buffered=void 0;let t=(i,n,r)=>{if(n=n>>>0,n>r-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}},cF={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},DC=s=>String.fromCharCode(cF[s]||s),hr=15,pa=100,dF={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},hF={17:2,18:4,21:6,22:8,23:10,19:13,20:15},fF={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},pF={25:2,26:4,29:6,30:8,31:10,27:13,28:15},gF=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Cv=class{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){let i=typeof t=="function"?t():t;ui.log(`${this.time} [${e}] ${i}`)}}},Go=function(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t},wp=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){let t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){let n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},wv=class{constructor(){this.uchar=" ",this.penState=new wp}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}},Iv=class{constructor(e){this.chars=[],this.pos=0,this.currPenState=new wp,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<pa;t++)this.chars.push(new wv);this.logger=e}equals(e){for(let t=0;t<pa;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<pa;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<pa;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>pa&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=pa)}moveCursor(e){let t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();let t=DC(e);if(this.pos>=pa){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<pa;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){let e=[],t=!0;for(let i=0;i<pa;i++){let n=this.chars[i].uchar;n!==" "&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},ud=class{constructor(e){this.rows=[],this.currRow=hr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<hr;t++)this.rows.push(new Iv(e));this.logger=e}reset(){for(let e=0;e<hr;e++)this.rows[e].clear();this.currRow=hr-1}equals(e){let t=!0;for(let i=0;i<hr;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<hr;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<hr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+yi(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<hr;o++)this.rows[o].clear();let r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){let o=a.rows[r].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(a.rows[r+u])}}this.currRow=t;let i=this.rows[this.currRow];if(e.indent!==null){let r=e.indent,a=Math.max(r-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}let n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+yi(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());let e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;let t=[],i="",n=-1;for(let r=0;r<hr;r++){let a=this.rows[r].getTextString();a&&(n=r+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}},Ip=class{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ud(i),this.nonDisplayedMemory=new ud(i),this.lastOutputScreen=new ud(i),this.currRollUpRow=this.displayedMemory.rows[hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);let t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){let e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){let t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{let i=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[i]}this.logger.log(2,"MIDROW: "+yi(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){let t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}},Dp=class{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=yF(),this.logger=void 0;let n=this.logger=new Cv;this.channels=[null,new Ip(e,t,n),new Ip(e+1,i,n)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){let n=t[i]&127,r=t[i+1]&127,a=!1,o=null;if(n===0&&r===0)continue;this.logger.log(3,()=>"["+Go([t[i],t[i+1]])+"] -> ("+Go([n,r])+")");let l=this.cmdHistory;if(n>=16&&n<=31){if(mF(n,r,l)){Xf(null,null,l),this.logger.log(3,()=>"Repeated command ("+Go([n,r])+") is dropped");continue}Xf(n,r,this.cmdHistory),a=this.parseCmd(n,r),a||(a=this.parseMidrow(n,r)),a||(a=this.parsePAC(n,r)),a||(a=this.parseBackgroundAttributes(n,r))}else Xf(null,null,l);if(!a&&(o=this.parseChars(n,r),o)){let c=this.currentChannel;c&&c>0?this.channels[c].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Go([n,r])+" orig: "+Go([t[i],t[i+1]]))}}parseCmd(e,t){let i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,n=(e===23||e===31)&&t>=33&&t<=35;if(!(i||n))return!1;let r=e===20||e===21||e===23?1:2,a=this.channels[r];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;let n=this.channels[i];return n?(n.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Go([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i,n=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(e===16||e===24)&&t>=64&&t<=95;if(!(n||r))return!1;let a=e<=23?1:2;t>=64&&t<=95?i=a===1?dF[e]:fF[e]:i=a===1?hF[e]:pF[e];let o=this.channels[a];return o?(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let i,n={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,n.underline=(i&1)===1,i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=Math.floor((i-16)/2)*4,n}parseChars(e,t){let i,n=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let a;r===17?a=t+80:r===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+DC(a)+"' in channel "+i),n=[a]}else e>=32&&e<=127&&(n=t===0?[e]:[e,t]);return n&&this.logger.log(3,()=>"Char codes =  "+Go(n).join(",")),n}parseBackgroundAttributes(e,t){let i=(e===16||e===24)&&t>=32&&t<=47,n=(e===23||e===31)&&t>=45&&t<=47;if(!(i||n))return!1;let r,a={};e===16||e===24?(r=Math.floor((t-32)/2),a.background=gF[r],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));let o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){let t=this.channels[e];t&&t.reset()}Xf(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){let i=this.channels[t];i&&i.cueSplitAtTime(e)}}};function Xf(s,e,t){t.a=s,t.b=e}function mF(s,e,t){return t.a===s&&t.b===e}function yF(){return{a:null,b:null}}var rT=function(){if(vp!=null&&vp.VTTCue)return self.VTTCue;let s=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;let u=l.toLowerCase();return~o.indexOf(u)?u:!1}function i(o){return t(s,o)}function n(o){return t(e,o)}function r(o,...l){let u=1;for(;u<arguments.length;u++){let c=arguments[u];for(let h in c)o[h]=c[h]}return o}function a(o,l,u){let c=this,h={enumerable:!0};c.hasBeenReset=!1;let g="",m=!1,v=o,b=l,A=u,R=null,F="",O=!0,H="auto",W="start",E=50,X="middle",Z=50,re="middle";Object.defineProperty(c,"id",r({},h,{get:function(){return g},set:function(oe){g=""+oe}})),Object.defineProperty(c,"pauseOnExit",r({},h,{get:function(){return m},set:function(oe){m=!!oe}})),Object.defineProperty(c,"startTime",r({},h,{get:function(){return v},set:function(oe){if(typeof oe!="number")throw new TypeError("Start time must be set to a number.");v=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",r({},h,{get:function(){return b},set:function(oe){if(typeof oe!="number")throw new TypeError("End time must be set to a number.");b=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",r({},h,{get:function(){return A},set:function(oe){A=""+oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",r({},h,{get:function(){return R},set:function(oe){R=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",r({},h,{get:function(){return F},set:function(oe){let ve=i(oe);if(ve===!1)throw new SyntaxError("An invalid or illegal string was specified.");F=ve,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",r({},h,{get:function(){return O},set:function(oe){O=!!oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",r({},h,{get:function(){return H},set:function(oe){if(typeof oe!="number"&&oe!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");H=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",r({},h,{get:function(){return W},set:function(oe){let ve=n(oe);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");W=ve,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",r({},h,{get:function(){return E},set:function(oe){if(oe<0||oe>100)throw new Error("Position must be between 0 and 100.");E=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",r({},h,{get:function(){return X},set:function(oe){let ve=n(oe);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");X=ve,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",r({},h,{get:function(){return Z},set:function(oe){if(oe<0||oe>100)throw new Error("Size must be between 0 and 100.");Z=oe,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",r({},h,{get:function(){return re},set:function(oe){let ve=n(oe);if(!ve)throw new SyntaxError("An invalid or illegal string was specified.");re=ve,this.hasBeenReset=!0}})),c.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),Dv=class{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}};function LC(s){function e(i,n,r,a){return(i|0)*3600+(n|0)*60+(r|0)+parseFloat(a||0)}let t=s.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}var Lv=class{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){let i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}};function kC(s,e,t,i){let n=i?s.split(i):[s];for(let r in n){if(typeof n[r]!="string")continue;let a=n[r].split(t);if(a.length!==2)continue;let o=a[0],l=a[1];e(o,l)}}var kv=new rT(0,0,""),Qf=kv.align==="middle"?"middle":"center";function vF(s,e,t){let i=s;function n(){let o=LC(s);if(o===null)throw new Error("Malformed timestamp: "+i);return s=s.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){let u=new Lv;kC(o,function(g,m){let v;switch(g){case"region":for(let b=t.length-1;b>=0;b--)if(t[b].id===m){u.set(g,t[b].region);break}break;case"vertical":u.alt(g,m,["rl","lr"]);break;case"line":v=m.split(","),u.integer(g,v[0]),u.percent(g,v[0])&&u.set("snapToLines",!1),u.alt(g,v[0],["auto"]),v.length===2&&u.alt("lineAlign",v[1],["start",Qf,"end"]);break;case"position":v=m.split(","),u.percent(g,v[0]),v.length===2&&u.alt("positionAlign",v[1],["start",Qf,"end","line-left","line-right","auto"]);break;case"size":u.percent(g,m);break;case"align":u.alt(g,m,["start",Qf,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&kv.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",Qf);let h=u.get("position","auto");h==="auto"&&kv.position===50&&(h=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=h}function a(){s=s.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),s.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);s=s.slice(3),a(),e.endTime=n(),a(),r(s,e)}function RC(s){return s.replace(/<br(?: \/)?>/gi,`
`)}var Rv=class{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Dv,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){let t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let r=t.buffer,a=0;for(r=RC(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;let o=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,t.buffer=r.slice(a),o}function n(r){kC(r,function(a,o){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=i();let o=r.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=i(),t.state){case"HEADER":/:/.test(r)?n(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new rT(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{vF(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{let o=r.indexOf("-->")!==-1;if(!r||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){let e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}},TF=/\r\n|\n\r|\n|\r/g,Ty=function(e,t,i=0){return e.slice(i,i+t.length)===t},_F=function(e){let t=parseInt(e.slice(-3)),i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ft(t)||!ft(i)||!ft(n)||!ft(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*n,t+=60*60*1e3*r,t};function aT(s,e,t){return ld(s.toString())+ld(e.toString())+ld(t)}var bF=function(e,t,i){let n=e[t],r=e[n.prevCC];if(!r||!r.new&&n.new){e.ccOffset=e.presentationOffset=n.start,n.new=!1;return}for(;(a=r)!=null&&a.new;){var a;e.ccOffset+=n.start-r.start,n.new=!1,n=r,r=e[n.prevCC]}e.presentationOffset=i};function EF(s,e,t,i,n,r,a){let o=new Rv,l=kn(new Uint8Array(s)).trim().replace(TF,`
`).split(`
`),u=[],c=e?ZM(e.baseTime,e.timescale):0,h="00:00.000",g=0,m=0,v,b=!0;o.oncue=function(A){let R=t[i],F=t.ccOffset,O=(g-c)/9e4;if(R!=null&&R.new&&(m!==void 0?F=t.ccOffset=R.start:bF(t,i,O)),O){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}F=O-t.presentationOffset}let H=A.endTime-A.startTime,W=Dn((A.startTime+F-m)*9e4,n*9e4)/9e4;A.startTime=Math.max(W,0),A.endTime=Math.max(W+H,0);let E=A.text.trim();A.text=decodeURIComponent(encodeURIComponent(E)),A.id||(A.id=aT(A.startTime,A.endTime,E)),A.endTime>0&&u.push(A)},o.onparsingerror=function(A){v=A},o.onflush=function(){if(v){a(v);return}r(u)},l.forEach(A=>{if(b)if(Ty(A,"X-TIMESTAMP-MAP=")){b=!1,A.slice(16).split(",").forEach(R=>{Ty(R,"LOCAL:")?h=R.slice(6):Ty(R,"MPEGTS:")&&(g=parseInt(R.slice(7)))});try{m=_F(h)/1e3}catch(R){v=R}return}else A===""&&(b=!1);o.parse(A+`
`)}),o.flush()}var _y="stpp.ttml.im1t",PC=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,OC=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,SF={left:"start",center:"center",right:"end",start:"start",end:"end"};function lA(s,e,t,i){let n=zt(new Uint8Array(s),["mdat"]);if(n.length===0){i(new Error("Could not parse IMSC1 mdat"));return}let r=n.map(o=>kn(o)),a=JM(e.baseTime,1,e.timescale);try{r.forEach(o=>t(xF(o,a)))}catch(o){i(o)}}function xF(s,e){let n=new DOMParser().parseFromString(s,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");let r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(r).reduce((h,g)=>(h[g]=n.getAttribute(`ttp:${g}`)||r[g],h),{}),o=n.getAttribute("xml:space")!=="preserve",l=uA(by(n,"styling","style")),u=uA(by(n,"layout","region")),c=by(n,"body","[begin]");return[].map.call(c,h=>{let g=MC(h,o);if(!g||!h.hasAttribute("begin"))return null;let m=Sy(h.getAttribute("begin"),a),v=Sy(h.getAttribute("dur"),a),b=Sy(h.getAttribute("end"),a);if(m===null)throw cA(h);if(b===null){if(v===null)throw cA(h);b=m+v}let A=new rT(m-e,b-e,g);A.id=aT(A.startTime,A.endTime,A.text);let R=u[h.getAttribute("region")],F=l[h.getAttribute("style")],O=AF(R,F,l),{textAlign:H}=O;if(H){let W=SF[H];W&&(A.lineAlign=W),A.align=H}return fi(A,O),A}).filter(h=>h!==null)}function by(s,e,t){let i=s.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function uA(s){return s.reduce((e,t)=>{let i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function MC(s,e){return[].slice.call(s.childNodes).reduce((t,i,n)=>{var r;return i.nodeName==="br"&&n?t+`
`:(r=i.childNodes)!=null&&r.length?MC(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function AF(s,e,t){let i="http://www.w3.org/ns/ttml#styling",n=null,r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=s!=null&&s.hasAttribute("style")?s.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(n=t[a]),r.reduce((o,l)=>{let u=Ey(e,i,l)||Ey(s,i,l)||Ey(n,i,l);return u&&(o[l]=u),o},{})}function Ey(s,e,t){return s&&s.hasAttributeNS(e,t)?s.getAttributeNS(e,t):null}function cA(s){return new Error(`Could not parse ttml timestamp ${s}`)}function Sy(s,e){if(!s)return null;let t=LC(s);return t===null&&(PC.test(s)?t=CF(s,e):OC.test(s)&&(t=wF(s,e))),t}function CF(s,e){let t=PC.exec(s),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function wF(s,e){let t=OC.exec(s),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}var bu=class{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}},Pv=class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hA(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this),e.on(B.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(B.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(B.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){let{hls:e}=this;e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this),e.off(B.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(B.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(B.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){let e=new bu(this,"textTrack1"),t=new bu(this,"textTrack2"),i=new bu(this,"textTrack3"),n=new bu(this,"textTrack4");this.cea608Parser1=new Dp(1,e,t),this.cea608Parser2=new Dp(3,i,n)}addCues(e,t,i,n,r){let a=!1;for(let o=r.length;o--;){let l=r[o],u=IF(l[0],l[1],t,i);if(u>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],i),a=!0,u/(i-t)>.5))return}if(a||r.push([t,i]),this.config.renderTextTracksNatively){let o=this.captionsTracks[e];this.Cues.newCue(o,t,i,n)}else{let o=this.Cues.newCue(null,t,i,n);this.hls.trigger(B.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:r,trackId:a}){let{unparsedVttFrags:o}=this;i===vt.MAIN&&(this.initPTS[t.cc]={baseTime:n,timescale:r,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(B.FRAG_LOADED,l):this.hls.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){let{media:i}=this;if(i)for(let n=0;n<i.textTracks.length;n++){let r=i.textTracks[n];if(dA(r,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;let{captionsProperties:t,captionsTracks:i,media:n}=this,{label:r,languageCode:a}=t[e],o=this.getExistingTrack(r,a);if(o)i[e]=o,_u(i[e]),CC(i[e],n);else{let l=this.createTextTrack("captions",r,a);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;let t=this.captionsProperties[e];if(!t)return;let i=t.label,n={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(B.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,i){let n=this.media;if(!!n)return n.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){let i=!!t.transferMedia;if(this.media=null,i)return;let{captionsTracks:n}=this;Object.keys(n).forEach(r=>{_u(n[r]),delete n[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hA(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){let{media:e}=this;if(!e)return;let t=e.textTracks;if(t)for(let i=0;i<t.length;i++)_u(t[i])}onSubtitleTracksUpdated(e,t){let i=t.subtitleTracks||[],n=i.some(r=>r.textCodec===_y);if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(pC(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){let a=this.media,o=a?rp(a.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(o){let h=null;for(let g=0;g<o.length;g++)if(o[g]&&dA(o[g],l)){h=o[g],o[g]=null;break}h&&(c=h)}if(c)_u(c);else{let h=NC(l);c=this.createTextTrack(h,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),o!=null&&o.length){let l=o.filter(u=>u!==null).map(u=>u.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){let a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(B.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{let n=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!n)return;let r=`textTrack${n[1]}`,a=this.captionsProperties[r];!a||(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){let t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===vt.MAIN){var i,n;let{cea608Parser1:r,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:u}=t.frag,c=(i=(n=t.part)==null?void 0:n.index)!=null?i:-1;r&&a&&(u!==o+1||u===o&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,t){let{frag:i,payload:n}=t;if(i.type===vt.SUBTITLE)if(n.byteLength){let r=i.decryptdata,a="stats"in t;if(r==null||!r.encrypted||a){let o=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===_y?this._parseIMSC1(i,n):this._parseVTTs(t)}}else this.hls.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){let i=this.hls;lA(t,this.initPTS[e.cc],n=>{this._appendCues(n,e.level),i.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},n=>{i.logger.log(`Failed to parse IMSC1: ${n}`),i.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})})}_parseVTTs(e){var t;let{frag:i,payload:n}=e,{initPTS:r,unparsedVttFrags:a}=this,o=r.length-1;if(!r[i.cc]&&o===-1){a.push(e);return}let l=this.hls,u=(t=i.initSegment)!=null&&t.data?Qn(i.initSegment.data,new Uint8Array(n)).buffer:n;EF(u,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,c=>{this._appendCues(c,i.level),l.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},c=>{let h=c.message==="Missing initPTS for VTT MPEGTS";h?a.push(e):this._fallbackToIMSC1(i,n),l.logger.log(`Failed to parse VTT cue: ${c}`),!(h&&o>i.cc)&&l.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:c})})}_fallbackToIMSC1(e,t){let i=this.tracks[e.level];i.textCodec||lA(t,this.initPTS[e.cc],()=>{i.textCodec=_y,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){let i=this.hls;if(this.config.renderTextTracksNatively){let n=this.textTracks[t];if(!n||n.mode==="disabled")return;e.forEach(r=>wC(n,r))}else{let n=this.tracks[t];if(!n)return;let r=n.default?"default":"subtitles"+t;i.trigger(B.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){let{frag:i}=t;i.type===vt.SUBTITLE&&this.onFragLoaded(B.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;let{frag:i,samples:n}=t;if(!(i.type===vt.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let r=0;r<n.length;r++){let a=n[r].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();let o=this.extractCea608Data(a);this.cea608Parser1.addData(n[r].pts,o[0]),this.cea608Parser2.addData(n[r].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:n,type:r}){let{media:a}=this;if(!(!a||a.currentTime<i)){if(!r||r==="video"){let{captionsTracks:o}=this;Object.keys(o).forEach(l=>yv(o[l],t,i))}if(this.config.renderTextTracksNatively&&t===0&&n!==void 0){let{textTracks:o}=this;Object.keys(o).forEach(l=>yv(o[l],t,n))}}}extractCea608Data(e){let t=[[],[]],i=e[0]&31,n=2;for(let r=0;r<i;r++){let a=e[n++],o=127&e[n++],l=127&e[n++];if(o===0&&l===0)continue;if((4&a)!==0){let c=3&a;(c===0||c===1)&&(t[c].push(o),t[c].push(l))}}return t}};function NC(s){return s.characteristics&&/transcribes-spoken-dialog/gi.test(s.characteristics)&&/describes-music-and-sound/gi.test(s.characteristics)?"captions":"subtitles"}function dA(s,e){return!!s&&s.kind===NC(e)&&av(e,s)}function IF(s,e,t,i){return Math.min(e,i)-Math.max(s,t)}function hA(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}var DF=/\s/,LF={newCue(s,e,t,i){let n=[],r,a,o,l,u,c=self.VTTCue||self.TextTrackCue;for(let g=0;g<i.rows.length;g++)if(r=i.rows[g],o=!0,l=0,u="",!r.isEmpty()){var h;for(let b=0;b<r.chars.length;b++)DF.test(r.chars[b].uchar)&&o?l++:(u+=r.chars[b].uchar,o=!1);r.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;let m=RC(u.trim()),v=aT(e,t,m);s!=null&&(h=s.cues)!=null&&h.getCueById(v)||(a=new c(e,t,m),a.id=v,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),n.push(a))}return s&&n.length&&(n.sort((g,m)=>g.line==="auto"||m.line==="auto"?0:g.line>8&&m.line>8?m.line-g.line:g.line-m.line),n.forEach(g=>wC(s,g))),n}};function kF(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var RF=/(\d+)-(\d+)\/(\d+)/,Lp=class{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||NF,this.controller=new self.AbortController,this.stats=new cd}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){let n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();let r=PF(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&ft(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))},t.timeout),(Td(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var g;this.response=this.loader=h;let m=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))},u-(m-n.loading.start)),!h.ok){let{status:b,statusText:A}=h;throw new Ov(A||"fetch, bad network response",b,h)}n.loading.first=m,n.total=MF(h.headers)||n.total;let v=(g=this.callbacks)==null?void 0:g.onProgress;return v&&ft(t.highWaterMark)?this.loadProgressively(h,n,e,t.highWaterMark,v):a?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var g,m;let v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);let b=h[o];b&&(n.loaded=n.total=b);let A={url:v.url,data:h,code:v.status},R=(g=this.callbacks)==null?void 0:g.onProgress;R&&!ft(t.highWaterMark)&&R(n,e,h,v),(m=this.callbacks)==null||m.onSuccess(A,n,e,v)}).catch(h=>{var g;if(self.clearTimeout(this.requestTimeout),n.aborted)return;let m=h&&h.code||0,v=h?h.message:null;(g=this.callbacks)==null||g.onError({code:m,text:v},e,h?h.details:null,n)})}getCacheAge(){let e=null;if(this.response){let t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,n=0,r){let a=new _p,o=e.body.getReader(),l=()=>o.read().then(u=>{if(u.done)return a.dataLength&&r(t,i,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));let c=u.value,h=c.length;return t.loaded+=h,h<n||a.dataLength?(a.push(c),a.dataLength>=n&&r(t,i,a.flush().buffer,e)):r(t,i,c.buffer,e),l()}).catch(()=>Promise.reject());return l()}};function PF(s,e){let t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(fi({},s.headers))};return s.rangeEnd&&t.headers.set("Range","bytes="+s.rangeStart+"-"+String(s.rangeEnd-1)),t}function OF(s){let e=RF.exec(s);if(e)return parseInt(e[2])-parseInt(e[1])+1}function MF(s){let e=s.get("Content-Range");if(e){let i=OF(e);if(ft(i))return i}let t=s.get("Content-Length");if(t)return parseInt(t)}function NF(s,e){return new self.Request(s.url,e)}var Ov=class extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}},FF=/^age:\s*[\d.]+\s*$/im,kp=class{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new cd,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){let e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){let{config:e,context:t}=this;if(!e||!t)return;let i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;let r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return r(i,t.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),r(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:i.status,text:a.message},t,i,n)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);let n=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=i.loadPolicy;if(n)for(let o in n)e.setRequestHeader(o,n[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&ft(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){let{context:e,loader:t,stats:i}=this;if(!e||!t)return;let n=t.readyState,r=this.config;if(!i.aborted&&n>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),n===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let u=t.status,c=t.responseType==="text"?t.responseText:null;if(u>=200&&u<300){let v=c??t.response;if(v!=null){var a,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);let b=t.responseType==="arraybuffer"?v.byteLength:v.length;i.loaded=i.total=b,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);let A=(a=this.callbacks)==null?void 0:a.onProgress;A&&A(i,e,v,t);let R={url:t.responseURL,data:v,code:u};(o=this.callbacks)==null||o.onSuccess(R,i,e,t);return}}let h=r.loadPolicy.errorRetry,g=i.retry,m={url:e.url,data:void 0,code:u};if(pp(h,g,!1,m))this.retry(h);else{var l;ui.error(`${u} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:u,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;let e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(pp(e,t,!0))this.retry(e);else{var i;ui.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);let n=this.callbacks;n&&(this.abortInternal(),n.onTimeout(this.stats,this.context,this.loader))}}retry(e){let{context:t,stats:i}=this;this.retryDelay=Kv(e,i.retry),i.retry++,ui.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){let t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&FF.test(this.loader.getAllResponseHeaders())){let t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}},$F={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},BF=li(li({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:kp,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Py,bufferController:cv,capLevelController:Ed,errorController:My,fpsController:mv,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:UA,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:$F},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},UF()),{},{subtitleStreamController:xv,subtitleTrackController:vv,timelineController:Pv,audioStreamController:rv,audioTrackController:ov,emeController:eo,cmcdController:pv,contentSteeringController:gv,interstitialsController:Sv});function UF(){return{cueHandler:LF,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function HF(s,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');let i=Mv(s),n=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(a=>{let o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,u=[];r.forEach(c=>{let h=`${a}Loading${c}`,g=e[h];if(g!==void 0&&l){u.push(h);let m=i[o].default;switch(e[o]={default:m},c){case"TimeOut":m.maxLoadTimeMs=g,m.maxTimeToFirstByteMs=g;break;case"MaxRetry":m.errorRetry.maxNumRetry=g,m.timeoutRetry.maxNumRetry=g;break;case"RetryDelay":m.errorRetry.retryDelayMs=g,m.timeoutRetry.retryDelayMs=g;break;case"MaxRetryTimeout":m.errorRetry.maxRetryDelayMs=g,m.timeoutRetry.maxRetryDelayMs=g;break}}}),u.length&&t.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${yi(e[o])}`)}),li(li({},i),e)}function Mv(s){return s&&typeof s=="object"?Array.isArray(s)?s.map(Mv):Object.keys(s).reduce((e,t)=>(e[t]=Mv(s[t]),e),{}):s}function VF(s,e){let t=s.loader;t!==Lp&&t!==kp?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),s.progressive=!1):kF()&&(s.loader=Lp,s.progressive=!0,s.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}var ap=2,jF=.1,GF=.05,qF=100,Nv=class extends gp{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){let{hls:e}=this;e&&(e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){let{hls:e}=this;e&&(e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(qF),this.mediaSource=t.mediaSource;let i=this.media=t.media;zs(i,"playing",this.onMediaPlaying),zs(i,"waiting",this.onMediaWaiting),zs(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();let{media:i}=this;i&&(fn(i,"playing",this.onMediaPlaying),fn(i,"waiting",this.onMediaWaiting),fn(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;let t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,n;let r=(i=this.hls)==null?void 0:i.config;if(!r)return;let a=this.media;if(!a)return;let{seeking:o}=a,l=this.seeking&&!o,u=!this.seeking&&o,c=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(u||l){l&&this.stallResolved(e);return}if(c){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!1}));return}if(!Ft.getBuffered(a).length){this.nudgeRetry=0;return}let h=Ft.bufferInfo(a,e,0),g=h.nextStart||0,m=this.fragmentTracker;if(o&&m&&this.hls){let E=fA(this.hls.inFlightFragments,e),X=h.len>ap,Z=!g||E||g-e>ap&&!m.getPartialFragment(e);if(X||Z)return;this.moved=!1}let v=(n=this.hls)==null?void 0:n.latestLevelDetails;if(!this.moved&&this.stalled!==null&&m){if(!(h.len>0)&&!g)return;let X=Math.max(g,h.start||0)-e,re=!!(v!=null&&v.live)?v.targetduration*2:ap,oe=Jf(e,m);if(X>0&&(X<=re||oe)){a.paused||this._trySkipBufferHole(oe);return}}let b=r.detectStallWithCurrentTimeMs,A=self.performance.now(),R=this.waiting,F=this.stalled;if(F===null)if(R>0&&A-R<b)F=this.stalled=R;else{this.stalled=A;return}let O=A-F;if(!o&&(O>=b||R)&&this.hls){var H;if(((H=this.mediaSource)==null?void 0:H.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-(v?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}let W=Ft.bufferInfo(a,e,r.maxBufferHole);this._tryFixBufferStall(W,O,e)}stallResolved(e){let t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){let i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(B.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;let n=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&n&&n.length>1&&e>n.end(0)){let r=Ft.bufferedInfo(Ft.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){let a=Ft.timeRangesToArray(n),o=Ft.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){let l=Ft.bufferedInfo(a,e,0).bufferedIndex,u=a[o].end,c=a[o+1].start;if((l===-1||l>o)&&c-u<1&&e-u<2){let h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${c} buffered index: ${l}`);this.warn(h.message),this.media.currentTime+=1e-6;let g=Jf(e,this.fragmentTracker);g&&"fragment"in g?g=g.fragment:g||(g=void 0);let m=Ft.bufferInfo(this.media,e,0);this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:g,buffer:m.len,bufferInfo:m})}}}}}_tryFixBufferStall(e,t,i){var n,r;let{fragmentTracker:a,media:o}=this,l=(n=this.hls)==null?void 0:n.config;if(!o||!a||!l)return;let u=(r=this.hls)==null?void 0:r.latestLevelDetails,c=Jf(i,a);if((c||u!=null&&u.live&&i<u.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;let h=e.buffered,g=this.adjacentTraversal(e,i);(h&&h.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-i<l.maxBufferHole||g))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){let i=this.fragmentTracker,n=e.nextStart;if(i&&n){let r=i.getFragAtPos(t,vt.MAIN),a=i.getFragAtPos(n,vt.MAIN);if(r&&a)return a.sn-r.sn<2}return!1}_reportStall(e){let{hls:t,media:i,stallReported:n,stalled:r}=this;if(!n&&r!==null&&i&&t){this.stallReported=!0;let a=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${yi(e)})`);this.warn(a.message),t.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var t;let{fragmentTracker:i,media:n}=this,r=(t=this.hls)==null?void 0:t.config;if(!n||!i||!r)return 0;let a=n.currentTime,o=Ft.bufferInfo(n,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){let c=o.len<=r.maxBufferHole,h=o.len>0&&o.len<1&&n.readyState<3,g=l-a;if(g>0&&(c||h)){if(g>r.maxBufferHole){let v=!1;if(a===0){let b=i.getAppendedFrag(0,vt.MAIN);b&&l<b.end&&(v=!0)}if(!v&&e){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||fA(this.hls.inFlightFragments,l))return 0;let A=!1,R=e.end;for(;R<l;){let F=Jf(R,i);if(F)R+=F.duration;else{A=!0;break}}if(A)return 0}}let m=Math.max(l+GF,a+jF);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${m}`),this.moved=!0,n.currentTime=m,!(e!=null&&e.gap)){let v=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${m}`),b={type:Et.MEDIA_ERROR,details:Ae.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?b.part=e:b.frag=e),this.hls.trigger(B.ERROR,b)}return m}}return 0}_tryNudgeBuffer(e){let{hls:t,media:i,nudgeRetry:n}=this,r=t?.config;if(!i||!r)return 0;let a=i.currentTime;if(this.nudgeRetry++,n<r.nudgeMaxRetry){let o=a+(n+1)*r.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),i.currentTime=o,t.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{let o=new Error(`Playhead still not moving while enough data buffered @${a} after ${r.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}};function fA(s,e){let t=pA(s.main);if(t&&t.start<=e)return t;let i=pA(s.audio);return i&&i.start<=e?i:null}function pA(s){if(!s)return null;switch(s.state){case je.IDLE:case je.STOPPED:case je.ENDED:case je.ERROR:return null}return s.frag}function Jf(s,e){return e.getAppendedFrag(s,vt.MAIN)||e.getPartialFragment(s)}var zF=.25;function Fv(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function xy(s,e,t,i,n){let r=new s(e,t,"");try{r.value=i,n&&(r.type=n)}catch{r=new s(e,t,yi(n?li({type:n},i):i))}return r}var Zf=(()=>{let s=Fv();try{s&&new s(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})(),$v=class{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{!this.hls||this.hls.trigger(B.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){let{hls:e}=this;e&&(e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){let{hls:e}=this;e&&(e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;let t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&_u(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){let t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(!!this.media){for(let t=0;t<e.length;t++){let i=e[t];if(i.kind==="metadata"&&i.label==="id3")return CC(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;let{enableEmsgMetadataCues:i,enableID3MetadataCues:n}=this.hls.config;if(!i&&!n)return;let{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));let a=Fv();if(!!a)for(let o=0;o<r.length;o++){let l=r[o].type;if(l===Ln.emsg&&!i||!n)continue;let u=sC(r[o].data),c=r[o].pts,h=c+r[o].duration;h>Zf&&(h=Zf),h-c<=0&&(h=c+zF);for(let m=0;m<u.length;m++){let v=u[m];if(!nC(v)){this.updateId3CueEnds(c,l);let b=xy(a,c,h,v,l);b&&this.id3Track.addCue(b)}}}}updateId3CueEnds(e,t){var i;let n=(i=this.id3Track)==null?void 0:i.cues;if(n)for(let r=n.length;r--;){let a=n[r];a.type===t&&a.startTime<e&&a.endTime===Zf&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:n}){let{id3Track:r,hls:a}=this;if(!a)return;let{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(r&&(o||l)){let u;n==="audio"?u=c=>c.type===Ln.audioId3&&l:n==="video"?u=c=>c.type===Ln.emsg&&o:u=c=>c.type===Ln.audioId3&&l||c.type===Ln.emsg&&o,yv(r,t,i,u)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;let{assetPlayerId:i,timelineOffset:n,enableDateRangeMetadataCues:r,interstitialsController:a}=this.hls.config;if(!r)return;let o=Fv();if(i&&n&&!a){let{fragmentStart:b,fragmentEnd:A}=e,R=this.assetCue;R?(R.startTime=b,R.endTime=A):o&&(R=this.assetCue=xy(o,b,A,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),R&&(R.id=i,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(R),R.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;let{id3Track:l}=this,{dateRanges:u}=e,c=Object.keys(u),h=this.dateRangeCuesAppended;if(l&&t){var g;if((g=l.cues)!=null&&g.length){let b=Object.keys(h).filter(A=>!c.includes(A));for(let A=b.length;A--;){var m;let R=b[A],F=(m=h[R])==null?void 0:m.cues;delete h[R],F&&Object.keys(F).forEach(O=>{let H=F[O];if(H){H.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(H)}catch{}}})}}else h=this.dateRangeCuesAppended={}}let v=e.fragments[e.fragments.length-1];if(!(c.length===0||!ft(v?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let b=0;b<c.length;b++){let A=c[b],R=u[A],F=R.startTime,O=h[A],H=O?.cues||{},W=O?.durationKnown||!1,E=Zf,{duration:X,endDate:Z}=R;if(Z&&X!==null)E=F+X,W=!0;else if(R.endOnNext&&!W){let oe=c.reduce((ve,Ce)=>{if(Ce!==R.id){let we=u[Ce];if(we.class===R.class&&we.startDate>R.startDate&&(!ve||R.startDate<ve.startDate))return we}return ve},null);oe&&(E=oe.startTime,W=!0)}let re=Object.keys(R.attr);for(let oe=0;oe<re.length;oe++){let ve=re[oe];if(!QO(ve))continue;let Ce=H[ve];if(Ce)W&&!(O!=null&&O.durationKnown)?Ce.endTime=E:Math.abs(Ce.startTime-F)>.01&&(Ce.startTime=F,Ce.endTime=E);else if(o){let we=R.attr[ve];JO(ve)&&(we=vA(we));let Xe=xy(o,F,E,{key:ve,data:we},Ln.dateRange);Xe&&(Xe.id=A,this.id3Track.addCue(Xe),H[ve]=Xe,a&&(ve==="X-ASSET-LIST"||ve==="X-ASSET-URL")&&Xe.addEventListener("enter",this.onEventCueEnter))}}h[A]={cues:H,dateRange:R,durationKnown:W}}}}},Bv=class{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{let{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;let n=this.computeLatency();if(n===null)return;this._latency=n;let{lowLatencyMode:r,maxLiveSyncPlaybackRate:a}=this.config;if(!r||a===1||!i.live)return;let o=this.targetLatency;if(o===null)return;let l=n-o,u=Math.min(this.maxLatency,o+i.targetduration);if(l<u&&l>.05&&this.forwardBufferLength>1){let h=Math.min(2,Math.max(1,a)),g=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,m=Math.min(h,Math.max(1,g));this.changeMediaPlaybackRate(t,m)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){let{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;let t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){let e=this.levelDetails;if(e===null||this.hls===null)return null;let{holdBack:t,partHoldBack:i,targetduration:n}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig,u=o&&i||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=r!==void 0?r:a*n);let c=n;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){let e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;let i=this.levelDetails;if(i===null)return null;let n=i.edge,r=e-t-this.edgeStalled,a=n-i.totalduration,o=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,r),o)}get drift(){let e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){let e=this.levelDetails;if(e===null)return 0;let t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){let{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;let i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){let{hls:e}=this;!e||(e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.ERROR,this.onError,this))}unregisterListeners(){let{hls:e}=this;!e||(e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===Ae.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,n;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(n=this.targetLatency)==null?void 0:n.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){let e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){let e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}},Uv=class extends _d{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){let{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.ERROR,this.onError,this)}_unregisterListeners(){let{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){let i=this.hls.config.preferManagedMediaSource,n=[],r={},a={},o=!1,l=!1,u=!1;t.levels.forEach(c=>{let h=c.attrs,{audioCodec:g,videoCodec:m}=c;g&&(c.audioCodec=g=up(g,i)||void 0),m&&(m=c.videoCodec=bO(m));let{width:v,height:b,unknownCodecs:A}=c,R=A?.length||0;if(o||(o=!!(v&&b)),l||(l=!!m),u||(u=!!g),R||g&&!this.isAudioSupported(g)||m&&!this.isVideoSupported(m)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}let{CODECS:F,"FRAME-RATE":O,"HDCP-LEVEL":H,"PATHWAY-ID":W,RESOLUTION:E,"VIDEO-RANGE":X}=h,re=`${`${W||"."}-`}${c.bitrate}-${E}-${O}-${F}-${X}-${H}`;if(r[re])if(r[re].uri!==c.url&&!c.attrs["PATHWAY-ID"]){let oe=a[re]+=1;c.attrs["PATHWAY-ID"]=new Array(oe+1).join(".");let ve=this.createLevel(c);r[re]=ve,n.push(ve)}else r[re].addGroupId("audio",h.AUDIO),r[re].addGroupId("text",h.SUBTITLES);else{let oe=this.createLevel(c);r[re]=oe,a[re]=1,n.push(oe)}}),this.filterAndSortMediaOptions(n,t,o,l,u)}createLevel(e){let t=new Ko(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){let n=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(n.message),t.supportedResult=DA(n,[])}return t}isAudioSupported(e){return dd(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return dd(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,n,r){var a;let o=[],l=[],u=e,c=((a=t.stats)==null?void 0:a.parsing)||{};if((i||n)&&r&&(u=u.filter(({videoCodec:F,videoRange:O,width:H,height:W})=>(!!F||!!(H&&W))&&kO(O))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let F="no level with compatible codecs found in manifest",O=F;t.levels.length&&(O=`one or more CODECS in variant not supported: ${yi(t.levels.map(W=>W.attrs.CODECS).filter((W,E,X)=>X.indexOf(W)===E))}`,this.warn(O),F+=` (${O})`);let H=new Error(F);this.hls.trigger(B.ERROR,{type:Et.MEDIA_ERROR,details:Ae.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:H,reason:O})}}),c.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(F=>!F.audioCodec||this.isAudioSupported(F.audioCodec)),gA(o)),t.subtitles&&(l=t.subtitles,gA(l));let h=u.slice(0);u.sort((F,O)=>{if(F.attrs["HDCP-LEVEL"]!==O.attrs["HDCP-LEVEL"])return(F.attrs["HDCP-LEVEL"]||"")>(O.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&F.height!==O.height)return F.height-O.height;if(F.frameRate!==O.frameRate)return F.frameRate-O.frameRate;if(F.videoRange!==O.videoRange)return cp.indexOf(F.videoRange)-cp.indexOf(O.videoRange);if(F.videoCodec!==O.videoCodec){let H=d1(F.videoCodec),W=d1(O.videoCodec);if(H!==W)return W-H}if(F.uri===O.uri&&F.codecSet!==O.codecSet){let H=lp(F.codecSet),W=lp(O.codecSet);if(H!==W)return W-H}return F.averageBitrate!==O.averageBitrate?F.averageBitrate-O.averageBitrate:0});let g=h[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==h.length)){for(let F=0;F<h.length;F++)if(h[F].pathwayId===u[0].pathwayId){g=h[F];break}}this._levels=u;for(let F=0;F<u.length;F++)if(u[F]===g){var m;this._firstLevel=F;let O=g.bitrate,H=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${O}`),((m=this.hls.userConfig)==null?void 0:m.abrEwmaDefaultEstimate)===void 0){let W=Math.min(O,this.hls.config.abrEwmaDefaultEstimateMax);W>H&&H===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=W)}break}let v=r&&!n,b=this.hls.config,A=!!(b.audioStreamController&&b.audioTrackController),R={levels:u,audioTracks:o,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:n,altAudio:A&&!v&&o.some(F=>!!F.url)};c.end=performance.now(),this.hls.trigger(B.MANIFEST_PARSED,R)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){let t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){let c=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:c,reason:c.message}),h)return;e=Math.min(e,t.length-1)}let i=this.currentLevelIndex,n=this.currentLevel,r=n?n.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&n&&r===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${i}${r?" with Pathway "+r:""}`);let l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(B.LEVEL_SWITCHING,l);let u=a.details;if(!u||u.live){let c=this.switchParams(a.uri,n?.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){let e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){let t=this.steering.pathways(),i=e.filter(n=>t.indexOf(n)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===Yt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===vt.MAIN){let i=t.elementaryStreams;if(!Object.keys(i).some(r=>!!i[r]))return;let n=this._levels[t.level];n!=null&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var i;let{level:n,details:r}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${n}`),(o=t.deliveryDirectives)!=null&&o.skip&&(r.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(n,t,l)}else(i=t.deliveryDirectives)!=null&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);let i=this.getUrlWithDirectives(e.uri,t),n=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],a=e.details,o=a?.age;this.log(`Loading level index ${n}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${r?" Pathway "+r:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(B.LEVEL_LOADING,{url:i,level:n,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;let i=this._levels.filter((r,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(o=>o.level=-1)),!1));KA(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);let n=i.length-1;this._firstLevel=Math.min(this._firstLevel,n),this._startLevel&&(this._startLevel=Math.min(this._startLevel,n)),this.hls.trigger(B.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){let{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(B.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}};function gA(s){let e={};s.forEach(t=>{let i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function FC(){return self.SourceBuffer||self.WebKitSourceBuffer}function $C(){if(!to())return!1;let e=FC();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function WF(){if(!$C())return!1;let s=to();return typeof s?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>s.isTypeSupported(hd(e,"video")))||["mp4a.40.2","fLaC"].some(e=>s.isTypeSupported(hd(e,"audio"))))}function KF(){var s;let e=FC();return typeof(e==null||(s=e.prototype)==null?void 0:s.changeType)=="function"}var YF=100,Hv=class extends gd{constructor(e,t,i){super(e,t,i,"stream-controller",vt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{let n=this.media,r=n?n.currentTime:null;if(r===null||!ft(r)||(this.log(`Media seeked to ${r.toFixed(3)}`),!this.getBufferedFrag(r)))return;let a=this.getFwdBufferInfoAtPos(n,r,vt.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${r} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();let{hls:e}=this;e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();let{hls:e}=this;e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){let{lastCurrentTime:i,hls:n}=this;if(this.stopLoad(),this.setInterval(YF),this.level=-1,!this.startFragRequested){let r=n.startLevel;r===-1&&(n.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=n.firstAutoLevel),n.nextLoadLevel=r,this.level=n.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=je.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=je.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case je.WAITING_LEVEL:{let{levels:e,level:t}=this,i=e?.[t],n=i?.details;if(n&&(!n.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(n))break;this.state=je.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=je.IDLE;break}break}case je.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===je.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){let{hls:e,levelLastLoaded:t,levels:i,media:n}=this;if(t===null||!n&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;let r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[r]))return;let a=i[r],o=this.getMainFwdBufferInfo();if(o===null)return;let l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){let b={};this.altAudio===2&&(b.type="video"),this.hls.trigger(B.BUFFER_EOS,b),this.state=je.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;let u=a.details;if(!u||this.state===je.WAITING_LEVEL||this.waitForLive(a)){this.level=r,this.state=je.WAITING_LEVEL,this.startFragRequested=!1;return}let c=o.len,h=this.getMaxBufferLength(a.maxBitrate);if(c>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);let g=this.backtrackFragment?this.backtrackFragment.start:o.end,m=this.getNextFragment(g,u);if(this.couldBacktrack&&!this.fragPrevious&&m&&Wi(m)&&this.fragmentTracker.getState(m)!==Zi.OK){var v;let A=((v=this.backtrackFragment)!=null?v:m).sn-u.startSN,R=u.fragments[A-1];R&&m.cc===R.cc&&(m=R,this.fragmentTracker.removeFragment(R))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,g)){if(!m.gap){let A=this.audioOnly&&!this.altAudio?mi.AUDIO:mi.VIDEO,R=(A===mi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;R&&this.afterBufferFlushed(R,A,vt.MAIN)}m=this.getNextFragmentLoopLoading(m,u,o,vt.MAIN,h)}!m||(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,a,g))}loadFragment(e,t,i){let n=this.fragmentTracker.getState(e);n===Zi.NOT_LOADED||n===Zi.PARTIAL?Wi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,vt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){let{levels:e,media:t}=this;if(t!=null&&t.readyState){let i,n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);let r=this.getLevelDetails();if(r!=null&&r.live){let o=this.getMainFwdBufferInfo();if(!o||o.len<r.targetduration*2)return}if(!t.paused&&e){let o=this.hls.nextLoadLevel,l=e[o],u=this.fragLastKbps;u&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:i=0}else i=0;let a=this.getBufferedFrag(t.currentTime+i);if(a){let o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();let l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(a.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){let e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case je.KEY_LOADING:case je.FRAG_LOADING:case je.FRAG_LOADING_WAITING_RETRY:case je.PARSING:case je.PARSED:this.state=je.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);let i=t.media;zs(i,"playing",this.onMediaPlaying),zs(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){let{media:i}=this;i&&(fn(i,"playing",this.onMediaPlaying),fn(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(B.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,n=!1;for(let r=0;r<t.levels.length;r++){let a=t.levels[r].audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,n=n||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=i&&n&&!KF(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){let{levels:i}=this;if(!i||this.state!==je.IDLE)return;let n=t.levelInfo;(!n.details||n.details.live&&(this.levelLastLoaded!==n||n.details.expired)||this.waitForCdnTuneIn(n.details))&&(this.state=je.WAITING_LEVEL)}onLevelLoaded(e,t){var i;let{levels:n,startFragRequested:r}=this,a=t.level,o=t.details,l=o.totalduration;if(!n){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);let u=t.levelInfo,c=this.fragCurrent;c&&(this.state===je.FRAG_LOADING||this.state===je.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let h=0;if(o.live||(i=u.details)!=null&&i.live){var g;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,u.details,(g=this.levelLastLoaded)==null?void 0:g.details)}if(u.details=o,this.levelLastLoaded=u,r||this.setStartPosition(o,h),this.hls.trigger(B.LEVEL_UPDATED,{details:o,level:a}),this.state===je.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=je.IDLE}r&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){let{config:t,media:i}=this;if(!i)return;let n=this.hls.liveSyncPosition,r=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=r>=a-t.maxFragLookUpTolerance&&r<=o;if(n!==null&&i.duration>n&&(r<n||!l)){let c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&i.readyState<4||r<o-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=n),i.readyState))if(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${n.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;let h=Ft.bufferInfo(i,n,0);if(!((u=h.buffered)!=null&&u.length)){i.currentTime=n;return}if(h.start<=r){i.currentTime=n;return}let{nextStart:m}=Ft.bufferedInfo(h.buffered,r,0);m&&(i.currentTime=m)}else i.currentTime=n}}_handleFragmentLoadProgress(e){var t;let i=e.frag,{part:n,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}let o=a[i.level];if(!o){this.warn(`Level ${i.level} not found on progress`);return}let l=o.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}let u=o.videoCodec,c=l.PTSKnown||!l.live,h=(t=i.initSegment)==null?void 0:t.data,g=this._getAudioCodec(o),m=this.transmuxer=this.transmuxer||new xp(this.hls,vt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=n?n.index:-1,b=v!==-1,A=new pd(i.level,i.sn,i.stats.chunkCount,r.byteLength,v,b),R=this.initPTS[i.cc];m.push(r,h,g,u,i,n,l.totalduration,c,A,R)}onAudioTrackSwitching(e,t){let i=this.hls,n=this.altAudio===2;if(hp(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;let a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(n){this.fragmentTracker.removeAllFragments(),i.once(B.BUFFER_FLUSHED,()=>{!this.hls||this.hls.trigger(B.AUDIO_TRACK_SWITCHED,t)}),i.trigger(B.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(B.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){let i=hp(t.url,this.hls);if(i){let n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){let i=t.tracks,n,r,a=!1;for(let o in i){let l=i[o];if(l.id==="main"){if(r=o,n=l,o==="video"){let u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&n?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){let{frag:i,part:n}=t,r=i.type===vt.MAIN;if(r){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===je.PARSED&&(this.state=je.IDLE);return}let o=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Wi(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}let a=this.media;!a||(!this._hasEnoughToStart&&Ft.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=je.ERROR;return}switch(t.details){case Ae.FRAG_GAP:case Ae.FRAG_PARSING_ERROR:case Ae.FRAG_DECRYPT_ERROR:case Ae.FRAG_LOAD_ERROR:case Ae.FRAG_LOAD_TIMEOUT:case Ae.KEY_LOAD_ERROR:case Ae.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(vt.MAIN,t);break;case Ae.LEVEL_LOAD_ERROR:case Ae.LEVEL_LOAD_TIMEOUT:case Ae.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===je.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Yt.LEVEL&&(this.state=je.IDLE);break;case Ae.BUFFER_ADD_CODEC_ERROR:case Ae.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case Ae.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Ae.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=je.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==mi.AUDIO||!this.altAudio){let i=(t===mi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,vt.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){let{media:e}=this;if(!e)return;let t=e.currentTime,i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}let n=this.timelineOffset;n&&i&&(i+=n);let r=this.getLevelDetails(),a=Ft.getBuffered(e),o=a.length?a.start(0):0,l=o-i,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<u||this.loadingParts&&l<2*(r?.partTarget||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),i+=l,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{let{hls:n}=this,r=i?.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=je.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;let a=r.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(B.FRAG_LOADED,i),r.bitrateTest=!1}).catch(i=>{this.state===je.STOPPED||this.state===je.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){let t=this.playlistType,{hls:i}=this,{remuxResult:n,chunkMeta:r}=e,a=this.getCurrentContext(r);if(!a){this.resetWhenMissingContext(r);return}let{frag:o,part:l,level:u}=a,{video:c,text:h,id3:g,initSegment:m}=n,{details:v}=u,b=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=je.PARSING,m){let A=m.tracks;if(A){let H=o.initSegment||o;if(this.unhandledEncryptionError(m,o))return;this._bufferInitSegment(u,A,H,r),i.trigger(B.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:t,tracks:A})}let R=m.initPTS,F=m.timescale,O=this.initPTS[o.cc];if(ft(R)&&(!O||O.baseTime!==R||O.timescale!==F)){let H=m.trackId;this.initPTS[o.cc]={baseTime:R,timescale:F,trackId:H},i.trigger(B.INIT_PTS_FOUND,{frag:o,id:t,initPTS:R,timescale:F,trackId:H})}}if(c&&v){b&&c.type==="audiovideo"&&this.logMuxedErr(o);let A=v.fragments[o.sn-1-v.startSN],R=o.sn===v.startSN,F=!A||o.cc>A.cc;if(n.independent!==!1){let{startPTS:O,endPTS:H,startDTS:W,endDTS:E}=c;if(l)l.elementaryStreams[c.type]={startPTS:O,endPTS:H,startDTS:W,endDTS:E};else if(c.firstKeyFrame&&c.independent&&r.id===1&&!F&&(this.couldBacktrack=!0),c.dropped&&c.independent){let X=this.getMainFwdBufferInfo(),Z=(X?X.end:this.getLoadPosition())+this.config.maxBufferHole,re=c.firstKeyFramePTS?c.firstKeyFramePTS:O;if(!R&&Z<re-this.config.maxBufferHole&&!F){this.backtrack(o);return}else F&&(o.gap=!0);o.setElementaryStreamInfo(c.type,o.start,H,o.start,E,!0)}else R&&O-(v.appliedTimelineOffset||0)>ap&&(o.gap=!0);o.setElementaryStreamInfo(c.type,O,H,W,E),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,r,R||F)}else if(R||F)o.gap=!0;else{this.backtrack(o);return}}if(b){let{startPTS:A,endPTS:R,startDTS:F,endDTS:O}=b;l&&(l.elementaryStreams[mi.AUDIO]={startPTS:A,endPTS:R,startDTS:F,endDTS:O}),o.setElementaryStreamInfo(mi.AUDIO,A,R,F,O),this.bufferFragmentData(b,o,l,r)}if(v&&g!=null&&g.samples.length){let A={id:t,frag:o,details:v,samples:g.samples};i.trigger(B.FRAG_PARSING_METADATA,A)}if(v&&h){let A={id:t,frag:o,details:v,samples:h.samples};i.trigger(B.FRAG_PARSING_USERDATA,A)}}logMuxedErr(e){this.warn(`${Wi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,n){if(this.state!==je.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));let{audio:r,video:a,audiovideo:o}=t;if(r){let u=e.audioCodec,c=ep(r.codec,u);c==="mp4a"&&(c="mp4a.40.5");let h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");let g=r.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),u&&u!==c&&this.log(`Swapping manifest audio codec "${u}" for "${c}"`),r.levelCodec=c,r.id=vt.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${c||""}/${u||""}/${r.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=vt.MAIN;let u=a.codec;if(u?.length===4)switch(u){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${a.codec!==u?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);let l=Object.keys(t);if(l.length){if(this.hls.trigger(B.BUFFER_CODECS,t),!this.hls)return;l.forEach(u=>{let h=t[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(B.BUFFER_APPENDING,{type:u,data:h,frag:i,part:null,chunkMeta:n,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){let e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,vt.MAIN)}get maxBufferLength(){let{levels:e,level:t}=this,i=e?.[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=je.IDLE}checkFragmentChanged(){let e=this.media,t=null;if(e&&e.readyState>1&&e.seeking===!1){let i=e.currentTime;if(Ft.isBuffered(e,i)?t=this.getAppendedFrag(i):Ft.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;let n=this.fragPlaying,r=t.level;(!n||t.sn!==n.sn||n.level!==r)&&(this.fragPlaying=t,this.hls.trigger(B.FRAG_CHANGED,{frag:t}),(!n||n.level!==r)&&this.hls.trigger(B.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){let e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;let t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return ft(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;let t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(ft(t)){let i=this.getLevelDetails(),n=this.currentFrag||(i?Yo(null,i.fragments,t):null);if(n){let r=n.programDateTime;if(r!==null){let a=r+(t-n.start)*1e3;return new Date(a)}}}return null}get currentLevel(){let e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){let e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}},Vv=class extends pn{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(let i in this.keyIdToKeyInfo){let n=this.keyIdToKeyInfo[i].loader;if(n){var t;if(e&&e!==((t=n.context)==null?void 0:t.frag.type))return;n.abort()}}}detach(){for(let e in this.keyIdToKeyInfo){let t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(let e in this.keyIdToKeyInfo){let t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=Ae.KEY_LOAD_ERROR,i,n,r){return new fr({type:Et.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:n})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let n=0,r=t.length;n<r;n++){let a=t[n];if(e.cc<=a.cc&&(!Wi(e)||!Wi(a)||e.sn<a.sn)||!i&&n==r-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);let l=ip(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){let n=rd(this.config);if(n.length)return this.emeController.getKeySystemAccess(n)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,n;t&&e.setKeyFormat(t);let r=e.decryptdata;if(!r){let u=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Ae.KEY_LOAD_ERROR,u))}let a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Ae.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=Ay(r),l=this.keyIdToKeyInfo[o];if((i=l)!=null&&i.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(n=l)!=null&&n.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(c=>{let{keyInfo:h}=c;return r.key=h.decryptdata.key,{frag:e,keyInfo:h}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${r.keyId?" keyId: "+qs(r.keyId):""} URI: ${r.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,Ae.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){let i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var n;if(!e.decryptdata.keyId&&(n=t.initSegment)!=null&&n.data){let a=uO(t.initSegment.data);if(a.length){let o=a[0];o.some(l=>l!==0)&&(this.log(`Using keyId found in init segment ${qs(o)}`),e.decryptdata.keyId=o,ma.setKeyIdForUri(e.decryptdata.uri,o))}}let r=this.emeController.loadKey(i);return(e.keyLoadPromise=r.then(a=>(e.mediaKeySessionContext=a,i))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=t),a})}return Promise.resolve(i)}loadKeyHTTP(e,t){let i=this.config,n=i.loader,r=new n(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,o)=>{let l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u=i.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(g,m,v,b)=>{let{frag:A,keyInfo:R}=v,F=Ay(R.decryptdata);if(!A.decryptdata||R!==this.keyIdToKeyInfo[F])return o(this.createKeyLoadError(A,Ae.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));R.decryptdata.key=A.decryptdata.key=new Uint8Array(g.data),A.keyLoader=null,R.loader=null,a({frag:A,keyInfo:R})},onError:(g,m,v,b)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Ae.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),v,li({url:l.url,data:void 0},g)))},onTimeout:(g,m,v)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Ae.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(g,m,v)=>{this.resetLoader(m),o(this.createKeyLoadError(t,Ae.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};r.load(l,c,h)})}resetLoader(e){let{frag:t,keyInfo:i,url:n}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null);let a=Ay(i.decryptdata)||n;delete this.keyIdToKeyInfo[a],r&&r.destroy()}};function Ay(s){if(s.keyFormat!==_s.FAIRPLAY){let e=s.keyId;if(e)return qs(e)}return s.uri}function mA(s){let{type:e}=s;switch(e){case Yt.AUDIO_TRACK:return vt.AUDIO;case Yt.SUBTITLE_TRACK:return vt.SUBTITLE;default:return vt.MAIN}}function Cy(s,e){let t=s.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}var jv=class{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){let{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(B.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){let{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(B.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){let t=this.hls.config,i=t.pLoader,n=t.loader,r=i||n,a=new r(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(let e in this.loaders){let t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){let{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Yt.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){let{id:i,level:n,pathwayId:r,url:a,deliveryDirectives:o,levelInfo:l}=t;this.load({id:i,level:n,pathwayId:r,responseType:"text",type:Yt.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){let{id:i,groupId:n,url:r,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:Yt.AUDIO_TRACK,url:r,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){let{id:i,groupId:n,url:r,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:Yt.SUBTITLE_TRACK,url:r,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){let i=this.loaders[Yt.LEVEL];if(i){let n=i.context;n&&!t.levels.some(r=>r===n.levelOrTrack)&&(i.abort(),delete this.loaders[Yt.LEVEL])}}load(e){var t;let i=this.hls.config,n=this.getInternalLoader(e);if(n){let u=this.hls.logger,c=n.context;if(c&&c.levelOrTrack===e.levelOrTrack&&(c.url===e.url||c.deliveryDirectives&&!e.deliveryDirectives)){c.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${c.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),n.abort()}let r;if(e.type===Yt.MANIFEST?r=i.manifestLoadPolicy.default:r=fi({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),ft((t=e.deliveryDirectives)==null?void 0:t.part)){let u;if(e.type===Yt.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===Yt.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===Yt.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){let c=u.partTarget,h=u.targetduration;if(c&&h){let g=Math.max(c*3,h*.8)*1e3;r=fi({},r,{maxTimeToFirstByteMs:Math.min(g,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,r.maxTimeToFirstByteMs)})}}}let a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(u,c,h,g)=>{let m=this.getInternalLoader(h);this.resetInternalLoader(h.type);let v=u.data;c.parsing.start=performance.now(),Xn.isMediaPlaylist(v)||h.type!==Yt.MANIFEST?this.handleTrackOrLevelPlaylist(u,c,h,g||null,m):this.handleMasterPlaylist(u,c,h,g)},onError:(u,c,h,g)=>{this.handleNetworkError(c,h,!1,u,g)},onTimeout:(u,c,h)=>{this.handleNetworkError(c,h,!0,void 0,u)}};n.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;let{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,n){let r=this.hls,a=e.data,o=Cy(e,i),l=Xn.parseMasterPlaylist(a,o);if(l.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,i,l.playlistParsingError,n,t);return}let{contentSteering:u,levels:c,sessionData:h,sessionKeys:g,startTimeOffset:m,variableList:v}=l;this.variableList=v,c.forEach(F=>{let{unknownCodecs:O}=F;if(O){let{preferManagedMediaSource:H}=this.hls.config,{audioCodec:W,videoCodec:E}=F;for(let X=O.length;X--;){let Z=O[X];dd(Z,"audio",H)?(F.audioCodec=W=W?`${W},${Z}`:Z,Cu.audio[W.substring(0,4)]=2,O.splice(X,1)):dd(Z,"video",H)&&(F.videoCodec=E=E?`${E},${Z}`:Z,Cu.video[E.substring(0,4)]=2,O.splice(X,1))}}});let{AUDIO:b=[],SUBTITLES:A,"CLOSED-CAPTIONS":R}=Xn.parseMasterPlaylistMedia(a,o,l);b.length&&!b.some(O=>!O.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ei({}),bitrate:0,url:""})),r.trigger(B.MANIFEST_LOADED,{levels:c,audioTracks:b,subtitles:A,captions:R,contentSteering:u,url:o,stats:t,networkDetails:n,sessionData:h,sessionKeys:g,startTimeOffset:m,variableList:v})}handleTrackOrLevelPlaylist(e,t,i,n,r){let a=this.hls,{id:o,level:l,type:u}=i,c=Cy(e,i),h=ft(l)?l:ft(o)?o:0,g=mA(i),m=Xn.parseLevelPlaylist(e.data,c,h,g,0,this.variableList);if(u===Yt.MANIFEST){let v={attrs:new Ei({}),bitrate:0,details:m,name:"",url:c};m.requestScheduled=t.loading.start+qA(m,0),a.trigger(B.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:c,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=m,this.handlePlaylistLoaded(m,e,t,i,n,r)}handleManifestParsingError(e,t,i,n,r){this.hls.trigger(B.ERROR,{type:Et.NETWORK_ERROR,details:Ae.MANIFEST_PARSING_ERROR,fatal:t.type===Yt.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:n,stats:r})}handleNetworkError(e,t,i=!1,n,r){let a=`A network ${i?"timeout":"error"+(n?" (status "+n.code+")":"")} occurred while loading ${e.type}`;e.type===Yt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Yt.AUDIO_TRACK||e.type===Yt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);let o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=Ae.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case Yt.MANIFEST:l=i?Ae.MANIFEST_LOAD_TIMEOUT:Ae.MANIFEST_LOAD_ERROR,u=!0;break;case Yt.LEVEL:l=i?Ae.LEVEL_LOAD_TIMEOUT:Ae.LEVEL_LOAD_ERROR,u=!1;break;case Yt.AUDIO_TRACK:l=i?Ae.AUDIO_TRACK_LOAD_TIMEOUT:Ae.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case Yt.SUBTITLE_TRACK:l=i?Ae.SUBTITLE_TRACK_LOAD_TIMEOUT:Ae.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);let h={type:Et.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:o,networkDetails:t,stats:r};if(n){let g=t?.url||e.url;h.response=li({url:g,data:void 0},n)}this.hls.trigger(B.ERROR,h)}handlePlaylistLoaded(e,t,i,n,r,a){let o=this.hls,{type:l,level:u,levelOrTrack:c,id:h,groupId:g,deliveryDirectives:m}=n,v=Cy(t,n),b=mA(n),A=typeof n.level=="number"&&b===vt.MAIN?u:void 0,R=e.playlistParsingError;if(R){if(this.hls.logger.warn(`${R} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(B.ERROR,{type:Et.NETWORK_ERROR,details:Ae.LEVEL_PARSING_ERROR,fatal:!1,url:v,error:R,reason:R.message,response:t,context:n,level:A,parent:b,networkDetails:r,stats:i});return}e.playlistParsingError=null}if(!e.fragments.length){let F=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(B.ERROR,{type:Et.NETWORK_ERROR,details:Ae.LEVEL_EMPTY_ERROR,fatal:!1,url:v,error:F,reason:F.message,response:t,context:n,level:A,parent:b,networkDetails:r,stats:i});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Yt.MANIFEST:case Yt.LEVEL:if(A){if(!c)A=0;else if(c!==o.levels[A]){let F=o.levels.indexOf(c);F>-1&&(A=F)}}o.trigger(B.LEVEL_LOADED,{details:e,levelInfo:c||o.levels[0],level:A||0,id:h||0,stats:i,networkDetails:r,deliveryDirectives:m,withoutMultiVariant:l===Yt.MANIFEST});break;case Yt.AUDIO_TRACK:o.trigger(B.AUDIO_TRACK_LOADED,{details:e,track:c,id:h||0,groupId:g||"",stats:i,networkDetails:r,deliveryDirectives:m});break;case Yt.SUBTITLE_TRACK:o.trigger(B.SUBTITLE_TRACK_LOADED,{details:e,track:c,id:h||0,groupId:g||"",stats:i,networkDetails:r,deliveryDirectives:m});break}}},pr=class{static get version(){return md}static isMSESupported(){return $C()}static isSupported(){return WF()}static getMediaSource(){return to()}static get Events(){return B}static get MetadataSchema(){return Ln}static get ErrorTypes(){return Et}static get ErrorDetails(){return Ae}static get DefaultConfig(){return pr.defaultConfig?pr.defaultConfig:BF}static set DefaultConfig(e){pr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Qv,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;let t=this.logger=JP(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=HF(pr.DefaultConfig,e,t);this.userConfig=e,i.progressive&&VF(i,t);let{abrController:n,bufferController:r,capLevelController:a,errorController:o,fpsController:l}=i,u=new o(this),c=this.abrController=new n(this),h=new Ny(this),g=i.interstitialsController,m=g?this.interstitialsController=new g(this,pr):null,v=this.bufferController=new r(this,h),b=this.capLevelController=new a(this),A=new l(this),R=new jv(this),F=i.contentSteeringController,O=F?new F(this):null,H=this.levelController=new Uv(this,O),W=new $v(this),E=new Vv(this.config,this.logger),X=this.streamController=new Hv(this,h,E),Z=this.gapController=new Nv(this,h);b.setStreamController(X),A.setStreamController(X);let re=[R,H,X];m&&re.splice(1,0,m),O&&re.splice(1,0,O),this.networkControllers=re;let oe=[c,v,Z,b,A,W,h];this.audioTrackController=this.createController(i.audioTrackController,re);let ve=i.audioStreamController;ve&&re.push(this.audioStreamController=new ve(this,h,E)),this.subtitleTrackController=this.createController(i.subtitleTrackController,re);let Ce=i.subtitleStreamController;Ce&&re.push(this.subtititleStreamController=new Ce(this,h,E)),this.createController(i.timelineController,oe),E.emeController=this.emeController=this.createController(i.emeController,oe),this.cmcdController=this.createController(i.cmcdController,oe),this.latencyController=this.createController(Bv,oe),this.coreComponents=oe,re.push(u);let we=u.onErrorOut;typeof we=="function"&&this.on(B.ERROR,we,u),this.on(B.MANIFEST_LOADED,R.onManifestLoaded,R)}createController(e,t){if(e){let i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,n){this._emitter.off(e,t,i,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;let n=e===B.ERROR;this.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.INTERNAL_EXCEPTION,fatal:n,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(B.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;let e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){let r=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(B.ERROR,{type:Et.OTHER_ERROR,details:Ae.ATTACH_MEDIA_ERROR,fatal:!0,error:r});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());let t="media"in e,i=t?e.media:e,n=t?e:{media:i};this._media=i,this.trigger(B.MEDIA_ATTACHING,n)}detachMedia(){this.logger.log("detachMedia"),this.trigger(B.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;let e=this.bufferController.transferMedia();return this.trigger(B.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();let t=this.media,i=this._url,n=this._url=Gv.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${n}`),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(B.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){let e={[vt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[vt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[vt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");let e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=oF()),e}get levels(){let e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){let e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){let t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){let{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){let{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){let{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){LO(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){let{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;let i=e.length;for(let n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){let{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this,n;if(t===-1&&e!=null&&e.length?n=e.length-1:n=t,i)for(let r=n;r--;){let a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return n}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){let e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){let e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){let e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){let t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){let e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){let e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){let e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){let t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){let e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){let t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){let i=RA(t);return LA(e,i,navigator.mediaCapabilities)}};pr.defaultConfig=void 0;function XF(s,e,t="Video",i=!1){if(e&&e._hlsEnhancementInitialized){console.warn(`[${t}] HLS enhancement already initialized for this video element`);return}let n="",r=e?.querySelector('source[type="application/x-mpegURL"]');if(r){let l=r.getAttribute("src")||"";if(l.includes(".avsPath")||l.includes("/is/content/")||l.includes("-AVS.")){console.warn(`[${t}] Detected Dynamic Media optimized stream, using native playback`),e&&(e._hlsEnhancementInitialized=!0);return}}let o=e?.closest(".cmp-dm-video-wrapper")?.getAttribute("data-dmvideoplaylistarray");if(o)try{let l=JSON.parse(o);l?.length>0&&l[0]?.sources?.length>0&&(n=l[0].sources[0]?.src)}catch{}else if(e){let l=e.querySelector('source[type="application/x-mpegURL"]')||e.querySelector("source");l&&(n=l.getAttribute("src")||"")}if(window.Hls?.isSupported?.()&&n){console.warn(`[${t}] Using HLS.js for optimized playbook`);let l=i?{startLevel:-1,enableWorker:!0,lowLatencyMode:!1}:{enableWorker:!0,lowLatencyMode:!0,backBufferLength:90},u=new Hls(l),c=!1,h=e?.hasAttribute?.("autoplay")||e?.autoplay;u.loadSource(n),e&&(e._hlsEnhancementInitialized=!0),s.ready(()=>{let m=s.tech?.()?.el?.();if(m){if(m._hlsInstance)return;u.attachMedia(m),m._hlsInstance=u,u.on(Hls.Events.MANIFEST_PARSED,()=>{let A=!1,R=()=>{!A&&m.duration&&!isNaN(m.duration)&&isFinite(m.duration)&&(s.duration(m.duration),s.trigger("durationchange"),A=!0)};R(),setTimeout(R,100),i&&h&&!c&&(c=!0,setTimeout(()=>{let F=s.play();F&&typeof F.catch=="function"&&F.catch(O=>{})},100))}),u.on(Hls.Events.ERROR,(A,R)=>{if(R?.fatal)switch(R?.type){case Hls.ErrorTypes.NETWORK_ERROR:i||console.warn(`[${t}] HLS network error, trying to recover...`),u.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:i||console.warn(`[${t}] HLS media error, trying to recover...`),u.recoverMediaError();break;default:i||console.error(`[${t}] HLS fatal error:`,R),u.destroy();break}});let v=!1;u.on(Hls.Events.LEVEL_LOADED,()=>{v||setTimeout(()=>{m.duration&&!isNaN(m.duration)&&isFinite(m.duration)&&(s.duration(m.duration),s.trigger("durationchange"),v=!0)},50)});let b=!1;m.addEventListener&&(m.addEventListener("loadedmetadata",()=>{!b&&m.duration&&!isNaN(m.duration)&&isFinite(m.duration)&&(s.duration(m.duration),s.trigger("durationchange"),b=!0)}),m.addEventListener("canplay",()=>{m.duration&&!isNaN(m.duration)&&isFinite(m.duration)&&(s.duration(m.duration),s.trigger("durationchange"))}),m.addEventListener("durationchange",()=>{if(m.duration&&!isNaN(m.duration)&&isFinite(m.duration)){s.duration(m.duration);try{if(s.el&&typeof s.el=="function"){let A=s.el();A&&A.closest&&A.closest(".modal")&&setTimeout(()=>{s.trigger("loadedmetadata"),s.trigger("durationchange")},100)}}catch{}}}))}else i||console.warn(`[${t}] VideoJS tech element not available after player ready`)})}else if(e?.canPlayType?.("application/vnd.apple.mpegurl")&&n)console.warn(`[${t}] Using native HLS playback (browser supported)`),e&&(e._hlsEnhancementInitialized=!0),s.src({src:n,type:"application/x-mpegURL"});else if(n){let l=n.split(".").pop();console.warn(`[${t}] Using native browser playback for: ${l}`),e&&(e._hlsEnhancementInitialized=!0),s.src(n)}else i||console.error(`[${t}] No video source available for enhancement`),e&&(e._hlsEnhancementInitialized=!0)}var BC=XF;window.videojs=be;window.Hls=pr;window.initializeHLSEnhancement=BC;var QF=()=>{let s=new CustomEvent("videojsinit");document.dispatchEvent(s)};document.addEventListener("DOMContentLoaded",QF);var JF=s=>typeof s=="number"&&!isNaN(s)&&s>=0&&s<1/0,oT=s=>{let e=s.playlist.autoadvance_;e.timeout&&s.clearTimeout(e.timeout),e.trigger&&s.off("ended",e.trigger),e.abortOrErrorHandler&&s.off(["abort","error"],e.abortOrErrorHandler),e.timeout=null,e.trigger=null,e.abortOrErrorHandler=null},lT=(s,e)=>{if(oT(s),!JF(e)){s.playlist.autoadvance_.delay=null;return}s.playlist.autoadvance_.delay=e,s.playlist.autoadvance_.trigger=function(){let t=()=>lT(s,e);s.one("play",t),s.playlist.autoadvance_.timeout=s.setTimeout(()=>{oT(s),s.off("play",t),s.one("loadstart",function(){s.playlist.isAutoadvancing=!0}),s.playlist.next(!0)},e*1e3)},s.playlist.autoadvance_.abortOrErrorHandler=function(){s.playlist.isAutoadvancing=!1},s.one("ended",s.playlist.autoadvance_.trigger),s.one(["abort","error"],s.playlist.autoadvance_.abortOrErrorHandler)},ZF=s=>{let e=s.remoteTextTracks(),t=e&&e.length||0;for(;t--;)s.removeRemoteTextTrack(e[t])},e$=(s,e,t=!1)=>{let i=!s.paused()||s.ended(),n=()=>{s.audioPosterMode()&&s.poster(e.poster||"")};return s.trigger("beforeplaylistitem",e.originalValue||e),e.playlistItemId_&&(s.playlist.currentPlaylistItemId_=e.playlistItemId_),s.poster(t?"":e.poster||""),s.off("audiopostermodechange",n),s.one("audiopostermodechange",n),s.src(e.sources),ZF(s),s.ready(()=>{if((e.textTracks||[]).forEach(s.addRemoteTextTrack.bind(s)),s.trigger("playlistitem",e.originalValue||e),i){let r=s.play();typeof r<"u"&&typeof r.then=="function"&&r.then(null,a=>{})}lT(s,s.playlist.autoadvance_.delay)}),s},t$=1,i$=s=>{let e=s;return(!s||typeof s!="object")&&(e=Object(s),e.originalValue=s),e.playlistItemId_=t$++,e},UC=s=>s.map(i$),s$=(s,e)=>{for(let t=0;t<s.length;t++)if(s[t].playlistItemId_===e)return t;return-1},n$=(s,e)=>{let t=s,i=e;return typeof s=="object"&&(t=s.src),typeof e=="object"&&(i=e.src),/^\/\//.test(t)&&(i=i.slice(i.indexOf("//"))),/^\/\//.test(i)&&(t=t.slice(t.indexOf("//"))),t===i},Mp=(s,e)=>{for(let t=0;t<s.length;t++){let i=s[t].sources;if(Array.isArray(i))for(let n=0;n<i.length;n++){let r=i[n];if(r&&n$(r,e))return t}}return-1},r$=s=>{let e=-1,t=s.length-1;for(;++e<s.length;){let i=e+Math.floor(Math.random()*(t-e+1)),n=s[i];s[i]=s[e],s[e]=n}return s};function a$(s,e,t=0){let i=null,n=!1,r=s.playlist=(a,o=0)=>{if(n)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(a)){let l=Array.isArray(i)?i.slice():null;i=UC(a),n=!0,s.trigger({type:"duringplaylistchange",nextIndex:o,nextPlaylist:a,previousIndex:r.currentIndex_,previousPlaylist:l||[]}),n=!1,o!==-1&&r.currentItem(o),l&&s.setTimeout(()=>{s.trigger({type:"playlistchange",action:"change"})},0)}return i.map(l=>l.originalValue||l)};return s.on("loadstart",()=>{r.currentItem()===-1&&oT(s)}),r.currentIndex_=-1,r.player_=s,r.autoadvance_={},r.repeat_=!1,r.currentPlaylistItemId_=null,r.currentItem=(a,o)=>{if(n)return r.currentIndex_;if(typeof a=="number"&&r.currentIndex_!==a&&a>=0&&a<i.length)return r.currentIndex_=a,e$(r.player_,i[r.currentIndex_],o),r.currentIndex_;let l=r.player_.currentSrc()||"";if(r.currentPlaylistItemId_){let u=s$(i,r.currentPlaylistItemId_),c=i[u];if(c&&Array.isArray(c.sources)&&Mp([c],l)>-1)return r.currentIndex_=u,r.currentIndex_;r.currentPlaylistItemId_=null}return r.currentIndex_=r.indexOf(l),r.currentIndex_},r.add=(a,o)=>{if(n)throw new Error("cannot modify a playlist that is currently changing");(typeof o!="number"||o<0||o>i.length)&&(o=i.length),Array.isArray(a)||(a=[a]),i.splice(o,0,...UC(a)),s.trigger({type:"playlistchange",action:"add"}),s.trigger({type:"playlistadd",count:a.length,index:o})},r.remove=(a,o=1)=>{if(n)throw new Error("cannot modify a playlist that is currently changing");typeof a!="number"||a<0||a>i.length||(i.splice(a,o),s.trigger({type:"playlistchange",action:"remove"}),s.trigger({type:"playlistremove",count:o,index:a}))},r.contains=a=>r.indexOf(a)!==-1,r.indexOf=a=>{if(typeof a=="string")return Mp(i,a);let o=Array.isArray(a)?a:a.sources;for(let l=0;l<o.length;l++){let u=o[l];if(typeof u=="string")return Mp(i,u);if(u.src)return Mp(i,u.src)}return-1},r.currentIndex=()=>r.currentItem(),r.lastIndex=()=>i.length-1,r.nextIndex=()=>{let a=r.currentItem();if(a===-1)return-1;let o=r.lastIndex();return r.repeat_&&a===o?0:Math.min(a+1,o)},r.previousIndex=()=>{let a=r.currentItem();return a===-1?-1:r.repeat_&&a===0?r.lastIndex():Math.max(a-1,0)},r.first=()=>{if(n)return;let a=r.currentItem(0);if(i.length)return i[a].originalValue||i[a];r.currentIndex_=-1},r.last=()=>{if(n)return;let a=r.currentItem(r.lastIndex());if(i.length)return i[a].originalValue||i[a];r.currentIndex_=-1},r.next=(a=!1)=>{if(n)return;let o=r.nextIndex();if(o!==r.currentIndex_){let l=r.currentItem(o,a);return i[l].originalValue||i[l]}},r.previous=()=>{if(n)return;let a=r.previousIndex();if(a!==r.currentIndex_){let o=r.currentItem(a);return i[o].originalValue||i[o]}},r.autoadvance=a=>{lT(r.player_,a)},r.repeat=a=>{if(a===void 0)return r.repeat_;if(typeof a!="boolean"){be.log.error("videojs-playlist: Invalid value for repeat",a);return}return r.repeat_=!!a,r.repeat_},r.sort=a=>{!i.length||(i.sort(a),!n&&s.trigger("playlistsorted"))},r.reverse=()=>{!i.length||(i.reverse(),!n&&s.trigger("playlistsorted"))},r.shuffle=({rest:a}={})=>{let o=0,l=i;a&&(o=r.currentIndex_+1,l=i.slice(o)),!(l.length<=1)&&(r$(l),a&&i.splice(...[o,l.length].concat(l)),!n&&s.trigger("playlistsorted"))},Array.isArray(e)?r(e,t):i=[],r}var o$="5.2.0",l$=be.registerPlugin||be.plugin,HC=function(s,e){a$(this,s,e)};l$("playlist",HC);HC.VERSION=o$;var Li=Qi(Kd());var u$="5.0.0",c$=be.getComponent("Component"),d$=function(s){if(!s){let t=Li.default.createElement("div");return t.className="vjs-playlist-thumbnail vjs-playlist-thumbnail-placeholder",t}let e=Li.default.createElement("picture");if(e.className="vjs-playlist-thumbnail",typeof s=="string"){let t=Li.default.createElement("img");t.loading="lazy",t.src=s,t.alt="",e.appendChild(t)}else{for(let n=0;n<s.length-1;n++){let r=s[n],a=Li.default.createElement("source");for(let o in r)a[o]=r[o];e.appendChild(a)}let t=s[s.length-1],i=Li.default.createElement("img");i.loading="lazy",i.alt="";for(let n in t)i[n]=t[n];e.appendChild(i)}return e},Sd=class extends c${constructor(e,t,i){if(!t.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");t.showDescription=i.showDescription,super(e,t),this.item=t.item,this.playOnSelect=i.playOnSelect,this.emitTapEvents(),this.on(["click","tap"],this.switchPlaylistItem_),this.on("keydown",this.handleKeyDown_)}handleKeyDown_(e){(e.which===13||e.which===32)&&this.switchPlaylistItem_()}switchPlaylistItem_(e){this.player_.playlist.currentItem(this.player_.playlist().indexOf(this.item)),this.playOnSelect&&this.player_.play()}createEl(){let e=Li.default.createElement("li"),t=this.options_.item,i=this.options_.showDescription;if(typeof t.data=="object"&&Object.keys(t.data).forEach(g=>{let m=t.data[g];e.dataset[g]=m}),e.className="vjs-playlist-item",e.setAttribute("tabIndex",0),this.thumbnail=d$(t.thumbnail),e.appendChild(this.thumbnail),t.duration){let h=Li.default.createElement("time"),g=be.time.formatTime(t.duration);h.className="vjs-playlist-duration",h.setAttribute("datetime","PT0H0M"+t.duration+"S"),h.appendChild(Li.default.createTextNode(g)),e.appendChild(h)}let n=Li.default.createElement("span"),r=this.localize("Now Playing");n.className="vjs-playlist-now-playing-text",n.appendChild(Li.default.createTextNode(r)),n.setAttribute("title",r),this.thumbnail.appendChild(n);let a=Li.default.createElement("div");a.className="vjs-playlist-title-container",this.thumbnail.appendChild(a);let o=Li.default.createElement("span"),l=this.localize("Up Next");o.className="vjs-up-next-text",o.appendChild(Li.default.createTextNode(l)),o.setAttribute("title",l),a.appendChild(o);let u=Li.default.createElement("cite"),c=t.name||this.localize("Untitled Video");if(u.className="vjs-playlist-name",u.appendChild(Li.default.createTextNode(c)),u.setAttribute("title",c),a.appendChild(u),this.thumbnail.getElementsByTagName("img").alt=c,i){let h=Li.default.createElement("div"),g=t.description||"";h.className="vjs-playlist-description",h.appendChild(Li.default.createTextNode(g)),h.setAttribute("title",g),a.appendChild(h)}return e}};be.registerComponent("PlaylistMenuItem",Sd);var VC=function(s){s.addClass("vjs-selected")},jC=function(s){s.removeClass("vjs-selected"),s.thumbnail&&be.dom.removeClass(s.thumbnail,"vjs-playlist-now-playing")},h$=function(s){s.addClass("vjs-up-next")},GC=function(s){s.removeClass("vjs-up-next")},f$=be.getComponent("Component"),Np=class extends f${constructor(e,t){super(e,t),this.items=[],t.horizontal?this.addClass("vjs-playlist-horizontal"):this.addClass("vjs-playlist-vertical"),t.supportsCssPointerEvents&&this.addClass("vjs-csspointerevents"),this.createPlaylist_(),be.browser.TOUCH_ENABLED||this.addClass("vjs-mouse"),this.on(e,["loadstart","playlistchange","playlistsorted"],i=>{i.type==="playlistchange"&&["add","remove"].includes(i.action)||this.update()}),this.on(e,["playlistadd"],i=>this.addItems_(i.index,i.count)),this.on(e,["playlistremove"],i=>this.removeItems_(i.index,i.count)),this.on(e,"adstart",()=>{this.addClass("vjs-ad-playing")}),this.on(e,"adend",()=>{this.removeClass("vjs-ad-playing")}),this.on("dispose",()=>{this.empty_(),e.playlistMenu=null}),this.on(e,"dispose",()=>{this.dispose()})}createEl(){return be.dom.createEl("div",{className:this.options_.className})}empty_(){this.items&&this.items.length&&(this.items.forEach(e=>e.dispose()),this.items.length=0)}createPlaylist_(){let e=this.player_.playlist()||[],t=this.el_.querySelector(".vjs-playlist-item-list"),i=this.el_.querySelector(".vjs-playlist-ad-overlay");t||(t=Li.default.createElement("ol"),t.className="vjs-playlist-item-list",this.el_.appendChild(t)),this.empty_();for(let r=0;r<e.length;r++){let a=new Sd(this.player_,{item:e[r]},this.options_);this.items.push(a),t.appendChild(a.el_)}i||(i=Li.default.createElement("li"),i.className="vjs-playlist-ad-overlay"),t.appendChild(i);let n=this.player_.playlist.currentItem();if(this.items.length&&n>=0){VC(this.items[n]);let r=this.items[n].$(".vjs-playlist-thumbnail");r&&be.dom.addClass(r,"vjs-playlist-now-playing")}}addItems_(e,t){let n=this.player_.playlist().slice(e,t+e);if(!n.length)return;let r=this.el_.querySelector(".vjs-playlist-item-list"),o=this.el_.querySelectorAll(".vjs-playlist-item")[e]||null,l=n.map(u=>{let c=new Sd(this.player_,{item:u},this.options_);return r.insertBefore(c.el_,o),c});this.items.splice(e,0,...l)}removeItems_(e,t){let i=this.items.slice(e,t+e);!i.length||(i.forEach(n=>n.dispose()),this.items.splice(e,t))}update(){let e=this.player_.playlist();if(this.items.length!==e.length){this.createPlaylist_();return}for(let i=0;i<this.items.length;i++)if(this.items[i].item!==e[i]){this.createPlaylist_();return}let t=this.player_.playlist.currentItem();for(let i=0;i<this.items.length;i++){let n=this.items[i];i===t?(VC(n),Li.default.activeElement!==n.el()&&be.dom.addClass(n.thumbnail,"vjs-playlist-now-playing"),GC(n)):i===t+1?(jC(n),h$(n)):(jC(n),GC(n))}}};be.registerComponent("PlaylistMenu",Np);var p$=(()=>{let s=Li.default.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"})(),g$={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:p$},m$=be.getPlugin("plugin"),Fp=class extends m${constructor(e,t){if(super(e,t),!e.usingPlugin("playlist")){e.log.error("videojs-playlist plugin is required by the videojs-playlist-ui plugin");return}t=this.options_=be.obj.merge(g$,t),be.dom.isEl(t.el)||(t.el=this.findRoot_(t.className)),this.playlistMenu=e.playlistMenu=new Np(e,t)}dispose(){super.dispose(),this.playlistMenu.dispose()}hasChildEls_(e){for(let t=0;t<e.childNodes.length;t++)if(be.dom.isEl(e.childNodes[t]))return!0;return!1}findRoot_(e){let t=Li.default.querySelectorAll("."+e);for(let i=0;i<t.length;i++)if(!this.hasChildEls_(t[i]))return t[i]}};be.registerPlugin("playlistUi",Fp);Fp.VERSION=u$;var Ws={videoWrapper:".js-cmp-dm-video-wrapper",videoContainer:".js-dm-video-container",playlistElement:".js-dm-video-playlist-element",playlistItem:".vjs-playlist-item",playlist:".vjs-playlist",titleContainer:".vjs-playlist-title-container",playlistName:".vjs-playlist-name",nowPlayingText:".vjs-playlist-now-playing-text",video:"video"},Iu={playlistDate:"vjs-playlist-date",playlistVertical:"vjs-playlist-vertical",playlistHorizontal:"vjs-playlist-horizontal",horizontalLayout:"js-cmp-dm-video-horizontal"},y$={desktop:1024},v$=()=>{try{document.querySelectorAll(Ws.videoWrapper).length>0&&T$()}catch(s){console.error("DM Playlist Init failed!",s)}finally{document.dispatchEvent(new Event("layout"))}},T$=()=>{document.querySelectorAll(Ws.videoWrapper).forEach(b$),D$(),_$()},_$=()=>{document.querySelectorAll(".cmp-di-dm-video").forEach(e=>{e.querySelector(".js-cmp-dm-video--playlist")&&e.classList.add("cmp-video__playlist")})},b$=s=>{let e=s.querySelector(Ws.videoContainer);if(!e){console.warn("Video container not found");return}let t=E$(s);if(!t?.length){console.warn("No playlist data found");return}let i=e.querySelector(Ws.video),n=e.querySelector(Ws.playlistElement);if(!i||!n){console.warn("Required elements missing");return}let r=S$(i,t);!r||(w$(r,t,n),I$(s,t,r))},E$=s=>{try{return JSON.parse(s?.dataset?.dmvideoplaylistarray||s?.getAttribute("data-dmvideoplaylistarray"))}catch(e){return console.error("Failed to parse playlist data:",e),null}},S$=(s,e)=>{let t=x$(s);if(!t)return console.warn("Video element missing ID"),null;try{let i=be.getPlayer(t);if(!i){let n=A$(s);i=be(t,n)}return C$(i,e),i}catch(i){return console.error("Error initializing player:",i),null}},x$=s=>{let e=s.id;return e?.endsWith("_html5_api")&&(e=e.replace("_html5_api","")),e},A$=s=>{let e={},t=s.getAttribute("playlist-lang");return t&&(e.language=t),e},C$=(s,e)=>{let i=e[0]?.sources?.[0]?.src;i&&s.src({src:i,type:"application/x-mpegURL"})},w$=(s,e,t)=>{s.playlist(e),s.playlistUi({el:t})},I$=(s,e,t)=>{R$(s,e),O$(s),M$(s,t,e)},D$=()=>{let s=document.querySelectorAll(Ws.videoContainer),e=()=>{let t=window.innerWidth>=y$.desktop;s.forEach(i=>L$(i,t))};e(),window.addEventListener("resize",e),s.forEach(t=>{t.querySelector(Ws.video)?.addEventListener("loadedmetadata",e)})},L$=(s,e)=>{let t=s.querySelector(Ws.video),i=s.querySelector(Ws.playlist),n=s.closest(`.${Iu.horizontalLayout}`);!i||(n?qC(i):e?k$(i,t):qC(i))},k$=(s,e)=>{s.classList.add(Iu.playlistVertical),s.classList.remove(Iu.playlistHorizontal),e&&(s.style.height=`${e.offsetHeight}px`)},qC=s=>{s.classList.remove(Iu.playlistVertical),s.classList.add(Iu.playlistHorizontal),s.style.height=""},R$=(s,e)=>{if(!s||!e)return;s.querySelectorAll(Ws.titleContainer).forEach(i=>{let n=i.querySelector(Ws.playlistName)?.textContent;if(!n)return;let r=e.find(a=>a.name===n);r?.dmPublishDate&&P$(i,r.dmPublishDate)})},P$=(s,e)=>{if(!s||!e)return;let t=document.createElement("span");t.classList.add(Iu.playlistDate),t.textContent=W$(e),s.appendChild(t)},O$=s=>{if(!s)return;let e=s.dataset?.nowplaying;if(!e)return;s.querySelectorAll(Ws.playlistItem).forEach(i=>{let n=i.querySelector(Ws.nowPlayingText);n&&(n.textContent=e)})},M$=(s,e,t)=>{if(!s||!e||!t)return;let i=s.querySelector(Ws.playlist),n=s.querySelectorAll(Ws.playlistItem);N$(i,s),F$(n,t,s),U$(e,n,s,t),H$(s,e,n),q$(e,s)},N$=(s,e)=>{if(s){s.setAttribute("role","navigation");let t=e?.dataset?.playlistAriaLabel;t&&s.setAttribute("aria-label",t)}},F$=(s,e,t)=>{!s||!e||!t||s.forEach((i,n)=>{if(!i)return;let r=e[n];if(!r)return;let a=$$(r,n+1,e.length,t);a&&i.setAttribute("aria-label",a),i.setAttribute("role","button"),i.setAttribute("tabindex","0"),B$(i)})},$$=(s,e,t,i)=>{if(!s)return"";let n=i?.dataset?.playlistItemAriaTemplate||i?.getAttribute("data-playlist-item-aria-template");return n?n.replace("{position}",e).replace("{total}",t).replace("{name}",s?.name||"").replace("{duration}",z$(s?.duration)).replace("{date}",s?.dmPublishDate||""):""},B$=s=>{!s||s.addEventListener("keydown",e=>{(e.key===yl||e.key===Hd)&&(e.preventDefault(),s.click())})},U$=(s,e,t,i)=>{!s||!e||(e.forEach((n,r)=>{!n||n.addEventListener("click",()=>uT(e,r))}),uT(e,0),s.on("playlistitem",()=>{let n=s.playlist.currentItem();uT(e,n)}))},uT=(s,e)=>{!s||s.forEach((t,i)=>{if(!t)return;i===e?(t.setAttribute("aria-current","true"),t.setAttribute("aria-selected","true")):(t.removeAttribute("aria-current"),t.setAttribute("aria-selected","false"))})},H$=(s,e,t)=>{if(!s||!e||!t)return;let i=e.el();V$(i),j$(t)},V$=s=>{let e=s?.querySelector(".vjs-control-bar");e&&e.querySelectorAll('button, [role="button"]').forEach(i=>{i.hasAttribute("tabindex")||i.setAttribute("tabindex","0")})},j$=s=>{!s||s.forEach((e,t)=>{!e||e.addEventListener("keydown",i=>{let n=G$(i.key,t,s.length);n!==null&&(i.preventDefault(),s[n].focus())})})},G$=(s,e,t)=>{let n={[vT]:()=>(e+1)%t,[_T]:()=>(e+1)%t,[yT]:()=>(e-1+t)%t,[TT]:()=>(e-1+t)%t,[bT]:()=>0,[ET]:()=>t-1}[s];return n?n():null},q$=(s,e)=>{!s||!e||s.ready(()=>{if(s.textTracks()?.length>0){let r=s.controlBar.getChild("SubsCapsButton")?.el();if(r){let a=e?.dataset?.captionsAriaLabel;a&&r.setAttribute("aria-label",a)}}})},z$=s=>{if(!s||s<=0)return"0 seconds";let e=Math.floor(s/3600),t=Math.floor(s%3600/60),i=s%60,n=[];return e>0&&n.push(`${e} ${e===1?"hour":"hours"}`),t>0&&n.push(`${t} ${t===1?"minute":"minutes"}`),i>0&&n.push(`${i} ${i===1?"second":"seconds"}`),n.join(", ")||"0 seconds"},W$=s=>{if(!s)return"";let t=new Date(s.split("T")[0]).toString().split(" ");return`${t[2]} ${t[1]}. ${t[3]}`};document.addEventListener("DOMContentLoaded",v$);})();
/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
/*! @name @videojs/http-streaming @version 3.17.2 @license Apache-2.0 */
/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */
/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */
/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */
/*! @name videojs-playlist @version 5.2.0 @license Apache-2.0 */
/*! @name videojs-playlist-ui @version 5.0.0 @license Apache-2.0 */
/**
 * @license
 * Video.js 8.23.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
